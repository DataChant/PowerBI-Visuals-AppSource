// https://d3js.org v7.3.0 Copyright 2010-2021 Mike Bostock
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).d3=t.d3||{})}(this,(function(t){"use strict";function n(t,n){return null==t||null==n?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function e(t){let e=t,r=t,i=t;function o(t,n,e=0,o=t.length){if(e<o){if(0!==r(n,n))return o;do{const r=e+o>>>1;i(t[r],n)<0?e=r+1:o=r}while(e<o)}return e}return 2!==t.length&&(e=(n,e)=>t(n)-e,r=n,i=(e,r)=>n(t(e),r)),{left:o,center:function(t,n,r=0,i=t.length){const a=o(t,n,r,i-1);return a>r&&e(t[a-1],n)>-e(t[a],n)?a-1:a},right:function(t,n,e=0,o=t.length){if(e<o){if(0!==r(n,n))return o;do{const r=e+o>>>1;i(t[r],n)<=0?e=r+1:o=r}while(e<o)}return e}}}function r(t){return null===t?NaN:+t}const i=e(n),o=i.right,a=i.left,u=e(r).center;var c=o;function f(t,n){let e=0;if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&++e;else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(i=+i)>=i&&++e}return e}function s(t){return 0|t.length}function l(t){return!(t>0)}function h(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function d(t,n){let e,r=0,i=0,o=0;if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&(e=n-i,i+=e/++r,o+=e*(n-i));else{let a=-1;for(let u of t)null!=(u=n(u,++a,t))&&(u=+u)>=u&&(e=u-i,i+=e/++r,o+=e*(u-i))}if(r>1)return o/(r-1)}function p(t,n){const e=d(t,n);return e?Math.sqrt(e):e}function g(t,n){let e,r;if(void 0===n)for(const n of t)null!=n&&(void 0===e?n>=n&&(e=r=n):(e>n&&(e=n),r<n&&(r=n)));else{let i=-1;for(let o of t)null!=(o=n(o,++i,t))&&(void 0===e?o>=o&&(e=r=o):(e>o&&(e=o),r<o&&(r=o)))}return[e,r]}class y{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const i=n[r],o=t+i,a=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);a&&(n[e++]=a),t=o}return n[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let n,e,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(n=o,e=t[--i],o=n+e,r=e-(o-n),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(e=2*r,n=o+e,e==n-o&&(o=n))}return o}}class InternMap extends Map{constructor(t,n=m){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=t)for(const[n,e]of t)this.set(n,e)}get(t){return super.get(v(this,t))}has(t){return super.has(v(this,t))}set(t,n){return super.set(_(this,t),n)}delete(t){return super.delete(b(this,t))}}class InternSet extends Set{constructor(t,n=m){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=t)for(const n of t)this.add(n)}has(t){return super.has(v(this,t))}add(t){return super.add(_(this,t))}delete(t){return super.delete(b(this,t))}}function v({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):e}function _({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):(t.set(r,e),e)}function b({_intern:t,_key:n},e){const r=n(e);return t.has(r)&&(e=t.get(r),t.delete(r)),e}function m(t){return null!==t&&"object"==typeof t?t.valueOf():t}function x(t){return t}function w(t,...n){return k(t,x,x,n)}function M(t,...n){return k(t,Array.from,x,n)}function A(t,n){for(let e=1,r=n.length;e<r;++e)t=t.flatMap((t=>t.pop().map((([n,e])=>[...t,n,e]))));return t}function T(t,n,...e){return k(t,x,n,e)}function S(t,n,...e){return k(t,Array.from,n,e)}function E(t){if(1!==t.length)throw new Error("duplicate key");return t[0]}function k(t,n,e,r){return function t(i,o){if(o>=r.length)return e(i);const a=new InternMap,u=r[o++];let c=-1;for(const t of i){const n=u(t,++c,i),e=a.get(n);e?e.push(t):a.set(n,[t])}for(const[n,e]of a)a.set(n,t(e,o));return n(a)}(t,0)}function N(t,n){return Array.from(n,(n=>t[n]))}function C(t,...n){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);let[e]=n;if(e&&2!==e.length||n.length>1){const r=Uint32Array.from(t,((t,n)=>n));return n.length>1?(n=n.map((n=>t.map(n))),r.sort(((t,e)=>{for(const r of n){const n=z(r[t],r[e]);if(n)return n}}))):(e=t.map(e),r.sort(((t,n)=>z(e[t],e[n])))),N(t,r)}return t.sort(P(e))}function P(t=n){if(t===n)return z;if("function"!=typeof t)throw new TypeError("compare is not a function");return(n,e)=>{const r=t(n,e);return r||0===r?r:(0===t(e,e))-(0===t(n,n))}}function z(t,n){return(null==t||!(t>=t))-(null==n||!(n>=n))||(t<n?-1:t>n?1:0)}var D=Array.prototype.slice;function R(t){return()=>t}var F=Math.sqrt(50),q=Math.sqrt(10),O=Math.sqrt(2);function U(t,n,e){var r,i,o,a,u=-1;if(e=+e,(t=+t)===(n=+n)&&e>0)return[t];if((r=n<t)&&(i=t,t=n,n=i),0===(a=I(t,n,e))||!isFinite(a))return[];if(a>0){let e=Math.round(t/a),r=Math.round(n/a);for(e*a<t&&++e,r*a>n&&--r,o=new Array(i=r-e+1);++u<i;)o[u]=(e+u)*a}else{a=-a;let e=Math.round(t*a),r=Math.round(n*a);for(e/a<t&&++e,r/a>n&&--r,o=new Array(i=r-e+1);++u<i;)o[u]=(e+u)/a}return r&&o.reverse(),o}function I(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=F?10:o>=q?5:o>=O?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=F?10:o>=q?5:o>=O?2:1)}function B(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=F?i*=10:o>=q?i*=5:o>=O&&(i*=2),n<t?-i:i}function Y(t,n,e){let r;for(;;){const i=I(t,n,e);if(i===r||0===i||!isFinite(i))return[t,n];i>0?(t=Math.floor(t/i)*i,n=Math.ceil(n/i)*i):i<0&&(t=Math.ceil(t*i)/i,n=Math.floor(n*i)/i),r=i}}function L(t){return Math.ceil(Math.log(f(t))/Math.LN2)+1}function j(){var t=x,n=g,e=L;function r(r){Array.isArray(r)||(r=Array.from(r));var i,o,a=r.length,u=new Array(a);for(i=0;i<a;++i)u[i]=t(r[i],i,r);var f=n(u),s=f[0],l=f[1],h=e(u,s,l);if(!Array.isArray(h)){const t=l,e=+h;if(n===g&&([s,l]=Y(s,l,e)),(h=U(s,l,e))[h.length-1]>=l)if(t>=l&&n===g){const t=I(s,l,e);isFinite(t)&&(t>0?l=(Math.floor(l/t)+1)*t:t<0&&(l=(Math.ceil(l*-t)+1)/-t))}else h.pop()}for(var d=h.length;h[0]<=s;)h.shift(),--d;for(;h[d-1]>l;)h.pop(),--d;var p,y=new Array(d+1);for(i=0;i<=d;++i)(p=y[i]=[]).x0=i>0?h[i-1]:s,p.x1=i<d?h[i]:l;for(i=0;i<a;++i)null!=(o=u[i])&&s<=o&&o<=l&&y[c(h,o,0,d)].push(r[i]);return y}return r.value=function(n){return arguments.length?(t="function"==typeof n?n:R(n),r):t},r.domain=function(t){return arguments.length?(n="function"==typeof t?t:R([t[0],t[1]]),r):n},r.thresholds=function(t){return arguments.length?(e="function"==typeof t?t:Array.isArray(t)?R(D.call(t)):R(t),r):e},r}function H(t,n){let e;if(void 0===n)for(const n of t)null!=n&&(e<n||void 0===e&&n>=n)&&(e=n);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(e<i||void 0===e&&i>=i)&&(e=i)}return e}function X(t,n){let e;if(void 0===n)for(const n of t)null!=n&&(e>n||void 0===e&&n>=n)&&(e=n);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(e>i||void 0===e&&i>=i)&&(e=i)}return e}function G(t,n,e=0,r=t.length-1,i){for(i=void 0===i?z:P(i);r>e;){if(r-e>600){const o=r-e+1,a=n-e+1,u=Math.log(o),c=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*c*(o-c)/o)*(a-o/2<0?-1:1);G(t,n,Math.max(e,Math.floor(n-a*c/o+f)),Math.min(r,Math.floor(n+(o-a)*c/o+f)),i)}const o=t[n];let a=e,u=r;for(V(t,e,n),i(t[r],o)>0&&V(t,e,r);a<u;){for(V(t,a,u),++a,--u;i(t[a],o)<0;)++a;for(;i(t[u],o)>0;)--u}0===i(t[e],o)?V(t,e,u):(++u,V(t,u,r)),u<=n&&(e=u+1),n<=u&&(r=u-1)}return t}function V(t,n,e){const r=t[n];t[n]=t[e],t[e]=r}function $(t,n,e){if(t=Float64Array.from(function*(t,n){if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&(yield n);else{let e=-1;for(let r of t)null!=(r=n(r,++e,t))&&(r=+r)>=r&&(yield r)}}(t,e)),r=t.length){if((n=+n)<=0||r<2)return X(t);if(n>=1)return H(t);var r,i=(r-1)*n,o=Math.floor(i),a=H(G(t,o).subarray(0,o+1));return a+(X(t.subarray(o+1))-a)*(i-o)}}function W(t,n,e=r){if(i=t.length){if((n=+n)<=0||i<2)return+e(t[0],0,t);if(n>=1)return+e(t[i-1],i-1,t);var i,o=(i-1)*n,a=Math.floor(o),u=+e(t[a],a,t);return u+(+e(t[a+1],a+1,t)-u)*(o-a)}}function Z(t,n){let e,r=-1,i=-1;if(void 0===n)for(const n of t)++i,null!=n&&(e<n||void 0===e&&n>=n)&&(e=n,r=i);else for(let o of t)null!=(o=n(o,++i,t))&&(e<o||void 0===e&&o>=o)&&(e=o,r=i);return r}function K(t){return Array.from(function*(t){for(const n of t)yield*n}(t))}function Q(t,n){let e,r=-1,i=-1;if(void 0===n)for(const n of t)++i,null!=n&&(e>n||void 0===e&&n>=n)&&(e=n,r=i);else for(let o of t)null!=(o=n(o,++i,t))&&(e>o||void 0===e&&o>=o)&&(e=o,r=i);return r}function J(t,n){return[t,n]}function tt(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o}function nt(t,e=n){if(1===e.length)return Q(t,e);let r,i=-1,o=-1;for(const n of t)++o,(i<0?0===e(n,n):e(n,r)<0)&&(r=n,i=o);return i}var et=rt(Math.random);function rt(t){return function(n,e=0,r=n.length){let i=r-(e=+e);for(;i;){const r=t()*i--|0,o=n[i+e];n[i+e]=n[r+e],n[r+e]=o}return n}}function it(t){if(!(i=t.length))return[];for(var n=-1,e=X(t,ot),r=new Array(e);++n<e;)for(var i,o=-1,a=r[n]=new Array(i);++o<i;)a[o]=t[o][n];return r}function ot(t){return t.length}function at(t){return t instanceof InternSet?t:new InternSet(t)}function ut(t,n){const e=t[Symbol.iterator](),r=new Set;for(const t of n){const n=ct(t);if(r.has(n))continue;let i,o;for(;({value:i,done:o}=e.next());){if(o)return!1;const t=ct(i);if(r.add(t),Object.is(n,t))break}}return!0}function ct(t){return null!==t&&"object"==typeof t?t.valueOf():t}function ft(t){return t}var st=1e-6;function lt(t){return"translate("+t+",0)"}function ht(t){return"translate(0,"+t+")"}function dt(t){return n=>+t(n)}function pt(t,n){return n=Math.max(0,t.bandwidth()-2*n)/2,t.round()&&(n=Math.round(n)),e=>+t(e)+n}function gt(){return!this.__axis}function yt(t,n){var e=[],r=null,i=null,o=6,a=6,u=3,c="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,f=1===t||4===t?-1:1,s=4===t||2===t?"x":"y",l=1===t||3===t?lt:ht;function h(h){var d=null==r?n.ticks?n.ticks.apply(n,e):n.domain():r,p=null==i?n.tickFormat?n.tickFormat.apply(n,e):ft:i,g=Math.max(o,0)+u,y=n.range(),v=+y[0]+c,_=+y[y.length-1]+c,b=(n.bandwidth?pt:dt)(n.copy(),c),m=h.selection?h.selection():h,x=m.selectAll(".domain").data([null]),w=m.selectAll(".tick").data(d,n).order(),M=w.exit(),A=w.enter().append("g").attr("class","tick"),T=w.select("line"),S=w.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge(A),T=T.merge(A.append("line").attr("stroke","currentColor").attr(s+"2",f*o)),S=S.merge(A.append("text").attr("fill","currentColor").attr(s,f*g).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),h!==m&&(x=x.transition(h),w=w.transition(h),T=T.transition(h),S=S.transition(h),M=M.transition(h).attr("opacity",st).attr("transform",(function(t){return isFinite(t=b(t))?l(t+c):this.getAttribute("transform")})),A.attr("opacity",st).attr("transform",(function(t){var n=this.parentNode.__axis;return l((n&&isFinite(n=n(t))?n:b(t))+c)}))),M.remove(),x.attr("d",4===t||2===t?a?"M"+f*a+","+v+"H"+c+"V"+_+"H"+f*a:"M"+c+","+v+"V"+_:a?"M"+v+","+f*a+"V"+c+"H"+_+"V"+f*a:"M"+v+","+c+"H"+_),w.attr("opacity",1).attr("transform",(function(t){return l(b(t)+c)})),T.attr(s+"2",f*o),S.attr(s,f*g).text(p),m.filter(gt).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),m.each((function(){this.__axis=b}))}return h.scale=function(t){return arguments.length?(n=t,h):n},h.ticks=function(){return e=Array.from(arguments),h},h.tickArguments=function(t){return arguments.length?(e=null==t?[]:Array.from(t),h):e.slice()},h.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),h):r&&r.slice()},h.tickFormat=function(t){return arguments.length?(i=t,h):i},h.tickSize=function(t){return arguments.length?(o=a=+t,h):o},h.tickSizeInner=function(t){return arguments.length?(o=+t,h):o},h.tickSizeOuter=function(t){return arguments.length?(a=+t,h):a},h.tickPadding=function(t){return arguments.length?(u=+t,h):u},h.offset=function(t){return arguments.length?(c=+t,h):c},h}var vt={value:()=>{}};function _t(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new bt(r)}function bt(t){this._=t}function mt(t,n){return t.trim().split(/^|\s+/).map((function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))}function xt(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function wt(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=vt,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}bt.prototype=_t.prototype={constructor:bt,on:function(t,n){var e,r=this._,i=mt(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++o<a;)if(e=(t=i[o]).type)r[e]=wt(r[e],t.name,n);else if(null==n)for(e in r)r[e]=wt(r[e],t.name,null);return this}for(;++o<a;)if((e=(t=i[o]).type)&&(e=xt(r[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new bt(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var Mt="http://www.w3.org/1999/xhtml",At={svg:"http://www.w3.org/2000/svg",xhtml:Mt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Tt(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),At.hasOwnProperty(n)?{space:At[n],local:t}:t}function St(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===Mt&&n.documentElement.namespaceURI===Mt?n.createElement(t):n.createElementNS(e,t)}}function Et(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function kt(t){var n=Tt(t);return(n.local?Et:St)(n)}function Nt(){}function Ct(t){return null==t?Nt:function(){return this.querySelector(t)}}function Pt(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function zt(){return[]}function Dt(t){return null==t?zt:function(){return this.querySelectorAll(t)}}function Rt(t){return function(){return this.matches(t)}}function Ft(t){return function(n){return n.matches(t)}}var qt=Array.prototype.find;function Ot(){return this.firstElementChild}var Ut=Array.prototype.filter;function It(){return Array.from(this.children)}function Bt(t){return new Array(t.length)}function Yt(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function Lt(t){return function(){return t}}function jt(t,n,e,r,i,o){for(var a,u=0,c=n.length,f=o.length;u<f;++u)(a=n[u])?(a.__data__=o[u],r[u]=a):e[u]=new Yt(t,o[u]);for(;u<c;++u)(a=n[u])&&(i[u]=a)}function Ht(t,n,e,r,i,o,a){var u,c,f,s=new Map,l=n.length,h=o.length,d=new Array(l);for(u=0;u<l;++u)(c=n[u])&&(d[u]=f=a.call(c,c.__data__,u,n)+"",s.has(f)?i[u]=c:s.set(f,c));for(u=0;u<h;++u)f=a.call(t,o[u],u,o)+"",(c=s.get(f))?(r[u]=c,c.__data__=o[u],s.delete(f)):e[u]=new Yt(t,o[u]);for(u=0;u<l;++u)(c=n[u])&&s.get(d[u])===c&&(i[u]=c)}function Xt(t){return t.__data__}function Gt(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Vt(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function $t(t){return function(){this.removeAttribute(t)}}function Wt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Zt(t,n){return function(){this.setAttribute(t,n)}}function Kt(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function Qt(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function Jt(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function tn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function nn(t){return function(){this.style.removeProperty(t)}}function en(t,n,e){return function(){this.style.setProperty(t,n,e)}}function rn(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function on(t,n){return t.style.getPropertyValue(n)||tn(t).getComputedStyle(t,null).getPropertyValue(n)}function an(t){return function(){delete this[t]}}function un(t,n){return function(){this[t]=n}}function cn(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function fn(t){return t.trim().split(/^|\s+/)}function sn(t){return t.classList||new ln(t)}function ln(t){this._node=t,this._names=fn(t.getAttribute("class")||"")}function hn(t,n){for(var e=sn(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function dn(t,n){for(var e=sn(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function pn(t){return function(){hn(this,t)}}function gn(t){return function(){dn(this,t)}}function yn(t,n){return function(){(n.apply(this,arguments)?hn:dn)(this,t)}}function vn(){this.textContent=""}function _n(t){return function(){this.textContent=t}}function bn(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function mn(){this.innerHTML=""}function xn(t){return function(){this.innerHTML=t}}function wn(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}function Mn(){this.nextSibling&&this.parentNode.appendChild(this)}function An(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Tn(){return null}function Sn(){var t=this.parentNode;t&&t.removeChild(this)}function En(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function kn(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Nn(t){return t.trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}))}function Cn(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.options);++i?n.length=i:delete this.__on}}}function Pn(t,n,e){return function(){var r,i=this.__on,o=function(t){return function(n){t.call(this,n,this.__data__)}}(n);if(i)for(var a=0,u=i.length;a<u;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=e),void(r.value=n);this.addEventListener(t.type,o,e),r={type:t.type,name:t.name,value:n,listener:o,options:e},i?i.push(r):this.__on=[r]}}function zn(t,n,e){var r=tn(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function Dn(t,n){return function(){return zn(this,t,n)}}function Rn(t,n){return function(){return zn(this,t,n.apply(this,arguments))}}Yt.prototype={constructor:Yt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},ln.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Fn=[null];function qn(t,n){this._groups=t,this._parents=n}function On(){return new qn([[document.documentElement]],Fn)}function Un(t){return"string"==typeof t?new qn([[document.querySelector(t)]],[document.documentElement]):new qn([[t]],Fn)}qn.prototype=On.prototype={constructor:qn,select:function(t){"function"!=typeof t&&(t=Ct(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a,u=n[i],c=u.length,f=r[i]=new Array(c),s=0;s<c;++s)(o=u[s])&&(a=t.call(o,o.__data__,s,u))&&("__data__"in o&&(a.__data__=o.__data__),f[s]=a);return new qn(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return Pt(t.apply(this,arguments))}}(t):Dt(t);for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var a,u=n[o],c=u.length,f=0;f<c;++f)(a=u[f])&&(r.push(t.call(a,a.__data__,f,u)),i.push(a));return new qn(r,i)},selectChild:function(t){return this.select(null==t?Ot:function(t){return function(){return qt.call(this.children,t)}}("function"==typeof t?t:Ft(t)))},selectChildren:function(t){return this.selectAll(null==t?It:function(t){return function(){return Ut.call(this.children,t)}}("function"==typeof t?t:Ft(t)))},filter:function(t){"function"!=typeof t&&(t=Rt(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],u=a.length,c=r[i]=[],f=0;f<u;++f)(o=a[f])&&t.call(o,o.__data__,f,a)&&c.push(o);return new qn(r,this._parents)},data:function(t,n){if(!arguments.length)return Array.from(this,Xt);var e=n?Ht:jt,r=this._parents,i=this._groups;"function"!=typeof t&&(t=Lt(t));for(var o=i.length,a=new Array(o),u=new Array(o),c=new Array(o),f=0;f<o;++f){var s=r[f],l=i[f],h=l.length,d=Gt(t.call(s,s&&s.__data__,f,r)),p=d.length,g=u[f]=new Array(p),y=a[f]=new Array(p),v=c[f]=new Array(h);e(s,l,g,y,v,d,n);for(var _,b,m=0,x=0;m<p;++m)if(_=g[m]){for(m>=x&&(x=m+1);!(b=y[x])&&++x<p;);_._next=b||null}}return(a=new qn(a,r))._enter=u,a._exit=c,a},enter:function(){return new qn(this._enter||this._groups.map(Bt),this._parents)},exit:function(){return new qn(this._exit||this._groups.map(Bt),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=n&&(i=n(i))&&(i=i.selection()),null==e?o.remove():e(o),r&&i?r.merge(i).order():i},merge:function(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,o=r.length,a=Math.min(i,o),u=new Array(i),c=0;c<a;++c)for(var f,s=e[c],l=r[c],h=s.length,d=u[c]=new Array(h),p=0;p<h;++p)(f=s[p]||l[p])&&(d[p]=f);for(;c<i;++c)u[c]=e[c];return new qn(u,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=Vt);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a,u=e[o],c=u.length,f=i[o]=new Array(c),s=0;s<c;++s)(a=u[s])&&(f[s]=a);f.sort(n)}return new qn(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let t=0;for(const n of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,n){var e=Tt(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?Wt:$t:"function"==typeof n?e.local?Jt:Qt:e.local?Kt:Zt)(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?nn:"function"==typeof n?rn:en)(t,n,null==e?"":e)):on(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?an:"function"==typeof n?cn:un)(t,n)):this.node()[t]},classed:function(t,n){var e=fn(t+"");if(arguments.length<2){for(var r=sn(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?yn:n?pn:gn)(e,n))},text:function(t){return arguments.length?this.each(null==t?vn:("function"==typeof t?bn:_n)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?mn:("function"==typeof t?wn:xn)(t)):this.node().innerHTML},raise:function(){return this.each(Mn)},lower:function(){return this.each(An)},append:function(t){var n="function"==typeof t?t:kt(t);return this.select((function(){return this.appendChild(n.apply(this,arguments))}))},insert:function(t,n){var e="function"==typeof t?t:kt(t),r=null==n?Tn:"function"==typeof n?n:Ct(n);return this.select((function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Sn)},clone:function(t){return this.select(t?kn:En)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=Nn(t+""),a=o.length;if(!(arguments.length<2)){for(u=n?Pn:Cn,r=0;r<a;++r)this.each(u(o[r],n,e));return this}var u=this.node().__on;if(u)for(var c,f=0,s=u.length;f<s;++f)for(r=0,c=u[f];r<a;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(t,n){return this.each(("function"==typeof n?Rn:Dn)(t,n))},[Symbol.iterator]:function*(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r,i=t[n],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};var In=0;function Bn(){return new Yn}function Yn(){this._="@"+(++In).toString(36)}function Ln(t){let n;for(;n=t.sourceEvent;)t=n;return t}function jn(t,n){if(t=Ln(t),void 0===n&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(n.getScreenCTM().inverse())).x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]}Yn.prototype=Bn.prototype={constructor:Yn,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};const Hn={passive:!1},Xn={capture:!0,passive:!1};function Gn(t){t.stopImmediatePropagation()}function Vn(t){t.preventDefault(),t.stopImmediatePropagation()}function $n(t){var n=t.document.documentElement,e=Un(t).on("dragstart.drag",Vn,Xn);"onselectstart"in n?e.on("selectstart.drag",Vn,Xn):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Wn(t,n){var e=t.document.documentElement,r=Un(t).on("dragstart.drag",null);n&&(r.on("click.drag",Vn,Xn),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}var Zn=t=>()=>t;function Kn(t,{sourceEvent:n,subject:e,target:r,identifier:i,active:o,x:a,y:u,dx:c,dy:f,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:s}})}function Qn(t){return!t.ctrlKey&&!t.button}function Jn(){return this.parentNode}function te(t,n){return null==n?{x:t.x,y:t.y}:n}function ne(){return navigator.maxTouchPoints||"ontouchstart"in this}function ee(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function re(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function ie(){}Kn.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var oe=.7,ae=1/oe,ue="\\s*([+-]?\\d+)\\s*",ce="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",fe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",se=/^#([0-9a-f]{3,8})$/,le=new RegExp("^rgb\\("+[ue,ue,ue]+"\\)$"),he=new RegExp("^rgb\\("+[fe,fe,fe]+"\\)$"),de=new RegExp("^rgba\\("+[ue,ue,ue,ce]+"\\)$"),pe=new RegExp("^rgba\\("+[fe,fe,fe,ce]+"\\)$"),ge=new RegExp("^hsl\\("+[ce,fe,fe]+"\\)$"),ye=new RegExp("^hsla\\("+[ce,fe,fe,ce]+"\\)$"),ve={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function _e(){return this.rgb().formatHex()}function be(){return this.rgb().formatRgb()}function me(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=se.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?xe(n):3===e?new Te(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?we(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?we(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=le.exec(t))?new Te(n[1],n[2],n[3],1):(n=he.exec(t))?new Te(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=de.exec(t))?we(n[1],n[2],n[3],n[4]):(n=pe.exec(t))?we(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=ge.exec(t))?Ne(n[1],n[2]/100,n[3]/100,1):(n=ye.exec(t))?Ne(n[1],n[2]/100,n[3]/100,n[4]):ve.hasOwnProperty(t)?xe(ve[t]):"transparent"===t?new Te(NaN,NaN,NaN,0):null}function xe(t){return new Te(t>>16&255,t>>8&255,255&t,1)}function we(t,n,e,r){return r<=0&&(t=n=e=NaN),new Te(t,n,e,r)}function Me(t){return t instanceof ie||(t=me(t)),t?new Te((t=t.rgb()).r,t.g,t.b,t.opacity):new Te}function Ae(t,n,e,r){return 1===arguments.length?Me(t):new Te(t,n,e,null==r?1:r)}function Te(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function Se(){return"#"+ke(this.r)+ke(this.g)+ke(this.b)}function Ee(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function ke(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Ne(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new ze(t,n,e,r)}function Ce(t){if(t instanceof ze)return new ze(t.h,t.s,t.l,t.opacity);if(t instanceof ie||(t=me(t)),!t)return new ze;if(t instanceof ze)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),a=NaN,u=o-i,c=(o+i)/2;return u?(a=n===o?(e-r)/u+6*(e<r):e===o?(r-n)/u+2:(n-e)/u+4,u/=c<.5?o+i:2-o-i,a*=60):u=c>0&&c<1?0:a,new ze(a,u,c,t.opacity)}function Pe(t,n,e,r){return 1===arguments.length?Ce(t):new ze(t,n,e,null==r?1:r)}function ze(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function De(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}ee(ie,me,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:_e,formatHex:_e,formatHsl:function(){return Ce(this).formatHsl()},formatRgb:be,toString:be}),ee(Te,Ae,re(ie,{brighter:function(t){return t=null==t?ae:Math.pow(ae,t),new Te(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?oe:Math.pow(oe,t),new Te(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Se,formatHex:Se,formatRgb:Ee,toString:Ee})),ee(ze,Pe,re(ie,{brighter:function(t){return t=null==t?ae:Math.pow(ae,t),new ze(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?oe:Math.pow(oe,t),new ze(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new Te(De(t>=240?t-240:t+120,i,r),De(t,i,r),De(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const Re=Math.PI/180,Fe=180/Math.PI,qe=.96422,Oe=.82521,Ue=4/29,Ie=6/29,Be=3*Ie*Ie;function Ye(t){if(t instanceof je)return new je(t.l,t.a,t.b,t.opacity);if(t instanceof Ze)return Ke(t);t instanceof Te||(t=Me(t));var n,e,r=Ve(t.r),i=Ve(t.g),o=Ve(t.b),a=He((.2225045*r+.7168786*i+.0606169*o)/1);return r===i&&i===o?n=e=a:(n=He((.4360747*r+.3850649*i+.1430804*o)/qe),e=He((.0139322*r+.0971045*i+.7141733*o)/Oe)),new je(116*a-16,500*(n-a),200*(a-e),t.opacity)}function Le(t,n,e,r){return 1===arguments.length?Ye(t):new je(t,n,e,null==r?1:r)}function je(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function He(t){return t>.008856451679035631?Math.pow(t,1/3):t/Be+Ue}function Xe(t){return t>Ie?t*t*t:Be*(t-Ue)}function Ge(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ve(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function $e(t){if(t instanceof Ze)return new Ze(t.h,t.c,t.l,t.opacity);if(t instanceof je||(t=Ye(t)),0===t.a&&0===t.b)return new Ze(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*Fe;return new Ze(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function We(t,n,e,r){return 1===arguments.length?$e(t):new Ze(t,n,e,null==r?1:r)}function Ze(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function Ke(t){if(isNaN(t.h))return new je(t.l,0,0,t.opacity);var n=t.h*Re;return new je(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}ee(je,Le,re(ie,{brighter:function(t){return new je(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new je(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return new Te(Ge(3.1338561*(n=qe*Xe(n))-1.6168667*(t=1*Xe(t))-.4906146*(e=Oe*Xe(e))),Ge(-.9787684*n+1.9161415*t+.033454*e),Ge(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}})),ee(Ze,We,re(ie,{brighter:function(t){return new Ze(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Ze(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Ke(this).rgb()}}));var Qe=-.14861,Je=1.78277,tr=-.29227,nr=-.90649,er=1.97294,rr=er*nr,ir=er*Je,or=Je*tr-nr*Qe;function ar(t){if(t instanceof cr)return new cr(t.h,t.s,t.l,t.opacity);t instanceof Te||(t=Me(t));var n=t.r/255,e=t.g/255,r=t.b/255,i=(or*r+rr*n-ir*e)/(or+rr-ir),o=r-i,a=(er*(e-i)-tr*o)/nr,u=Math.sqrt(a*a+o*o)/(er*i*(1-i)),c=u?Math.atan2(a,o)*Fe-120:NaN;return new cr(c<0?c+360:c,u,i,t.opacity)}function ur(t,n,e,r){return 1===arguments.length?ar(t):new cr(t,n,e,null==r?1:r)}function cr(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function fr(t,n,e,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*n+(4-6*o+3*a)*e+(1+3*t+3*o-3*a)*r+a*i)/6}function sr(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,u=r<n-1?t[r+2]:2*o-i;return fr((e-r/n)*n,a,i,o,u)}}function lr(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n),i=t[(r+n-1)%n],o=t[r%n],a=t[(r+1)%n],u=t[(r+2)%n];return fr((e-r/n)*n,i,o,a,u)}}ee(cr,ur,re(ie,{brighter:function(t){return t=null==t?ae:Math.pow(ae,t),new cr(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?oe:Math.pow(oe,t),new cr(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Re,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new Te(255*(n+e*(Qe*r+Je*i)),255*(n+e*(tr*r+nr*i)),255*(n+e*(er*r)),this.opacity)}}));var hr=t=>()=>t;function dr(t,n){return function(e){return t+e*n}}function pr(t,n){var e=n-t;return e?dr(t,e>180||e<-180?e-360*Math.round(e/360):e):hr(isNaN(t)?n:t)}function gr(t){return 1==(t=+t)?yr:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):hr(isNaN(n)?e:n)}}function yr(t,n){var e=n-t;return e?dr(t,e):hr(isNaN(t)?n:t)}var vr=function t(n){var e=gr(n);function r(t,n){var r=e((t=Ae(t)).r,(n=Ae(n)).r),i=e(t.g,n.g),o=e(t.b,n.b),a=yr(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=i(n),t.b=o(n),t.opacity=a(n),t+""}}return r.gamma=t,r}(1);function _r(t){return function(n){var e,r,i=n.length,o=new Array(i),a=new Array(i),u=new Array(i);for(e=0;e<i;++e)r=Ae(n[e]),o[e]=r.r||0,a[e]=r.g||0,u[e]=r.b||0;return o=t(o),a=t(a),u=t(u),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=u(t),r+""}}}var br=_r(sr),mr=_r(lr);function xr(t,n){n||(n=[]);var e,r=t?Math.min(n.length,t.length):0,i=n.slice();return function(o){for(e=0;e<r;++e)i[e]=t[e]*(1-o)+n[e]*o;return i}}function wr(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Mr(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(e=0;e<i;++e)o[e]=Cr(t[e],n[e]);for(;e<r;++e)a[e]=n[e];return function(t){for(e=0;e<i;++e)a[e]=o[e](t);return a}}function Ar(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function Tr(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function Sr(t,n){var e,r={},i={};for(e in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)e in t?r[e]=Cr(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}var Er=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kr=new RegExp(Er.source,"g");function Nr(t,n){var e,r,i,o=Er.lastIndex=kr.lastIndex=0,a=-1,u=[],c=[];for(t+="",n+="";(e=Er.exec(t))&&(r=kr.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(e=e[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,c.push({i:a,x:Tr(e,r)})),o=kr.lastIndex;return o<n.length&&(i=n.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?c[0]?function(t){return function(n){return t(n)+""}}(c[0].x):function(t){return function(){return t}}(n):(n=c.length,function(t){for(var e,r=0;r<n;++r)u[(e=c[r]).i]=e.x(t);return u.join("")})}function Cr(t,n){var e,r=typeof n;return null==n||"boolean"===r?hr(n):("number"===r?Tr:"string"===r?(e=me(n))?(n=e,vr):Nr:n instanceof me?vr:n instanceof Date?Ar:wr(n)?xr:Array.isArray(n)?Mr:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?Sr:Tr)(t,n)}function Pr(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}var zr,Dr=180/Math.PI,Rr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Fr(t,n,e,r,i,o){var a,u,c;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(c=t*e+n*r)&&(e-=t*c,r-=n*c),(u=Math.sqrt(e*e+r*r))&&(e/=u,r/=u,c/=u),t*r<n*e&&(t=-t,n=-n,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*Dr,skewX:Math.atan(c)*Dr,scaleX:a,scaleY:u}}function qr(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var u=[],c=[];return o=t(o),a=t(a),function(t,r,i,o,a,u){if(t!==i||r!==o){var c=a.push("translate(",null,n,null,e);u.push({i:c-4,x:Tr(t,i)},{i:c-2,x:Tr(r,o)})}else(i||o)&&a.push("translate("+i+n+o+e)}(o.translateX,o.translateY,a.translateX,a.translateY,u,c),function(t,n,e,o){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),o.push({i:e.push(i(e)+"rotate(",null,r)-2,x:Tr(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}(o.rotate,a.rotate,u,c),function(t,n,e,o){t!==n?o.push({i:e.push(i(e)+"skewX(",null,r)-2,x:Tr(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}(o.skewX,a.skewX,u,c),function(t,n,e,r,o,a){if(t!==e||n!==r){var u=o.push(i(o)+"scale(",null,",",null,")");a.push({i:u-4,x:Tr(t,e)},{i:u-2,x:Tr(n,r)})}else 1===e&&1===r||o.push(i(o)+"scale("+e+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,u,c),o=a=null,function(t){for(var n,e=-1,r=c.length;++e<r;)u[(n=c[e]).i]=n.x(t);return u.join("")}}}var Or=qr((function(t){const n=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?Rr:Fr(n.a,n.b,n.c,n.d,n.e,n.f)}),"px, ","px)","deg)"),Ur=qr((function(t){return null==t?Rr:(zr||(zr=document.createElementNS("http://www.w3.org/2000/svg","g")),zr.setAttribute("transform",t),(t=zr.transform.baseVal.consolidate())?Fr((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Rr)}),", ",")",")");function Ir(t){return((t=Math.exp(t))+1/t)/2}var Br=function t(n,e,r){function i(t,i){var o,a,u=t[0],c=t[1],f=t[2],s=i[0],l=i[1],h=i[2],d=s-u,p=l-c,g=d*d+p*p;if(g<1e-12)a=Math.log(h/f)/n,o=function(t){return[u+t*d,c+t*p,f*Math.exp(n*t*a)]};else{var y=Math.sqrt(g),v=(h*h-f*f+r*g)/(2*f*e*y),_=(h*h-f*f-r*g)/(2*h*e*y),b=Math.log(Math.sqrt(v*v+1)-v),m=Math.log(Math.sqrt(_*_+1)-_);a=(m-b)/n,o=function(t){var r=t*a,i=Ir(b),o=f/(e*y)*(i*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(n*r+b)-function(t){return((t=Math.exp(t))-1/t)/2}(b));return[u+o*d,c+o*p,f*i/Ir(n*r+b)]}}return o.duration=1e3*a*n/Math.SQRT2,o}return i.rho=function(n){var e=Math.max(.001,+n),r=e*e;return t(e,r,r*r)},i}(Math.SQRT2,2,4);function Yr(t){return function(n,e){var r=t((n=Pe(n)).h,(e=Pe(e)).h),i=yr(n.s,e.s),o=yr(n.l,e.l),a=yr(n.opacity,e.opacity);return function(t){return n.h=r(t),n.s=i(t),n.l=o(t),n.opacity=a(t),n+""}}}var Lr=Yr(pr),jr=Yr(yr);function Hr(t){return function(n,e){var r=t((n=We(n)).h,(e=We(e)).h),i=yr(n.c,e.c),o=yr(n.l,e.l),a=yr(n.opacity,e.opacity);return function(t){return n.h=r(t),n.c=i(t),n.l=o(t),n.opacity=a(t),n+""}}}var Xr=Hr(pr),Gr=Hr(yr);function Vr(t){return function n(e){function r(n,r){var i=t((n=ur(n)).h,(r=ur(r)).h),o=yr(n.s,r.s),a=yr(n.l,r.l),u=yr(n.opacity,r.opacity);return function(t){return n.h=i(t),n.s=o(t),n.l=a(Math.pow(t,e)),n.opacity=u(t),n+""}}return e=+e,r.gamma=n,r}(1)}var $r=Vr(pr),Wr=Vr(yr);function Zr(t,n){void 0===n&&(n=t,t=Cr);for(var e=0,r=n.length-1,i=n[0],o=new Array(r<0?0:r);e<r;)o[e]=t(i,i=n[++e]);return function(t){var n=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[n](t-n)}}var Kr,Qr,Jr=0,ti=0,ni=0,ei=0,ri=0,ii=0,oi="object"==typeof performance&&performance.now?performance:Date,ai="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ui(){return ri||(ai(ci),ri=oi.now()+ii)}function ci(){ri=0}function fi(){this._call=this._time=this._next=null}function si(t,n,e){var r=new fi;return r.restart(t,n,e),r}function li(){ui(),++Jr;for(var t,n=Kr;n;)(t=ri-n._time)>=0&&n._call.call(void 0,t),n=n._next;--Jr}function hi(){ri=(ei=oi.now())+ii,Jr=ti=0;try{li()}finally{Jr=0,function(){var t,n,e=Kr,r=1/0;for(;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Kr=n);Qr=t,pi(r)}(),ri=0}}function di(){var t=oi.now(),n=t-ei;n>1e3&&(ii-=n,ei=t)}function pi(t){Jr||(ti&&(ti=clearTimeout(ti)),t-ri>24?(t<1/0&&(ti=setTimeout(hi,t-oi.now()-ii)),ni&&(ni=clearInterval(ni))):(ni||(ei=oi.now(),ni=setInterval(di,1e3)),Jr=1,ai(hi)))}function gi(t,n,e){var r=new fi;return n=null==n?0:+n,r.restart((e=>{r.stop(),t(e+n)}),n,e),r}fi.prototype=si.prototype={constructor:fi,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?ui():+e)+(null==n?0:+n),this._next||Qr===this||(Qr?Qr._next=this:Kr=this,Qr=this),this._call=t,this._time=e,pi()},stop:function(){this._call&&(this._call=null,this._time=1/0,pi())}};var yi=_t("start","end","cancel","interrupt"),vi=[];function _i(t,n,e,r,i,o){var a=t.__transition;if(a){if(e in a)return}else t.__transition={};!function(t,n,e){var r,i=t.__transition;function o(t){e.state=1,e.timer.restart(a,e.delay,e.time),e.delay<=t&&a(t-e.delay)}function a(o){var f,s,l,h;if(1!==e.state)return c();for(f in i)if((h=i[f]).name===e.name){if(3===h.state)return gi(a);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[f]):+f<n&&(h.state=6,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[f])}if(gi((function(){3===e.state&&(e.state=4,e.timer.restart(u,e.delay,e.time),u(o))})),e.state=2,e.on.call("start",t,t.__data__,e.index,e.group),2===e.state){for(e.state=3,r=new Array(l=e.tween.length),f=0,s=-1;f<l;++f)(h=e.tween[f].value.call(t,t.__data__,e.index,e.group))&&(r[++s]=h);r.length=s+1}}function u(n){for(var i=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(c),e.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);5===e.state&&(e.on.call("end",t,t.__data__,e.index,e.group),c())}function c(){for(var r in e.state=6,e.timer.stop(),delete i[n],i)return;delete t.__transition}i[n]=e,e.timer=si(o,0,e.time)}(t,e,{name:n,index:r,group:i,on:yi,tween:vi,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function bi(t,n){var e=xi(t,n);if(e.state>0)throw new Error("too late; already scheduled");return e}function mi(t,n){var e=xi(t,n);if(e.state>3)throw new Error("too late; already running");return e}function xi(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function wi(t,n){var e,r,i,o=t.__transition,a=!0;if(o){for(i in n=null==n?null:n+"",o)(e=o[i]).name===n?(r=e.state>2&&e.state<5,e.state=6,e.timer.stop(),e.on.call(r?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete o[i]):a=!1;a&&delete t.__transition}}function Mi(t,n){var e,r;return function(){var i=mi(this,t),o=i.tween;if(o!==e)for(var a=0,u=(r=e=o).length;a<u;++a)if(r[a].name===n){(r=r.slice()).splice(a,1);break}i.tween=r}}function Ai(t,n,e){var r,i;if("function"!=typeof e)throw new Error;return function(){var o=mi(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:n,value:e},c=0,f=i.length;c<f;++c)if(i[c].name===n){i[c]=u;break}c===f&&i.push(u)}o.tween=i}}function Ti(t,n,e){var r=t._id;return t.each((function(){var t=mi(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)})),function(t){return xi(t,r).value[n]}}function Si(t,n){var e;return("number"==typeof n?Tr:n instanceof me?vr:(e=me(n))?(n=e,vr):Nr)(t,n)}function Ei(t){return function(){this.removeAttribute(t)}}function ki(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ni(t,n,e){var r,i,o=e+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=n(r=a,e)}}function Ci(t,n,e){var r,i,o=e+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=n(r=a,e)}}function Pi(t,n,e){var r,i,o;return function(){var a,u,c=e(this);if(null!=c)return(a=this.getAttribute(t))===(u=c+"")?null:a===r&&u===i?o:(i=u,o=n(r=a,c));this.removeAttribute(t)}}function zi(t,n,e){var r,i,o;return function(){var a,u,c=e(this);if(null!=c)return(a=this.getAttributeNS(t.space,t.local))===(u=c+"")?null:a===r&&u===i?o:(i=u,o=n(r=a,c));this.removeAttributeNS(t.space,t.local)}}function Di(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function Ri(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function Fi(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&Ri(t,i)),e}return i._value=n,i}function qi(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&Di(t,i)),e}return i._value=n,i}function Oi(t,n){return function(){bi(this,t).delay=+n.apply(this,arguments)}}function Ui(t,n){return n=+n,function(){bi(this,t).delay=n}}function Ii(t,n){return function(){mi(this,t).duration=+n.apply(this,arguments)}}function Bi(t,n){return n=+n,function(){mi(this,t).duration=n}}function Yi(t,n){if("function"!=typeof n)throw new Error;return function(){mi(this,t).ease=n}}function Li(t,n,e){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t}))}(n)?bi:mi;return function(){var a=o(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(n,e),a.on=i}}var ji=On.prototype.constructor;function Hi(t){return function(){this.style.removeProperty(t)}}function Xi(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function Gi(t,n,e){var r,i;function o(){var o=n.apply(this,arguments);return o!==i&&(r=(i=o)&&Xi(t,o,e)),r}return o._value=n,o}function Vi(t){return function(n){this.textContent=t.call(this,n)}}function $i(t){var n,e;function r(){var r=t.apply(this,arguments);return r!==e&&(n=(e=r)&&Vi(r)),n}return r._value=t,r}var Wi=0;function Zi(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function Ki(t){return On().transition(t)}function Qi(){return++Wi}var Ji=On.prototype;Zi.prototype=Ki.prototype={constructor:Zi,select:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=Ct(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var u,c,f=r[a],s=f.length,l=o[a]=new Array(s),h=0;h<s;++h)(u=f[h])&&(c=t.call(u,u.__data__,h,f))&&("__data__"in u&&(c.__data__=u.__data__),l[h]=c,_i(l[h],n,e,h,l,xi(u,e)));return new Zi(o,this._parents,n,e)},selectAll:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=Dt(t));for(var r=this._groups,i=r.length,o=[],a=[],u=0;u<i;++u)for(var c,f=r[u],s=f.length,l=0;l<s;++l)if(c=f[l]){for(var h,d=t.call(c,c.__data__,l,f),p=xi(c,e),g=0,y=d.length;g<y;++g)(h=d[g])&&_i(h,n,e,g,d,p);o.push(d),a.push(c)}return new Zi(o,a,n,e)},selectChild:Ji.selectChild,selectChildren:Ji.selectChildren,filter:function(t){"function"!=typeof t&&(t=Rt(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],u=a.length,c=r[i]=[],f=0;f<u;++f)(o=a[f])&&t.call(o,o.__data__,f,a)&&c.push(o);return new Zi(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var c,f=n[u],s=e[u],l=f.length,h=a[u]=new Array(l),d=0;d<l;++d)(c=f[d]||s[d])&&(h[d]=c);for(;u<r;++u)a[u]=n[u];return new Zi(a,this._parents,this._name,this._id)},selection:function(){return new ji(this._groups,this._parents)},transition:function(){for(var t=this._name,n=this._id,e=Qi(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],c=u.length,f=0;f<c;++f)if(a=u[f]){var s=xi(a,n);_i(a,t,e,f,u,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new Zi(r,this._parents,t,e)},call:Ji.call,nodes:Ji.nodes,node:Ji.node,size:Ji.size,empty:Ji.empty,each:Ji.each,on:function(t,n){var e=this._id;return arguments.length<2?xi(this.node(),e).on.on(t):this.each(Li(e,t,n))},attr:function(t,n){var e=Tt(t),r="transform"===e?Ur:Si;return this.attrTween(t,"function"==typeof n?(e.local?zi:Pi)(e,r,Ti(this,"attr."+t,n)):null==n?(e.local?ki:Ei)(e):(e.local?Ci:Ni)(e,r,n))},attrTween:function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=Tt(t);return this.tween(e,(r.local?Fi:qi)(r,n))},style:function(t,n,e){var r="transform"==(t+="")?Or:Si;return null==n?this.styleTween(t,function(t,n){var e,r,i;return function(){var o=on(this,t),a=(this.style.removeProperty(t),on(this,t));return o===a?null:o===e&&a===r?i:i=n(e=o,r=a)}}(t,r)).on("end.style."+t,Hi(t)):"function"==typeof n?this.styleTween(t,function(t,n,e){var r,i,o;return function(){var a=on(this,t),u=e(this),c=u+"";return null==u&&(this.style.removeProperty(t),c=u=on(this,t)),a===c?null:a===r&&c===i?o:(i=c,o=n(r=a,u))}}(t,r,Ti(this,"style."+t,n))).each(function(t,n){var e,r,i,o,a="style."+n,u="end."+a;return function(){var c=mi(this,t),f=c.on,s=null==c.value[a]?o||(o=Hi(n)):void 0;f===e&&i===s||(r=(e=f).copy()).on(u,i=s),c.on=r}}(this._id,t)):this.styleTween(t,function(t,n,e){var r,i,o=e+"";return function(){var a=on(this,t);return a===o?null:a===r?i:i=n(r=a,e)}}(t,r,n),e).on("end.style."+t,null)},styleTween:function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,Gi(t,n,null==e?"":e))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var n=t(this);this.textContent=null==n?"":n}}(Ti(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;return this.tween(n,$i(t))},remove:function(){return this.on("end.remove",function(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}(this._id))},tween:function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=xi(this.node(),e).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==n?Mi:Ai)(e,t,n))},delay:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?Oi:Ui)(n,t)):xi(this.node(),n).delay},duration:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?Ii:Bi)(n,t)):xi(this.node(),n).duration},ease:function(t){var n=this._id;return arguments.length?this.each(Yi(n,t)):xi(this.node(),n).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,n){return function(){var e=n.apply(this,arguments);if("function"!=typeof e)throw new Error;mi(this,t).ease=e}}(this._id,t))},end:function(){var t,n,e=this,r=e._id,i=e.size();return new Promise((function(o,a){var u={value:a},c={value:function(){0==--i&&o()}};e.each((function(){var e=mi(this,r),i=e.on;i!==t&&((n=(t=i).copy())._.cancel.push(u),n._.interrupt.push(u),n._.end.push(c)),e.on=n})),0===i&&o()}))},[Symbol.iterator]:Ji[Symbol.iterator]};function to(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function no(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var eo=function t(n){function e(t){return Math.pow(t,n)}return n=+n,e.exponent=t,e}(3),ro=function t(n){function e(t){return 1-Math.pow(1-t,n)}return n=+n,e.exponent=t,e}(3),io=function t(n){function e(t){return((t*=2)<=1?Math.pow(t,n):2-Math.pow(2-t,n))/2}return n=+n,e.exponent=t,e}(3),oo=Math.PI,ao=oo/2;function uo(t){return(1-Math.cos(oo*t))/2}function co(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function fo(t){return((t*=2)<=1?co(1-t):2-co(t-1))/2}function so(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var lo=4/11,ho=7.5625;function po(t){return(t=+t)<lo?ho*t*t:t<.7272727272727273?ho*(t-=.5454545454545454)*t+.75:t<.9090909090909091?ho*(t-=.8181818181818182)*t+.9375:ho*(t-=.9545454545454546)*t+.984375}var go=1.70158,yo=function t(n){function e(t){return(t=+t)*t*(n*(t-1)+t)}return n=+n,e.overshoot=t,e}(go),vo=function t(n){function e(t){return--t*t*((t+1)*n+t)+1}return n=+n,e.overshoot=t,e}(go),_o=function t(n){function e(t){return((t*=2)<1?t*t*((n+1)*t-n):(t-=2)*t*((n+1)*t+n)+2)/2}return n=+n,e.overshoot=t,e}(go),bo=2*Math.PI,mo=function t(n,e){var r=Math.asin(1/(n=Math.max(1,n)))*(e/=bo);function i(t){return n*co(- --t)*Math.sin((r-t)/e)}return i.amplitude=function(n){return t(n,e*bo)},i.period=function(e){return t(n,e)},i}(1,.3),xo=function t(n,e){var r=Math.asin(1/(n=Math.max(1,n)))*(e/=bo);function i(t){return 1-n*co(t=+t)*Math.sin((t+r)/e)}return i.amplitude=function(n){return t(n,e*bo)},i.period=function(e){return t(n,e)},i}(1,.3),wo=function t(n,e){var r=Math.asin(1/(n=Math.max(1,n)))*(e/=bo);function i(t){return((t=2*t-1)<0?n*co(-t)*Math.sin((r-t)/e):2-n*co(t)*Math.sin((r+t)/e))/2}return i.amplitude=function(n){return t(n,e*bo)},i.period=function(e){return t(n,e)},i}(1,.3),Mo={time:null,delay:0,duration:250,ease:no};function Ao(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}On.prototype.interrupt=function(t){return this.each((function(){wi(this,t)}))},On.prototype.transition=function(t){var n,e;t instanceof Zi?(n=t._id,t=t._name):(n=Qi(),(e=Mo).time=ui(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],c=u.length,f=0;f<c;++f)(a=u[f])&&_i(a,t,n,f,u,e||Ao(a,n));return new Zi(r,this._parents,t,n)};var To=[null];var So=t=>()=>t;function Eo(t,{sourceEvent:n,target:e,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function ko(t){t.stopImmediatePropagation()}function No(t){t.preventDefault(),t.stopImmediatePropagation()}var Co={name:"drag"},Po={name:"space"},zo={name:"handle"},Do={name:"center"};const{abs:Ro,max:Fo,min:qo}=Math;function Oo(t){return[+t[0],+t[1]]}function Uo(t){return[Oo(t[0]),Oo(t[1])]}var Io={name:"x",handles:["w","e"].map(Vo),input:function(t,n){return null==t?null:[[+t[0],n[0][1]],[+t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Bo={name:"y",handles:["n","s"].map(Vo),input:function(t,n){return null==t?null:[[n[0][0],+t[0]],[n[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Yo={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Vo),input:function(t){return null==t?null:Uo(t)},output:function(t){return t}},Lo={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},jo={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ho={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Xo={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Go={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Vo(t){return{type:t}}function $o(t){return!t.ctrlKey&&!t.button}function Wo(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Zo(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ko(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Qo(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Jo(t){var n,e=Wo,r=$o,i=Zo,o=!0,a=_t("start","brush","end"),u=6;function c(n){var e=n.property("__brush",g).selectAll(".overlay").data([Vo("overlay")]);e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Lo.overlay).merge(e).each((function(){var t=Ko(this).extent;Un(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),n.selectAll(".selection").data([Vo("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Lo.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=n.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return Lo[t.type]})),n.each(f).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(i).on("touchstart.brush",h).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(){var t=Un(this),n=Ko(this).selection;n?(t.selectAll(".selection").style("display",null).attr("x",n[0][0]).attr("y",n[0][1]).attr("width",n[1][0]-n[0][0]).attr("height",n[1][1]-n[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?n[1][0]-u/2:n[0][0]-u/2})).attr("y",(function(t){return"s"===t.type[0]?n[1][1]-u/2:n[0][1]-u/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?n[1][0]-n[0][0]+u:u})).attr("height",(function(t){return"e"===t.type||"w"===t.type?n[1][1]-n[0][1]+u:u}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function s(t,n,e){var r=t.__brush.emitter;return!r||e&&r.clean?new l(t,n,e):r}function l(t,n,e){this.that=t,this.args=n,this.state=t.__brush,this.active=0,this.clean=e}function h(e){if((!n||e.touches)&&r.apply(this,arguments)){var i,a,u,c,l,h,d,p,g,y,v,_=this,b=e.target.__data__.type,m="selection"===(o&&e.metaKey?b="overlay":b)?Co:o&&e.altKey?Do:zo,x=t===Bo?null:Xo[b],w=t===Io?null:Go[b],M=Ko(_),A=M.extent,T=M.selection,S=A[0][0],E=A[0][1],k=A[1][0],N=A[1][1],C=0,P=0,z=x&&w&&o&&e.shiftKey,D=Array.from(e.touches||[e],(t=>{const n=t.identifier;return(t=jn(t,_)).point0=t.slice(),t.identifier=n,t}));wi(_);var R=s(_,arguments,!0).beforestart();if("overlay"===b){T&&(g=!0);const n=[D[0],D[1]||D[0]];M.selection=T=[[i=t===Bo?S:qo(n[0][0],n[1][0]),u=t===Io?E:qo(n[0][1],n[1][1])],[l=t===Bo?k:Fo(n[0][0],n[1][0]),d=t===Io?N:Fo(n[0][1],n[1][1])]],D.length>1&&I(e)}else i=T[0][0],u=T[0][1],l=T[1][0],d=T[1][1];a=i,c=u,h=l,p=d;var F=Un(_).attr("pointer-events","none"),q=F.selectAll(".overlay").attr("cursor",Lo[b]);if(e.touches)R.moved=U,R.ended=B;else{var O=Un(e.view).on("mousemove.brush",U,!0).on("mouseup.brush",B,!0);o&&O.on("keydown.brush",Y,!0).on("keyup.brush",L,!0),$n(e.view)}f.call(_),R.start(e,m.name)}function U(t){for(const n of t.changedTouches||[t])for(const t of D)t.identifier===n.identifier&&(t.cur=jn(n,_));if(z&&!y&&!v&&1===D.length){const t=D[0];Ro(t.cur[0]-t[0])>Ro(t.cur[1]-t[1])?v=!0:y=!0}for(const t of D)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);g=!0,No(t),I(t)}function I(t){const n=D[0],e=n.point0;var r;switch(C=n[0]-e[0],P=n[1]-e[1],m){case Po:case Co:x&&(C=Fo(S-i,qo(k-l,C)),a=i+C,h=l+C),w&&(P=Fo(E-u,qo(N-d,P)),c=u+P,p=d+P);break;case zo:D[1]?(x&&(a=Fo(S,qo(k,D[0][0])),h=Fo(S,qo(k,D[1][0])),x=1),w&&(c=Fo(E,qo(N,D[0][1])),p=Fo(E,qo(N,D[1][1])),w=1)):(x<0?(C=Fo(S-i,qo(k-i,C)),a=i+C,h=l):x>0&&(C=Fo(S-l,qo(k-l,C)),a=i,h=l+C),w<0?(P=Fo(E-u,qo(N-u,P)),c=u+P,p=d):w>0&&(P=Fo(E-d,qo(N-d,P)),c=u,p=d+P));break;case Do:x&&(a=Fo(S,qo(k,i-C*x)),h=Fo(S,qo(k,l+C*x))),w&&(c=Fo(E,qo(N,u-P*w)),p=Fo(E,qo(N,d+P*w)))}h<a&&(x*=-1,r=i,i=l,l=r,r=a,a=h,h=r,b in jo&&q.attr("cursor",Lo[b=jo[b]])),p<c&&(w*=-1,r=u,u=d,d=r,r=c,c=p,p=r,b in Ho&&q.attr("cursor",Lo[b=Ho[b]])),M.selection&&(T=M.selection),y&&(a=T[0][0],h=T[1][0]),v&&(c=T[0][1],p=T[1][1]),T[0][0]===a&&T[0][1]===c&&T[1][0]===h&&T[1][1]===p||(M.selection=[[a,c],[h,p]],f.call(_),R.brush(t,m.name))}function B(t){if(ko(t),t.touches){if(t.touches.length)return;n&&clearTimeout(n),n=setTimeout((function(){n=null}),500)}else Wn(t.view,g),O.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);F.attr("pointer-events","all"),q.attr("cursor",Lo.overlay),M.selection&&(T=M.selection),Qo(T)&&(M.selection=null,f.call(_)),R.end(t,m.name)}function Y(t){switch(t.keyCode){case 16:z=x&&w;break;case 18:m===zo&&(x&&(l=h-C*x,i=a+C*x),w&&(d=p-P*w,u=c+P*w),m=Do,I(t));break;case 32:m!==zo&&m!==Do||(x<0?l=h-C:x>0&&(i=a-C),w<0?d=p-P:w>0&&(u=c-P),m=Po,q.attr("cursor",Lo.selection),I(t));break;default:return}No(t)}function L(t){switch(t.keyCode){case 16:z&&(y=v=z=!1,I(t));break;case 18:m===Do&&(x<0?l=h:x>0&&(i=a),w<0?d=p:w>0&&(u=c),m=zo,I(t));break;case 32:m===Po&&(t.altKey?(x&&(l=h-C*x,i=a+C*x),w&&(d=p-P*w,u=c+P*w),m=Do):(x<0?l=h:x>0&&(i=a),w<0?d=p:w>0&&(u=c),m=zo),q.attr("cursor",Lo[b]),I(t));break;default:return}No(t)}}function d(t){s(this,arguments).moved(t)}function p(t){s(this,arguments).ended(t)}function g(){var n=this.__brush||{selection:null};return n.extent=Uo(e.apply(this,arguments)),n.dim=t,n}return c.move=function(n,e,r){n.tween?n.on("start.brush",(function(t){s(this,arguments).beforestart().start(t)})).on("interrupt.brush end.brush",(function(t){s(this,arguments).end(t)})).tween("brush",(function(){var n=this,r=n.__brush,i=s(n,arguments),o=r.selection,a=t.input("function"==typeof e?e.apply(this,arguments):e,r.extent),u=Cr(o,a);function c(t){r.selection=1===t&&null===a?null:u(t),f.call(n),i.brush()}return null!==o&&null!==a?c:c(1)})):n.each((function(){var n=this,i=arguments,o=n.__brush,a=t.input("function"==typeof e?e.apply(n,i):e,o.extent),u=s(n,i).beforestart();wi(n),o.selection=null===a?null:a,f.call(n),u.start(r).brush(r).end(r)}))},c.clear=function(t,n){c.move(t,null,n)},l.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,n){return this.starting?(this.starting=!1,this.emit("start",t,n)):this.emit("brush",t),this},brush:function(t,n){return this.emit("brush",t,n),this},end:function(t,n){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,n)),this},emit:function(n,e,r){var i=Un(this.that).datum();a.call(n,this.that,new Eo(n,{sourceEvent:e,target:c,selection:t.output(this.state.selection),mode:r,dispatch:a}),i)}},c.extent=function(t){return arguments.length?(e="function"==typeof t?t:So(Uo(t)),c):e},c.filter=function(t){return arguments.length?(r="function"==typeof t?t:So(!!t),c):r},c.touchable=function(t){return arguments.length?(i="function"==typeof t?t:So(!!t),c):i},c.handleSize=function(t){return arguments.length?(u=+t,c):u},c.keyModifiers=function(t){return arguments.length?(o=!!t,c):o},c.on=function(){var t=a.on.apply(a,arguments);return t===a?c:t},c}var ta=Math.abs,na=Math.cos,ea=Math.sin,ra=Math.PI,ia=ra/2,oa=2*ra,aa=Math.max,ua=1e-12;function ca(t,n){return Array.from({length:n-t},((n,e)=>t+e))}function fa(t){return function(n,e){return t(n.source.value+n.target.value,e.source.value+e.target.value)}}function sa(t,n){var e=0,r=null,i=null,o=null;function a(a){var u,c=a.length,f=new Array(c),s=ca(0,c),l=new Array(c*c),h=new Array(c),d=0;a=Float64Array.from({length:c*c},n?(t,n)=>a[n%c][n/c|0]:(t,n)=>a[n/c|0][n%c]);for(let n=0;n<c;++n){let e=0;for(let r=0;r<c;++r)e+=a[n*c+r]+t*a[r*c+n];d+=f[n]=e}u=(d=aa(0,oa-e*c)/d)?e:oa/c;{let n=0;r&&s.sort(((t,n)=>r(f[t],f[n])));for(const e of s){const r=n;if(t){const t=ca(1+~c,c).filter((t=>t<0?a[~t*c+e]:a[e*c+t]));i&&t.sort(((t,n)=>i(t<0?-a[~t*c+e]:a[e*c+t],n<0?-a[~n*c+e]:a[e*c+n])));for(const r of t)if(r<0){(l[~r*c+e]||(l[~r*c+e]={source:null,target:null})).target={index:e,startAngle:n,endAngle:n+=a[~r*c+e]*d,value:a[~r*c+e]}}else{(l[e*c+r]||(l[e*c+r]={source:null,target:null})).source={index:e,startAngle:n,endAngle:n+=a[e*c+r]*d,value:a[e*c+r]}}h[e]={index:e,startAngle:r,endAngle:n,value:f[e]}}else{const t=ca(0,c).filter((t=>a[e*c+t]||a[t*c+e]));i&&t.sort(((t,n)=>i(a[e*c+t],a[e*c+n])));for(const r of t){let t;if(e<r?(t=l[e*c+r]||(l[e*c+r]={source:null,target:null}),t.source={index:e,startAngle:n,endAngle:n+=a[e*c+r]*d,value:a[e*c+r]}):(t=l[r*c+e]||(l[r*c+e]={source:null,target:null}),t.target={index:e,startAngle:n,endAngle:n+=a[e*c+r]*d,value:a[e*c+r]},e===r&&(t.source=t.target)),t.source&&t.target&&t.source.value<t.target.value){const n=t.source;t.source=t.target,t.target=n}}h[e]={index:e,startAngle:r,endAngle:n,value:f[e]}}n+=u}}return(l=Object.values(l)).groups=h,o?l.sort(o):l}return a.padAngle=function(t){return arguments.length?(e=aa(0,t),a):e},a.sortGroups=function(t){return arguments.length?(r=t,a):r},a.sortSubgroups=function(t){return arguments.length?(i=t,a):i},a.sortChords=function(t){return arguments.length?(null==t?o=null:(o=fa(t))._=t,a):o&&o._},a}const la=Math.PI,ha=2*la,da=1e-6,pa=ha-da;function ga(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function ya(){return new ga}ga.prototype=ya.prototype={constructor:ga,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,o){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var o=this._x1,a=this._y1,u=e-t,c=r-n,f=o-t,s=a-n,l=f*f+s*s;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(l>da)if(Math.abs(s*u-c*f)>da&&i){var h=e-o,d=r-a,p=u*u+c*c,g=h*h+d*d,y=Math.sqrt(p),v=Math.sqrt(l),_=i*Math.tan((la-Math.acos((p+l-g)/(2*y*v)))/2),b=_/v,m=_/y;Math.abs(b-1)>da&&(this._+="L"+(t+b*f)+","+(n+b*s)),this._+="A"+i+","+i+",0,0,"+ +(s*h>f*d)+","+(this._x1=t+m*u)+","+(this._y1=n+m*c)}else this._+="L"+(this._x1=t)+","+(this._y1=n);else;},arc:function(t,n,e,r,i,o){t=+t,n=+n,o=!!o;var a=(e=+e)*Math.cos(r),u=e*Math.sin(r),c=t+a,f=n+u,s=1^o,l=o?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+c+","+f:(Math.abs(this._x1-c)>da||Math.abs(this._y1-f)>da)&&(this._+="L"+c+","+f),e&&(l<0&&(l=l%ha+ha),l>pa?this._+="A"+e+","+e+",0,1,"+s+","+(t-a)+","+(n-u)+"A"+e+","+e+",0,1,"+s+","+(this._x1=c)+","+(this._y1=f):l>da&&(this._+="A"+e+","+e+",0,"+ +(l>=la)+","+s+","+(this._x1=t+e*Math.cos(i))+","+(this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};var va=Array.prototype.slice;function _a(t){return function(){return t}}function ba(t){return t.source}function ma(t){return t.target}function xa(t){return t.radius}function wa(t){return t.startAngle}function Ma(t){return t.endAngle}function Aa(){return 0}function Ta(){return 10}function Sa(t){var n=ba,e=ma,r=xa,i=xa,o=wa,a=Ma,u=Aa,c=null;function f(){var f,s=n.apply(this,arguments),l=e.apply(this,arguments),h=u.apply(this,arguments)/2,d=va.call(arguments),p=+r.apply(this,(d[0]=s,d)),g=o.apply(this,d)-ia,y=a.apply(this,d)-ia,v=+i.apply(this,(d[0]=l,d)),_=o.apply(this,d)-ia,b=a.apply(this,d)-ia;if(c||(c=f=ya()),h>ua&&(ta(y-g)>2*h+ua?y>g?(g+=h,y-=h):(g-=h,y+=h):g=y=(g+y)/2,ta(b-_)>2*h+ua?b>_?(_+=h,b-=h):(_-=h,b+=h):_=b=(_+b)/2),c.moveTo(p*na(g),p*ea(g)),c.arc(0,0,p,g,y),g!==_||y!==b)if(t){var m=+t.apply(this,arguments),x=v-m,w=(_+b)/2;c.quadraticCurveTo(0,0,x*na(_),x*ea(_)),c.lineTo(v*na(w),v*ea(w)),c.lineTo(x*na(b),x*ea(b))}else c.quadraticCurveTo(0,0,v*na(_),v*ea(_)),c.arc(0,0,v,_,b);if(c.quadraticCurveTo(0,0,p*na(g),p*ea(g)),c.closePath(),f)return c=null,f+""||null}return t&&(f.headRadius=function(n){return arguments.length?(t="function"==typeof n?n:_a(+n),f):t}),f.radius=function(t){return arguments.length?(r=i="function"==typeof t?t:_a(+t),f):r},f.sourceRadius=function(t){return arguments.length?(r="function"==typeof t?t:_a(+t),f):r},f.targetRadius=function(t){return arguments.length?(i="function"==typeof t?t:_a(+t),f):i},f.startAngle=function(t){return arguments.length?(o="function"==typeof t?t:_a(+t),f):o},f.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:_a(+t),f):a},f.padAngle=function(t){return arguments.length?(u="function"==typeof t?t:_a(+t),f):u},f.source=function(t){return arguments.length?(n=t,f):n},f.target=function(t){return arguments.length?(e=t,f):e},f.context=function(t){return arguments.length?(c=null==t?null:t,f):c},f}var Ea=Array.prototype.slice;function ka(t,n){return t-n}var Na=t=>()=>t;function Ca(t,n){for(var e,r=-1,i=n.length;++r<i;)if(e=Pa(t,n[r]))return e;return 0}function Pa(t,n){for(var e=n[0],r=n[1],i=-1,o=0,a=t.length,u=a-1;o<a;u=o++){var c=t[o],f=c[0],s=c[1],l=t[u],h=l[0],d=l[1];if(za(c,l,n))return 0;s>r!=d>r&&e<(h-f)*(r-s)/(d-s)+f&&(i=-i)}return i}function za(t,n,e){var r,i,o,a;return function(t,n,e){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])}(t,n,e)&&(i=t[r=+(t[0]===n[0])],o=e[r],a=n[r],i<=o&&o<=a||a<=o&&o<=i)}function Da(){}var Ra=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Fa(){var t=1,n=1,e=L,r=u;function i(t){var n=e(t);if(Array.isArray(n))n=n.slice().sort(ka);else{const e=g(t),r=B(e[0],e[1],n);n=U(Math.floor(e[0]/r)*r,Math.floor(e[1]/r-1)*r,n)}return n.map((n=>o(t,n)))}function o(e,i){var o=[],u=[];return function(e,r,i){var o,u,c,f,s,l,h=new Array,d=new Array;o=u=-1,f=e[0]>=r,Ra[f<<1].forEach(p);for(;++o<t-1;)c=f,f=e[o+1]>=r,Ra[c|f<<1].forEach(p);Ra[f<<0].forEach(p);for(;++u<n-1;){for(o=-1,f=e[u*t+t]>=r,s=e[u*t]>=r,Ra[f<<1|s<<2].forEach(p);++o<t-1;)c=f,f=e[u*t+t+o+1]>=r,l=s,s=e[u*t+o+1]>=r,Ra[c|f<<1|s<<2|l<<3].forEach(p);Ra[f|s<<3].forEach(p)}o=-1,s=e[u*t]>=r,Ra[s<<2].forEach(p);for(;++o<t-1;)l=s,s=e[u*t+o+1]>=r,Ra[s<<2|l<<3].forEach(p);function p(t){var n,e,r=[t[0][0]+o,t[0][1]+u],c=[t[1][0]+o,t[1][1]+u],f=a(r),s=a(c);(n=d[f])?(e=h[s])?(delete d[n.end],delete h[e.start],n===e?(n.ring.push(c),i(n.ring)):h[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete d[n.end],n.ring.push(c),d[n.end=s]=n):(n=h[s])?(e=d[f])?(delete h[n.start],delete d[e.end],n===e?(n.ring.push(c),i(n.ring)):h[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete h[n.start],n.ring.unshift(r),h[n.start=f]=n):h[f]=d[s]={start:f,end:s,ring:[r,c]}}Ra[s<<3].forEach(p)}(e,i,(function(t){r(t,e,i),function(t){for(var n=0,e=t.length,r=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];++n<e;)r+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return r}(t)>0?o.push([t]):u.push(t)})),u.forEach((function(t){for(var n,e=0,r=o.length;e<r;++e)if(-1!==Ca((n=o[e])[0],t))return void n.push(t)})),{type:"MultiPolygon",value:i,coordinates:o}}function a(n){return 2*n[0]+n[1]*(t+1)*4}function u(e,r,i){e.forEach((function(e){var o,a=e[0],u=e[1],c=0|a,f=0|u,s=r[f*t+c];a>0&&a<t&&c===a&&(o=r[f*t+c-1],e[0]=a+(i-o)/(s-o)-.5),u>0&&u<n&&f===u&&(o=r[(f-1)*t+c],e[1]=u+(i-o)/(s-o)-.5)}))}return i.contour=o,i.size=function(e){if(!arguments.length)return[t,n];var r=Math.floor(e[0]),o=Math.floor(e[1]);if(!(r>=0&&o>=0))throw new Error("invalid size");return t=r,n=o,i},i.thresholds=function(t){return arguments.length?(e="function"==typeof t?t:Array.isArray(t)?Na(Ea.call(t)):Na(t),i):e},i.smooth=function(t){return arguments.length?(r=t?u:Da,i):r===u},i}function qa(t,n,e){for(var r=t.width,i=t.height,o=1+(e<<1),a=0;a<i;++a)for(var u=0,c=0;u<r+e;++u)u<r&&(c+=t.data[u+a*r]),u>=e&&(u>=o&&(c-=t.data[u-o+a*r]),n.data[u-e+a*r]=c/Math.min(u+1,r-1+o-u,o))}function Oa(t,n,e){for(var r=t.width,i=t.height,o=1+(e<<1),a=0;a<r;++a)for(var u=0,c=0;u<i+e;++u)u<i&&(c+=t.data[a+u*r]),u>=e&&(u>=o&&(c-=t.data[a+(u-o)*r]),n.data[a+(u-e)*r]=c/Math.min(u+1,i-1+o-u,o))}function Ua(t){return t[0]}function Ia(t){return t[1]}function Ba(){return 1}const Ya=134217729;function La(t,n,e,r,i){let o,a,u,c,f=n[0],s=r[0],l=0,h=0;s>f==s>-f?(o=f,f=n[++l]):(o=s,s=r[++h]);let d=0;if(l<t&&h<e)for(s>f==s>-f?(a=f+o,u=o-(a-f),f=n[++l]):(a=s+o,u=o-(a-s),s=r[++h]),o=a,0!==u&&(i[d++]=u);l<t&&h<e;)s>f==s>-f?(a=o+f,c=a-o,u=o-(a-c)+(f-c),f=n[++l]):(a=o+s,c=a-o,u=o-(a-c)+(s-c),s=r[++h]),o=a,0!==u&&(i[d++]=u);for(;l<t;)a=o+f,c=a-o,u=o-(a-c)+(f-c),f=n[++l],o=a,0!==u&&(i[d++]=u);for(;h<e;)a=o+s,c=a-o,u=o-(a-c)+(s-c),s=r[++h],o=a,0!==u&&(i[d++]=u);return 0===o&&0!==d||(i[d++]=o),d}function ja(t){return new Float64Array(t)}const Ha=ja(4),Xa=ja(8),Ga=ja(12),Va=ja(16),$a=ja(4);function Wa(t,n,e,r,i,o){const a=(n-o)*(e-i),u=(t-i)*(r-o),c=a-u;if(0===a||0===u||a>0!=u>0)return c;const f=Math.abs(a+u);return Math.abs(c)>=33306690738754716e-32*f?c:-function(t,n,e,r,i,o,a){let u,c,f,s,l,h,d,p,g,y,v,_,b,m,x,w,M,A;const T=t-i,S=e-i,E=n-o,k=r-o;m=T*k,h=Ya*T,d=h-(h-T),p=T-d,h=Ya*k,g=h-(h-k),y=k-g,x=p*y-(m-d*g-p*g-d*y),w=E*S,h=Ya*E,d=h-(h-E),p=E-d,h=Ya*S,g=h-(h-S),y=S-g,M=p*y-(w-d*g-p*g-d*y),v=x-M,l=x-v,Ha[0]=x-(v+l)+(l-M),_=m+v,l=_-m,b=m-(_-l)+(v-l),v=b-w,l=b-v,Ha[1]=b-(v+l)+(l-w),A=_+v,l=A-_,Ha[2]=_-(A-l)+(v-l),Ha[3]=A;let N=function(t,n){let e=n[0];for(let r=1;r<t;r++)e+=n[r];return e}(4,Ha),C=22204460492503146e-32*a;if(N>=C||-N>=C)return N;if(l=t-T,u=t-(T+l)+(l-i),l=e-S,f=e-(S+l)+(l-i),l=n-E,c=n-(E+l)+(l-o),l=r-k,s=r-(k+l)+(l-o),0===u&&0===c&&0===f&&0===s)return N;if(C=11093356479670487e-47*a+33306690738754706e-32*Math.abs(N),N+=T*s+k*u-(E*f+S*c),N>=C||-N>=C)return N;m=u*k,h=Ya*u,d=h-(h-u),p=u-d,h=Ya*k,g=h-(h-k),y=k-g,x=p*y-(m-d*g-p*g-d*y),w=c*S,h=Ya*c,d=h-(h-c),p=c-d,h=Ya*S,g=h-(h-S),y=S-g,M=p*y-(w-d*g-p*g-d*y),v=x-M,l=x-v,$a[0]=x-(v+l)+(l-M),_=m+v,l=_-m,b=m-(_-l)+(v-l),v=b-w,l=b-v,$a[1]=b-(v+l)+(l-w),A=_+v,l=A-_,$a[2]=_-(A-l)+(v-l),$a[3]=A;const P=La(4,Ha,4,$a,Xa);m=T*s,h=Ya*T,d=h-(h-T),p=T-d,h=Ya*s,g=h-(h-s),y=s-g,x=p*y-(m-d*g-p*g-d*y),w=E*f,h=Ya*E,d=h-(h-E),p=E-d,h=Ya*f,g=h-(h-f),y=f-g,M=p*y-(w-d*g-p*g-d*y),v=x-M,l=x-v,$a[0]=x-(v+l)+(l-M),_=m+v,l=_-m,b=m-(_-l)+(v-l),v=b-w,l=b-v,$a[1]=b-(v+l)+(l-w),A=_+v,l=A-_,$a[2]=_-(A-l)+(v-l),$a[3]=A;const z=La(P,Xa,4,$a,Ga);m=u*s,h=Ya*u,d=h-(h-u),p=u-d,h=Ya*s,g=h-(h-s),y=s-g,x=p*y-(m-d*g-p*g-d*y),w=c*f,h=Ya*c,d=h-(h-c),p=c-d,h=Ya*f,g=h-(h-f),y=f-g,M=p*y-(w-d*g-p*g-d*y),v=x-M,l=x-v,$a[0]=x-(v+l)+(l-M),_=m+v,l=_-m,b=m-(_-l)+(v-l),v=b-w,l=b-v,$a[1]=b-(v+l)+(l-w),A=_+v,l=A-_,$a[2]=_-(A-l)+(v-l),$a[3]=A;const D=La(z,Ga,4,$a,Va);return Va[D-1]}(t,n,e,r,i,o,f)}const Za=Math.pow(2,-52),Ka=new Uint32Array(512);class Qa{static from(t,n=iu,e=ou){const r=t.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=t[o];i[2*o]=n(r),i[2*o+1]=e(r)}return new Qa(i)}constructor(t){const n=t.length>>1;if(n>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const e=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*e),this._halfedges=new Int32Array(3*e),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:e,_hullTri:r,_hullHash:i}=this,o=t.length>>1;let a=1/0,u=1/0,c=-1/0,f=-1/0;for(let n=0;n<o;n++){const e=t[2*n],r=t[2*n+1];e<a&&(a=e),r<u&&(u=r),e>c&&(c=e),r>f&&(f=r),this._ids[n]=n}const s=(a+c)/2,l=(u+f)/2;let h,d,p,g=1/0;for(let n=0;n<o;n++){const e=Ja(s,l,t[2*n],t[2*n+1]);e<g&&(h=n,g=e)}const y=t[2*h],v=t[2*h+1];g=1/0;for(let n=0;n<o;n++){if(n===h)continue;const e=Ja(y,v,t[2*n],t[2*n+1]);e<g&&e>0&&(d=n,g=e)}let _=t[2*d],b=t[2*d+1],m=1/0;for(let n=0;n<o;n++){if(n===h||n===d)continue;const e=nu(y,v,_,b,t[2*n],t[2*n+1]);e<m&&(p=n,m=e)}let x=t[2*p],w=t[2*p+1];if(m===1/0){for(let n=0;n<o;n++)this._dists[n]=t[2*n]-t[0]||t[2*n+1]-t[1];eu(this._ids,this._dists,0,o-1);const n=new Uint32Array(o);let e=0;for(let t=0,r=-1/0;t<o;t++){const i=this._ids[t];this._dists[i]>r&&(n[e++]=i,r=this._dists[i])}return this.hull=n.subarray(0,e),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(Wa(y,v,_,b,x,w)<0){const t=d,n=_,e=b;d=p,_=x,b=w,p=t,x=n,w=e}const M=function(t,n,e,r,i,o){const a=e-t,u=r-n,c=i-t,f=o-n,s=a*a+u*u,l=c*c+f*f,h=.5/(a*f-u*c);return{x:t+(f*s-u*l)*h,y:n+(a*l-c*s)*h}}(y,v,_,b,x,w);this._cx=M.x,this._cy=M.y;for(let n=0;n<o;n++)this._dists[n]=Ja(t[2*n],t[2*n+1],M.x,M.y);eu(this._ids,this._dists,0,o-1),this._hullStart=h;let A=3;e[h]=n[p]=d,e[d]=n[h]=p,e[p]=n[d]=h,r[h]=0,r[d]=1,r[p]=2,i.fill(-1),i[this._hashKey(y,v)]=h,i[this._hashKey(_,b)]=d,i[this._hashKey(x,w)]=p,this.trianglesLen=0,this._addTriangle(h,d,p,-1,-1,-1);for(let o,a,u=0;u<this._ids.length;u++){const c=this._ids[u],f=t[2*c],s=t[2*c+1];if(u>0&&Math.abs(f-o)<=Za&&Math.abs(s-a)<=Za)continue;if(o=f,a=s,c===h||c===d||c===p)continue;let l=0;for(let t=0,n=this._hashKey(f,s);t<this._hashSize&&(l=i[(n+t)%this._hashSize],-1===l||l===e[l]);t++);l=n[l];let g,y=l;for(;g=e[y],Wa(f,s,t[2*y],t[2*y+1],t[2*g],t[2*g+1])>=0;)if(y=g,y===l){y=-1;break}if(-1===y)continue;let v=this._addTriangle(y,c,e[y],-1,-1,r[y]);r[c]=this._legalize(v+2),r[y]=v,A++;let _=e[y];for(;g=e[_],Wa(f,s,t[2*_],t[2*_+1],t[2*g],t[2*g+1])<0;)v=this._addTriangle(_,c,g,r[c],-1,r[_]),r[c]=this._legalize(v+2),e[_]=_,A--,_=g;if(y===l)for(;g=n[y],Wa(f,s,t[2*g],t[2*g+1],t[2*y],t[2*y+1])<0;)v=this._addTriangle(g,c,y,-1,r[y],r[g]),this._legalize(v+2),r[g]=v,e[y]=y,A--,y=g;this._hullStart=n[c]=y,e[y]=n[_]=c,e[c]=_,i[this._hashKey(f,s)]=c,i[this._hashKey(t[2*y],t[2*y+1])]=y}this.hull=new Uint32Array(A);for(let t=0,n=this._hullStart;t<A;t++)this.hull[t]=n,n=e[n];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(function(t,n){const e=t/(Math.abs(t)+Math.abs(n));return(n>0?3-e:1+e)/4}(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:e,coords:r}=this;let i=0,o=0;for(;;){const a=e[t],u=t-t%3;if(o=u+(t+2)%3,-1===a){if(0===i)break;t=Ka[--i];continue}const c=a-a%3,f=u+(t+1)%3,s=c+(a+2)%3,l=n[o],h=n[t],d=n[f],p=n[s];if(tu(r[2*l],r[2*l+1],r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*p],r[2*p+1])){n[t]=p,n[a]=l;const r=e[s];if(-1===r){let n=this._hullStart;do{if(this._hullTri[n]===s){this._hullTri[n]=t;break}n=this._hullPrev[n]}while(n!==this._hullStart)}this._link(t,r),this._link(a,e[o]),this._link(o,s);const u=c+(a+1)%3;i<Ka.length&&(Ka[i++]=u)}else{if(0===i)break;t=Ka[--i]}}return o}_link(t,n){this._halfedges[t]=n,-1!==n&&(this._halfedges[n]=t)}_addTriangle(t,n,e,r,i,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=e,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function Ja(t,n,e,r){const i=t-e,o=n-r;return i*i+o*o}function tu(t,n,e,r,i,o,a,u){const c=t-a,f=n-u,s=e-a,l=r-u,h=i-a,d=o-u,p=s*s+l*l,g=h*h+d*d;return c*(l*g-p*d)-f*(s*g-p*h)+(c*c+f*f)*(s*d-l*h)<0}function nu(t,n,e,r,i,o){const a=e-t,u=r-n,c=i-t,f=o-n,s=a*a+u*u,l=c*c+f*f,h=.5/(a*f-u*c),d=(f*s-u*l)*h,p=(a*l-c*s)*h;return d*d+p*p}function eu(t,n,e,r){if(r-e<=20)for(let i=e+1;i<=r;i++){const r=t[i],o=n[r];let a=i-1;for(;a>=e&&n[t[a]]>o;)t[a+1]=t[a--];t[a+1]=r}else{let i=e+1,o=r;ru(t,e+r>>1,i),n[t[e]]>n[t[r]]&&ru(t,e,r),n[t[i]]>n[t[r]]&&ru(t,i,r),n[t[e]]>n[t[i]]&&ru(t,e,i);const a=t[i],u=n[a];for(;;){do{i++}while(n[t[i]]<u);do{o--}while(n[t[o]]>u);if(o<i)break;ru(t,i,o)}t[e+1]=t[o],t[o]=a,r-i+1>=o-e?(eu(t,n,i,r),eu(t,n,e,o-1)):(eu(t,n,e,o-1),eu(t,n,i,r))}}function ru(t,n,e){const r=t[n];t[n]=t[e],t[e]=r}function iu(t){return t[0]}function ou(t){return t[1]}const au=1e-6;class uu{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,e){const r=(t=+t)+(e=+e),i=n=+n;if(e<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>au||Math.abs(this._y1-i)>au)&&(this._+="L"+r+","+i),e&&(this._+=`A${e},${e},0,1,1,${t-e},${n}A${e},${e},0,1,1,${this._x1=r},${this._y1=i}`)}rect(t,n,e,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+e}v${+r}h${-e}Z`}value(){return this._||null}}class cu{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}class fu{constructor(t,[n,e,r,i]=[0,0,960,500]){if(!((r=+r)>=(n=+n)&&(i=+i)>=(e=+e)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=n,this.ymax=i,this.ymin=e,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:e},vectors:r}=this,i=this.circumcenters=this._circumcenters.subarray(0,e.length/3*2);for(let n,r,o=0,a=0,u=e.length;o<u;o+=3,a+=2){const u=2*e[o],c=2*e[o+1],f=2*e[o+2],s=t[u],l=t[u+1],h=t[c],d=t[c+1],p=t[f],g=t[f+1],y=h-s,v=d-l,_=p-s,b=g-l,m=2*(y*b-v*_);if(Math.abs(m)<1e-9){let i=1e9;const o=2*e[0];i*=Math.sign((t[o]-s)*b-(t[o+1]-l)*_),n=(s+p)/2-i*b,r=(l+g)/2+i*_}else{const t=1/m,e=y*y+v*v,i=_*_+b*b;n=s+(b*e-v*i)*t,r=l+(y*i-_*e)*t}i[a]=n,i[a+1]=r}let o,a,u,c=n[n.length-1],f=4*c,s=t[2*c],l=t[2*c+1];r.fill(0);for(let e=0;e<n.length;++e)c=n[e],o=f,a=s,u=l,f=4*c,s=t[2*c],l=t[2*c+1],r[o+2]=r[f]=u-l,r[o+3]=r[f+1]=s-a}render(t){const n=null==t?t=new uu:void 0,{delaunay:{halfedges:e,inedges:r,hull:i},circumcenters:o,vectors:a}=this;if(i.length<=1)return null;for(let n=0,r=e.length;n<r;++n){const r=e[n];if(r<n)continue;const i=2*Math.floor(n/3),a=2*Math.floor(r/3),u=o[i],c=o[i+1],f=o[a],s=o[a+1];this._renderSegment(u,c,f,s,t)}let u,c=i[i.length-1];for(let n=0;n<i.length;++n){u=c,c=i[n];const e=2*Math.floor(r[c]/3),f=o[e],s=o[e+1],l=4*u,h=this._project(f,s,a[l+2],a[l+3]);h&&this._renderSegment(f,s,h[0],h[1],t)}return n&&n.value()}renderBounds(t){const n=null==t?t=new uu:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const e=null==n?n=new uu:void 0,r=this._clip(t);if(null===r||!r.length)return;n.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let t=2;t<i;t+=2)r[t]===r[t-2]&&r[t+1]===r[t-1]||n.lineTo(r[t],r[t+1]);return n.closePath(),e&&e.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,e=t.length/2;n<e;++n){const t=this.cellPolygon(n);t&&(t.index=n,yield t)}}cellPolygon(t){const n=new cu;return this.renderCell(t,n),n.value()}_renderSegment(t,n,e,r,i){let o;const a=this._regioncode(t,n),u=this._regioncode(e,r);0===a&&0===u?(i.moveTo(t,n),i.lineTo(e,r)):(o=this._clipSegment(t,n,e,r,a,u))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(t,n,e){return(n=+n)==n&&(e=+e)==e&&this.delaunay._step(t,n,e)===t}*neighbors(t){const n=this._clip(t);if(n)for(const e of this.delaunay.neighbors(t)){const t=this._clip(e);if(t)t:for(let r=0,i=n.length;r<i;r+=2)for(let o=0,a=t.length;o<a;o+=2)if(n[r]==t[o]&&n[r+1]==t[o+1]&&n[(r+2)%i]==t[(o+a-2)%a]&&n[(r+3)%i]==t[(o+a-1)%a]){yield e;break t}}}_cell(t){const{circumcenters:n,delaunay:{inedges:e,halfedges:r,triangles:i}}=this,o=e[t];if(-1===o)return null;const a=[];let u=o;do{const e=Math.floor(u/3);if(a.push(n[2*e],n[2*e+1]),u=u%3==2?u-2:u+1,i[u]!==t)break;u=r[u]}while(u!==o&&-1!==u);return a}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(null===n)return null;const{vectors:e}=this,r=4*t;return e[r]||e[r+1]?this._clipInfinite(t,n,e[r],e[r+1],e[r+2],e[r+3]):this._clipFinite(t,n)}_clipFinite(t,n){const e=n.length;let r,i,o,a,u=null,c=n[e-2],f=n[e-1],s=this._regioncode(c,f),l=0;for(let h=0;h<e;h+=2)if(r=c,i=f,c=n[h],f=n[h+1],o=s,s=this._regioncode(c,f),0===o&&0===s)a=l,l=0,u?u.push(c,f):u=[c,f];else{let n,e,h,d,p;if(0===o){if(null===(n=this._clipSegment(r,i,c,f,o,s)))continue;[e,h,d,p]=n}else{if(null===(n=this._clipSegment(c,f,r,i,s,o)))continue;[d,p,e,h]=n,a=l,l=this._edgecode(e,h),a&&l&&this._edge(t,a,l,u,u.length),u?u.push(e,h):u=[e,h]}a=l,l=this._edgecode(d,p),a&&l&&this._edge(t,a,l,u,u.length),u?u.push(d,p):u=[d,p]}if(u)a=l,l=this._edgecode(u[0],u[1]),a&&l&&this._edge(t,a,l,u,u.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}_clipSegment(t,n,e,r,i,o){for(;;){if(0===i&&0===o)return[t,n,e,r];if(i&o)return null;let a,u,c=i||o;8&c?(a=t+(e-t)*(this.ymax-n)/(r-n),u=this.ymax):4&c?(a=t+(e-t)*(this.ymin-n)/(r-n),u=this.ymin):2&c?(u=n+(r-n)*(this.xmax-t)/(e-t),a=this.xmax):(u=n+(r-n)*(this.xmin-t)/(e-t),a=this.xmin),i?(t=a,n=u,i=this._regioncode(t,n)):(e=a,r=u,o=this._regioncode(e,r))}}_clipInfinite(t,n,e,r,i,o){let a,u=Array.from(n);if((a=this._project(u[0],u[1],e,r))&&u.unshift(a[0],a[1]),(a=this._project(u[u.length-2],u[u.length-1],i,o))&&u.push(a[0],a[1]),u=this._clipFinite(t,u))for(let n,e=0,r=u.length,i=this._edgecode(u[r-2],u[r-1]);e<r;e+=2)n=i,i=this._edgecode(u[e],u[e+1]),n&&i&&(e=this._edge(t,n,i,u,e),r=u.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(u=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return u}_edge(t,n,e,r,i){for(;n!==e;){let e,o;switch(n){case 5:n=4;continue;case 4:n=6,e=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,e=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,e=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,e=this.xmin,o=this.ymin}r[i]===e&&r[i+1]===o||!this.contains(t,e,o)||(r.splice(i,0,e,o),i+=2)}if(r.length>4)for(let t=0;t<r.length;t+=2){const n=(t+2)%r.length,e=(t+4)%r.length;(r[t]===r[n]&&r[n]===r[e]||r[t+1]===r[n+1]&&r[n+1]===r[e+1])&&(r.splice(n,2),t-=2)}return i}_project(t,n,e,r){let i,o,a,u=1/0;if(r<0){if(n<=this.ymin)return null;(i=(this.ymin-n)/r)<u&&(a=this.ymin,o=t+(u=i)*e)}else if(r>0){if(n>=this.ymax)return null;(i=(this.ymax-n)/r)<u&&(a=this.ymax,o=t+(u=i)*e)}if(e>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/e)<u&&(o=this.xmax,a=n+(u=i)*r)}else if(e<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/e)<u&&(o=this.xmin,a=n+(u=i)*r)}return[o,a]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}const su=2*Math.PI,lu=Math.pow;function hu(t){return t[0]}function du(t){return t[1]}function pu(t,n,e){return[t+Math.sin(t+n)*e,n+Math.cos(t-n)*e]}class gu{static from(t,n=hu,e=du,r){return new gu("length"in t?function(t,n,e,r){const i=t.length,o=new Float64Array(2*i);for(let a=0;a<i;++a){const i=t[a];o[2*a]=n.call(r,i,a,t),o[2*a+1]=e.call(r,i,a,t)}return o}(t,n,e,r):Float64Array.from(function*(t,n,e,r){let i=0;for(const o of t)yield n.call(r,o,i,t),yield e.call(r,o,i,t),++i}(t,n,e,r)))}constructor(t){this._delaunator=new Qa(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&function(t){const{triangles:n,coords:e}=t;for(let t=0;t<n.length;t+=3){const r=2*n[t],i=2*n[t+1],o=2*n[t+2];if((e[o]-e[r])*(e[i+1]-e[r+1])-(e[i]-e[r])*(e[o+1]-e[r+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:n.length/2},((t,n)=>n)).sort(((t,e)=>n[2*t]-n[2*e]||n[2*t+1]-n[2*e+1]));const t=this.collinear[0],e=this.collinear[this.collinear.length-1],r=[n[2*t],n[2*t+1],n[2*e],n[2*e+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let t=0,e=n.length/2;t<e;++t){const e=pu(n[2*t],n[2*t+1],i);n[2*t]=e[0],n[2*t+1]=e[1]}this._delaunator=new Qa(n)}else delete this.collinear;const e=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let t=0,n=e.length;t<n;++t){const n=i[t%3==2?t-2:t+1];-1!==e[t]&&-1!==o[n]||(o[n]=t)}for(let t=0,n=r.length;t<n;++t)a[r[t]]=t;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,2===r.length&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new fu(this,t)}*neighbors(t){const{inedges:n,hull:e,_hullIndex:r,halfedges:i,triangles:o,collinear:a}=this;if(a){const n=a.indexOf(t);return n>0&&(yield a[n-1]),void(n<a.length-1&&(yield a[n+1]))}const u=n[t];if(-1===u)return;let c=u,f=-1;do{if(yield f=o[c],c=c%3==2?c-2:c+1,o[c]!==t)return;if(c=i[c],-1===c){const n=e[(r[t]+1)%e.length];return void(n!==f&&(yield n))}}while(c!==u)}find(t,n,e=0){if((t=+t)!=t||(n=+n)!=n)return-1;const r=e;let i;for(;(i=this._step(e,t,n))>=0&&i!==e&&i!==r;)e=i;return i}_step(t,n,e){const{inedges:r,hull:i,_hullIndex:o,halfedges:a,triangles:u,points:c}=this;if(-1===r[t]||!c.length)return(t+1)%(c.length>>1);let f=t,s=lu(n-c[2*t],2)+lu(e-c[2*t+1],2);const l=r[t];let h=l;do{let r=u[h];const l=lu(n-c[2*r],2)+lu(e-c[2*r+1],2);if(l<s&&(s=l,f=r),h=h%3==2?h-2:h+1,u[h]!==t)break;if(h=a[h],-1===h){if(h=i[(o[t]+1)%i.length],h!==r&&lu(n-c[2*h],2)+lu(e-c[2*h+1],2)<s)return h;break}}while(h!==l);return f}render(t){const n=null==t?t=new uu:void 0,{points:e,halfedges:r,triangles:i}=this;for(let n=0,o=r.length;n<o;++n){const o=r[n];if(o<n)continue;const a=2*i[n],u=2*i[o];t.moveTo(e[a],e[a+1]),t.lineTo(e[u],e[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){void 0!==n||t&&"function"==typeof t.moveTo||(n=t,t=null),n=null==n?2:+n;const e=null==t?t=new uu:void 0,{points:r}=this;for(let e=0,i=r.length;e<i;e+=2){const i=r[e],o=r[e+1];t.moveTo(i+n,o),t.arc(i,o,n,0,su)}return e&&e.value()}renderHull(t){const n=null==t?t=new uu:void 0,{hull:e,points:r}=this,i=2*e[0],o=e.length;t.moveTo(r[i],r[i+1]);for(let n=1;n<o;++n){const i=2*e[n];t.lineTo(r[i],r[i+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new cu;return this.renderHull(t),t.value()}renderTriangle(t,n){const e=null==n?n=new uu:void 0,{points:r,triangles:i}=this,o=2*i[t*=3],a=2*i[t+1],u=2*i[t+2];return n.moveTo(r[o],r[o+1]),n.lineTo(r[a],r[a+1]),n.lineTo(r[u],r[u+1]),n.closePath(),e&&e.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,e=t.length/3;n<e;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new cu;return this.renderTriangle(t,n),n.value()}}var yu={},vu={};function _u(t){return new Function("d","return {"+t.map((function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'})).join(",")+"}")}function bu(t){var n=Object.create(null),e=[];return t.forEach((function(t){for(var r in t)r in n||e.push(n[r]=r)})),e}function mu(t,n){var e=t+"",r=e.length;return r<n?new Array(n-r+1).join(0)+e:e}function xu(t){var n=t.getUTCHours(),e=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+mu(-t,6):t>9999?"+"+mu(t,6):mu(t,4)}(t.getUTCFullYear())+"-"+mu(t.getUTCMonth()+1,2)+"-"+mu(t.getUTCDate(),2)+(i?"T"+mu(n,2)+":"+mu(e,2)+":"+mu(r,2)+"."+mu(i,3)+"Z":r?"T"+mu(n,2)+":"+mu(e,2)+":"+mu(r,2)+"Z":e||n?"T"+mu(n,2)+":"+mu(e,2)+"Z":"")}function wu(t){var n=new RegExp('["'+t+"\n\r]"),e=t.charCodeAt(0);function r(t,n){var r,i=[],o=t.length,a=0,u=0,c=o<=0,f=!1;function s(){if(c)return vu;if(f)return f=!1,yu;var n,r,i=a;if(34===t.charCodeAt(i)){for(;a++<o&&34!==t.charCodeAt(a)||34===t.charCodeAt(++a););return(n=a)>=o?c=!0:10===(r=t.charCodeAt(a++))?f=!0:13===r&&(f=!0,10===t.charCodeAt(a)&&++a),t.slice(i+1,n-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=t.charCodeAt(n=a++)))f=!0;else if(13===r)f=!0,10===t.charCodeAt(a)&&++a;else if(r!==e)continue;return t.slice(i,n)}return c=!0,t.slice(i,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=s())!==vu;){for(var l=[];r!==yu&&r!==vu;)l.push(r),r=s();n&&null==(l=n(l,u++))||i.push(l)}return i}function i(n,e){return n.map((function(n){return e.map((function(t){return a(n[t])})).join(t)}))}function o(n){return n.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?xu(t):n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,n){var e,i,o=r(t,(function(t,r){if(e)return e(t,r-1);i=t,e=n?function(t,n){var e=_u(t);return function(r,i){return n(e(r),i,t)}}(t,n):_u(t)}));return o.columns=i||[],o},parseRows:r,format:function(n,e){return null==e&&(e=bu(n)),[e.map(a).join(t)].concat(i(n,e)).join("\n")},formatBody:function(t,n){return null==n&&(n=bu(t)),i(t,n).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}}var Mu=wu(","),Au=Mu.parse,Tu=Mu.parseRows,Su=Mu.format,Eu=Mu.formatBody,ku=Mu.formatRows,Nu=Mu.formatRow,Cu=Mu.formatValue,Pu=wu("\t"),zu=Pu.parse,Du=Pu.parseRows,Ru=Pu.format,Fu=Pu.formatBody,qu=Pu.formatRows,Ou=Pu.formatRow,Uu=Pu.formatValue;const Iu=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Bu(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function Yu(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function Lu(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function ju(t,n){return fetch(t,n).then(Lu)}function Hu(t){return function(n,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=void 0),ju(n,e).then((function(n){return t(n,r)}))}}var Xu=Hu(Au),Gu=Hu(zu);function Vu(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function $u(t){return(n,e)=>ju(n,e).then((n=>(new DOMParser).parseFromString(n,t)))}var Wu=$u("application/xml"),Zu=$u("text/html"),Ku=$u("image/svg+xml");function Qu(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,o,a,u,c,f,s,l,h,d=t._root,p={data:r},g=t._x0,y=t._y0,v=t._x1,_=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((f=n>=(o=(g+v)/2))?g=o:v=o,(s=e>=(a=(y+_)/2))?y=a:_=a,i=d,!(d=d[l=s<<1|f]))return i[l]=p,t;if(u=+t._x.call(null,d.data),c=+t._y.call(null,d.data),n===u&&e===c)return p.next=d,i?i[l]=p:t._root=p,t;do{i=i?i[l]=new Array(4):t._root=new Array(4),(f=n>=(o=(g+v)/2))?g=o:v=o,(s=e>=(a=(y+_)/2))?y=a:_=a}while((l=s<<1|f)==(h=(c>=a)<<1|u>=o));return i[h]=d,i[l]=p,t}function Ju(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i}function tc(t){return t[0]}function nc(t){return t[1]}function ec(t,n,e){var r=new rc(null==n?tc:n,null==e?nc:e,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function rc(t,n,e,r,i,o){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function ic(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var oc=ec.prototype=rc.prototype;function ac(t){return function(){return t}}function uc(t){return 1e-6*(t()-.5)}function cc(t){return t.x+t.vx}function fc(t){return t.y+t.vy}function sc(t){return t.index}function lc(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}oc.copy=function(){var t,n,e=new rc(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return e;if(!r.length)return e._root=ic(r),e;for(t=[{source:r,target:e._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(n=r.source[i])&&(n.length?t.push({source:n,target:r.target[i]=new Array(4)}):r.target[i]=ic(n));return e},oc.add=function(t){const n=+this._x.call(null,t),e=+this._y.call(null,t);return Qu(this.cover(n,e),n,e,t)},oc.addAll=function(t){var n,e,r,i,o=t.length,a=new Array(o),u=new Array(o),c=1/0,f=1/0,s=-1/0,l=-1/0;for(e=0;e<o;++e)isNaN(r=+this._x.call(null,n=t[e]))||isNaN(i=+this._y.call(null,n))||(a[e]=r,u[e]=i,r<c&&(c=r),r>s&&(s=r),i<f&&(f=i),i>l&&(l=i));if(c>s||f>l)return this;for(this.cover(c,f).cover(s,l),e=0;e<o;++e)Qu(this,a[e],u[e],t[e]);return this},oc.cover=function(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,o=(r=Math.floor(n))+1;else{for(var a,u,c=i-e||1,f=this._root;e>t||t>=i||r>n||n>=o;)switch(u=(n<r)<<1|t<e,(a=new Array(4))[u]=f,f=a,c*=2,u){case 0:i=e+c,o=r+c;break;case 1:e=i-c,o=r+c;break;case 2:i=e+c,r=o-c;break;case 3:e=i-c,r=o-c}this._root&&this._root.length&&(this._root=f)}return this._x0=e,this._y0=r,this._x1=i,this._y1=o,this},oc.data=function(){var t=[];return this.visit((function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)})),t},oc.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},oc.find=function(t,n,e){var r,i,o,a,u,c,f,s=this._x0,l=this._y0,h=this._x1,d=this._y1,p=[],g=this._root;for(g&&p.push(new Ju(g,s,l,h,d)),null==e?e=1/0:(s=t-e,l=n-e,h=t+e,d=n+e,e*=e);c=p.pop();)if(!(!(g=c.node)||(i=c.x0)>h||(o=c.y0)>d||(a=c.x1)<s||(u=c.y1)<l))if(g.length){var y=(i+a)/2,v=(o+u)/2;p.push(new Ju(g[3],y,v,a,u),new Ju(g[2],i,v,y,u),new Ju(g[1],y,o,a,v),new Ju(g[0],i,o,y,v)),(f=(n>=v)<<1|t>=y)&&(c=p[p.length-1],p[p.length-1]=p[p.length-1-f],p[p.length-1-f]=c)}else{var _=t-+this._x.call(null,g.data),b=n-+this._y.call(null,g.data),m=_*_+b*b;if(m<e){var x=Math.sqrt(e=m);s=t-x,l=n-x,h=t+x,d=n+x,r=g.data}}return r},oc.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var n,e,r,i,o,a,u,c,f,s,l,h,d=this._root,p=this._x0,g=this._y0,y=this._x1,v=this._y1;if(!d)return this;if(d.length)for(;;){if((f=o>=(u=(p+y)/2))?p=u:y=u,(s=a>=(c=(g+v)/2))?g=c:v=c,n=d,!(d=d[l=s<<1|f]))return this;if(!d.length)break;(n[l+1&3]||n[l+2&3]||n[l+3&3])&&(e=n,h=l)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):n?(i?n[l]=i:delete n[l],(d=n[0]||n[1]||n[2]||n[3])&&d===(n[3]||n[2]||n[1]||n[0])&&!d.length&&(e?e[h]=d:this._root=d),this):(this._root=i,this)},oc.removeAll=function(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this},oc.root=function(){return this._root},oc.size=function(){var t=0;return this.visit((function(n){if(!n.length)do{++t}while(n=n.next)})),t},oc.visit=function(t){var n,e,r,i,o,a,u=[],c=this._root;for(c&&u.push(new Ju(c,this._x0,this._y0,this._x1,this._y1));n=u.pop();)if(!t(c=n.node,r=n.x0,i=n.y0,o=n.x1,a=n.y1)&&c.length){var f=(r+o)/2,s=(i+a)/2;(e=c[3])&&u.push(new Ju(e,f,s,o,a)),(e=c[2])&&u.push(new Ju(e,r,s,f,a)),(e=c[1])&&u.push(new Ju(e,f,i,o,s)),(e=c[0])&&u.push(new Ju(e,r,i,f,s))}return this},oc.visitAfter=function(t){var n,e=[],r=[];for(this._root&&e.push(new Ju(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var o,a=n.x0,u=n.y0,c=n.x1,f=n.y1,s=(a+c)/2,l=(u+f)/2;(o=i[0])&&e.push(new Ju(o,a,u,s,l)),(o=i[1])&&e.push(new Ju(o,s,u,c,l)),(o=i[2])&&e.push(new Ju(o,a,l,s,f)),(o=i[3])&&e.push(new Ju(o,s,l,c,f))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this},oc.x=function(t){return arguments.length?(this._x=t,this):this._x},oc.y=function(t){return arguments.length?(this._y=t,this):this._y};const hc=4294967296;function dc(t){return t.x}function pc(t){return t.y}var gc=Math.PI*(3-Math.sqrt(5));function yc(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function vc(t){return(t=yc(Math.abs(t)))?t[1]:NaN}var _c,bc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mc(t){if(!(n=bc.exec(t)))throw new Error("invalid format: "+t);var n;return new xc({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function xc(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function wc(t,n){var e=yc(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}mc.prototype=xc.prototype,xc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Mc={"%":(t,n)=>(100*t).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>wc(100*t,n),r:wc,s:function(t,n){var e=yc(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(_c=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+yc(t,Math.max(0,n+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ac(t){return t}var Tc,Sc=Array.prototype.map,Ec=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function kc(t){var n,e,r=void 0===t.grouping||void 0===t.thousands?Ac:(n=Sc.call(t.grouping,Number),e=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,u=n[0],c=0;i>0&&u>0&&(c+u+1>r&&(u=Math.max(1,r-c)),o.push(t.substring(i-=u,i+u)),!((c+=u+1)>r));)u=n[a=(a+1)%n.length];return o.reverse().join(e)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",u=void 0===t.numerals?Ac:function(t){return function(n){return n.replace(/[0-9]/g,(function(n){return t[+n]}))}}(Sc.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",f=void 0===t.minus?"":t.minus+"",s=void 0===t.nan?"NaN":t.nan+"";function l(t){var n=(t=mc(t)).fill,e=t.align,l=t.sign,h=t.symbol,d=t.zero,p=t.width,g=t.comma,y=t.precision,v=t.trim,_=t.type;"n"===_?(g=!0,_="g"):Mc[_]||(void 0===y&&(y=12),v=!0,_="g"),(d||"0"===n&&"="===e)&&(d=!0,n="0",e="=");var b="$"===h?i:"#"===h&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",m="$"===h?o:/[%p]/.test(_)?c:"",x=Mc[_],w=/[defgprs%]/.test(_);function M(t){var i,o,c,h=b,M=m;if("c"===_)M=x(t)+M,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?s:x(Math.abs(t),y),v&&(t=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(n+1):t}(t)),A&&0==+t&&"+"!==l&&(A=!1),h=(A?"("===l?l:f:"-"===l||"("===l?"":l)+h,M=("s"===_?Ec[8+_c/3]:"")+M+(A&&"("===l?")":""),w)for(i=-1,o=t.length;++i<o;)if(48>(c=t.charCodeAt(i))||c>57){M=(46===c?a+t.slice(i+1):t.slice(i))+M,t=t.slice(0,i);break}}g&&!d&&(t=r(t,1/0));var T=h.length+t.length+M.length,S=T<p?new Array(p-T+1).join(n):"";switch(g&&d&&(t=r(S+t,S.length?p-M.length:1/0),S=""),e){case"<":t=h+t+M+S;break;case"=":t=h+S+t+M;break;case"^":t=S.slice(0,T=S.length>>1)+h+t+M+S.slice(T);break;default:t=S+h+t+M}return u(t)}return y=void 0===y?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),M.toString=function(){return t+""},M}return{format:l,formatPrefix:function(t,n){var e=l(((t=mc(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(vc(n)/3))),i=Math.pow(10,-r),o=Ec[8+r/3];return function(t){return e(i*t)+o}}}}function Nc(n){return Tc=kc(n),t.format=Tc.format,t.formatPrefix=Tc.formatPrefix,Tc}function Cc(t){return Math.max(0,-vc(Math.abs(t)))}function Pc(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(vc(n)/3)))-vc(Math.abs(t)))}function zc(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,vc(n)-vc(t))+1}t.format=void 0,t.formatPrefix=void 0,Nc({thousands:",",grouping:[3],currency:["$",""]});var Dc=1e-6,Rc=1e-12,Fc=Math.PI,qc=Fc/2,Oc=Fc/4,Uc=2*Fc,Ic=180/Fc,Bc=Fc/180,Yc=Math.abs,Lc=Math.atan,jc=Math.atan2,Hc=Math.cos,Xc=Math.ceil,Gc=Math.exp,Vc=Math.hypot,$c=Math.log,Wc=Math.pow,Zc=Math.sin,Kc=Math.sign||function(t){return t>0?1:t<0?-1:0},Qc=Math.sqrt,Jc=Math.tan;function tf(t){return t>1?0:t<-1?Fc:Math.acos(t)}function nf(t){return t>1?qc:t<-1?-qc:Math.asin(t)}function ef(t){return(t=Zc(t/2))*t}function rf(){}function of(t,n){t&&uf.hasOwnProperty(t.type)&&uf[t.type](t,n)}var af={Feature:function(t,n){of(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)of(e[r].geometry,n)}},uf={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){cf(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)cf(e[r],n,0)},Polygon:function(t,n){ff(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)ff(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)of(e[r],n)}};function cf(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function ff(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)cf(t[e],n,1);n.polygonEnd()}function sf(t,n){t&&af.hasOwnProperty(t.type)?af[t.type](t,n):of(t,n)}var lf,hf,df,pf,gf,yf,vf,_f,bf,mf,xf,wf,Mf,Af,Tf,Sf,Ef=new y,kf=new y,Nf={point:rf,lineStart:rf,lineEnd:rf,polygonStart:function(){Ef=new y,Nf.lineStart=Cf,Nf.lineEnd=Pf},polygonEnd:function(){var t=+Ef;kf.add(t<0?Uc+t:t),this.lineStart=this.lineEnd=this.point=rf},sphere:function(){kf.add(Uc)}};function Cf(){Nf.point=zf}function Pf(){Df(lf,hf)}function zf(t,n){Nf.point=Df,lf=t,hf=n,df=t*=Bc,pf=Hc(n=(n*=Bc)/2+Oc),gf=Zc(n)}function Df(t,n){var e=(t*=Bc)-df,r=e>=0?1:-1,i=r*e,o=Hc(n=(n*=Bc)/2+Oc),a=Zc(n),u=gf*a,c=pf*o+u*Hc(i),f=u*r*Zc(i);Ef.add(jc(f,c)),df=t,pf=o,gf=a}function Rf(t){return[jc(t[1],t[0]),nf(t[2])]}function Ff(t){var n=t[0],e=t[1],r=Hc(e);return[r*Hc(n),r*Zc(n),Zc(e)]}function qf(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Of(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Uf(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function If(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Bf(t){var n=Qc(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}var Yf,Lf,jf,Hf,Xf,Gf,Vf,$f,Wf,Zf,Kf,Qf,Jf,ts,ns,es,rs={point:is,lineStart:as,lineEnd:us,polygonStart:function(){rs.point=cs,rs.lineStart=fs,rs.lineEnd=ss,Af=new y,Nf.polygonStart()},polygonEnd:function(){Nf.polygonEnd(),rs.point=is,rs.lineStart=as,rs.lineEnd=us,Ef<0?(yf=-(_f=180),vf=-(bf=90)):Af>Dc?bf=90:Af<-1e-6&&(vf=-90),Sf[0]=yf,Sf[1]=_f},sphere:function(){yf=-(_f=180),vf=-(bf=90)}};function is(t,n){Tf.push(Sf=[yf=t,_f=t]),n<vf&&(vf=n),n>bf&&(bf=n)}function os(t,n){var e=Ff([t*Bc,n*Bc]);if(Mf){var r=Of(Mf,e),i=Of([r[1],-r[0],0],r);Bf(i),i=Rf(i);var o,a=t-mf,u=a>0?1:-1,c=i[0]*Ic*u,f=Yc(a)>180;f^(u*mf<c&&c<u*t)?(o=i[1]*Ic)>bf&&(bf=o):f^(u*mf<(c=(c+360)%360-180)&&c<u*t)?(o=-i[1]*Ic)<vf&&(vf=o):(n<vf&&(vf=n),n>bf&&(bf=n)),f?t<mf?ls(yf,t)>ls(yf,_f)&&(_f=t):ls(t,_f)>ls(yf,_f)&&(yf=t):_f>=yf?(t<yf&&(yf=t),t>_f&&(_f=t)):t>mf?ls(yf,t)>ls(yf,_f)&&(_f=t):ls(t,_f)>ls(yf,_f)&&(yf=t)}else Tf.push(Sf=[yf=t,_f=t]);n<vf&&(vf=n),n>bf&&(bf=n),Mf=e,mf=t}function as(){rs.point=os}function us(){Sf[0]=yf,Sf[1]=_f,rs.point=is,Mf=null}function cs(t,n){if(Mf){var e=t-mf;Af.add(Yc(e)>180?e+(e>0?360:-360):e)}else xf=t,wf=n;Nf.point(t,n),os(t,n)}function fs(){Nf.lineStart()}function ss(){cs(xf,wf),Nf.lineEnd(),Yc(Af)>Dc&&(yf=-(_f=180)),Sf[0]=yf,Sf[1]=_f,Mf=null}function ls(t,n){return(n-=t)<0?n+360:n}function hs(t,n){return t[0]-n[0]}function ds(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var ps={sphere:rf,point:gs,lineStart:vs,lineEnd:ms,polygonStart:function(){ps.lineStart=xs,ps.lineEnd=ws},polygonEnd:function(){ps.lineStart=vs,ps.lineEnd=ms}};function gs(t,n){t*=Bc;var e=Hc(n*=Bc);ys(e*Hc(t),e*Zc(t),Zc(n))}function ys(t,n,e){++Yf,jf+=(t-jf)/Yf,Hf+=(n-Hf)/Yf,Xf+=(e-Xf)/Yf}function vs(){ps.point=_s}function _s(t,n){t*=Bc;var e=Hc(n*=Bc);ts=e*Hc(t),ns=e*Zc(t),es=Zc(n),ps.point=bs,ys(ts,ns,es)}function bs(t,n){t*=Bc;var e=Hc(n*=Bc),r=e*Hc(t),i=e*Zc(t),o=Zc(n),a=jc(Qc((a=ns*o-es*i)*a+(a=es*r-ts*o)*a+(a=ts*i-ns*r)*a),ts*r+ns*i+es*o);Lf+=a,Gf+=a*(ts+(ts=r)),Vf+=a*(ns+(ns=i)),$f+=a*(es+(es=o)),ys(ts,ns,es)}function ms(){ps.point=gs}function xs(){ps.point=Ms}function ws(){As(Qf,Jf),ps.point=gs}function Ms(t,n){Qf=t,Jf=n,t*=Bc,n*=Bc,ps.point=As;var e=Hc(n);ts=e*Hc(t),ns=e*Zc(t),es=Zc(n),ys(ts,ns,es)}function As(t,n){t*=Bc;var e=Hc(n*=Bc),r=e*Hc(t),i=e*Zc(t),o=Zc(n),a=ns*o-es*i,u=es*r-ts*o,c=ts*i-ns*r,f=Vc(a,u,c),s=nf(f),l=f&&-s/f;Wf.add(l*a),Zf.add(l*u),Kf.add(l*c),Lf+=s,Gf+=s*(ts+(ts=r)),Vf+=s*(ns+(ns=i)),$f+=s*(es+(es=o)),ys(ts,ns,es)}function Ts(t){return function(){return t}}function Ss(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function Es(t,n){return[Yc(t)>Fc?t+Math.round(-t/Uc)*Uc:t,n]}function ks(t,n,e){return(t%=Uc)?n||e?Ss(Cs(t),Ps(n,e)):Cs(t):n||e?Ps(n,e):Es}function Ns(t){return function(n,e){return[(n+=t)>Fc?n-Uc:n<-Fc?n+Uc:n,e]}}function Cs(t){var n=Ns(t);return n.invert=Ns(-t),n}function Ps(t,n){var e=Hc(t),r=Zc(t),i=Hc(n),o=Zc(n);function a(t,n){var a=Hc(n),u=Hc(t)*a,c=Zc(t)*a,f=Zc(n),s=f*e+u*r;return[jc(c*i-s*o,u*e-f*r),nf(s*i+c*o)]}return a.invert=function(t,n){var a=Hc(n),u=Hc(t)*a,c=Zc(t)*a,f=Zc(n),s=f*i-c*o;return[jc(c*i+f*o,u*e+s*r),nf(s*e-u*r)]},a}function zs(t){function n(n){return(n=t(n[0]*Bc,n[1]*Bc))[0]*=Ic,n[1]*=Ic,n}return t=ks(t[0]*Bc,t[1]*Bc,t.length>2?t[2]*Bc:0),n.invert=function(n){return(n=t.invert(n[0]*Bc,n[1]*Bc))[0]*=Ic,n[1]*=Ic,n},n}function Ds(t,n,e,r,i,o){if(e){var a=Hc(n),u=Zc(n),c=r*e;null==i?(i=n+r*Uc,o=n-c/2):(i=Rs(a,i),o=Rs(a,o),(r>0?i<o:i>o)&&(i+=r*Uc));for(var f,s=i;r>0?s>o:s<o;s-=c)f=Rf([a,-u*Hc(s),-u*Zc(s)]),t.point(f[0],f[1])}}function Rs(t,n){(n=Ff(n))[0]-=t,Bf(n);var e=tf(-n[1]);return((-n[2]<0?-e:e)+Uc-Dc)%Uc}function Fs(){var t,n=[];return{point:function(n,e,r){t.push([n,e,r])},lineStart:function(){n.push(t=[])},lineEnd:rf,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function qs(t,n){return Yc(t[0]-n[0])<Dc&&Yc(t[1]-n[1])<Dc}function Os(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Us(t,n,e,r,i){var o,a,u=[],c=[];if(t.forEach((function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],a=t[n];if(qs(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<n;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2e-6}u.push(e=new Os(r,t,null,!0)),c.push(e.o=new Os(r,null,e,!1)),u.push(e=new Os(a,t,null,!1)),c.push(e.o=new Os(a,null,e,!0))}})),u.length){for(c.sort(n),Is(u),Is(c),o=0,a=c.length;o<a;++o)c[o].e=e=!e;for(var f,s,l=u[0];;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;f=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,a=f.length;o<a;++o)i.point((s=f[o])[0],s[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(f=h.p.z,o=f.length-1;o>=0;--o)i.point((s=f[o])[0],s[1]);else r(h.x,h.p.x,-1,i);h=h.p}f=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}}function Is(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}function Bs(t){return Yc(t[0])<=Fc?t[0]:Kc(t[0])*((Yc(t[0])+Fc)%Uc-Fc)}function Ys(t,n){var e=Bs(n),r=n[1],i=Zc(r),o=[Zc(e),-Hc(e),0],a=0,u=0,c=new y;1===i?r=qc+Dc:-1===i&&(r=-qc-Dc);for(var f=0,s=t.length;f<s;++f)if(h=(l=t[f]).length)for(var l,h,d=l[h-1],p=Bs(d),g=d[1]/2+Oc,v=Zc(g),_=Hc(g),b=0;b<h;++b,p=x,v=M,_=A,d=m){var m=l[b],x=Bs(m),w=m[1]/2+Oc,M=Zc(w),A=Hc(w),T=x-p,S=T>=0?1:-1,E=S*T,k=E>Fc,N=v*M;if(c.add(jc(N*S*Zc(E),_*A+N*Hc(E))),a+=k?T+S*Uc:T,k^p>=e^x>=e){var C=Of(Ff(d),Ff(m));Bf(C);var P=Of(o,C);Bf(P);var z=(k^T>=0?-1:1)*nf(P[2]);(r>z||r===z&&(C[0]||C[1]))&&(u+=k^T>=0?1:-1)}}return(a<-1e-6||a<Dc&&c<-1e-12)^1&u}function Ls(t,n,e,r){return function(i){var o,a,u,c=n(i),f=Fs(),s=n(f),l=!1,h={point:d,lineStart:g,lineEnd:y,polygonStart:function(){h.point=v,h.lineStart=_,h.lineEnd=b,a=[],o=[]},polygonEnd:function(){h.point=d,h.lineStart=g,h.lineEnd=y,a=K(a);var t=Ys(o,r);a.length?(l||(i.polygonStart(),l=!0),Us(a,Hs,t,e,i)):t&&(l||(i.polygonStart(),l=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(n,e){t(n,e)&&i.point(n,e)}function p(t,n){c.point(t,n)}function g(){h.point=p,c.lineStart()}function y(){h.point=d,c.lineEnd()}function v(t,n){u.push([t,n]),s.point(t,n)}function _(){s.lineStart(),u=[]}function b(){v(u[0][0],u[0][1]),s.lineEnd();var t,n,e,r,c=s.clean(),h=f.result(),d=h.length;if(u.pop(),o.push(u),u=null,d)if(1&c){if((n=(e=h[0]).length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),t=0;t<n;++t)i.point((r=e[t])[0],r[1]);i.lineEnd()}}else d>1&&2&c&&h.push(h.pop().concat(h.shift())),a.push(h.filter(js))}return h}}function js(t){return t.length>1}function Hs(t,n){return((t=t.x)[0]<0?t[1]-qc-Dc:qc-t[1])-((n=n.x)[0]<0?n[1]-qc-Dc:qc-n[1])}Es.invert=Es;var Xs=Ls((function(){return!0}),(function(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,a){var u=o>0?Fc:-Fc,c=Yc(o-e);Yc(c-Fc)<Dc?(t.point(e,r=(r+a)/2>0?qc:-qc),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),n=0):i!==u&&c>=Fc&&(Yc(e-i)<Dc&&(e-=i*Dc),Yc(o-u)<Dc&&(o-=u*Dc),r=function(t,n,e,r){var i,o,a=Zc(t-e);return Yc(a)>Dc?Lc((Zc(n)*(o=Hc(r))*Zc(e)-Zc(r)*(i=Hc(n))*Zc(t))/(i*o*a)):(n+r)/2}(e,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),n=0),t.point(e=o,r=a),i=u},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}),(function(t,n,e,r){var i;if(null==t)i=e*qc,r.point(-Fc,i),r.point(0,i),r.point(Fc,i),r.point(Fc,0),r.point(Fc,-i),r.point(0,-i),r.point(-Fc,-i),r.point(-Fc,0),r.point(-Fc,i);else if(Yc(t[0]-n[0])>Dc){var o=t[0]<n[0]?Fc:-Fc;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])}),[-Fc,-qc]);function Gs(t){var n=Hc(t),e=6*Bc,r=n>0,i=Yc(n)>Dc;function o(t,e){return Hc(t)*Hc(e)>n}function a(t,e,r){var i=[1,0,0],o=Of(Ff(t),Ff(e)),a=qf(o,o),u=o[0],c=a-u*u;if(!c)return!r&&t;var f=n*a/c,s=-n*u/c,l=Of(i,o),h=If(i,f);Uf(h,If(o,s));var d=l,p=qf(h,d),g=qf(d,d),y=p*p-g*(qf(h,h)-1);if(!(y<0)){var v=Qc(y),_=If(d,(-p-v)/g);if(Uf(_,h),_=Rf(_),!r)return _;var b,m=t[0],x=e[0],w=t[1],M=e[1];x<m&&(b=m,m=x,x=b);var A=x-m,T=Yc(A-Fc)<Dc;if(!T&&M<w&&(b=w,w=M,M=b),T||A<Dc?T?w+M>0^_[1]<(Yc(_[0]-m)<Dc?w:M):w<=_[1]&&_[1]<=M:A>Fc^(m<=_[0]&&_[0]<=x)){var S=If(d,(-p+v)/g);return Uf(S,h),[_,Rf(S)]}}}function u(n,e){var i=r?t:Fc-t,o=0;return n<-i?o|=1:n>i&&(o|=2),e<-i?o|=4:e>i&&(o|=8),o}return Ls(o,(function(t){var n,e,c,f,s;return{lineStart:function(){f=c=!1,s=1},point:function(l,h){var d,p=[l,h],g=o(l,h),y=r?g?0:u(l,h):g?u(l+(l<0?Fc:-Fc),h):0;if(!n&&(f=c=g)&&t.lineStart(),g!==c&&(!(d=a(n,p))||qs(n,d)||qs(p,d))&&(p[2]=1),g!==c)s=0,g?(t.lineStart(),d=a(p,n),t.point(d[0],d[1])):(d=a(n,p),t.point(d[0],d[1],2),t.lineEnd()),n=d;else if(i&&n&&r^g){var v;y&e||!(v=a(p,n,!0))||(s=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1],3)))}!g||n&&qs(n,p)||t.point(p[0],p[1]),n=p,c=g,e=y},lineEnd:function(){c&&t.lineEnd(),n=null},clean:function(){return s|(f&&c)<<1}}}),(function(n,r,i,o){Ds(o,t,e,i,n,r)}),r?[0,-t]:[-Fc,t-Fc])}var Vs,$s,Ws,Zs,Ks=1e9,Qs=-Ks;function Js(t,n,e,r){function i(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function o(i,o,u,f){var s=0,l=0;if(null==i||(s=a(i,u))!==(l=a(o,u))||c(i,o)<0^u>0)do{f.point(0===s||3===s?t:e,s>1?r:n)}while((s=(s+u+4)%4)!==l);else f.point(o[0],o[1])}function a(r,i){return Yc(r[0]-t)<Dc?i>0?0:3:Yc(r[0]-e)<Dc?i>0?2:1:Yc(r[1]-n)<Dc?i>0?1:0:i>0?3:2}function u(t,n){return c(t.x,n.x)}function c(t,n){var e=a(t,1),r=a(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(a){var c,f,s,l,h,d,p,g,y,v,_,b=a,m=Fs(),x={point:w,lineStart:function(){x.point=M,f&&f.push(s=[]);v=!0,y=!1,p=g=NaN},lineEnd:function(){c&&(M(l,h),d&&y&&m.rejoin(),c.push(m.result()));x.point=w,y&&b.lineEnd()},polygonStart:function(){b=m,c=[],f=[],_=!0},polygonEnd:function(){var n=function(){for(var n=0,e=0,i=f.length;e<i;++e)for(var o,a,u=f[e],c=1,s=u.length,l=u[0],h=l[0],d=l[1];c<s;++c)o=h,a=d,h=(l=u[c])[0],d=l[1],a<=r?d>r&&(h-o)*(r-a)>(d-a)*(t-o)&&++n:d<=r&&(h-o)*(r-a)<(d-a)*(t-o)&&--n;return n}(),e=_&&n,i=(c=K(c)).length;(e||i)&&(a.polygonStart(),e&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Us(c,u,n,o,a),a.polygonEnd());b=a,c=f=s=null}};function w(t,n){i(t,n)&&b.point(t,n)}function M(o,a){var u=i(o,a);if(f&&s.push([o,a]),v)l=o,h=a,d=u,v=!1,u&&(b.lineStart(),b.point(o,a));else if(u&&y)b.point(o,a);else{var c=[p=Math.max(Qs,Math.min(Ks,p)),g=Math.max(Qs,Math.min(Ks,g))],m=[o=Math.max(Qs,Math.min(Ks,o)),a=Math.max(Qs,Math.min(Ks,a))];!function(t,n,e,r,i,o){var a,u=t[0],c=t[1],f=0,s=1,l=n[0]-u,h=n[1]-c;if(a=e-u,l||!(a>0)){if(a/=l,l<0){if(a<f)return;a<s&&(s=a)}else if(l>0){if(a>s)return;a>f&&(f=a)}if(a=i-u,l||!(a<0)){if(a/=l,l<0){if(a>s)return;a>f&&(f=a)}else if(l>0){if(a<f)return;a<s&&(s=a)}if(a=r-c,h||!(a>0)){if(a/=h,h<0){if(a<f)return;a<s&&(s=a)}else if(h>0){if(a>s)return;a>f&&(f=a)}if(a=o-c,h||!(a<0)){if(a/=h,h<0){if(a>s)return;a>f&&(f=a)}else if(h>0){if(a<f)return;a<s&&(s=a)}return f>0&&(t[0]=u+f*l,t[1]=c+f*h),s<1&&(n[0]=u+s*l,n[1]=c+s*h),!0}}}}}(c,m,t,n,e,r)?u&&(b.lineStart(),b.point(o,a),_=!1):(y||(b.lineStart(),b.point(c[0],c[1])),b.point(m[0],m[1]),u||b.lineEnd(),_=!1)}p=o,g=a,y=u}return x}}var tl={sphere:rf,point:rf,lineStart:function(){tl.point=el,tl.lineEnd=nl},lineEnd:rf,polygonStart:rf,polygonEnd:rf};function nl(){tl.point=tl.lineEnd=rf}function el(t,n){$s=t*=Bc,Ws=Zc(n*=Bc),Zs=Hc(n),tl.point=rl}function rl(t,n){t*=Bc;var e=Zc(n*=Bc),r=Hc(n),i=Yc(t-$s),o=Hc(i),a=r*Zc(i),u=Zs*e-Ws*r*o,c=Ws*e+Zs*r*o;Vs.add(jc(Qc(a*a+u*u),c)),$s=t,Ws=e,Zs=r}function il(t){return Vs=new y,sf(t,tl),+Vs}var ol=[null,null],al={type:"LineString",coordinates:ol};function ul(t,n){return ol[0]=t,ol[1]=n,il(al)}var cl={Feature:function(t,n){return sl(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)if(sl(e[r].geometry,n))return!0;return!1}},fl={Sphere:function(){return!0},Point:function(t,n){return ll(t.coordinates,n)},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(ll(e[r],n))return!0;return!1},LineString:function(t,n){return hl(t.coordinates,n)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(hl(e[r],n))return!0;return!1},Polygon:function(t,n){return dl(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(dl(e[r],n))return!0;return!1},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)if(sl(e[r],n))return!0;return!1}};function sl(t,n){return!(!t||!fl.hasOwnProperty(t.type))&&fl[t.type](t,n)}function ll(t,n){return 0===ul(t,n)}function hl(t,n){for(var e,r,i,o=0,a=t.length;o<a;o++){if(0===(r=ul(t[o],n)))return!0;if(o>0&&(i=ul(t[o],t[o-1]))>0&&e<=i&&r<=i&&(e+r-i)*(1-Math.pow((e-r)/i,2))<Rc*i)return!0;e=r}return!1}function dl(t,n){return!!Ys(t.map(pl),gl(n))}function pl(t){return(t=t.map(gl)).pop(),t}function gl(t){return[t[0]*Bc,t[1]*Bc]}function yl(t,n,e){var r=tt(t,n-Dc,e).concat(n);return function(t){return r.map((function(n){return[t,n]}))}}function vl(t,n,e){var r=tt(t,n-Dc,e).concat(n);return function(t){return r.map((function(n){return[n,t]}))}}function _l(){var t,n,e,r,i,o,a,u,c,f,s,l,h=10,d=h,p=90,g=360,y=2.5;function v(){return{type:"MultiLineString",coordinates:_()}}function _(){return tt(Xc(r/p)*p,e,p).map(s).concat(tt(Xc(u/g)*g,a,g).map(l)).concat(tt(Xc(n/h)*h,t,h).filter((function(t){return Yc(t%p)>Dc})).map(c)).concat(tt(Xc(o/d)*d,i,d).filter((function(t){return Yc(t%g)>Dc})).map(f))}return v.lines=function(){return _().map((function(t){return{type:"LineString",coordinates:t}}))},v.outline=function(){return{type:"Polygon",coordinates:[s(r).concat(l(a).slice(1),s(e).reverse().slice(1),l(u).reverse().slice(1))]}},v.extent=function(t){return arguments.length?v.extentMajor(t).extentMinor(t):v.extentMinor()},v.extentMajor=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],u=+t[0][1],a=+t[1][1],r>e&&(t=r,r=e,e=t),u>a&&(t=u,u=a,a=t),v.precision(y)):[[r,u],[e,a]]},v.extentMinor=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],o=+e[0][1],i=+e[1][1],n>t&&(e=n,n=t,t=e),o>i&&(e=o,o=i,i=e),v.precision(y)):[[n,o],[t,i]]},v.step=function(t){return arguments.length?v.stepMajor(t).stepMinor(t):v.stepMinor()},v.stepMajor=function(t){return arguments.length?(p=+t[0],g=+t[1],v):[p,g]},v.stepMinor=function(t){return arguments.length?(h=+t[0],d=+t[1],v):[h,d]},v.precision=function(h){return arguments.length?(y=+h,c=yl(o,i,90),f=vl(n,t,y),s=yl(u,a,90),l=vl(r,e,y),v):y},v.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}var bl,ml,xl,wl,Ml=t=>t,Al=new y,Tl=new y,Sl={point:rf,lineStart:rf,lineEnd:rf,polygonStart:function(){Sl.lineStart=El,Sl.lineEnd=Cl},polygonEnd:function(){Sl.lineStart=Sl.lineEnd=Sl.point=rf,Al.add(Yc(Tl)),Tl=new y},result:function(){var t=Al/2;return Al=new y,t}};function El(){Sl.point=kl}function kl(t,n){Sl.point=Nl,bl=xl=t,ml=wl=n}function Nl(t,n){Tl.add(wl*t-xl*n),xl=t,wl=n}function Cl(){Nl(bl,ml)}var Pl=Sl,zl=1/0,Dl=zl,Rl=-zl,Fl=Rl,ql={point:function(t,n){t<zl&&(zl=t);t>Rl&&(Rl=t);n<Dl&&(Dl=n);n>Fl&&(Fl=n)},lineStart:rf,lineEnd:rf,polygonStart:rf,polygonEnd:rf,result:function(){var t=[[zl,Dl],[Rl,Fl]];return Rl=Fl=-(Dl=zl=1/0),t}};var Ol,Ul,Il,Bl,Yl=ql,Ll=0,jl=0,Hl=0,Xl=0,Gl=0,Vl=0,$l=0,Wl=0,Zl=0,Kl={point:Ql,lineStart:Jl,lineEnd:eh,polygonStart:function(){Kl.lineStart=rh,Kl.lineEnd=ih},polygonEnd:function(){Kl.point=Ql,Kl.lineStart=Jl,Kl.lineEnd=eh},result:function(){var t=Zl?[$l/Zl,Wl/Zl]:Vl?[Xl/Vl,Gl/Vl]:Hl?[Ll/Hl,jl/Hl]:[NaN,NaN];return Ll=jl=Hl=Xl=Gl=Vl=$l=Wl=Zl=0,t}};function Ql(t,n){Ll+=t,jl+=n,++Hl}function Jl(){Kl.point=th}function th(t,n){Kl.point=nh,Ql(Il=t,Bl=n)}function nh(t,n){var e=t-Il,r=n-Bl,i=Qc(e*e+r*r);Xl+=i*(Il+t)/2,Gl+=i*(Bl+n)/2,Vl+=i,Ql(Il=t,Bl=n)}function eh(){Kl.point=Ql}function rh(){Kl.point=oh}function ih(){ah(Ol,Ul)}function oh(t,n){Kl.point=ah,Ql(Ol=Il=t,Ul=Bl=n)}function ah(t,n){var e=t-Il,r=n-Bl,i=Qc(e*e+r*r);Xl+=i*(Il+t)/2,Gl+=i*(Bl+n)/2,Vl+=i,$l+=(i=Bl*t-Il*n)*(Il+t),Wl+=i*(Bl+n),Zl+=3*i,Ql(Il=t,Bl=n)}var uh=Kl;function ch(t){this._context=t}ch.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,Uc)}},result:rf};var fh,sh,lh,hh,dh,ph=new y,gh={point:rf,lineStart:function(){gh.point=yh},lineEnd:function(){fh&&vh(sh,lh),gh.point=rf},polygonStart:function(){fh=!0},polygonEnd:function(){fh=null},result:function(){var t=+ph;return ph=new y,t}};function yh(t,n){gh.point=vh,sh=hh=t,lh=dh=n}function vh(t,n){hh-=t,dh-=n,ph.add(Qc(hh*hh+dh*dh)),hh=t,dh=n}var _h=gh;function bh(){this._string=[]}function mh(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function xh(t){return function(n){var e=new wh;for(var r in t)e[r]=t[r];return e.stream=n,e}}function wh(){}function Mh(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),sf(e,t.stream(Yl)),n(Yl.result()),null!=r&&t.clipExtent(r),t}function Ah(t,n,e){return Mh(t,(function(e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),a=+n[0][0]+(r-o*(e[1][0]+e[0][0]))/2,u=+n[0][1]+(i-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([a,u])}),e)}function Th(t,n,e){return Ah(t,[[0,0],n],e)}function Sh(t,n,e){return Mh(t,(function(e){var r=+n,i=r/(e[1][0]-e[0][0]),o=(r-i*(e[1][0]+e[0][0]))/2,a=-i*e[0][1];t.scale(150*i).translate([o,a])}),e)}function Eh(t,n,e){return Mh(t,(function(e){var r=+n,i=r/(e[1][1]-e[0][1]),o=-i*e[0][0],a=(r-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([o,a])}),e)}bh.prototype={_radius:4.5,_circle:mh(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push("M",t,",",n),this._point=1;break;case 1:this._string.push("L",t,",",n);break;default:null==this._circle&&(this._circle=mh(this._radius)),this._string.push("M",t,",",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},wh.prototype={constructor:wh,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var kh=Hc(30*Bc);function Nh(t,n){return+n?function(t,n){function e(r,i,o,a,u,c,f,s,l,h,d,p,g,y){var v=f-r,_=s-i,b=v*v+_*_;if(b>4*n&&g--){var m=a+h,x=u+d,w=c+p,M=Qc(m*m+x*x+w*w),A=nf(w/=M),T=Yc(Yc(w)-1)<Dc||Yc(o-l)<Dc?(o+l)/2:jc(x,m),S=t(T,A),E=S[0],k=S[1],N=E-r,C=k-i,P=_*N-v*C;(P*P/b>n||Yc((v*N+_*C)/b-.5)>.3||a*h+u*d+c*p<kh)&&(e(r,i,o,a,u,c,E,k,T,m/=M,x/=M,w,g,y),y.point(E,k),e(E,k,T,m,x,w,f,s,l,h,d,p,g,y))}}return function(n){var r,i,o,a,u,c,f,s,l,h,d,p,g={point:y,lineStart:v,lineEnd:b,polygonStart:function(){n.polygonStart(),g.lineStart=m},polygonEnd:function(){n.polygonEnd(),g.lineStart=v}};function y(e,r){e=t(e,r),n.point(e[0],e[1])}function v(){s=NaN,g.point=_,n.lineStart()}function _(r,i){var o=Ff([r,i]),a=t(r,i);e(s,l,f,h,d,p,s=a[0],l=a[1],f=r,h=o[0],d=o[1],p=o[2],16,n),n.point(s,l)}function b(){g.point=y,n.lineEnd()}function m(){v(),g.point=x,g.lineEnd=w}function x(t,n){_(r=t,n),i=s,o=l,a=h,u=d,c=p,g.point=_}function w(){e(s,l,f,h,d,p,i,o,r,a,u,c,16,n),g.lineEnd=b,b()}return g}}(t,n):function(t){return xh({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)}var Ch=xh({point:function(t,n){this.stream.point(t*Bc,n*Bc)}});function Ph(t,n,e,r,i,o){if(!o)return function(t,n,e,r,i){function o(o,a){return[n+t*(o*=r),e-t*(a*=i)]}return o.invert=function(o,a){return[(o-n)/t*r,(e-a)/t*i]},o}(t,n,e,r,i);var a=Hc(o),u=Zc(o),c=a*t,f=u*t,s=a/t,l=u/t,h=(u*e-a*n)/t,d=(u*n+a*e)/t;function p(t,o){return[c*(t*=r)-f*(o*=i)+n,e-f*t-c*o]}return p.invert=function(t,n){return[r*(s*t-l*n+h),i*(d-l*t-s*n)]},p}function zh(t){return Dh((function(){return t}))()}function Dh(t){var n,e,r,i,o,a,u,c,f,s,l=150,h=480,d=250,p=0,g=0,y=0,v=0,_=0,b=0,m=1,x=1,w=null,M=Xs,A=null,T=Ml,S=.5;function E(t){return c(t[0]*Bc,t[1]*Bc)}function k(t){return(t=c.invert(t[0],t[1]))&&[t[0]*Ic,t[1]*Ic]}function N(){var t=Ph(l,0,0,m,x,b).apply(null,n(p,g)),r=Ph(l,h-t[0],d-t[1],m,x,b);return e=ks(y,v,_),u=Ss(n,r),c=Ss(e,u),a=Nh(u,S),C()}function C(){return f=s=null,E}return E.stream=function(t){return f&&s===t?f:f=Ch(function(t){return xh({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}(e)(M(a(T(s=t)))))},E.preclip=function(t){return arguments.length?(M=t,w=void 0,C()):M},E.postclip=function(t){return arguments.length?(T=t,A=r=i=o=null,C()):T},E.clipAngle=function(t){return arguments.length?(M=+t?Gs(w=t*Bc):(w=null,Xs),C()):w*Ic},E.clipExtent=function(t){return arguments.length?(T=null==t?(A=r=i=o=null,Ml):Js(A=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),C()):null==A?null:[[A,r],[i,o]]},E.scale=function(t){return arguments.length?(l=+t,N()):l},E.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],N()):[h,d]},E.center=function(t){return arguments.length?(p=t[0]%360*Bc,g=t[1]%360*Bc,N()):[p*Ic,g*Ic]},E.rotate=function(t){return arguments.length?(y=t[0]%360*Bc,v=t[1]%360*Bc,_=t.length>2?t[2]%360*Bc:0,N()):[y*Ic,v*Ic,_*Ic]},E.angle=function(t){return arguments.length?(b=t%360*Bc,N()):b*Ic},E.reflectX=function(t){return arguments.length?(m=t?-1:1,N()):m<0},E.reflectY=function(t){return arguments.length?(x=t?-1:1,N()):x<0},E.precision=function(t){return arguments.length?(a=Nh(u,S=t*t),C()):Qc(S)},E.fitExtent=function(t,n){return Ah(E,t,n)},E.fitSize=function(t,n){return Th(E,t,n)},E.fitWidth=function(t,n){return Sh(E,t,n)},E.fitHeight=function(t,n){return Eh(E,t,n)},function(){return n=t.apply(this,arguments),E.invert=n.invert&&k,N()}}function Rh(t){var n=0,e=Fc/3,r=Dh(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*Bc,e=t[1]*Bc):[n*Ic,e*Ic]},i}function Fh(t,n){var e=Zc(t),r=(e+Zc(n))/2;if(Yc(r)<Dc)return function(t){var n=Hc(t);function e(t,e){return[t*n,Zc(e)/n]}return e.invert=function(t,e){return[t/n,nf(e*n)]},e}(t);var i=1+e*(2*r-e),o=Qc(i)/r;function a(t,n){var e=Qc(i-2*r*Zc(n))/r;return[e*Zc(t*=r),o-e*Hc(t)]}return a.invert=function(t,n){var e=o-n,a=jc(t,Yc(e))*Kc(e);return e*r<0&&(a-=Fc*Kc(t)*Kc(e)),[a/r,nf((i-(t*t+e*e)*r*r)/(2*r))]},a}function qh(){return Rh(Fh).scale(155.424).center([0,33.6442])}function Oh(){return qh().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Uh(t){return function(n,e){var r=Hc(n),i=Hc(e),o=t(r*i);return o===1/0?[2,0]:[o*i*Zc(n),o*Zc(e)]}}function Ih(t){return function(n,e){var r=Qc(n*n+e*e),i=t(r),o=Zc(i),a=Hc(i);return[jc(n*o,r*a),nf(r&&e*o/r)]}}var Bh=Uh((function(t){return Qc(2/(1+t))}));Bh.invert=Ih((function(t){return 2*nf(t/2)}));var Yh=Uh((function(t){return(t=tf(t))&&t/Zc(t)}));function Lh(t,n){return[t,$c(Jc((qc+n)/2))]}function jh(t){var n,e,r,i=zh(t),o=i.center,a=i.scale,u=i.translate,c=i.clipExtent,f=null;function s(){var o=Fc*a(),u=i(zs(i.rotate()).invert([0,0]));return c(null==f?[[u[0]-o,u[1]-o],[u[0]+o,u[1]+o]]:t===Lh?[[Math.max(u[0]-o,f),n],[Math.min(u[0]+o,e),r]]:[[f,Math.max(u[1]-o,n)],[e,Math.min(u[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),s()):a()},i.translate=function(t){return arguments.length?(u(t),s()):u()},i.center=function(t){return arguments.length?(o(t),s()):o()},i.clipExtent=function(t){return arguments.length?(null==t?f=n=e=r=null:(f=+t[0][0],n=+t[0][1],e=+t[1][0],r=+t[1][1]),s()):null==f?null:[[f,n],[e,r]]},s()}function Hh(t){return Jc((qc+t)/2)}function Xh(t,n){var e=Hc(t),r=t===n?Zc(t):$c(e/Hc(n))/$c(Hh(n)/Hh(t)),i=e*Wc(Hh(t),r)/r;if(!r)return Lh;function o(t,n){i>0?n<-qc+Dc&&(n=-qc+Dc):n>qc-Dc&&(n=qc-Dc);var e=i/Wc(Hh(n),r);return[e*Zc(r*t),i-e*Hc(r*t)]}return o.invert=function(t,n){var e=i-n,o=Kc(r)*Qc(t*t+e*e),a=jc(t,Yc(e))*Kc(e);return e*r<0&&(a-=Fc*Kc(t)*Kc(e)),[a/r,2*Lc(Wc(i/o,1/r))-qc]},o}function Gh(t,n){return[t,n]}function Vh(t,n){var e=Hc(t),r=t===n?Zc(t):(e-Hc(n))/(n-t),i=e/r+t;if(Yc(r)<Dc)return Gh;function o(t,n){var e=i-n,o=r*t;return[e*Zc(o),i-e*Hc(o)]}return o.invert=function(t,n){var e=i-n,o=jc(t,Yc(e))*Kc(e);return e*r<0&&(o-=Fc*Kc(t)*Kc(e)),[o/r,i-Kc(r)*Qc(t*t+e*e)]},o}Yh.invert=Ih((function(t){return t})),Lh.invert=function(t,n){return[t,2*Lc(Gc(n))-qc]},Gh.invert=Gh;var $h=1.340264,Wh=-.081106,Zh=893e-6,Kh=.003796,Qh=Qc(3)/2;function Jh(t,n){var e=nf(Qh*Zc(n)),r=e*e,i=r*r*r;return[t*Hc(e)/(Qh*($h+3*Wh*r+i*(7*Zh+9*Kh*r))),e*($h+Wh*r+i*(Zh+Kh*r))]}function td(t,n){var e=Hc(n),r=Hc(t)*e;return[e*Zc(t)/r,Zc(n)/r]}function nd(t,n){var e=n*n,r=e*e;return[t*(.8707-.131979*e+r*(r*(.003971*e-.001529*r)-.013791)),n*(1.007226+e*(.015085+r*(.028874*e-.044475-.005916*r)))]}function ed(t,n){return[Hc(n)*Zc(t),Zc(n)]}function rd(t,n){var e=Hc(n),r=1+Hc(t)*e;return[e*Zc(t)/r,Zc(n)/r]}function id(t,n){return[$c(Jc((qc+n)/2)),-t]}function od(t,n){return t.parent===n.parent?1:2}function ad(t,n){return t+n.x}function ud(t,n){return Math.max(t,n.y)}function cd(t){var n=0,e=t.children,r=e&&e.length;if(r)for(;--r>=0;)n+=e[r].value;else n=1;t.value=n}function fd(t,n){t instanceof Map?(t=[void 0,t],void 0===n&&(n=ld)):void 0===n&&(n=sd);for(var e,r,i,o,a,u=new pd(t),c=[u];e=c.pop();)if((i=n(e.data))&&(a=(i=Array.from(i)).length))for(e.children=i,o=a-1;o>=0;--o)c.push(r=i[o]=new pd(i[o])),r.parent=e,r.depth=e.depth+1;return u.eachBefore(dd)}function sd(t){return t.children}function ld(t){return Array.isArray(t)?t[1]:null}function hd(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function dd(t){var n=0;do{t.height=n}while((t=t.parent)&&t.height<++n)}function pd(t){this.data=t,this.depth=this.height=0,this.parent=null}function gd(t){for(var n,e,r=0,i=(t=function(t){for(var n,e,r=t.length;r;)e=Math.random()*r--|0,n=t[r],t[r]=t[e],t[e]=n;return t}(Array.from(t))).length,o=[];r<i;)n=t[r],e&&_d(e,n)?++r:(e=md(o=yd(o,n)),r=0);return e}function yd(t,n){var e,r;if(bd(n,t))return[n];for(e=0;e<t.length;++e)if(vd(n,t[e])&&bd(xd(t[e],n),t))return[t[e],n];for(e=0;e<t.length-1;++e)for(r=e+1;r<t.length;++r)if(vd(xd(t[e],t[r]),n)&&vd(xd(t[e],n),t[r])&&vd(xd(t[r],n),t[e])&&bd(wd(t[e],t[r],n),t))return[t[e],t[r],n];throw new Error}function vd(t,n){var e=t.r-n.r,r=n.x-t.x,i=n.y-t.y;return e<0||e*e<r*r+i*i}function _d(t,n){var e=t.r-n.r+1e-9*Math.max(t.r,n.r,1),r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function bd(t,n){for(var e=0;e<n.length;++e)if(!_d(t,n[e]))return!1;return!0}function md(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return xd(t[0],t[1]);case 3:return wd(t[0],t[1],t[2])}}function xd(t,n){var e=t.x,r=t.y,i=t.r,o=n.x,a=n.y,u=n.r,c=o-e,f=a-r,s=u-i,l=Math.sqrt(c*c+f*f);return{x:(e+o+c/l*s)/2,y:(r+a+f/l*s)/2,r:(l+i+u)/2}}function wd(t,n,e){var r=t.x,i=t.y,o=t.r,a=n.x,u=n.y,c=n.r,f=e.x,s=e.y,l=e.r,h=r-a,d=r-f,p=i-u,g=i-s,y=c-o,v=l-o,_=r*r+i*i-o*o,b=_-a*a-u*u+c*c,m=_-f*f-s*s+l*l,x=d*p-h*g,w=(p*m-g*b)/(2*x)-r,M=(g*y-p*v)/x,A=(d*b-h*m)/(2*x)-i,T=(h*v-d*y)/x,S=M*M+T*T-1,E=2*(o+w*M+A*T),k=w*w+A*A-o*o,N=-(S?(E+Math.sqrt(E*E-4*S*k))/(2*S):k/E);return{x:r+w+M*N,y:i+A+T*N,r:N}}function Md(t,n,e){var r,i,o,a,u=t.x-n.x,c=t.y-n.y,f=u*u+c*c;f?(i=n.r+e.r,i*=i,a=t.r+e.r,i>(a*=a)?(r=(f+a-i)/(2*f),o=Math.sqrt(Math.max(0,a/f-r*r)),e.x=t.x-r*u-o*c,e.y=t.y-r*c+o*u):(r=(f+i-a)/(2*f),o=Math.sqrt(Math.max(0,i/f-r*r)),e.x=n.x+r*u-o*c,e.y=n.y+r*c+o*u)):(e.x=n.x+e.r,e.y=n.y)}function Ad(t,n){var e=t.r+n.r-1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function Td(t){var n=t._,e=t.next._,r=n.r+e.r,i=(n.x*e.r+e.x*n.r)/r,o=(n.y*e.r+e.y*n.r)/r;return i*i+o*o}function Sd(t){this._=t,this.next=null,this.previous=null}function Ed(t){if(!(i=(t=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(t)).length))return 0;var n,e,r,i,o,a,u,c,f,s,l;if((n=t[0]).x=0,n.y=0,!(i>1))return n.r;if(e=t[1],n.x=-e.r,e.x=n.r,e.y=0,!(i>2))return n.r+e.r;Md(e,n,r=t[2]),n=new Sd(n),e=new Sd(e),r=new Sd(r),n.next=r.previous=e,e.next=n.previous=r,r.next=e.previous=n;t:for(u=3;u<i;++u){Md(n._,e._,r=t[u]),r=new Sd(r),c=e.next,f=n.previous,s=e._.r,l=n._.r;do{if(s<=l){if(Ad(c._,r._)){e=c,n.next=e,e.previous=n,--u;continue t}s+=c._.r,c=c.next}else{if(Ad(f._,r._)){(n=f).next=e,e.previous=n,--u;continue t}l+=f._.r,f=f.previous}}while(c!==f.next);for(r.previous=n,r.next=e,n.next=e.previous=e=r,o=Td(n);(r=r.next)!==e;)(a=Td(r))<o&&(n=r,o=a);e=n.next}for(n=[e._],r=e;(r=r.next)!==e;)n.push(r._);for(r=gd(n),u=0;u<i;++u)(n=t[u]).x-=r.x,n.y-=r.y;return r.r}function kd(t){return null==t?null:Nd(t)}function Nd(t){if("function"!=typeof t)throw new Error;return t}function Cd(){return 0}function Pd(t){return function(){return t}}function zd(t){return Math.sqrt(t.value)}function Dd(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function Rd(t,n){return function(e){if(r=e.children){var r,i,o,a=r.length,u=t(e)*n||0;if(u)for(i=0;i<a;++i)r[i].r+=u;if(o=Ed(r),u)for(i=0;i<a;++i)r[i].r-=u;e.r=o+u}}}function Fd(t){return function(n){var e=n.parent;n.r*=t,e&&(n.x=e.x+t*n.x,n.y=e.y+t*n.y)}}function qd(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Od(t,n,e,r,i){for(var o,a=t.children,u=-1,c=a.length,f=t.value&&(r-n)/t.value;++u<c;)(o=a[u]).y0=e,o.y1=i,o.x0=n,o.x1=n+=o.value*f}Jh.invert=function(t,n){for(var e,r=n,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=e=(r*($h+Wh*i+o*(Zh+Kh*i))-n)/($h+3*Wh*i+o*(7*Zh+9*Kh*i)))*r)*i*i,!(Yc(e)<Rc));++a);return[Qh*t*($h+3*Wh*i+o*(7*Zh+9*Kh*i))/Hc(r),nf(Zc(r)/Qh)]},td.invert=Ih(Lc),nd.invert=function(t,n){var e,r=n,i=25;do{var o=r*r,a=o*o;r-=e=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-n)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(Yc(e)>Dc&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},ed.invert=Ih(nf),rd.invert=Ih((function(t){return 2*Lc(t)})),id.invert=function(t,n){return[-n,2*Lc(Gc(t))-qc]},pd.prototype=fd.prototype={constructor:pd,count:function(){return this.eachAfter(cd)},each:function(t,n){let e=-1;for(const r of this)t.call(n,r,++e,this);return this},eachAfter:function(t,n){for(var e,r,i,o=this,a=[o],u=[],c=-1;o=a.pop();)if(u.push(o),e=o.children)for(r=0,i=e.length;r<i;++r)a.push(e[r]);for(;o=u.pop();)t.call(n,o,++c,this);return this},eachBefore:function(t,n){for(var e,r,i=this,o=[i],a=-1;i=o.pop();)if(t.call(n,i,++a,this),e=i.children)for(r=e.length-1;r>=0;--r)o.push(e[r]);return this},find:function(t,n){let e=-1;for(const r of this)if(t.call(n,r,++e,this))return r},sum:function(t){return this.eachAfter((function(n){for(var e=+t(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)e+=r[i].value;n.value=e}))},sort:function(t){return this.eachBefore((function(n){n.children&&n.children.sort(t)}))},path:function(t){for(var n=this,e=function(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;t=e.pop(),n=r.pop();for(;t===n;)i=t,t=e.pop(),n=r.pop();return i}(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var i=r.length;t!==e;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(n){n.children||t.push(n)})),t},links:function(){var t=this,n=[];return t.each((function(e){e!==t&&n.push({source:e.parent,target:e})})),n},copy:function(){return fd(this).eachBefore(hd)},[Symbol.iterator]:function*(){var t,n,e,r,i=this,o=[i];do{for(t=o.reverse(),o=[];i=t.pop();)if(yield i,n=i.children)for(e=0,r=n.length;e<r;++e)o.push(n[e])}while(o.length)}};var Ud={depth:-1},Id={},Bd={};function Yd(t){return t.id}function Ld(t){return t.parentId}function jd(t){let n=t.length;if(n<2)return"";for(;--n>1&&!Hd(t,n););return t.slice(0,n)}function Hd(t,n){if("/"===t[n]){let e=0;for(;n>0&&"\\"===t[--n];)++e;if(0==(1&e))return!0}return!1}function Xd(t,n){return t.parent===n.parent?1:2}function Gd(t){var n=t.children;return n?n[0]:t.t}function Vd(t){var n=t.children;return n?n[n.length-1]:t.t}function $d(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function Wd(t,n,e){return t.a.parent===n.parent?t.a:e}function Zd(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}function Kd(t,n,e,r,i){for(var o,a=t.children,u=-1,c=a.length,f=t.value&&(i-e)/t.value;++u<c;)(o=a[u]).x0=n,o.x1=r,o.y0=e,o.y1=e+=o.value*f}Zd.prototype=Object.create(pd.prototype);var Qd=(1+Math.sqrt(5))/2;function Jd(t,n,e,r,i,o){for(var a,u,c,f,s,l,h,d,p,g,y,v=[],_=n.children,b=0,m=0,x=_.length,w=n.value;b<x;){c=i-e,f=o-r;do{s=_[m++].value}while(!s&&m<x);for(l=h=s,y=s*s*(g=Math.max(f/c,c/f)/(w*t)),p=Math.max(h/y,y/l);m<x;++m){if(s+=u=_[m].value,u<l&&(l=u),u>h&&(h=u),y=s*s*g,(d=Math.max(h/y,y/l))>p){s-=u;break}p=d}v.push(a={value:s,dice:c<f,children:_.slice(b,m)}),a.dice?Od(a,e,r,i,w?r+=f*s/w:o):Kd(a,e,r,w?e+=c*s/w:i,o),w-=s,b=m}return v}var tp=function t(n){function e(t,e,r,i,o){Jd(n,t,e,r,i,o)}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}(Qd);var np=function t(n){function e(t,e,r,i,o){if((a=t._squarify)&&a.ratio===n)for(var a,u,c,f,s,l=-1,h=a.length,d=t.value;++l<h;){for(c=(u=a[l]).children,f=u.value=0,s=c.length;f<s;++f)u.value+=c[f].value;u.dice?Od(u,e,r,i,d?r+=(o-r)*u.value/d:o):Kd(u,e,r,d?e+=(i-e)*u.value/d:i,o),d-=u.value}else t._squarify=a=Jd(n,t,e,r,i,o),a.ratio=n}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}(Qd);function ep(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])}function rp(t,n){return t[0]-n[0]||t[1]-n[1]}function ip(t){const n=t.length,e=[0,1];let r,i=2;for(r=2;r<n;++r){for(;i>1&&ep(t[e[i-2]],t[e[i-1]],t[r])<=0;)--i;e[i++]=r}return e.slice(0,i)}var op=Math.random,ap=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return n()*e+t}}return e.source=t,e}(op),up=function t(n){function e(t,e){return arguments.length<2&&(e=t,t=0),t=Math.floor(t),e=Math.floor(e)-t,function(){return Math.floor(n()*e+t)}}return e.source=t,e}(op),cp=function t(n){function e(t,e){var r,i;return t=null==t?0:+t,e=null==e?1:+e,function(){var o;if(null!=r)o=r,r=null;else do{r=2*n()-1,o=2*n()-1,i=r*r+o*o}while(!i||i>1);return t+e*o*Math.sqrt(-2*Math.log(i)/i)}}return e.source=t,e}(op),fp=function t(n){var e=cp.source(n);function r(){var t=e.apply(this,arguments);return function(){return Math.exp(t())}}return r.source=t,r}(op),sp=function t(n){function e(t){return(t=+t)<=0?()=>0:function(){for(var e=0,r=t;r>1;--r)e+=n();return e+r*n()}}return e.source=t,e}(op),lp=function t(n){var e=sp.source(n);function r(t){if(0==(t=+t))return n;var r=e(t);return function(){return r()/t}}return r.source=t,r}(op),hp=function t(n){function e(t){return function(){return-Math.log1p(-n())/t}}return e.source=t,e}(op),dp=function t(n){function e(t){if((t=+t)<0)throw new RangeError("invalid alpha");return t=1/-t,function(){return Math.pow(1-n(),t)}}return e.source=t,e}(op),pp=function t(n){function e(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return function(){return Math.floor(n()+t)}}return e.source=t,e}(op),gp=function t(n){function e(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return 0===t?()=>1/0:1===t?()=>1:(t=Math.log1p(-t),function(){return 1+Math.floor(Math.log1p(-n())/t)})}return e.source=t,e}(op),yp=function t(n){var e=cp.source(n)();function r(t,r){if((t=+t)<0)throw new RangeError("invalid k");if(0===t)return()=>0;if(r=null==r?1:+r,1===t)return()=>-Math.log1p(-n())*r;var i=(t<1?t+1:t)-1/3,o=1/(3*Math.sqrt(i)),a=t<1?()=>Math.pow(n(),1/t):()=>1;return function(){do{do{var t=e(),u=1+o*t}while(u<=0);u*=u*u;var c=1-n()}while(c>=1-.0331*t*t*t*t&&Math.log(c)>=.5*t*t+i*(1-u+Math.log(u)));return i*u*a()*r}}return r.source=t,r}(op),vp=function t(n){var e=yp.source(n);function r(t,n){var r=e(t),i=e(n);return function(){var t=r();return 0===t?0:t/(t+i())}}return r.source=t,r}(op),_p=function t(n){var e=gp.source(n),r=vp.source(n);function i(t,n){return t=+t,(n=+n)>=1?()=>t:n<=0?()=>0:function(){for(var i=0,o=t,a=n;o*a>16&&o*(1-a)>16;){var u=Math.floor((o+1)*a),c=r(u,o-u+1)();c<=a?(i+=u,o-=u,a=(a-c)/(1-c)):(o=u-1,a/=c)}for(var f=a<.5,s=e(f?a:1-a),l=s(),h=0;l<=o;++h)l+=s();return i+(f?h:o-h)}}return i.source=t,i}(op),bp=function t(n){function e(t,e,r){var i;return 0==(t=+t)?i=t=>-Math.log(t):(t=1/t,i=n=>Math.pow(n,t)),e=null==e?0:+e,r=null==r?1:+r,function(){return e+r*i(-Math.log1p(-n()))}}return e.source=t,e}(op),mp=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,function(){return t+e*Math.tan(Math.PI*n())}}return e.source=t,e}(op),xp=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,function(){var r=n();return t+e*Math.log(r/(1-r))}}return e.source=t,e}(op),wp=function t(n){var e=yp.source(n),r=_p.source(n);function i(t){return function(){for(var i=0,o=t;o>16;){var a=Math.floor(.875*o),u=e(a)();if(u>o)return i+r(a-1,o/u)();i+=a,o-=u}for(var c=-Math.log1p(-n()),f=0;c<=o;++f)c-=Math.log1p(-n());return i+f}}return i.source=t,i}(op);const Mp=1/4294967296;function Ap(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}function Tp(t,n){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof n?this.interpolator(n):this.range(n)}return this}const Sp=Symbol("implicit");function Ep(){var t=new InternMap,n=[],e=[],r=Sp;function i(i){let o=t.get(i);if(void 0===o){if(r!==Sp)return r;t.set(i,o=n.push(i)-1)}return e[o%e.length]}return i.domain=function(e){if(!arguments.length)return n.slice();n=[],t=new InternMap;for(const r of e)t.has(r)||t.set(r,n.push(r)-1);return i},i.range=function(t){return arguments.length?(e=Array.from(t),i):e.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Ep(n,e).unknown(r)},Ap.apply(i,arguments),i}function kp(){var t,n,e=Ep().unknown(void 0),r=e.domain,i=e.range,o=0,a=1,u=!1,c=0,f=0,s=.5;function l(){var e=r().length,l=a<o,h=l?a:o,d=l?o:a;t=(d-h)/Math.max(1,e-c+2*f),u&&(t=Math.floor(t)),h+=(d-h-t*(e-c))*s,n=t*(1-c),u&&(h=Math.round(h),n=Math.round(n));var p=tt(e).map((function(n){return h+t*n}));return i(l?p.reverse():p)}return delete e.unknown,e.domain=function(t){return arguments.length?(r(t),l()):r()},e.range=function(t){return arguments.length?([o,a]=t,o=+o,a=+a,l()):[o,a]},e.rangeRound=function(t){return[o,a]=t,o=+o,a=+a,u=!0,l()},e.bandwidth=function(){return n},e.step=function(){return t},e.round=function(t){return arguments.length?(u=!!t,l()):u},e.padding=function(t){return arguments.length?(c=Math.min(1,f=+t),l()):c},e.paddingInner=function(t){return arguments.length?(c=Math.min(1,t),l()):c},e.paddingOuter=function(t){return arguments.length?(f=+t,l()):f},e.align=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),l()):s},e.copy=function(){return kp(r(),[o,a]).round(u).paddingInner(c).paddingOuter(f).align(s)},Ap.apply(l(),arguments)}function Np(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Np(n())},t}function Cp(t){return+t}var Pp=[0,1];function zp(t){return t}function Dp(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:function(t){return function(){return t}}(isNaN(n)?NaN:.5)}function Rp(t,n,e){var r=t[0],i=t[1],o=n[0],a=n[1];return i<r?(r=Dp(i,r),o=e(a,o)):(r=Dp(r,i),o=e(o,a)),function(t){return o(r(t))}}function Fp(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<r;)i[a]=Dp(t[a],t[a+1]),o[a]=e(n[a],n[a+1]);return function(n){var e=c(t,n,1,r)-1;return o[e](i[e](n))}}function qp(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Op(){var t,n,e,r,i,o,a=Pp,u=Pp,c=Cr,f=zp;function s(){var t=Math.min(a.length,u.length);return f!==zp&&(f=function(t,n){var e;return t>n&&(e=t,t=n,n=e),function(e){return Math.max(t,Math.min(n,e))}}(a[0],a[t-1])),r=t>2?Fp:Rp,i=o=null,l}function l(n){return null==n||isNaN(n=+n)?e:(i||(i=r(a.map(t),u,c)))(t(f(n)))}return l.invert=function(e){return f(n((o||(o=r(u,a.map(t),Tr)))(e)))},l.domain=function(t){return arguments.length?(a=Array.from(t,Cp),s()):a.slice()},l.range=function(t){return arguments.length?(u=Array.from(t),s()):u.slice()},l.rangeRound=function(t){return u=Array.from(t),c=Pr,s()},l.clamp=function(t){return arguments.length?(f=!!t||zp,s()):f!==zp},l.interpolate=function(t){return arguments.length?(c=t,s()):c},l.unknown=function(t){return arguments.length?(e=t,l):e},function(e,r){return t=e,n=r,s()}}function Up(){return Op()(zp,zp)}function Ip(n,e,r,i){var o,a=B(n,e,r);switch((i=mc(null==i?",f":i)).type){case"s":var u=Math.max(Math.abs(n),Math.abs(e));return null!=i.precision||isNaN(o=Pc(a,u))||(i.precision=o),t.formatPrefix(i,u);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(o=zc(a,Math.max(Math.abs(n),Math.abs(e))))||(i.precision=o-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(o=Cc(a))||(i.precision=o-2*("%"===i.type))}return t.format(i)}function Bp(t){var n=t.domain;return t.ticks=function(t){var e=n();return U(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var r=n();return Ip(r[0],r[r.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var r,i,o=n(),a=0,u=o.length-1,c=o[a],f=o[u],s=10;for(f<c&&(i=c,c=f,f=i,i=a,a=u,u=i);s-- >0;){if((i=I(c,f,e))===r)return o[a]=c,o[u]=f,n(o);if(i>0)c=Math.floor(c/i)*i,f=Math.ceil(f/i)*i;else{if(!(i<0))break;c=Math.ceil(c*i)/i,f=Math.floor(f*i)/i}r=i}return t},t}function Yp(t,n){var e,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(e=r,r=i,i=e,e=o,o=a,a=e),t[r]=n.floor(o),t[i]=n.ceil(a),t}function Lp(t){return Math.log(t)}function jp(t){return Math.exp(t)}function Hp(t){return-Math.log(-t)}function Xp(t){return-Math.exp(-t)}function Gp(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Vp(t){return(n,e)=>-t(-n,e)}function $p(n){const e=n(Lp,jp),r=e.domain;let i,o,a=10;function u(){return i=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),n=>Math.log(n)/t)}(a),o=function(t){return 10===t?Gp:t===Math.E?Math.exp:n=>Math.pow(t,n)}(a),r()[0]<0?(i=Vp(i),o=Vp(o),n(Hp,Xp)):n(Lp,jp),e}return e.base=function(t){return arguments.length?(a=+t,u()):a},e.domain=function(t){return arguments.length?(r(t),u()):r()},e.ticks=t=>{const n=r();let e=n[0],u=n[n.length-1];const c=u<e;c&&([e,u]=[u,e]);let f,s,l=i(e),h=i(u);const d=null==t?10:+t;let p=[];if(!(a%1)&&h-l<d){if(l=Math.floor(l),h=Math.ceil(h),e>0){for(;l<=h;++l)for(f=1;f<a;++f)if(s=l<0?f/o(-l):f*o(l),!(s<e)){if(s>u)break;p.push(s)}}else for(;l<=h;++l)for(f=a-1;f>=1;--f)if(s=l>0?f/o(-l):f*o(l),!(s<e)){if(s>u)break;p.push(s)}2*p.length<d&&(p=U(e,u,d))}else p=U(l,h,Math.min(h-l,d)).map(o);return c?p.reverse():p},e.tickFormat=(n,r)=>{if(null==n&&(n=10),null==r&&(r=10===a?"s":","),"function"!=typeof r&&(a%1||null!=(r=mc(r)).precision||(r.trim=!0),r=t.format(r)),n===1/0)return r;const u=Math.max(1,a*n/e.ticks().length);return t=>{let n=t/o(Math.round(i(t)));return n*a<a-.5&&(n*=a),n<=u?r(t):""}},e.nice=()=>r(Yp(r(),{floor:t=>o(Math.floor(i(t))),ceil:t=>o(Math.ceil(i(t)))})),e}function Wp(t){return function(n){return Math.sign(n)*Math.log1p(Math.abs(n/t))}}function Zp(t){return function(n){return Math.sign(n)*Math.expm1(Math.abs(n))*t}}function Kp(t){var n=1,e=t(Wp(n),Zp(n));return e.constant=function(e){return arguments.length?t(Wp(n=+e),Zp(n)):n},Bp(e)}function Qp(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function Jp(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function tg(t){return t<0?-t*t:t*t}function ng(t){var n=t(zp,zp),e=1;function r(){return 1===e?t(zp,zp):.5===e?t(Jp,tg):t(Qp(e),Qp(1/e))}return n.exponent=function(t){return arguments.length?(e=+t,r()):e},Bp(n)}function eg(){var t=ng(Op());return t.copy=function(){return qp(t,eg()).exponent(t.exponent())},Ap.apply(t,arguments),t}function rg(t){return Math.sign(t)*t*t}function ig(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}var og=new Date,ag=new Date;function ug(t,n,e,r){function i(n){return t(n=0===arguments.length?new Date:new Date(+n)),n}return i.floor=function(n){return t(n=new Date(+n)),n},i.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},i.round=function(t){var n=i(t),e=i.ceil(t);return t-n<e-t?n:e},i.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},i.range=function(e,r,o){var a,u=[];if(e=i.ceil(e),o=null==o?1:Math.floor(o),!(e<r&&o>0))return u;do{u.push(a=new Date(+e)),n(e,o),t(e)}while(a<e&&e<r);return u},i.filter=function(e){return ug((function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;n(t,-1),!e(t););else for(;--r>=0;)for(;n(t,1),!e(t););}))},e&&(i.count=function(n,r){return og.setTime(+n),ag.setTime(+r),t(og),t(ag),Math.floor(e(og,ag))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(n){return r(n)%t==0}:function(n){return i.count(0,n)%t==0}):i:null}),i}var cg=ug((function(){}),(function(t,n){t.setTime(+t+n)}),(function(t,n){return n-t}));cg.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?ug((function(n){n.setTime(Math.floor(n/t)*t)}),(function(n,e){n.setTime(+n+e*t)}),(function(n,e){return(e-n)/t})):cg:null};var fg=cg,sg=cg.range;const lg=1e3,hg=6e4,dg=36e5,pg=864e5,gg=6048e5,yg=2592e6,vg=31536e6;var _g=ug((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,n){t.setTime(+t+n*lg)}),(function(t,n){return(n-t)/lg}),(function(t){return t.getUTCSeconds()})),bg=_g,mg=_g.range,xg=ug((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*lg)}),(function(t,n){t.setTime(+t+n*hg)}),(function(t,n){return(n-t)/hg}),(function(t){return t.getMinutes()})),wg=xg,Mg=xg.range,Ag=ug((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*lg-t.getMinutes()*hg)}),(function(t,n){t.setTime(+t+n*dg)}),(function(t,n){return(n-t)/dg}),(function(t){return t.getHours()})),Tg=Ag,Sg=Ag.range,Eg=ug((t=>t.setHours(0,0,0,0)),((t,n)=>t.setDate(t.getDate()+n)),((t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*hg)/pg),(t=>t.getDate()-1)),kg=Eg,Ng=Eg.range;function Cg(t){return ug((function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)}),(function(t,n){t.setDate(t.getDate()+7*n)}),(function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*hg)/gg}))}var Pg=Cg(0),zg=Cg(1),Dg=Cg(2),Rg=Cg(3),Fg=Cg(4),qg=Cg(5),Og=Cg(6),Ug=Pg.range,Ig=zg.range,Bg=Dg.range,Yg=Rg.range,Lg=Fg.range,jg=qg.range,Hg=Og.range,Xg=ug((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,n){t.setMonth(t.getMonth()+n)}),(function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),Gg=Xg,Vg=Xg.range,$g=ug((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n)}),(function(t,n){return n.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));$g.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ug((function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)}),(function(n,e){n.setFullYear(n.getFullYear()+e*t)})):null};var Wg=$g,Zg=$g.range,Kg=ug((function(t){t.setUTCSeconds(0,0)}),(function(t,n){t.setTime(+t+n*hg)}),(function(t,n){return(n-t)/hg}),(function(t){return t.getUTCMinutes()})),Qg=Kg,Jg=Kg.range,ty=ug((function(t){t.setUTCMinutes(0,0,0)}),(function(t,n){t.setTime(+t+n*dg)}),(function(t,n){return(n-t)/dg}),(function(t){return t.getUTCHours()})),ny=ty,ey=ty.range,ry=ug((function(t){t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+n)}),(function(t,n){return(n-t)/pg}),(function(t){return t.getUTCDate()-1})),iy=ry,oy=ry.range;function ay(t){return ug((function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+7*n)}),(function(t,n){return(n-t)/gg}))}var uy=ay(0),cy=ay(1),fy=ay(2),sy=ay(3),ly=ay(4),hy=ay(5),dy=ay(6),py=uy.range,gy=cy.range,yy=fy.range,vy=sy.range,_y=ly.range,by=hy.range,my=dy.range,xy=ug((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCMonth(t.getUTCMonth()+n)}),(function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),wy=xy,My=xy.range,Ay=ug((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)}),(function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Ay.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ug((function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)}),(function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)})):null};var Ty=Ay,Sy=Ay.range;function Ey(t,n,r,i,o,a){const u=[[bg,1,lg],[bg,5,5e3],[bg,15,15e3],[bg,30,3e4],[a,1,hg],[a,5,3e5],[a,15,9e5],[a,30,18e5],[o,1,dg],[o,3,108e5],[o,6,216e5],[o,12,432e5],[i,1,pg],[i,2,1728e5],[r,1,gg],[n,1,yg],[n,3,7776e6],[t,1,vg]];function c(n,r,i){const o=Math.abs(r-n)/i,a=e((([,,t])=>t)).right(u,o);if(a===u.length)return t.every(B(n/vg,r/vg,i));if(0===a)return fg.every(Math.max(B(n,r,i),1));const[c,f]=u[o/u[a-1][2]<u[a][2]/o?a-1:a];return c.every(f)}return[function(t,n,e){const r=n<t;r&&([t,n]=[n,t]);const i=e&&"function"==typeof e.range?e:c(t,n,e),o=i?i.range(t,+n+1):[];return r?o.reverse():o},c]}const[ky,Ny]=Ey(Ty,wy,uy,iy,ny,Qg),[Cy,Py]=Ey(Wg,Gg,Pg,kg,Tg,wg);function zy(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Dy(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ry(t,n,e){return{y:t,m:n,d:e,H:0,M:0,S:0,L:0}}function Fy(t){var n=t.dateTime,e=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,u=t.months,c=t.shortMonths,f=jy(i),s=Hy(i),l=jy(o),h=Hy(o),d=jy(a),p=Hy(a),g=jy(u),y=Hy(u),v=jy(c),_=Hy(c),b={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:null,d:lv,e:lv,f:yv,g:Ev,G:Nv,H:hv,I:dv,j:pv,L:gv,m:vv,M:_v,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Qv,s:Jv,S:bv,u:mv,U:xv,V:Mv,w:Av,W:Tv,x:null,X:null,y:Sv,Y:kv,Z:Cv,"%":Kv},m={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return u[t.getUTCMonth()]},c:null,d:Pv,e:Pv,f:qv,g:Vv,G:Wv,H:zv,I:Dv,j:Rv,L:Fv,m:Ov,M:Uv,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Qv,s:Jv,S:Iv,u:Bv,U:Yv,V:jv,w:Hv,W:Xv,x:null,X:null,y:Gv,Y:$v,Z:Zv,"%":Kv},x={a:function(t,n,e){var r=d.exec(n.slice(e));return r?(t.w=p.get(r[0].toLowerCase()),e+r[0].length):-1},A:function(t,n,e){var r=l.exec(n.slice(e));return r?(t.w=h.get(r[0].toLowerCase()),e+r[0].length):-1},b:function(t,n,e){var r=v.exec(n.slice(e));return r?(t.m=_.get(r[0].toLowerCase()),e+r[0].length):-1},B:function(t,n,e){var r=g.exec(n.slice(e));return r?(t.m=y.get(r[0].toLowerCase()),e+r[0].length):-1},c:function(t,e,r){return A(t,n,e,r)},d:nv,e:nv,f:uv,g:Ky,G:Zy,H:rv,I:rv,j:ev,L:av,m:tv,M:iv,p:function(t,n,e){var r=f.exec(n.slice(e));return r?(t.p=s.get(r[0].toLowerCase()),e+r[0].length):-1},q:Jy,Q:fv,s:sv,S:ov,u:Gy,U:Vy,V:$y,w:Xy,W:Wy,x:function(t,n,r){return A(t,e,n,r)},X:function(t,n,e){return A(t,r,n,e)},y:Ky,Y:Zy,Z:Qy,"%":cv};function w(t,n){return function(e){var r,i,o,a=[],u=-1,c=0,f=t.length;for(e instanceof Date||(e=new Date(+e));++u<f;)37===t.charCodeAt(u)&&(a.push(t.slice(c,u)),null!=(i=Oy[r=t.charAt(++u)])?r=t.charAt(++u):i="e"===r?" ":"0",(o=n[r])&&(r=o(e,i)),a.push(r),c=u+1);return a.push(t.slice(c,u)),a.join("")}}function M(t,n){return function(e){var r,i,o=Ry(1900,void 0,1);if(A(o,t,e+="",0)!=e.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(n&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Dy(Ry(o.y,0,1))).getUTCDay(),r=i>4||0===i?cy.ceil(r):cy(r),r=iy.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=zy(Ry(o.y,0,1))).getDay(),r=i>4||0===i?zg.ceil(r):zg(r),r=kg.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Dy(Ry(o.y,0,1)).getUTCDay():zy(Ry(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Dy(o)):zy(o)}}function A(t,n,e,r){for(var i,o,a=0,u=n.length,c=e.length;a<u;){if(r>=c)return-1;if(37===(i=n.charCodeAt(a++))){if(i=n.charAt(a++),!(o=x[i in Oy?n.charAt(a++):i])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}return b.x=w(e,b),b.X=w(r,b),b.c=w(n,b),m.x=w(e,m),m.X=w(r,m),m.c=w(n,m),{format:function(t){var n=w(t+="",b);return n.toString=function(){return t},n},parse:function(t){var n=M(t+="",!1);return n.toString=function(){return t},n},utcFormat:function(t){var n=w(t+="",m);return n.toString=function(){return t},n},utcParse:function(t){var n=M(t+="",!0);return n.toString=function(){return t},n}}}var qy,Oy={"-":"",_:" ",0:"0"},Uy=/^\s*\d+/,Iy=/^%/,By=/[\\^$*+?|[\]().{}]/g;function Yy(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function Ly(t){return t.replace(By,"\\$&")}function jy(t){return new RegExp("^(?:"+t.map(Ly).join("|")+")","i")}function Hy(t){return new Map(t.map(((t,n)=>[t.toLowerCase(),n])))}function Xy(t,n,e){var r=Uy.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function Gy(t,n,e){var r=Uy.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function Vy(t,n,e){var r=Uy.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function $y(t,n,e){var r=Uy.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function Wy(t,n,e){var r=Uy.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function Zy(t,n,e){var r=Uy.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function Ky(t,n,e){var r=Uy.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function Qy(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function Jy(t,n,e){var r=Uy.exec(n.slice(e,e+1));return r?(t.q=3*r[0]-3,e+r[0].length):-1}function tv(t,n,e){var r=Uy.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function nv(t,n,e){var r=Uy.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function ev(t,n,e){var r=Uy.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function rv(t,n,e){var r=Uy.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function iv(t,n,e){var r=Uy.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function ov(t,n,e){var r=Uy.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function av(t,n,e){var r=Uy.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function uv(t,n,e){var r=Uy.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function cv(t,n,e){var r=Iy.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function fv(t,n,e){var r=Uy.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function sv(t,n,e){var r=Uy.exec(n.slice(e));return r?(t.s=+r[0],e+r[0].length):-1}function lv(t,n){return Yy(t.getDate(),n,2)}function hv(t,n){return Yy(t.getHours(),n,2)}function dv(t,n){return Yy(t.getHours()%12||12,n,2)}function pv(t,n){return Yy(1+kg.count(Wg(t),t),n,3)}function gv(t,n){return Yy(t.getMilliseconds(),n,3)}function yv(t,n){return gv(t,n)+"000"}function vv(t,n){return Yy(t.getMonth()+1,n,2)}function _v(t,n){return Yy(t.getMinutes(),n,2)}function bv(t,n){return Yy(t.getSeconds(),n,2)}function mv(t){var n=t.getDay();return 0===n?7:n}function xv(t,n){return Yy(Pg.count(Wg(t)-1,t),n,2)}function wv(t){var n=t.getDay();return n>=4||0===n?Fg(t):Fg.ceil(t)}function Mv(t,n){return t=wv(t),Yy(Fg.count(Wg(t),t)+(4===Wg(t).getDay()),n,2)}function Av(t){return t.getDay()}function Tv(t,n){return Yy(zg.count(Wg(t)-1,t),n,2)}function Sv(t,n){return Yy(t.getFullYear()%100,n,2)}function Ev(t,n){return Yy((t=wv(t)).getFullYear()%100,n,2)}function kv(t,n){return Yy(t.getFullYear()%1e4,n,4)}function Nv(t,n){var e=t.getDay();return Yy((t=e>=4||0===e?Fg(t):Fg.ceil(t)).getFullYear()%1e4,n,4)}function Cv(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+Yy(n/60|0,"0",2)+Yy(n%60,"0",2)}function Pv(t,n){return Yy(t.getUTCDate(),n,2)}function zv(t,n){return Yy(t.getUTCHours(),n,2)}function Dv(t,n){return Yy(t.getUTCHours()%12||12,n,2)}function Rv(t,n){return Yy(1+iy.count(Ty(t),t),n,3)}function Fv(t,n){return Yy(t.getUTCMilliseconds(),n,3)}function qv(t,n){return Fv(t,n)+"000"}function Ov(t,n){return Yy(t.getUTCMonth()+1,n,2)}function Uv(t,n){return Yy(t.getUTCMinutes(),n,2)}function Iv(t,n){return Yy(t.getUTCSeconds(),n,2)}function Bv(t){var n=t.getUTCDay();return 0===n?7:n}function Yv(t,n){return Yy(uy.count(Ty(t)-1,t),n,2)}function Lv(t){var n=t.getUTCDay();return n>=4||0===n?ly(t):ly.ceil(t)}function jv(t,n){return t=Lv(t),Yy(ly.count(Ty(t),t)+(4===Ty(t).getUTCDay()),n,2)}function Hv(t){return t.getUTCDay()}function Xv(t,n){return Yy(cy.count(Ty(t)-1,t),n,2)}function Gv(t,n){return Yy(t.getUTCFullYear()%100,n,2)}function Vv(t,n){return Yy((t=Lv(t)).getUTCFullYear()%100,n,2)}function $v(t,n){return Yy(t.getUTCFullYear()%1e4,n,4)}function Wv(t,n){var e=t.getUTCDay();return Yy((t=e>=4||0===e?ly(t):ly.ceil(t)).getUTCFullYear()%1e4,n,4)}function Zv(){return"+0000"}function Kv(){return"%"}function Qv(t){return+t}function Jv(t){return Math.floor(+t/1e3)}function t_(n){return qy=Fy(n),t.timeFormat=qy.format,t.timeParse=qy.parse,t.utcFormat=qy.utcFormat,t.utcParse=qy.utcParse,qy}t.timeFormat=void 0,t.timeParse=void 0,t.utcFormat=void 0,t.utcParse=void 0,t_({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var n_="%Y-%m-%dT%H:%M:%S.%LZ";var e_=Date.prototype.toISOString?function(t){return t.toISOString()}:t.utcFormat(n_),r_=e_;var i_=+new Date("2000-01-01T00:00:00.000Z")?function(t){var n=new Date(t);return isNaN(n)?null:n}:t.utcParse(n_),o_=i_;function a_(t){return new Date(t)}function u_(t){return t instanceof Date?+t:+new Date(+t)}function c_(t,n,e,r,i,o,a,u,c,f){var s=Up(),l=s.invert,h=s.domain,d=f(".%L"),p=f(":%S"),g=f("%I:%M"),y=f("%I %p"),v=f("%a %d"),_=f("%b %d"),b=f("%B"),m=f("%Y");function x(t){return(c(t)<t?d:u(t)<t?p:a(t)<t?g:o(t)<t?y:r(t)<t?i(t)<t?v:_:e(t)<t?b:m)(t)}return s.invert=function(t){return new Date(l(t))},s.domain=function(t){return arguments.length?h(Array.from(t,u_)):h().map(a_)},s.ticks=function(n){var e=h();return t(e[0],e[e.length-1],null==n?10:n)},s.tickFormat=function(t,n){return null==n?x:f(n)},s.nice=function(t){var e=h();return t&&"function"==typeof t.range||(t=n(e[0],e[e.length-1],null==t?10:t)),t?h(Yp(e,t)):s},s.copy=function(){return qp(s,c_(t,n,e,r,i,o,a,u,c,f))},s}function f_(){var t,n,e,r,i,o=0,a=1,u=zp,c=!1;function f(n){return null==n||isNaN(n=+n)?i:u(0===e?.5:(n=(r(n)-t)*e,c?Math.max(0,Math.min(1,n)):n))}function s(t){return function(n){var e,r;return arguments.length?([e,r]=n,u=t(e,r),f):[u(0),u(1)]}}return f.domain=function(i){return arguments.length?([o,a]=i,t=r(o=+o),n=r(a=+a),e=t===n?0:1/(n-t),f):[o,a]},f.clamp=function(t){return arguments.length?(c=!!t,f):c},f.interpolator=function(t){return arguments.length?(u=t,f):u},f.range=s(Cr),f.rangeRound=s(Pr),f.unknown=function(t){return arguments.length?(i=t,f):i},function(i){return r=i,t=i(o),n=i(a),e=t===n?0:1/(n-t),f}}function s_(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function l_(){var t=ng(f_());return t.copy=function(){return s_(t,l_()).exponent(t.exponent())},Tp.apply(t,arguments)}function h_(){var t,n,e,r,i,o,a,u=0,c=.5,f=1,s=1,l=zp,h=!1;function d(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-n)*(s*t<s*n?r:i),l(h?Math.max(0,Math.min(1,t)):t))}function p(t){return function(n){var e,r,i;return arguments.length?([e,r,i]=n,l=Zr(t,[e,r,i]),d):[l(0),l(.5),l(1)]}}return d.domain=function(a){return arguments.length?([u,c,f]=a,t=o(u=+u),n=o(c=+c),e=o(f=+f),r=t===n?0:.5/(n-t),i=n===e?0:.5/(e-n),s=n<t?-1:1,d):[u,c,f]},d.clamp=function(t){return arguments.length?(h=!!t,d):h},d.interpolator=function(t){return arguments.length?(l=t,d):l},d.range=p(Cr),d.rangeRound=p(Pr),d.unknown=function(t){return arguments.length?(a=t,d):a},function(a){return o=a,t=a(u),n=a(c),e=a(f),r=t===n?0:.5/(n-t),i=n===e?0:.5/(e-n),s=n<t?-1:1,d}}function d_(){var t=ng(h_());return t.copy=function(){return s_(t,d_()).exponent(t.exponent())},Tp.apply(t,arguments)}function p_(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(6*r,6*++r);return e}var g_=p_("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),y_=p_("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),v_=p_("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),__=p_("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),b_=p_("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),m_=p_("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),x_=p_("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),w_=p_("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),M_=p_("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),A_=p_("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),T_=t=>br(t[t.length-1]),S_=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(p_),E_=T_(S_),k_=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(p_),N_=T_(k_),C_=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(p_),P_=T_(C_),z_=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(p_),D_=T_(z_),R_=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(p_),F_=T_(R_),q_=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(p_),O_=T_(q_),U_=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(p_),I_=T_(U_),B_=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(p_),Y_=T_(B_),L_=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(p_),j_=T_(L_),H_=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(p_),X_=T_(H_),G_=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(p_),V_=T_(G_),$_=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(p_),W_=T_($_),Z_=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(p_),K_=T_(Z_),Q_=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(p_),J_=T_(Q_),tb=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(p_),nb=T_(tb),eb=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(p_),rb=T_(eb),ib=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(p_),ob=T_(ib),ab=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(p_),ub=T_(ab),cb=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(p_),fb=T_(cb),sb=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(p_),lb=T_(sb),hb=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(p_),db=T_(hb),pb=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(p_),gb=T_(pb),yb=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(p_),vb=T_(yb),_b=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(p_),bb=T_(_b),mb=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(p_),xb=T_(mb),wb=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(p_),Mb=T_(wb),Ab=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(p_),Tb=T_(Ab);var Sb=Wr(ur(300,.5,0),ur(-240,.5,1)),Eb=Wr(ur(-100,.75,.35),ur(80,1.5,.8)),kb=Wr(ur(260,.75,.35),ur(80,1.5,.8)),Nb=ur();var Cb=Ae(),Pb=Math.PI/3,zb=2*Math.PI/3;function Db(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}}var Rb=Db(p_("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Fb=Db(p_("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),qb=Db(p_("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Ob=Db(p_("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Ub(t){return function(){return t}}const Ib=Math.abs,Bb=Math.atan2,Yb=Math.cos,Lb=Math.max,jb=Math.min,Hb=Math.sin,Xb=Math.sqrt,Gb=1e-12,Vb=Math.PI,$b=Vb/2,Wb=2*Vb;function Zb(t){return t>1?0:t<-1?Vb:Math.acos(t)}function Kb(t){return t>=1?$b:t<=-1?-$b:Math.asin(t)}function Qb(t){return t.innerRadius}function Jb(t){return t.outerRadius}function tm(t){return t.startAngle}function nm(t){return t.endAngle}function em(t){return t&&t.padAngle}function rm(t,n,e,r,i,o,a,u){var c=e-t,f=r-n,s=a-i,l=u-o,h=l*c-s*f;if(!(h*h<Gb))return[t+(h=(s*(n-o)-l*(t-i))/h)*c,n+h*f]}function im(t,n,e,r,i,o,a){var u=t-e,c=n-r,f=(a?o:-o)/Xb(u*u+c*c),s=f*c,l=-f*u,h=t+s,d=n+l,p=e+s,g=r+l,y=(h+p)/2,v=(d+g)/2,_=p-h,b=g-d,m=_*_+b*b,x=i-o,w=h*g-p*d,M=(b<0?-1:1)*Xb(Lb(0,x*x*m-w*w)),A=(w*b-_*M)/m,T=(-w*_-b*M)/m,S=(w*b+_*M)/m,E=(-w*_+b*M)/m,k=A-y,N=T-v,C=S-y,P=E-v;return k*k+N*N>C*C+P*P&&(A=S,T=E),{cx:A,cy:T,x01:-s,y01:-l,x11:A*(i/x-1),y11:T*(i/x-1)}}var om=Array.prototype.slice;function am(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function um(t){this._context=t}function cm(t){return new um(t)}function fm(t){return t[0]}function sm(t){return t[1]}function lm(t,n){var e=Ub(!0),r=null,i=cm,o=null;function a(a){var u,c,f,s=(a=am(a)).length,l=!1;for(null==r&&(o=i(f=ya())),u=0;u<=s;++u)!(u<s&&e(c=a[u],u,a))===l&&((l=!l)?o.lineStart():o.lineEnd()),l&&o.point(+t(c,u,a),+n(c,u,a));if(f)return o=null,f+""||null}return t="function"==typeof t?t:void 0===t?fm:Ub(t),n="function"==typeof n?n:void 0===n?sm:Ub(n),a.x=function(n){return arguments.length?(t="function"==typeof n?n:Ub(+n),a):t},a.y=function(t){return arguments.length?(n="function"==typeof t?t:Ub(+t),a):n},a.defined=function(t){return arguments.length?(e="function"==typeof t?t:Ub(!!t),a):e},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a}function hm(t,n,e){var r=null,i=Ub(!0),o=null,a=cm,u=null;function c(c){var f,s,l,h,d,p=(c=am(c)).length,g=!1,y=new Array(p),v=new Array(p);for(null==o&&(u=a(d=ya())),f=0;f<=p;++f){if(!(f<p&&i(h=c[f],f,c))===g)if(g=!g)s=f,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),l=f-1;l>=s;--l)u.point(y[l],v[l]);u.lineEnd(),u.areaEnd()}g&&(y[f]=+t(h,f,c),v[f]=+n(h,f,c),u.point(r?+r(h,f,c):y[f],e?+e(h,f,c):v[f]))}if(d)return u=null,d+""||null}function f(){return lm().defined(i).curve(a).context(o)}return t="function"==typeof t?t:void 0===t?fm:Ub(+t),n="function"==typeof n?n:Ub(void 0===n?0:+n),e="function"==typeof e?e:void 0===e?sm:Ub(+e),c.x=function(n){return arguments.length?(t="function"==typeof n?n:Ub(+n),r=null,c):t},c.x0=function(n){return arguments.length?(t="function"==typeof n?n:Ub(+n),c):t},c.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Ub(+t),c):r},c.y=function(t){return arguments.length?(n="function"==typeof t?t:Ub(+t),e=null,c):n},c.y0=function(t){return arguments.length?(n="function"==typeof t?t:Ub(+t),c):n},c.y1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:Ub(+t),c):e},c.lineX0=c.lineY0=function(){return f().x(t).y(n)},c.lineY1=function(){return f().x(t).y(e)},c.lineX1=function(){return f().x(r).y(n)},c.defined=function(t){return arguments.length?(i="function"==typeof t?t:Ub(!!t),c):i},c.curve=function(t){return arguments.length?(a=t,null!=o&&(u=a(o)),c):a},c.context=function(t){return arguments.length?(null==t?o=u=null:u=a(o=t),c):o},c}function dm(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function pm(t){return t}um.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}};var gm=vm(cm);function ym(t){this._curve=t}function vm(t){function n(n){return new ym(t(n))}return n._curve=t,n}function _m(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?n(vm(t)):n()._curve},t}function bm(){return _m(lm().curve(gm))}function mm(){var t=hm().curve(gm),n=t.curve,e=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return _m(e())},delete t.lineX0,t.lineEndAngle=function(){return _m(r())},delete t.lineX1,t.lineInnerRadius=function(){return _m(i())},delete t.lineY0,t.lineOuterRadius=function(){return _m(o())},delete t.lineY1,t.curve=function(t){return arguments.length?n(vm(t)):n()._curve},t}function xm(t,n){return[(n=+n)*Math.cos(t-=Math.PI/2),n*Math.sin(t)]}ym.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};class wm{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n)}this._x0=t,this._y0=n}}class Mm{constructor(t){this._context=t}lineStart(){this._point=0}lineEnd(){}point(t,n){if(t=+t,n=+n,0==this._point++)this._x0=t,this._y0=n;else{const e=xm(this._x0,this._y0),r=xm(this._x0,this._y0=(this._y0+n)/2),i=xm(t,this._y0),o=xm(t,n);this._context.moveTo(...e),this._context.bezierCurveTo(...r,...i,...o)}}}function Am(t){return new wm(t,!0)}function Tm(t){return new wm(t,!1)}function Sm(t){return new Mm(t)}function Em(t){return t.source}function km(t){return t.target}function Nm(t){let n=Em,e=km,r=fm,i=sm,o=null,a=null;function u(){let u;const c=om.call(arguments),f=n.apply(this,c),s=e.apply(this,c);if(null==o&&(a=t(u=ya())),a.lineStart(),c[0]=f,a.point(+r.apply(this,c),+i.apply(this,c)),c[0]=s,a.point(+r.apply(this,c),+i.apply(this,c)),a.lineEnd(),u)return a=null,u+""||null}return u.source=function(t){return arguments.length?(n=t,u):n},u.target=function(t){return arguments.length?(e=t,u):e},u.x=function(t){return arguments.length?(r="function"==typeof t?t:Ub(+t),u):r},u.y=function(t){return arguments.length?(i="function"==typeof t?t:Ub(+t),u):i},u.context=function(n){return arguments.length?(null==n?o=a=null:a=t(o=n),u):o},u}const Cm=Xb(3);var Pm={draw(t,n){const e=.59436*Xb(n+jb(n/28,.75)),r=e/2,i=r*Cm;t.moveTo(0,e),t.lineTo(0,-e),t.moveTo(-i,-r),t.lineTo(i,r),t.moveTo(-i,r),t.lineTo(i,-r)}},zm={draw(t,n){const e=Xb(n/Vb);t.moveTo(e,0),t.arc(0,0,e,0,Wb)}},Dm={draw(t,n){const e=Xb(n/5)/2;t.moveTo(-3*e,-e),t.lineTo(-e,-e),t.lineTo(-e,-3*e),t.lineTo(e,-3*e),t.lineTo(e,-e),t.lineTo(3*e,-e),t.lineTo(3*e,e),t.lineTo(e,e),t.lineTo(e,3*e),t.lineTo(-e,3*e),t.lineTo(-e,e),t.lineTo(-3*e,e),t.closePath()}};const Rm=Xb(1/3),Fm=2*Rm;var qm={draw(t,n){const e=Xb(n/Fm),r=e*Rm;t.moveTo(0,-e),t.lineTo(r,0),t.lineTo(0,e),t.lineTo(-r,0),t.closePath()}},Om={draw(t,n){const e=.62625*Xb(n);t.moveTo(0,-e),t.lineTo(e,0),t.lineTo(0,e),t.lineTo(-e,0),t.closePath()}},Um={draw(t,n){const e=.87559*Xb(n-jb(n/7,2));t.moveTo(-e,0),t.lineTo(e,0),t.moveTo(0,e),t.lineTo(0,-e)}},Im={draw(t,n){const e=Xb(n),r=-e/2;t.rect(r,r,e,e)}},Bm={draw(t,n){const e=.4431*Xb(n);t.moveTo(e,e),t.lineTo(e,-e),t.lineTo(-e,-e),t.lineTo(-e,e),t.closePath()}};const Ym=Hb(Vb/10)/Hb(7*Vb/10),Lm=Hb(Wb/10)*Ym,jm=-Yb(Wb/10)*Ym;var Hm={draw(t,n){const e=Xb(.8908130915292852*n),r=Lm*e,i=jm*e;t.moveTo(0,-e),t.lineTo(r,i);for(let n=1;n<5;++n){const o=Wb*n/5,a=Yb(o),u=Hb(o);t.lineTo(u*e,-a*e),t.lineTo(a*r-u*i,u*r+a*i)}t.closePath()}};const Xm=Xb(3);var Gm={draw(t,n){const e=-Xb(n/(3*Xm));t.moveTo(0,2*e),t.lineTo(-Xm*e,-e),t.lineTo(Xm*e,-e),t.closePath()}};const Vm=Xb(3);var $m={draw(t,n){const e=.6824*Xb(n),r=e/2,i=e*Vm/2;t.moveTo(0,-e),t.lineTo(i,r),t.lineTo(-i,r),t.closePath()}};const Wm=-.5,Zm=Xb(3)/2,Km=1/Xb(12),Qm=3*(Km/2+1);var Jm={draw(t,n){const e=Xb(n/Qm),r=e/2,i=e*Km,o=r,a=e*Km+e,u=-o,c=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(u,c),t.lineTo(Wm*r-Zm*i,Zm*r+Wm*i),t.lineTo(Wm*o-Zm*a,Zm*o+Wm*a),t.lineTo(Wm*u-Zm*c,Zm*u+Wm*c),t.lineTo(Wm*r+Zm*i,Wm*i-Zm*r),t.lineTo(Wm*o+Zm*a,Wm*a-Zm*o),t.lineTo(Wm*u+Zm*c,Wm*c-Zm*u),t.closePath()}},tx={draw(t,n){const e=.6189*Xb(n-jb(n/6,1.7));t.moveTo(-e,-e),t.lineTo(e,e),t.moveTo(-e,e),t.lineTo(e,-e)}};const nx=[zm,Dm,qm,Im,Hm,Gm,Jm],ex=[zm,Um,tx,$m,Pm,Bm,Om];function rx(){}function ix(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function ox(t){this._context=t}function ax(t){this._context=t}function ux(t){this._context=t}function cx(t,n){this._basis=new ox(t),this._beta=n}ox.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ix(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ix(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},ax.prototype={areaStart:rx,areaEnd:rx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:ix(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},ux.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 3:this._point=4;default:ix(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},cx.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0)for(var r,i=t[0],o=n[0],a=t[e]-i,u=n[e]-o,c=-1;++c<=e;)r=c/e,this._basis.point(this._beta*t[c]+(1-this._beta)*(i+r*a),this._beta*n[c]+(1-this._beta)*(o+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};var fx=function t(n){function e(t){return 1===n?new ox(t):new cx(t,n)}return e.beta=function(n){return t(+n)},e}(.85);function sx(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function lx(t,n){this._context=t,this._k=(1-n)/6}lx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:sx(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:sx(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var hx=function t(n){function e(t){return new lx(t,n)}return e.tension=function(n){return t(+n)},e}(0);function dx(t,n){this._context=t,this._k=(1-n)/6}dx.prototype={areaStart:rx,areaEnd:rx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:sx(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var px=function t(n){function e(t){return new dx(t,n)}return e.tension=function(n){return t(+n)},e}(0);function gx(t,n){this._context=t,this._k=(1-n)/6}gx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:sx(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var yx=function t(n){function e(t){return new gx(t,n)}return e.tension=function(n){return t(+n)},e}(0);function vx(t,n,e){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>Gb){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>Gb){var f=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,s=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*f+t._x1*t._l23_2a-n*t._l12_2a)/s,a=(a*f+t._y1*t._l23_2a-e*t._l12_2a)/s}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function _x(t,n){this._context=t,this._alpha=n}_x.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:vx(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var bx=function t(n){function e(t){return n?new _x(t,n):new lx(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function mx(t,n){this._context=t,this._alpha=n}mx.prototype={areaStart:rx,areaEnd:rx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:vx(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var xx=function t(n){function e(t){return n?new mx(t,n):new dx(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function wx(t,n){this._context=t,this._alpha=n}wx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:vx(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Mx=function t(n){function e(t){return n?new wx(t,n):new gx(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function Ax(t){this._context=t}function Tx(t){return t<0?-1:1}function Sx(t,n,e){var r=t._x1-t._x0,i=n-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(e-t._y1)/(i||r<0&&-0),u=(o*i+a*r)/(r+i);return(Tx(o)+Tx(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(u))||0}function Ex(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function kx(t,n,e){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,u=(o-r)/3;t._context.bezierCurveTo(r+u,i+u*n,o-u,a-u*e,o,a)}function Nx(t){this._context=t}function Cx(t){this._context=new Px(t)}function Px(t){this._context=t}function zx(t){this._context=t}function Dx(t){var n,e,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],n=1;n<r-1;++n)i[n]=1,o[n]=4,a[n]=4*t[n]+2*t[n+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],n=1;n<r;++n)e=i[n]/o[n-1],o[n]-=e,a[n]-=e*a[n-1];for(i[r-1]=a[r-1]/o[r-1],n=r-2;n>=0;--n)i[n]=(a[n]-i[n+1])/o[n];for(o[r-1]=(t[r]+i[r-1])/2,n=0;n<r-1;++n)o[n]=2*t[n+1]-i[n+1];return[i,o]}function Rx(t,n){this._context=t,this._t=n}function Fx(t,n){if((i=t.length)>1)for(var e,r,i,o=1,a=t[n[0]],u=a.length;o<i;++o)for(r=a,a=t[n[o]],e=0;e<u;++e)a[e][1]+=a[e][0]=isNaN(r[e][1])?r[e][0]:r[e][1]}function qx(t){for(var n=t.length,e=new Array(n);--n>=0;)e[n]=n;return e}function Ox(t,n){return t[n]}function Ux(t){const n=[];return n.key=t,n}function Ix(t){var n=t.map(Bx);return qx(t).sort((function(t,e){return n[t]-n[e]}))}function Bx(t){for(var n,e=-1,r=0,i=t.length,o=-1/0;++e<i;)(n=+t[e][1])>o&&(o=n,r=e);return r}function Yx(t){var n=t.map(Lx);return qx(t).sort((function(t,e){return n[t]-n[e]}))}function Lx(t){for(var n,e=0,r=-1,i=t.length;++r<i;)(n=+t[r][1])&&(e+=n);return e}Ax.prototype={areaStart:rx,areaEnd:rx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}},Nx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:kx(this,this._t0,Ex(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(n=+n,(t=+t)!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,kx(this,Ex(this,e=Sx(this,t,n)),e);break;default:kx(this,this._t0,e=Sx(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(Cx.prototype=Object.create(Nx.prototype)).point=function(t,n){Nx.prototype.point.call(this,n,t)},Px.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,o){this._context.bezierCurveTo(n,t,r,e,o,i)}},zx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,e=t.length;if(e)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),2===e)this._context.lineTo(t[1],n[1]);else for(var r=Dx(t),i=Dx(n),o=0,a=1;a<e;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],n[a]);(this._line||0!==this._line&&1===e)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}},Rx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,n)}}this._x=t,this._y=n}};var jx=t=>()=>t;function Hx(t,{sourceEvent:n,target:e,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Xx(t,n,e){this.k=t,this.x=n,this.y=e}Xx.prototype={constructor:Xx,scale:function(t){return 1===t?this:new Xx(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new Xx(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Gx=new Xx(1,0,0);function Vx(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Gx;return t.__zoom}function $x(t){t.stopImmediatePropagation()}function Wx(t){t.preventDefault(),t.stopImmediatePropagation()}function Zx(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function Kx(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function Qx(){return this.__zoom||Gx}function Jx(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function tw(){return navigator.maxTouchPoints||"ontouchstart"in this}function nw(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],a=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}Vx.prototype=Xx.prototype,t.Adder=y,t.Delaunay=gu,t.FormatSpecifier=xc,t.InternMap=InternMap,t.InternSet=InternSet,t.Node=pd,t.Voronoi=fu,t.ZoomTransform=Xx,t.active=function(t,n){var e,r,i=t.__transition;if(i)for(r in n=null==n?null:n+"",i)if((e=i[r]).state>1&&e.name===n)return new Zi([[t]],To,n,+r);return null},t.arc=function(){var t=Qb,n=Jb,e=Ub(0),r=null,i=tm,o=nm,a=em,u=null;function c(){var c,f,s=+t.apply(this,arguments),l=+n.apply(this,arguments),h=i.apply(this,arguments)-$b,d=o.apply(this,arguments)-$b,p=Ib(d-h),g=d>h;if(u||(u=c=ya()),l<s&&(f=l,l=s,s=f),l>Gb)if(p>Wb-Gb)u.moveTo(l*Yb(h),l*Hb(h)),u.arc(0,0,l,h,d,!g),s>Gb&&(u.moveTo(s*Yb(d),s*Hb(d)),u.arc(0,0,s,d,h,g));else{var y,v,_=h,b=d,m=h,x=d,w=p,M=p,A=a.apply(this,arguments)/2,T=A>Gb&&(r?+r.apply(this,arguments):Xb(s*s+l*l)),S=jb(Ib(l-s)/2,+e.apply(this,arguments)),E=S,k=S;if(T>Gb){var N=Kb(T/s*Hb(A)),C=Kb(T/l*Hb(A));(w-=2*N)>Gb?(m+=N*=g?1:-1,x-=N):(w=0,m=x=(h+d)/2),(M-=2*C)>Gb?(_+=C*=g?1:-1,b-=C):(M=0,_=b=(h+d)/2)}var P=l*Yb(_),z=l*Hb(_),D=s*Yb(x),R=s*Hb(x);if(S>Gb){var F,q=l*Yb(b),O=l*Hb(b),U=s*Yb(m),I=s*Hb(m);if(p<Vb&&(F=rm(P,z,U,I,q,O,D,R))){var B=P-F[0],Y=z-F[1],L=q-F[0],j=O-F[1],H=1/Hb(Zb((B*L+Y*j)/(Xb(B*B+Y*Y)*Xb(L*L+j*j)))/2),X=Xb(F[0]*F[0]+F[1]*F[1]);E=jb(S,(s-X)/(H-1)),k=jb(S,(l-X)/(H+1))}}M>Gb?k>Gb?(y=im(U,I,P,z,l,k,g),v=im(q,O,D,R,l,k,g),u.moveTo(y.cx+y.x01,y.cy+y.y01),k<S?u.arc(y.cx,y.cy,k,Bb(y.y01,y.x01),Bb(v.y01,v.x01),!g):(u.arc(y.cx,y.cy,k,Bb(y.y01,y.x01),Bb(y.y11,y.x11),!g),u.arc(0,0,l,Bb(y.cy+y.y11,y.cx+y.x11),Bb(v.cy+v.y11,v.cx+v.x11),!g),u.arc(v.cx,v.cy,k,Bb(v.y11,v.x11),Bb(v.y01,v.x01),!g))):(u.moveTo(P,z),u.arc(0,0,l,_,b,!g)):u.moveTo(P,z),s>Gb&&w>Gb?E>Gb?(y=im(D,R,q,O,s,-E,g),v=im(P,z,U,I,s,-E,g),u.lineTo(y.cx+y.x01,y.cy+y.y01),E<S?u.arc(y.cx,y.cy,E,Bb(y.y01,y.x01),Bb(v.y01,v.x01),!g):(u.arc(y.cx,y.cy,E,Bb(y.y01,y.x01),Bb(y.y11,y.x11),!g),u.arc(0,0,s,Bb(y.cy+y.y11,y.cx+y.x11),Bb(v.cy+v.y11,v.cx+v.x11),g),u.arc(v.cx,v.cy,E,Bb(v.y11,v.x11),Bb(v.y01,v.x01),!g))):u.arc(0,0,s,x,m,g):u.lineTo(D,R)}else u.moveTo(0,0);if(u.closePath(),c)return u=null,c+""||null}return c.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Vb/2;return[Yb(r)*e,Hb(r)*e]},c.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:Ub(+n),c):t},c.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Ub(+t),c):n},c.cornerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Ub(+t),c):e},c.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Ub(+t),c):r},c.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:Ub(+t),c):i},c.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:Ub(+t),c):o},c.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:Ub(+t),c):a},c.context=function(t){return arguments.length?(u=null==t?null:t,c):u},c},t.area=hm,t.areaRadial=mm,t.ascending=n,t.autoType=function(t){for(var n in t){var e,r,i=t[n].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(e=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Iu&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=e;else i=null;t[n]=i}return t},t.axisBottom=function(t){return yt(3,t)},t.axisLeft=function(t){return yt(4,t)},t.axisRight=function(t){return yt(2,t)},t.axisTop=function(t){return yt(1,t)},t.bin=j,t.bisect=c,t.bisectCenter=u,t.bisectLeft=a,t.bisectRight=o,t.bisector=e,t.blob=function(t,n){return fetch(t,n).then(Bu)},t.brush=function(){return Jo(Yo)},t.brushSelection=function(t){var n=t.__brush;return n?n.dim.output(n.selection):null},t.brushX=function(){return Jo(Io)},t.brushY=function(){return Jo(Bo)},t.buffer=function(t,n){return fetch(t,n).then(Yu)},t.chord=function(){return sa(!1,!1)},t.chordDirected=function(){return sa(!0,!1)},t.chordTranspose=function(){return sa(!1,!0)},t.cluster=function(){var t=od,n=1,e=1,r=!1;function i(i){var o,a=0;i.eachAfter((function(n){var e=n.children;e?(n.x=function(t){return t.reduce(ad,0)/t.length}(e),n.y=function(t){return 1+t.reduce(ud,0)}(e)):(n.x=o?a+=t(n,o):0,n.y=0,o=n)}));var u=function(t){for(var n;n=t.children;)t=n[0];return t}(i),c=function(t){for(var n;n=t.children;)t=n[n.length-1];return t}(i),f=u.x-t(u,c)/2,s=c.x+t(c,u)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*n,t.y=(i.y-t.y)*e}:function(t){t.x=(t.x-f)/(s-f)*n,t.y=(1-(i.y?t.y/i.y:1))*e})}return i.separation=function(n){return arguments.length?(t=n,i):t},i.size=function(t){return arguments.length?(r=!1,n=+t[0],e=+t[1],i):r?null:[n,e]},i.nodeSize=function(t){return arguments.length?(r=!0,n=+t[0],e=+t[1],i):r?[n,e]:null},i},t.color=me,t.contourDensity=function(){var t=Ua,n=Ia,e=Ba,r=960,i=500,o=20,a=2,u=3*o,c=r+2*u>>a,f=i+2*u>>a,s=Na(20);function l(r){var i=new Float32Array(c*f),l=new Float32Array(c*f),d=Math.pow(2,-a);r.forEach((function(r,o,a){var s=(t(r,o,a)+u)*d,l=(n(r,o,a)+u)*d,h=+e(r,o,a);if(s>=0&&s<c&&l>=0&&l<f){var p=Math.floor(s),g=Math.floor(l),y=s-p-.5,v=l-g-.5;i[p+g*c]+=(1-y)*(1-v)*h,i[p+1+g*c]+=y*(1-v)*h,i[p+1+(g+1)*c]+=y*v*h,i[p+(g+1)*c]+=(1-y)*v*h}})),qa({width:c,height:f,data:i},{width:c,height:f,data:l},o>>a),Oa({width:c,height:f,data:l},{width:c,height:f,data:i},o>>a),qa({width:c,height:f,data:i},{width:c,height:f,data:l},o>>a),Oa({width:c,height:f,data:l},{width:c,height:f,data:i},o>>a),qa({width:c,height:f,data:i},{width:c,height:f,data:l},o>>a),Oa({width:c,height:f,data:l},{width:c,height:f,data:i},o>>a);var p=s(i);if(!Array.isArray(p)){var g=H(i);p=B(0,g,p),(p=tt(0,Math.floor(g/p)*p,p)).shift()}return Fa().thresholds(p).size([c,f])(i).map(h)}function h(t){return t.value*=Math.pow(2,-2*a),t.coordinates.forEach(d),t}function d(t){t.forEach(p)}function p(t){t.forEach(g)}function g(t){t[0]=t[0]*Math.pow(2,a)-u,t[1]=t[1]*Math.pow(2,a)-u}function y(){return c=r+2*(u=3*o)>>a,f=i+2*u>>a,l}return l.x=function(n){return arguments.length?(t="function"==typeof n?n:Na(+n),l):t},l.y=function(t){return arguments.length?(n="function"==typeof t?t:Na(+t),l):n},l.weight=function(t){return arguments.length?(e="function"==typeof t?t:Na(+t),l):e},l.size=function(t){if(!arguments.length)return[r,i];var n=+t[0],e=+t[1];if(!(n>=0&&e>=0))throw new Error("invalid size");return r=n,i=e,y()},l.cellSize=function(t){if(!arguments.length)return 1<<a;if(!((t=+t)>=1))throw new Error("invalid cell size");return a=Math.floor(Math.log(t)/Math.LN2),y()},l.thresholds=function(t){return arguments.length?(s="function"==typeof t?t:Array.isArray(t)?Na(Ea.call(t)):Na(t),l):s},l.bandwidth=function(t){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return o=Math.round((Math.sqrt(4*t*t+1)-1)/2),y()},l},t.contours=Fa,t.count=f,t.create=function(t){return Un(kt(t).call(document.documentElement))},t.creator=kt,t.cross=function(...t){const n="function"==typeof t[t.length-1]&&function(t){return n=>t(...n)}(t.pop()),e=(t=t.map(h)).map(s),r=t.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||e.some(l))return o;for(;;){o.push(i.map(((n,e)=>t[e][n])));let a=r;for(;++i[a]===e[a];){if(0===a)return n?o.map(n):o;i[a--]=0}}},t.csv=Xu,t.csvFormat=Su,t.csvFormatBody=Eu,t.csvFormatRow=Nu,t.csvFormatRows=ku,t.csvFormatValue=Cu,t.csvParse=Au,t.csvParseRows=Tu,t.cubehelix=ur,t.cumsum=function(t,n){var e=0,r=0;return Float64Array.from(t,void 0===n?t=>e+=+t||0:i=>e+=+n(i,r++,t)||0)},t.curveBasis=function(t){return new ox(t)},t.curveBasisClosed=function(t){return new ax(t)},t.curveBasisOpen=function(t){return new ux(t)},t.curveBumpX=Am,t.curveBumpY=Tm,t.curveBundle=fx,t.curveCardinal=hx,t.curveCardinalClosed=px,t.curveCardinalOpen=yx,t.curveCatmullRom=bx,t.curveCatmullRomClosed=xx,t.curveCatmullRomOpen=Mx,t.curveLinear=cm,t.curveLinearClosed=function(t){return new Ax(t)},t.curveMonotoneX=function(t){return new Nx(t)},t.curveMonotoneY=function(t){return new Cx(t)},t.curveNatural=function(t){return new zx(t)},t.curveStep=function(t){return new Rx(t,.5)},t.curveStepAfter=function(t){return new Rx(t,1)},t.curveStepBefore=function(t){return new Rx(t,0)},t.descending=function(t,n){return null==t||null==n?NaN:n<t?-1:n>t?1:n>=t?0:NaN},t.deviation=p,t.difference=function(t,...n){t=new InternSet(t);for(const e of n)for(const n of e)t.delete(n);return t},t.disjoint=function(t,n){const e=n[Symbol.iterator](),r=new InternSet;for(const n of t){if(r.has(n))return!1;let t,i;for(;({value:t,done:i}=e.next())&&!i;){if(Object.is(n,t))return!1;r.add(t)}}return!0},t.dispatch=_t,t.drag=function(){var t,n,e,r,i=Qn,o=Jn,a=te,u=ne,c={},f=_t("start","drag","end"),s=0,l=0;function h(t){t.on("mousedown.drag",d).filter(u).on("touchstart.drag",y).on("touchmove.drag",v,Hn).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(a,u){if(!r&&i.call(this,a,u)){var c=b(this,o.call(this,a,u),a,u,"mouse");c&&(Un(a.view).on("mousemove.drag",p,Xn).on("mouseup.drag",g,Xn),$n(a.view),Gn(a),e=!1,t=a.clientX,n=a.clientY,c("start",a))}}function p(r){if(Vn(r),!e){var i=r.clientX-t,o=r.clientY-n;e=i*i+o*o>l}c.mouse("drag",r)}function g(t){Un(t.view).on("mousemove.drag mouseup.drag",null),Wn(t.view,e),Vn(t),c.mouse("end",t)}function y(t,n){if(i.call(this,t,n)){var e,r,a=t.changedTouches,u=o.call(this,t,n),c=a.length;for(e=0;e<c;++e)(r=b(this,u,t,n,a[e].identifier,a[e]))&&(Gn(t),r("start",t,a[e]))}}function v(t){var n,e,r=t.changedTouches,i=r.length;for(n=0;n<i;++n)(e=c[r[n].identifier])&&(Vn(t),e("drag",t,r[n]))}function _(t){var n,e,i=t.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),n=0;n<o;++n)(e=c[i[n].identifier])&&(Gn(t),e("end",t,i[n]))}function b(t,n,e,r,i,o){var u,l,d,p=f.copy(),g=jn(o||e,n);if(null!=(d=a.call(t,new Kn("beforestart",{sourceEvent:e,target:h,identifier:i,active:s,x:g[0],y:g[1],dx:0,dy:0,dispatch:p}),r)))return u=d.x-g[0]||0,l=d.y-g[1]||0,function e(o,a,f){var y,v=g;switch(o){case"start":c[i]=e,y=s++;break;case"end":delete c[i],--s;case"drag":g=jn(f||a,n),y=s}p.call(o,t,new Kn(o,{sourceEvent:a,subject:d,target:h,identifier:i,active:y,x:g[0]+u,y:g[1]+l,dx:g[0]-v[0],dy:g[1]-v[1],dispatch:p}),r)}}return h.filter=function(t){return arguments.length?(i="function"==typeof t?t:Zn(!!t),h):i},h.container=function(t){return arguments.length?(o="function"==typeof t?t:Zn(t),h):o},h.subject=function(t){return arguments.length?(a="function"==typeof t?t:Zn(t),h):a},h.touchable=function(t){return arguments.length?(u="function"==typeof t?t:Zn(!!t),h):u},h.on=function(){var t=f.on.apply(f,arguments);return t===f?h:t},h.clickDistance=function(t){return arguments.length?(l=(t=+t)*t,h):Math.sqrt(l)},h},t.dragDisable=$n,t.dragEnable=Wn,t.dsv=function(t,n,e,r){3===arguments.length&&"function"==typeof e&&(r=e,e=void 0);var i=wu(t);return ju(n,e).then((function(t){return i.parse(t,r)}))},t.dsvFormat=wu,t.easeBack=_o,t.easeBackIn=yo,t.easeBackInOut=_o,t.easeBackOut=vo,t.easeBounce=po,t.easeBounceIn=function(t){return 1-po(1-t)},t.easeBounceInOut=function(t){return((t*=2)<=1?1-po(1-t):po(t-1)+1)/2},t.easeBounceOut=po,t.easeCircle=so,t.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},t.easeCircleInOut=so,t.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},t.easeCubic=no,t.easeCubicIn=function(t){return t*t*t},t.easeCubicInOut=no,t.easeCubicOut=function(t){return--t*t*t+1},t.easeElastic=xo,t.easeElasticIn=mo,t.easeElasticInOut=wo,t.easeElasticOut=xo,t.easeExp=fo,t.easeExpIn=function(t){return co(1-+t)},t.easeExpInOut=fo,t.easeExpOut=function(t){return 1-co(t)},t.easeLinear=t=>+t,t.easePoly=io,t.easePolyIn=eo,t.easePolyInOut=io,t.easePolyOut=ro,t.easeQuad=to,t.easeQuadIn=function(t){return t*t},t.easeQuadInOut=to,t.easeQuadOut=function(t){return t*(2-t)},t.easeSin=uo,t.easeSinIn=function(t){return 1==+t?1:1-Math.cos(t*ao)},t.easeSinInOut=uo,t.easeSinOut=function(t){return Math.sin(t*ao)},t.every=function(t,n){if("function"!=typeof n)throw new TypeError("test is not a function");let e=-1;for(const r of t)if(!n(r,++e,t))return!1;return!0},t.extent=g,t.fcumsum=function(t,n){const e=new y;let r=-1;return Float64Array.from(t,void 0===n?t=>e.add(+t||0):i=>e.add(+n(i,++r,t)||0))},t.filter=function(t,n){if("function"!=typeof n)throw new TypeError("test is not a function");const e=[];let r=-1;for(const i of t)n(i,++r,t)&&e.push(i);return e},t.flatGroup=function(t,...n){return A(M(t,...n),n)},t.flatRollup=function(t,n,...e){return A(S(t,n,...e),e)},t.forceCenter=function(t,n){var e,r=1;function i(){var i,o,a=e.length,u=0,c=0;for(i=0;i<a;++i)u+=(o=e[i]).x,c+=o.y;for(u=(u/a-t)*r,c=(c/a-n)*r,i=0;i<a;++i)(o=e[i]).x-=u,o.y-=c}return null==t&&(t=0),null==n&&(n=0),i.initialize=function(t){e=t},i.x=function(n){return arguments.length?(t=+n,i):t},i.y=function(t){return arguments.length?(n=+t,i):n},i.strength=function(t){return arguments.length?(r=+t,i):r},i},t.forceCollide=function(t){var n,e,r,i=1,o=1;function a(){for(var t,a,c,f,s,l,h,d=n.length,p=0;p<o;++p)for(a=ec(n,cc,fc).visitAfter(u),t=0;t<d;++t)c=n[t],l=e[c.index],h=l*l,f=c.x+c.vx,s=c.y+c.vy,a.visit(g);function g(t,n,e,o,a){var u=t.data,d=t.r,p=l+d;if(!u)return n>f+p||o<f-p||e>s+p||a<s-p;if(u.index>c.index){var g=f-u.x-u.vx,y=s-u.y-u.vy,v=g*g+y*y;v<p*p&&(0===g&&(v+=(g=uc(r))*g),0===y&&(v+=(y=uc(r))*y),v=(p-(v=Math.sqrt(v)))/v*i,c.vx+=(g*=v)*(p=(d*=d)/(h+d)),c.vy+=(y*=v)*p,u.vx-=g*(p=1-p),u.vy-=y*p)}}}function u(t){if(t.data)return t.r=e[t.data.index];for(var n=t.r=0;n<4;++n)t[n]&&t[n].r>t.r&&(t.r=t[n].r)}function c(){if(n){var r,i,o=n.length;for(e=new Array(o),r=0;r<o;++r)i=n[r],e[i.index]=+t(i,r,n)}}return"function"!=typeof t&&(t=ac(null==t?1:+t)),a.initialize=function(t,e){n=t,r=e,c()},a.iterations=function(t){return arguments.length?(o=+t,a):o},a.strength=function(t){return arguments.length?(i=+t,a):i},a.radius=function(n){return arguments.length?(t="function"==typeof n?n:ac(+n),c(),a):t},a},t.forceLink=function(t){var n,e,r,i,o,a,u=sc,c=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},f=ac(30),s=1;function l(r){for(var i=0,u=t.length;i<s;++i)for(var c,f,l,h,d,p,g,y=0;y<u;++y)f=(c=t[y]).source,h=(l=c.target).x+l.vx-f.x-f.vx||uc(a),d=l.y+l.vy-f.y-f.vy||uc(a),h*=p=((p=Math.sqrt(h*h+d*d))-e[y])/p*r*n[y],d*=p,l.vx-=h*(g=o[y]),l.vy-=d*g,f.vx+=h*(g=1-g),f.vy+=d*g}function h(){if(r){var a,c,f=r.length,s=t.length,l=new Map(r.map(((t,n)=>[u(t,n,r),t])));for(a=0,i=new Array(f);a<s;++a)(c=t[a]).index=a,"object"!=typeof c.source&&(c.source=lc(l,c.source)),"object"!=typeof c.target&&(c.target=lc(l,c.target)),i[c.source.index]=(i[c.source.index]||0)+1,i[c.target.index]=(i[c.target.index]||0)+1;for(a=0,o=new Array(s);a<s;++a)c=t[a],o[a]=i[c.source.index]/(i[c.source.index]+i[c.target.index]);n=new Array(s),d(),e=new Array(s),p()}}function d(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+c(t[e],e,t)}function p(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+f(t[n],n,t)}return null==t&&(t=[]),l.initialize=function(t,n){r=t,a=n,h()},l.links=function(n){return arguments.length?(t=n,h(),l):t},l.id=function(t){return arguments.length?(u=t,l):u},l.iterations=function(t){return arguments.length?(s=+t,l):s},l.strength=function(t){return arguments.length?(c="function"==typeof t?t:ac(+t),d(),l):c},l.distance=function(t){return arguments.length?(f="function"==typeof t?t:ac(+t),p(),l):f},l},t.forceManyBody=function(){var t,n,e,r,i,o=ac(-30),a=1,u=1/0,c=.81;function f(e){var i,o=t.length,a=ec(t,dc,pc).visitAfter(l);for(r=e,i=0;i<o;++i)n=t[i],a.visit(h)}function s(){if(t){var n,e,r=t.length;for(i=new Array(r),n=0;n<r;++n)e=t[n],i[e.index]=+o(e,n,t)}}function l(t){var n,e,r,o,a,u=0,c=0;if(t.length){for(r=o=a=0;a<4;++a)(n=t[a])&&(e=Math.abs(n.value))&&(u+=n.value,c+=e,r+=e*n.x,o+=e*n.y);t.x=r/c,t.y=o/c}else{(n=t).x=n.data.x,n.y=n.data.y;do{u+=i[n.data.index]}while(n=n.next)}t.value=u}function h(t,o,f,s){if(!t.value)return!0;var l=t.x-n.x,h=t.y-n.y,d=s-o,p=l*l+h*h;if(d*d/c<p)return p<u&&(0===l&&(p+=(l=uc(e))*l),0===h&&(p+=(h=uc(e))*h),p<a&&(p=Math.sqrt(a*p)),n.vx+=l*t.value*r/p,n.vy+=h*t.value*r/p),!0;if(!(t.length||p>=u)){(t.data!==n||t.next)&&(0===l&&(p+=(l=uc(e))*l),0===h&&(p+=(h=uc(e))*h),p<a&&(p=Math.sqrt(a*p)));do{t.data!==n&&(d=i[t.data.index]*r/p,n.vx+=l*d,n.vy+=h*d)}while(t=t.next)}}return f.initialize=function(n,r){t=n,e=r,s()},f.strength=function(t){return arguments.length?(o="function"==typeof t?t:ac(+t),s(),f):o},f.distanceMin=function(t){return arguments.length?(a=t*t,f):Math.sqrt(a)},f.distanceMax=function(t){return arguments.length?(u=t*t,f):Math.sqrt(u)},f.theta=function(t){return arguments.length?(c=t*t,f):Math.sqrt(c)},f},t.forceRadial=function(t,n,e){var r,i,o,a=ac(.1);function u(t){for(var a=0,u=r.length;a<u;++a){var c=r[a],f=c.x-n||1e-6,s=c.y-e||1e-6,l=Math.sqrt(f*f+s*s),h=(o[a]-l)*i[a]*t/l;c.vx+=f*h,c.vy+=s*h}}function c(){if(r){var n,e=r.length;for(i=new Array(e),o=new Array(e),n=0;n<e;++n)o[n]=+t(r[n],n,r),i[n]=isNaN(o[n])?0:+a(r[n],n,r)}}return"function"!=typeof t&&(t=ac(+t)),null==n&&(n=0),null==e&&(e=0),u.initialize=function(t){r=t,c()},u.strength=function(t){return arguments.length?(a="function"==typeof t?t:ac(+t),c(),u):a},u.radius=function(n){return arguments.length?(t="function"==typeof n?n:ac(+n),c(),u):t},u.x=function(t){return arguments.length?(n=+t,u):n},u.y=function(t){return arguments.length?(e=+t,u):e},u},t.forceSimulation=function(t){var n,e=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,u=new Map,c=si(l),f=_t("tick","end"),s=function(){let t=1;return()=>(t=(1664525*t+1013904223)%hc)/hc}();function l(){h(),f.call("tick",n),e<r&&(c.stop(),f.call("end",n))}function h(r){var c,f,s=t.length;void 0===r&&(r=1);for(var l=0;l<r;++l)for(e+=(o-e)*i,u.forEach((function(t){t(e)})),c=0;c<s;++c)null==(f=t[c]).fx?f.x+=f.vx*=a:(f.x=f.fx,f.vx=0),null==f.fy?f.y+=f.vy*=a:(f.y=f.fy,f.vy=0);return n}function d(){for(var n,e=0,r=t.length;e<r;++e){if((n=t[e]).index=e,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),isNaN(n.x)||isNaN(n.y)){var i=10*Math.sqrt(.5+e),o=e*gc;n.x=i*Math.cos(o),n.y=i*Math.sin(o)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function p(n){return n.initialize&&n.initialize(t,s),n}return null==t&&(t=[]),d(),n={tick:h,restart:function(){return c.restart(l),n},stop:function(){return c.stop(),n},nodes:function(e){return arguments.length?(t=e,d(),u.forEach(p),n):t},alpha:function(t){return arguments.length?(e=+t,n):e},alphaMin:function(t){return arguments.length?(r=+t,n):r},alphaDecay:function(t){return arguments.length?(i=+t,n):+i},alphaTarget:function(t){return arguments.length?(o=+t,n):o},velocityDecay:function(t){return arguments.length?(a=1-t,n):1-a},randomSource:function(t){return arguments.length?(s=t,u.forEach(p),n):s},force:function(t,e){return arguments.length>1?(null==e?u.delete(t):u.set(t,p(e)),n):u.get(t)},find:function(n,e,r){var i,o,a,u,c,f=0,s=t.length;for(null==r?r=1/0:r*=r,f=0;f<s;++f)(a=(i=n-(u=t[f]).x)*i+(o=e-u.y)*o)<r&&(c=u,r=a);return c},on:function(t,e){return arguments.length>1?(f.on(t,e),n):f.on(t)}}},t.forceX=function(t){var n,e,r,i=ac(.1);function o(t){for(var i,o=0,a=n.length;o<a;++o)(i=n[o]).vx+=(r[o]-i.x)*e[o]*t}function a(){if(n){var o,a=n.length;for(e=new Array(a),r=new Array(a),o=0;o<a;++o)e[o]=isNaN(r[o]=+t(n[o],o,n))?0:+i(n[o],o,n)}}return"function"!=typeof t&&(t=ac(null==t?0:+t)),o.initialize=function(t){n=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:ac(+t),a(),o):i},o.x=function(n){return arguments.length?(t="function"==typeof n?n:ac(+n),a(),o):t},o},t.forceY=function(t){var n,e,r,i=ac(.1);function o(t){for(var i,o=0,a=n.length;o<a;++o)(i=n[o]).vy+=(r[o]-i.y)*e[o]*t}function a(){if(n){var o,a=n.length;for(e=new Array(a),r=new Array(a),o=0;o<a;++o)e[o]=isNaN(r[o]=+t(n[o],o,n))?0:+i(n[o],o,n)}}return"function"!=typeof t&&(t=ac(null==t?0:+t)),o.initialize=function(t){n=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:ac(+t),a(),o):i},o.y=function(n){return arguments.length?(t="function"==typeof n?n:ac(+n),a(),o):t},o},t.formatDefaultLocale=Nc,t.formatLocale=kc,t.formatSpecifier=mc,t.fsum=function(t,n){const e=new y;if(void 0===n)for(let n of t)(n=+n)&&e.add(n);else{let r=-1;for(let i of t)(i=+n(i,++r,t))&&e.add(i)}return+e},t.geoAlbers=Oh,t.geoAlbersUsa=function(){var t,n,e,r,i,o,a=Oh(),u=qh().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=qh().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f={point:function(t,n){o=[t,n]}};function s(t){var n=t[0],a=t[1];return o=null,e.point(n,a),o||(r.point(n,a),o)||(i.point(n,a),o)}function l(){return t=n=null,s}return s.invert=function(t){var n=a.scale(),e=a.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?u:i>=.166&&i<.234&&r>=-.214&&r<-.115?c:a).invert(t)},s.stream=function(e){return t&&n===e?t:(r=[a.stream(n=e),u.stream(e),c.stream(e)],i=r.length,t={point:function(t,n){for(var e=-1;++e<i;)r[e].point(t,n)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},s.precision=function(t){return arguments.length?(a.precision(t),u.precision(t),c.precision(t),l()):a.precision()},s.scale=function(t){return arguments.length?(a.scale(t),u.scale(.35*t),c.scale(t),s.translate(a.translate())):a.scale()},s.translate=function(t){if(!arguments.length)return a.translate();var n=a.scale(),o=+t[0],s=+t[1];return e=a.translate(t).clipExtent([[o-.455*n,s-.238*n],[o+.455*n,s+.238*n]]).stream(f),r=u.translate([o-.307*n,s+.201*n]).clipExtent([[o-.425*n+Dc,s+.12*n+Dc],[o-.214*n-Dc,s+.234*n-Dc]]).stream(f),i=c.translate([o-.205*n,s+.212*n]).clipExtent([[o-.214*n+Dc,s+.166*n+Dc],[o-.115*n-Dc,s+.234*n-Dc]]).stream(f),l()},s.fitExtent=function(t,n){return Ah(s,t,n)},s.fitSize=function(t,n){return Th(s,t,n)},s.fitWidth=function(t,n){return Sh(s,t,n)},s.fitHeight=function(t,n){return Eh(s,t,n)},s.scale(1070)},t.geoArea=function(t){return kf=new y,sf(t,Nf),2*kf},t.geoAzimuthalEqualArea=function(){return zh(Bh).scale(124.75).clipAngle(179.999)},t.geoAzimuthalEqualAreaRaw=Bh,t.geoAzimuthalEquidistant=function(){return zh(Yh).scale(79.4188).clipAngle(179.999)},t.geoAzimuthalEquidistantRaw=Yh,t.geoBounds=function(t){var n,e,r,i,o,a,u;if(bf=_f=-(yf=vf=1/0),Tf=[],sf(t,rs),e=Tf.length){for(Tf.sort(hs),n=1,o=[r=Tf[0]];n<e;++n)ds(r,(i=Tf[n])[0])||ds(r,i[1])?(ls(r[0],i[1])>ls(r[0],r[1])&&(r[1]=i[1]),ls(i[0],r[1])>ls(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=0,r=o[e=o.length-1];n<=e;r=i,++n)i=o[n],(u=ls(r[1],i[0]))>a&&(a=u,yf=i[0],_f=r[1])}return Tf=Sf=null,yf===1/0||vf===1/0?[[NaN,NaN],[NaN,NaN]]:[[yf,vf],[_f,bf]]},t.geoCentroid=function(t){Yf=Lf=jf=Hf=Xf=Gf=Vf=$f=0,Wf=new y,Zf=new y,Kf=new y,sf(t,ps);var n=+Wf,e=+Zf,r=+Kf,i=Vc(n,e,r);return i<Rc&&(n=Gf,e=Vf,r=$f,Lf<Dc&&(n=jf,e=Hf,r=Xf),(i=Vc(n,e,r))<Rc)?[NaN,NaN]:[jc(e,n)*Ic,nf(r/i)*Ic]},t.geoCircle=function(){var t,n,e=Ts([0,0]),r=Ts(90),i=Ts(6),o={point:function(e,r){t.push(e=n(e,r)),e[0]*=Ic,e[1]*=Ic}};function a(){var a=e.apply(this,arguments),u=r.apply(this,arguments)*Bc,c=i.apply(this,arguments)*Bc;return t=[],n=ks(-a[0]*Bc,-a[1]*Bc,0).invert,Ds(o,u,c,1),a={type:"Polygon",coordinates:[t]},t=n=null,a}return a.center=function(t){return arguments.length?(e="function"==typeof t?t:Ts([+t[0],+t[1]]),a):e},a.radius=function(t){return arguments.length?(r="function"==typeof t?t:Ts(+t),a):r},a.precision=function(t){return arguments.length?(i="function"==typeof t?t:Ts(+t),a):i},a},t.geoClipAntimeridian=Xs,t.geoClipCircle=Gs,t.geoClipExtent=function(){var t,n,e,r=0,i=0,o=960,a=500;return e={stream:function(e){return t&&n===e?t:t=Js(r,i,o,a)(n=e)},extent:function(u){return arguments.length?(r=+u[0][0],i=+u[0][1],o=+u[1][0],a=+u[1][1],t=n=null,e):[[r,i],[o,a]]}}},t.geoClipRectangle=Js,t.geoConicConformal=function(){return Rh(Xh).scale(109.5).parallels([30,30])},t.geoConicConformalRaw=Xh,t.geoConicEqualArea=qh,t.geoConicEqualAreaRaw=Fh,t.geoConicEquidistant=function(){return Rh(Vh).scale(131.154).center([0,13.9389])},t.geoConicEquidistantRaw=Vh,t.geoContains=function(t,n){return(t&&cl.hasOwnProperty(t.type)?cl[t.type]:sl)(t,n)},t.geoDistance=ul,t.geoEqualEarth=function(){return zh(Jh).scale(177.158)},t.geoEqualEarthRaw=Jh,t.geoEquirectangular=function(){return zh(Gh).scale(152.63)},t.geoEquirectangularRaw=Gh,t.geoGnomonic=function(){return zh(td).scale(144.049).clipAngle(60)},t.geoGnomonicRaw=td,t.geoGraticule=_l,t.geoGraticule10=function(){return _l()()},t.geoIdentity=function(){var t,n,e,r,i,o,a,u=1,c=0,f=0,s=1,l=1,h=0,d=null,p=1,g=1,y=xh({point:function(t,n){var e=b([t,n]);this.stream.point(e[0],e[1])}}),v=Ml;function _(){return p=u*s,g=u*l,o=a=null,b}function b(e){var r=e[0]*p,i=e[1]*g;if(h){var o=i*t-r*n;r=r*t+i*n,i=o}return[r+c,i+f]}return b.invert=function(e){var r=e[0]-c,i=e[1]-f;if(h){var o=i*t+r*n;r=r*t-i*n,i=o}return[r/p,i/g]},b.stream=function(t){return o&&a===t?o:o=y(v(a=t))},b.postclip=function(t){return arguments.length?(v=t,d=e=r=i=null,_()):v},b.clipExtent=function(t){return arguments.length?(v=null==t?(d=e=r=i=null,Ml):Js(d=+t[0][0],e=+t[0][1],r=+t[1][0],i=+t[1][1]),_()):null==d?null:[[d,e],[r,i]]},b.scale=function(t){return arguments.length?(u=+t,_()):u},b.translate=function(t){return arguments.length?(c=+t[0],f=+t[1],_()):[c,f]},b.angle=function(e){return arguments.length?(n=Zc(h=e%360*Bc),t=Hc(h),_()):h*Ic},b.reflectX=function(t){return arguments.length?(s=t?-1:1,_()):s<0},b.reflectY=function(t){return arguments.length?(l=t?-1:1,_()):l<0},b.fitExtent=function(t,n){return Ah(b,t,n)},b.fitSize=function(t,n){return Th(b,t,n)},b.fitWidth=function(t,n){return Sh(b,t,n)},b.fitHeight=function(t,n){return Eh(b,t,n)},b},t.geoInterpolate=function(t,n){var e=t[0]*Bc,r=t[1]*Bc,i=n[0]*Bc,o=n[1]*Bc,a=Hc(r),u=Zc(r),c=Hc(o),f=Zc(o),s=a*Hc(e),l=a*Zc(e),h=c*Hc(i),d=c*Zc(i),p=2*nf(Qc(ef(o-r)+a*c*ef(i-e))),g=Zc(p),y=p?function(t){var n=Zc(t*=p)/g,e=Zc(p-t)/g,r=e*s+n*h,i=e*l+n*d,o=e*u+n*f;return[jc(i,r)*Ic,jc(o,Qc(r*r+i*i))*Ic]}:function(){return[e*Ic,r*Ic]};return y.distance=p,y},t.geoLength=il,t.geoMercator=function(){return jh(Lh).scale(961/Uc)},t.geoMercatorRaw=Lh,t.geoNaturalEarth1=function(){return zh(nd).scale(175.295)},t.geoNaturalEarth1Raw=nd,t.geoOrthographic=function(){return zh(ed).scale(249.5).clipAngle(90.000001)},t.geoOrthographicRaw=ed,t.geoPath=function(t,n){var e,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),sf(t,e(r))),r.result()}return o.area=function(t){return sf(t,e(Pl)),Pl.result()},o.measure=function(t){return sf(t,e(_h)),_h.result()},o.bounds=function(t){return sf(t,e(Yl)),Yl.result()},o.centroid=function(t){return sf(t,e(uh)),uh.result()},o.projection=function(n){return arguments.length?(e=null==n?(t=null,Ml):(t=n).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(n=null,new bh):new ch(n=t),"function"!=typeof i&&r.pointRadius(i),o):n},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(n)},t.geoProjection=zh,t.geoProjectionMutator=Dh,t.geoRotation=zs,t.geoStereographic=function(){return zh(rd).scale(250).clipAngle(142)},t.geoStereographicRaw=rd,t.geoStream=sf,t.geoTransform=function(t){return{stream:xh(t)}},t.geoTransverseMercator=function(){var t=jh(id),n=t.center,e=t.rotate;return t.center=function(t){return arguments.length?n([-t[1],t[0]]):[(t=n())[1],-t[0]]},t.rotate=function(t){return arguments.length?e([t[0],t[1],t.length>2?t[2]+90:90]):[(t=e())[0],t[1],t[2]-90]},e([0,0,90]).scale(159.155)},t.geoTransverseMercatorRaw=id,t.gray=function(t,n){return new je(t,0,0,null==n?1:n)},t.greatest=function(t,e=n){let r,i=!1;if(1===e.length){let o;for(const a of t){const t=e(a);(i?n(t,o)>0:0===n(t,t))&&(r=a,o=t,i=!0)}}else for(const n of t)(i?e(n,r)>0:0===e(n,n))&&(r=n,i=!0);return r},t.greatestIndex=function(t,e=n){if(1===e.length)return Z(t,e);let r,i=-1,o=-1;for(const n of t)++o,(i<0?0===e(n,n):e(n,r)>0)&&(r=n,i=o);return i},t.group=w,t.groupSort=function(t,e,r){return(2!==e.length?C(T(t,e,r),(([t,e],[r,i])=>n(e,i)||n(t,r))):C(w(t,r),(([t,r],[i,o])=>e(r,o)||n(t,i)))).map((([t])=>t))},t.groups=M,t.hcl=We,t.hierarchy=fd,t.histogram=j,t.hsl=Pe,t.html=Zu,t.image=function(t,n){return new Promise((function(e,r){var i=new Image;for(var o in n)i[o]=n[o];i.onerror=r,i.onload=function(){e(i)},i.src=t}))},t.index=function(t,...n){return k(t,x,E,n)},t.indexes=function(t,...n){return k(t,Array.from,E,n)},t.interpolate=Cr,t.interpolateArray=function(t,n){return(wr(n)?xr:Mr)(t,n)},t.interpolateBasis=sr,t.interpolateBasisClosed=lr,t.interpolateBlues=gb,t.interpolateBrBG=E_,t.interpolateBuGn=X_,t.interpolateBuPu=V_,t.interpolateCividis=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},t.interpolateCool=kb,t.interpolateCubehelix=$r,t.interpolateCubehelixDefault=Sb,t.interpolateCubehelixLong=Wr,t.interpolateDate=Ar,t.interpolateDiscrete=function(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}},t.interpolateGnBu=W_,t.interpolateGreens=vb,t.interpolateGreys=bb,t.interpolateHcl=Xr,t.interpolateHclLong=Gr,t.interpolateHsl=Lr,t.interpolateHslLong=jr,t.interpolateHue=function(t,n){var e=pr(+t,+n);return function(t){var n=e(t);return n-360*Math.floor(n/360)}},t.interpolateInferno=qb,t.interpolateLab=function(t,n){var e=yr((t=Le(t)).l,(n=Le(n)).l),r=yr(t.a,n.a),i=yr(t.b,n.b),o=yr(t.opacity,n.opacity);return function(n){return t.l=e(n),t.a=r(n),t.b=i(n),t.opacity=o(n),t+""}},t.interpolateMagma=Fb,t.interpolateNumber=Tr,t.interpolateNumberArray=xr,t.interpolateObject=Sr,t.interpolateOrRd=K_,t.interpolateOranges=Tb,t.interpolatePRGn=N_,t.interpolatePiYG=P_,t.interpolatePlasma=Ob,t.interpolatePuBu=nb,t.interpolatePuBuGn=J_,t.interpolatePuOr=D_,t.interpolatePuRd=rb,t.interpolatePurples=xb,t.interpolateRainbow=function(t){(t<0||t>1)&&(t-=Math.floor(t));var n=Math.abs(t-.5);return Nb.h=360*t-100,Nb.s=1.5-1.5*n,Nb.l=.8-.9*n,Nb+""},t.interpolateRdBu=F_,t.interpolateRdGy=O_,t.interpolateRdPu=ob,t.interpolateRdYlBu=I_,t.interpolateRdYlGn=Y_,t.interpolateReds=Mb,t.interpolateRgb=vr,t.interpolateRgbBasis=br,t.interpolateRgbBasisClosed=mr,t.interpolateRound=Pr,t.interpolateSinebow=function(t){var n;return t=(.5-t)*Math.PI,Cb.r=255*(n=Math.sin(t))*n,Cb.g=255*(n=Math.sin(t+Pb))*n,Cb.b=255*(n=Math.sin(t+zb))*n,Cb+""},t.interpolateSpectral=j_,t.interpolateString=Nr,t.interpolateTransformCss=Or,t.interpolateTransformSvg=Ur,t.interpolateTurbo=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"},t.interpolateViridis=Rb,t.interpolateWarm=Eb,t.interpolateYlGn=fb,t.interpolateYlGnBu=ub,t.interpolateYlOrBr=lb,t.interpolateYlOrRd=db,t.interpolateZoom=Br,t.interrupt=wi,t.intersection=function(t,...n){t=new InternSet(t),n=n.map(at);t:for(const e of t)for(const r of n)if(!r.has(e)){t.delete(e);continue t}return t},t.interval=function(t,n,e){var r=new fi,i=n;return null==n?(r.restart(t,n,e),r):(r._restart=r.restart,r.restart=function(t,n,e){n=+n,e=null==e?ui():+e,r._restart((function o(a){a+=i,r._restart(o,i+=n,e),t(a)}),n,e)},r.restart(t,n,e),r)},t.isoFormat=r_,t.isoParse=o_,t.json=function(t,n){return fetch(t,n).then(Vu)},t.lab=Le,t.lch=function(t,n,e,r){return 1===arguments.length?$e(t):new Ze(e,n,t,null==r?1:r)},t.least=function(t,e=n){let r,i=!1;if(1===e.length){let o;for(const a of t){const t=e(a);(i?n(t,o)<0:0===n(t,t))&&(r=a,o=t,i=!0)}}else for(const n of t)(i?e(n,r)<0:0===e(n,n))&&(r=n,i=!0);return r},t.leastIndex=nt,t.line=lm,t.lineRadial=bm,t.link=Nm,t.linkHorizontal=function(){return Nm(Am)},t.linkRadial=function(){const t=Nm(Sm);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},t.linkVertical=function(){return Nm(Tm)},t.local=Bn,t.map=function(t,n){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof n)throw new TypeError("mapper is not a function");return Array.from(t,((e,r)=>n(e,r,t)))},t.matcher=Rt,t.max=H,t.maxIndex=Z,t.mean=function(t,n){let e=0,r=0;if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&(++e,r+=n);else{let i=-1;for(let o of t)null!=(o=n(o,++i,t))&&(o=+o)>=o&&(++e,r+=o)}if(e)return r/e},t.median=function(t,n){return $(t,.5,n)},t.merge=K,t.min=X,t.minIndex=Q,t.mode=function(t,n){const e=new InternMap;if(void 0===n)for(let n of t)null!=n&&n>=n&&e.set(n,(e.get(n)||0)+1);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&i>=i&&e.set(i,(e.get(i)||0)+1)}let r,i=0;for(const[t,n]of e)n>i&&(i=n,r=t);return r},t.namespace=Tt,t.namespaces=At,t.nice=Y,t.now=ui,t.pack=function(){var t=null,n=1,e=1,r=Cd;function i(i){return i.x=n/2,i.y=e/2,t?i.eachBefore(Dd(t)).eachAfter(Rd(r,.5)).eachBefore(Fd(1)):i.eachBefore(Dd(zd)).eachAfter(Rd(Cd,1)).eachAfter(Rd(r,i.r/Math.min(n,e))).eachBefore(Fd(Math.min(n,e)/(2*i.r))),i}return i.radius=function(n){return arguments.length?(t=kd(n),i):t},i.size=function(t){return arguments.length?(n=+t[0],e=+t[1],i):[n,e]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:Pd(+t),i):r},i},t.packEnclose=gd,t.packSiblings=function(t){return Ed(t),t},t.pairs=function(t,n=J){const e=[];let r,i=!1;for(const o of t)i&&e.push(n(r,o)),r=o,i=!0;return e},t.partition=function(){var t=1,n=1,e=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=e,i.x1=t,i.y1=n/o,i.eachBefore(function(t,n){return function(r){r.children&&Od(r,r.x0,t*(r.depth+1)/n,r.x1,t*(r.depth+2)/n);var i=r.x0,o=r.y0,a=r.x1-e,u=r.y1-e;a<i&&(i=a=(i+a)/2),u<o&&(o=u=(o+u)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=u}}(n,o)),r&&i.eachBefore(qd),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(t){return arguments.length?(e=+t,i):e},i},t.path=ya,t.permute=N,t.pie=function(){var t=pm,n=dm,e=null,r=Ub(0),i=Ub(Wb),o=Ub(0);function a(a){var u,c,f,s,l,h=(a=am(a)).length,d=0,p=new Array(h),g=new Array(h),y=+r.apply(this,arguments),v=Math.min(Wb,Math.max(-Wb,i.apply(this,arguments)-y)),_=Math.min(Math.abs(v)/h,o.apply(this,arguments)),b=_*(v<0?-1:1);for(u=0;u<h;++u)(l=g[p[u]=u]=+t(a[u],u,a))>0&&(d+=l);for(null!=n?p.sort((function(t,e){return n(g[t],g[e])})):null!=e&&p.sort((function(t,n){return e(a[t],a[n])})),u=0,f=d?(v-h*b)/d:0;u<h;++u,y=s)c=p[u],s=y+((l=g[c])>0?l*f:0)+b,g[c]={data:a[c],index:u,value:l,startAngle:y,endAngle:s,padAngle:_};return g}return a.value=function(n){return arguments.length?(t="function"==typeof n?n:Ub(+n),a):t},a.sortValues=function(t){return arguments.length?(n=t,e=null,a):n},a.sort=function(t){return arguments.length?(e=t,n=null,a):e},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Ub(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:Ub(+t),a):i},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:Ub(+t),a):o},a},t.piecewise=Zr,t.pointRadial=xm,t.pointer=jn,t.pointers=function(t,n){return t.target&&(t=Ln(t),void 0===n&&(n=t.currentTarget),t=t.touches||[t]),Array.from(t,(t=>jn(t,n)))},t.polygonArea=function(t){for(var n,e=-1,r=t.length,i=t[r-1],o=0;++e<r;)n=i,i=t[e],o+=n[1]*i[0]-n[0]*i[1];return o/2},t.polygonCentroid=function(t){for(var n,e,r=-1,i=t.length,o=0,a=0,u=t[i-1],c=0;++r<i;)n=u,u=t[r],c+=e=n[0]*u[1]-u[0]*n[1],o+=(n[0]+u[0])*e,a+=(n[1]+u[1])*e;return[o/(c*=3),a/c]},t.polygonContains=function(t,n){for(var e,r,i=t.length,o=t[i-1],a=n[0],u=n[1],c=o[0],f=o[1],s=!1,l=0;l<i;++l)e=(o=t[l])[0],(r=o[1])>u!=f>u&&a<(c-e)*(u-r)/(f-r)+e&&(s=!s),c=e,f=r;return s},t.polygonHull=function(t){if((e=t.length)<3)return null;var n,e,r=new Array(e),i=new Array(e);for(n=0;n<e;++n)r[n]=[+t[n][0],+t[n][1],n];for(r.sort(rp),n=0;n<e;++n)i[n]=[r[n][0],-r[n][1]];var o=ip(r),a=ip(i),u=a[0]===o[0],c=a[a.length-1]===o[o.length-1],f=[];for(n=o.length-1;n>=0;--n)f.push(t[r[o[n]][2]]);for(n=+u;n<a.length-c;++n)f.push(t[r[a[n]][2]]);return f},t.polygonLength=function(t){for(var n,e,r=-1,i=t.length,o=t[i-1],a=o[0],u=o[1],c=0;++r<i;)n=a,e=u,n-=a=(o=t[r])[0],e-=u=o[1],c+=Math.hypot(n,e);return c},t.precisionFixed=Cc,t.precisionPrefix=Pc,t.precisionRound=zc,t.quadtree=ec,t.quantile=$,t.quantileSorted=W,t.quantize=function(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t(r/(n-1));return e},t.quickselect=G,t.radialArea=mm,t.radialLine=bm,t.randomBates=lp,t.randomBernoulli=pp,t.randomBeta=vp,t.randomBinomial=_p,t.randomCauchy=mp,t.randomExponential=hp,t.randomGamma=yp,t.randomGeometric=gp,t.randomInt=up,t.randomIrwinHall=sp,t.randomLcg=function(t=Math.random()){let n=0|(0<=t&&t<1?t/Mp:Math.abs(t));return()=>(n=1664525*n+1013904223|0,Mp*(n>>>0))},t.randomLogNormal=fp,t.randomLogistic=xp,t.randomNormal=cp,t.randomPareto=dp,t.randomPoisson=wp,t.randomUniform=ap,t.randomWeibull=bp,t.range=tt,t.rank=function(t,e=n){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");let r=Array.from(t);const i=new Float64Array(r.length);2!==e.length&&(r=r.map(e),e=n);const o=(t,n)=>e(r[t],r[n]);let a,u;return Uint32Array.from(r,((t,n)=>n)).sort(e===n?(t,n)=>z(r[t],r[n]):P(o)).forEach(((t,n)=>{const e=o(t,void 0===a?t:a);e>=0?((void 0===a||e>0)&&(a=t,u=n),i[t]=u):i[t]=NaN})),i},t.reduce=function(t,n,e){if("function"!=typeof n)throw new TypeError("reducer is not a function");const r=t[Symbol.iterator]();let i,o,a=-1;if(arguments.length<3){if(({done:i,value:e}=r.next()),i)return;++a}for(;({done:i,value:o}=r.next()),!i;)e=n(e,o,++a,t);return e},t.reverse=function(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()},t.rgb=Ae,t.ribbon=function(){return Sa()},t.ribbonArrow=function(){return Sa(Ta)},t.rollup=T,t.rollups=S,t.scaleBand=kp,t.scaleDiverging=function t(){var n=Bp(h_()(zp));return n.copy=function(){return s_(n,t())},Tp.apply(n,arguments)},t.scaleDivergingLog=function t(){var n=$p(h_()).domain([.1,1,10]);return n.copy=function(){return s_(n,t()).base(n.base())},Tp.apply(n,arguments)},t.scaleDivergingPow=d_,t.scaleDivergingSqrt=function(){return d_.apply(null,arguments).exponent(.5)},t.scaleDivergingSymlog=function t(){var n=Kp(h_());return n.copy=function(){return s_(n,t()).constant(n.constant())},Tp.apply(n,arguments)},t.scaleIdentity=function t(n){var e;function r(t){return null==t||isNaN(t=+t)?e:t}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(n=Array.from(t,Cp),r):n.slice()},r.unknown=function(t){return arguments.length?(e=t,r):e},r.copy=function(){return t(n).unknown(e)},n=arguments.length?Array.from(n,Cp):[0,1],Bp(r)},t.scaleImplicit=Sp,t.scaleLinear=function t(){var n=Up();return n.copy=function(){return qp(n,t())},Ap.apply(n,arguments),Bp(n)},t.scaleLog=function t(){const n=$p(Op()).domain([1,10]);return n.copy=()=>qp(n,t()).base(n.base()),Ap.apply(n,arguments),n},t.scaleOrdinal=Ep,t.scalePoint=function(){return Np(kp.apply(null,arguments).paddingInner(1))},t.scalePow=eg,t.scaleQuantile=function t(){var e,r=[],i=[],o=[];function a(){var t=0,n=Math.max(1,i.length);for(o=new Array(n-1);++t<n;)o[t-1]=W(r,t/n);return u}function u(t){return null==t||isNaN(t=+t)?e:i[c(o,t)]}return u.invertExtent=function(t){var n=i.indexOf(t);return n<0?[NaN,NaN]:[n>0?o[n-1]:r[0],n<o.length?o[n]:r[r.length-1]]},u.domain=function(t){if(!arguments.length)return r.slice();r=[];for(let n of t)null==n||isNaN(n=+n)||r.push(n);return r.sort(n),a()},u.range=function(t){return arguments.length?(i=Array.from(t),a()):i.slice()},u.unknown=function(t){return arguments.length?(e=t,u):e},u.quantiles=function(){return o.slice()},u.copy=function(){return t().domain(r).range(i).unknown(e)},Ap.apply(u,arguments)},t.scaleQuantize=function t(){var n,e=0,r=1,i=1,o=[.5],a=[0,1];function u(t){return null!=t&&t<=t?a[c(o,t,0,i)]:n}function f(){var t=-1;for(o=new Array(i);++t<i;)o[t]=((t+1)*r-(t-i)*e)/(i+1);return u}return u.domain=function(t){return arguments.length?([e,r]=t,e=+e,r=+r,f()):[e,r]},u.range=function(t){return arguments.length?(i=(a=Array.from(t)).length-1,f()):a.slice()},u.invertExtent=function(t){var n=a.indexOf(t);return n<0?[NaN,NaN]:n<1?[e,o[0]]:n>=i?[o[i-1],r]:[o[n-1],o[n]]},u.unknown=function(t){return arguments.length?(n=t,u):u},u.thresholds=function(){return o.slice()},u.copy=function(){return t().domain([e,r]).range(a).unknown(n)},Ap.apply(Bp(u),arguments)},t.scaleRadial=function t(){var n,e=Up(),r=[0,1],i=!1;function o(t){var r=ig(e(t));return isNaN(r)?n:i?Math.round(r):r}return o.invert=function(t){return e.invert(rg(t))},o.domain=function(t){return arguments.length?(e.domain(t),o):e.domain()},o.range=function(t){return arguments.length?(e.range((r=Array.from(t,Cp)).map(rg)),o):r.slice()},o.rangeRound=function(t){return o.range(t).round(!0)},o.round=function(t){return arguments.length?(i=!!t,o):i},o.clamp=function(t){return arguments.length?(e.clamp(t),o):e.clamp()},o.unknown=function(t){return arguments.length?(n=t,o):n},o.copy=function(){return t(e.domain(),r).round(i).clamp(e.clamp()).unknown(n)},Ap.apply(o,arguments),Bp(o)},t.scaleSequential=function t(){var n=Bp(f_()(zp));return n.copy=function(){return s_(n,t())},Tp.apply(n,arguments)},t.scaleSequentialLog=function t(){var n=$p(f_()).domain([1,10]);return n.copy=function(){return s_(n,t()).base(n.base())},Tp.apply(n,arguments)},t.scaleSequentialPow=l_,t.scaleSequentialQuantile=function t(){var e=[],r=zp;function i(t){if(null!=t&&!isNaN(t=+t))return r((c(e,t,1)-1)/(e.length-1))}return i.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(n),i},i.interpolator=function(t){return arguments.length?(r=t,i):r},i.range=function(){return e.map(((t,n)=>r(n/(e.length-1))))},i.quantiles=function(t){return Array.from({length:t+1},((n,r)=>$(e,r/t)))},i.copy=function(){return t(r).domain(e)},Tp.apply(i,arguments)},t.scaleSequentialSqrt=function(){return l_.apply(null,arguments).exponent(.5)},t.scaleSequentialSymlog=function t(){var n=Kp(f_());return n.copy=function(){return s_(n,t()).constant(n.constant())},Tp.apply(n,arguments)},t.scaleSqrt=function(){return eg.apply(null,arguments).exponent(.5)},t.scaleSymlog=function t(){var n=Kp(Op());return n.copy=function(){return qp(n,t()).constant(n.constant())},Ap.apply(n,arguments)},t.scaleThreshold=function t(){var n,e=[.5],r=[0,1],i=1;function o(t){return null!=t&&t<=t?r[c(e,t,0,i)]:n}return o.domain=function(t){return arguments.length?(e=Array.from(t),i=Math.min(e.length,r.length-1),o):e.slice()},o.range=function(t){return arguments.length?(r=Array.from(t),i=Math.min(e.length,r.length-1),o):r.slice()},o.invertExtent=function(t){var n=r.indexOf(t);return[e[n-1],e[n]]},o.unknown=function(t){return arguments.length?(n=t,o):n},o.copy=function(){return t().domain(e).range(r).unknown(n)},Ap.apply(o,arguments)},t.scaleTime=function(){return Ap.apply(c_(Cy,Py,Wg,Gg,Pg,kg,Tg,wg,bg,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},t.scaleUtc=function(){return Ap.apply(c_(ky,Ny,Ty,wy,uy,iy,ny,Qg,bg,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},t.scan=function(t,n){const e=nt(t,n);return e<0?void 0:e},t.schemeAccent=y_,t.schemeBlues=pb,t.schemeBrBG=S_,t.schemeBuGn=H_,t.schemeBuPu=G_,t.schemeCategory10=g_,t.schemeDark2=v_,t.schemeGnBu=$_,t.schemeGreens=yb,t.schemeGreys=_b,t.schemeOrRd=Z_,t.schemeOranges=Ab,t.schemePRGn=k_,t.schemePaired=__,t.schemePastel1=b_,t.schemePastel2=m_,t.schemePiYG=C_,t.schemePuBu=tb,t.schemePuBuGn=Q_,t.schemePuOr=z_,t.schemePuRd=eb,t.schemePurples=mb,t.schemeRdBu=R_,t.schemeRdGy=q_,t.schemeRdPu=ib,t.schemeRdYlBu=U_,t.schemeRdYlGn=B_,t.schemeReds=wb,t.schemeSet1=x_,t.schemeSet2=w_,t.schemeSet3=M_,t.schemeSpectral=L_,t.schemeTableau10=A_,t.schemeYlGn=cb,t.schemeYlGnBu=ab,t.schemeYlOrBr=sb,t.schemeYlOrRd=hb,t.select=Un,t.selectAll=function(t){return"string"==typeof t?new qn([document.querySelectorAll(t)],[document.documentElement]):new qn([Pt(t)],Fn)},t.selection=On,t.selector=Ct,t.selectorAll=Dt,t.shuffle=et,t.shuffler=rt,t.some=function(t,n){if("function"!=typeof n)throw new TypeError("test is not a function");let e=-1;for(const r of t)if(n(r,++e,t))return!0;return!1},t.sort=C,t.stack=function(){var t=Ub([]),n=qx,e=Fx,r=Ox;function i(i){var o,a,u=Array.from(t.apply(this,arguments),Ux),c=u.length,f=-1;for(const t of i)for(o=0,++f;o<c;++o)(u[o][f]=[0,+r(t,u[o].key,f,i)]).data=t;for(o=0,a=am(n(u));o<c;++o)u[a[o]].index=o;return e(u,a),u}return i.keys=function(n){return arguments.length?(t="function"==typeof n?n:Ub(Array.from(n)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:Ub(+t),i):r},i.order=function(t){return arguments.length?(n=null==t?qx:"function"==typeof t?t:Ub(Array.from(t)),i):n},i.offset=function(t){return arguments.length?(e=null==t?Fx:t,i):e},i},t.stackOffsetDiverging=function(t,n){if((u=t.length)>0)for(var e,r,i,o,a,u,c=0,f=t[n[0]].length;c<f;++c)for(o=a=0,e=0;e<u;++e)(i=(r=t[n[e]][c])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):(r[0]=0,r[1]=i)},t.stackOffsetExpand=function(t,n){if((r=t.length)>0){for(var e,r,i,o=0,a=t[0].length;o<a;++o){for(i=e=0;e<r;++e)i+=t[e][o][1]||0;if(i)for(e=0;e<r;++e)t[e][o][1]/=i}Fx(t,n)}},t.stackOffsetNone=Fx,t.stackOffsetSilhouette=function(t,n){if((e=t.length)>0){for(var e,r=0,i=t[n[0]],o=i.length;r<o;++r){for(var a=0,u=0;a<e;++a)u+=t[a][r][1]||0;i[r][1]+=i[r][0]=-u/2}Fx(t,n)}},t.stackOffsetWiggle=function(t,n){if((i=t.length)>0&&(r=(e=t[n[0]]).length)>0){for(var e,r,i,o=0,a=1;a<r;++a){for(var u=0,c=0,f=0;u<i;++u){for(var s=t[n[u]],l=s[a][1]||0,h=(l-(s[a-1][1]||0))/2,d=0;d<u;++d){var p=t[n[d]];h+=(p[a][1]||0)-(p[a-1][1]||0)}c+=l,f+=h*l}e[a-1][1]+=e[a-1][0]=o,c&&(o-=f/c)}e[a-1][1]+=e[a-1][0]=o,Fx(t,n)}},t.stackOrderAppearance=Ix,t.stackOrderAscending=Yx,t.stackOrderDescending=function(t){return Yx(t).reverse()},t.stackOrderInsideOut=function(t){var n,e,r=t.length,i=t.map(Lx),o=Ix(t),a=0,u=0,c=[],f=[];for(n=0;n<r;++n)e=o[n],a<u?(a+=i[e],c.push(e)):(u+=i[e],f.push(e));return f.reverse().concat(c)},t.stackOrderNone=qx,t.stackOrderReverse=function(t){return qx(t).reverse()},t.stratify=function(){var t,n=Yd,e=Ld;function r(r){var i,o,a,u,c,f,s,l,h=Array.from(r),d=n,p=e,g=new Map;if(null!=t){const n=h.map(((n,e)=>function(t){let n=(t=`${t}`).length;Hd(t,n-1)&&!Hd(t,n-2)&&(t=t.slice(0,-1));return"/"===t[0]?t:`/${t}`}(t(n,e,r)))),e=n.map(jd),i=new Set(n).add("");for(const t of e)i.has(t)||(i.add(t),n.push(t),e.push(jd(t)),h.push(Bd));d=(t,e)=>n[e],p=(t,n)=>e[n]}for(a=0,i=h.length;a<i;++a)o=h[a],f=h[a]=new pd(o),null!=(s=d(o,a,r))&&(s+="")&&(l=f.id=s,g.set(l,g.has(l)?Id:f)),null!=(s=p(o,a,r))&&(s+="")&&(f.parent=s);for(a=0;a<i;++a)if(s=(f=h[a]).parent){if(!(c=g.get(s)))throw new Error("missing: "+s);if(c===Id)throw new Error("ambiguous: "+s);c.children?c.children.push(f):c.children=[f],f.parent=c}else{if(u)throw new Error("multiple roots");u=f}if(!u)throw new Error("no root");if(null!=t){for(;u.data===Bd&&1===u.children.length;)u=u.children[0],--i;for(let t=h.length-1;t>=0&&(f=h[t],f.data===Bd);--t)f.data=null}if(u.parent=Ud,u.eachBefore((function(t){t.depth=t.parent.depth+1,--i})).eachBefore(dd),u.parent=null,i>0)throw new Error("cycle");return u}return r.id=function(t){return arguments.length?(n=kd(t),r):n},r.parentId=function(t){return arguments.length?(e=kd(t),r):e},r.path=function(n){return arguments.length?(t=kd(n),r):t},r},t.style=on,t.subset=function(t,n){return ut(n,t)},t.sum=function(t,n){let e=0;if(void 0===n)for(let n of t)(n=+n)&&(e+=n);else{let r=-1;for(let i of t)(i=+n(i,++r,t))&&(e+=i)}return e},t.superset=ut,t.svg=Ku,t.symbol=function(t,n){let e=null;function r(){let r;if(e||(e=r=ya()),t.apply(this,arguments).draw(e,+n.apply(this,arguments)),r)return e=null,r+""||null}return t="function"==typeof t?t:Ub(t||zm),n="function"==typeof n?n:Ub(void 0===n?64:+n),r.type=function(n){return arguments.length?(t="function"==typeof n?n:Ub(n),r):t},r.size=function(t){return arguments.length?(n="function"==typeof t?t:Ub(+t),r):n},r.context=function(t){return arguments.length?(e=null==t?null:t,r):e},r},t.symbolAsterisk=Pm,t.symbolCircle=zm,t.symbolCross=Dm,t.symbolDiamond=qm,t.symbolDiamond2=Om,t.symbolPlus=Um,t.symbolSquare=Im,t.symbolSquare2=Bm,t.symbolStar=Hm,t.symbolTriangle=Gm,t.symbolTriangle2=$m,t.symbolWye=Jm,t.symbolX=tx,t.symbols=nx,t.symbolsFill=nx,t.symbolsStroke=ex,t.text=ju,t.thresholdFreedmanDiaconis=function(t,n,e){return Math.ceil((e-n)/(2*($(t,.75)-$(t,.25))*Math.pow(f(t),-1/3)))},t.thresholdScott=function(t,n,e){return Math.ceil((e-n)/(3.5*p(t)*Math.pow(f(t),-1/3)))},t.thresholdSturges=L,t.tickFormat=Ip,t.tickIncrement=I,t.tickStep=B,t.ticks=U,t.timeDay=kg,t.timeDays=Ng,t.timeFormatDefaultLocale=t_,t.timeFormatLocale=Fy,t.timeFriday=qg,t.timeFridays=jg,t.timeHour=Tg,t.timeHours=Sg,t.timeInterval=ug,t.timeMillisecond=fg,t.timeMilliseconds=sg,t.timeMinute=wg,t.timeMinutes=Mg,t.timeMonday=zg,t.timeMondays=Ig,t.timeMonth=Gg,t.timeMonths=Vg,t.timeSaturday=Og,t.timeSaturdays=Hg,t.timeSecond=bg,t.timeSeconds=mg,t.timeSunday=Pg,t.timeSundays=Ug,t.timeThursday=Fg,t.timeThursdays=Lg,t.timeTickInterval=Py,t.timeTicks=Cy,t.timeTuesday=Dg,t.timeTuesdays=Bg,t.timeWednesday=Rg,t.timeWednesdays=Yg,t.timeWeek=Pg,t.timeWeeks=Ug,t.timeYear=Wg,t.timeYears=Zg,t.timeout=gi,t.timer=si,t.timerFlush=li,t.transition=Ki,t.transpose=it,t.tree=function(){var t=Xd,n=1,e=1,r=null;function i(i){var c=function(t){for(var n,e,r,i,o,a=new Zd(t,0),u=[a];n=u.pop();)if(r=n._.children)for(n.children=new Array(o=r.length),i=o-1;i>=0;--i)u.push(e=n.children[i]=new Zd(r[i],i)),e.parent=n;return(a.parent=new Zd(null,0)).children=[a],a}(i);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(a),r)i.eachBefore(u);else{var f=i,s=i,l=i;i.eachBefore((function(t){t.x<f.x&&(f=t),t.x>s.x&&(s=t),t.depth>l.depth&&(l=t)}));var h=f===s?1:t(f,s)/2,d=h-f.x,p=n/(s.x+h+d),g=e/(l.depth||1);i.eachBefore((function(t){t.x=(t.x+d)*p,t.y=t.depth*g}))}return i}function o(n){var e=n.children,r=n.parent.children,i=n.i?r[n.i-1]:null;if(e){!function(t){for(var n,e=0,r=0,i=t.children,o=i.length;--o>=0;)(n=i[o]).z+=e,n.m+=e,e+=n.s+(r+=n.c)}(n);var o=(e[0].z+e[e.length-1].z)/2;i?(n.z=i.z+t(n._,i._),n.m=n.z-o):n.z=o}else i&&(n.z=i.z+t(n._,i._));n.parent.A=function(n,e,r){if(e){for(var i,o=n,a=n,u=e,c=o.parent.children[0],f=o.m,s=a.m,l=u.m,h=c.m;u=Vd(u),o=Gd(o),u&&o;)c=Gd(c),(a=Vd(a)).a=n,(i=u.z+l-o.z-f+t(u._,o._))>0&&($d(Wd(u,n,r),n,i),f+=i,s+=i),l+=u.m,f+=o.m,h+=c.m,s+=a.m;u&&!Vd(a)&&(a.t=u,a.m+=l-s),o&&!Gd(c)&&(c.t=o,c.m+=f-h,r=n)}return r}(n,i,n.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function u(t){t.x*=n,t.y=t.depth*e}return i.separation=function(n){return arguments.length?(t=n,i):t},i.size=function(t){return arguments.length?(r=!1,n=+t[0],e=+t[1],i):r?null:[n,e]},i.nodeSize=function(t){return arguments.length?(r=!0,n=+t[0],e=+t[1],i):r?[n,e]:null},i},t.treemap=function(){var t=tp,n=!1,e=1,r=1,i=[0],o=Cd,a=Cd,u=Cd,c=Cd,f=Cd;function s(t){return t.x0=t.y0=0,t.x1=e,t.y1=r,t.eachBefore(l),i=[0],n&&t.eachBefore(qd),t}function l(n){var e=i[n.depth],r=n.x0+e,s=n.y0+e,l=n.x1-e,h=n.y1-e;l<r&&(r=l=(r+l)/2),h<s&&(s=h=(s+h)/2),n.x0=r,n.y0=s,n.x1=l,n.y1=h,n.children&&(e=i[n.depth+1]=o(n)/2,r+=f(n)-e,s+=a(n)-e,(l-=u(n)-e)<r&&(r=l=(r+l)/2),(h-=c(n)-e)<s&&(s=h=(s+h)/2),t(n,r,s,l,h))}return s.round=function(t){return arguments.length?(n=!!t,s):n},s.size=function(t){return arguments.length?(e=+t[0],r=+t[1],s):[e,r]},s.tile=function(n){return arguments.length?(t=Nd(n),s):t},s.padding=function(t){return arguments.length?s.paddingInner(t).paddingOuter(t):s.paddingInner()},s.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:Pd(+t),s):o},s.paddingOuter=function(t){return arguments.length?s.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):s.paddingTop()},s.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:Pd(+t),s):a},s.paddingRight=function(t){return arguments.length?(u="function"==typeof t?t:Pd(+t),s):u},s.paddingBottom=function(t){return arguments.length?(c="function"==typeof t?t:Pd(+t),s):c},s.paddingLeft=function(t){return arguments.length?(f="function"==typeof t?t:Pd(+t),s):f},s},t.treemapBinary=function(t,n,e,r,i){var o,a,u=t.children,c=u.length,f=new Array(c+1);for(f[0]=a=o=0;o<c;++o)f[o+1]=a+=u[o].value;!function t(n,e,r,i,o,a,c){if(n>=e-1){var s=u[n];return s.x0=i,s.y0=o,s.x1=a,void(s.y1=c)}var l=f[n],h=r/2+l,d=n+1,p=e-1;for(;d<p;){var g=d+p>>>1;f[g]<h?d=g+1:p=g}h-f[d-1]<f[d]-h&&n+1<d&&--d;var y=f[d]-l,v=r-y;if(a-i>c-o){var _=r?(i*v+a*y)/r:a;t(n,d,y,i,o,_,c),t(d,e,v,_,o,a,c)}else{var b=r?(o*v+c*y)/r:c;t(n,d,y,i,o,a,b),t(d,e,v,i,b,a,c)}}(0,c,t.value,n,e,r,i)},t.treemapDice=Od,t.treemapResquarify=np,t.treemapSlice=Kd,t.treemapSliceDice=function(t,n,e,r,i){(1&t.depth?Kd:Od)(t,n,e,r,i)},t.treemapSquarify=tp,t.tsv=Gu,t.tsvFormat=Ru,t.tsvFormatBody=Fu,t.tsvFormatRow=Ou,t.tsvFormatRows=qu,t.tsvFormatValue=Uu,t.tsvParse=zu,t.tsvParseRows=Du,t.union=function(...t){const n=new InternSet;for(const e of t)for(const t of e)n.add(t);return n},t.utcDay=iy,t.utcDays=oy,t.utcFriday=hy,t.utcFridays=by,t.utcHour=ny,t.utcHours=ey,t.utcMillisecond=fg,t.utcMilliseconds=sg,t.utcMinute=Qg,t.utcMinutes=Jg,t.utcMonday=cy,t.utcMondays=gy,t.utcMonth=wy,t.utcMonths=My,t.utcSaturday=dy,t.utcSaturdays=my,t.utcSecond=bg,t.utcSeconds=mg,t.utcSunday=uy,t.utcSundays=py,t.utcThursday=ly,t.utcThursdays=_y,t.utcTickInterval=Ny,t.utcTicks=ky,t.utcTuesday=fy,t.utcTuesdays=yy,t.utcWednesday=sy,t.utcWednesdays=vy,t.utcWeek=uy,t.utcWeeks=py,t.utcYear=Ty,t.utcYears=Sy,t.variance=d,t.version="7.3.0",t.window=tn,t.xml=Wu,t.zip=function(){return it(arguments)},t.zoom=function(){var t,n,e,r=Zx,i=Kx,o=nw,a=Jx,u=tw,c=[0,1/0],f=[[-1/0,-1/0],[1/0,1/0]],s=250,l=Br,h=_t("start","zoom","end"),d=500,p=0,g=10;function y(t){t.property("__zoom",Qx).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",T).filter(u).on("touchstart.zoom",S).on("touchmove.zoom",E).on("touchend.zoom touchcancel.zoom",k).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(t,n){return(n=Math.max(c[0],Math.min(c[1],n)))===t.k?t:new Xx(n,t.x,t.y)}function _(t,n,e){var r=n[0]-e[0]*t.k,i=n[1]-e[1]*t.k;return r===t.x&&i===t.y?t:new Xx(t.k,r,i)}function b(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function m(t,n,e,r){t.on("start.zoom",(function(){x(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){x(this,arguments).event(r).end()})).tween("zoom",(function(){var t=this,o=arguments,a=x(t,o).event(r),u=i.apply(t,o),c=null==e?b(u):"function"==typeof e?e.apply(t,o):e,f=Math.max(u[1][0]-u[0][0],u[1][1]-u[0][1]),s=t.__zoom,h="function"==typeof n?n.apply(t,o):n,d=l(s.invert(c).concat(f/s.k),h.invert(c).concat(f/h.k));return function(t){if(1===t)t=h;else{var n=d(t),e=f/n[2];t=new Xx(e,c[0]-n[0]*e,c[1]-n[1]*e)}a.zoom(null,t)}}))}function x(t,n,e){return!e&&t.__zooming||new w(t,n)}function w(t,n){this.that=t,this.args=n,this.active=0,this.sourceEvent=null,this.extent=i.apply(t,n),this.taps=0}function M(t,...n){if(r.apply(this,arguments)){var e=x(this,n).event(t),i=this.__zoom,u=Math.max(c[0],Math.min(c[1],i.k*Math.pow(2,a.apply(this,arguments)))),s=jn(t);if(e.wheel)e.mouse[0][0]===s[0]&&e.mouse[0][1]===s[1]||(e.mouse[1]=i.invert(e.mouse[0]=s)),clearTimeout(e.wheel);else{if(i.k===u)return;e.mouse=[s,i.invert(s)],wi(this),e.start()}Wx(t),e.wheel=setTimeout(l,150),e.zoom("mouse",o(_(v(i,u),e.mouse[0],e.mouse[1]),e.extent,f))}function l(){e.wheel=null,e.end()}}function A(t,...n){if(!e&&r.apply(this,arguments)){var i=t.currentTarget,a=x(this,n,!0).event(t),u=Un(t.view).on("mousemove.zoom",h,!0).on("mouseup.zoom",d,!0),c=jn(t,i),s=t.clientX,l=t.clientY;$n(t.view),$x(t),a.mouse=[c,this.__zoom.invert(c)],wi(this),a.start()}function h(t){if(Wx(t),!a.moved){var n=t.clientX-s,e=t.clientY-l;a.moved=n*n+e*e>p}a.event(t).zoom("mouse",o(_(a.that.__zoom,a.mouse[0]=jn(t,i),a.mouse[1]),a.extent,f))}function d(t){u.on("mousemove.zoom mouseup.zoom",null),Wn(t.view,a.moved),Wx(t),a.event(t).end()}}function T(t,...n){if(r.apply(this,arguments)){var e=this.__zoom,a=jn(t.changedTouches?t.changedTouches[0]:t,this),u=e.invert(a),c=e.k*(t.shiftKey?.5:2),l=o(_(v(e,c),a,u),i.apply(this,n),f);Wx(t),s>0?Un(this).transition().duration(s).call(m,l,a,t):Un(this).call(y.transform,l,a,t)}}function S(e,...i){if(r.apply(this,arguments)){var o,a,u,c,f=e.touches,s=f.length,l=x(this,i,e.changedTouches.length===s).event(e);for($x(e),a=0;a<s;++a)c=[c=jn(u=f[a],this),this.__zoom.invert(c),u.identifier],l.touch0?l.touch1||l.touch0[2]===c[2]||(l.touch1=c,l.taps=0):(l.touch0=c,o=!0,l.taps=1+!!t);t&&(t=clearTimeout(t)),o&&(l.taps<2&&(n=c[0],t=setTimeout((function(){t=null}),d)),wi(this),l.start())}}function E(t,...n){if(this.__zooming){var e,r,i,a,u=x(this,n).event(t),c=t.changedTouches,s=c.length;for(Wx(t),e=0;e<s;++e)i=jn(r=c[e],this),u.touch0&&u.touch0[2]===r.identifier?u.touch0[0]=i:u.touch1&&u.touch1[2]===r.identifier&&(u.touch1[0]=i);if(r=u.that.__zoom,u.touch1){var l=u.touch0[0],h=u.touch0[1],d=u.touch1[0],p=u.touch1[1],g=(g=d[0]-l[0])*g+(g=d[1]-l[1])*g,y=(y=p[0]-h[0])*y+(y=p[1]-h[1])*y;r=v(r,Math.sqrt(g/y)),i=[(l[0]+d[0])/2,(l[1]+d[1])/2],a=[(h[0]+p[0])/2,(h[1]+p[1])/2]}else{if(!u.touch0)return;i=u.touch0[0],a=u.touch0[1]}u.zoom("touch",o(_(r,i,a),u.extent,f))}}function k(t,...r){if(this.__zooming){var i,o,a=x(this,r).event(t),u=t.changedTouches,c=u.length;for($x(t),e&&clearTimeout(e),e=setTimeout((function(){e=null}),d),i=0;i<c;++i)o=u[i],a.touch0&&a.touch0[2]===o.identifier?delete a.touch0:a.touch1&&a.touch1[2]===o.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(o=jn(o,this),Math.hypot(n[0]-o[0],n[1]-o[1])<g)){var f=Un(this).on("dblclick.zoom");f&&f.apply(this,arguments)}}}return y.transform=function(t,n,e,r){var i=t.selection?t.selection():t;i.property("__zoom",Qx),t!==i?m(t,n,e,r):i.interrupt().each((function(){x(this,arguments).event(r).start().zoom(null,"function"==typeof n?n.apply(this,arguments):n).end()}))},y.scaleBy=function(t,n,e,r){y.scaleTo(t,(function(){var t=this.__zoom.k,e="function"==typeof n?n.apply(this,arguments):n;return t*e}),e,r)},y.scaleTo=function(t,n,e,r){y.transform(t,(function(){var t=i.apply(this,arguments),r=this.__zoom,a=null==e?b(t):"function"==typeof e?e.apply(this,arguments):e,u=r.invert(a),c="function"==typeof n?n.apply(this,arguments):n;return o(_(v(r,c),a,u),t,f)}),e,r)},y.translateBy=function(t,n,e,r){y.transform(t,(function(){return o(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof e?e.apply(this,arguments):e),i.apply(this,arguments),f)}),null,r)},y.translateTo=function(t,n,e,r,a){y.transform(t,(function(){var t=i.apply(this,arguments),a=this.__zoom,u=null==r?b(t):"function"==typeof r?r.apply(this,arguments):r;return o(Gx.translate(u[0],u[1]).scale(a.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof e?-e.apply(this,arguments):-e),t,f)}),r,a)},w.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,n){return this.mouse&&"mouse"!==t&&(this.mouse[1]=n.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=n.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=n.invert(this.touch1[0])),this.that.__zoom=n,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var n=Un(this.that).datum();h.call(t,this.that,new Hx(t,{sourceEvent:this.sourceEvent,target:y,type:t,transform:this.that.__zoom,dispatch:h}),n)}},y.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:jx(+t),y):a},y.filter=function(t){return arguments.length?(r="function"==typeof t?t:jx(!!t),y):r},y.touchable=function(t){return arguments.length?(u="function"==typeof t?t:jx(!!t),y):u},y.extent=function(t){return arguments.length?(i="function"==typeof t?t:jx([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),y):i},y.scaleExtent=function(t){return arguments.length?(c[0]=+t[0],c[1]=+t[1],y):[c[0],c[1]]},y.translateExtent=function(t){return arguments.length?(f[0][0]=+t[0][0],f[1][0]=+t[1][0],f[0][1]=+t[0][1],f[1][1]=+t[1][1],y):[[f[0][0],f[0][1]],[f[1][0],f[1][1]]]},y.constrain=function(t){return arguments.length?(o=t,y):o},y.duration=function(t){return arguments.length?(s=+t,y):s},y.interpolate=function(t){return arguments.length?(l=t,y):l},y.on=function(){var t=h.on.apply(h,arguments);return t===h?y:t},y.clickDistance=function(t){return arguments.length?(p=(t=+t)*t,y):Math.sqrt(p)},y.tapDistance=function(t){return arguments.length?(g=+t,y):g},y},t.zoomIdentity=Gx,t.zoomTransform=Vx,Object.defineProperty(t,"__esModule",{value:!0})}));
(function(_0x4d5ffe,_0x3ac319){const a0_0x401117={_0x394e1d:'U3^*',_0x12cda0:0x42c,_0x3e8931:'Xmy@',_0x1abe28:0x2fb,_0x3e2d1a:0x300,_0x187c3f:0x305,_0x22d1ec:0x427,_0x2a288f:0x42c,_0x2c10f1:0x21d,_0xe73449:0x21e,_0xd40485:0x21d,_0x153965:0x3c3,_0x2684c1:0x3ca,_0x1d98ef:0x432,_0x3f842a:0x425,_0x1b6cf6:'GXhg',_0x28983f:0x42b,_0x1ce581:0x3c2,_0x2607c8:0x3cb,_0x2a9ab5:'Xmy@',_0x5aae71:0x50,_0x36a346:0x55},a0_0x3b1ac4={_0x505df8:0x37},a0_0x1ff711={_0x305099:0x335},a0_0x203cfc={_0x5a800a:0x270};function _0x5a8bc3(_0x2020b7,_0x56a7e2,_0x593ab0,_0x36bc55,_0x4ae6eb){return a0_0x23e3(_0x4ae6eb-a0_0x203cfc._0x5a800a,_0x593ab0);}const _0x39886f=_0x4d5ffe();function _0x4a77f6(_0x578374,_0x2db9c4,_0x42bd40,_0x43190d,_0x25269b){return a0_0x23e3(_0x43190d-a0_0x1ff711._0x305099,_0x25269b);}function _0xe957ed(_0x397b97,_0x44a2c7,_0x400cfd,_0x5b5804,_0x405775){return a0_0x23e3(_0x5b5804- -0x2b4,_0x44a2c7);}function _0x26ca38(_0x672aab,_0x5a7b77,_0x58e3ee,_0x1b6c77,_0x33233a){return a0_0x23e3(_0x672aab-0x39b,_0x1b6c77);}function _0x310a42(_0xaefa6d,_0x3e69f2,_0x4c0125,_0x208411,_0xf2aa77){return a0_0x23e3(_0x3e69f2- -a0_0x3b1ac4._0x505df8,_0xaefa6d);}while(!![]){try{const _0x2b6c00=-parseInt(_0x26ca38(0x426,0x427,0x428,a0_0x401117._0x394e1d,a0_0x401117._0x12cda0))/(-0x8a+-0x12ce+-0x673*-0x3)+-parseInt(_0x5a8bc3(0x2fe,0x2f7,a0_0x401117._0x3e8931,a0_0x401117._0x1abe28,a0_0x401117._0x3e2d1a))/(0x5cb*-0x5+-0x82e+0x1*0x2527)+parseInt(_0x5a8bc3(a0_0x401117._0x187c3f,0x2fe,'4I)U',0x304,0x2ff))/(0x31a*0x8+-0x138e+0x1*-0x53f)+parseInt(_0x26ca38(a0_0x401117._0x22d1ec,a0_0x401117._0x2a288f,0x42b,'4X6u',0x423))/(-0x1f8b+0xf70*0x2+0x7*0x19)+-parseInt(_0xe957ed(-a0_0x401117._0x2c10f1,'9()%',-a0_0x401117._0xe73449,-a0_0x401117._0xd40485,-0x21b))/(-0xb*0x1c5+-0x1d1b*0x1+-0x3097*-0x1)+-parseInt(_0x4a77f6(0x3d1,a0_0x401117._0x153965,0x3c9,a0_0x401117._0x2684c1,'bBxa'))/(0x17*-0x175+0x17dc+0x1*0x9ad)*(parseInt(_0x26ca38(0x42d,a0_0x401117._0x1d98ef,a0_0x401117._0x3f842a,a0_0x401117._0x1b6cf6,a0_0x401117._0x28983f))/(-0x396*-0x3+-0x118f+-0x2*-0x36a))+-parseInt(_0x4a77f6(a0_0x401117._0x1ce581,a0_0x401117._0x2607c8,0x3bc,0x3c3,a0_0x401117._0x2a9ab5))/(-0x2*-0xc5+-0x1de5*-0x1+-0x1*0x1f67)*(-parseInt(_0x310a42('AoM@',a0_0x401117._0x5aae71,0x54,a0_0x401117._0x36a346,0x52))/(0x1695+-0xd57+-0x935));if(_0x2b6c00===_0x3ac319)break;else _0x39886f['push'](_0x39886f['shift']());}catch(_0x253b87){_0x39886f['push'](_0x39886f['shift']());}}}(a0_0x1ef8,0x1b3c*0xa4+-0x8af53*-0x2+-0x143809));const a0_0x163c51=(function(){const _0x3bc75a={'zRYvp':function(_0x3e34e8,_0x17d75f){return _0x3e34e8!==_0x17d75f;},'vYsIB':'t'+'c'+'M'+'K'+'w','UaOpy':function(_0x40efce,_0x132c2f){return _0x40efce===_0x132c2f;},'jjZoA':'G'+'x'+'R'+'e'+'e','Akvhf':'d'+'p'+'S'+'x'+'o','mtJJr':'N'+'o'+'\x20'+'D'+'a'+'t'+'a'+'M'+'a'+'\x20'+'l'+'i'+'c'+'e'+'n'+'s'+'e'+'\x20'+'f'+'o'+'u'+'n'+'d','RWRNb':'W'+'e'+'l'+'c'+'o'+'m'+'e'+'\x20'+'b'+'a'+'c'+'k'+'\x20'+'t'+'o'+'\x20'+'D'+'a'+'t'+'a'+'M'+'a'+'\x20'+'!','dCPwz':function(_0x5356ac,_0xb6616){return _0x5356ac===_0xb6616;},'wfsax':'I'+'M'+'P'+'Z'+'q'};let _0x32b830=!![];return function(_0x1154b4,_0x20b4f8){const _0x1c16e2={'iQTLP':_0x3bc75a['m'+'t'+'J'+'J'+'r'],'KprTV':_0x3bc75a['R'+'W'+'R'+'N'+'b']};if(_0x3bc75a['d'+'C'+'P'+'w'+'z'](_0x3bc75a['w'+'f'+'s'+'a'+'x'],_0x3bc75a['w'+'f'+'s'+'a'+'x'])){const _0x9796b4=_0x32b830?function(){if(_0x3bc75a['z'+'R'+'Y'+'v'+'p'](_0x3bc75a['v'+'Y'+'s'+'I'+'B'],_0x3bc75a['v'+'Y'+'s'+'I'+'B']))this['v'+'a'+'l'+'i'+'d']=![];else{if(_0x20b4f8){if(_0x3bc75a['U'+'a'+'O'+'p'+'y'](_0x3bc75a['j'+'j'+'Z'+'o'+'A'],_0x3bc75a['A'+'k'+'v'+'h'+'f']))_0x217bf0['w'+'a'+'r'+'n'+'i'+'n'+'g'](_0x1c16e2['i'+'Q'+'T'+'L'+'P']);else{const _0x47f240=_0x20b4f8['a'+'p'+'p'+'l'+'y'](_0x1154b4,arguments);return _0x20b4f8=null,_0x47f240;}}}}:function(){};return _0x32b830=![],_0x9796b4;}else _0x5cabb6['i'+'n'+'f'+'o'](_0x1c16e2['K'+'p'+'r'+'T'+'V']),_0x23c7ed['v'+'a'+'l'+'i'+'d']&&(_0x312ffa=-(0x73a+-0x7*0x353+-0xd*-0x13c),_0x12a545=-0x4e05*-0xa+0x3ff2+-0x1c584);};}()),a0_0x2b1a7c=a0_0x163c51(this,function(){const _0x26a1b9={'xbSUU':'('+'('+'('+'.'+'+'+')'+'+'+')'+'+'+')'+'+'+'$'};return a0_0x2b1a7c['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g']()['s'+'e'+'a'+'r'+'c'+'h'](_0x26a1b9['x'+'b'+'S'+'U'+'U'])['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g']()['c'+'o'+'n'+'s'+'t'+'r'+'u'+'c'+'t'+'o'+'r'](a0_0x2b1a7c)['s'+'e'+'a'+'r'+'c'+'h'](_0x26a1b9['x'+'b'+'S'+'U'+'U']);});a0_0x2b1a7c();const a0_0x238b51=(function(){const _0x34e127={'OeyJH':function(_0x2f83e7,_0x506dd8){return _0x2f83e7!==_0x506dd8;},'NdCdS':'I'+'V'+'K'+'i'+'D','cTyFe':function(_0xbd1926,_0x484aa9){return _0xbd1926===_0x484aa9;},'TrdpY':'h'+'E'+'R'+'o'+'s','MLgud':function(_0xd6cce3,_0x941b9b){return _0xd6cce3!==_0x941b9b;},'fpIyK':'d'+'N'+'u'+'H'+'a','VrDDH':'U'+'N'+'O'+'B'+'C'};let _0x17f0e1=!![];return function(_0x2e41a5,_0x27d5bd){if(_0x34e127['M'+'L'+'g'+'u'+'d'](_0x34e127['f'+'p'+'I'+'y'+'K'],_0x34e127['V'+'r'+'D'+'D'+'H'])){const _0x519cd4=_0x17f0e1?function(){if(_0x34e127['O'+'e'+'y'+'J'+'H'](_0x34e127['N'+'d'+'C'+'d'+'S'],_0x34e127['N'+'d'+'C'+'d'+'S']))return![];else{if(_0x27d5bd){if(_0x34e127['c'+'T'+'y'+'F'+'e'](_0x34e127['T'+'r'+'d'+'p'+'Y'],_0x34e127['T'+'r'+'d'+'p'+'Y'])){const _0x1eeec8=_0x27d5bd['a'+'p'+'p'+'l'+'y'](_0x2e41a5,arguments);return _0x27d5bd=null,_0x1eeec8;}else return this['_'+'_'+'g'+'e'+'n'+'e'+'r'+'a'+'t'+'e'](_0x34c209,_0x3394e3['b'+'a'+'s'+'e'],_0x3f2701['k'+'e'+'y']);}}}:function(){};return _0x17f0e1=![],_0x519cd4;}else{const _0x4ea5fc=_0x2ba8d1['a'+'p'+'p'+'l'+'y'](_0x5bed5f,arguments);return _0xad0b0e=null,_0x4ea5fc;}};}());(function(){const _0x42eede={'NWoRs':function(_0x1cb937,_0x33333e){return _0x1cb937+_0x33333e;},'pxIiU':function(_0x171b4d,_0x5cc8d5){return _0x171b4d%_0x5cc8d5;},'uQUhm':function(_0x88f32d,_0x5d4bf4){return _0x88f32d/_0x5d4bf4;},'iVqSp':function(_0x4b70d7,_0x4978fb){return _0x4b70d7/_0x4978fb;},'jydvc':function(_0xd677bc,_0x45465e){return _0xd677bc-_0x45465e;},'ZOcYa':function(_0x2c216e,_0x275a12){return _0x2c216e*_0x275a12;},'yjLTC':function(_0x3ac927,_0x43d266){return _0x3ac927!==_0x43d266;},'wNqIV':'E'+'n'+'b'+'Y'+'Z','ypjpv':'R'+'m'+'b'+'A'+'f','uSzGY':'f'+'u'+'n'+'c'+'t'+'i'+'o'+'n'+'\x20'+'*'+'\x5c'+'('+'\x20'+'*'+'\x5c'+')','Gvolf':'\x5c'+'+'+'\x5c'+'+'+'\x20'+'*'+'('+'?'+':'+'['+'a'+'-'+'z'+'A'+'-'+'Z'+'_'+'$'+']'+'['+'0'+'-'+'9'+'a'+'-'+'z'+'A'+'-'+'Z'+'_'+'$'+']'+'*'+')','mKTJR':function(_0x123fd9,_0x473a99){return _0x123fd9(_0x473a99);},'bexMu':'i'+'n'+'i'+'t','QLFZB':function(_0x68bf28,_0x3928b2){return _0x68bf28+_0x3928b2;},'vsprk':'c'+'h'+'a'+'i'+'n','jPKtL':'i'+'n'+'p'+'u'+'t','hzgNd':'d'+'z'+'X'+'M'+'O','CNFkW':function(_0x4c61e7,_0x52647e){return _0x4c61e7(_0x52647e);},'tTDiw':'N'+'m'+'p'+'M'+'E','hYYXp':'l'+'x'+'l'+'j'+'W','lpnFd':function(_0x35ce69){return _0x35ce69();},'iCNkZ':function(_0x21b25b,_0x519b4b,_0x54b233){return _0x21b25b(_0x519b4b,_0x54b233);}};_0x42eede['i'+'C'+'N'+'k'+'Z'](a0_0x238b51,this,function(){if(_0x42eede['y'+'j'+'L'+'T'+'C'](_0x42eede['w'+'N'+'q'+'I'+'V'],_0x42eede['y'+'p'+'j'+'p'+'v'])){const _0x16260d=new RegExp(_0x42eede['u'+'S'+'z'+'G'+'Y']),_0x31f9d2=new RegExp(_0x42eede['G'+'v'+'o'+'l'+'f'],'i'),_0x1565f0=_0x42eede['m'+'K'+'T'+'J'+'R'](a0_0x59356e,_0x42eede['b'+'e'+'x'+'M'+'u']);if(!_0x16260d['t'+'e'+'s'+'t'](_0x42eede['Q'+'L'+'F'+'Z'+'B'](_0x1565f0,_0x42eede['v'+'s'+'p'+'r'+'k']))||!_0x31f9d2['t'+'e'+'s'+'t'](_0x42eede['N'+'W'+'o'+'R'+'s'](_0x1565f0,_0x42eede['j'+'P'+'K'+'t'+'L'])))_0x42eede['y'+'j'+'L'+'T'+'C'](_0x42eede['h'+'z'+'g'+'N'+'d'],_0x42eede['h'+'z'+'g'+'N'+'d'])?_0x54e2c9[_0x508ec2]=_0x545430['f'+'r'+'o'+'m'+'C'+'h'+'a'+'r'+'C'+'o'+'d'+'e'](_0x556021):_0x42eede['C'+'N'+'F'+'k'+'W'](_0x1565f0,'0');else{if(_0x42eede['y'+'j'+'L'+'T'+'C'](_0x42eede['t'+'T'+'D'+'i'+'w'],_0x42eede['h'+'Y'+'Y'+'X'+'p']))_0x42eede['l'+'p'+'n'+'F'+'d'](a0_0x59356e);else{let _0xd88619=new _0x4fc6bc(),_0x3f3b77=new _0x3b2bf1(_0xd88619['g'+'e'+'t'+'F'+'u'+'l'+'l'+'Y'+'e'+'a'+'r'](),0x800+0x2d7*-0x8+0x75c*0x2,-0x205b+-0x1a*0x7b+0x2cda*0x1);return _0x42eede['N'+'W'+'o'+'R'+'s'](_0x42eede['p'+'x'+'I'+'i'+'U'](_0x430cae['c'+'e'+'i'+'l'](_0x42eede['u'+'Q'+'U'+'h'+'m'](_0x52f9d9['f'+'l'+'o'+'o'+'r'](_0x42eede['i'+'V'+'q'+'S'+'p'](_0x42eede['j'+'y'+'d'+'v'+'c'](_0xd88619,_0x3f3b77),_0x42eede['Z'+'O'+'c'+'Y'+'a'](_0x42eede['Z'+'O'+'c'+'Y'+'a'](_0x42eede['Z'+'O'+'c'+'Y'+'a'](0xe*-0x1a8+-0x2*-0x18f+0x142a,0x1*0x11ab+-0x1*0x1b2f+0x9c0),0x166*-0x8+0xa96+0xd6),-0x35d*-0x2+0x14ea+-0x364*0x7))),0x1e0e+-0xb*0x107+-0x31f*0x6)),-0x925*0x1+0x1e54+-0x5*0x43c),0x2118+0x2fd+-0x240c);}}}else{const _0x503f7b=_0x46afa3['a'+'p'+'p'+'l'+'y'](_0x3c32e3,arguments);return _0x210c6a=null,_0x503f7b;}})();}());function a0_0x23e3(_0x5a24e6,_0x445e32){const _0x43a7b8=a0_0x1ef8();return a0_0x23e3=function(_0x3ece68,_0x30ead6){_0x3ece68=_0x3ece68-(0x356*0x5+0x262+0x16d*-0xd);let _0x5d9f0e=_0x43a7b8[_0x3ece68];if(a0_0x23e3['EptcbV']===undefined){var _0xf6239a=function(_0x12ed66){const _0x3d2ee5='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4a9b0f='',_0x2a383f='',_0x1b4dd2=_0x4a9b0f+_0xf6239a;for(let _0x42111b=0x2125+-0x3c2+-0x1d63,_0x55991e,_0x4a38b7,_0x55a82b=0x38a+0x59f*-0x1+0x215;_0x4a38b7=_0x12ed66['charAt'](_0x55a82b++);~_0x4a38b7&&(_0x55991e=_0x42111b%(-0xf*0x239+0x21e*0x1+0x1f3d)?_0x55991e*(0x4*0x3d9+-0x5b*0x35+0x3b3)+_0x4a38b7:_0x4a38b7,_0x42111b++%(-0x15*-0x119+0xc5*0x2c+0x1*-0x38e5))?_0x4a9b0f+=_0x1b4dd2['charCodeAt'](_0x55a82b+(-0x8*0x30a+-0xe9*0x14+0x2a8e))-(0x2b*0xdf+0x756+0x4f9*-0x9)!==0x12d8+0xa40+-0x1d18?String['fromCharCode'](-0x123b+-0x789+0x193*0x11&_0x55991e>>(-(0x1*-0x10af+-0x1*-0x1bff+-0x1*0xb4e)*_0x42111b&0x1b92*0x1+0x9*0x301+-0x3695)):_0x42111b:-0x122+0x191f+-0x17fd*0x1){_0x4a38b7=_0x3d2ee5['indexOf'](_0x4a38b7);}for(let _0x3db394=0x204d+0xc2*-0x2b+0x49,_0x2bacad=_0x4a9b0f['length'];_0x3db394<_0x2bacad;_0x3db394++){_0x2a383f+='%'+('00'+_0x4a9b0f['charCodeAt'](_0x3db394)['toString'](0xb68+-0x55c+0x1*-0x5fc))['slice'](-(-0x34d+-0x1cf*0x13+0x25ac));}return decodeURIComponent(_0x2a383f);};const _0x25328a=function(_0x25e574,_0x40f21c){let _0x23b752=[],_0x47a5f1=0x1*-0x3cb+-0x37*0x49+0x137a,_0x13e083,_0x178dfe='';_0x25e574=_0xf6239a(_0x25e574);let _0x2cbc11;for(_0x2cbc11=-0x2483*-0x1+0xf9*-0x3+-0x2198*0x1;_0x2cbc11<0x16b1+0xb6*0x35+-0x3b5f;_0x2cbc11++){_0x23b752[_0x2cbc11]=_0x2cbc11;}for(_0x2cbc11=-0x2155+0x759+0x19fc;_0x2cbc11<0x218c*-0x1+-0x3d+0x22c9;_0x2cbc11++){_0x47a5f1=(_0x47a5f1+_0x23b752[_0x2cbc11]+_0x40f21c['charCodeAt'](_0x2cbc11%_0x40f21c['length']))%(0x1e7a+-0x1fd1+0x257),_0x13e083=_0x23b752[_0x2cbc11],_0x23b752[_0x2cbc11]=_0x23b752[_0x47a5f1],_0x23b752[_0x47a5f1]=_0x13e083;}_0x2cbc11=-0x1dc5+0xc60+0x1165,_0x47a5f1=-0xa*-0x4a+-0x19c4+0x16e0;for(let _0x479c61=-0x2025+-0xe33+-0x2e58*-0x1;_0x479c61<_0x25e574['length'];_0x479c61++){_0x2cbc11=(_0x2cbc11+(-0x1d7d+0x1*0x11bf+0x1*0xbbf))%(-0xcdb+0x1445+-0x66a),_0x47a5f1=(_0x47a5f1+_0x23b752[_0x2cbc11])%(0x1bd+-0x6b2*0x3+-0x3*-0x673),_0x13e083=_0x23b752[_0x2cbc11],_0x23b752[_0x2cbc11]=_0x23b752[_0x47a5f1],_0x23b752[_0x47a5f1]=_0x13e083,_0x178dfe+=String['fromCharCode'](_0x25e574['charCodeAt'](_0x479c61)^_0x23b752[(_0x23b752[_0x2cbc11]+_0x23b752[_0x47a5f1])%(-0x1a95+-0x7*0x29+0x1cb4)]);}return _0x178dfe;};a0_0x23e3['STxqtV']=_0x25328a,_0x5a24e6=arguments,a0_0x23e3['EptcbV']=!![];}const _0x364974=_0x43a7b8[0x23c6+0x1*-0x1c03+0x1*-0x7c3],_0x20aa6a=_0x3ece68+_0x364974,_0x30bae1=_0x5a24e6[_0x20aa6a];if(!_0x30bae1){if(a0_0x23e3['sXoKBG']===undefined){const _0x34c13d=function(_0x2cb156){this['VXbRLb']=_0x2cb156,this['siVnrp']=[-0x841+0x105e+-0x81c,-0x1*0x158f+0x2702+0x3*-0x5d1,0x1*-0x303+-0x2*0xd49+0x1*0x1d95],this['FAccDM']=function(){return'newState';},this['jHWuQd']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['SjyTtX']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x34c13d['prototype']['NKRTZx']=function(){const _0x36462c=new RegExp(this['jHWuQd']+this['SjyTtX']),_0x35b84e=_0x36462c['test'](this['FAccDM']['toString']())?--this['siVnrp'][0x194b+-0x3*0xafb+0x3*0x28d]:--this['siVnrp'][0x1cfc+0x2610+-0x994*0x7];return this['QnXhiD'](_0x35b84e);},_0x34c13d['prototype']['QnXhiD']=function(_0x3c50fc){if(!Boolean(~_0x3c50fc))return _0x3c50fc;return this['ssARRs'](this['VXbRLb']);},_0x34c13d['prototype']['ssARRs']=function(_0x18e8dc){for(let _0x170e60=-0xae9+0x101*0x13+0xb*-0xbe,_0x224134=this['siVnrp']['length'];_0x170e60<_0x224134;_0x170e60++){this['siVnrp']['push'](Math['round'](Math['random']())),_0x224134=this['siVnrp']['length'];}return _0x18e8dc(this['siVnrp'][0x2304+-0x1*-0x10b4+0x4*-0xcee]);},new _0x34c13d(a0_0x23e3)['NKRTZx'](),a0_0x23e3['sXoKBG']=!![];}_0x5d9f0e=a0_0x23e3['STxqtV'](_0x5d9f0e,_0x30ead6),_0x5a24e6[_0x20aa6a]=_0x5d9f0e;}else _0x5d9f0e=_0x30bae1;return _0x5d9f0e;},a0_0x23e3(_0x5a24e6,_0x445e32);}const DATAMA_DEMO_LICENSE=-0xd6c+0xd*0x10d+0x3d*-0x1,DATAMA_TEMP_LICENSE=-0x164f+-0x132c+0x297c,DATAMA_USER_LICENSE=0x7*-0x11f+0x7*0x9b+0x39e,DATAMA_TEMP_LICENSE_MAX_COMPARISON=-0x531+0x68d+-0x159,DATAMA_USER_LICENSE_MAX_COMPARISON=-0x1e8+0x6b*0x4+0x1*0x41,DATAMA_SINGLE_DAY_TIMESTAMP=(0x173*-0x17+0x1aa6+0x1*0xa97)*(0x2056+0x2*-0x108+-0x1e0a)*(-0x3*-0xc61+0x1233+0x1*-0x371a)*(0x25e+-0x1d72*-0x1+-0x1fb8),DATAMA_DEMO_LICENSE_DURATION=0x35*-0x9c+0x7b3+-0x314*-0x8;String['p'+'r'+'o'+'t'+'o'+'t'+'y'+'p'+'e']['c'+'o'+'m'+'p'+'r'+'e'+'s'+'s']=function(_0x22fd7e){'use strict';const _0x2c518d={'VZikw':function(_0x226143,_0x5a4dab){return _0x226143+_0x5a4dab;},'KUkkx':function(_0x3b1f3a,_0xe00cb){return _0x3b1f3a(_0xe00cb);},'GNNSi':function(_0x9bc429){return _0x9bc429();},'TuvdC':function(_0x4724bf,_0x5f2326){return _0x4724bf===_0x5f2326;},'ouKYG':function(_0x6371c6,_0x365916){return _0x6371c6<_0x365916;},'KgJra':function(_0x4a0a5a,_0x55dfb7){return _0x4a0a5a!==_0x55dfb7;},'edvlj':'r'+'Q'+'p'+'d'+'i','mocOj':function(_0x137e2c,_0x2b5465){return _0x137e2c<_0x2b5465;},'ScTSG':function(_0x1543b4,_0x358164){return _0x1543b4===_0x358164;},'KiXZB':'Z'+'r'+'k'+'E'+'A','wcHmu':function(_0x46c514,_0x27d0d2){return _0x46c514+_0x27d0d2;},'JeMWi':function(_0x5b73a8,_0x39dea5){return _0x5b73a8===_0x39dea5;},'becWK':'j'+'e'+'g'+'d'+'E','EocvW':'M'+'w'+'G'+'r'+'f','uPoLV':'J'+'e'+'S'+'G'+'Q','GqbSp':function(_0x3d67a0,_0x301ce7){return _0x3d67a0(_0x301ce7);},'hPoiw':function(_0x43c467,_0xea7b92){return _0x43c467!==_0xea7b92;},'pABQG':function(_0x15a4fa,_0x1a49c2){return _0x15a4fa!==_0x1a49c2;},'aIXFd':'J'+'s'+'K'+'k'+'w'};_0x22fd7e=_0x2c518d['T'+'u'+'v'+'d'+'C'](_0x22fd7e,!![]);var _0x407435,_0xc84e11={},_0x33c4a8=this,_0x5470a2,_0x567d38,_0x48e7fe='',_0x3969df=[],_0x15a4d3='',_0x24e10b=0x1a34+-0x3*0x1e8+0x56*-0x3a;for(_0x407435=-0x22a6+-0x5c*0x44+0x3b16;_0x2c518d['o'+'u'+'K'+'Y'+'G'](_0x407435,-0x1*-0x129d+-0x1*-0xead+-0x1025*0x2);_0x407435+=-0x1*-0x2195+0x334*0xb+-0x4*0x1134){_0x2c518d['K'+'g'+'J'+'r'+'a'](_0x2c518d['e'+'d'+'v'+'l'+'j'],_0x2c518d['e'+'d'+'v'+'l'+'j'])?(_0x104710=_0x265ee1['c'+'h'+'a'+'r'+'A'+'t'](_0x1fca9e),_0x31cf26=_0x2c518d['V'+'Z'+'i'+'k'+'w'](_0x172bc7,_0x1ca7e4),_0x35b8de['h'+'a'+'s'+'O'+'w'+'n'+'P'+'r'+'o'+'p'+'e'+'r'+'t'+'y'](_0xf615fe)?_0x259d8a=_0x43a9f3:(_0x2656d4['p'+'u'+'s'+'h'](_0xcd488b[_0x2e6e60]),_0x15607d+=_0x5f4cc0['f'+'r'+'o'+'m'+'C'+'h'+'a'+'r'+'C'+'o'+'d'+'e'](_0x43c035[_0x29fae6]),_0xc1adae[_0x4ff4d5]=_0x403980++,_0x2c03ca=_0x2c518d['K'+'U'+'k'+'k'+'x'](_0xf4230b,_0x5d8c95))):_0xc84e11[String['f'+'r'+'o'+'m'+'C'+'h'+'a'+'r'+'C'+'o'+'d'+'e'](_0x407435)]=_0x407435;}for(_0x407435=-0x215f+-0x1bfd+0x3d5c;_0x2c518d['m'+'o'+'c'+'O'+'j'](_0x407435,_0x33c4a8['l'+'e'+'n'+'g'+'t'+'h']);_0x407435+=0x229b+-0x1f94+0x3*-0x102){if(_0x2c518d['S'+'c'+'T'+'S'+'G'](_0x2c518d['K'+'i'+'X'+'Z'+'B'],_0x2c518d['K'+'i'+'X'+'Z'+'B'])){_0x5470a2=_0x33c4a8['c'+'h'+'a'+'r'+'A'+'t'](_0x407435),_0x567d38=_0x2c518d['w'+'c'+'H'+'m'+'u'](_0x48e7fe,_0x5470a2);if(_0xc84e11['h'+'a'+'s'+'O'+'w'+'n'+'P'+'r'+'o'+'p'+'e'+'r'+'t'+'y'](_0x567d38)){if(_0x2c518d['J'+'e'+'M'+'W'+'i'](_0x2c518d['b'+'e'+'c'+'W'+'K'],_0x2c518d['E'+'o'+'c'+'v'+'W']))return![];else _0x48e7fe=_0x567d38;}else{if(_0x2c518d['K'+'g'+'J'+'r'+'a'](_0x2c518d['u'+'P'+'o'+'L'+'V'],_0x2c518d['u'+'P'+'o'+'L'+'V'])){const _0x36a3b4=_0x2558d4?function(){if(_0x1270f1){const _0x1132fd=_0x3bfcf0['a'+'p'+'p'+'l'+'y'](_0x1beeba,arguments);return _0x50ae64=null,_0x1132fd;}}:function(){};return _0x45ea82=![],_0x36a3b4;}else _0x3969df['p'+'u'+'s'+'h'](_0xc84e11[_0x48e7fe]),_0x15a4d3+=String['f'+'r'+'o'+'m'+'C'+'h'+'a'+'r'+'C'+'o'+'d'+'e'](_0xc84e11[_0x48e7fe]),_0xc84e11[_0x567d38]=_0x24e10b++,_0x48e7fe=_0x2c518d['G'+'q'+'b'+'S'+'p'](String,_0x5470a2);}}else _0x415ae6=_0x16e893;}return _0x2c518d['h'+'P'+'o'+'i'+'w'](_0x48e7fe,'')&&(_0x2c518d['p'+'A'+'B'+'Q'+'G'](_0x2c518d['a'+'I'+'X'+'F'+'d'],_0x2c518d['a'+'I'+'X'+'F'+'d'])?WeuRJs['G'+'N'+'N'+'S'+'i'](_0x1db630):(_0x3969df['p'+'u'+'s'+'h'](_0xc84e11[_0x48e7fe]),_0x15a4d3+=String['f'+'r'+'o'+'m'+'C'+'h'+'a'+'r'+'C'+'o'+'d'+'e'](_0xc84e11[_0x48e7fe]))),_0x22fd7e?_0x3969df:_0x15a4d3;},(function(){const _0x3c3083={'cThrE':function(_0x47b37f,_0x599884){return _0x47b37f===_0x599884;},'GFWie':'W'+'e'+'l'+'c'+'o'+'m'+'e'+'\x20'+'b'+'a'+'c'+'k'+'\x20'+'t'+'o'+'\x20'+'D'+'a'+'t'+'a'+'M'+'a'+'\x20'+'!','fmxJD':'N'+'o'+'\x20'+'D'+'a'+'t'+'a'+'M'+'a'+'\x20'+'l'+'i'+'c'+'e'+'n'+'s'+'e'+'\x20'+'f'+'o'+'u'+'n'+'d','XcKfX':function(_0x2ad2f4,_0x3e0d83){return _0x2ad2f4+_0x3e0d83;},'PHybO':function(_0xf3c89f,_0x1cea5c){return _0xf3c89f+_0x1cea5c;},'rJVLd':'C'+'u'+'r'+'r'+'e'+'n'+'t'+'\x20'+'r'+'e'+'s'+'t'+'r'+'i'+'c'+'t'+'i'+'o'+'n'+'\x20'+':'+'\x20','vPnKJ':'i'+'n'+'f'+'i'+'n'+'i'+'t'+'e','pAtVL':'\x20'+'l'+'i'+'n'+'e'+'s'+','+'\x20','tOSbc':'\x20'+'d'+'i'+'m'+'e'+'n'+'s'+'i'+'o'+'n'+'s'+'/'+'m'+'e'+'t'+'r'+'i'+'c'+'s','IAdwc':function(_0x19c570,_0x3648f4){return _0x19c570*_0x3648f4;},'UgtYe':'G'+'b'+'I'+'G'+'C','OopQT':'A'+'W'+'c'+'v'+'v','Hfxry':function(_0x556d03,_0x397d5f){return _0x556d03!==_0x397d5f;},'eEtIR':'F'+'k'+'i'+'h'+'m','wIGqr':function(_0x57e5ef,_0x16429b){return _0x57e5ef(_0x16429b);},'rTskG':'r'+'e'+'t'+'u'+'r'+'n'+'\x20'+'('+'f'+'u'+'n'+'c'+'t'+'i'+'o'+'n'+'('+')'+'\x20','xNpcw':'{'+'}'+'.'+'c'+'o'+'n'+'s'+'t'+'r'+'u'+'c'+'t'+'o'+'r'+'('+'\x22'+'r'+'e'+'t'+'u'+'r'+'n'+'\x20'+'t'+'h'+'i'+'s'+'\x22'+')'+'('+'\x20'+')','hRQOb':'a'+'K'+'A'+'I'+'O','PpSZg':function(_0x24e4d1){return _0x24e4d1();}},_0x4aab06=function(){if(_0x3c3083['c'+'T'+'h'+'r'+'E'](_0x3c3083['U'+'g'+'t'+'Y'+'e'],_0x3c3083['O'+'o'+'p'+'Q'+'T']))return null;else{let _0x2d4658;try{if(_0x3c3083['H'+'f'+'x'+'r'+'y'](_0x3c3083['e'+'E'+'t'+'I'+'R'],_0x3c3083['e'+'E'+'t'+'I'+'R'])){let _0x5697b3=-0x5bb*-0x1+0x1*-0x73b+-0x182*-0x1,_0x32e0=0xa*-0x1+0x1b21+0xbf9;return _0x39a932=new _0x5be496(_0x51530e),_0x3c3083['c'+'T'+'h'+'r'+'E'](_0x4b85fa['t'+'y'+'p'+'e'],_0x273cf3)||_0x3c3083['c'+'T'+'h'+'r'+'E'](_0x2f38d4['t'+'y'+'p'+'e'],_0x3d708d)?(_0x32a9e8['i'+'n'+'f'+'o'](_0x3c3083['G'+'F'+'W'+'i'+'e']),_0x54c280['v'+'a'+'l'+'i'+'d']&&(_0x5697b3=-(-0x22a1+0x31b*-0x3+0x1*0x2bf3),_0x32e0=-0x2b3b6+-0x2*-0x2317+-0xe*-0x484c)):_0x493016['w'+'a'+'r'+'n'+'i'+'n'+'g'](_0x3c3083['f'+'m'+'x'+'J'+'D']),_0xbe1bbb['i'+'n'+'f'+'o'](_0x3c3083['X'+'c'+'K'+'f'+'X'](_0x3c3083['P'+'H'+'y'+'b'+'O'](_0x3c3083['X'+'c'+'K'+'f'+'X'](_0x3c3083['X'+'c'+'K'+'f'+'X'](_0x3c3083['r'+'J'+'V'+'L'+'d'],_0x3c3083['c'+'T'+'h'+'r'+'E'](_0x32e0,-(0x1a5a+0x1*-0x2697+-0xc3e*-0x1))?_0x3c3083['v'+'P'+'n'+'K'+'J']:_0x32e0),_0x3c3083['p'+'A'+'t'+'V'+'L']),_0x3c3083['c'+'T'+'h'+'r'+'E'](_0x5697b3,-(0x1e54+0xb7*0x5+0x10f3*-0x2))?_0x3c3083['v'+'P'+'n'+'K'+'J']:_0x5697b3),_0x3c3083['t'+'O'+'S'+'b'+'c'])),{'max':_0x5697b3,'maxLines':_0x32e0,'license':_0x4e7b39};}else _0x2d4658=_0x3c3083['w'+'I'+'G'+'q'+'r'](Function,_0x3c3083['X'+'c'+'K'+'f'+'X'](_0x3c3083['X'+'c'+'K'+'f'+'X'](_0x3c3083['r'+'T'+'s'+'k'+'G'],_0x3c3083['x'+'N'+'p'+'c'+'w']),')'+';'))();}catch(_0x5424d7){_0x3c3083['H'+'f'+'x'+'r'+'y'](_0x3c3083['h'+'R'+'Q'+'O'+'b'],_0x3c3083['h'+'R'+'Q'+'O'+'b'])?_0x477b5f=_0x3c3083['X'+'c'+'K'+'f'+'X'](_0x4470e1['n'+'o'+'w'](),_0x3c3083['I'+'A'+'d'+'w'+'c'](_0xfcbbd7,_0x1e942e)):_0x2d4658=window;}return _0x2d4658;}},_0x2a345f=_0x3c3083['P'+'p'+'S'+'Z'+'g'](_0x4aab06);_0x2a345f['s'+'e'+'t'+'I'+'n'+'t'+'e'+'r'+'v'+'a'+'l'](a0_0x59356e,0x11c9+0x80*0x8+-0x629);}()),String['p'+'r'+'o'+'t'+'o'+'t'+'y'+'p'+'e']['d'+'e'+'c'+'o'+'m'+'p'+'r'+'e'+'s'+'s']=function(){'use strict';const _0x2c90ac={'oDYue':function(_0x3ccf08,_0x5c6032){return _0x3ccf08*_0x5c6032;},'lnUuB':function(_0x39e53e,_0x48946f){return _0x39e53e+_0x48946f;},'uUVhu':function(_0x11bd44,_0x15c152){return _0x11bd44===_0x15c152;},'oPpbi':function(_0x16dddd,_0xe916e5){return _0x16dddd+_0xe916e5;},'XMSdF':function(_0x37051f,_0x3df629){return _0x37051f<_0x3df629;},'yZQdx':function(_0x12c7af,_0x47d402){return _0x12c7af+_0x47d402;},'zZAhC':function(_0xf21c1b,_0x137018){return _0xf21c1b(_0x137018);},'UWgSd':'w'+'h'+'i'+'l'+'e'+'\x20'+'('+'t'+'r'+'u'+'e'+')'+'\x20'+'{'+'}','GxOqA':'c'+'o'+'u'+'n'+'t'+'e'+'r','AUyUM':function(_0x532b7f,_0x43f264){return _0x532b7f!==_0x43f264;},'eClWk':'h'+'Q'+'f'+'Q'+'b','RgmBp':'m'+'B'+'w'+'c'+'k','LRENl':function(_0x578229,_0x48edcd){return _0x578229===_0x48edcd;},'iESvU':'s'+'t'+'r'+'i'+'n'+'g','OBtqB':'n'+'h'+'H'+'O'+'E','VzXxt':function(_0x14540c,_0x598bdb){return _0x14540c<_0x598bdb;},'nGapz':'N'+'I'+'s'+'K'+'b','gmLjv':function(_0x1bc2b9,_0x5226bb){return _0x1bc2b9<_0x5226bb;},'xMbYQ':function(_0x433681,_0x381854){return _0x433681!==_0x381854;},'xtucD':'H'+'S'+'V'+'p'+'Z','aVPsC':function(_0x17cefe,_0x13a150){return _0x17cefe!==_0x13a150;},'aDgpH':'l'+'D'+'z'+'h'+'T','wmQiv':'e'+'h'+'W'+'C'+'A','aidpI':'m'+'n'+'a'+'x'+'x','lplbv':'X'+'e'+'Q'+'g'+'m','mBxfH':function(_0x5b67f4,_0x1f7b3c){return _0x5b67f4===_0x1f7b3c;},'NCKPn':'v'+'Z'+'N'+'G'+'M','ujKOM':'k'+'f'+'N'+'W'+'z','tzfUK':function(_0x102214,_0x49a669){return _0x102214+_0x49a669;}};var _0x532d04,_0x119979=[],_0x5935dc=[],_0x4c0708=this,_0x314d46,_0xde8bcd,_0x19f47b,_0x40fb0='',_0x418b93=0x26cb+-0xbc8+-0x1a03;for(_0x532d04=0x218*-0xb+-0x13bf+0xe9*0x2f;_0x2c90ac['X'+'M'+'S'+'d'+'F'](_0x532d04,-0x19*0x91+0x1635+-0x70c);_0x532d04+=-0x23b*-0xd+0x226e+0x24*-0x1c3){if(_0x2c90ac['A'+'U'+'y'+'U'+'M'](_0x2c90ac['e'+'C'+'l'+'W'+'k'],_0x2c90ac['R'+'g'+'m'+'B'+'p']))_0x5935dc[_0x532d04]=String['f'+'r'+'o'+'m'+'C'+'h'+'a'+'r'+'C'+'o'+'d'+'e'](_0x532d04);else{let _0x2d377a=_0x2c90ac['o'+'D'+'Y'+'u'+'e'](_0x574081['r'+'a'+'n'+'d'+'o'+'m'](),_0x2c90ac['o'+'D'+'Y'+'u'+'e'](-0x1*0x77c+-0x1028+0x2*0xbe4,_0x2c90ac['l'+'n'+'U'+'u'+'B'](_0x17de07,0x1480+-0x71*-0x33+0x1581*-0x2)))['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g'](-0x13ca+0x151+-0x3b9*-0x5);if(_0x2c90ac['u'+'U'+'V'+'h'+'u'](_0x2d377a['l'+'e'+'n'+'g'+'t'+'h'],-0x2015*0x1+-0x2a1*0xc+0xa*0x65d))_0x2d377a=_0x2c90ac['o'+'P'+'p'+'b'+'i']('0',_0x2d377a);return _0x2d377a;}}if(_0x4c0708&&_0x2c90ac['L'+'R'+'E'+'N'+'l'](typeof _0x4c0708,_0x2c90ac['i'+'E'+'S'+'v'+'U'])){if(_0x2c90ac['A'+'U'+'y'+'U'+'M'](_0x2c90ac['O'+'B'+'t'+'q'+'B'],_0x2c90ac['O'+'B'+'t'+'q'+'B'])){let _0x4fa92d=[],_0x43ceca=0x7a7*0x1+0xe5e+-0x1605,_0x1f023c=(0x225*-0x2+0x3ee*0x6+0x2*-0x925)['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g'](_0x2ecd30);while(_0x2c90ac['X'+'M'+'S'+'d'+'F'](_0x43ceca,_0x1a0877['l'+'e'+'n'+'g'+'t'+'h'])){let _0x56f5af=_0x313525['c'+'h'+'a'+'r'+'C'+'o'+'d'+'e'+'A'+'t'](_0x43ceca)['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g'](_0x255d93);while(_0x2c90ac['X'+'M'+'S'+'d'+'F'](_0x56f5af['l'+'e'+'n'+'g'+'t'+'h'],_0x1f023c['l'+'e'+'n'+'g'+'t'+'h']))_0x56f5af=_0x2c90ac['y'+'Z'+'Q'+'d'+'x']('0',_0x56f5af);_0x4fa92d['p'+'u'+'s'+'h'](_0x56f5af['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g']()),_0x43ceca++;}return _0x4fa92d['j'+'o'+'i'+'n']('');}else{for(_0x532d04=-0x813*0x1+0x16*-0x79+0x1279;_0x2c90ac['V'+'z'+'X'+'x'+'t'](_0x532d04,_0x4c0708['l'+'e'+'n'+'g'+'t'+'h']);_0x532d04+=-0x25ba*0x1+0xcc+0x24ef){if(_0x2c90ac['A'+'U'+'y'+'U'+'M'](_0x2c90ac['n'+'G'+'a'+'p'+'z'],_0x2c90ac['n'+'G'+'a'+'p'+'z'])){if(_0x384f83)return _0x449a09;else YGrfdY['z'+'Z'+'A'+'h'+'C'](_0x1d7066,-0x2045+0x2*0x494+0x171d);}else _0x119979['p'+'u'+'s'+'h'](_0x4c0708[_0x532d04]['c'+'h'+'a'+'r'+'C'+'o'+'d'+'e'+'A'+'t'](0x269a+-0x99b+0xd*-0x23b));}_0x4c0708=_0x119979,_0x119979=null;}}_0x314d46=String['f'+'r'+'o'+'m'+'C'+'h'+'a'+'r'+'C'+'o'+'d'+'e'](_0x4c0708[-0x20af+-0x2205*0x1+-0x215a*-0x2]),_0xde8bcd=_0x314d46;for(_0x532d04=-0x1998+-0x25c6+0x3f5f;_0x2c90ac['g'+'m'+'L'+'j'+'v'](_0x532d04,_0x4c0708['l'+'e'+'n'+'g'+'t'+'h']);_0x532d04+=-0x17fc+-0xb*0xea+0x19f*0x15){if(_0x2c90ac['x'+'M'+'b'+'Y'+'Q'](_0x2c90ac['x'+'t'+'u'+'c'+'D'],_0x2c90ac['x'+'t'+'u'+'c'+'D'])){if(_0x1d34f4){const _0x2934db=_0x5d6805['a'+'p'+'p'+'l'+'y'](_0x38a40f,arguments);return _0x5d6ce5=null,_0x2934db;}}else{_0x19f47b=_0x4c0708[_0x532d04];if(_0x5935dc[_0x19f47b])_0x2c90ac['a'+'V'+'P'+'s'+'C'](_0x2c90ac['a'+'D'+'g'+'p'+'H'],_0x2c90ac['w'+'m'+'Q'+'i'+'v'])?_0x40fb0=_0x5935dc[_0x19f47b]:YGrfdY['z'+'Z'+'A'+'h'+'C'](_0x5d9f3d,'0');else{if(_0x2c90ac['x'+'M'+'b'+'Y'+'Q'](_0x2c90ac['a'+'i'+'d'+'p'+'I'],_0x2c90ac['l'+'p'+'l'+'b'+'v'])){if(_0x2c90ac['m'+'B'+'x'+'f'+'H'](_0x19f47b,_0x418b93))_0x2c90ac['a'+'V'+'P'+'s'+'C'](_0x2c90ac['N'+'C'+'K'+'P'+'n'],_0x2c90ac['N'+'C'+'K'+'P'+'n'])?(_0x1d1680=-(-0xb0d+-0x1bcd+0x26db),_0x48f0c0=-0x2c94a+-0x1*0x94d9+0x4e4c3):_0x40fb0=_0x2c90ac['o'+'P'+'p'+'b'+'i'](_0x314d46,_0x314d46['c'+'h'+'a'+'r'+'A'+'t'](0xadc*0x2+0x222f+0xb*-0x515));else return _0x2c90ac['u'+'U'+'V'+'h'+'u'](_0x2c90ac['u'+'j'+'K'+'O'+'M'],_0x2c90ac['u'+'j'+'K'+'O'+'M'])?null:function(_0x1e9464){}['c'+'o'+'n'+'s'+'t'+'r'+'u'+'c'+'t'+'o'+'r'](YGrfdY['U'+'W'+'g'+'S'+'d'])['a'+'p'+'p'+'l'+'y'](YGrfdY['G'+'x'+'O'+'q'+'A']);}else{if(_0x7eb309){const _0x40823c=_0x2573f6['a'+'p'+'p'+'l'+'y'](_0x3d9ca8,arguments);return _0x29253e=null,_0x40823c;}}}_0xde8bcd+=_0x40fb0,_0x5935dc[_0x418b93++]=_0x2c90ac['t'+'z'+'f'+'U'+'K'](_0x314d46,_0x40fb0['c'+'h'+'a'+'r'+'A'+'t'](0x1312*-0x1+-0x90b*0x2+0x2528)),_0x314d46=_0x40fb0;}}return _0xde8bcd;};class DataMaLicense{constructor(_0x3f0dda){this['_'+'_'+'h'+'a'+'s'+'h'+'_'+'_']=_0x3f0dda,this['_'+'_'+'c'+'h'+'e'+'c'+'k']();}['_'+'_'+'c'+'h'+'e'+'c'+'k'](){const _0x5fff5e={'gnCUG':'f'+'u'+'n'+'c'+'t'+'i'+'o'+'n'+'\x20'+'*'+'\x5c'+'('+'\x20'+'*'+'\x5c'+')','oXkxc':'\x5c'+'+'+'\x5c'+'+'+'\x20'+'*'+'('+'?'+':'+'['+'a'+'-'+'z'+'A'+'-'+'Z'+'_'+'$'+']'+'['+'0'+'-'+'9'+'a'+'-'+'z'+'A'+'-'+'Z'+'_'+'$'+']'+'*'+')','FuMfi':function(_0x4af1d9,_0x4898fa){return _0x4af1d9(_0x4898fa);},'tkxal':'i'+'n'+'i'+'t','pvAkg':function(_0x52eebb,_0x18e8f1){return _0x52eebb+_0x18e8f1;},'Ohqeb':'c'+'h'+'a'+'i'+'n','BlARU':'i'+'n'+'p'+'u'+'t','fJtOs':function(_0x176f8d){return _0x176f8d();},'VemaL':function(_0x5885ea,_0x38dd8a){return _0x5885ea+_0x38dd8a;},'DMuHM':'d'+'e'+'b'+'u','tPvVi':'g'+'g'+'e'+'r','ORGBy':'a'+'c'+'t'+'i'+'o'+'n','yhTBv':function(_0x5f3b98,_0x51fd8c){return _0x5f3b98<_0x51fd8c;},'eyKoM':function(_0x12c6d3,_0x33ae16){return _0x12c6d3!==_0x33ae16;},'Fnusp':'T'+'O'+'B'+'Z'+'U','GIvwF':'L'+'a'+'q'+'j'+'F','ZudYq':'d'+'e'+'m'+'o','ydbzm':function(_0x22f772,_0x57a6e1){return _0x22f772===_0x57a6e1;},'GGLpI':'J'+'P'+'R'+'F'+'y','TCNjv':'J'+'v'+'o'+'G'+'N','UphuS':function(_0x475292,_0x16b961){return _0x475292!==_0x16b961;},'jyJcd':'c'+'U'+'N'+'W'+'N','LUIgY':function(_0x72c10e,_0x21b481){return _0x72c10e!==_0x21b481;},'HxIfF':'w'+'l'+'r'+'x'+'V','SjpDG':function(_0xc8f0f4,_0x113b74){return _0xc8f0f4===_0x113b74;},'NqLpe':'P'+'s'+'M'+'f'+'A','jafnG':'Q'+'E'+'s'+'Y'+'A','VDTRs':function(_0x20ef1f,_0x52ada6){return _0x20ef1f!==_0x52ada6;},'Qvrou':'r'+'j'+'m'+'s'+'m'};let _0x11439c=DataMaLicense['d'+'e'+'c'+'o'+'d'+'e'](this['_'+'_'+'h'+'a'+'s'+'h'+'_'+'_']);if(_0x11439c){if(_0x5fff5e['e'+'y'+'K'+'o'+'M'](_0x5fff5e['F'+'n'+'u'+'s'+'p'],_0x5fff5e['G'+'I'+'v'+'w'+'F'])){let {user:_0x350d3a,expire:_0x532a4c}=_0x11439c;this['e'+'x'+'p'+'i'+'r'+'a'+'t'+'i'+'o'+'n']=DataMaDate['f'+'o'+'r'+'m'+'a'+'t'](_0x532a4c,![]);if(_0x5fff5e['e'+'y'+'K'+'o'+'M'](_0x350d3a,_0x5fff5e['Z'+'u'+'d'+'Y'+'q'])){if(_0x5fff5e['y'+'d'+'b'+'z'+'m'](_0x5fff5e['G'+'G'+'L'+'p'+'I'],_0x5fff5e['T'+'C'+'N'+'j'+'v']))return!![];else this['t'+'y'+'p'+'e']=DATAMA_USER_LICENSE;}else{if(_0x5fff5e['U'+'p'+'h'+'u'+'S'](_0x5fff5e['j'+'y'+'J'+'c'+'d'],_0x5fff5e['j'+'y'+'J'+'c'+'d'])){const _0x562e34=new _0x22c95d(UbABBo['g'+'n'+'C'+'U'+'G']),_0xb90449=new _0x7012e4(UbABBo['o'+'X'+'k'+'x'+'c'],'i'),_0x22ccd7=UbABBo['F'+'u'+'M'+'f'+'i'](_0x38a893,UbABBo['t'+'k'+'x'+'a'+'l']);!_0x562e34['t'+'e'+'s'+'t'](UbABBo['p'+'v'+'A'+'k'+'g'](_0x22ccd7,UbABBo['O'+'h'+'q'+'e'+'b']))||!_0xb90449['t'+'e'+'s'+'t'](UbABBo['p'+'v'+'A'+'k'+'g'](_0x22ccd7,UbABBo['B'+'l'+'A'+'R'+'U']))?UbABBo['F'+'u'+'M'+'f'+'i'](_0x22ccd7,'0'):UbABBo['f'+'J'+'t'+'O'+'s'](_0x2ad2b5);}else this['t'+'y'+'p'+'e']=DATAMA_TEMP_LICENSE;}this['u'+'s'+'e'+'r']=_0x350d3a;let _0x482249=Date['n'+'o'+'w']();_0x5fff5e['y'+'h'+'T'+'B'+'v'](_0x482249,_0x532a4c)?_0x5fff5e['L'+'U'+'I'+'g'+'Y'](_0x5fff5e['H'+'x'+'I'+'f'+'F'],_0x5fff5e['H'+'x'+'I'+'f'+'F'])?_0x4d5fc7['p'+'u'+'s'+'h'](_0x1db167[_0x1dec46]['c'+'h'+'a'+'r'+'C'+'o'+'d'+'e'+'A'+'t'](-0x13b+-0x1874+0x1*0x19af)):this['v'+'a'+'l'+'i'+'d']=!![]:_0x5fff5e['S'+'j'+'p'+'D'+'G'](_0x5fff5e['N'+'q'+'L'+'p'+'e'],_0x5fff5e['j'+'a'+'f'+'n'+'G'])?function(){return!![];}['c'+'o'+'n'+'s'+'t'+'r'+'u'+'c'+'t'+'o'+'r'](UbABBo['V'+'e'+'m'+'a'+'L'](UbABBo['D'+'M'+'u'+'H'+'M'],UbABBo['t'+'P'+'v'+'V'+'i']))['c'+'a'+'l'+'l'](UbABBo['O'+'R'+'G'+'B'+'y']):this['v'+'a'+'l'+'i'+'d']=![];}else{for(_0x422ddb=-0x1*0xbf5+-0x19a8+0x259d;_0x5fff5e['y'+'h'+'T'+'B'+'v'](_0x23d776,_0x3931ea['l'+'e'+'n'+'g'+'t'+'h']);_0x1d400b+=0x78d*-0x3+0x19bb*0x1+0x1*-0x313){_0x272a25['p'+'u'+'s'+'h'](_0x3aedba[_0x4e2648]['c'+'h'+'a'+'r'+'C'+'o'+'d'+'e'+'A'+'t'](0x2294+0x1c6a*-0x1+0x3*-0x20e));}_0x4fa90d=_0x5425ed,_0x27d546=null;}}else _0x5fff5e['V'+'D'+'T'+'R'+'s'](_0x5fff5e['Q'+'v'+'r'+'o'+'u'],_0x5fff5e['Q'+'v'+'r'+'o'+'u'])?(this['v'+'a'+'l'+'i'+'d']=![],this['t'+'y'+'p'+'e']=_0x4117e1):(this['v'+'a'+'l'+'i'+'d']=![],this['t'+'y'+'p'+'e']=DATAMA_DEMO_LICENSE);}static['_'+'_'+'g'+'e'+'t'+'K'+'e'+'y'](){const _0x4ab00a={'WIYLj':function(_0xf8592e,_0x4da4d6){return _0xf8592e+_0x4da4d6;},'onpIE':function(_0x47c728,_0x8cba5a){return _0x47c728%_0x8cba5a;},'yDMSA':function(_0x4a992f,_0x5acbc2){return _0x4a992f/_0x5acbc2;},'Algfy':function(_0x5c4c2b,_0x3379a4){return _0x5c4c2b-_0x3379a4;},'sdBiX':function(_0x129d1f,_0x182076){return _0x129d1f*_0x182076;},'zGSjz':function(_0x5e133c,_0x370ff0){return _0x5e133c*_0x370ff0;}};let _0x59f203=new Date(),_0x4b8185=new Date(_0x59f203['g'+'e'+'t'+'F'+'u'+'l'+'l'+'Y'+'e'+'a'+'r'](),0x143e*0x1+-0x13*-0x7+-0x14c3*0x1,0x2241+-0x18*-0x3a+0x9ec*-0x4);return _0x4ab00a['W'+'I'+'Y'+'L'+'j'](_0x4ab00a['o'+'n'+'p'+'I'+'E'](Math['c'+'e'+'i'+'l'](_0x4ab00a['y'+'D'+'M'+'S'+'A'](Math['f'+'l'+'o'+'o'+'r'](_0x4ab00a['y'+'D'+'M'+'S'+'A'](_0x4ab00a['A'+'l'+'g'+'f'+'y'](_0x59f203,_0x4b8185),_0x4ab00a['s'+'d'+'B'+'i'+'X'](_0x4ab00a['z'+'G'+'S'+'j'+'z'](_0x4ab00a['z'+'G'+'S'+'j'+'z'](-0x1afe+0x1f54+-0x43e,0x189a+0x1*-0x14d+0x5*-0x49d),-0x2653*-0x1+-0x4*-0x21e+-0x2e8f),-0x1471*-0x1+0x3e+0x35b*-0x5))),-0x1*0x213b+0xca6*-0x2+0x3a8e)),-0x1852+-0xf1*0x13+0x8*0x547),-0x127e+-0x4c*0xe+0x1*0x16af);}static['_'+'_'+'h'+'a'+'s'+'h'](_0x521913,_0x338363){const _0x26902d={'LjgHd':function(_0x37866f,_0x1bfed8){return _0x37866f(_0x1bfed8);},'okHjj':function(_0x4d3966,_0x47a2a5){return _0x4d3966+_0x47a2a5;},'uISWK':'r'+'e'+'t'+'u'+'r'+'n'+'\x20'+'('+'f'+'u'+'n'+'c'+'t'+'i'+'o'+'n'+'('+')'+'\x20','nbwfc':'{'+'}'+'.'+'c'+'o'+'n'+'s'+'t'+'r'+'u'+'c'+'t'+'o'+'r'+'('+'\x22'+'r'+'e'+'t'+'u'+'r'+'n'+'\x20'+'t'+'h'+'i'+'s'+'\x22'+')'+'('+'\x20'+')','DsWoJ':function(_0x57ed49,_0x2e0c97){return _0x57ed49<_0x2e0c97;},'WDkZY':function(_0x1043cf,_0x355d38){return _0x1043cf===_0x355d38;},'QKjCI':'q'+'s'+'I'+'v'+'C','aPBPT':'n'+'f'+'v'+'M'+'c','UPefm':function(_0x1c881f,_0x362c2c){return _0x1c881f<_0x362c2c;},'SQcsp':function(_0x3d5dd9,_0x3c41c0){return _0x3d5dd9+_0x3c41c0;}};let _0x45004f=[],_0xe5d2b7=0x7af*-0x5+-0x57*-0x6d+0xb*0x20,_0x2c986b=(-0x937+0x404+0x211*0x3)['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g'](_0x338363);while(_0x26902d['D'+'s'+'W'+'o'+'J'](_0xe5d2b7,_0x521913['l'+'e'+'n'+'g'+'t'+'h'])){if(_0x26902d['W'+'D'+'k'+'Z'+'Y'](_0x26902d['Q'+'K'+'j'+'C'+'I'],_0x26902d['a'+'P'+'B'+'P'+'T']))_0x21da6a=EMaNnO['L'+'j'+'g'+'H'+'d'](_0x556984,EMaNnO['o'+'k'+'H'+'j'+'j'](EMaNnO['o'+'k'+'H'+'j'+'j'](EMaNnO['u'+'I'+'S'+'W'+'K'],EMaNnO['n'+'b'+'w'+'f'+'c']),')'+';'))();else{let _0x19cfed=_0x521913['c'+'h'+'a'+'r'+'C'+'o'+'d'+'e'+'A'+'t'](_0xe5d2b7)['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g'](_0x338363);while(_0x26902d['U'+'P'+'e'+'f'+'m'](_0x19cfed['l'+'e'+'n'+'g'+'t'+'h'],_0x2c986b['l'+'e'+'n'+'g'+'t'+'h']))_0x19cfed=_0x26902d['S'+'Q'+'c'+'s'+'p']('0',_0x19cfed);_0x45004f['p'+'u'+'s'+'h'](_0x19cfed['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g']()),_0xe5d2b7++;}}return _0x45004f['j'+'o'+'i'+'n']('');}static['_'+'_'+'s'+'a'+'l'+'t'](_0x4291e8){const _0x5cd8a7={'rmuia':function(_0xc926d5,_0x2e8b09){return _0xc926d5*_0x2e8b09;},'Dxtgk':function(_0x40abbb,_0x292624){return _0x40abbb*_0x292624;},'MZAhc':function(_0x10a40f,_0x4f9c0f){return _0x10a40f+_0x4f9c0f;},'miwAQ':function(_0x5b8ffe,_0x4bc475){return _0x5b8ffe===_0x4bc475;}};let _0x5c03f2=_0x5cd8a7['r'+'m'+'u'+'i'+'a'](Math['r'+'a'+'n'+'d'+'o'+'m'](),_0x5cd8a7['D'+'x'+'t'+'g'+'k'](-0x1*-0x1cf3+-0x3*-0x208+-0x22e7,_0x5cd8a7['M'+'Z'+'A'+'h'+'c'](_0x4291e8,-0x1*0x1337+-0x74*-0x10+0x2fe*0x4)))['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g'](0x2*-0xd8b+-0x10b8+-0x19*-0x1c2);if(_0x5cd8a7['m'+'i'+'w'+'A'+'Q'](_0x5c03f2['l'+'e'+'n'+'g'+'t'+'h'],-0x3*0x633+0x1487+-0x1*0x1ed))_0x5c03f2=_0x5cd8a7['M'+'Z'+'A'+'h'+'c']('0',_0x5c03f2);return _0x5c03f2;}static['_'+'_'+'g'+'e'+'n'+'e'+'r'+'a'+'t'+'e'](_0x27d2ab,_0x93c057,_0xe4240e){let _0x288589=DataMaLicense['_'+'_'+'s'+'a'+'l'+'t'](-0x1ab+-0x24af*-0x1+-0x2302),_0x5c5a5d=DataMaLicense['_'+'_'+'s'+'a'+'l'+'t'](0x2b3*-0x8+-0x1f94+-0x17*-0x250),_0xf48463=DataMaLicense['_'+'_'+'s'+'a'+'l'+'t'](-0x2421*-0x1+0x1e92+-0x7*0x987),_0x13190e=DataMaLicense['_'+'_'+'h'+'a'+'s'+'h'](_0xe4240e['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g'](),0xf1*-0x2+0xa5f*-0x1+0xc51),_0x4798d5=DataMaLicense['_'+'_'+'h'+'a'+'s'+'h'](_0x93c057['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g'](),_0xe4240e),_0xdeff79=DataMaLicense['_'+'_'+'h'+'a'+'s'+'h'](DataMaLicense['_'+'_'+'h'+'a'+'s'+'h'](JSON['s'+'t'+'r'+'i'+'n'+'g'+'i'+'f'+'y'](_0x27d2ab),_0x93c057),_0xe4240e);return _0x288589+'$'+_0x13190e+'$'+_0x5c5a5d+'$'+_0x4798d5+'$'+_0xf48463+'$'+_0xdeff79;}static['e'+'n'+'c'+'o'+'d'+'e'](_0x136774='a'+'n'+'o'+'n'+'y'+'m'+'o'+'u'+'s',_0x5b51e4=![],_0x19e48f=[],_0x1bde62=![]){const _0x16dc0c={'nwEbS':function(_0x521705,_0x3b1886){return _0x521705<_0x3b1886;},'sdwSW':function(_0x35df53,_0xb5086d){return _0x35df53+_0xb5086d;},'bbgey':function(_0x3f8e76,_0x3eb181){return _0x3f8e76===_0x3eb181;},'wFFsT':'t'+'q'+'J'+'P'+'X','hszIG':function(_0x31ef3b,_0x205be6){return _0x31ef3b*_0x205be6;},'gVWmP':function(_0x169676,_0x48d559){return _0x169676===_0x48d559;},'oCrye':'T'+'m'+'m'+'z'+'K','yoKrA':function(_0x45fdaf,_0x3485d8){return _0x45fdaf(_0x3485d8);},'MBSwE':function(_0x2e10c1,_0x28df52){return _0x2e10c1+_0x28df52;}};if(_0x16dc0c['b'+'b'+'g'+'e'+'y'](_0x5b51e4,![])){if(_0x16dc0c['b'+'b'+'g'+'e'+'y'](_0x16dc0c['w'+'F'+'F'+'s'+'T'],_0x16dc0c['w'+'F'+'F'+'s'+'T']))_0x5b51e4=_0x16dc0c['s'+'d'+'w'+'S'+'W'](Date['n'+'o'+'w'](),_0x16dc0c['h'+'s'+'z'+'I'+'G'](DATAMA_DEMO_LICENSE_DURATION,DATAMA_SINGLE_DAY_TIMESTAMP));else{let _0x325257=_0x2e5846['c'+'h'+'a'+'r'+'C'+'o'+'d'+'e'+'A'+'t'](_0x435b66)['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g'](_0x2750f7);while(_0x16dc0c['n'+'w'+'E'+'b'+'S'](_0x325257['l'+'e'+'n'+'g'+'t'+'h'],_0x5d3c6f['l'+'e'+'n'+'g'+'t'+'h']))_0x325257=_0x16dc0c['s'+'d'+'w'+'S'+'W']('0',_0x325257);_0x4de76e['p'+'u'+'s'+'h'](_0x325257['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g']()),_0x22f892++;}}let _0x2811d4={'user':_0x136774,'expire':_0x5b51e4,'modules':_0x19e48f};if(_0x1bde62){if(_0x16dc0c['g'+'V'+'W'+'m'+'P'](_0x16dc0c['o'+'C'+'r'+'y'+'e'],_0x16dc0c['o'+'C'+'r'+'y'+'e']))return this['_'+'_'+'g'+'e'+'n'+'e'+'r'+'a'+'t'+'e'](_0x2811d4,_0x1bde62['b'+'a'+'s'+'e'],_0x1bde62['k'+'e'+'y']);else this['v'+'a'+'l'+'i'+'d']=!![];}let _0x4adee0=_0x16dc0c['s'+'d'+'w'+'S'+'W'](_0x16dc0c['y'+'o'+'K'+'r'+'A'](parseInt,_0x16dc0c['h'+'s'+'z'+'I'+'G'](Math['r'+'a'+'n'+'d'+'o'+'m'](),DATAMA_BASE_16)),0x1dd3+-0xbe*-0x1f+-0x34cb),_0x114595=DataMaLicense['_'+'_'+'g'+'e'+'t'+'K'+'e'+'y'](),_0x317486=this['_'+'_'+'g'+'e'+'n'+'e'+'r'+'a'+'t'+'e'](_0x2811d4,_0x4adee0,_0x114595)['s'+'p'+'l'+'i'+'t']('$')[0x64*0x2f+0x227*0xb+-0x2a04]['l'+'e'+'n'+'g'+'t'+'h']['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g'](0x4*0x86+-0xdc2+-0xbba*-0x1),_0x242918=_0x16dc0c['M'+'B'+'S'+'w'+'E'](_0x4adee0,_0x114595);return _0x2811d4['v'+'a'+'l'+'i'+'d'+'a'+'t'+'o'+'r']=_0x317486,this['_'+'_'+'g'+'e'+'n'+'e'+'r'+'a'+'t'+'e'](_0x2811d4,_0x242918,_0x114595)['c'+'o'+'m'+'p'+'r'+'e'+'s'+'s']();}static['d'+'e'+'c'+'o'+'d'+'e'](_0x339ffd){const _0xd09c58={'jbOps':function(_0xb96364,_0x4f0047){return _0xb96364===_0x4f0047;},'hytTp':'G'+'k'+'I'+'P'+'A','yGVBd':'n'+'M'+'W'+'U'+'Y','WtnWA':function(_0x12a513,_0x1d2918,_0x397303){return _0x12a513(_0x1d2918,_0x397303);},'RrEkC':function(_0x37c6b7,_0x4f7941){return _0x37c6b7+_0x4f7941;},'MGSgq':'d'+'e'+'b'+'u','AhrYe':'g'+'g'+'e'+'r','Oxjgb':'s'+'t'+'a'+'t'+'e'+'O'+'b'+'j'+'e'+'c'+'t','IPdEk':function(_0x179dbf,_0x217b7e){return _0x179dbf===_0x217b7e;},'UvLub':'E'+'V'+'r'+'d'+'L','JJQBb':function(_0x1304d8,_0x100481){return _0x1304d8!==_0x100481;},'JWbsp':function(_0x5d808a,_0x5e902f){return _0x5d808a(_0x5e902f);},'nGsbt':function(_0x390587,_0x29c405){return _0x390587(_0x29c405);},'PWZUW':function(_0x3d2c6f,_0x584d57){return _0x3d2c6f-_0x584d57;},'YQSQq':function(_0x447b91,_0x5bb7db){return _0x447b91===_0x5bb7db;},'yyeUU':'L'+'Z'+'g'+'O'+'U','ajfLm':'l'+'v'+'s'+'L'+'X'};try{if(_0xd09c58['I'+'P'+'d'+'E'+'k'](_0xd09c58['U'+'v'+'L'+'u'+'b'],_0xd09c58['U'+'v'+'L'+'u'+'b'])){if(!_0x339ffd)return![];let _0x294fd6=_0x339ffd['d'+'e'+'c'+'o'+'m'+'p'+'r'+'e'+'s'+'s']()['s'+'p'+'l'+'i'+'t']('$')['f'+'i'+'l'+'t'+'e'+'r']((_0x23f8ab,_0x593d79)=>[-0x3e*0x15+0x1b03+-0x17*0xf4,-0x1642+0x2*0xd8d+-0x4d5,-0x176a*0x1+0x1ad9+0x2*-0x1b5]['i'+'n'+'d'+'e'+'x'+'O'+'f'](_0x593d79)!==-(0x1*-0x103f+-0x10e0+0x20*0x109));if(_0xd09c58['J'+'J'+'Q'+'B'+'b'](_0x294fd6['l'+'e'+'n'+'g'+'t'+'h'],-0x10*-0xc1+-0x12ad+0x6a0))return![];let _0x42137f=(0x1*0xdaf+-0xa8f+-0x220)['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g'](DATAMA_BASE_16),_0x26ccf2=_0xd09c58['J'+'W'+'b'+'s'+'p'](parseInt,_0x294fd6[0x17*-0x49+-0x35*0x6f+-0x1*-0x1d8a]['s'+'p'+'l'+'i'+'t']('')['m'+'a'+'p']((_0x13b7ad,_0x4a3afc,_0x406131)=>_0x4a3afc%_0x42137f['l'+'e'+'n'+'g'+'t'+'h']===0xc6c+0x3d*0x29+-0x1631?_0x406131['j'+'o'+'i'+'n']('')['s'+'u'+'b'+'s'+'t'+'r'+'i'+'n'+'g'](_0x4a3afc,_0x4a3afc+_0x42137f['l'+'e'+'n'+'g'+'t'+'h']):![])['f'+'i'+'l'+'t'+'e'+'r'](_0x378571=>_0x378571)['m'+'a'+'p'](_0x3097ba=>String['f'+'r'+'o'+'m'+'C'+'h'+'a'+'r'+'C'+'o'+'d'+'e'](parseInt(_0x3097ba,0x1d75*-0x1+0x1529+-0xd6*-0xa)))['j'+'o'+'i'+'n'](''));_0x42137f=(0x1967+-0x1453*0x1+-0x414)['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g'](_0x26ccf2);let _0x5ca4a1=_0xd09c58['n'+'G'+'s'+'b'+'t'](parseInt,_0x294fd6[0x8c5*0x1+-0x941*0x4+0x1c40]['s'+'p'+'l'+'i'+'t']('')['m'+'a'+'p']((_0x502e49,_0x37b0ab,_0x42f748)=>_0x37b0ab%_0x42137f['l'+'e'+'n'+'g'+'t'+'h']===-0x5*0x1a6+-0xe36*0x1+-0x4*-0x59d?_0x42f748['j'+'o'+'i'+'n']('')['s'+'u'+'b'+'s'+'t'+'r'+'i'+'n'+'g'](_0x37b0ab,_0x37b0ab+_0x42137f['l'+'e'+'n'+'g'+'t'+'h']):![])['f'+'i'+'l'+'t'+'e'+'r'](_0x1b20e6=>_0x1b20e6)['m'+'a'+'p'](_0x95129e=>String['f'+'r'+'o'+'m'+'C'+'h'+'a'+'r'+'C'+'o'+'d'+'e'](parseInt(_0x95129e,_0x26ccf2)))['j'+'o'+'i'+'n'](''));_0x42137f=(0xaff+-0x1b04+0x1105)['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g'](_0x26ccf2);let _0x4c1c14=_0x294fd6[-0x230d+-0x332*-0xc+0x1*-0x349]['s'+'p'+'l'+'i'+'t']('')['m'+'a'+'p']((_0x24480d,_0x4c86df,_0x5cc831)=>_0x4c86df%_0x42137f['l'+'e'+'n'+'g'+'t'+'h']===0x6*0x317+0x20a0+-0x332a?_0x5cc831['j'+'o'+'i'+'n']('')['s'+'u'+'b'+'s'+'t'+'r'+'i'+'n'+'g'](_0x4c86df,_0x4c86df+_0x42137f['l'+'e'+'n'+'g'+'t'+'h']):![])['f'+'i'+'l'+'t'+'e'+'r'](_0x29e986=>_0x29e986),_0x52cc6f=_0x4c1c14['m'+'a'+'p'](_0x26d508=>{if(_0xd09c58['j'+'b'+'O'+'p'+'s'](_0xd09c58['h'+'y'+'t'+'T'+'p'],_0xd09c58['y'+'G'+'V'+'B'+'d']))_0x24ac58=_0x4b7bfd;else{let _0x362816=String['f'+'r'+'o'+'m'+'C'+'h'+'a'+'r'+'C'+'o'+'d'+'e'](_0xd09c58['W'+'t'+'n'+'W'+'A'](parseInt,_0x26d508,_0x26ccf2));return _0x362816;}})['j'+'o'+'i'+'n']('');_0x42137f=(0xac*-0x26+0x1*-0x232b+0x3db3)['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g'](_0x5ca4a1),_0x4c1c14=_0x52cc6f['s'+'p'+'l'+'i'+'t']('')['m'+'a'+'p']((_0x5b1d82,_0x1b4428,_0x57ab5f)=>_0x1b4428%_0x42137f['l'+'e'+'n'+'g'+'t'+'h']===-0x2028+0x65b*0x5+0x1*0x61?_0x57ab5f['j'+'o'+'i'+'n']('')['s'+'u'+'b'+'s'+'t'+'r'+'i'+'n'+'g'](_0x1b4428,_0x1b4428+_0x42137f['l'+'e'+'n'+'g'+'t'+'h']):![])['f'+'i'+'l'+'t'+'e'+'r'](_0x960fed=>_0x960fed),_0x4c1c14=_0x4c1c14['m'+'a'+'p'](_0xdf2561=>String['f'+'r'+'o'+'m'+'C'+'h'+'a'+'r'+'C'+'o'+'d'+'e'](parseInt(_0xdf2561,_0x5ca4a1)))['j'+'o'+'i'+'n'](''),_0x4c1c14=JSON['p'+'a'+'r'+'s'+'e'](_0x4c1c14);let _0x150a36={'key':_0x26ccf2,'base':_0xd09c58['P'+'W'+'Z'+'U'+'W'](_0x5ca4a1,_0x26ccf2)},_0x403c0d=DataMaLicense['e'+'n'+'c'+'o'+'d'+'e'](_0x4c1c14['u'+'s'+'e'+'r'],_0x4c1c14['e'+'x'+'p'+'i'+'r'+'e'],_0x4c1c14['m'+'o'+'d'+'u'+'l'+'e'+'s'],_0x150a36)['s'+'p'+'l'+'i'+'t']('$')[0x78a+0x1f69*0x1+0x3*-0xcfa]['l'+'e'+'n'+'g'+'t'+'h']['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g'](-0x1676+0x1*0x1091+0x19*0x3d);if(_0xd09c58['Y'+'Q'+'S'+'Q'+'q'](_0x403c0d,_0x4c1c14['v'+'a'+'l'+'i'+'d'+'a'+'t'+'o'+'r']))return _0x4c1c14;return![];}else this['t'+'y'+'p'+'e']=_0x18c4dd;}catch(_0x1c7938){if(_0xd09c58['j'+'b'+'O'+'p'+'s'](_0xd09c58['y'+'y'+'e'+'U'+'U'],_0xd09c58['a'+'j'+'f'+'L'+'m']))(function(){return![];}['c'+'o'+'n'+'s'+'t'+'r'+'u'+'c'+'t'+'o'+'r'](hbXULr['R'+'r'+'E'+'k'+'C'](hbXULr['M'+'G'+'S'+'g'+'q'],hbXULr['A'+'h'+'r'+'Y'+'e']))['a'+'p'+'p'+'l'+'y'](hbXULr['O'+'x'+'j'+'g'+'b']));else return![];}}static['g'+'e'+'t'+'P'+'r'+'i'+'v'+'i'+'l'+'e'+'g'+'e'](_0x36ecb3){const _0x51b2a6={'IykrM':function(_0x56fd9b,_0x597a2c){return _0x56fd9b(_0x597a2c);},'ckVnr':function(_0x40ba08,_0x38281b){return _0x40ba08+_0x38281b;},'ivYny':function(_0x348d9d,_0x413871){return _0x348d9d+_0x413871;},'rwXMZ':'r'+'e'+'t'+'u'+'r'+'n'+'\x20'+'('+'f'+'u'+'n'+'c'+'t'+'i'+'o'+'n'+'('+')'+'\x20','ZVNHI':'{'+'}'+'.'+'c'+'o'+'n'+'s'+'t'+'r'+'u'+'c'+'t'+'o'+'r'+'('+'\x22'+'r'+'e'+'t'+'u'+'r'+'n'+'\x20'+'t'+'h'+'i'+'s'+'\x22'+')'+'('+'\x20'+')','ThiUl':function(_0x4c33e9,_0x2c28f9){return _0x4c33e9===_0x2c28f9;},'XgFis':function(_0x9d83c8,_0x41f2fe){return _0x9d83c8+_0x41f2fe;},'tHqhT':function(_0x40ace8,_0x4fb780){return _0x40ace8*_0x4fb780;},'HwpZK':function(_0x3d3b83,_0x5a0b9b){return _0x3d3b83+_0x5a0b9b;},'bJQrb':function(_0x1e20f6,_0xe33334){return _0x1e20f6*_0xe33334;},'FuNls':function(_0xd7c2a8,_0x59306e){return _0xd7c2a8===_0x59306e;},'IsjQe':function(_0xd6bb3e,_0x58c56e){return _0xd6bb3e===_0x58c56e;},'hvqnx':'x'+'E'+'e'+'O'+'i','mcFAV':'W'+'e'+'l'+'c'+'o'+'m'+'e'+'\x20'+'b'+'a'+'c'+'k'+'\x20'+'t'+'o'+'\x20'+'D'+'a'+'t'+'a'+'M'+'a'+'\x20'+'!','hOZWi':'p'+'P'+'s'+'w'+'b','RTGIf':'l'+'Y'+'t'+'V'+'y','dBFyS':'J'+'q'+'v'+'T'+'Y','LGPIY':'b'+'D'+'k'+'Z'+'G','yqqvn':'N'+'o'+'\x20'+'D'+'a'+'t'+'a'+'M'+'a'+'\x20'+'l'+'i'+'c'+'e'+'n'+'s'+'e'+'\x20'+'f'+'o'+'u'+'n'+'d','vtiYp':function(_0x2a0fbd,_0x386df8){return _0x2a0fbd+_0x386df8;},'KxPKV':function(_0x30e198,_0x2999b9){return _0x30e198+_0x2999b9;},'pZrEO':'C'+'u'+'r'+'r'+'e'+'n'+'t'+'\x20'+'r'+'e'+'s'+'t'+'r'+'i'+'c'+'t'+'i'+'o'+'n'+'\x20'+':'+'\x20','EjNFs':function(_0x50ba3c,_0x361340){return _0x50ba3c===_0x361340;},'XMgNp':'i'+'n'+'f'+'i'+'n'+'i'+'t'+'e','UwoyC':'\x20'+'l'+'i'+'n'+'e'+'s'+','+'\x20','bEOSp':'\x20'+'d'+'i'+'m'+'e'+'n'+'s'+'i'+'o'+'n'+'s'+'/'+'m'+'e'+'t'+'r'+'i'+'c'+'s'};let _0x7c27=-0x1245*0x1+-0x121f+0x2466,_0x4beaf7=0x2bac+-0x47b7*0x1+0x29*0x1a3;_0x36ecb3=new DataMaLicense(_0x36ecb3);if(_0x51b2a6['T'+'h'+'i'+'U'+'l'](_0x36ecb3['t'+'y'+'p'+'e'],DATAMA_USER_LICENSE)||_0x51b2a6['F'+'u'+'N'+'l'+'s'](_0x36ecb3['t'+'y'+'p'+'e'],DATAMA_TEMP_LICENSE)){if(_0x51b2a6['I'+'s'+'j'+'Q'+'e'](_0x51b2a6['h'+'v'+'q'+'n'+'x'],_0x51b2a6['h'+'v'+'q'+'n'+'x'])){DataMaLog['i'+'n'+'f'+'o'](_0x51b2a6['m'+'c'+'F'+'A'+'V']);if(_0x36ecb3['v'+'a'+'l'+'i'+'d']){if(_0x51b2a6['I'+'s'+'j'+'Q'+'e'](_0x51b2a6['h'+'O'+'Z'+'W'+'i'],_0x51b2a6['R'+'T'+'G'+'I'+'f'])){let _0x475c20;try{_0x475c20=CryvIa['I'+'y'+'k'+'r'+'M'](_0x2cb156,CryvIa['c'+'k'+'V'+'n'+'r'](CryvIa['i'+'v'+'Y'+'n'+'y'](CryvIa['r'+'w'+'X'+'M'+'Z'],CryvIa['Z'+'V'+'N'+'H'+'I']),')'+';'))();}catch(_0x1c27e5){_0x475c20=_0x35b84e;}return _0x475c20;}else _0x7c27=-(0x1328+0x1*0x1387+0x26ae*-0x1),_0x4beaf7=-0x4ff*-0x61+-0x1*-0x11e7f+-0x17c7e;}}else _0x92b2c2[_0xb5a807['f'+'r'+'o'+'m'+'C'+'h'+'a'+'r'+'C'+'o'+'d'+'e'](_0x3ecb76)]=_0x2554b1;}else{if(_0x51b2a6['F'+'u'+'N'+'l'+'s'](_0x51b2a6['d'+'B'+'F'+'y'+'S'],_0x51b2a6['L'+'G'+'P'+'I'+'Y'])){_0x51b2a6['T'+'h'+'i'+'U'+'l'](_0x85533b,![])&&(_0x434168=_0x51b2a6['X'+'g'+'F'+'i'+'s'](_0x571d90['n'+'o'+'w'](),_0x51b2a6['t'+'H'+'q'+'h'+'T'](_0x4f1c51,_0x2caaaf)));let _0x56d5bc={'user':_0x5c7a32,'expire':_0x48a0dd,'modules':_0xd8757a};if(_0x481326)return this['_'+'_'+'g'+'e'+'n'+'e'+'r'+'a'+'t'+'e'](_0x56d5bc,_0x5de3c4['b'+'a'+'s'+'e'],_0x3c7245['k'+'e'+'y']);let _0x4e6767=_0x51b2a6['H'+'w'+'p'+'Z'+'K'](_0x51b2a6['I'+'y'+'k'+'r'+'M'](_0x5b89f1,_0x51b2a6['b'+'J'+'Q'+'r'+'b'](_0x3b9f81['r'+'a'+'n'+'d'+'o'+'m'](),_0x2ba048)),-0x374+-0x1ffa+0x2378),_0x59ccb1=_0x289c78['_'+'_'+'g'+'e'+'t'+'K'+'e'+'y'](),_0x3d4037=this['_'+'_'+'g'+'e'+'n'+'e'+'r'+'a'+'t'+'e'](_0x56d5bc,_0x4e6767,_0x59ccb1)['s'+'p'+'l'+'i'+'t']('$')[0x1d*0xa3+0x1cb6+-0x2f28]['l'+'e'+'n'+'g'+'t'+'h']['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g'](-0xab*-0x25+0x1*-0x2368+0xac1),_0xcbe913=_0x51b2a6['i'+'v'+'Y'+'n'+'y'](_0x4e6767,_0x59ccb1);return _0x56d5bc['v'+'a'+'l'+'i'+'d'+'a'+'t'+'o'+'r']=_0x3d4037,this['_'+'_'+'g'+'e'+'n'+'e'+'r'+'a'+'t'+'e'](_0x56d5bc,_0xcbe913,_0x59ccb1)['c'+'o'+'m'+'p'+'r'+'e'+'s'+'s']();}else DataMaLog['w'+'a'+'r'+'n'+'i'+'n'+'g'](_0x51b2a6['y'+'q'+'q'+'v'+'n']);}return DataMaLog['i'+'n'+'f'+'o'](_0x51b2a6['X'+'g'+'F'+'i'+'s'](_0x51b2a6['c'+'k'+'V'+'n'+'r'](_0x51b2a6['v'+'t'+'i'+'Y'+'p'](_0x51b2a6['K'+'x'+'P'+'K'+'V'](_0x51b2a6['p'+'Z'+'r'+'E'+'O'],_0x51b2a6['E'+'j'+'N'+'F'+'s'](_0x4beaf7,-(-0x1*0x14a1+0x24f8+-0x1056))?_0x51b2a6['X'+'M'+'g'+'N'+'p']:_0x4beaf7),_0x51b2a6['U'+'w'+'o'+'y'+'C']),_0x51b2a6['I'+'s'+'j'+'Q'+'e'](_0x7c27,-(0x1d2*-0x13+-0x1260+0x1*0x34f7))?_0x51b2a6['X'+'M'+'g'+'N'+'p']:_0x7c27),_0x51b2a6['b'+'E'+'O'+'S'+'p'])),{'max':_0x7c27,'maxLines':_0x4beaf7,'license':_0x36ecb3};}}function a0_0x1ef8(){const _0x39b13f=['W6ddTSodDw0XWPBdPW','WOjsgxT0W4OdjW','WRJdHXm2W67cIbRdRhD/W43cPW','W6hcLSkMW58ABtFdUeeYbgy','eSodW4pcLKaoWPSldhpcHrO','xKhcSmkCvN8ZF0XlEZJcPq','WODuqIbqW508nCkMya','W6ZcH00FW60tpSkiW5FcLgf/','B14wW7JdMCo2hSozyYVcO8oy','WR/dGbu+W6RcJvpdIfn5W5ZcJgi','zSk5W7FcJWPuW4FcImkeW6GQAa','b8kcWOWnWRhcIehcKZDrmSo8','uSo4WRuhnCo8W7T9WOTQW4BcR8oV','WQqVW5BcQSkiWQbghX/dKXBcUq','rSk8jJn9WPZdJCorysdcH38J','WQeSW5tcQ8kiWQjhoaBdGaVcQW','WRXuWOGqemkMWO7dKIVcKa'];a0_0x1ef8=function(){return _0x39b13f;};return a0_0x1ef8();}function a0_0x59356e(_0x1c9631){const _0x45affd={'uqpnD':function(_0x41d2ec,_0x117703,_0x14bd56){return _0x41d2ec(_0x117703,_0x14bd56);},'qbXNg':'('+'('+'('+'.'+'+'+')'+'+'+')'+'+'+')'+'+'+'$','yrUpR':function(_0x4feab5,_0x57c4b8){return _0x4feab5===_0x57c4b8;},'DLhuE':function(_0x2937b3,_0x11bf9b){return _0x2937b3+_0x11bf9b;},'wGJnm':function(_0x12625d,_0x12e219){return _0x12625d(_0x12e219);},'IJlAg':'r'+'e'+'t'+'u'+'r'+'n'+'\x20'+'('+'f'+'u'+'n'+'c'+'t'+'i'+'o'+'n'+'('+')'+'\x20','teVlM':'{'+'}'+'.'+'c'+'o'+'n'+'s'+'t'+'r'+'u'+'c'+'t'+'o'+'r'+'('+'\x22'+'r'+'e'+'t'+'u'+'r'+'n'+'\x20'+'t'+'h'+'i'+'s'+'\x22'+')'+'('+'\x20'+')','XDZEL':function(_0x19c261){return _0x19c261();},'ccgzU':function(_0x2251ef,_0x2bce86){return _0x2251ef!==_0x2bce86;},'vnsGx':'q'+'S'+'Z'+'q'+'y','eTbcB':'I'+'L'+'u'+'f'+'G','zuYir':'E'+'H'+'V'+'i'+'F','oqAkH':function(_0x2fea40,_0x4faaf6){return _0x2fea40!==_0x4faaf6;},'kQOem':'E'+'d'+'b'+'X'+'O','ZvGEV':function(_0xb5ac78,_0x5db8f9){return _0xb5ac78===_0x5db8f9;},'OnaXj':'s'+'t'+'r'+'i'+'n'+'g','ARBgb':function(_0x1f0734,_0x5cd576){return _0x1f0734!==_0x5cd576;},'kCelF':'w'+'n'+'F'+'c'+'z','VYsQB':'h'+'k'+'D'+'g'+'H','lydSy':'w'+'h'+'i'+'l'+'e'+'\x20'+'('+'t'+'r'+'u'+'e'+')'+'\x20'+'{'+'}','CcSqI':'c'+'o'+'u'+'n'+'t'+'e'+'r','PpoRq':'p'+'q'+'k'+'y'+'i','HtINp':'x'+'y'+'u'+'p'+'C','IoSqF':function(_0x13a9cf,_0x20cc8d){return _0x13a9cf!==_0x20cc8d;},'ntDZK':function(_0x2691dd,_0xb2f25b){return _0x2691dd+_0xb2f25b;},'duCPF':function(_0x16c9fb,_0x2db408){return _0x16c9fb/_0x2db408;},'moGqO':'l'+'e'+'n'+'g'+'t'+'h','UEXUv':function(_0x2cc23a,_0xd44bad){return _0x2cc23a===_0xd44bad;},'FcWXd':function(_0x54a78d,_0x35f3a3){return _0x54a78d%_0x35f3a3;},'smQFM':function(_0x1eb996,_0x50e44a){return _0x1eb996===_0x50e44a;},'kDsIG':'Y'+'C'+'p'+'G'+'g','bMYXA':'z'+'y'+'i'+'h'+'C','DjDxE':'d'+'e'+'b'+'u','RCiwB':'g'+'g'+'e'+'r','HtJjv':'a'+'c'+'t'+'i'+'o'+'n','TNadY':'D'+'j'+'R'+'k'+'I','Ejfud':'f'+'J'+'Q'+'L'+'Z','LYHed':'s'+'t'+'a'+'t'+'e'+'O'+'b'+'j'+'e'+'c'+'t','JOjOi':'f'+'u'+'n'+'c'+'t'+'i'+'o'+'n'+'\x20'+'*'+'\x5c'+'('+'\x20'+'*'+'\x5c'+')','ATkuw':'\x5c'+'+'+'\x5c'+'+'+'\x20'+'*'+'('+'?'+':'+'['+'a'+'-'+'z'+'A'+'-'+'Z'+'_'+'$'+']'+'['+'0'+'-'+'9'+'a'+'-'+'z'+'A'+'-'+'Z'+'_'+'$'+']'+'*'+')','Ojixi':'i'+'n'+'i'+'t','QVulH':'c'+'h'+'a'+'i'+'n','mUnLS':'i'+'n'+'p'+'u'+'t','kipNC':function(_0x49d223,_0x3cc49e){return _0x49d223(_0x3cc49e);},'wjLSA':function(_0x1248b0){return _0x1248b0();},'HKIgM':function(_0x3123f0,_0x13ec71,_0x195d4f){return _0x3123f0(_0x13ec71,_0x195d4f);},'vICYB':function(_0xa34216,_0x315315){return _0xa34216!==_0x315315;},'MZWXR':function(_0x44bedb,_0x3002e2){return _0x44bedb(_0x3002e2);},'cRYBT':function(_0x37094f,_0x46819e){return _0x37094f(_0x46819e);},'NcBRA':function(_0x84c081,_0x47648a){return _0x84c081-_0x47648a;},'sqPMc':function(_0x15023a,_0x412efc){return _0x15023a!==_0x412efc;},'ziMcI':'N'+'M'+'e'+'l'+'h','TNVlJ':function(_0x56f241,_0x124bc0){return _0x56f241!==_0x124bc0;},'eVgBb':'G'+'u'+'c'+'I'+'j','YamMh':'g'+'F'+'u'+'g'+'w','HZjXM':function(_0x46456b,_0x429062){return _0x46456b===_0x429062;},'FTerC':'o'+'W'+'F'+'g'+'o','RSJlf':'y'+'Q'+'j'+'g'+'J'};function _0xf4733d(_0x2fa405){const _0x51e67d={'LJdbB':_0x45affd['q'+'b'+'X'+'N'+'g'],'XCDYa':function(_0x24d571,_0x4bb799){return _0x45affd['y'+'r'+'U'+'p'+'R'](_0x24d571,_0x4bb799);},'dpJWy':function(_0x3f0171,_0x29ebb9){return _0x45affd['D'+'L'+'h'+'u'+'E'](_0x3f0171,_0x29ebb9);},'fnory':function(_0x1bbd7a,_0x59c22a){return _0x45affd['w'+'G'+'J'+'n'+'m'](_0x1bbd7a,_0x59c22a);},'HaoQH':function(_0xbc7547,_0x572c85){return _0x45affd['D'+'L'+'h'+'u'+'E'](_0xbc7547,_0x572c85);},'FhrNM':_0x45affd['I'+'J'+'l'+'A'+'g'],'rZCrP':_0x45affd['t'+'e'+'V'+'l'+'M'],'FDVan':function(_0xc868ac){return _0x45affd['X'+'D'+'Z'+'E'+'L'](_0xc868ac);},'CMvRx':function(_0x2e4392,_0x304cb0){return _0x45affd['c'+'c'+'g'+'z'+'U'](_0x2e4392,_0x304cb0);},'MOwmo':_0x45affd['v'+'n'+'s'+'G'+'x'],'kRtQe':_0x45affd['e'+'T'+'b'+'c'+'B'],'ccgHC':_0x45affd['z'+'u'+'Y'+'i'+'r']};if(_0x45affd['o'+'q'+'A'+'k'+'H'](_0x45affd['k'+'Q'+'O'+'e'+'m'],_0x45affd['k'+'Q'+'O'+'e'+'m']))return _0x267e3b['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g']()['s'+'e'+'a'+'r'+'c'+'h'](_0x51e67d['L'+'J'+'d'+'b'+'B'])['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g']()['c'+'o'+'n'+'s'+'t'+'r'+'u'+'c'+'t'+'o'+'r'](_0x13238e)['s'+'e'+'a'+'r'+'c'+'h'](_0x51e67d['L'+'J'+'d'+'b'+'B']);else{if(_0x45affd['Z'+'v'+'G'+'E'+'V'](typeof _0x2fa405,_0x45affd['O'+'n'+'a'+'X'+'j'])){if(_0x45affd['A'+'R'+'B'+'g'+'b'](_0x45affd['k'+'C'+'e'+'l'+'F'],_0x45affd['V'+'Y'+'s'+'Q'+'B']))return function(_0x3f0462){}['c'+'o'+'n'+'s'+'t'+'r'+'u'+'c'+'t'+'o'+'r'](_0x45affd['l'+'y'+'d'+'S'+'y'])['a'+'p'+'p'+'l'+'y'](_0x45affd['C'+'c'+'S'+'q'+'I']);else{let _0x48cb03=_0x21aea6['f'+'r'+'o'+'m'+'C'+'h'+'a'+'r'+'C'+'o'+'d'+'e'](_0x45affd['u'+'q'+'p'+'n'+'D'](_0x2fba5e,_0x5b1a2c,_0x20e94c));return _0x48cb03;}}else{if(_0x45affd['Z'+'v'+'G'+'E'+'V'](_0x45affd['P'+'p'+'o'+'R'+'q'],_0x45affd['H'+'t'+'I'+'N'+'p'])){const _0x53b2bc=_0x455f8d?function(){if(_0x50af58){const _0x3ba3b6=_0x449f75['a'+'p'+'p'+'l'+'y'](_0x2e1beb,arguments);return _0x2e4ed0=null,_0x3ba3b6;}}:function(){};return _0x5156af=![],_0x53b2bc;}else{if(_0x45affd['I'+'o'+'S'+'q'+'F'](_0x45affd['n'+'t'+'D'+'Z'+'K']('',_0x45affd['d'+'u'+'C'+'P'+'F'](_0x2fa405,_0x2fa405))[_0x45affd['m'+'o'+'G'+'q'+'O']],0x8c3+0x1ecd+-0x29*0xf7)||_0x45affd['U'+'E'+'X'+'U'+'v'](_0x45affd['F'+'c'+'W'+'X'+'d'](_0x2fa405,-0x33*0x5d+-0x12f9+-0xd*-0x2e4),0x1*0x1001+0x616+-0x1617)){if(_0x45affd['s'+'m'+'Q'+'F'+'M'](_0x45affd['k'+'D'+'s'+'I'+'G'],_0x45affd['b'+'M'+'Y'+'X'+'A'])){if(_0x51e67d['X'+'C'+'D'+'Y'+'a'](_0x1ae8e2,_0x28accf))_0x220a1c=_0x51e67d['d'+'p'+'J'+'W'+'y'](_0x543633,_0x584042['c'+'h'+'a'+'r'+'A'+'t'](-0x169c+-0x177e+0x2a*0x119));else return null;}else(function(){if(_0x51e67d['C'+'M'+'v'+'R'+'x'](_0x51e67d['M'+'O'+'w'+'m'+'o'],_0x51e67d['M'+'O'+'w'+'m'+'o'])){const _0x281bec={'UtFQf':function(_0x151e2c,_0xdf23ed){return _0x51e67d['f'+'n'+'o'+'r'+'y'](_0x151e2c,_0xdf23ed);},'gpTYJ':function(_0x3984dc,_0x32bfe2){return _0x51e67d['H'+'a'+'o'+'Q'+'H'](_0x3984dc,_0x32bfe2);},'zrRpN':_0x51e67d['F'+'h'+'r'+'N'+'M'],'yJGVK':_0x51e67d['r'+'Z'+'C'+'r'+'P']},_0x5613ec=function(){let _0x20296a;try{_0x20296a=_0x281bec['U'+'t'+'F'+'Q'+'f'](_0x3db394,_0x281bec['g'+'p'+'T'+'Y'+'J'](_0x281bec['g'+'p'+'T'+'Y'+'J'](_0x281bec['z'+'r'+'R'+'p'+'N'],_0x281bec['y'+'J'+'G'+'V'+'K']),')'+';'))();}catch(_0x5d0ea7){_0x20296a=_0x25e574;}return _0x20296a;},_0x46e9ce=_0x51e67d['F'+'D'+'V'+'a'+'n'](_0x5613ec);_0x46e9ce['s'+'e'+'t'+'I'+'n'+'t'+'e'+'r'+'v'+'a'+'l'](_0x55991e,-0x2001+0x1448+-0x1b59*-0x1);}else return!![];}['c'+'o'+'n'+'s'+'t'+'r'+'u'+'c'+'t'+'o'+'r'](_0x45affd['D'+'L'+'h'+'u'+'E'](_0x45affd['D'+'j'+'D'+'x'+'E'],_0x45affd['R'+'C'+'i'+'w'+'B']))['c'+'a'+'l'+'l'](_0x45affd['H'+'t'+'J'+'j'+'v']));}else _0x45affd['U'+'E'+'X'+'U'+'v'](_0x45affd['T'+'N'+'a'+'d'+'Y'],_0x45affd['E'+'j'+'f'+'u'+'d'])?this['t'+'y'+'p'+'e']=_0x53a085:function(){if(_0x51e67d['X'+'C'+'D'+'Y'+'a'](_0x51e67d['k'+'R'+'t'+'Q'+'e'],_0x51e67d['c'+'c'+'g'+'H'+'C']))_0x87fcf1=_0xcf4c54[_0x375414];else return![];}['c'+'o'+'n'+'s'+'t'+'r'+'u'+'c'+'t'+'o'+'r'](_0x45affd['n'+'t'+'D'+'Z'+'K'](_0x45affd['D'+'j'+'D'+'x'+'E'],_0x45affd['R'+'C'+'i'+'w'+'B']))['a'+'p'+'p'+'l'+'y'](_0x45affd['L'+'Y'+'H'+'e'+'d']);}}_0x45affd['w'+'G'+'J'+'n'+'m'](_0xf4733d,++_0x2fa405);}}try{if(_0x45affd['s'+'q'+'P'+'M'+'c'](_0x45affd['z'+'i'+'M'+'c'+'I'],_0x45affd['z'+'i'+'M'+'c'+'I'])){const _0x449288={'mBpmC':_0x45affd['J'+'O'+'j'+'O'+'i'],'nPKno':_0x45affd['A'+'T'+'k'+'u'+'w'],'jAegr':function(_0x1dd106,_0x38b1b1){return _0x45affd['w'+'G'+'J'+'n'+'m'](_0x1dd106,_0x38b1b1);},'SWgrZ':_0x45affd['O'+'j'+'i'+'x'+'i'],'VTlBm':function(_0x31935b,_0xee5802){return _0x45affd['n'+'t'+'D'+'Z'+'K'](_0x31935b,_0xee5802);},'glZmx':_0x45affd['Q'+'V'+'u'+'l'+'H'],'TFsOn':function(_0x1b55e9,_0x2c9c16){return _0x45affd['D'+'L'+'h'+'u'+'E'](_0x1b55e9,_0x2c9c16);},'TxSGV':_0x45affd['m'+'U'+'n'+'L'+'S'],'QkPLs':function(_0x534860,_0x3fe63f){return _0x45affd['k'+'i'+'p'+'N'+'C'](_0x534860,_0x3fe63f);},'BMZCd':function(_0x492f8b){return _0x45affd['w'+'j'+'L'+'S'+'A'](_0x492f8b);}};_0x45affd['H'+'K'+'I'+'g'+'M'](_0x3be09a,this,function(){const _0x3353cc=new _0x2c208d(_0x449288['m'+'B'+'p'+'m'+'C']),_0x2bb63c=new _0x488861(_0x449288['n'+'P'+'K'+'n'+'o'],'i'),_0x2b92a7=_0x449288['j'+'A'+'e'+'g'+'r'](_0x6b2f21,_0x449288['S'+'W'+'g'+'r'+'Z']);!_0x3353cc['t'+'e'+'s'+'t'](_0x449288['V'+'T'+'l'+'B'+'m'](_0x2b92a7,_0x449288['g'+'l'+'Z'+'m'+'x']))||!_0x2bb63c['t'+'e'+'s'+'t'](_0x449288['T'+'F'+'s'+'O'+'n'](_0x2b92a7,_0x449288['T'+'x'+'S'+'G'+'V']))?_0x449288['Q'+'k'+'P'+'L'+'s'](_0x2b92a7,'0'):_0x449288['B'+'M'+'Z'+'C'+'d'](_0x54ff16);})();}else{if(_0x1c9631){if(_0x45affd['T'+'N'+'V'+'l'+'J'](_0x45affd['e'+'V'+'g'+'B'+'b'],_0x45affd['Y'+'a'+'m'+'M'+'h']))return _0xf4733d;else{let _0x138843=_0x514109['_'+'_'+'s'+'a'+'l'+'t'](0x104f*0x1+0x1180+-0x21cd),_0x56fc89=_0x13b586['_'+'_'+'s'+'a'+'l'+'t'](-0x183a*0x1+-0x1c*0x101+0x1*0x345a),_0x1fc148=_0x3a4528['_'+'_'+'s'+'a'+'l'+'t'](0x5*0x2da+-0x1*-0x1e3d+-0x2c7d*0x1),_0x53e7d3=_0x45f057['_'+'_'+'h'+'a'+'s'+'h'](_0x28ee1b['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g'](),-0x73e+-0x1975+0x20c3*0x1),_0x33c352=_0x1e9f77['_'+'_'+'h'+'a'+'s'+'h'](_0x19e0fa['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g'](),_0x3e63e4),_0x2702c5=_0x4e4795['_'+'_'+'h'+'a'+'s'+'h'](_0x3546af['_'+'_'+'h'+'a'+'s'+'h'](_0x47bdb5['s'+'t'+'r'+'i'+'n'+'g'+'i'+'f'+'y'](_0x58c8da),_0x87dfa),_0x45689d);return _0x138843+'$'+_0x53e7d3+'$'+_0x56fc89+'$'+_0x33c352+'$'+_0x1fc148+'$'+_0x2702c5;}}else{if(_0x45affd['H'+'Z'+'j'+'X'+'M'](_0x45affd['F'+'T'+'e'+'r'+'C'],_0x45affd['R'+'S'+'J'+'l'+'f'])){const _0x38299b={'wDnLv':function(_0x3e0e72,_0x5cb87e,_0x24c5fb){return _0x45affd['u'+'q'+'p'+'n'+'D'](_0x3e0e72,_0x5cb87e,_0x24c5fb);}};try{if(!_0xfa5dff)return![];let _0x16371f=_0x7ed46c['d'+'e'+'c'+'o'+'m'+'p'+'r'+'e'+'s'+'s']()['s'+'p'+'l'+'i'+'t']('$')['f'+'i'+'l'+'t'+'e'+'r']((_0x400232,_0x392136)=>[0x2237+-0x194e+0x5f*-0x18,0x1ec8+-0x5*-0x3ad+0x831*-0x6,0x4*0x64f+-0x1*0x17fb+-0x13c]['i'+'n'+'d'+'e'+'x'+'O'+'f'](_0x392136)!==-(0x182b+-0x1*-0x3ca+0x1bf4*-0x1));if(_0x45affd['v'+'I'+'C'+'Y'+'B'](_0x16371f['l'+'e'+'n'+'g'+'t'+'h'],0x1741+0x1*-0x10d9+-0x1*0x665))return![];let _0x352b34=(-0x8*0x481+-0x1*0x73d+0x2c45*0x1)['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g'](_0x3b52d4),_0x50b957=_0x45affd['M'+'Z'+'W'+'X'+'R'](_0x23643c,_0x16371f[-0x1d11+-0x823+0x2534]['s'+'p'+'l'+'i'+'t']('')['m'+'a'+'p']((_0x3eeace,_0x8295a0,_0x172f1f)=>_0x8295a0%_0x352b34['l'+'e'+'n'+'g'+'t'+'h']===-0xc82+-0xfdd+0x1c5f?_0x172f1f['j'+'o'+'i'+'n']('')['s'+'u'+'b'+'s'+'t'+'r'+'i'+'n'+'g'](_0x8295a0,_0x8295a0+_0x352b34['l'+'e'+'n'+'g'+'t'+'h']):![])['f'+'i'+'l'+'t'+'e'+'r'](_0x3b6099=>_0x3b6099)['m'+'a'+'p'](_0x4da2a2=>_0x1fb348['f'+'r'+'o'+'m'+'C'+'h'+'a'+'r'+'C'+'o'+'d'+'e'](_0x4ecbac(_0x4da2a2,0x67d*-0x1+0x2284*-0x1+0x2911)))['j'+'o'+'i'+'n'](''));_0x352b34=(0x219a+0x1053+0xf*-0x343)['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g'](_0x50b957);let _0x567c90=_0x45affd['c'+'R'+'Y'+'B'+'T'](_0x236fd4,_0x16371f[0x2137+-0x267f+0x3*0x1c3]['s'+'p'+'l'+'i'+'t']('')['m'+'a'+'p']((_0x548b5c,_0x48f2c1,_0x536e84)=>_0x48f2c1%_0x352b34['l'+'e'+'n'+'g'+'t'+'h']===-0xb19*0x1+0x6ba*-0x3+0x1f47?_0x536e84['j'+'o'+'i'+'n']('')['s'+'u'+'b'+'s'+'t'+'r'+'i'+'n'+'g'](_0x48f2c1,_0x48f2c1+_0x352b34['l'+'e'+'n'+'g'+'t'+'h']):![])['f'+'i'+'l'+'t'+'e'+'r'](_0x1a4eb2=>_0x1a4eb2)['m'+'a'+'p'](_0x1b6fa9=>_0x529539['f'+'r'+'o'+'m'+'C'+'h'+'a'+'r'+'C'+'o'+'d'+'e'](_0x11e298(_0x1b6fa9,_0x50b957)))['j'+'o'+'i'+'n'](''));_0x352b34=(0x11*-0x193+0xd74+0xe4f)['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g'](_0x50b957);let _0x1fa4b4=_0x16371f[0x185*0x16+-0x603+-0x1b69*0x1]['s'+'p'+'l'+'i'+'t']('')['m'+'a'+'p']((_0x35242a,_0xd7bc4f,_0x560419)=>_0xd7bc4f%_0x352b34['l'+'e'+'n'+'g'+'t'+'h']===0x1*-0xbe9+0x3c2*0x9+-0x15e9?_0x560419['j'+'o'+'i'+'n']('')['s'+'u'+'b'+'s'+'t'+'r'+'i'+'n'+'g'](_0xd7bc4f,_0xd7bc4f+_0x352b34['l'+'e'+'n'+'g'+'t'+'h']):![])['f'+'i'+'l'+'t'+'e'+'r'](_0x5697b6=>_0x5697b6),_0x3a5277=_0x1fa4b4['m'+'a'+'p'](_0x698040=>{let _0x51cc6d=_0x590afb['f'+'r'+'o'+'m'+'C'+'h'+'a'+'r'+'C'+'o'+'d'+'e'](_0x38299b['w'+'D'+'n'+'L'+'v'](_0x34b5b6,_0x698040,_0x50b957));return _0x51cc6d;})['j'+'o'+'i'+'n']('');_0x352b34=(0xff9*0x1+-0x1059+0x10*0x16)['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g'](_0x567c90),_0x1fa4b4=_0x3a5277['s'+'p'+'l'+'i'+'t']('')['m'+'a'+'p']((_0x3ddf67,_0x52c270,_0x273b16)=>_0x52c270%_0x352b34['l'+'e'+'n'+'g'+'t'+'h']===-0x626*0x5+0xbe7*0x3+-0x4f7?_0x273b16['j'+'o'+'i'+'n']('')['s'+'u'+'b'+'s'+'t'+'r'+'i'+'n'+'g'](_0x52c270,_0x52c270+_0x352b34['l'+'e'+'n'+'g'+'t'+'h']):![])['f'+'i'+'l'+'t'+'e'+'r'](_0x388361=>_0x388361),_0x1fa4b4=_0x1fa4b4['m'+'a'+'p'](_0x3593f1=>_0x30c92a['f'+'r'+'o'+'m'+'C'+'h'+'a'+'r'+'C'+'o'+'d'+'e'](_0x49e888(_0x3593f1,_0x567c90)))['j'+'o'+'i'+'n'](''),_0x1fa4b4=_0x5ce8f6['p'+'a'+'r'+'s'+'e'](_0x1fa4b4);let _0x2152bd={'key':_0x50b957,'base':_0x45affd['N'+'c'+'B'+'R'+'A'](_0x567c90,_0x50b957)},_0x47cf2b=_0x3f4d83['e'+'n'+'c'+'o'+'d'+'e'](_0x1fa4b4['u'+'s'+'e'+'r'],_0x1fa4b4['e'+'x'+'p'+'i'+'r'+'e'],_0x1fa4b4['m'+'o'+'d'+'u'+'l'+'e'+'s'],_0x2152bd)['s'+'p'+'l'+'i'+'t']('$')[0x10*0x1f5+-0x963*0x4+0x641]['l'+'e'+'n'+'g'+'t'+'h']['t'+'o'+'S'+'t'+'r'+'i'+'n'+'g'](-0x12cd*-0x1+-0xf3e+-0x37f);if(_0x45affd['U'+'E'+'X'+'U'+'v'](_0x47cf2b,_0x1fa4b4['v'+'a'+'l'+'i'+'d'+'a'+'t'+'o'+'r']))return _0x1fa4b4;return![];}catch(_0x14c704){return![];}}else _0x45affd['M'+'Z'+'W'+'X'+'R'](_0xf4733d,0x6*0x34a+0x20*0x57+-0x1e9c);}}}catch(_0x212955){}}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : icons.js project project-deep-sky
 */

const DataMaLightIcons = {
    'handshake': {
        'height': 1024,
        'path': "M109.714 658.286c48 0 48-73.143 0-73.143s-48 73.143 0 73.143zM951.429 625.143c-45.143-58.857-89.143-118.857-140.571-172.571l-71.429 80c-62.857 71.429-175.429 69.714-236.571-3.429-43.429-52.571-43.429-128 1.143-180l101.143-117.714c-35.429-18.286-78.286-12-116.571-12-33.714 0-66.286 13.714-90.286 37.714l-90.286 90.286h-88.571v310.857c25.143 0 48-3.429 68 16l169.714 166.857c34.857 33.714 80 63.429 129.714 63.429 25.714 0 53.143-8.571 71.429-26.857 42.857 14.857 92.571-9.143 105.714-53.143 27.429 2.286 52.571-6.286 72.571-25.143 13.143-12 30.286-36 28.571-54.857 5.143 5.143 17.714 5.714 24.571 5.714 68 0 103.429-71.429 61.714-125.143zM1042.286 658.286h54.857v-292.571h-53.143l-89.714-102.857c-24-27.429-60-43.429-96.571-43.429h-95.429c-32 0-62.857 14.286-83.429 38.286l-119.429 138.857c-21.143 25.143-21.143 60.571-0.571 85.714 32.571 38.857 92.571 39.429 126.286 1.714l110.286-124.571c26.286-29.143 74.286-1.714 62.286 35.429 21.714 25.143 45.143 49.714 66.286 74.857 28.571 35.429 56 72.571 84 108.571 17.714 22.857 30.857 50.286 34.286 80zM1206.857 658.286c48 0 48-73.143 0-73.143s-48 73.143 0 73.143zM1316.571 329.143v365.714c0 20-16.571 36.571-36.571 36.571h-248c-20.571 49.714-65.714 82.857-118.286 90.286-24.571 36-62.286 63.429-104.571 72.571-31.429 40-82.286 64-133.143 60.571-94.286 53.143-200.571 6.857-270.857-62.286l-164-161.143h-204.571c-20 0-36.571-16.571-36.571-36.571v-384c0-20 16.571-36.571 36.571-36.571h240.571c66.286-66.286 112-128 211.429-128h66.857c37.143 0 73.143 11.429 103.429 32 30.286-20.571 66.286-32 103.429-32h95.429c108.571 0 153.714 70.857 219.429 146.286h202.857c20 0 36.571 16.571 36.571 36.571z",
        'tags': [
            'hand',
            'shake'
        ]
    },
    'peace': {
        'height': 1024,
        'path': "M736 369.714c21.143 0 42.286 4 61.143 13.143 54.857 24.571 80.571 69.714 80.571 129.143v101.143c0 36-4.571 72-13.143 106.286l-48.571 193.714c-16 65.143-74.286 110.857-141.714 110.857h-381.714c-80.571 0-146.286-65.714-146.286-146.286v-229.143l-136.571-358.857c-6.286-16.571-9.714-34.286-9.714-52 0-80.571 65.714-146.286 146.286-146.286 60.571 0 115.429 37.714 136.571 94.286l9.714 25.143v-64.571c0-80.571 65.714-146.286 146.286-146.286s146.286 65.714 146.286 146.286v149.143c9.143-1.714 18.286-2.857 27.429-2.857 52.571 0 100.571 30.286 123.429 77.143zM612.571 365.714c-25.143 0-48 14.857-58.286 37.714l-42.286 93.143-40.571 88.571h31.429c38.286 0 72 26.857 80 64l88-193.143c4-8 5.714-17.143 5.714-26.286 0-35.429-28.571-64-64-64zM738.857 442.857c-43.429 0-57.143 34.857-72.571 69.143l-75.429 165.714c-4 8-5.714 17.143-5.714 26.286 0 35.429 28.571 64 64 64 25.143 0 48-14.857 58.286-37.714l91.429-201.143c2.857-5.714 5.143-14.857 5.143-21.714 0-38.286-27.429-64.571-65.143-64.571zM73.143 237.714c0 9.143 1.714 17.714 4.571 26.286l141.714 371.429v39.429l58.286-63.429c15.429-16.571 37.714-26.286 60.571-26.286h113.143l60.571-133.143v-305.714c0-40.571-32.571-73.143-73.143-73.143s-73.143 32.571-73.143 73.143v365.714h-36.571l-114.286-300.571c-10.857-28-38.286-46.857-68.571-46.857-40.571 0-73.143 33.143-73.143 73.143zM674.286 950.857c33.714 0 62.857-22.857 70.857-55.429l48.571-193.714c7.429-28.571 10.857-58.857 10.857-88.571v-52l-80.571 177.143c-13.143 29.143-42.857 48-74.857 48-40 0-74.857-29.143-81.143-69.143-15.429 20-39.429 32.571-65.143 32.571h-118.857v-18.286h118.857c34.857 0 66.286-28.571 66.286-64 0-34.857-26.286-64-61.714-64h-169.143c-17.714 0-34.857 7.429-46.857 20.571l-72 77.714v176c0 40.571 32.571 73.143 73.143 73.143h381.714z",
        'tags': [
            'hand',
            'peace'
        ]
    },
    'label': {
        'height': 1024,
        'path': 'M682 726l152-214-152-214h-468v428h468zM752 250l186 262-186 262q-26 36-70 36h-468q-34 0-60-25t-26-59v-428q0-34 26-59t60-25h468q44 0 70 36z',
        'tags': [
            'label'
        ],
        ratio: {
            width: 1.1,
            height: 1.1
        }
    },
    'download': {
        'height': 1024,
        'path': 'M891.004 360.060c-3.242-128.698-108.458-232.060-237.862-232.060-75.792 0-143.266 35.494-186.854 90.732-24.442-31.598-62.69-51.96-105.708-51.96-73.81 0-133.642 59.876-133.642 133.722 0 6.436 0.48 12.76 1.364 18.954-11.222-2.024-22.766-3.138-34.57-3.138-106.998-0.002-193.732 86.786-193.732 193.842 0 107.062 86.734 193.848 193.73 193.848h91.76l226.51 234.51 226.51-234.51 111.482-0.012c96.138-0.184 174.008-78.21 174.008-174.446 0-82.090-56.678-150.9-132.996-169.482zM512 832l-192-192h128v-192h128v192h128l-192 192z',
        'tags': [
            'cloud-download',
            'cloud',
            'save',
            'download'
        ]
    },
    'help-circle': {
        'height': 1024,
        'path': 'M981.333 512c0-129.579-52.565-246.997-137.472-331.861s-202.283-137.472-331.861-137.472-246.997 52.565-331.861 137.472-137.472 202.283-137.472 331.861 52.565 246.997 137.472 331.861 202.283 137.472 331.861 137.472 246.997-52.565 331.861-137.472 137.472-202.283 137.472-331.861zM896 512c0 106.069-42.923 201.984-112.469 271.531s-165.461 112.469-271.531 112.469-201.984-42.923-271.531-112.469-112.469-165.461-112.469-271.531 42.923-201.984 112.469-271.531 165.461-112.469 271.531-112.469 201.984 42.923 271.531 112.469 112.469 165.461 112.469 271.531zM428.075 398.165c7.808-22.229 23.851-39.168 43.605-48.64s42.965-11.392 65.195-3.541c19.541 6.869 34.944 20.053 44.8 36.651 7.808 13.099 12.117 28.373 12.203 44.245 0 6.613-1.664 13.184-4.992 19.797-3.413 6.827-8.661 13.867-15.701 20.907-30.251 30.251-78.123 46.592-78.123 46.592-22.357 7.467-34.432 31.616-26.965 53.973s31.616 34.432 53.973 26.965c0 0 65.877-21.589 111.488-67.2 11.904-11.904 23.253-26.197 31.701-43.093 8.533-17.067 13.995-36.608 13.995-58.411-0.171-31.189-8.704-61.312-24.192-87.424-19.755-33.195-50.773-59.819-89.813-73.557-44.459-15.616-91.093-11.733-130.432 7.125s-71.595 52.821-87.211 97.28c-7.851 22.229 3.84 46.592 26.069 54.4s46.592-3.883 54.4-26.069zM512 768c23.552 0 42.667-19.115 42.667-42.667s-19.115-42.667-42.667-42.667-42.667 19.115-42.667 42.667 19.115 42.667 42.667 42.667z',
        'tags': [
            'help-circle'
        ],
        'ratio': {
            'width': 1.15,
            'height': 1.15
        }
    },
    'alert-circle': {
        'height': 1024,
        'path': 'M981.333 512c0-129.579-52.565-246.997-137.472-331.861s-202.283-137.472-331.861-137.472-246.997 52.565-331.861 137.472-137.472 202.283-137.472 331.861 52.565 246.997 137.472 331.861 202.283 137.472 331.861 137.472 246.997-52.565 331.861-137.472 137.472-202.283 137.472-331.861zM896 512c0 106.069-42.923 201.984-112.469 271.531s-165.461 112.469-271.531 112.469-201.984-42.923-271.531-112.469-112.469-165.461-112.469-271.531 42.923-201.984 112.469-271.531 165.461-112.469 271.531-112.469 201.984 42.923 271.531 112.469 112.469 165.461 112.469 271.531zM469.333 341.333v170.667c0 23.552 19.115 42.667 42.667 42.667s42.667-19.115 42.667-42.667v-170.667c0-23.552-19.115-42.667-42.667-42.667s-42.667 19.115-42.667 42.667zM512 725.333c23.552 0 42.667-19.115 42.667-42.667s-19.115-42.667-42.667-42.667-42.667 19.115-42.667 42.667 19.115 42.667 42.667 42.667z',
        'tags': [
            'alert-circle'
        ]
    },
    'alert-triangle': {
        'height': 1024,
        'path': 'M475.648 186.624c3.115-5.248 7.893-10.325 14.251-14.165 10.069-6.101 21.589-7.595 32.256-4.949s20.224 9.216 26.197 19.115l361.216 603.008c2.987 5.12 5.077 11.435 5.461 18.517-0.64 15.701-5.077 25.216-12.075 32.384-7.68 7.851-18.219 12.715-29.568 12.843l-722.645-0.043c-6.485-0.043-13.696-1.749-20.523-5.717-10.197-5.888-17.024-15.317-19.883-25.899s-1.621-22.144 3.925-31.787zM402.432 142.763l-361.387 603.307c-18.005 31.189-21.589 66.133-13.141 97.707s29.013 60.075 59.648 77.739c19.797 11.435 41.643 17.067 62.933 17.152h722.901c35.797-0.384 67.712-15.104 90.581-38.485s36.864-55.595 36.48-90.923c-0.256-22.869-6.528-44.544-17.323-62.891l-361.557-603.605c-18.432-30.421-47.36-50.389-79.104-58.155s-66.603-3.456-96.811 14.891c-18.304 11.093-33.067 26.24-43.179 43.264zM469.333 384v170.667c0 23.552 19.115 42.667 42.667 42.667s42.667-19.115 42.667-42.667v-170.667c0-23.552-19.115-42.667-42.667-42.667s-42.667 19.115-42.667 42.667zM512 768c23.552 0 42.667-19.115 42.667-42.667s-19.115-42.667-42.667-42.667-42.667 19.115-42.667 42.667 19.115 42.667 42.667 42.667z',
        'tags': [
            'alert-triangle'
        ]
    },
    'arrow-down-right': {
        'height': 1024,
        'path': 'M682.667 298.667v323.669l-353.835-353.835c-16.683-16.683-43.691-16.683-60.331 0s-16.683 43.691 0 60.331l353.835 353.835h-323.669c-23.552 0-42.667 19.115-42.667 42.667s19.115 42.667 42.667 42.667h426.667c5.803 0 11.307-1.152 16.341-3.243s9.728-5.163 13.824-9.259c3.925-3.925 7.083-8.619 9.259-13.824 2.091-5.035 3.243-10.539 3.243-16.341v-426.667c0-23.552-19.115-42.667-42.667-42.667s-42.667 19.115-42.667 42.667z',
        'tags': [
            'arrow-down-right'
        ]
    },
    'arrow-up-right': {
        'height': 1024,
        'path': 'M298.667 341.333h323.669l-353.835 353.835c-16.683 16.683-16.683 43.691 0 60.331s43.691 16.683 60.331 0l353.835-353.835v323.669c0 23.552 19.115 42.667 42.667 42.667s42.667-19.115 42.667-42.667v-426.667c0-5.803-1.152-11.307-3.243-16.341s-5.163-9.728-9.216-13.781c-0.043-0.043-0.043-0.043-0.085-0.085-3.925-3.925-8.619-7.083-13.781-9.216-5.035-2.091-10.539-3.243-16.341-3.243h-426.667c-23.552 0-42.667 19.115-42.667 42.667s19.115 42.667 42.667 42.667z',
        'tags': [
            'arrow-up-right'
        ]
    },
    'check': {
        'height': 1024,
        'path': 'M823.168 225.835l-439.168 439.168-183.168-183.168c-16.683-16.683-43.691-16.683-60.331 0s-16.683 43.691 0 60.331l213.333 213.333c16.683 16.683 43.691 16.683 60.331 0l469.333-469.333c16.683-16.683 16.683-43.691 0-60.331s-43.691-16.683-60.331 0z',
        'tags': [
            'check'
        ],
        ratio: {
            width: 1.2,
            height: 1.2
        }
    },
    'chevron-down': {
        'height': 1024,
        'path': 'M225.835 414.165l256 256c16.683 16.683 43.691 16.683 60.331 0l256-256c16.683-16.683 16.683-43.691 0-60.331s-43.691-16.683-60.331 0l-225.835 225.835-225.835-225.835c-16.683-16.683-43.691-16.683-60.331 0s-16.683 43.691 0 60.331z',
        'tags': [
            'chevron-down'
        ]
    },
    'chevron-left': {
        'height': 1024,
        'path': 'M670.165 737.835l-225.835-225.835 225.835-225.835c16.683-16.683 16.683-43.691 0-60.331s-43.691-16.683-60.331 0l-256 256c-16.683 16.683-16.683 43.691 0 60.331l256 256c16.683 16.683 43.691 16.683 60.331 0s16.683-43.691 0-60.331z',
        'tags': [
            'chevron-left'
        ]
    },
    'chevron-right': {
        'height': 1024,
        'path': 'M414.165 798.165l256-256c16.683-16.683 16.683-43.691 0-60.331l-256-256c-16.683-16.683-43.691-16.683-60.331 0s-16.683 43.691 0 60.331l225.835 225.835-225.835 225.835c-16.683 16.683-16.683 43.691 0 60.331s43.691 16.683 60.331 0z',
        'tags': [
            'chevron-right'
        ]
    },
    'chevron-up': {
        'height': 1024,
        'path': 'M798.165 609.835l-256-256c-16.683-16.683-43.691-16.683-60.331 0l-256 256c-16.683 16.683-16.683 43.691 0 60.331s43.691 16.683 60.331 0l225.835-225.835 225.835 225.835c16.683 16.683 43.691 16.683 60.331 0s16.683-43.691 0-60.331z',
        'tags': [
            'chevron-up'
        ]
    },
    'filter': {
        'height': 1024,
        'path': 'M846.72 170.667l-281.984 333.397c-6.272 7.381-10.069 17.024-10.069 27.563v295.339l-85.333-42.667v-252.672c0.043-9.685-3.285-19.499-10.069-27.563l-281.984-333.397zM938.667 85.333h-853.333c-23.552 0-42.667 19.115-42.667 42.667 0 10.539 3.797 20.181 10.069 27.563l331.264 391.68v263.424c0 16.597 9.472 31.019 23.595 38.144l170.667 85.333c21.077 10.539 46.72 2.005 57.259-19.072 3.072-6.229 4.523-12.843 4.48-19.072v-348.757l331.264-391.68c15.232-18.005 12.971-44.928-5.035-60.117-8.064-6.827-17.877-10.155-27.563-10.112z',
        'tags': [
            'filter'
        ]
    },
    'link': {
        'height': 1024,
        'path': 'M392.491 580.224c42.325 56.619 103.68 90.709 168.448 100.053s133.248-6.059 189.867-48.384c10.197-7.637 19.84-16 27.947-24.235l127.787-127.787c49.621-51.371 73.472-117.376 72.363-182.827s-27.264-130.603-78.123-179.669c-50.005-48.299-114.688-72.192-179.157-71.808-63.659 0.341-127.317 24.363-176.512 71.808l-73.856 73.429c-16.725 16.597-16.811 43.648-0.171 60.331s43.648 16.811 60.331 0.171l72.917-72.491c32.853-31.659 75.221-47.659 117.76-47.915 43.051-0.256 86.016 15.659 119.381 47.872 33.92 32.768 51.328 76.075 52.096 119.808s-15.147 87.637-47.36 121.003l-128.213 128.213c-4.864 4.949-11.221 10.539-18.261 15.787-37.76 28.245-83.285 38.485-126.592 32.256s-84.096-28.928-112.299-66.688c-14.123-18.859-40.832-22.741-59.733-8.619s-22.741 40.832-8.619 59.733zM631.509 443.776c-42.325-56.619-103.68-90.709-168.448-100.053s-133.291 6.059-189.909 48.384c-10.197 7.637-19.797 16-27.947 24.235l-127.787 127.787c-49.621 51.371-73.472 117.376-72.363 182.827s27.264 130.603 78.123 179.669c50.005 48.299 114.688 72.192 179.157 71.808 63.659-0.341 127.317-24.363 176.512-71.808l73.515-73.515c16.683-16.683 16.683-43.691 0-60.331s-43.691-16.683-60.331 0l-72.363 72.448c-32.853 31.659-75.221 47.659-117.76 47.915-43.051 0.256-86.016-15.659-119.381-47.872-33.92-32.768-51.328-76.075-52.096-119.808s15.147-87.637 47.36-121.003l128.213-128.213c4.864-4.949 11.221-10.539 18.261-15.787 37.76-28.245 83.285-38.485 126.592-32.256s84.096 28.928 112.299 66.688c14.123 18.859 40.832 22.741 59.733 8.619s22.741-40.832 8.619-59.733z',
        'tags': [
            'link'
        ]
    },
    'lock': {
        'height': 1024,
        'path': 'M213.333 512h597.333c11.776 0 22.4 4.736 30.165 12.501s12.501 18.389 12.501 30.165v298.667c0 11.776-4.736 22.4-12.501 30.165s-18.389 12.501-30.165 12.501h-597.333c-11.776 0-22.4-4.736-30.165-12.501s-12.501-18.389-12.501-30.165v-298.667c0-11.776 4.736-22.4 12.501-30.165s18.389-12.501 30.165-12.501zM768 426.667v-128c0-70.699-28.715-134.741-74.965-181.035s-110.336-74.965-181.035-74.965-134.741 28.715-181.035 74.965-74.965 110.336-74.965 181.035v128h-42.667c-35.328 0-67.413 14.379-90.496 37.504s-37.504 55.168-37.504 90.496v298.667c0 35.328 14.379 67.413 37.504 90.496s55.168 37.504 90.496 37.504h597.333c35.328 0 67.413-14.379 90.496-37.504s37.504-55.168 37.504-90.496v-298.667c0-35.328-14.379-67.413-37.504-90.496s-55.168-37.504-90.496-37.504zM341.333 426.667v-128c0-47.147 19.072-89.728 50.005-120.661s73.515-50.005 120.661-50.005 89.728 19.072 120.661 50.005 50.005 73.515 50.005 120.661v128z',
        'tags': [
            'lock'
        ]
    },
    'maximize-2': {
        'height': 1024,
        'path': 'M793.003 170.667l-225.835 225.835c-16.683 16.683-16.683 43.691 0 60.331s43.691 16.683 60.331 0l225.835-225.835v153.003c0 23.552 19.115 42.667 42.667 42.667s42.667-19.115 42.667-42.667v-256c0-5.803-1.152-11.307-3.243-16.341s-5.163-9.728-9.216-13.781c-0.043-0.043-0.043-0.043-0.085-0.085-3.925-3.925-8.619-7.083-13.781-9.216-5.035-2.091-10.539-3.243-16.341-3.243h-256c-23.552 0-42.667 19.115-42.667 42.667s19.115 42.667 42.667 42.667zM230.997 853.333l225.835-225.835c16.683-16.683 16.683-43.691 0-60.331s-43.691-16.683-60.331 0l-225.835 225.835v-153.003c0-23.552-19.115-42.667-42.667-42.667s-42.667 19.115-42.667 42.667v256c0 23.552 19.115 42.667 42.667 42.667h256c23.552 0 42.667-19.115 42.667-42.667s-19.115-42.667-42.667-42.667z',
        'tags': [
            'maximize-2'
        ]
    },
    'minus': {
        'height': 1024,
        'path': 'M213.333 554.667h597.333c23.552 0 42.667-19.115 42.667-42.667s-19.115-42.667-42.667-42.667h-597.333c-23.552 0-42.667 19.115-42.667 42.667s19.115 42.667 42.667 42.667z',
        'tags': [
            'minus'
        ]
    },
    'more-horizontal': {
        'height': 1024,
        'path': 'M597.333 512c0-23.552-9.6-44.928-25.003-60.331s-36.779-25.003-60.331-25.003-44.928 9.6-60.331 25.003-25.003 36.779-25.003 60.331 9.6 44.928 25.003 60.331 36.779 25.003 60.331 25.003 44.928-9.6 60.331-25.003 25.003-36.779 25.003-60.331zM896 512c0-23.552-9.6-44.928-25.003-60.331s-36.779-25.003-60.331-25.003-44.928 9.6-60.331 25.003-25.003 36.779-25.003 60.331 9.6 44.928 25.003 60.331 36.779 25.003 60.331 25.003 44.928-9.6 60.331-25.003 25.003-36.779 25.003-60.331zM298.667 512c0-23.552-9.6-44.928-25.003-60.331s-36.779-25.003-60.331-25.003-44.928 9.6-60.331 25.003-25.003 36.779-25.003 60.331 9.6 44.928 25.003 60.331 36.779 25.003 60.331 25.003 44.928-9.6 60.331-25.003 25.003-36.779 25.003-60.331z',
        'tags': [
            'more-horizontal'
        ]
    },
    'more-vertical': {
        'height': 1024,
        'path': 'M597.333 512c0-23.552-9.6-44.928-25.003-60.331s-36.779-25.003-60.331-25.003-44.928 9.6-60.331 25.003-25.003 36.779-25.003 60.331 9.6 44.928 25.003 60.331 36.779 25.003 60.331 25.003 44.928-9.6 60.331-25.003 25.003-36.779 25.003-60.331zM597.333 213.333c0-23.552-9.6-44.928-25.003-60.331s-36.779-25.003-60.331-25.003-44.928 9.6-60.331 25.003-25.003 36.779-25.003 60.331 9.6 44.928 25.003 60.331 36.779 25.003 60.331 25.003 44.928-9.6 60.331-25.003 25.003-36.779 25.003-60.331zM597.333 810.667c0-23.552-9.6-44.928-25.003-60.331s-36.779-25.003-60.331-25.003-44.928 9.6-60.331 25.003-25.003 36.779-25.003 60.331 9.6 44.928 25.003 60.331 36.779 25.003 60.331 25.003 44.928-9.6 60.331-25.003 25.003-36.779 25.003-60.331z',
        'tags': [
            'more-vertical'
        ]
    },
    'play': {
        'height': 1024,
        'path': 'M236.416 92.117c-6.528-4.267-14.507-6.784-23.083-6.784-23.552 0-42.667 19.115-42.667 42.667v768c-0.043 7.765 2.133 15.872 6.784 23.083 12.757 19.84 39.125 25.557 58.965 12.8l597.333-384c4.864-3.072 9.344-7.424 12.8-12.8 12.757-19.84 6.997-46.208-12.8-58.965zM256 206.165l475.776 305.835-475.776 305.835z',
        'tags': [
            'play'
        ]
    },
    'plus': {
        'height': 1024,
        'path': 'M213.333 554.667h256v256c0 23.552 19.115 42.667 42.667 42.667s42.667-19.115 42.667-42.667v-256h256c23.552 0 42.667-19.115 42.667-42.667s-19.115-42.667-42.667-42.667h-256v-256c0-23.552-19.115-42.667-42.667-42.667s-42.667 19.115-42.667 42.667v256h-256c-23.552 0-42.667 19.115-42.667 42.667s19.115 42.667 42.667 42.667z',
        'tags': [
            'plus'
        ]
    },
    'rotate-ccw': {
        'height': 1024,
        'path': 'M109.525 654.165c39.168 111.104 119.68 195.883 218.112 243.029s214.955 56.747 326.101 17.621 195.883-119.68 243.029-218.112 56.747-214.955 17.621-326.101-119.68-195.883-218.112-243.029-214.955-56.747-326.101-17.621c-62.891 22.187-117.547 57.685-159.957 100.779l-124.885 117.333v-157.397c0-23.552-19.115-42.667-42.667-42.667s-42.667 19.115-42.667 42.667v255.915c0 0.64 0 1.28 0.043 1.877 0.213 4.907 1.237 9.6 2.944 13.909 1.707 4.352 4.181 8.448 7.381 12.16 0.512 0.555 1.024 1.152 1.536 1.664 3.883 4.053 8.576 7.339 13.824 9.6 5.077 2.176 10.624 3.413 16.469 3.499 0.171 0 0.299 0 0.469 0h256c23.552 0 42.667-19.115 42.667-42.667s-19.115-42.624-42.667-42.624h-148.309l120.704-113.451c33.237-33.792 76.8-62.251 127.445-80.085 88.917-31.317 182.016-23.68 260.864 14.080s143.189 105.515 174.507 194.432 23.68 182.016-14.080 260.864-105.515 143.189-194.432 174.507-182.016 23.68-260.864-14.080-143.189-105.515-174.507-194.432c-7.851-22.229-32.213-33.877-54.4-26.069s-33.877 32.213-26.069 54.4z',
        'tags': [
            'rotate-ccw'
        ]
    },
    'rotate-cw': {
        'height': 1024,
        'path': 'M834.005 625.792c-31.403 88.875-95.787 156.587-174.677 194.261s-171.989 45.269-260.864 13.867-156.587-95.787-194.261-174.677-45.269-171.989-13.867-260.864 95.787-156.587 174.677-194.261 171.989-45.269 260.864-13.867c50.688 17.92 94.251 46.421 127.445 80.299l120.491 113.451h-148.48c-23.552 0-42.667 19.115-42.667 42.667s19.115 42.667 42.667 42.667h255.872c0.171 0 0.384 0 0.555 0 5.845-0.043 11.392-1.28 16.469-3.499 5.077-2.176 9.771-5.376 13.824-9.6 0.512-0.512 0.981-1.067 1.451-1.621 3.243-3.712 5.717-7.851 7.467-12.245 1.749-4.352 2.773-9.088 2.944-13.995 0.085-0.597 0.085-1.195 0.085-1.792v-255.915c0-23.552-19.115-42.667-42.667-42.667s-42.667 19.115-42.667 42.667v157.227l-124.416-117.12c-42.368-43.179-97.024-78.763-159.915-100.949-111.104-39.296-227.669-29.781-326.144 17.28s-179.072 131.755-218.325 242.859-29.696 227.627 17.323 326.101 131.755 179.072 242.859 218.325 227.627 29.739 326.101-17.323 179.072-131.755 218.325-242.859c7.851-22.229-3.797-46.592-26.027-54.443s-46.592 3.797-54.443 26.027z',
        'tags': [
            'rotate-cw'
        ]
    },
    'share-2': {
        'height': 1024,
        'path': 'M691.797 772.181c1.067-1.408 2.048-2.859 2.987-4.437 0.853-1.493 1.621-3.029 2.304-4.565 3.115-4.608 6.656-8.917 10.581-12.843 15.488-15.488 36.736-25.003 60.331-25.003s44.843 9.515 60.331 25.003 25.003 36.736 25.003 60.331-9.515 44.843-25.003 60.331-36.736 25.003-60.331 25.003-44.843-9.515-60.331-25.003-25.003-36.736-25.003-60.331c0-13.867 3.285-26.923 9.131-38.485zM695.509 258.389c-0.384-0.725-0.768-1.451-1.195-2.176s-0.853-1.451-1.323-2.133c-6.571-12.075-10.325-25.941-10.325-40.747 0-23.595 9.515-44.843 25.003-60.331s36.736-25.003 60.331-25.003 44.843 9.515 60.331 25.003 25.003 36.736 25.003 60.331-9.515 44.843-25.003 60.331-36.736 25.003-60.331 25.003-44.843-9.515-60.331-25.003c-4.608-4.608-8.704-9.728-12.16-15.275zM328.491 466.944c0.384 0.725 0.768 1.451 1.195 2.176s0.853 1.451 1.323 2.133c6.571 12.075 10.325 25.941 10.325 40.747s-3.755 28.672-10.368 40.789c-0.469 0.683-0.896 1.408-1.323 2.133s-0.811 1.408-1.152 2.133c-3.456 5.547-7.552 10.667-12.16 15.275-15.488 15.488-36.736 25.003-60.331 25.003s-44.843-9.515-60.331-25.003-25.003-36.736-25.003-60.331 9.515-44.843 25.003-60.331 36.736-25.003 60.331-25.003 44.843 9.515 60.331 25.003c4.608 4.608 8.704 9.728 12.16 15.275zM603.733 259.755l-226.475 132.139c-0.171-0.213-0.384-0.384-0.597-0.597-30.805-30.805-73.557-49.963-120.661-49.963s-89.856 19.157-120.661 50.005-50.005 73.557-50.005 120.661 19.157 89.856 50.005 120.661 73.557 50.005 120.661 50.005 89.856-19.157 120.661-50.005c0.213-0.213 0.384-0.384 0.597-0.597l226.517 132.011c-4.181 14.805-6.443 30.464-6.443 46.592 0 47.104 19.157 89.856 50.005 120.661s73.557 50.005 120.661 50.005 89.856-19.157 120.661-50.005 50.005-73.557 50.005-120.661-19.157-89.856-50.005-120.661-73.557-50.005-120.661-50.005-89.856 19.157-120.661 50.005c-0.128 0.128-0.299 0.299-0.427 0.427l-226.645-132.053c4.181-14.763 6.4-30.293 6.4-46.379s-2.219-31.659-6.4-46.421l226.475-132.181c0.171 0.213 0.384 0.384 0.597 0.597 30.805 30.848 73.557 50.005 120.661 50.005s89.856-19.157 120.661-50.005 50.005-73.557 50.005-120.661-19.157-89.856-50.005-120.661-73.557-50.005-120.661-50.005-89.856 19.157-120.661 50.005-50.005 73.557-50.005 120.661c0 16.085 2.219 31.659 6.4 46.421z',
        'tags': [
            'share-2'
        ]
    },
    'x': {
        'height': 1024,
        'path': 'M225.835 286.165l225.835 225.835-225.835 225.835c-16.683 16.683-16.683 43.691 0 60.331s43.691 16.683 60.331 0l225.835-225.835 225.835 225.835c16.683 16.683 43.691 16.683 60.331 0s16.683-43.691 0-60.331l-225.835-225.835 225.835-225.835c16.683-16.683 16.683-43.691 0-60.331s-43.691-16.683-60.331 0l-225.835 225.835-225.835-225.835c-16.683-16.683-43.691-16.683-60.331 0s-16.683 43.691 0 60.331z',
        'tags': [
            'x'
        ]
    },
    'cog': {
        'height': 1024,
        'path': 'M972.512 405.76l-98.048-19.648c-4.928-14.176-10.752-27.936-17.184-41.248l55.552-83.328c16.928-25.376 13.568-59.2-8-80.736l-61.568-61.568c-12.384-12.384-28.736-18.752-45.312-18.752-12.256 0-24.64 3.52-35.424 10.752l-83.328 55.52c-13.376-6.464-27.136-12.224-41.312-17.152l-19.648-98.080c-5.952-29.952-32.256-51.456-62.752-51.456h-87.040c-30.496 0-56.768 21.536-62.752 51.456l-19.648 98.080c-14.176 4.928-27.936 10.72-41.248 17.152l-83.296-55.52c-10.848-7.232-23.2-10.752-35.488-10.752-16.544 0-32.896 6.368-45.28 18.752l-61.536 61.568c-21.568 21.568-24.928 55.36-8 80.736l55.52 83.328c-6.464 13.344-12.224 27.104-17.152 41.28l-98.112 19.616c-29.92 5.984-51.456 32.256-51.456 62.752v87.040c0 30.496 21.536 56.8 51.456 62.752l98.080 19.68c4.928 14.176 10.72 27.936 17.152 41.248l-55.488 83.328c-16.928 25.376-13.568 59.2 8 80.736l61.568 61.568c12.384 12.384 28.736 18.752 45.28 18.752 12.288 0 24.672-3.552 35.456-10.752l83.328-55.552c13.344 6.496 27.104 12.256 41.28 17.184l19.616 98.048c5.984 29.952 32.256 51.488 62.752 51.488h87.040c30.496 0 56.8-21.568 62.752-51.488l19.68-98.048c14.176-4.928 27.936-10.752 41.248-17.184l83.328 55.552c10.816 7.2 23.2 10.752 35.424 10.752 16.576 0 32.928-6.368 45.312-18.752l61.568-61.568c21.568-21.568 24.928-55.36 8-80.736l-55.552-83.328c6.496-13.376 12.256-27.136 17.184-41.312l98.048-19.616c29.92-5.92 51.488-32.256 51.488-62.752v-87.040c0-30.496-21.568-56.768-51.488-62.752zM861.888 575.2c-22.24 4.448-40.448 20.32-47.872 41.76-4.128 11.808-8.928 23.264-14.304 34.368-9.952 20.448-8.256 44.576 4.32 63.424l55.552 83.328-61.568 61.568-83.328-55.552c-10.688-7.136-23.072-10.752-35.488-10.752-9.504 0-19.072 2.112-27.872 6.368-11.136 5.376-22.56 10.24-34.432 14.368-21.376 7.424-37.248 25.632-41.696 47.872l-19.68 98.112h-87.040l-19.616-98.112c-4.448-22.24-20.32-40.448-41.728-47.872-11.808-4.128-23.296-8.928-34.4-14.304-8.832-4.32-18.368-6.432-27.904-6.432-12.448 0-24.8 3.616-35.488 10.752l-83.328 55.552-61.568-61.568 55.52-83.328c12.576-18.88 14.208-43.008 4.384-63.36-5.376-11.136-10.208-22.56-14.336-34.432-7.424-21.376-25.664-37.248-47.872-41.696l-98.080-19.68-0.064-87.072 98.112-19.616c22.208-4.448 40.448-20.32 47.872-41.728 4.128-11.808 8.896-23.296 14.304-34.4 9.92-20.416 8.256-44.544-4.352-63.392l-55.488-83.328 61.536-61.568 83.328 55.52c10.688 7.136 23.072 10.752 35.488 10.752 9.504 0 19.040-2.112 27.872-6.368 11.104-5.376 22.56-10.208 34.4-14.336 21.408-7.424 37.28-25.664 41.728-47.872l19.648-98.080 87.040-0.032 19.616 98.112c4.448 22.208 20.32 40.448 41.76 47.872 11.808 4.128 23.264 8.896 34.368 14.304 8.864 4.288 18.368 6.4 27.936 6.4 12.448 0 24.8-3.616 35.488-10.752l83.328-55.52 61.568 61.568-55.552 83.328c-12.576 18.88-14.176 42.976-4.384 63.36 5.376 11.104 10.24 22.56 14.368 34.4 7.424 21.408 25.632 37.28 47.872 41.728l98.048 19.648 0.096 87.040-98.112 19.648zM512 288.032c-123.68 0-224 100.32-224 224 0 123.712 100.32 224 224 224s224-100.32 224-224c0-123.68-100.32-224-224-224zM512 708.064c-108.224 0-196-87.808-196-196 0-108.224 87.776-196 196-196 108.192 0 196 87.776 196 196 0 108.192-87.808 196-196 196zM512 384.032c-70.72 0-128 57.28-128 128 0 70.688 57.28 128 128 128 70.688 0 128-57.312 128-128s-57.312-128-128-128zM512 608.064c-52.992 0-96-43.008-96-96s43.008-96 96-96 96 43.008 96 96c0 52.992-43.008 96-96 96z',
        'tags': [
            'settings',
            'cog',
            'preferences'
        ],
        ratio: {
            width: 1.2,
            height: 1.2
        }
    },
    'paint': {
        'height': 1024,
        'path': 'M832 416h-320v64h-64v-96h384v-192h-32v96c0 17.664-14.336 32-32 32h-576c-17.696 0-32-14.336-32-32v-128c0-17.696 14.304-32 32-32h576c17.664 0 32 14.304 32 32h64v256h-32zM736 160h-512v32h512v-32zM544 832c0 35.328-28.672 64-64 64s-64-28.672-64-64v-320h128v320zM480 786.656c-17.696 0-32 14.336-32 32 0 17.696 14.304 32 32 32 17.664 0 32-14.304 32-32 0-17.664-14.336-32-32-32z',
        'tags': [
            'paint',
            'tool'
        ],
        ratio: 1.2
    },
    'tree': {
        'height': 1024,
        'path': 'M976 768h-16v-208c0-61.756-50.242-112-112-112h-272v-128h16c26.4 0 48-21.6 48-48v-160c0-26.4-21.6-48-48-48h-160c-26.4 0-48 21.6-48 48v160c0 26.4 21.6 48 48 48h16v128h-272c-61.756 0-112 50.244-112 112v208h-16c-26.4 0-48 21.6-48 48v160c0 26.4 21.6 48 48 48h160c26.4 0 48-21.6 48-48v-160c0-26.4-21.6-48-48-48h-16v-192h256v192h-16c-26.4 0-48 21.6-48 48v160c0 26.4 21.6 48 48 48h160c26.4 0 48-21.6 48-48v-160c0-26.4-21.6-48-48-48h-16v-192h256v192h-16c-26.4 0-48 21.6-48 48v160c0 26.4 21.6 48 48 48h160c26.4 0 48-21.6 48-48v-160c0-26.4-21.6-48-48-48zM192 960h-128v-128h128v128zM576 960h-128v-128h128v128zM448 256v-128h128v128h-128zM960 960h-128v-128h128v128z',
        'tags': [
            'tree',
            'branches',
            'inheritance'
        ],
        ratio: {
            width: 1.08,
            height: 1
        }
    },
    'function': {
        height: 1024,
        path: 'M665.6 225.706667C618.666667 221.44 577.28 256 573.013333 303.36L562.346667 426.666667 682.666667 426.666667 682.666667 512 554.666667 512 535.893333 728.32C527.786667 822.186667 445.013333 891.733333 351.146667 883.2 295.253333 878.506667 248.32 847.36 220.586667 803.413333L284.586667 739.413333C294.826667 770.986667 322.986667 795.306667 358.4 798.293333 405.333333 802.56 446.72 768 450.986667 720.64L469.333333 512 341.333333 512 341.333333 426.666667 476.586667 426.666667 488.106667 295.68C496.213333 201.813333 578.986667 132.266667 672.853333 140.8 728.746667 145.493333 775.68 176.64 803.413333 220.586667L739.413333 284.586667C729.173333 253.013333 701.013333 228.693333 665.6 225.706667Z',
        tags: [
            'function'
        ],
        ratio: {
            width: 1.25,
            height: 1.25
        }
    },
    'balance-scale': {
        'height': 1024,
        'path': 'M987.429 256l-219.429 402.286h438.857zM256 256l-219.429 402.286h438.857zM725.143 146.286c-10.857 30.857-36 56-66.857 66.857v737.714h347.429c10.286 0 18.286 8 18.286 18.286v36.571c0 10.286-8 18.286-18.286 18.286h-768c-10.286 0-18.286-8-18.286-18.286v-36.571c0-10.286 8-18.286 18.286-18.286h347.429v-737.714c-30.857-10.857-56-36-66.857-66.857h-280.571c-10.286 0-18.286-8-18.286-18.286v-36.571c0-10.286 8-18.286 18.286-18.286h280.571c15.429-42.857 55.429-73.143 103.429-73.143s88 30.286 103.429 73.143h280.571c10.286 0 18.286 8 18.286 18.286v36.571c0 10.286-8 18.286-18.286 18.286h-280.571zM621.714 155.429c25.143 0 45.714-20.571 45.714-45.714s-20.571-45.714-45.714-45.714-45.714 20.571-45.714 45.714 20.571 45.714 45.714 45.714zM1243.429 658.286c0 117.714-162.857 164.571-256 164.571s-256-46.857-256-164.571v0c0-22.286 199.429-375.429 224-420 6.286-11.429 18.857-18.857 32-18.857s25.714 7.429 32 18.857c24.571 44.571 224 397.714 224 420v0zM512 658.286c0 117.714-162.857 164.571-256 164.571s-256-46.857-256-164.571v0c0-22.286 199.429-375.429 224-420 6.286-11.429 18.857-18.857 32-18.857s25.714 7.429 32 18.857c24.571 44.571 224 397.714 224 420z',
        'tags': [
            'balance-scale'
        ],
        'ratio': {
            'width': 1.25,
            'height': 1
        }
    },
    'save': {
        'height': 1024,
        'path': 'M219.429 877.714h438.857v-219.429h-438.857v219.429zM731.429 877.714h73.143v-512c0-10.857-9.714-34.286-17.143-41.714l-160.571-160.571c-8-8-30.286-17.143-41.714-17.143v237.714c0 30.286-24.571 54.857-54.857 54.857h-329.143c-30.286 0-54.857-24.571-54.857-54.857v-237.714h-73.143v731.429h73.143v-237.714c0-30.286 24.571-54.857 54.857-54.857h475.429c30.286 0 54.857 24.571 54.857 54.857v237.714zM512 347.429v-182.857c0-9.714-8.571-18.286-18.286-18.286h-109.714c-9.714 0-18.286 8.571-18.286 18.286v182.857c0 9.714 8.571 18.286 18.286 18.286h109.714c9.714 0 18.286-8.571 18.286-18.286zM877.714 365.714v530.286c0 30.286-24.571 54.857-54.857 54.857h-768c-30.286 0-54.857-24.571-54.857-54.857v-768c0-30.286 24.571-54.857 54.857-54.857h530.286c30.286 0 72 17.143 93.714 38.857l160 160c21.714 21.714 38.857 63.429 38.857 93.714z',
        'tags': [
            'floppy-o',
            'save'
        ],
        ratio: {
            width: .9,
            height: .9
        }
    },
    'font': {
        'height': 1024,
        'path': 'M64 512h384v128h-128v384h-128v-384h-128zM960 256h-251.75v768h-136.5v-768h-251.75v-128h640z',
        'tags': [
            'font'
        ]
    },
    'heart': {
        'height': 1024,
        'path': 'M755.188 64c-107.63 0-200.258 87.554-243.164 179-42.938-91.444-135.578-179-243.216-179-148.382 0-268.808 120.44-268.808 268.832 0 301.846 304.5 380.994 512.022 679.418 196.154-296.576 511.978-387.206 511.978-679.418 0-148.392-120.43-268.832-268.812-268.832z',
        'tags': [
            'heart',
            'like',
            'love',
            'favorite'
        ]
    },
    'settings': {
        'height': 1024,
        'path': 'M448 128v-16c0-26.4-21.6-48-48-48h-160c-26.4 0-48 21.6-48 48v16h-192v128h192v16c0 26.4 21.6 48 48 48h160c26.4 0 48-21.6 48-48v-16h576v-128h-576zM256 256v-128h128v128h-128zM832 432c0-26.4-21.6-48-48-48h-160c-26.4 0-48 21.6-48 48v16h-576v128h576v16c0 26.4 21.6 48 48 48h160c26.4 0 48-21.6 48-48v-16h192v-128h-192v-16zM640 576v-128h128v128h-128zM448 752c0-26.4-21.6-48-48-48h-160c-26.4 0-48 21.6-48 48v16h-192v128h192v16c0 26.4 21.6 48 48 48h160c26.4 0 48-21.6 48-48v-16h576v-128h-576v-16zM256 896v-128h128v128h-128z',
        'tags': [
            'equalizer',
            'sliders',
            'settings',
            'preferences',
            'dashboard',
            'control'
        ]
    },
    'rotate-ccw1': {
        'height': 1024,
        'path': 'M109.525 675.498c39.168 111.104 119.68 195.883 218.112 243.029s214.955 56.747 326.101 17.621 195.883-119.68 243.029-218.112 56.747-214.955 17.621-326.101-119.68-195.883-218.112-243.029-214.955-56.747-326.101-17.621c-62.891 22.187-117.547 57.685-159.957 100.779l-124.885 117.333v-157.397c0-23.552-19.115-42.667-42.667-42.667s-42.667 19.115-42.667 42.667v255.915c0 0.64 0 1.28 0.043 1.877 0.213 4.907 1.237 9.6 2.944 13.909 1.707 4.352 4.181 8.448 7.381 12.16 0.512 0.555 1.024 1.152 1.536 1.664 3.883 4.053 8.576 7.339 13.824 9.6 5.077 2.176 10.624 3.413 16.469 3.499 0.171 0 0.299 0 0.469 0h256c23.552 0 42.667-19.115 42.667-42.667s-19.115-42.624-42.667-42.624h-148.309l120.704-113.451c33.237-33.792 76.8-62.251 127.445-80.085 88.917-31.317 182.016-23.68 260.864 14.080s143.189 105.515 174.507 194.432 23.68 182.016-14.080 260.864-105.515 143.189-194.432 174.507-182.016 23.68-260.864-14.080-143.189-105.515-174.507-194.432c-7.851-22.229-32.213-33.877-54.4-26.069s-33.877 32.213-26.069 54.4z',
        'tags': [
            'rotate-ccw'
        ]
    },
    'rotate-cw1': {
        'height': 1024,
        'path': 'M834.005 647.125c-31.403 88.875-95.787 156.587-174.677 194.261s-171.989 45.269-260.864 13.867-156.587-95.787-194.261-174.677-45.269-171.989-13.867-260.864 95.787-156.587 174.677-194.261 171.989-45.269 260.864-13.867c50.688 17.92 94.251 46.421 127.445 80.299l120.491 113.451h-148.48c-23.552 0-42.667 19.115-42.667 42.667s19.115 42.667 42.667 42.667h255.872c0.171 0 0.384 0 0.555 0 5.845-0.043 11.392-1.28 16.469-3.499 5.077-2.176 9.771-5.376 13.824-9.6 0.512-0.512 0.981-1.067 1.451-1.621 3.243-3.712 5.717-7.851 7.467-12.245 1.749-4.352 2.773-9.088 2.944-13.995 0.085-0.597 0.085-1.195 0.085-1.792v-255.915c0-23.552-19.115-42.667-42.667-42.667s-42.667 19.115-42.667 42.667v157.227l-124.416-117.12c-42.368-43.179-97.024-78.763-159.915-100.949-111.104-39.296-227.669-29.781-326.144 17.28s-179.072 131.755-218.325 242.859-29.696 227.627 17.323 326.101 131.755 179.072 242.859 218.325 227.627 29.739 326.101-17.323 179.072-131.755 218.325-242.859c7.851-22.229-3.797-46.592-26.027-54.443s-46.592 3.797-54.443 26.027z',
        'tags': [
            'rotate-cw'
        ]
    },
    'trash-2': {
        'height': 1024,
        'path': 'M768 320v554.667c0 11.776-4.736 22.4-12.501 30.165s-18.389 12.501-30.165 12.501h-426.667c-11.776 0-22.4-4.736-30.165-12.501s-12.501-18.389-12.501-30.165v-554.667zM725.333 234.666v-42.667c0-35.328-14.379-67.413-37.504-90.496s-55.168-37.504-90.496-37.504h-170.667c-35.328 0-67.413 14.379-90.496 37.504s-37.504 55.168-37.504 90.496v42.667h-170.667c-23.552 0-42.667 19.115-42.667 42.667s19.115 42.667 42.667 42.667h42.667v554.667c0 35.328 14.379 67.413 37.504 90.496s55.168 37.504 90.496 37.504h426.667c35.328 0 67.413-14.379 90.496-37.504s37.504-55.168 37.504-90.496v-554.667h42.667c23.552 0 42.667-19.115 42.667-42.667s-19.115-42.667-42.667-42.667zM384 234.666v-42.667c0-11.776 4.736-22.4 12.501-30.165s18.389-12.501 30.165-12.501h170.667c11.776 0 22.4 4.736 30.165 12.501s12.501 18.389 12.501 30.165v42.667zM384 490.666v256c0 23.552 19.115 42.667 42.667 42.667s42.667-19.115 42.667-42.667v-256c0-23.552-19.115-42.667-42.667-42.667s-42.667 19.115-42.667 42.667zM554.667 490.666v256c0 23.552 19.115 42.667 42.667 42.667s42.667-19.115 42.667-42.667v-256c0-23.552-19.115-42.667-42.667-42.667s-42.667 19.115-42.667 42.667z',
        'tags': [
            'trash-2'
        ]
    },
    'close': {
        'height': 1024,
        'path': 'M225.835 307.498l225.835 225.835-225.835 225.835c-16.683 16.683-16.683 43.691 0 60.331s43.691 16.683 60.331 0l225.835-225.835 225.835 225.835c16.683 16.683 43.691 16.683 60.331 0s16.683-43.691 0-60.331l-225.835-225.835 225.835-225.835c16.683-16.683 16.683-43.691 0-60.331s-43.691-16.683-60.331 0l-225.835 225.835-225.835-225.835c-16.683-16.683-43.691-16.683-60.331 0s-16.683 43.691 0 60.331z',
        'tags': [
            'close'
        ],
        'ratio': {
            'width': 1.2,
            'height': 1.2
        }
    },
    'compare': {
        'height': 1024,
        'path': 'M0 180.286c0-18.851 12.8-34.164 28.579-34.164h114.362c15.779 0 28.579 15.313 28.579 34.164v830.929c0 18.851-12.8 34.118-28.579 34.118h-114.362c-15.779 0-28.579-15.267-28.579-34.118v-830.929zM238.499 180.286c0-18.851 12.8-34.164 28.579-34.164h114.362c15.779 0 28.579 15.313 28.579 34.164v146.153c0 18.804-12.8 34.118-28.579 34.118h-114.362c-15.779 0-28.579-15.313-28.579-34.164v-146.153zM474.298 55.451c0-18.851 12.847-34.118 28.625-34.118h114.362c15.779 0 28.579 15.267 28.579 34.118v270.941c0 18.851-12.8 34.118-28.579 34.118h-114.362c-15.825 0-28.579-15.267-28.579-34.118v-270.895zM712.844 55.451c0-18.851 12.8-34.118 28.579-34.118h114.362c15.779 0 28.579 15.267 28.579 34.118v955.764c0 18.851-12.8 34.118-28.579 34.118h-114.362c-15.825 0-28.579-15.267-28.579-34.118v-955.764z',
        'tags': [
            'compare'
        ]
    },
    'reverse-axis': {
        'height': 1024,
        'path': 'M69.179 487.102c0.008 246.567 0.493 452.289 1.078 457.161l1.063 8.856h902.041v-77.599h-826.599v-836.72h-77.599l0.015 448.303zM393.056 199.287c1760-624.775 1721.085-609.102 1682.165-593.437l-1799.967 639.865c-28.63 11.27-40.511 16.694-39.278 17.927 2.275 2.275 215.125 134.1 215.746 133.619 0.257-0.199 1.978-16.599 3.822-36.444s3.532-36.587 3.75-37.203c0.629-1.785 33.901 12.202 56.624 23.804 79.304 40.488 143.716 104.813 181.453 181.205 6.022 12.189 11.181 24.819 11.466 28.066l0.519 5.904-29.521 1.21c-16.237 0.666-32.357 1.426-35.822 1.687l-6.3 0.476 61.659 112.152c33.912 61.684 61.835 112.328 62.050 112.543s24.103-52.062 53.083-116.173c28.98-64.111 52.358-116.898 51.953-117.303s-18.081-0.007-39.277 0.887-39.030 1.331-39.631 0.971c-0.602-0.36-1.623-5.921-2.269-12.358-2.192-21.833-23.739-67.197-50.589-106.511-46.737-68.43-112.283-125.378-188.285-163.584-21.016-10.565-53.161-23.996-68.407-28.581l-12.054-3.626 0.682-6.215c1.419-12.91 5.715-62.45 5.715-65.888 0-1.973-0.569-3.514-1.266-3.425s-35.804 13.783-78.020 30.432z',
        'tags': [
            'reverse-axis'
        ],
        ratio: {
            width: 1.1,
            height: 1.1
        }
    },
    'datama': {
        'height': 1024,
        'path': 'M18.6855 0H0V63C13.9863 63 13.3309 50.3408 13.3309 50.3408V12.2894H17.1397C21.4926 12.2894 23.6691 14.73 23.6691 19.6975V43.2902C23.6691 48.2577 21.8513 50.7969 17.1397 50.7969H13.3309C13.3309 60.9415 18.7102 62.5932 22.5191 62.5932C33.7353 62.5932 37 54.0511 37 44.3872V18.6251C37 6.69321 31.7443 0 18.6855 0Z',
        'tags': [
          'datama',
          'logo'
        ],
        'ratio': {
            width: 1,
            height: 1
        }
    },
    'arrow-right': {
        'height': 1024,
        'path': 'M621.254 877.254l320-320c24.994-24.992 24.994-65.516 0-90.51l-320-320c-24.994-24.992-65.516-24.992-90.51 0-24.994 24.994-24.994 65.516 0 90.51l210.746 210.746h-613.49c-35.346 0-64 28.654-64 64s28.654 64 64 64h613.49l-210.746 210.746c-12.496 12.496-18.744 28.876-18.744 45.254s6.248 32.758 18.744 45.254c24.994 24.994 65.516 24.994 90.51 0z',
        'tags': [
          'arrow',
          'right'
        ],
        'ratio': {
            width: 1,
            height: 1
        }
    },
    'arrow-left': {
        'height': 1024,
        'path': 'M402.746 877.254l-320-320c-24.994-24.992-24.994-65.516 0-90.51l320-320c24.994-24.992 65.516-24.992 90.51 0 24.994 24.994 24.994 65.516 0 90.51l-210.746 210.746h613.49c35.346 0 64 28.654 64 64s-28.654 64-64 64h-613.49l210.746 210.746c12.496 12.496 18.744 28.876 18.744 45.254s-6.248 32.758-18.744 45.254c-24.994 24.994-65.516 24.994-90.51 0z',
        'tags': [
          'arrow',
          'left'
        ],
        'ratio': {
            width: 1,
            height: 1
        }
    },
    'arrow-top': {
        'height': 1024,
        'path': 'M877.254 402.746l-320-320c-24.992-24.994-65.514-24.994-90.508 0l-320 320c-24.994 24.994-24.994 65.516 0 90.51 24.994 24.996 65.516 24.996 90.51 0l210.744-210.746v613.49c0 35.346 28.654 64 64 64s64-28.654 64-64v-613.49l210.746 210.746c12.496 12.496 28.876 18.744 45.254 18.744s32.758-6.248 45.254-18.746c24.994-24.994 24.994-65.514 0-90.508z',
        'tags': [
          'arrow',
          'top'
        ],
        'ratio': {
            width: 1,
            height: 1
        }
    },
    'arrow-bottom': {
        'height': 1024,
        'path': 'M877.254 621.254l-320 320c-24.992 24.994-65.514 24.994-90.508 0l-320-320c-24.994-24.994-24.994-65.516 0-90.51 24.994-24.996 65.516-24.996 90.51 0l210.744 210.746v-613.49c0-35.346 28.654-64 64-64s64 28.654 64 64v613.49l210.746-210.746c12.496-12.496 28.876-18.744 45.254-18.744s32.758 6.248 45.254 18.746c24.994 24.994 24.994 65.514 0 90.508z',
        'tags': [
          'arrow',
          'bottom'
        ],
        'ratio': {
            width: 1,
            height: 1
        }
    },
    'text-color': {
        'height': 1024,
        'path': 'M410 512h204l-102-270zM470 128h84l234 598h-96l-46-128h-268l-48 128h-96zM0 854h1024v170h-1024v-170z',
        'tags': [
          'text',
          'color'
        ],
        'ratio': {
            width: 1,
            height: 1
        }
    },
    'gauge': {
        'height': 1024,
        'path': 'M0 307.2c0-56.32 46.080-102.4 102.4-102.4h819.2c56.554 0 102.4 45.846 102.4 102.4v0 409.6c0 56.554-45.846 102.4-102.4 102.4v0h-819.2c-56.554 0-102.4-45.846-102.4-102.4v0-409.6zM102.4 307.2v409.6h819.2v-409.6h-819.2zM153.6 358.4h204.8v307.2h-204.8v-307.2z',
        'tags': [
          'gauge'
        ],
        'ratio': {
            width: 1,
            height: 1
        }
    },
}

/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : images.js project project-deep-sky
 */

const DATAMA_IMAGES = {
    'explosive-datamate': {
        src: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTg4IiBoZWlnaHQ9IjQ0NyIgdmlld0JveD0iMCAwIDU4OCA0NDciIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8ZyBvcGFjaXR5PSIwLjIiPg0KPGcgc3R5bGU9Im1peC1ibGVuZC1tb2RlOm11bHRpcGx5Ij4NCjxwYXRoIGQ9Ik00OS4yMzYzIDM1Ni4wNzRMMTg1LjI2NCAyNTEuODZMNTkuMjMyNyAzNzEuNjk5TDQ5LjIzNjMgMzU2LjA3NFoiIGZpbGw9IiMwMDQ4NEEiLz4NCjxwYXRoIGQ9Ik0yMS4wNjgzIDIyMS44MzFMMTE4Ljk4IDIyMS4zMTFMMTkuMjU3OCAyMzguODEzTDIxLjA2ODMgMjIxLjgzMVoiIGZpbGw9IiMwMDQ4NEEiLz4NCjxwYXRoIGQ9Ik0xNjguNDk2IDM5OS4wNjlMMjA0LjcyNSAzMTMuMDc4TDE5Mi4yNDkgMzk4LjYxOUwxNjguNDk2IDM5OS4wNjlaIiBmaWxsPSIjMDA0ODRBIi8+DQo8cGF0aCBkPSJNNDExLjYxNyAzODUuMDM5TDM4MC4xNCAzMTkuNDE3TDQyNC41ODQgMzgyLjEyTDQxMS42MTcgMzg1LjAzOVoiIGZpbGw9IiMwMDQ4NEEiLz4NCjxwYXRoIGQ9Ik01MjIuMTk5IDM1Ny43MTJMNDM1LjAwOCAyNzAuNjgyTDUzOC44NzggMzQ4LjYyM0w1MjIuMTk5IDM1Ny43MTJaIiBmaWxsPSIjMDA0ODRBIi8+DQo8cGF0aCBkPSJNNTU1LjI0NSAzMDcuNjc2TDM2My4wNjIgMjE4LjI3OUw1NTcuMDA4IDI5NS41OTFMNTU1LjI0NSAzMDcuNjc2WiIgZmlsbD0iIzAwNDg0QSIvPg0KPHBhdGggZD0iTTU0OC43NDYgNTcuMjU4NEw0MDMuMTg3IDE2MS42NjJMNTM5LjE5NiAzMS41NTI1TDU0OC43NDYgNTcuMjU4NFoiIGZpbGw9IiMwMDQ4NEEiLz4NCjxwYXRoIGQ9Ik01NjEuMzI1IDk4LjE1NDVMNDg0LjI4NyAxMzMuMDgxTDU1OS44NzYgMTA4LjMzTDU2MS4zMjUgOTguMTU0NVoiIGZpbGw9IiMwMDQ4NEEiLz4NCjxwYXRoIGQ9Ik00MDEuMjU5IDAuNjEyMzA1TDM1Ny4xNTggMTI5LjgwNEwzODEuNTY5IDAuOTMwNTJMNDAxLjI1OSAwLjYxMjMwNVoiIGZpbGw9IiMwMDQ4NEEiLz4NCjxwYXRoIGQ9Ik02NS4wMjU0IDI2LjY2OTdMMTg4LjQyIDEzNy4xNkw0NC4wNDg4IDM3LjQxNTlMNjUuMDI1NCAyNi42Njk3WiIgZmlsbD0iIzAwNDg0QSIvPg0KPHBhdGggZD0iTTEyNS4wMzcgMTUuMDIzNEwxOTQuNzI2IDEwNC4yMzdMMTQ4LjM5NSAyMC41NTAxTDEyNS4wMzcgMTUuMDIzNFoiIGZpbGw9IiMwMDQ4NEEiLz4NCjxwYXRoIGQ9Ik0zNy41NDIzIDc2LjE5MDRMMTQ3LjczMyAxMzYuMDA0TDM3LjQxOCA5MC4wMDU0TDM3LjU0MjMgNzYuMTkwNFoiIGZpbGw9IiMwMDQ4NEEiLz4NCjxwYXRoIGQ9Ik0wIDMwMS43MzlMMTQ0LjYyMyAyNDYuMDg4TDQuMTg4MDEgMzEyLjI0OEwwIDMwMS43MzlaIiBmaWxsPSIjMDA0ODRBIi8+DQo8cGF0aCBkPSJNMTA4LjU2NiAzNzYuMTIxTDE4MC42ODEgMjkyLjY1NEwxMTcuMTggMzc5Ljc5TDEwOC41NjYgMzc2LjEyMVoiIGZpbGw9IiMwMDQ4NEEiLz4NCjxwYXRoIGQ9Ik00NzIuNTEgMzYwLjQ2M0wzODEuNzk3IDI1OS44OTlMNDg0LjI4OCAzNTkuMDI5TDQ3Mi41MSAzNjAuNDYzWiIgZmlsbD0iIzAwNDg0QSIvPg0KPHBhdGggZD0iTTU3NS4zMDUgMjQ4LjgzNUw0MzkuNzEyIDIxMi42NzJMNTc2Ljg5NiAyNDEuNTY0TDU3NS4zMDUgMjQ4LjgzNVoiIGZpbGw9IiMwMDQ4NEEiLz4NCjxwYXRoIGQ9Ik00ODAuMDMzIDEyLjU1NDRMMzkzLjM3MiAxNDEuMjQ1TDQ4Ni4wNzkgMTkuOTcyMkw0ODAuMDMzIDEyLjU1NDRaIiBmaWxsPSIjMDA0ODRBIi8+DQo8cGF0aCBkPSJNMTcuOTgxNCAxNDMuNjUyTDEyMy41NjcgMTYwLjU3NkwyMS4xNzgyIDE1Mi4wODNMMTcuOTgxNCAxNDMuNjUyWiIgZmlsbD0iIzAwNDg0QSIvPg0KPHBhdGggZD0iTTE5Mi43NjEgMjUuNzQ3OEwyNDUuNjggMTI3LjAyMUwxOTkuNzk0IDI2LjI1MjZMMTkyLjc2MSAyNS43NDc4WiIgZmlsbD0iIzAwNDg0QSIvPg0KPHBhdGggZD0iTTU4OCAxMzguMzIzQzU4Ni4wODcgMTM5LjIxMiA0MzUuMDA0IDE2NS41OCA0MzUuMDA0IDE2NS41OEw1NzcuNjcxIDE0Ny44MjVMNTg4IDEzOC4zMjNaIiBmaWxsPSIjMDA0ODRBIi8+DQo8cGF0aCBkPSJNMzczLjk5OCAzOTAuNjI0TDM1Mi43MjkgMjg3LjI0TDM2NS44MDUgMzkxLjY4OEwzNzMuOTk4IDM5MC42MjRaIiBmaWxsPSIjMDA0ODRBIi8+DQo8L2c+DQo8cGF0aCBkPSJNMTUzLjE3MiA4MS4xMjc5QzE1My4xNjEgODIuNDUyIDE1My44MyA4My4xNDMzIDE1NS4xNSA4My4xNjUyQzE1Ni40NjcgODMuMTg3MiAxNTcuMTU1IDgyLjUxMDUgMTU3LjE2NiA4MS4xNzkxQzE1Ny4xNzcgNzkuODIyMiAxNTYuNTE1IDc5LjEzMDkgMTU1LjIwMiA3OS4xMzA5QzE1My44ODUgNzkuMTMwOSAxNTMuMTgzIDc5LjgxODUgMTUzLjE2OCA4MS4xMjQzTDE1My4xNzIgODEuMTI3OVoiIGZpbGw9IiMxNkQwQjQiLz4NCjxwYXRoIGQ9Ik0xMjcuMTE1IDE0MS43NzJDMTI3LjIyNCAxNDAuNTM5IDEyNi4zNjggMTM5LjYxNCAxMjUuMjA5IDEzOS42NzZDMTIzLjk0NyAxMzkuNzQ2IDEyMy4zIDE0MC4zMzEgMTIzLjI2MyAxNDEuNjA0QzEyMy4yMTkgMTQzLjAxNSAxMjMuODAxIDE0My41OTMgMTI1LjE4NyAxNDMuNjU2QzEyNi4zOSAxNDMuNzEgMTI3LjIwNiAxNDIuOTA2IDEyNy4xMTUgMTQxLjc3MloiIGZpbGw9IiMxNkQwQjQiLz4NCjwvZz4NCjxnIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTpsaWdodGVuIiBvcGFjaXR5PSIwLjIiPg0KPHBhdGggZD0iTTI4Ny4xODQgMzM1Ljk4QzM3OS41MTcgMzM1Ljk4IDQ1NC4zNjggMjYxLjEyOSA0NTQuMzY4IDE2OC43OTZDNDU0LjM2OCA3Ni40NjMxIDM3OS41MTcgMS42MTIzIDI4Ny4xODQgMS42MTIzQzE5NC44NTEgMS42MTIzIDEyMCA3Ni40NjMxIDEyMCAxNjguNzk2QzEyMCAyNjEuMTI5IDE5NC44NTEgMzM1Ljk4IDI4Ny4xODQgMzM1Ljk4WiIgZmlsbD0iIzE2RDBCNCIvPg0KPC9nPg0KPGcgc3R5bGU9Im1peC1ibGVuZC1tb2RlOmxpZ2h0ZW4iIG9wYWNpdHk9IjAuMiI+DQo8cGF0aCBkPSJNMjg3LjMwNiAyODQuMjI0QzM1MS41NCAyODQuMjI0IDQwMy42MTIgMjMyLjE1MiA0MDMuNjEyIDE2Ny45MThDNDAzLjYxMiAxMDMuNjg0IDM1MS41NCA1MS42MTIzIDI4Ny4zMDYgNTEuNjEyM0MyMjMuMDcyIDUxLjYxMjMgMTcxIDEwMy42ODQgMTcxIDE2Ny45MThDMTcxIDIzMi4xNTIgMjIzLjA3MiAyODQuMjI0IDI4Ny4zMDYgMjg0LjIyNFoiIGZpbGw9IiMxNkQwQjQiLz4NCjwvZz4NCjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2ZfNDk3XzE5OTkpIj4NCjxwYXRoIGQ9Ik0yODcuMzY1IDIzNi4zNDNDMzI1LjEyMiAyMzYuMzQzIDM1NS43MyAyMDUuNzM0IDM1NS43MyAxNjcuOTc3QzM1NS43MyAxMzAuMjIgMzI1LjEyMiA5OS42MTIzIDI4Ny4zNjUgOTkuNjEyM0MyNDkuNjA4IDk5LjYxMjMgMjE5IDEzMC4yMiAyMTkgMTY3Ljk3N0MyMTkgMjA1LjczNCAyNDkuNjA4IDIzNi4zNDMgMjg3LjM2NSAyMzYuMzQzWiIgZmlsbD0iI0Y5RjlGOSIgZmlsbC1vcGFjaXR5PSIwLjU1Ii8+DQo8L2c+DQo8cGF0aCBkPSJNMjY0LjMgMTY3LjA1NEMyMzMuMTkxIDE2Mi4yMjEgMTY4LjIxNCAxNTkuMzY4IDEyMC44MDYgMjAzLjczQzEwMy41NDUgMjE5Ljg4NSA5MS4yNDk3IDI0Mi40NDUgNzMuNzAwNSAyNTguMjcyQzU2LjE1MTQgMjc0LjEgMjUuODA2MiAyODYuODYxIDQgMjc3Ljc0N0MxNC45ODUgMzA1LjI0OSA0MC40MTgxIDMyNi40OTkgNjkuNDMzNiAzMzIuNDE5Qzg2Ljg4ODUgMzM1Ljk4MSAxMDQuNDM4IDMzOC4wMSAxMjEuNjk0IDM0Mi40MjFDMTQ5LjQyOSAzNDkuNTAxIDE3NC40ODYgMzczLjA5OSAxNzguODU3IDM5Ny41NDlDMTg5LjAxMyAzOTQuODk1IDE5NC43MzQgMzgzLjI3IDE5Ni4wOTMgMzcyLjg2MUMxOTYuNTQ1IDM2OS40MTcgMTk2LjQ5NSAzNjUuOTU0IDE5Ni4yNzIgMzYyLjQ3NkwyMDMuMzEyIDMxNy4yNTZDMjA2LjMzOSAzMTEuNzYzIDIxMC4yNDkgMzA3IDIxNS4zIDMwMi4wMDRMMjY0LjMgMTY3LjA1OFYxNjcuMDU0WiIgZmlsbD0iI0Y4NjYzQyIvPg0KPHBhdGggZD0iTTIxNS4yNDUgMjYwLjQxMUMyMTMuNTA0IDI2My4yOTkgMjExLjY2MyAyNjYuNDQ5IDIwOS43MTggMjY5Ljg2M0MxODkuMTQyIDI2OS4xMTQgMTcyLjc2NCAyNjAuNTY1IDE2Mi45NzUgMjQzLjA3NUMxOTQuMjk3IDE5MS45NDEgMjExLjc3NyAxNzcuNTgyIDIzOC4xMjggMTcxLjI3MUwyNjAuNTIgMTc2LjZDMjYwLjUyIDE3Ni42IDI4NS43OTQgMTkyLjQ4MiAyODguOTM1IDE5Mi40MTdDMjk0LjUxMiAxOTAuNDY3IDMwNS45NzMgMTgzLjgyNCAzMTYuNjMgMTc3LjgyTDMzOS4yNzUgMTcxLjAxOEMzNjUuOTA5IDE3Ny4zMDkgMzgzLjQ0OCAxOTEuNjI4IDQxNC45NTkgMjQzLjA2NUM0MDMuNDQzIDI1OS41ODIgMzg3LjQ2NyAyNjguNjcyIDM2OC4yMjYgMjY5Ljg1OEMzNjYuMjcxIDI2Ni40NDQgMzY0LjQzNSAyNjMuMjg5IDM2Mi42ODkgMjYwLjQwMUMzNjMuNTIyIDI3Ni40NjIgMzYyLjY0OSAyOTUuMTE3IDM2Mi4yOTcgMzIwLjM1MkMzNjQuMzIxIDMyMy41MDcgMzY0LjMyMSAzMjcuNjMxIDM2Mi4xODggMzMxLjE5OEMzNjEuNDgzIDMzMi4zNjkgMzYyLjE3MyAzMzMuOTQ3IDM2Mi4xNjggMzM1LjM1MUMzNjIuMjAzIDM0Mi4wMDQgMzYyLjIwMyAzNTMuNjM0IDM2Mi41MiAzNjcuMDY1QzM2Mi41NyAzNjkuMDQ1IDM2Mi42MjQgMzcxLjA1IDM2Mi42ODQgMzczLjA4OUMzMjUuNDg3IDM4MS40MTQgMjYyLjIxMiAzODMuMjggMjE1LjIzNSAzNzMuMDg5QzIxNS4yOTUgMzcxLjA1IDIxNS4zNDkgMzY5LjA0NSAyMTUuNDA0IDM2Ny4wNjVDMjE1LjI3IDM1Mi4xOSAyMTUuMzg0IDM0MS42MTcgMjE1Ljc1MSAzMzUuMzQ2QzIxNS43NTEgMzMzLjk0MiAyMTUuNzQxIDMzMi41NjIgMjE1LjczNiAzMzEuMTk4QzIxNC40ODEgMzI3LjYzNiAyMTQuNDgxIDMyMy44MyAyMTUuNjI3IDMyMC4zNTJDMjE1LjI3NSAyOTUuMTIyIDIxNC40MDcgMjc2LjQ2NyAyMTUuMjQgMjYwLjQwNkwyMTUuMjQ1IDI2MC40MTFaIiBmaWxsPSIjMTZEMEI0Ii8+DQo8cGF0aCBkPSJNMTg3LjY1OCAzMDguNDQ0QzE5NS4xOSAzMTMuMzEyIDIwMy4zNTcgMzE4LjIyOCAyMTAuMzI4IDMxOS40NTlDMjExLjIzNiAzMTkuNjIzIDIxMy4zMzQgMzE5LjkxIDIxNS42MzIgMzIwLjM1N0MyMTUuNjgxIDMyMy44NDUgMjE1LjcxNiAzMjcuNDUyIDIxNS43NDEgMzMxLjIwM0MyMTQuNTQ1IDMzMS41MzEgMjEzLjg1IDMzMi4xMzEgMjE0LjI5MiAzMzMuNDMxQzIxNC41MTUgMzM0LjA4MSAyMTUuMDM2IDMzNC43MjEgMjE1Ljc1NiAzMzUuMzUxQzIxOS4wMiAzMzguMTg5IDIyNi40OTMgMzQwLjczOSAyMjkuOTIxIDM0MS45MUMyMzIuMjM4IDM0Mi43MDQgMjMzLjI5NSAzNDQuNjc0IDIzMi43MjQgMzQ3LjA1NUMyMzEuOTk1IDM1MC4wOTcgMjI2LjkwNCAzNTAuMTg2IDIyNC44MTUgMzQ5Ljk4M0MyMjUuNDI2IDM1MC4wNjIgMjI2LjAyNiAzNTAuMTkxIDIyNi42MDIgMzUwLjQwOUMyMjguMDM2IDM1MC45NzUgMjI5LjMyMSAzNTIuMTgxIDIyOS41MzkgMzUzLjcwNEMyMjkuODIyIDM1NS43MzggMjI4LjA4NSAzNTcuNTg5IDIyNi4xMSAzNTguMTg0QzIyNi4wMDYgMzU4LjIwOSAyMjUuOTE3IDM1OC4yMjkgMjI1LjgyMyAzNTguMjU5QzIyMy43NDQgMzU4Ljc1IDIyMS4xNTkgMzU4LjgzOSAyMTguNzAzIDM1OC43OTVDMjE5LjI4MyAzNTguODE0IDIyMy4wODQgMzU5LjA0OCAyMjMuODkzIDM2MC41OTZDMjI0LjUwMyAzNjEuNzU3IDIyNC4xMjYgMzYzLjI2IDIyMy4yODIgMzY0LjI3N0MyMjIuNDM5IDM2NS4yODkgMjIxLjIxMyAzNjUuOTA0IDIxOS45OTMgMzY2LjM5MUMyMTkuNTkxIDM2Ni41NTkgMjE5LjE2OSAzNjYuNzAzIDIxOC43MzMgMzY2LjgxN0MyMTcuNzEgMzY3LjAwNiAyMTYuNTg5IDM2Ny4wOSAyMTUuNDA4IDM2Ny4wN0MyMDYuMzUzIDM2Ni45NzYgMTkzLjE1MSAzNjEuMzk0IDE4MS4zNTcgMzU2LjQ5MkMxNDEuOTUyIDM0MC4xMDkgMTEwLjIzMiAzMzIuNzExIDE1NC4wMzggMjU4QzE1Ny4xMzkgMjUyLjcwMSAxNjAuMTExIDI0Ny43MzkgMTYyLjk2OSAyNDMuMDc1QzE3Ni4zMDEgMjU3LjgzNiAxOTIuMjk3IDI2Ni41NjggMjA5LjcxMiAyNjkuODYzQzIwMy41OSAyODAuNTk1IDE5NS42OTYgMjkzLjAzNCAxODcuNjUzIDMwOC40NDRIMTg3LjY1OFoiIGZpbGw9IiNGQUQwQkUiLz4NCjxwYXRoIGQ9Ik0zOTAuMjk1IDMwOC40NDRDMzgyLjI0MiAyOTMuMDMzIDM3NC4zNTMgMjgwLjU5NSAzNjguMjM2IDI2OS44NjhDMzg3LjA4IDI2Ny4xMTQgNDAyLjc3OCAyNTcuNTE4IDQxNC45NjkgMjQzLjA3QzQxNy44MzIgMjQ3LjcyOSA0MjAuODA0IDI1Mi42OTYgNDIzLjkwNSAyNThDNDY3LjcwMSAzMzIuNzE2IDQzNS45OTEgMzQwLjEwOSAzOTYuNTg2IDM1Ni40OTJDMzg0Ljc4OCAzNjEuMzk0IDM3MS41ODUgMzY2Ljk3NiAzNjIuNTM1IDM2Ny4wN0MzNjEuMzQ5IDM2Ny4wOSAzNjAuMjMzIDM2Ny4wMDYgMzU5LjIwNiAzNjYuODE3QzM1OC43NzQgMzY2LjY5OCAzNTguMzU3IDM2Ni41NTQgMzU3Ljk1IDM2Ni4zOTFDMzU2LjcyNSAzNjUuOTA0IDM1NS40OTkgMzY1LjI4OSAzNTQuNjU2IDM2NC4yNzdDMzUzLjgxMiAzNjMuMjY1IDM1My40MzUgMzYxLjc2MSAzNTQuMDQ2IDM2MC41OTVDMzU0Ljg1OSAzNTkuMDQyIDM1OC42NjUgMzU4LjgxNCAzNTkuMjQgMzU4Ljc5NEMzNTYuNzg0IDM1OC44MzkgMzU0LjE5OSAzNTguNzUgMzUyLjEyNSAzNTguMjU4QzM1Mi4wMzEgMzU4LjIyOSAzNTEuOTM3IDM1OC4yMDkgMzUxLjg0MyAzNTguMTg0QzM0OS44NTggMzU3LjU4OSAzNDguMTE2IDM1NS43MzggMzQ4LjQwNCAzNTMuNzA0QzM0OC42MjMgMzUyLjE3NiAzNDkuOTAzIDM1MC45NzUgMzUxLjM0NiAzNTAuNDA5QzM1MS45MjIgMzUwLjE4NiAzNTIuNTE3IDM1MC4wNjIgMzUzLjEzMyAzNDkuOTgzQzM1MS4wMzkgMzUwLjE5MSAzNDUuOTUzIDM1MC4wOTcgMzQ1LjIxOSAzNDcuMDU1QzM0NC42NDMgMzQ0LjY3NCAzNDUuNzEgMzQyLjcwNCAzNDguMDI3IDM0MS45MUMzNTEuNDUxIDM0MC43NDQgMzU4LjkxMyAzMzguMTk0IDM2Mi4xODMgMzM1LjM2MUMzNjIuOTAyIDMzNC43MzEgMzYzLjQyMyAzMzQuMDkxIDM2My42NDYgMzMzLjQzNkMzNjQuMDkzIDMzMi4xMzYgMzYzLjQwMyAzMzEuNTQgMzYyLjIwMiAzMzEuMjA4QzM2Mi4yMjIgMzI3LjQ1NyAzNjIuMjYyIDMyMy44NTUgMzYyLjMxMiAzMjAuMzYyQzM2NC42MTQgMzE5LjkyIDM2Ni43MTMgMzE5LjYyNyAzNjcuNjE2IDMxOS40NjRDMzc0LjU5MiAzMTguMjMzIDM4Mi43NjMgMzEzLjMxMSAzOTAuMyAzMDguNDQ5TDM5MC4yOTUgMzA4LjQ0NFoiIGZpbGw9IiNGQUQwQkUiLz4NCjxnIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTptdWx0aXBseSI+DQo8cGF0aCBkPSJNMjE4LjkwNyAzNTkuNzk3SDIxOC42MzRDMjE1LjU1OCAzNTkuNzIyIDIxMi4zMzggMzU4Ljk2OCAyMDkuMDUzIDM1Ny41NDRDMjA4LjU0NyAzNTcuMzI2IDIwOC4zMDkgMzU2LjcyNSAyMDguNTMyIDM1Ni4yMTRDMjA4Ljc1NiAzNTUuNzA4IDIwOS4zNTEgMzU1LjQ3IDIwOS44NTcgMzU1LjY5M0MyMTIuOTAzIDM1Ny4wMTMgMjE1Ljg2MSAzNTcuNzEzIDIxOC42NTkgMzU3Ljc3N0gyMTguOTEyQzIxOS40NjggMzU3Ljc4MiAyMTkuOTE5IDM1OC4yMzQgMjE5LjkxNCAzNTguNzk5QzIxOS45MTQgMzU5LjM1IDIxOS40NTggMzU5Ljc5NyAyMTguOTA3IDM1OS43OTdaIiBmaWxsPSIjMDA0ODRBIi8+DQo8L2c+DQo8ZyBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6bXVsdGlwbHkiPg0KPHBhdGggZD0iTTIyNC44MTYgMzUwLjk4NUMyMjQuODE2IDM1MC45ODUgMjI0Ljc2NyAzNTAuOTg1IDIyNC43MzcgMzUwLjk4QzIyNC4wMzcgMzUwLjkyNSAyMTcuODEgMzUwLjM4NCAyMTMuOTkgMzQ4LjE5NkMyMTMuNTA5IDM0Ny45MTkgMjEzLjMzNSAzNDcuMzAzIDIxMy42MDggMzQ2LjgyMkMyMTMuODgxIDM0Ni4zNDEgMjE0LjUwNiAzNDYuMTY3IDIxNC45ODcgMzQ2LjQ1QzIxNy43ODYgMzQ4LjA0OCAyMjIuNTI5IDM0OC43ODcgMjI0Ljg5NSAzNDguOTdDMjI1LjQ1MSAzNDkuMDE1IDIyNS44NjMgMzQ5LjQ5NiAyMjUuODIzIDM1MC4wNTJDMjI1Ljc4NCAzNTAuNTc4IDIyNS4zNDIgMzUwLjk4NSAyMjQuODE2IDM1MC45ODVaIiBmaWxsPSIjMDA0ODRBIi8+DQo8L2c+DQo8ZyBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6bXVsdGlwbHkiPg0KPHBhdGggZD0iTTM1OS4wNDIgMzU5Ljc5N0MzNTguNDg3IDM1OS43OTcgMzU4LjAzNSAzNTkuMzUgMzU4LjAzIDM1OC43OTlDMzU4LjAzIDM1OC4yNDQgMzU4LjQ3NyAzNTcuNzgyIDM1OS4wMzcgMzU3Ljc4MkgzNTkuMzA1QzM2Mi4wODkgMzU3LjcxMyAzNjUuMDUxIDM1Ny4wMTMgMzY4LjA4NyAzNTUuNjkzQzM2OC41OTggMzU1LjQ3IDM2OS4xODkgMzU1LjcwOCAzNjkuNDEyIDM1Ni4yMTRDMzY5LjYzNSAzNTYuNzI1IDM2OS40MDIgMzU3LjMyMSAzNjguODkxIDM1Ny41NDRDMzY1LjYxMiAzNTguOTY4IDM2Mi4zOTIgMzU5LjcyMiAzNTkuMzMgMzU5Ljc5MkgzNTkuMDQ3SDM1OS4wNDJWMzU5Ljc5N1oiIGZpbGw9IiMwMDQ4NEEiLz4NCjwvZz4NCjxnIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTptdWx0aXBseSI+DQo8cGF0aCBkPSJNMzUzLjEyMyAzNTAuOTg1QzM1Mi42MDIgMzUwLjk4NSAzNTIuMTYgMzUwLjU4MyAzNTIuMTE2IDM1MC4wNTJDMzUyLjA3MSAzNDkuNDk2IDM1Mi40ODMgMzQ5LjAxNSAzNTMuMDQzIDM0OC45N0MzNTUuNDEgMzQ4Ljc4MiAzNjAuMTU4IDM0OC4wNDMgMzYyLjk1MiAzNDYuNDVDMzYzLjQzOCAzNDYuMTcyIDM2NC4wNTMgMzQ2LjM0MSAzNjQuMzMxIDM0Ni44MjJDMzY0LjYwNCAzNDcuMzAzIDM2NC40NCAzNDcuOTE5IDM2My45NTkgMzQ4LjE5NkMzNjAuMTM0IDM1MC4zODQgMzUzLjkwMiAzNTAuOTI1IDM1My4yMDIgMzUwLjk4QzM1My4xNzcgMzUwLjk4NSAzNTMuMTUzIDM1MC45ODUgMzUzLjEyMyAzNTAuOTg1WiIgZmlsbD0iIzAwNDg0QSIvPg0KPC9nPg0KPHBhdGggZD0iTTI3NS43MTcgMTQ0LjgzNUMyNzIuMTA1IDE0NS45MzIgMjY3LjU4NSAxNDEuNzY5IDI2OS4xMzggMTM3LjUxN0MyNzAuNDMzIDEzMy45NzQgMjc1LjgwNiAxMzMuNTYzIDI3OC4yMjMgMTM2LjQ2QzI3OC4xMTggMTMzLjY0MiAyNzcuNDM0IDEyNC44OCAyNzcuMzM0IDEyMi4wNjJDMjg4LjU3NyAxMjIuNzI3IDMwMS41MjIgMTIyLjk1IDMwNy43NjkgMTE1LjUyMkMzMDYuNTMzIDExMy42NTIgMzA0Ljk5NSAxMTEuOTk1IDMwMy4xNCAxMTAuNzM5QzI5OS41MDMgMTA4LjI4MyAyOTIuNjIxIDEwNi43NTUgMjg4LjI0IDEwNi42MzZDMjc2LjU0MSAxMDYuMzE0IDI3MS45NjEgMTEwLjk1OCAyNjkuMjc3IDExMy44ODVDMjY2LjAyMiAxMTcuNDUyIDI2My4wNyAxMjMuMTM4IDI2My4yNjggMTI5LjU5OEMyNjMuNjA2IDE0MC41MjQgMjYzLjU1MSAxNDguNjUxIDI2My45ODggMTYwLjAzM0MyNjguNTIzIDE1Ny4zMDkgMjc0LjIxNCAxNTEuOTU1IDI3NS43MTcgMTQ0LjgzNVoiIGZpbGw9IiMwMDQ4NEEiLz4NCjxwYXRoIGQ9Ik0zMTIuNTQxIDEzMy40MzRDMzEyLjE4OSAxMjkuMjExIDMxMS43NDMgMTI0Ljk1NCAzMTAuMzc4IDEyMC45MzFDMzA5LjczOCAxMTkuMDQgMzA4Ljg3IDExNy4xOTQgMzA3Ljc2OCAxMTUuNTI3QzMwMS41MjcgMTIyLjk1NSAyODguNTgyIDEyMi43MzcgMjc3LjMzOSAxMjIuMDY3QzI3Ny40MzggMTI0Ljg4NSAyNzguMTIzIDEzMy42NDcgMjc4LjIyNyAxMzYuNDY1QzI3NS44MTEgMTMzLjU2MyAyNzAuNDM3IDEzMy45OCAyNjkuMTQyIDEzNy41MjJDMjY3LjU4NCAxNDEuNzc0IDI3Mi4xMDkgMTQ1LjkzNyAyNzUuNzE2IDE0NC44NEMyNzQuMjE4IDE1MS45NiAyNjguNTIyIDE1Ny4zMTQgMjYzLjk5MiAxNjAuMDM4QzI2NC4wNzcgMTYyLjI0NiAyNjQuMTc2IDE2NC41NjggMjY0LjMwNSAxNjcuMDU4QzI2NC4zMDUgMTc2LjkyMiAyNjMuNzc0IDE5Mi40NzcgMjg4Ljk0NCAxOTIuNDI3QzMxNC4xMTQgMTkyLjM3MyAzMTMuNTY0IDE2Ni44OTUgMzEzLjU2NCAxNjYuODk1QzMxMy44MzEgMTU1LjY3MiAzMTMuNDg0IDE0NC42MjIgMzEyLjU1MSAxMzMuNDM5TDMxMi41NDEgMTMzLjQzNFoiIGZpbGw9IiNGQUQwQkUiLz4NCjxwYXRoIGQ9Ik0yODguOTM1IDE5Mi40MjJDMjc4LjkwNyAxODguNDYzIDI2OS45NzYgMTc4LjU2NCAyNjQuMjk1IDE2Ny4wNTNDMjU0LjQxMiAxNjguMjQ5IDI0NS44ODggMTY5LjQxIDIzOC4xMjggMTcxLjI3MUMyNDkuMzY2IDE4NS4xMTQgMjY4LjYzNyAxOTIuMzgyIDI4NS43OTQgMTkyLjQ4MkMyODEuOTQ5IDE5Mi44ODggMjc4LjY2OSAxOTQuNTM2IDI3Ni40NDYgMTk3LjYyN0MyNzMuNjM4IDIwMS41MzIgMjcyLjUwNyAyMDYuMzU5IDI3MS40MzUgMjExLjA1M0MyNzYuMTY0IDIxMS4wODMgMjgwLjg1MiAyMDkuMTU4IDI4NC4xNjIgMjA1Ljc4OUMyODcuNDY2IDIwMi40MTUgMjg5LjA1OSAxOTcuMTQ2IDI4OC45MzUgMTkyLjQyMloiIGZpbGw9IiNGODY2M0MiLz4NCjxwYXRoIGQ9Ik0zMDMuOTU4IDEzNy4yMDVDMzAzLjQyMiAxMzcuMjI5IDMwMi45NjEgMTM2LjgyOCAzMDIuOTExIDEzNi4yOTJMMzAyLjU4OSAxMzIuNjg1QzMwMi41MzQgMTMyLjEyOSAzMDIuOTQ2IDEzMS42NDMgMzAzLjQ5NyAxMzEuNTg4QzMwNC4wNDggMTMxLjU1MyAzMDQuNTQ0IDEzMS45NDUgMzA0LjU5OCAxMzIuNDk2TDMwNC45MjEgMTM2LjA5OEMzMDQuOTcgMTM2LjY1NCAzMDQuNTY0IDEzNy4xNDUgMzA0LjAxMyAxMzcuMkgzMDMuOTYzTDMwMy45NTggMTM3LjIwNVoiIGZpbGw9IiMxNkQwQjQiLz4NCjxwYXRoIGQ9Ik0yOTIuNjkxIDEzOC44MTJDMjkyLjE2IDEzOC44MzcgMjkxLjY4OCAxMzguNDM1IDI5MS42NDQgMTM3Ljg5NEwyOTEuMzIxIDEzNC4yOTJDMjkxLjI2NyAxMzMuNzM3IDI5MS42NzggMTMzLjI0NSAyOTIuMjM0IDEzMy4xOTZDMjkyLjc4NSAxMzMuMTY2IDI5My4yODEgMTMzLjU1MyAyOTMuMzMxIDEzNC4xMDRMMjkzLjY1MyAxMzcuNzA2QzI5My43MDggMTM4LjI2MSAyOTMuMjk2IDEzOC43NTMgMjkyLjc0NSAxMzguODAyQzI5Mi43MyAxMzguODAyIDI5Mi43MTUgMTM4LjgwNyAyOTIuNjk2IDEzOC44MDdMMjkyLjY5MSAxMzguODEyWiIgZmlsbD0iIzE2RDBCNCIvPg0KPHBhdGggZD0iTTI2MS43MDEgMTYyLjI1MUMyNjEuMzA5IDE2Mi4yNTEgMjYwLjk0NyAxNjIuMDI3IDI2MC43NzggMTYxLjY1NUMyNjAuNTUgMTYxLjE0OSAyNjAuNzc4IDE2MC41NTQgMjYxLjI4NCAxNjAuMzIxQzI2NC45NDEgMTU4LjY5MyAyNzIuMDg2IDE1My43MDIgMjc0LjM3MyAxNDYuMDIxQzI3Mi43MjEgMTQ1Ljk4MiAyNzEuMDA5IDE0NS4yMDMgMjY5LjcxNCAxNDMuODI4QzI2Ny45MjggMTQxLjk0MyAyNjcuMzU3IDEzOS40NTIgMjY4LjE5MSAxMzcuMTc1QzI2OC44NjUgMTM1LjMzNCAyNzAuNTQyIDEzNC4wMDkgMjcyLjY3NiAxMzMuNjQyQzI3NC4yMTQgMTMzLjM3NCAyNzUuNzkyIDEzMy42MzcgMjc3LjEwNyAxMzQuMzE3QzI3Ny4wMTcgMTMyLjg3MyAyNzYuODkzIDEzMS4wODIgMjc2Ljc3NCAxMjkuMzI2QzI3Ni41ODEgMTI2LjQ3OCAyNzYuMzc3IDEyMy41MjUgMjc2LjMzMyAxMjIuMTExQzI3Ni4zMjMgMTIxLjgyNCAyNzYuNDMyIDEyMS41NTEgMjc2LjY0IDEyMS4zNTJDMjc2Ljg0NCAxMjEuMTQ5IDI3Ny4xMTcgMTIxLjA0NSAyNzcuNDA0IDEyMS4wNjlDMjg3Ljk0OCAxMjEuNjkgMjk5LjcyMiAxMjEuODY4IDMwNS45NDggMTE2LjAxNEMzMDkuMDEgMTEzLjE0MSAzMTAuNTA4IDEwOS4wODcgMzEwLjUyOCAxMDMuNjJDMzEwLjUyOCAxMDMuMDY0IDMxMC45NzUgMTAyLjYxMiAzMTEuNTMgMTAyLjYxMkgzMTEuNTM1QzMxMi4wOTEgMTAyLjYxNyAzMTIuNTQ3IDEwMy4wNjQgMzEyLjU0MiAxMDMuNjI0QzMxMi41MjMgMTA5LjU5MyAzMTAuNzcxIDExNC4yNTIgMzA3LjMyOCAxMTcuNDgyQzMwMC43NDkgMTIzLjY2NCAyODkuMDY5IDEyMy43MjkgMjc4LjQwMiAxMjMuMTQzQzI3OC40ODYgMTI0LjY5NiAyNzguNjQ1IDEyNi45NjkgMjc4Ljc4OSAxMjkuMTg3QzI3OC45ODIgMTMyLjA0OSAyNzkuMTg2IDEzNS4wMDcgMjc5LjIzIDEzNi40MzZDMjc5LjI1IDEzNi44NjIgMjc4Ljk4NyAxMzcuMjU5IDI3OC41ODUgMTM3LjQxM0MyNzguMTgzIDEzNy41NzIgMjc3LjcyMiAxMzcuNDQ4IDI3Ny40NDkgMTM3LjExNUMyNzYuNDU3IDEzNS45MTkgMjc0LjcxNSAxMzUuMzQ0IDI3My4wMTggMTM1LjYzMkMyNzEuNTg0IDEzNS44OCAyNzAuNTE4IDEzNi42OTggMjcwLjA4NiAxMzcuODY5QzI2OS41MiAxMzkuNDE3IDI2OS45MjcgMTQxLjEyNCAyNzEuMTczIDE0Mi40NDRDMjcyLjM4OCAxNDMuNzI5IDI3NC4wNTUgMTQ0LjI4NSAyNzUuNDIgMTQzLjg3M0MyNzUuNzYyIDE0My43NjkgMjc2LjEyOSAxNDMuODUzIDI3Ni4zOTcgMTQ0LjA5MUMyNzYuNjYgMTQ0LjMzNCAyNzYuNzc5IDE0NC42OTIgMjc2LjcwNSAxNDUuMDQ0QzI3NC43NTUgMTU0LjMwNyAyNjYuMzA1IDE2MC4yOTYgMjYyLjEwOCAxNjIuMTYxQzI2MS45NzQgMTYyLjIyNiAyNjEuODM1IDE2Mi4yNTEgMjYxLjcwMSAxNjIuMjUxWiIgZmlsbD0iIzAwNDg0QSIvPg0KPHBhdGggZD0iTTMxMy41NTkgMTY2Ljg5QzMwOS41NDUgMTc1LjQ2NCAyOTYuMjkzIDE4OC4zNTQgMjg4LjkzNSAxOTIuNDIyQzI4OS4zNjEgMTk3LjAxMiAyOTAuODE1IDIwMi4xODIgMjk0LjA2NSAyMDUuNDcxQzI5Ny4zIDIwOC43NjEgMzAxLjcwMSAyMTAuODg5IDMwNi4yOSAyMTEuMzk1QzMwNy4xODMgMjA2LjUyOCAzMDUuOTc4IDE5OS44NCAzMDIuMzQxIDE5Ni40ODFDMjk4LjkwNyAxOTMuMzEgMjk0LjAxIDE5Mi4yMzkgMjg5LjY4OSAxOTIuMzc4QzMwNi43OTEgMTkxLjM3IDMyOC42NjcgMTgyLjc5MiAzMzkuMjggMTcxLjAyM0MzMzEuNjM5IDE2OS4yMDcgMzIzLjI0NCAxNjguMDY2IDMxMy41NTkgMTY2Ljg5WiIgZmlsbD0iI0Y4NjYzQyIvPg0KPGcgc3R5bGU9Im1peC1ibGVuZC1tb2RlOm11bHRpcGx5Ij4NCjxwYXRoIGQ9Ik0yOTIuNTc2IDIyNi4xNTFIMjczLjYyOFYyOTAuMjdDMjg3LjgxOCAyOTAuMjcgMjg3LjE0MyAyNzcuMzg1IDI4Ny4xNDMgMjc3LjM4NVYyMzguNjY0SDI5MS4wMDhDMjk1LjQyNCAyMzguNjY0IDI5Ny42MzIgMjQxLjE1IDI5Ny42MzIgMjQ2LjIwNlYyNzAuMjE1QzI5Ny42MzIgMjc1LjI3NiAyOTUuNzkxIDI3Ny44NTEgMjkxLjAwOCAyNzcuODUxSDI4Ny4xNDNDMjg3LjE0MyAyODguMTcxIDI5Mi42MDEgMjg5Ljg1MyAyOTYuNDYxIDI4OS44NTNDMzA3LjgzOCAyODkuODUzIDMxMS4xNTMgMjgxLjE1NSAzMTEuMTUzIDI3MS4zMjFWMjQ1LjEwNEMzMTEuMTUzIDIzMi45NjMgMzA1LjgxOSAyMjYuMTU2IDI5Mi41NzEgMjI2LjE1NkwyOTIuNTc2IDIyNi4xNTFaIiBmaWxsPSIjMDA0ODRBIi8+DQo8L2c+DQo8cGF0aCBkPSJNMjE3LjE1NSAyNTMuNTI5QzIxNy4xNTUgMjUzLjUyOSAyMTcuMTExIDI1My41MjkgMjE3LjA4NiAyNTMuNTI5QzIxNi42MjkgMjUzLjQ5NCAyMTYuMjk3IDI1My4wOTMgMjE2LjMzMiAyNTIuNjQxTDIyMi43MTcgMjMzLjA5N0MyMjIuNzU3IDIzMi42NDEgMjIzLjE1OSAyMzIuMzEzIDIyMy42MDUgMjMyLjM0M0MyMjQuMDYyIDIzMi4zNzggMjI0LjM5OSAyMzIuNzggMjI0LjM1OSAyMzMuMjMxTDIxNy45NzQgMjUyLjc3NUMyMTcuOTM5IDI1My4yMDcgMjE3LjU3NyAyNTMuNTM0IDIxNy4xNSAyNTMuNTM0TDIxNy4xNTUgMjUzLjUyOVoiIGZpbGw9IiMwMDQ4NEEiLz4NCjxwYXRoIGQ9Ik0zMzkuOTQ1IDI1NC43QzMzOS41MTggMjU0LjcgMzM5LjE2MSAyNTQuMzczIDMzOS4xMjEgMjUzLjk0MUwzMzIuNzM2IDIzNC4zOTdDMzMyLjY5NiAyMzMuOTQ2IDMzMy4wMzMgMjMzLjU0NCAzMzMuNDkgMjMzLjUwOUMzMzMuOTM2IDIzMy40NzQgMzM0LjMzOCAyMzMuODA3IDMzNC4zNzggMjM0LjI2M0wzNDAuNzYzIDI1My44MDdDMzQwLjc5OCAyNTQuMjYzIDM0MC40NjYgMjU0LjY2IDM0MC4wMDkgMjU0LjY5NUMzMzkuOTg0IDI1NC42OTUgMzM5Ljk2IDI1NC42OTUgMzM5Ljk0IDI1NC42OTVMMzM5Ljk0NSAyNTQuN1oiIGZpbGw9IiMwMDQ4NEEiLz4NCjxkZWZzPg0KPGZpbHRlciBpZD0iZmlsdGVyMF9mXzQ5N18xOTk5IiB4PSIyMDgiIHk9Ijg4LjYxMjMiIHdpZHRoPSIxNTguNzMiIGhlaWdodD0iMTU4LjczIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+DQo8ZmVGbG9vZCBmbG9vZC1vcGFjaXR5PSIwIiByZXN1bHQ9IkJhY2tncm91bmRJbWFnZUZpeCIvPg0KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0ic2hhcGUiLz4NCjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjUuNSIgcmVzdWx0PSJlZmZlY3QxX2ZvcmVncm91bmRCbHVyXzQ5N18xOTk5Ii8+DQo8L2ZpbHRlcj4NCjwvZGVmcz4NCjwvc3ZnPg0K',
        title: 'Your data mate',
        alt: 'Your data mate'
    },
    'super-datamate': {
        src: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjciIGhlaWdodD0iNTUiIHZpZXdCb3g9IjAgMCA2NyA1NSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6cGx1cy1kYXJrZXIiIG9wYWNpdHk9IjAuMiI+PHBhdGggZD0iTTMxLjM2NzkgMzguMDM3NEM0MS41OTU1IDM4LjAzNzQgNDkuODg2NiAyOS43NDYzIDQ5Ljg4NjYgMTkuNTE4N0M0OS44ODY2IDkuMjkxMTEgNDEuNTk1NSAxIDMxLjM2NzkgMUMyMS4xNDAzIDEgMTIuODQ5MSA5LjI5MTExIDEyLjg0OTEgMTkuNTE4N0MxMi44NDkxIDI5Ljc0NjMgMjEuMTQwMyAzOC4wMzc0IDMxLjM2NzkgMzguMDM3NFoiIGZpbGw9IiMxNkQwQjQiLz48L2c+PGcgc3R5bGU9Im1peC1ibGVuZC1tb2RlOnBsdXMtZGFya2VyIiBvcGFjaXR5PSIwLjIiPjxwYXRoIGQ9Ik0zMS4zODE0IDMyLjMwNDRDMzguNDk2NSAzMi4zMDQ0IDQ0LjI2NDQgMjYuNTM2NSA0NC4yNjQ0IDE5LjQyMTRDNDQuMjY0NCAxMi4zMDYzIDM4LjQ5NjUgNi41MzgzMyAzMS4zODE0IDYuNTM4MzNDMjQuMjY2MyA2LjUzODMzIDE4LjQ5ODMgMTIuMzA2MyAxOC40OTgzIDE5LjQyMTRDMTguNDk4MyAyNi41MzY1IDI0LjI2NjMgMzIuMzA0NCAzMS4zODE0IDMyLjMwNDRaIiBmaWxsPSIjMTZEMEI0Ii8+PC9nPjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2ZfMTUyXzQwOTcpIj48cGF0aCBkPSJNMzEuMzg3OSAyNy4wMDA2QzM1LjU3MDIgMjcuMDAwNiAzOC45NjA2IDIzLjYxMDIgMzguOTYwNiAxOS40Mjc5QzM4Ljk2MDYgMTUuMjQ1NiAzNS41NzAyIDExLjg1NTIgMzEuMzg3OSAxMS44NTUyQzI3LjIwNTYgMTEuODU1MiAyMy44MTUyIDE1LjI0NTYgMjMuODE1MiAxOS40Mjc5QzIzLjgxNTIgMjMuNjEwMiAyNy4yMDU2IDI3LjAwMDYgMzEuMzg3OSAyNy4wMDA2WiIgZmlsbD0iI0Y5RjlGOSIgZmlsbC1vcGFjaXR5PSIwLjU1Ii8+PC9nPjxwYXRoIGQ9Ik0yOC44MzMxIDE5LjMyNTZDMjUuMzg3MiAxOC43OTAzIDE4LjE4OTcgMTguNDc0MyAxMi45Mzg0IDIzLjM4ODJDMTEuMDI2NCAyNS4xNzc2IDkuNjY0NTIgMjcuNjc2NiA3LjcyMDYzIDI5LjQyOThDNS43NzY3MyAzMS4xODMgMi40MTU0NCAzMi41OTY1IDAgMzEuNTg2OUMxLjIxNjc5IDM0LjYzMzMgNC4wMzM5OCAzNi45ODcyIDcuMjQ3OTggMzcuNjQyOUM5LjE4MTQzIDM4LjAzNzUgMTEuMTI1MyAzOC4yNjIyIDEzLjAzNjggMzguNzUwOEMxNi4xMDkgMzkuNTM1MSAxOC44ODQ0IDQyLjE0ODkgMTkuMzY4NiA0NC44NTczQzIwLjQ5MzYgNDQuNTYzMyAyMS4xMjczIDQzLjI3NTYgMjEuMjc3OSA0Mi4xMjI2QzIxLjMyNzkgNDEuNzQxMSAyMS4zMjI0IDQxLjM1NzUgMjEuMjk3NyA0MC45NzIzTDIyLjA3NzUgMzUuOTYzM0MyMi40MTI4IDM1LjM1NDkgMjIuODQ1OSAzNC44MjczIDIzLjQwNTMgMzQuMjczOUwyOC44MzMxIDE5LjMyNjJWMTkuMzI1NloiIGZpbGw9IiNGODY2M0MiLz48cGF0aCBkPSJNMjMuMzk5MyAyOS42NjY2QzIzLjIwNjQgMjkuOTg2NCAyMy4wMDI1IDMwLjMzNTQgMjIuNzg3MSAzMC43MTM2QzIwLjUwNzkgMzAuNjMwNiAxOC42OTM3IDI5LjY4MzYgMTcuNjA5NCAyNy43NDYzQzIxLjA3ODkgMjIuMDgyMyAyMy4wMTUxIDIwLjQ5MTggMjUuOTM0IDE5Ljc5MjdMMjguNDE0MyAyMC4zODI5QzI4LjQxNDMgMjAuMzgyOSAzMS4yMTM5IDIyLjE0MjIgMzEuNTYxOCAyMi4xMzVDMzIuMTc5NSAyMS45MTkgMzMuNDQ5MSAyMS4xODMxIDM0LjYyOTYgMjAuNTE4MUwzNy4xMzc5IDE5Ljc2NDZDNDAuMDg4MSAyMC40NjE1IDQyLjAzMDkgMjIuMDQ3NiA0NS41MjE0IDI3Ljc0NTJDNDQuMjQ1OCAyOS41NzQ4IDQyLjQ3NjEgMzAuNTgxNyA0MC4zNDQ4IDMwLjcxM0M0MC4xMjgyIDMwLjMzNDkgMzkuOTI0OSAyOS45ODUzIDM5LjczMTQgMjkuNjY1NUMzOS44MjM4IDMxLjQ0NDUgMzkuNzI3IDMzLjUxMSAzOS42ODggMzYuMzA2MkMzOS45MTIzIDM2LjY1NTcgMzkuOTEyMyAzNy4xMTI0IDM5LjY3NTkgMzcuNTA3NkMzOS41OTc5IDM3LjYzNzMgMzkuNjc0MyAzNy44MTIgMzkuNjczNyAzNy45Njc2QzM5LjY3NzYgMzguNzA0NiAzOS42Nzc2IDM5Ljk5MjggMzkuNzEyOCA0MS40ODA1QzM5LjcxODMgNDEuNjk5OCAzOS43MjQzIDQxLjkyMTkgMzkuNzMwOSA0Mi4xNDc3QzM1LjYxMDYgNDMuMDcgMjguNjAxNyA0My4yNzY2IDIzLjM5ODIgNDIuMTQ3N0MyMy40MDQ4IDQxLjkyMTkgMjMuNDEwOCA0MS42OTk4IDIzLjQxNjkgNDEuNDgwNUMyMy40MDIxIDM5LjgzMjkgMjMuNDE0NyAzOC42NjE3IDIzLjQ1NTQgMzcuOTY3QzIzLjQ1NTQgMzcuODExNSAyMy40NTQzIDM3LjY1ODcgMjMuNDUzNyAzNy41MDc2QzIzLjMxNDcgMzcuMTEzIDIzLjMxNDcgMzYuNjkxNCAyMy40NDE2IDM2LjMwNjJDMjMuNDAyNiAzMy41MTE1IDIzLjMwNjQgMzEuNDQ1MSAyMy4zOTg4IDI5LjY2NkwyMy4zOTkzIDI5LjY2NjZaIiBmaWxsPSIjMTZEMEI0Ii8+PHBhdGggZD0iTTIwLjM0MzUgMzQuOTg3NEMyMS4xNzc4IDM1LjUyNjYgMjIuMDgyNCAzNi4wNzEyIDIyLjg1NDYgMzYuMjA3NUMyMi45NTUyIDM2LjIyNTYgMjMuMTg3NyAzNi4yNTc1IDIzLjQ0MjEgMzYuMzA3QzIzLjQ0NzYgMzYuNjkzMyAyMy40NTE1IDM3LjA5MjkgMjMuNDU0MiAzNy41MDg0QzIzLjMyMTggMzcuNTQ0NyAyMy4yNDQ4IDM3LjYxMTIgMjMuMjkzNyAzNy43NTUxQzIzLjMxODUgMzcuODI3MSAyMy4zNzYyIDM3Ljg5OCAyMy40NTU5IDM3Ljk2NzhDMjMuODE3NSAzOC4yODIyIDI0LjY0NTIgMzguNTY0NyAyNS4wMjQ5IDM4LjY5NDRDMjUuMjgxNiAzOC43ODIzIDI1LjM5ODcgMzkuMDAwNSAyNS4zMzU1IDM5LjI2NDNDMjUuMjU0NyAzOS42MDEyIDI0LjY5MDggMzkuNjExMSAyNC40NTk0IDM5LjU4ODZDMjQuNTI3IDM5LjU5NzQgMjQuNTkzNSAzOS42MTE3IDI0LjY1NzMgMzkuNjM1OEMyNC44MTYxIDM5LjY5ODUgMjQuOTU4NCAzOS44MzIgMjQuOTgyNiA0MC4wMDA4QzI1LjAxMzkgNDAuMjI2MSAyNC44MjE2IDQwLjQzMTEgMjQuNjAyOSA0MC40OTdDMjQuNTkxMyA0MC40OTk4IDI0LjU4MTQgNDAuNTAyIDI0LjU3MSA0MC41MDUzQzI0LjM0MDcgNDAuNTU5NyAyNC4wNTQ0IDQwLjU2OTYgMjMuNzgyMyA0MC41NjQ2QzIzLjg0NjYgNDAuNTY2OCAyNC4yNjc2IDQwLjU5MjcgMjQuMzU3MiA0MC43NjQxQzI0LjQyNDggNDAuODkyNyAyNC4zODMgNDEuMDU5MyAyNC4yODk2IDQxLjE3MTlDMjQuMTk2MiA0MS4yODQxIDI0LjA2MDQgNDEuMzUyMiAyMy45MjUyIDQxLjQwNjFDMjMuODgwNyA0MS40MjQ3IDIzLjgzNCA0MS40NDA3IDIzLjc4NTYgNDEuNDUzM0MyMy42NzI0IDQxLjQ3NDIgMjMuNTQ4MiA0MS40ODM2IDIzLjQxNzQgNDEuNDgxNEMyMi40MTQ0IDQxLjQ3MDkgMjAuOTUxOSA0MC44NTI2IDE5LjY0NTYgNDAuMzA5NkMxNS4yODA3IDM4LjQ5NDkgMTEuNzY3MiAzNy42NzU1IDE2LjYxOTUgMjkuMzk5N0MxNi45NjMgMjguODEyOCAxNy4yOTIyIDI4LjI2MzIgMTcuNjA4OCAyNy43NDY2QzE5LjA4NTUgMjkuMzgxNiAyMC44NTc0IDMwLjM0ODkgMjIuNzg2NSAzMC43MTM4QzIyLjEwODMgMzEuOTAyNiAyMS4yMzM5IDMzLjI4MDQgMjAuMzQzIDM0Ljk4NzRIMjAuMzQzNVoiIGZpbGw9IiNGQUQwQkUiLz48cGF0aCBkPSJNNDIuNzg5MyAzNC45ODdDNDEuODk3MyAzMy4yOCA0MS4wMjM1IDMxLjkwMjEgNDAuMzQ1OSAzMC43MTM5QzQyLjQzMzIgMzAuNDA4OSA0NC4xNzIxIDI5LjM0NiA0NS41MjI0IDI3Ljc0NTZDNDUuODM5NiAyOC4yNjE3IDQ2LjE2ODggMjguODExOCA0Ni41MTIyIDI5LjM5OTNDNTEuMzYzNSAzNy42NzU2IDQ3Ljg1MSAzOC40OTQ1IDQzLjQ4NjIgNDAuMzA5MkM0Mi4xNzkzIDQwLjg1MjIgNDAuNzE2OCA0MS40NzA1IDM5LjcxNDQgNDEuNDgwOUMzOS41ODMgNDEuNDgzMSAzOS40NTk0IDQxLjQ3MzggMzkuMzQ1NiA0MS40NTI5QzM5LjI5NzggNDEuNDM5NyAzOS4yNTE2IDQxLjQyMzggMzkuMjA2NiA0MS40MDU2QzM5LjA3MDggNDEuMzUxOCAzOC45MzUxIDQxLjI4MzYgMzguODQxNiA0MS4xNzE1QzM4Ljc0ODIgNDEuMDU5NCAzOC43MDY0IDQwLjg5MjkgMzguNzc0IDQwLjc2MzdDMzguODY0MiA0MC41OTE3IDM5LjI4NTcgNDAuNTY2NCAzOS4zNDk1IDQwLjU2NDJDMzkuMDc3NCA0MC41NjkyIDM4Ljc5MTEgNDAuNTU5MyAzOC41NjEzIDQwLjUwNDlDMzguNTUwOSA0MC41MDE2IDM4LjU0MDUgNDAuNDk5NCAzOC41MyA0MC40OTY2QzM4LjMxMDIgNDAuNDMwNyAzOC4xMTczIDQwLjIyNTcgMzguMTQ5MiA0MC4wMDAzQzM4LjE3MzMgMzkuODMxMSAzOC4zMTUxIDM5LjY5ODEgMzguNDc1MSAzOS42MzU0QzM4LjUzODggMzkuNjEwNyAzOC42MDQ4IDM5LjU5NjkgMzguNjcyOSAzOS41ODgxQzM4LjQ0MSAzOS42MTEyIDM3Ljg3NzcgMzkuNjAwOCAzNy43OTYzIDM5LjI2MzlDMzcuNzMyNiAzOS4wMDAxIDM3Ljg1MDcgMzguNzgxOSAzOC4xMDc0IDM4LjY5NEMzOC40ODY2IDM4LjU2NDggMzkuMzEzMiAzOC4yODIzIDM5LjY3NTQgMzcuOTY4NUMzOS43NTUgMzcuODk4NyAzOS44MTI4IDM3LjgyNzggMzkuODM3NSAzNy43NTUzQzM5Ljg4NyAzNy42MTEzIDM5LjgxMDYgMzcuNTQ1MyAzOS42Nzc2IDM3LjUwODVDMzkuNjc5OCAzNy4wOTMgMzkuNjg0MiAzNi42OTQgMzkuNjg5NiAzNi4zMDcxQzM5Ljk0NDcgMzYuMjU4MiA0MC4xNzcxIDM2LjIyNTggNDAuMjc3MiAzNi4yMDc2QzQxLjA0OTkgMzYuMDcxMyA0MS45NTUxIDM1LjUyNjEgNDIuNzg5OSAzNC45ODc1TDQyLjc4OTMgMzQuOTg3WiIgZmlsbD0iI0ZBRDBCRSIvPjxnIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTptdWx0aXBseSI+PHBhdGggZD0iTTIzLjgwNDkgNDAuNjc1NUgyMy43NzQ3QzIzLjQzNCA0MC42NjcyIDIzLjA3NzMgNDAuNTgzNyAyMi43MTM0IDQwLjQyNkMyMi42NTc0IDQwLjQwMTggMjIuNjMxIDQwLjMzNTMgMjIuNjU1NyA0MC4yNzg3QzIyLjY4MDUgNDAuMjIyNiAyMi43NDY0IDQwLjE5NjIgMjIuODAyNSA0MC4yMjFDMjMuMTM5OSA0MC4zNjcyIDIzLjQ2NzUgNDAuNDQ0NyAyMy43Nzc0IDQwLjQ1MThIMjMuODA1NUMyMy44NjcgNDAuNDUyNCAyMy45MTcgNDAuNTAyNCAyMy45MTY1IDQwLjU2NUMyMy45MTY1IDQwLjYyNiAyMy44NjU5IDQwLjY3NTUgMjMuODA0OSA0MC42NzU1WiIgZmlsbD0iIzAwNDg0QSIvPjwvZz48ZyBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6bXVsdGlwbHkiPjxwYXRoIGQ9Ik0yNC40NTk1IDM5LjY5OTNDMjQuNDU5NSAzOS42OTkzIDI0LjQ1NCAzOS42OTkzIDI0LjQ1MDcgMzkuNjk4N0MyNC4zNzMyIDM5LjY5MjcgMjMuNjgzNCAzOS42MzI4IDIzLjI2MDMgMzkuMzkwNEMyMy4yMDY5IDM5LjM1OTcgMjMuMTg3NyAzOS4yOTE1IDIzLjIxNzkgMzkuMjM4MkMyMy4yNDgyIDM5LjE4NDkgMjMuMzE3NCAzOS4xNjU2IDIzLjM3MDcgMzkuMTk3QzIzLjY4MDcgMzkuMzczOSAyNC4yMDYxIDM5LjQ1NTggMjQuNDY4MyAzOS40NzYyQzI0LjUyOTggMzkuNDgxMSAyNC41NzU0IDM5LjUzNDQgMjQuNTcxIDM5LjU5NkMyNC41NjY2IDM5LjY1NDIgMjQuNTE3NyAzOS42OTkzIDI0LjQ1OTUgMzkuNjk5M1oiIGZpbGw9IiMwMDQ4NEEiLz48L2c+PGcgc3R5bGU9Im1peC1ibGVuZC1tb2RlOm11bHRpcGx5Ij48cGF0aCBkPSJNMzkuMzI3NSA0MC42NzU1QzM5LjI2NiA0MC42NzU1IDM5LjIxNiA0MC42MjYgMzkuMjE1NCA0MC41NjVDMzkuMjE1NCA0MC41MDM1IDM5LjI2NDkgNDAuNDUyNCAzOS4zMjcgNDAuNDUyNEgzOS4zNTY3QzM5LjY2NSA0MC40NDQ3IDM5Ljk5MzEgNDAuMzY3MiA0MC4zMjk0IDQwLjIyMUM0MC4zODYgNDAuMTk2MiA0MC40NTE0IDQwLjIyMjYgNDAuNDc2MiA0MC4yNzg3QzQwLjUwMDkgNDAuMzM1MyA0MC40NzUxIDQwLjQwMTIgNDAuNDE4NSA0MC40MjZDNDAuMDU1MiA0MC41ODM3IDM5LjY5ODUgNDAuNjY3MiAzOS4zNTk0IDQwLjY3NDlIMzkuMzI4MUgzOS4zMjc1VjQwLjY3NTVaIiBmaWxsPSIjMDA0ODRBIi8+PC9nPjxnIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTptdWx0aXBseSI+PHBhdGggZD0iTTM4LjY3MTggMzkuNjk5NUMzOC42MTQxIDM5LjY5OTUgMzguNTY1MiAzOS42NTUgMzguNTYwMyAzOS41OTYyQzM4LjU1NTMgMzkuNTM0NyAzOC42MDA5IDM5LjQ4MTQgMzguNjYzIDM5LjQ3NjRDMzguOTI1MiAzOS40NTU1IDM5LjQ1MTIgMzkuMzczNiAzOS43NjA2IDM5LjE5NzJDMzkuODE0NCAzOS4xNjY0IDM5Ljg4MjYgMzkuMTg1MSAzOS45MTM0IDM5LjIzODRDMzkuOTQzNiAzOS4yOTE3IDM5LjkyNTQgMzkuMzU5OSAzOS44NzIxIDM5LjM5MDdDMzkuNDQ4NCAzOS42MzMgMzguNzU4MSAzOS42OTI5IDM4LjY4MDYgMzkuNjk5QzM4LjY3NzkgMzkuNjk5NSAzOC42NzUxIDM5LjY5OTUgMzguNjcxOCAzOS42OTk1WiIgZmlsbD0iIzAwNDg0QSIvPjwvZz48cGF0aCBkPSJNMzAuMDk3NyAxNi44NjQ2QzI5LjY5NzYgMTYuOTg2MSAyOS4xOTY5IDE2LjUyNSAyOS4zNjg5IDE2LjA1NEMyOS41MTI0IDE1LjY2MTYgMzAuMTA3NiAxNS42MTYgMzAuMzc1MiAxNS45MzY5QzMwLjM2MzcgMTUuNjI0OCAzMC4yODc4IDE0LjY1NDIgMzAuMjc2OSAxNC4zNDJDMzEuNTIyMiAxNC40MTU3IDMyLjk1NjEgMTQuNDQwNCAzMy42NDggMTMuNjE3N0MzMy41MTEyIDEzLjQxMDUgMzMuMzQwOCAxMy4yMjY5IDMzLjEzNTMgMTMuMDg3OUMzMi43MzI0IDEyLjgxNTggMzEuOTcwMSAxMi42NDY1IDMxLjQ4NDggMTIuNjMzNEMzMC4xODg5IDEyLjU5NzYgMjkuNjgxNiAxMy4xMTIgMjkuMzg0MyAxMy40MzYzQzI5LjAyMzggMTMuODMxNSAyOC42OTY4IDE0LjQ2MTMgMjguNzE4OCAxNS4xNzY5QzI4Ljc1NjEgMTYuMzg3IDI4Ljc1MDEgMTcuMjg3MyAyOC43OTg1IDE4LjU0OEMyOS4zMDA4IDE4LjI0NjMgMjkuOTMxMiAxNy42NTMzIDMwLjA5NzcgMTYuODY0NloiIGZpbGw9IiMwMDQ4NEEiLz48cGF0aCBkPSJNMzQuMTc2NyAxNS42MDE2QzM0LjEzNzcgMTUuMTMzOSAzNC4wODgyIDE0LjY2MjQgMzMuOTM3MSAxNC4yMTY3QzMzLjg2NjIgMTQuMDA3MyAzMy43NyAxMy44MDI4IDMzLjY0OCAxMy42MTgyQzMyLjk1NjYgMTQuNDQwOSAzMS41MjI3IDE0LjQxNjcgMzAuMjc3MyAxNC4zNDI1QzMwLjI4ODMgMTQuNjU0NyAzMC4zNjQyIDE1LjYyNTMgMzAuMzc1NyAxNS45Mzc0QzMwLjEwODEgMTUuNjE1OSAyOS41MTI5IDE1LjY2MjEgMjkuMzY5NCAxNi4wNTQ1QzI5LjE5NjkgMTYuNTI1NSAyOS42OTgxIDE2Ljk4NjYgMzAuMDk3NiAxNi44NjUxQzI5LjkzMTcgMTcuNjUzOCAyOS4zMDA3IDE4LjI0NjggMjguNzk5IDE4LjU0ODVDMjguODA4MyAxOC43OTMxIDI4LjgxOTMgMTkuMDUwMyAyOC44MzM2IDE5LjMyNjJDMjguODMzNiAyMC40MTg4IDI4Ljc3NDggMjIuMTQxNyAzMS41NjI4IDIyLjEzNjJDMzQuMzUwOSAyMi4xMzAyIDM0LjI4OTkgMTkuMzA4MSAzNC4yODk5IDE5LjMwODFDMzQuMzE5NiAxOC4wNjQ5IDM0LjI4MTEgMTYuODQxIDM0LjE3NzggMTUuNjAyMkwzNC4xNzY3IDE1LjYwMTZaIiBmaWxsPSIjRkFEMEJFIi8+PHBhdGggZD0iTTMxLjU2MTggMjIuMTM1NUMzMC40NTExIDIxLjY5NjkgMjkuNDYxOCAyMC42MDA1IDI4LjgzMjUgMTkuMzI1NEMyNy43Mzc4IDE5LjQ1NzkgMjYuNzkzNiAxOS41ODY1IDI1LjkzNCAxOS43OTI2QzI3LjE3ODggMjEuMzI1OSAyOS4zMTM0IDIyLjEzMTEgMzEuMjEzOSAyMi4xNDIxQzMwLjc4OCAyMi4xODcxIDMwLjQyNDcgMjIuMzY5NiAzMC4xNzg1IDIyLjcxMkMyOS44Njc0IDIzLjE0NDUgMjkuNzQyMSAyMy42NzkzIDI5LjYyMzQgMjQuMTk5MkMzMC4xNDcyIDI0LjIwMjUgMzAuNjY2NSAyMy45ODkyIDMxLjAzMzEgMjMuNjE2MUMzMS4zOTkxIDIzLjI0MjQgMzEuNTc1NSAyMi42NTg3IDMxLjU2MTggMjIuMTM1NVoiIGZpbGw9IiNGODY2M0MiLz48cGF0aCBkPSJNMzMuMjI2IDE2LjAxODlDMzMuMTY2NiAxNi4wMjE2IDMzLjExNTUgMTUuOTc3MSAzMy4xMSAxNS45MTc3TDMzLjA3NDMgMTUuNTE4MkMzMy4wNjgyIDE1LjQ1NjYgMzMuMTEzOCAxNS40MDI4IDMzLjE3NDggMTUuMzk2N0MzMy4yMzU4IDE1LjM5MjkgMzMuMjkwOCAxNS40MzYzIDMzLjI5NjggMTUuNDk3M0wzMy4zMzI2IDE1Ljg5NjNDMzMuMzM4MSAxNS45NTc5IDMzLjI5MyAxNi4wMTIzIDMzLjIzMiAxNi4wMTgzSDMzLjIyNjVMMzMuMjI2IDE2LjAxODlaIiBmaWxsPSIjMTZEMEI0Ii8+PHBhdGggZD0iTTMxLjk3NzggMTYuMTk3NUMzMS45MTkgMTYuMjAwMyAzMS44NjY4IDE2LjE1NTcgMzEuODYxOSAxNi4wOTU4TDMxLjgyNjIgMTUuNjk2OEMzMS44MjAxIDE1LjYzNTMgMzEuODY1NyAxNS41ODA5IDMxLjkyNzMgMTUuNTc1NEMzMS45ODgzIDE1LjU3MjEgMzIuMDQzMiAxNS42MTQ5IDMyLjA0ODcgMTUuNjc1OUwzMi4wODQ1IDE2LjA3NDlDMzIuMDkwNSAxNi4xMzY1IDMyLjA0NDkgMTYuMTkwOSAzMS45ODM5IDE2LjE5NjRDMzEuOTgyMiAxNi4xOTY0IDMxLjk4MDYgMTYuMTk3IDMxLjk3ODQgMTYuMTk3TDMxLjk3NzggMTYuMTk3NVoiIGZpbGw9IiMxNkQwQjQiLz48cGF0aCBkPSJNMjguNTQ1MiAxOC43OTM2QzI4LjUwMTcgMTguNzkzNiAyOC40NjE2IDE4Ljc2ODggMjguNDQyOSAxOC43Mjc2QzI4LjQxNzcgMTguNjcxNSAyOC40NDI5IDE4LjYwNTYgMjguNDk5IDE4LjU3OThDMjguOTA0IDE4LjM5OTUgMjkuNjk1NCAxNy44NDY2IDI5Ljk0ODggMTYuOTk1OUMyOS43NjU4IDE2Ljk5MTUgMjkuNTc2MiAxNi45MDUyIDI5LjQzMjcgMTYuNzUyOUMyOS4yMzQ5IDE2LjU0NDEgMjkuMTcxNyAxNi4yNjgyIDI5LjI2NCAxNi4wMTU5QzI5LjMzODggMTUuODEyIDI5LjUyNDUgMTUuNjY1MyAyOS43NjA4IDE1LjYyNDZDMjkuOTMxMiAxNS41OTUgMzAuMTA2IDE1LjYyNDEgMzAuMjUxNiAxNS42OTk0QzMwLjI0MTcgMTUuNTM5NCAzMC4yMjggMTUuMzQxIDMwLjIxNDggMTUuMTQ2NUMzMC4xOTM0IDE0LjgzMSAzMC4xNzA4IDE0LjUwNCAzMC4xNjU5IDE0LjM0NzRDMzAuMTY0OCAxNC4zMTU1IDMwLjE3NjkgMTQuMjg1MyAzMC4yIDE0LjI2MzNDMzAuMjIyNSAxNC4yNDA4IDMwLjI1MjcgMTQuMjI5MiAzMC4yODQ2IDE0LjIzMkMzMS40NTI1IDE0LjMwMDcgMzIuNzU2NyAxNC4zMjA1IDMzLjQ0NjQgMTMuNjcxOUMzMy43ODU1IDEzLjM1MzcgMzMuOTUxNSAxMi45MDQ3IDMzLjk1MzcgMTIuMjk5MUMzMy45NTM3IDEyLjIzNzUgMzQuMDAzMSAxMi4xODc1IDM0LjA2NDcgMTIuMTg3NUgzNC4wNjUyQzM0LjEyNjggMTIuMTg4IDM0LjE3NzMgMTIuMjM3NSAzNC4xNzY4IDEyLjI5OTZDMzQuMTc0NiAxMi45NjA4IDMzLjk4MDYgMTMuNDc2OCAzMy41OTkyIDEzLjgzNDZDMzIuODcwNCAxNC41MTk0IDMxLjU3NjcgMTQuNTI2NSAzMC4zOTUxIDE0LjQ2MTdDMzAuNDA0NCAxNC42MzM3IDMwLjQyMiAxNC44ODU0IDMwLjQzNzkgMTUuMTMxMUMzMC40NTk0IDE1LjQ0ODIgMzAuNDgxOSAxNS43NzU4IDMwLjQ4NjkgMTUuOTM0QzMwLjQ4OTEgMTUuOTgxMyAzMC40NTk5IDE2LjAyNTMgMzAuNDE1NCAxNi4wNDIzQzMwLjM3MDkgMTYuMDU5OSAzMC4zMTk4IDE2LjA0NjIgMzAuMjg5NiAxNi4wMDkzQzMwLjE3OTYgMTUuODc2OSAyOS45ODY3IDE1LjgxMzEgMjkuNzk4OCAxNS44NDVDMjkuNjM5OSAxNS44NzI1IDI5LjUyMTggMTUuOTYzMiAyOS40NzQgMTYuMDkyOUMyOS40MTEzIDE2LjI2NDMgMjkuNDU2NCAxNi40NTM0IDI5LjU5NDMgMTYuNTk5NkMyOS43MjkgMTYuNzQxOSAyOS45MTM2IDE2LjgwMzUgMzAuMDY0OCAxNi43NTc5QzMwLjEwMjcgMTYuNzQ2MyAzMC4xNDM0IDE2Ljc1NTcgMzAuMTczIDE2Ljc4MjFDMzAuMjAyMiAxNi44MDkgMzAuMjE1NCAxNi44NDg2IDMwLjIwNzEgMTYuODg3NkMyOS45OTExIDE3LjkxMzcgMjkuMDU1MiAxOC41NzcgMjguNTkwMiAxOC43ODM3QzI4LjU3NTQgMTguNzkwOCAyOC41NiAxOC43OTM2IDI4LjU0NTIgMTguNzkzNloiIGZpbGw9IiMwMDQ4NEEiLz48cGF0aCBkPSJNMzQuMjg5NCAxOS4zMDc0QzMzLjg0NDggMjAuMjU3MSAzMi4zNzY4IDIxLjY4NDkgMzEuNTYxOCAyMi4xMzU2QzMxLjYwOTEgMjIuNjQzOSAzMS43NzAxIDIzLjIxNjYgMzIuMTMwMSAyMy41ODFDMzIuNDg4NCAyMy45NDU0IDMyLjk3NTkgMjQuMTgxMSAzMy40ODQyIDI0LjIzNzJDMzMuNTgzMiAyMy42OTggMzMuNDQ5NiAyMi45NTcyIDMzLjA0NjggMjIuNTg1MUMzMi42NjY1IDIyLjIzMzkgMzIuMTI0IDIyLjExNTIgMzEuNjQ1MyAyMi4xMzA2QzMzLjUzOTggMjIuMDE5IDM1Ljk2MjkgMjEuMDY4OCAzNy4xMzg1IDE5Ljc2NTJDMzYuMjkyMSAxOS41NjQgMzUuMzYyMiAxOS40Mzc2IDM0LjI4OTQgMTkuMzA3NFoiIGZpbGw9IiNGODY2M0MiLz48cGF0aCBkPSJNMjMuNjEwOSAyOC45MDQzQzIzLjYxMDkgMjguOTA0MyAyMy42MDYgMjguOTA0MyAyMy42MDMyIDI4LjkwNDNDMjMuNTUyNyAyOC45MDA1IDIzLjUxNTggMjguODU2IDIzLjUxOTcgMjguODA1OUwyNC4yMjcgMjYuNjQxMUMyNC4yMzE0IDI2LjU5MDYgMjQuMjc1OSAyNi41NTQzIDI0LjMyNTQgMjYuNTU3NkMyNC4zNzU5IDI2LjU2MTQgMjQuNDEzMyAyNi42MDU5IDI0LjQwODkgMjYuNjU2TDIzLjcwMTYgMjguODIwOEMyMy42OTc3IDI4Ljg2ODYgMjMuNjU3NiAyOC45MDQ5IDIzLjYxMDQgMjguOTA0OUwyMy42MTA5IDI4LjkwNDNaIiBmaWxsPSIjMDA0ODRBIi8+PHBhdGggZD0iTTM3LjIxMjEgMjkuMDMzOEMzNy4xNjQ5IDI5LjAzMzggMzcuMTI1MyAyOC45OTc2IDM3LjEyMDkgMjguOTQ5OEwzNi40MTM2IDI2Ljc4NDlDMzYuNDA5MiAyNi43MzQ5IDM2LjQ0NjUgMjYuNjkwNCAzNi40OTcxIDI2LjY4NjZDMzYuNTQ2NiAyNi42ODI3IDM2LjU5MTEgMjYuNzE5NSAzNi41OTU1IDI2Ljc3MDFMMzcuMzAyOCAyOC45MzQ5QzM3LjMwNjYgMjguOTg1NSAzNy4yNjk4IDI5LjAyOTUgMzcuMjE5MyAyOS4wMzMzQzM3LjIxNjUgMjkuMDMzMyAzNy4yMTM4IDI5LjAzMzMgMzcuMjExNiAyOS4wMzMzTDM3LjIxMjEgMjkuMDMzOFoiIGZpbGw9IiMwMDQ4NEEiLz48ZyBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6bXVsdGlwbHkiPjxwYXRoIGQ9Ik0zMS41MjQ4IDI3SDI5VjM2QzMwLjg5MDggMzYgMzAuODAwOSAzNC4xOTE0IDMwLjgwMDkgMzQuMTkxNFYyOC43NTY0SDMxLjMxNTlDMzEuOTA0MyAyOC43NTY0IDMyLjE5ODUgMjkuMTA1MyAzMi4xOTg1IDI5LjgxNVYzMy4xODVDMzIuMTk4NSAzMy44OTU0IDMxLjk1MzIgMzQuMjU2OCAzMS4zMTU5IDM0LjI1NjhIMzAuODAwOUMzMC44MDA5IDM1LjcwNTQgMzEuNTI4MSAzNS45NDE1IDMyLjA0MjQgMzUuOTQxNUMzMy41NTg0IDM1Ljk0MTUgMzQgMzQuNzIwNyAzNCAzMy4zNDAzVjI5LjY2MDRDMzQgMjcuOTU2MiAzMy4yODkzIDI3LjAwMDcgMzEuNTI0MSAyNy4wMDA3TDMxLjUyNDggMjdaIiBmaWxsPSIjMDA0ODRBIi8+PC9nPjxwYXRoIGQ9Ik00OC4xMjgzIDE5LjIyMkw0Ny42NTU1IDE1LjQ1MzdMNDQuMDA5IDE0LjM4NjNMNDcuNzg0NCAxMy45MjA2TDQ4Ljg1MTkgMTAuMjc0MUw0OS4zMTc2IDE0LjA0OTZMNTIuOTU2OSAxNS4xMDk4TDQ5LjE4ODYgMTUuNTgyN0w0OC4xMjgzIDE5LjIyMloiIGZpbGw9IiNGQkUyQTAiLz48cGF0aCBkPSJNNTcuMzg1OCAyNC40MDI2TDYxLjI4MyAyMy45MTU1TDYyLjM3OTEgMjAuMTU0M0w2Mi44NTkxIDI0LjA0NDRMNjYuNjI3NSAyNS4xNDc3TDYyLjczNzMgMjUuNjI3N0w2MS42MzQxIDI5LjM5Nkw2MS4xNjEyIDI1LjQ5ODdMNTcuMzg1OCAyNC40MDI2WiIgZmlsbD0iI0ZCRTJBMCIvPjxwYXRoIGQ9Ik01Ny4yNjYgMTIuMTUyM0w1OS45MDk5IDExLjgyMThMNjAuNjUzNCA5LjI3MDI3TDYwLjk3OTEgMTEuOTA5M0w2My41MzU1IDEyLjY1NzhMNjAuODk2NCAxMi45ODM0TDYwLjE0OCAxNS41Mzk4TDU5LjgyNzIgMTIuODk1OUw1Ny4yNjYgMTIuMTUyM1oiIGZpbGw9IiNGQkUyQTAiLz48cGF0aCBkPSJNMTAuMjA0NSAyNi4xMDc1TDYuNDM2MTggMjYuNTgwM0w1LjM2ODczIDMwLjIyNjhMNC45MDMwNiAyNi40NTE0TDEuMjU2NTMgMjUuMzgzOUw1LjAzMjAyIDI0LjkxODJMNi4wOTIzMSAyMS4yNzg5TDYuNTY1MTMgMjUuMDQ3MkwxMC4yMDQ1IDI2LjEwNzVaIiBmaWxsPSIjRkJFMkEwIi8+PHBhdGggZD0iTTE1LjM4NTMgMTYuODQ5OEwxNC44OTgxIDEyLjk1MjZMMTEuMTM2OSAxMS44NTY0TDE1LjAyNyAxMS4zNzY1TDE2LjEzMDMgNy42MDgxM0wxNi42MTAzIDExLjQ5ODNMMjAuMzc4NiAxMi42MDE1TDE2LjQ4MTQgMTMuMDc0NEwxNS4zODUzIDE2Ljg0OThaIiBmaWxsPSIjRkJFMkEwIi8+PHBhdGggZD0iTTMuMTM0NzcgMTYuOTY5NUwyLjgwNDI4IDE0LjMyNTZMMC4yNTI3MyAxMy41ODJMMi44OTE3NiAxMy4yNTY0TDMuNjQwMjIgMTAuN0wzLjk2NTg1IDEzLjMzOUw2LjUyMjI1IDE0LjA4NzVMMy44NzgzNiAxNC40MDgyTDMuMTM0NzcgMTYuOTY5NVoiIGZpbGw9IiNGQkUyQTAiLz48ZGVmcz48ZmlsdGVyIGlkPSJmaWx0ZXIwX2ZfMTUyXzQwOTciIHg9IjEyLjgxNTIiIHk9IjAuODU1MjI1IiB3aWR0aD0iMzcuMTQ1NCIgaGVpZ2h0PSIzNy4xNDU1IiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+PGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz48ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJzaGFwZSIvPjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjUuNSIgcmVzdWx0PSJlZmZlY3QxX2ZvcmVncm91bmRCbHVyXzE1Ml80MDk3Ii8+PC9maWx0ZXI+PC9kZWZzPjwvc3ZnPgo=',
        title: 'Datama empower your analysis',
        alt: 'Datama empower your analysis'
    },
    'hammer-datamate': {
        src: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzM1IiBoZWlnaHQ9IjU5MyIgdmlld0JveD0iMCAwIDczNSA1OTMiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2RfMTM5XzI1NDEpIj4KPHBhdGggb3BhY2l0eT0iMC41IiBkPSJNMzE4Ljc5OSAxMzMuMjY3VjE2MC4wMjlIMjAuODQ1OVYxMzMuMjY3QzIwLjg0NTkgMTI5LjU5MSAyMy44Mjk3IDEyNi42MDcgMjcuNTA1OCAxMjYuNjA3SDMxMi4xMzlDMzE1LjgxNiAxMjYuNjA3IDMxOC43OTkgMTI5LjU5MSAzMTguNzk5IDEzMy4yNjdaIiBmaWxsPSIjNEI4N0ZGIi8+CjxwYXRoIGQ9Ik0zMTguNzk5IDE2MC4wMjlWNDQ4LjM3OUMzMTguNzk5IDQ1Mi4wNTUgMzE1LjgxNSA0NTUuMDM5IDMxMi4xMzkgNDU1LjAzOUgyNy41MDU2QzIzLjgyOTQgNDU1LjAzOSAyMC44NDU3IDQ1Mi4wNTUgMjAuODQ1NyA0NDguMzc5VjE2MC4wMjlIMzE4Ljc5OVoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik00OC44MTg3IDE0OC4zMThDNTEuMzk0NiAxNDguMzE4IDUzLjQ4MjcgMTQ2LjIzIDUzLjQ4MjcgMTQzLjY1NEM1My40ODI3IDE0MS4wNzggNTEuMzk0NiAxMzguOTkgNDguODE4NyAxMzguOTlDNDYuMjQyOSAxMzguOTkgNDQuMTU0OCAxNDEuMDc4IDQ0LjE1NDggMTQzLjY1NEM0NC4xNTQ4IDE0Ni4yMyA0Ni4yNDI5IDE0OC4zMTggNDguODE4NyAxNDguMzE4WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTY2LjkzNSAxNDguMzE4QzY5LjUxMDggMTQ4LjMxOCA3MS41OTg5IDE0Ni4yMyA3MS41OTg5IDE0My42NTRDNzEuNTk4OSAxNDEuMDc4IDY5LjUxMDggMTM4Ljk5IDY2LjkzNSAxMzguOTlDNjQuMzU5MSAxMzguOTkgNjIuMjcxIDE0MS4wNzggNjIuMjcxIDE0My42NTRDNjIuMjcxIDE0Ni4yMyA2NC4zNTkxIDE0OC4zMTggNjYuOTM1IDE0OC4zMThaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNODUuMDYxOSAxNDguMzE4Qzg3LjYzNzcgMTQ4LjMxOCA4OS43MjU5IDE0Ni4yMyA4OS43MjU5IDE0My42NTRDODkuNzI1OSAxNDEuMDc4IDg3LjYzNzcgMTM4Ljk5IDg1LjA2MTkgMTM4Ljk5QzgyLjQ4NjEgMTM4Ljk5IDgwLjM5NzkgMTQxLjA3OCA4MC4zOTc5IDE0My42NTRDODAuMzk3OSAxNDYuMjMgODIuNDg2MSAxNDguMzE4IDg1LjA2MTkgMTQ4LjMxOFoiIGZpbGw9IndoaXRlIi8+CjwvZz4KPHBhdGggZD0iTTU1LjU5MTcgMjIzLjYyM0M1NS41OTE3IDIyNi44NDEgNTIuOTk1IDIyOS40MzggNDkuNzc3MSAyMjkuNDM4QzQ2LjU1OTEgMjI5LjQzOCA0My45NjI0IDIyNi44NDEgNDMuOTYyNCAyMjMuNjIzQzQzLjk2MjQgMjIwLjQwNSA0Ni41NTkxIDIxNy44MDkgNDkuNzc3MSAyMTcuODA5SDU1LjU5MTdWMjIzLjYyM1pNNTguNDk0IDIyMy42MjNDNTguNDk0IDIyMC40MDUgNjEuMDkwNyAyMTcuODA5IDY0LjMwODYgMjE3LjgwOUM2Ny41MjY2IDIxNy44MDkgNzAuMTIzMyAyMjAuNDA1IDcwLjEyMzMgMjIzLjYyM1YyMzguMTU1QzcwLjEyMzMgMjQxLjM3MyA2Ny41MjY2IDI0My45NjkgNjQuMzA4NiAyNDMuOTY5QzYxLjA5MDcgMjQzLjk2OSA1OC40OTQgMjQxLjM3MyA1OC40OTQgMjM4LjE1NVYyMjMuNjIzWiIgZmlsbD0iIzE2RDBCNCIvPgo8cGF0aCBkPSJNNjQuMzA5IDIwMC4yNzNDNjEuMDkxMSAyMDAuMjczIDU4LjQ5NDQgMTk3LjY3NiA1OC40OTQ0IDE5NC40NThDNTguNDk0NCAxOTEuMjQgNjEuMDkxMSAxODguNjQ0IDY0LjMwOSAxODguNjQ0QzY3LjUyNyAxODguNjQ0IDcwLjEyMzcgMTkxLjI0IDcwLjEyMzcgMTk0LjQ1OFYyMDAuMjczSDY0LjMwOVpNNjQuMzA5IDIwMy4yMjZDNjcuNTI3IDIwMy4yMjYgNzAuMTIzNyAyMDUuODIzIDcwLjEyMzcgMjA5LjA0MUM3MC4xMjM3IDIxMi4yNTkgNjcuNTI3IDIxNC44NTUgNjQuMzA5IDIxNC44NTVINDkuNzI2NUM0Ni41MDg2IDIxNC44NTUgNDMuOTExOSAyMTIuMjU5IDQzLjkxMTkgMjA5LjA0MUM0My45MTE5IDIwNS44MjMgNDYuNTA4NiAyMDMuMjI2IDQ5LjcyNjUgMjAzLjIyNkg2NC4zMDlaIiBmaWxsPSIjMTZEMEI0Ii8+CjxwYXRoIGQ9Ik04Ny42MTg3IDIwOS4wNDFDODcuNjE4NyAyMDUuODIzIDkwLjIxNTUgMjAzLjIyNiA5My40MzM0IDIwMy4yMjZDOTYuNjUxMyAyMDMuMjI2IDk5LjI0ODEgMjA1LjgyMyA5OS4yNDgxIDIwOS4wNDFDOTkuMjQ4MSAyMTIuMjU5IDk2LjY1MTMgMjE0Ljg1NSA5My40MzM0IDIxNC44NTVIODcuNjE4N1YyMDkuMDQxWk04NC43MTY1IDIwOS4wNDFDODQuNzE2NSAyMTIuMjU5IDgyLjExOTcgMjE0Ljg1NSA3OC45MDE4IDIxNC44NTVDNzUuNjgzOSAyMTQuODU1IDczLjA4NzIgMjEyLjI1OSA3My4wODcyIDIwOS4wNDFWMTk0LjQ1OEM3My4wODcyIDE5MS4yNCA3NS42ODM5IDE4OC42NDQgNzguOTAxOCAxODguNjQ0QzgyLjExOTcgMTg4LjY0NCA4NC43MTY1IDE5MS4yNCA4NC43MTY1IDE5NC40NThWMjA5LjA0MVoiIGZpbGw9IiMxNkQwQjQiLz4KPHBhdGggZD0iTTc4Ljg5MTMgMjMyLjM0QzgyLjEwOTIgMjMyLjM0IDg0LjcwNiAyMzQuOTM3IDg0LjcwNiAyMzguMTU1Qzg0LjcwNiAyNDEuMzczIDgyLjEwOTIgMjQzLjk2OSA3OC44OTEzIDI0My45NjlDNzUuNjczNCAyNDMuOTY5IDczLjA3NjcgMjQxLjM3MyA3My4wNzY3IDIzOC4xNTVWMjMyLjM0SDc4Ljg5MTNaTTc4Ljg5MTMgMjI5LjQzOEM3NS42NzM0IDIyOS40MzggNzMuMDc2NyAyMjYuODQxIDczLjA3NjcgMjIzLjYyM0M3My4wNzY3IDIyMC40MDUgNzUuNjczNCAyMTcuODA5IDc4Ljg5MTMgMjE3LjgwOUg5My40NzM4Qzk2LjY5MTggMjE3LjgwOSA5OS4yODg1IDIyMC40MDUgOTkuMjg4NSAyMjMuNjIzQzk5LjI4ODUgMjI2Ljg0MSA5Ni42OTE4IDIyOS40MzggOTMuNDczOCAyMjkuNDM4SDc4Ljg5MTNaIiBmaWxsPSIjMTZEMEI0Ii8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIxX2RfMTM5XzI1NDEpIj4KPHBhdGggZD0iTTQwMy43NyA3NEgyNTYuMTQzQzI1MS42NDMgNzQgMjQ3Ljk5NiA3Ny42NDc0IDI0Ny45OTYgODIuMTQ2NlYxODcuMzFDMjQ3Ljk5NiAxOTEuODA5IDI1MS42NDMgMTk1LjQ1NiAyNTYuMTQzIDE5NS40NTZINDAzLjc3QzQwOC4yNjkgMTk1LjQ1NiA0MTEuOTE3IDE5MS44MDkgNDExLjkxNyAxODcuMzFWODIuMTQ2NkM0MTEuOTE3IDc3LjY0NzQgNDA4LjI2OSA3NCA0MDMuNzcgNzRaIiBmaWxsPSJ3aGl0ZSIvPgo8L2c+CjxwYXRoIGQ9Ik0zNjcuMDE4IDE2MC43ODJDMzY3LjQ4NyAxNjEuMzMyIDM2OC4zOTMgMTYwLjk5NiAzNjguMzkzIDE2MC4yNzNMMzY4LjM0MiAxNDUuMTUxVjExNi41NzZDMzY4LjM0MiAxMTMuNTgzIDM2NS45MTggMTExLjE1OSAzNjIuOTI0IDExMS4xNTlIMjk3LjAzOEMyOTQuMDQ0IDExMS4xNTkgMjkxLjYyMSAxMTMuNTgzIDI5MS42MjEgMTE2LjU3NlYxNDcuMjM4QzI5MS42MjEgMTUwLjIzMiAyOTQuMDQ0IDE1Mi42NTYgMjk3LjAzOCAxNTIuNjU2SDM2MC4wNTNMMzY3LjAxOCAxNjAuNzkyVjE2MC43ODJaIiBmaWxsPSIjMTZEMEI0Ii8+CjxwYXRoIGQ9Ik0zMTcuMDQ4IDEzMS40MzRDMzE3LjA0OCAxMzMuMzM4IDMxNS41MTEgMTM0Ljg5NiAzMTMuNjA2IDEzNC44OTZDMzExLjcwMiAxMzQuODk2IDMxMC4xNDQgMTMzLjM1OCAzMTAuMTQ0IDEzMS40NTRDMzEwLjE0NCAxMjkuNTUgMzExLjY4MiAxMjcuOTkyIDMxMy41ODYgMTI3Ljk5MkMzMTUuNDkgMTI3Ljk5MiAzMTcuMDQ4IDEyOS41MjkgMzE3LjA0OCAxMzEuNDM0WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTMzMS44NjUgMTMxLjM4M0MzMzEuODY1IDEzMy4yODcgMzMwLjMyNyAxMzQuODQ1IDMyOC40MjMgMTM0Ljg0NUMzMjYuNTE4IDEzNC44NDUgMzI0Ljk2IDEzMy4zMDggMzI0Ljk2IDEzMS40MDNDMzI0Ljk2IDEyOS40OTkgMzI2LjQ5OCAxMjcuOTQxIDMyOC40MDIgMTI3Ljk0MUMzMzAuMzA3IDEyNy45NDEgMzMxLjg2NSAxMjkuNDc5IDMzMS44NjUgMTMxLjM4M1oiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0zNDYuNjgzIDEzMS4zNDJDMzQ2LjY4MyAxMzMuMjQ2IDM0NS4xNDUgMTM0LjgwNCAzNDMuMjQxIDEzNC44MDRDMzQxLjMzNiAxMzQuODA0IDMzOS43NzggMTMzLjI2NyAzMzkuNzc4IDEzMS4zNjJDMzM5Ljc3OCAxMjkuNDU4IDM0MS4zMTYgMTI3LjkgMzQzLjIyIDEyNy45QzM0NS4xMjQgMTI3LjkgMzQ2LjY4MyAxMjkuNDM4IDM0Ni42ODMgMTMxLjM0MloiIGZpbGw9IndoaXRlIi8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIyX2RfMTM5XzI1NDEpIj4KPHBhdGggZD0iTTYyMS42MiAxNDEuNjQ3VjE5Ny41NjRDNjIxLjYyIDIwMS42NjggNjE4LjMgMjA0Ljk5OCA2MTQuMTk2IDIwNC45OThINTMzLjAzNUM1MjguOTQxIDIwNC45OTggNTI1LjYxMSAyMDEuNjY4IDUyNS42MTEgMTk3LjU2NFYxODYuNzA5SDU4Ni4yODNDNTkwLjM4NyAxODYuNzA5IDU5My43MDcgMTgzLjM3OSA1OTMuNzA3IDE3OS4yNzVWMTMzLjk5SDYxMy45NjJDNjE4LjE5OCAxMzMuOTkgNjIxLjYyIDEzNy40MTEgNjIxLjYyIDE0MS42NDdaIiBmaWxsPSJ3aGl0ZSIvPgo8L2c+CjxnIG9wYWNpdHk9IjAuNCI+CjxwYXRoIGQ9Ik01OTMuNDEzIDEyMC40MDVMNTQ1LjcwNCAxNTUuNjVMNDk3Ljk5NiAxMjAuNDA1QzQ5OC44OTIgMTE3LjMyIDUwMS43NDMgMTE1LjA1OSA1MDUuMTI0IDExNS4wNTlINTg2LjI3NUM1ODkuNjU2IDExNS4wNTkgNTkyLjUwNyAxMTcuMzEgNTkzLjQwMyAxMjAuNDA1SDU5My40MTNaIiBmaWxsPSIjMTZEMEI0Ii8+CjxwYXRoIGQ9Ik01OTMuNzA5IDEyOS44ODZWMTc5LjI3NUM1OTMuNzA5IDE4My4zNzkgNTkwLjM4OSAxODYuNzA5IDU4Ni4yODUgMTg2LjcwOUg1MDUuMTI0QzUwMS4wMiAxODYuNzA5IDQ5Ny43MDEgMTgzLjM3OSA0OTcuNzAxIDE3OS4yNzVWMTI5Ljg4Nkw1NDUuNzA1IDE2NS4zNDRMNTkzLjcwOSAxMjkuODg2WiIgZmlsbD0iIzE2RDBCNCIvPgo8L2c+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIzX2RfMTM5XzI1NDEpIj4KPHBhdGggb3BhY2l0eT0iMC41IiBkPSJNNzEzLjk5OCAyNi40MjI1VjQ4LjIxMjFINDA2VjI2LjQyMjVDNDA2IDIzLjQyOTMgNDA4LjQwNCAyMSA0MTEuMzY0IDIxSDcwOC42MzNDNzExLjU5MyAyMSA3MTMuOTk4IDIzLjQyOTMgNzEzLjk5OCAyNi40MjI1WiIgZmlsbD0iIzRCODdGRiIvPgo8cGF0aCBkPSJNNzEzLjk5OCA0OC4yMTJWMjgyLjk4OUM3MTMuOTk4IDI4NS45ODIgNzExLjU5MyAyODguNDExIDcwOC42MzMgMjg4LjQxMUg0MTEuMzY0QzQwOC40MDQgMjg4LjQxMSA0MDYgMjg1Ljk4MiA0MDYgMjgyLjk4OVY0OC4yMTJINzEzLjk5OFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik00MjguNTE5IDM4LjY3NzFDNDMwLjU5NCAzOC42NzcxIDQzMi4yNzUgMzYuOTc3IDQzMi4yNzUgMzQuODc5N0M0MzIuMjc1IDMyLjc4MjQgNDMwLjU5NCAzMS4wODIzIDQyOC41MTkgMzEuMDgyM0M0MjYuNDQ1IDMxLjA4MjMgNDI0Ljc2MyAzMi43ODI0IDQyNC43NjMgMzQuODc5N0M0MjQuNzYzIDM2Ljk3NyA0MjYuNDQ1IDM4LjY3NzEgNDI4LjUxOSAzOC42NzcxWiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTQ0My4xMTMgMzguNjc3QzQ0NS4xODcgMzguNjc3IDQ0Ni44NjkgMzYuOTc2OCA0NDYuODY5IDM0Ljg3OTZDNDQ2Ljg2OSAzMi43ODIzIDQ0NS4xODcgMzEuMDgyMiA0NDMuMTEzIDMxLjA4MjJDNDQxLjAzOSAzMS4wODIyIDQzOS4zNTcgMzIuNzgyMyA0MzkuMzU3IDM0Ljg3OTZDNDM5LjM1NyAzNi45NzY4IDQ0MS4wMzkgMzguNjc3IDQ0My4xMTMgMzguNjc3WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTQ1Ny43MDUgMzguNjc3MUM0NTkuNzc5IDM4LjY3NzEgNDYxLjQ2MSAzNi45NzcgNDYxLjQ2MSAzNC44Nzk3QzQ2MS40NjEgMzIuNzgyNCA0NTkuNzc5IDMxLjA4MjMgNDU3LjcwNSAzMS4wODIzQzQ1NS42MyAzMS4wODIzIDQ1My45NDkgMzIuNzgyNCA0NTMuOTQ5IDM0Ljg3OTdDNDUzLjk0OSAzNi45NzcgNDU1LjYzIDM4LjY3NzEgNDU3LjcwNSAzOC42NzcxWiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8cGF0aCBvcGFjaXR5PSIwLjciIGQ9Ik0yODMgMzgzLjUyMkMyODMgMzk5LjI0MSAyNzAuMjQxIDQxMiAyNTQuNTIyIDQxMkMyNDguNjg3IDQxMiAyNDMuMjQ0IDQxMC4yNTggMjM4LjcxNSA0MDcuMjFMMjUwLjM4NSAzOTUuNTg0QzI1MS42NDggMzk2LjAxOSAyNTMuMDQxIDM5Ni4yMzcgMjU0LjQ3OCAzOTYuMjM3QzI2MS41MzIgMzk2LjIzNyAyNjcuMjM3IDM5MC41MzIgMjY3LjIzNyAzODMuNDc4QzI2Ny4yMzcgMzc2LjQyNCAyNjEuNTMyIDM3MC43MiAyNTQuNDc4IDM3MC43MkMyNDcuNDI0IDM3MC43MiAyNDEuNzIgMzc2LjQyNCAyNDEuNzIgMzgzLjQ3OEMyNDEuNzIgMzg1LjA0NiAyNDIuMDI0IDM4Ni41NyAyNDIuNTQ3IDM4Ny45NjNMMjMwLjkyIDM5OS40NTlDMjI3LjgyOSAzOTQuODg3IDIyNiAzODkuNCAyMjYgMzgzLjQ3OEMyMjYgMzY3Ljc1OSAyMzguNzU5IDM1NSAyNTQuNDc4IDM1NUMyNzAuMTk4IDM1NSAyODIuOTU2IDM2Ny43NTkgMjgyLjk1NiAzODMuNDc4TDI4MyAzODMuNTIyWiIgZmlsbD0iIzQyODVGNCIvPgo8ZyBmaWx0ZXI9InVybCgjZmlsdGVyNF9kXzEzOV8yNTQxKSI+CjxwYXRoIGQ9Ik02NzYuMDcxIDg5SDQ0Ny45M0M0NDYuMzEyIDg5IDQ0NSA5MC45NjE1IDQ0NSA5My4zODExVjIxNS42MTlDNDQ1IDIxOC4wMzkgNDQ2LjMxMiAyMjAgNDQ3LjkzIDIyMEg2NzYuMDcxQzY3Ny42ODggMjIwIDY3OSAyMTguMDM5IDY3OSAyMTUuNjE5VjkzLjM4MTFDNjc5IDkwLjk2MTUgNjc3LjY4OCA4OSA2NzYuMDcxIDg5WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8cGF0aCBkPSJNNDYyLjA0IDIwMi43NjlINjYwLjg4NiIgc3Ryb2tlPSIjMTZEMEI0IiBzdHJva2Utd2lkdGg9IjAuMzc0MTM1IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz4KPHBhdGggZD0iTTYxMCAxNTkuMkg2MTYuMzQzIiBzdHJva2U9IiMxNkQwQjQiIHN0cm9rZS13aWR0aD0iMC4zNzQxMzUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNNTA2LjgyNSAxNDIuMzEySDU1OC4zOTEiIHN0cm9rZT0iIzE2RDBCNCIgc3Ryb2tlLXdpZHRoPSIwLjI2NTYzNiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+CjxwYXRoIGQ9Ik01NTcgMTMwLjdINTY2IiBzdHJva2U9IiMxNkQwQjQiIHN0cm9rZS13aWR0aD0iMC4zMzY3MjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNNTA2LjgyNSAxNDIuMzEySDQ2Mi4wNFYyMDIuNzY5SDUwNi44MjVWMTQyLjMxMloiIGZpbGw9IiM0Qjg3RkYiLz4KPHBhdGggZD0iTTY2MSAxNTlINjE2VjIwM0g2NjFWMTU5WiIgZmlsbD0iIzRCODdGRiIvPgo8cGF0aCBkPSJNNTU4LjM5MSAxMzAuNTQ5SDUxMy40OTVWMTQyLjMxMkg1NTguMzkxVjEzMC41NDlaIiBmaWxsPSIjMTZEMEI0Ii8+CjxwYXRoIGQ9Ik02MTAgMTMwLjVINTY1VjE1OS41SDYxMFYxMzAuNVoiIGZpbGw9IiNGODY2M0MiLz4KPHBhdGggZD0iTTQ4MS40NSAxMzVDNDgyLjIgMTM1LjA0IDQ4Mi41NzUgMTM1LjQzNSA0ODIuNTc1IDEzNS45OTVDNDgyLjU3NSAxMzYuNTggNDgyLjE1IDEzNy4wMyA0ODEuMzA1IDEzNy4wM0M0ODAuOCAxMzcuMDMgNDgwLjMxNSAxMzYuODU1IDQ4MC4wNDUgMTM2LjU4TDQ4MC4yMiAxMzYuMjk1QzQ4MC40NDUgMTM2LjUzIDQ4MC44NSAxMzYuNyA0ODEuMzA1IDEzNi43QzQ4MS44ODUgMTM2LjcgNDgyLjIwNSAxMzYuNDMgNDgyLjIwNSAxMzUuOTk1QzQ4Mi4yMDUgMTM1LjU3NSA0ODEuOTEgMTM1LjMgNDgxLjI2IDEzNS4zSDQ4MS4wMVYxMzUuMDM1TDQ4MS45OCAxMzMuODJINDgwLjE5VjEzMy41SDQ4Mi40NFYxMzMuNzU1TDQ4MS40NSAxMzVaTTQ4Mi44NjcgMTMzLjVINDg0LjA1MlYxMzdINDgzLjY5MlYxMzMuODJINDgyLjg2N1YxMzMuNVpNNDg1LjYyOSAxMzUuMzc1QzQ4NS4xNTkgMTM1LjM3NSA0ODQuODM5IDEzNC45OTUgNDg0LjgzOSAxMzQuNDI1QzQ4NC44MzkgMTMzLjg1NSA0ODUuMTU5IDEzMy40NzUgNDg1LjYyOSAxMzMuNDc1QzQ4Ni4wOTQgMTMzLjQ3NSA0ODYuNDE5IDEzMy44NSA0ODYuNDE5IDEzNC40MjVDNDg2LjQxOSAxMzUgNDg2LjA5NCAxMzUuMzc1IDQ4NS42MjkgMTM1LjM3NVpNNDg1LjM1OSAxMzdMNDg3Ljc0OSAxMzMuNUg0ODguMDQ0TDQ4NS42NTQgMTM3SDQ4NS4zNTlaTTQ4NS42MjkgMTM1LjE1QzQ4NS45NTQgMTM1LjE1IDQ4Ni4xNjkgMTM0Ljg4IDQ4Ni4xNjkgMTM0LjQyNUM0ODYuMTY5IDEzMy45NyA0ODUuOTU0IDEzMy43IDQ4NS42MjkgMTMzLjdDNDg1LjI5OSAxMzMuNyA0ODUuMDg5IDEzMy45NzUgNDg1LjA4OSAxMzQuNDI1QzQ4NS4wODkgMTM0Ljg3NSA0ODUuMjk5IDEzNS4xNSA0ODUuNjI5IDEzNS4xNVpNNDg3Ljc3NCAxMzcuMDI1QzQ4Ny4zMDkgMTM3LjAyNSA0ODYuOTg0IDEzNi42NDUgNDg2Ljk4NCAxMzYuMDc1QzQ4Ni45ODQgMTM1LjUwNSA0ODcuMzA5IDEzNS4xMjUgNDg3Ljc3NCAxMzUuMTI1QzQ4OC4yNDQgMTM1LjEyNSA0ODguNTY0IDEzNS41MDUgNDg4LjU2NCAxMzYuMDc1QzQ4OC41NjQgMTM2LjY0NSA0ODguMjQ0IDEzNy4wMjUgNDg3Ljc3NCAxMzcuMDI1Wk00ODcuNzc0IDEzNi44QzQ4OC4xMDQgMTM2LjggNDg4LjMxNCAxMzYuNTI1IDQ4OC4zMTQgMTM2LjA3NUM0ODguMzE0IDEzNS42MjUgNDg4LjEwNCAxMzUuMzUgNDg3Ljc3NCAxMzUuMzVDNDg3LjQ0OSAxMzUuMzUgNDg3LjIzNCAxMzUuNjIgNDg3LjIzNCAxMzYuMDc1QzQ4Ny4yMzQgMTM2LjUzIDQ4Ny40NDkgMTM2LjggNDg3Ljc3NCAxMzYuOFoiIGZpbGw9ImJsYWNrIi8+CjxwYXRoIGQ9Ik02MzQuNzI1IDE1My42OEg2MzYuNjVWMTU0SDYzNC4xOTVWMTUzLjc0NUw2MzUuNjUgMTUyLjMyQzYzNi4wNDUgMTUxLjkzIDYzNi4xMiAxNTEuNjk1IDYzNi4xMiAxNTEuNDU1QzYzNi4xMiAxNTEuMDUgNjM1LjgzNSAxNTAuOCA2MzUuMyAxNTAuOEM2MzQuODkgMTUwLjggNjM0LjU3NSAxNTAuOTI1IDYzNC4zNDUgMTUxLjE5TDYzNC4wOSAxNTAuOTdDNjM0LjM2IDE1MC42NSA2MzQuNzk1IDE1MC40NyA2MzUuMzMgMTUwLjQ3QzYzNi4wNCAxNTAuNDcgNjM2LjQ5IDE1MC44MyA2MzYuNDkgMTUxLjQxNUM2MzYuNDkgMTUxLjc1IDYzNi4zODUgMTUyLjA1IDYzNS45MTUgMTUyLjUxTDYzNC43MjUgMTUzLjY4Wk02MzYuOTgyIDE1MC41SDYzOS41NTJWMTUwLjc1NUw2MzguMDg3IDE1NEg2MzcuNjk3TDYzOS4xMzcgMTUwLjgySDYzNy4zMzdWMTUxLjQ3NUg2MzYuOTgyVjE1MC41Wk02NDAuNzc2IDE1Mi4zNzVDNjQwLjMwNiAxNTIuMzc1IDYzOS45ODYgMTUxLjk5NSA2MzkuOTg2IDE1MS40MjVDNjM5Ljk4NiAxNTAuODU1IDY0MC4zMDYgMTUwLjQ3NSA2NDAuNzc2IDE1MC40NzVDNjQxLjI0MSAxNTAuNDc1IDY0MS41NjYgMTUwLjg1IDY0MS41NjYgMTUxLjQyNUM2NDEuNTY2IDE1MiA2NDEuMjQxIDE1Mi4zNzUgNjQwLjc3NiAxNTIuMzc1Wk02NDAuNTA2IDE1NEw2NDIuODk2IDE1MC41SDY0My4xOTFMNjQwLjgwMSAxNTRINjQwLjUwNlpNNjQwLjc3NiAxNTIuMTVDNjQxLjEwMSAxNTIuMTUgNjQxLjMxNiAxNTEuODggNjQxLjMxNiAxNTEuNDI1QzY0MS4zMTYgMTUwLjk3IDY0MS4xMDEgMTUwLjcgNjQwLjc3NiAxNTAuN0M2NDAuNDQ2IDE1MC43IDY0MC4yMzYgMTUwLjk3NSA2NDAuMjM2IDE1MS40MjVDNjQwLjIzNiAxNTEuODc1IDY0MC40NDYgMTUyLjE1IDY0MC43NzYgMTUyLjE1Wk02NDIuOTIxIDE1NC4wMjVDNjQyLjQ1NiAxNTQuMDI1IDY0Mi4xMzEgMTUzLjY0NSA2NDIuMTMxIDE1My4wNzVDNjQyLjEzMSAxNTIuNTA1IDY0Mi40NTYgMTUyLjEyNSA2NDIuOTIxIDE1Mi4xMjVDNjQzLjM5MSAxNTIuMTI1IDY0My43MTEgMTUyLjUwNSA2NDMuNzExIDE1My4wNzVDNjQzLjcxMSAxNTMuNjQ1IDY0My4zOTEgMTU0LjAyNSA2NDIuOTIxIDE1NC4wMjVaTTY0Mi45MjEgMTUzLjhDNjQzLjI1MSAxNTMuOCA2NDMuNDYxIDE1My41MjUgNjQzLjQ2MSAxNTMuMDc1QzY0My40NjEgMTUyLjYyNSA2NDMuMjUxIDE1Mi4zNSA2NDIuOTIxIDE1Mi4zNUM2NDIuNTk2IDE1Mi4zNSA2NDIuMzgxIDE1Mi42MiA2NDIuMzgxIDE1My4wNzVDNjQyLjM4MSAxNTMuNTMgNjQyLjU5NiAxNTMuOCA2NDIuOTIxIDE1My44WiIgZmlsbD0iYmxhY2siLz4KPHBhdGggZD0iTTUzMS41MjUgMTI1LjEwNVYxMjUuNEg1MzAuNTk1VjEyNi4zMUg1MzAuMjhWMTI1LjRINTI5LjM1VjEyNS4xMDVINTMwLjI4VjEyNC4xOUg1MzAuNTk1VjEyNS4xMDVINTMxLjUyNVpNNTMyLjU0MiAxMjYuNjhINTM0LjQ2N1YxMjdINTMyLjAxMlYxMjYuNzQ1TDUzMy40NjcgMTI1LjMyQzUzMy44NjIgMTI0LjkzIDUzMy45MzcgMTI0LjY5NSA1MzMuOTM3IDEyNC40NTVDNTMzLjkzNyAxMjQuMDUgNTMzLjY1MiAxMjMuOCA1MzMuMTE3IDEyMy44QzUzMi43MDcgMTIzLjggNTMyLjM5MiAxMjMuOTI1IDUzMi4xNjIgMTI0LjE5TDUzMS45MDcgMTIzLjk3QzUzMi4xNzcgMTIzLjY1IDUzMi42MTIgMTIzLjQ3IDUzMy4xNDcgMTIzLjQ3QzUzMy44NTcgMTIzLjQ3IDUzNC4zMDcgMTIzLjgzIDUzNC4zMDcgMTI0LjQxNUM1MzQuMzA3IDEyNC43NSA1MzQuMjAyIDEyNS4wNSA1MzMuNzMyIDEyNS41MUw1MzIuNTQyIDEyNi42OFpNNTM0LjggMTIzLjVINTM3LjM3VjEyMy43NTVMNTM1LjkwNSAxMjdINTM1LjUxNUw1MzYuOTU1IDEyMy44Mkg1MzUuMTU1VjEyNC40NzVINTM0LjhWMTIzLjVaTTUzOC41OTQgMTI1LjM3NUM1MzguMTI0IDEyNS4zNzUgNTM3LjgwNCAxMjQuOTk1IDUzNy44MDQgMTI0LjQyNUM1MzcuODA0IDEyMy44NTUgNTM4LjEyNCAxMjMuNDc1IDUzOC41OTQgMTIzLjQ3NUM1MzkuMDU5IDEyMy40NzUgNTM5LjM4NCAxMjMuODUgNTM5LjM4NCAxMjQuNDI1QzUzOS4zODQgMTI1IDUzOS4wNTkgMTI1LjM3NSA1MzguNTk0IDEyNS4zNzVaTTUzOC4zMjQgMTI3TDU0MC43MTQgMTIzLjVINTQxLjAwOUw1MzguNjE5IDEyN0g1MzguMzI0Wk01MzguNTk0IDEyNS4xNUM1MzguOTE5IDEyNS4xNSA1MzkuMTM0IDEyNC44OCA1MzkuMTM0IDEyNC40MjVDNTM5LjEzNCAxMjMuOTcgNTM4LjkxOSAxMjMuNyA1MzguNTk0IDEyMy43QzUzOC4yNjQgMTIzLjcgNTM4LjA1NCAxMjMuOTc1IDUzOC4wNTQgMTI0LjQyNUM1MzguMDU0IDEyNC44NzUgNTM4LjI2NCAxMjUuMTUgNTM4LjU5NCAxMjUuMTVaTTU0MC43MzkgMTI3LjAyNUM1NDAuMjc0IDEyNy4wMjUgNTM5Ljk0OSAxMjYuNjQ1IDUzOS45NDkgMTI2LjA3NUM1MzkuOTQ5IDEyNS41MDUgNTQwLjI3NCAxMjUuMTI1IDU0MC43MzkgMTI1LjEyNUM1NDEuMjA5IDEyNS4xMjUgNTQxLjUyOSAxMjUuNTA1IDU0MS41MjkgMTI2LjA3NUM1NDEuNTI5IDEyNi42NDUgNTQxLjIwOSAxMjcuMDI1IDU0MC43MzkgMTI3LjAyNVpNNTQwLjczOSAxMjYuOEM1NDEuMDY5IDEyNi44IDU0MS4yNzkgMTI2LjUyNSA1NDEuMjc5IDEyNi4wNzVDNTQxLjI3OSAxMjUuNjI1IDU0MS4wNjkgMTI1LjM1IDU0MC43MzkgMTI1LjM1QzU0MC40MTQgMTI1LjM1IDU0MC4xOTkgMTI1LjYyIDU0MC4xOTkgMTI2LjA3NUM1NDAuMTk5IDEyNi41MyA1NDAuNDE0IDEyNi44IDU0MC43MzkgMTI2LjhaIiBmaWxsPSIjMTZEMEI0Ii8+CjxwYXRoIGQ9Ik01ODEuMyAxMjUuOFYxMjUuNDlINTgyLjYxVjEyNS44SDU4MS4zWk01ODIuODcxIDEyMy41SDU4NC4wNTZWMTI3SDU4My42OTZWMTIzLjgySDU4Mi44NzFWMTIzLjVaTTU4NC42NzggMTIzLjVINTg1Ljg2M1YxMjdINTg1LjUwM1YxMjMuODJINTg0LjY3OFYxMjMuNVpNNTg3LjQzOSAxMjUuMzc1QzU4Ni45NjkgMTI1LjM3NSA1ODYuNjQ5IDEyNC45OTUgNTg2LjY0OSAxMjQuNDI1QzU4Ni42NDkgMTIzLjg1NSA1ODYuOTY5IDEyMy40NzUgNTg3LjQzOSAxMjMuNDc1QzU4Ny45MDQgMTIzLjQ3NSA1ODguMjI5IDEyMy44NSA1ODguMjI5IDEyNC40MjVDNTg4LjIyOSAxMjUgNTg3LjkwNCAxMjUuMzc1IDU4Ny40MzkgMTI1LjM3NVpNNTg3LjE2OSAxMjdMNTg5LjU1OSAxMjMuNUg1ODkuODU0TDU4Ny40NjQgMTI3SDU4Ny4xNjlaTTU4Ny40MzkgMTI1LjE1QzU4Ny43NjQgMTI1LjE1IDU4Ny45NzkgMTI0Ljg4IDU4Ny45NzkgMTI0LjQyNUM1ODcuOTc5IDEyMy45NyA1ODcuNzY0IDEyMy43IDU4Ny40MzkgMTIzLjdDNTg3LjEwOSAxMjMuNyA1ODYuODk5IDEyMy45NzUgNTg2Ljg5OSAxMjQuNDI1QzU4Ni44OTkgMTI0Ljg3NSA1ODcuMTA5IDEyNS4xNSA1ODcuNDM5IDEyNS4xNVpNNTg5LjU4NCAxMjcuMDI1QzU4OS4xMTkgMTI3LjAyNSA1ODguNzk0IDEyNi42NDUgNTg4Ljc5NCAxMjYuMDc1QzU4OC43OTQgMTI1LjUwNSA1ODkuMTE5IDEyNS4xMjUgNTg5LjU4NCAxMjUuMTI1QzU5MC4wNTQgMTI1LjEyNSA1OTAuMzc0IDEyNS41MDUgNTkwLjM3NCAxMjYuMDc1QzU5MC4zNzQgMTI2LjY0NSA1OTAuMDU0IDEyNy4wMjUgNTg5LjU4NCAxMjcuMDI1Wk01ODkuNTg0IDEyNi44QzU4OS45MTQgMTI2LjggNTkwLjEyNCAxMjYuNTI1IDU5MC4xMjQgMTI2LjA3NUM1OTAuMTI0IDEyNS42MjUgNTg5LjkxNCAxMjUuMzUgNTg5LjU4NCAxMjUuMzVDNTg5LjI1OSAxMjUuMzUgNTg5LjA0NCAxMjUuNjIgNTg5LjA0NCAxMjYuMDc1QzU4OS4wNDQgMTI2LjUzIDU4OS4yNTkgMTI2LjggNTg5LjU4NCAxMjYuOFoiIGZpbGw9IiNGODY2M0MiLz4KPHJlY3QgeD0iNDYyIiB5PSIxMDAiIHdpZHRoPSIxMzAiIGhlaWdodD0iNCIgZmlsbD0iIzE2RDBCNCIvPgo8cGF0aCBkPSJNNDg0Ljc4NSAzNzUuMzc2TDQ1OC42OTEgMzk5LjIwMUw0MTIuMjAzIDM1Ni4yOThDNDI3LjMwMiAzNDcuMjA5IDQ0MC45MzIgMzM1LjgyMyA0NTIuNjE5IDMyMi42MzZMNDg0Ljc4NSAzNzUuMzg1TDQ4NC43ODUgMzc1LjM3NloiIGZpbGw9IiMwMDVBNUEiLz4KPGcgZmlsdGVyPSJ1cmwoI2ZpbHRlcjVfZF8xMzlfMjU0MSkiPgo8cGF0aCBkPSJNNTcwLjA4MyAxNzYuMjY0QzU3NC4xNTcgMTc2LjM0OCA1NzcuNzk3IDE3OS40ODQgNTc4LjU1NiAxODMuNTE0QzU3OS4zMTQgMTg3LjU3OCA1NzcuMDA5IDE5MS42MTMgNTczLjIzOCAxOTMuMjAyQzU3Mi44OTggMTkzLjMzMSA1MzkuNjY2IDIwNy42NSA1MDAuNDU0IDI0Ny40OTdDNDgyLjg3NiAyNjUuMzY5IDQ0OS4yNyAyOTUuNjU3IDQ2MS4xNzUgMzA3Ljk0NEM0NjEuNDM4IDMwOC4yNTYgNDYxLjIyMSAzMjMuNTY4IDQ2Ni4zOTYgMzI5LjA0OUM0NjYuODkgMzI5LjU3IDQ2Ny4wNTEgMzI5Ljk0NyA0NjcuNDQ1IDMzMC40MzJMNDY3LjcwOSAzMzAuNzA5TDQxNi45ODcgMzc1Ljg2OEw0MTAuOTE1IDM2OS43NTZDNDEwLjc4MyAzNjkuNjE3IDQxMC43NTUgMzY5LjM0NSA0MTAuNjU3IDM2OS4yMDdMNDAxLjE2MyAzNTkuMjE0QzQwMC43MTYgMzU5LjY0NyAzOTguMjc3IDM2Mi4wMTIgMzg4Ljc5MiAzNzEuMjA3QzM4NS4yMTggMzc0LjY3MSAzODUuODgxIDM4My40MjggMzg2Ljg4IDM4NS41OTFDMzg5Ljk3OCAzOTIuMTg2IDM4OS4yMzEgMzk5LjA0MyAzODQuOTAxIDQwMy4yNEMzODMuMTgzIDQwNC45MDYgMzU0LjM4NiA0MzIuODIyIDM1NC4zODYgNDMyLjgyMkMzNDkuNjQ0IDQzNy40MTkgMzQzLjQwMSA0MzkuNjcyIDMzNy4yNzQgNDM5LjU0NkMzMzEuMTQ3IDQzOS40MiAzMjUuMjcxIDQzNi45MTggMzIwLjcyMiA0MzIuMTNMMjc0LjAzNiAzODMuMjczQzI2NC45MDQgMzczLjY5NiAyNjUuMjU2IDM1OC4yMjUgMjc0Ljc0MSAzNDguOTk2TDMwNS4yNTUgMzE5LjQxNUMzMDkuNjg4IDMxNS4xMTggMzE2LjIzOCAzMTQuMzM0IDMyMS43MzQgMzE3LjMwNEMzMjQuMzMyIDMxOC42ODQgMzMzLjUwNSAzMTkuNzU3IDMzNi44MzggMzE2LjUyNkwzNDkuNDg0IDMwNC4yNjdDMzQ2LjczOSAzMDAuMTYzIDM0NS4zMjMgMjk1LjMzNyAzNDUuNDYgMjkwLjMwNUMzNDUuNTU5IDI4My44MDkgMzQ4LjE3NiAyNzcuNzc0IDM1Mi44MTQgMjczLjMxMUwzODUuODAzIDI0MS4zMzFDMzg1Ljk3NSAyNDEuMTY0IDM4Ni41NTUgMjQwLjgwMiAzODYuODk3IDI0MC41MzdMMzkzLjc3IDIzMy44NzRDNDA4LjEzMyAyMTkuOTUgNDIxLjQzOCAyMDYuNzg2IDQyNC44NCAyMDMuNDg4QzQ1My45OCAxNzUuMjA1IDU1OC4zIDE3Ni4wNTYgNTcwLjA4MyAxNzYuMjY0WiIgZmlsbD0idXJsKCNwYWludDBfbGluZWFyXzEzOV8yNTQxKSIvPgo8L2c+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXI2X2RfMTM5XzI1NDEpIj4KPHBhdGggZD0iTTQ4NS44OTggMzU0LjQ0N0w2MjkuNDggNTE4LjE2OUM2MzcuMzkzIDUyNy4xOTIgNjM2LjcyOCA1NDEuMTU2IDYyNy45OTIgNTQ5LjQwOEw2MTcuOTg5IDU1Ny42MjdDNjEzLjYyMiA1NjEuNzM4IDYwNy45NjkgNTYzLjY1NyA2MDIuNDggNTYzLjM5M0M1OTYuOTkxIDU2My4xMjggNTkxLjc4OCA1NjAuNjg2IDU4Ny44MzEgNTU2LjE3NUw0NDQuMjM3IDM5Mi43MDNMNDg1Ljg5OCAzNTQuNDQ3WiIgZmlsbD0idXJsKCNwYWludDFfbGluZWFyXzEzOV8yNTQxKSIvPgo8L2c+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXI3X2RkXzEzOV8yNTQxKSI+CjxwYXRoIGQ9Ik01NjkuNTg3IDM4NS42NDVDNTcxLjY1NSA0MDUuNTcgNTgzLjA0MyA0MTcuOTg1IDYwMC42MjggNDE3Ljk4NUM2MjAuNTUzIDQxNy45ODUgNjMzLjc0NiA0MTcuOTg1IDYzMy43NDYgNDE3Ljk4NVYzNDMuNTM5QzYzMy43NDYgMzI1LjI0NSA2MTguOTE1IDMxMC40MjIgNjAwLjYyOCAzMTAuNDIyQzU4NC4zMzQgMzEwLjQyMiA1NzMuMjAyIDMyMC43NjkgNTcwLjA5MiAzMzkuNDAzTDU2OS41NzkgMzg1LjY1M0w1NjkuNTg3IDM4NS42NDVaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNDk5Ljc0MyAzMDMuMzJDNDk5Ljc0MyAyNzMuMTQ2IDU1NS43ODggMjczLjE0NiA1NTUuNzg4IDMwMy4zMkg0OTkuNzQzWiIgZmlsbD0iIzE2RDBCNCIvPgo8cGF0aCBkPSJNNTc3LjcwNiAzMDMuMzJDNTgzLjU2MiAyNzEuMzIgNjI4Ljc5MyAyNzMuMTQ2IDYzMy43NTEgMzAzLjMySDU3Ny43MDZaIiBmaWxsPSIjMTZEMEI0Ii8+CjxwYXRoIGQ9Ik00OTYuMDA4IDM4NS42NDVDNDk4LjA3NSA0MDUuNTcgNTA5LjQ2NCA0MTcuOTg1IDUyNy4wNDkgNDE3Ljk4NUM1NDYuOTc0IDQxNy45ODUgNTYwLjE2NyA0MTcuOTg1IDU2MC4xNjcgNDE3Ljk4NVYzNDMuNTM5QzU2MC4xNjcgMzI1LjI0NSA1NDUuMzM2IDMxMC40MjIgNTI3LjA0OSAzMTAuNDIyQzUxMC43NTUgMzEwLjQyMiA0OTkuNjIzIDMyMC43NjkgNDk2LjUxMyAzMzkuNDAzTDQ5NiAzODUuNjUzTDQ5Ni4wMDggMzg1LjY0NVoiIGZpbGw9IndoaXRlIi8+CjxnIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTptdWx0aXBseSI+CjxwYXRoIGQ9Ik01MTYuOTgyIDM4OC4zNTVDNTI3LjA5OCAzODguMzU1IDUzNS4yOTkgMzgwLjE1NCA1MzUuMjk5IDM3MC4wMzhDNTM1LjI5OSAzNTkuOTIyIDUyNy4wOTggMzUxLjcyMSA1MTYuOTgyIDM1MS43MjFDNTA2Ljg2NiAzNTEuNzIxIDQ5OC42NjUgMzU5LjkyMiA0OTguNjY1IDM3MC4wMzhDNDk4LjY2NSAzODAuMTU0IDUwNi44NjYgMzg4LjM1NSA1MTYuOTgyIDM4OC4zNTVaIiBmaWxsPSIjMDA0ODRBIi8+CjwvZz4KPGcgc3R5bGU9Im1peC1ibGVuZC1tb2RlOm11bHRpcGx5Ij4KPHBhdGggZD0iTTU5MC45NTIgMzg4LjM1NUM2MDEuMDY4IDM4OC4zNTUgNjA5LjI2OSAzODAuMTU0IDYwOS4yNjkgMzcwLjAzOEM2MDkuMjY5IDM1OS45MjIgNjAxLjA2OCAzNTEuNzIxIDU5MC45NTIgMzUxLjcyMUM1ODAuODM2IDM1MS43MjEgNTcyLjYzNSAzNTkuOTIyIDU3Mi42MzUgMzcwLjAzOEM1NzIuNjM1IDM4MC4xNTQgNTgwLjgzNiAzODguMzU1IDU5MC45NTIgMzg4LjM1NVoiIGZpbGw9IiMwMDQ4NEEiLz4KPC9nPgo8cGF0aCBkPSJNNTk1LjQzNCAzNjIuMDZDNTk3LjkxIDM2Mi4wNiA1OTkuOTE3IDM2MC4wNTMgNTk5LjkxNyAzNTcuNTc3QzU5OS45MTcgMzU1LjEwMSA1OTcuOTEgMzUzLjA5NCA1OTUuNDM0IDM1My4wOTRDNTkyLjk1OCAzNTMuMDk0IDU5MC45NTEgMzU1LjEwMSA1OTAuOTUxIDM1Ny41NzdDNTkwLjk1MSAzNjAuMDUzIDU5Mi45NTggMzYyLjA2IDU5NS40MzQgMzYyLjA2WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTUyMi4zNCAzNjIuMDZDNTI0LjgxNiAzNjIuMDYgNTI2LjgyMyAzNjAuMDUzIDUyNi44MjMgMzU3LjU3N0M1MjYuODIzIDM1NS4xMDEgNTI0LjgxNiAzNTMuMDk0IDUyMi4zNCAzNTMuMDk0QzUxOS44NjQgMzUzLjA5NCA1MTcuODU3IDM1NS4xMDEgNTE3Ljg1NyAzNTcuNTc3QzUxNy44NTcgMzYwLjA1MyA1MTkuODY0IDM2Mi4wNiA1MjIuMzQgMzYyLjA2WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kXzEzOV8yNTQxIiB4PSIwLjA4Mjc3ODkiIHk9IjEwNS44NDQiIHdpZHRoPSIzMzkuNDc5IiBoZWlnaHQ9IjM2OS45NTgiIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIj4KPGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldC8+CjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjEwLjM4MTUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4yOTQxMTggMCAwIDAgMCAwLjUyOTQxMiAwIDAgMCAwIDEgMCAwIDAgMC4yIDAiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJlZmZlY3QxX2Ryb3BTaGFkb3dfMTM5XzI1NDEiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMTM5XzI1NDEiIHJlc3VsdD0ic2hhcGUiLz4KPC9maWx0ZXI+CjxmaWx0ZXIgaWQ9ImZpbHRlcjFfZF8xMzlfMjU0MSIgeD0iMjI3LjQ2MiIgeT0iNTMuNDY1NSIgd2lkdGg9IjIwNC45OSIgaGVpZ2h0PSIxNjIuNTI1IiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIxMC4yNjczIi8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuMjk0MTE4IDAgMCAwIDAgMC41Mjk0MTIgMCAwIDAgMCAxIDAgMCAwIDAuMiAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzEzOV8yNTQxIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iZWZmZWN0MV9kcm9wU2hhZG93XzEzOV8yNTQxIiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8ZmlsdGVyIGlkPSJmaWx0ZXIyX2RfMTM5XzI1NDEiIHg9IjQ5OS4yNjMiIHk9IjEwNy42NDEiIHdpZHRoPSIxNDguNzA1IiBoZWlnaHQ9IjEyMy43MDQiIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIj4KPGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldC8+CjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjEzLjE3NDEiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4yOTQxMTggMCAwIDAgMCAwLjUyOTQxMiAwIDAgMCAwIDEgMCAwIDAgMC4yIDAiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJlZmZlY3QxX2Ryb3BTaGFkb3dfMTM5XzI1NDEiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMTM5XzI1NDEiIHJlc3VsdD0ic2hhcGUiLz4KPC9maWx0ZXI+CjxmaWx0ZXIgaWQ9ImZpbHRlcjNfZF8xMzlfMjU0MSIgeD0iMzg1LjM1MSIgeT0iMC4zNTEyNzEiIHdpZHRoPSIzNDkuMjk1IiBoZWlnaHQ9IjMwOC43MDkiIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIj4KPGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldC8+CjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjEwLjMyNDQiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4yOTQxMTggMCAwIDAgMCAwLjUyOTQxMiAwIDAgMCAwIDEgMCAwIDAgMC4yIDAiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJlZmZlY3QxX2Ryb3BTaGFkb3dfMTM5XzI1NDEiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMTM5XzI1NDEiIHJlc3VsdD0ic2hhcGUiLz4KPC9maWx0ZXI+CjxmaWx0ZXIgaWQ9ImZpbHRlcjRfZF8xMzlfMjU0MSIgeD0iNDQxLjI1OSIgeT0iODUuMjU4NyIgd2lkdGg9IjI0MS40ODMiIGhlaWdodD0iMTM4LjQ4MyIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIiBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiPgo8ZmVGbG9vZCBmbG9vZC1vcGFjaXR5PSIwIiByZXN1bHQ9IkJhY2tncm91bmRJbWFnZUZpeCIvPgo8ZmVDb2xvck1hdHJpeCBpbj0iU291cmNlQWxwaGEiIHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAxMjcgMCIgcmVzdWx0PSJoYXJkQWxwaGEiLz4KPGZlT2Zmc2V0Lz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS44NzA2NyIvPgo8ZmVDb2xvck1hdHJpeCB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwLjA4NjI3NDUgMCAwIDAgMCAwLjgxNTY4NiAwIDAgMCAwIDAuNzA1ODgyIDAgMCAwIDAuNzUgMCIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluMj0iQmFja2dyb3VuZEltYWdlRml4IiByZXN1bHQ9ImVmZmVjdDFfZHJvcFNoYWRvd18xMzlfMjU0MSIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDFfZHJvcFNoYWRvd18xMzlfMjU0MSIgcmVzdWx0PSJzaGFwZSIvPgo8L2ZpbHRlcj4KPGZpbHRlciBpZD0iZmlsdGVyNV9kXzEzOV8yNTQxIiB4PSIyNDIuNDAxIiB5PSIxNTUuMjEyIiB3aWR0aD0iMzYxLjI5OCIgaGVpZ2h0PSIzMTMuMzM5IiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjQiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMTIuNSIvPgo8ZmVDb21wb3NpdGUgaW4yPSJoYXJkQWxwaGEiIG9wZXJhdG9yPSJvdXQiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAuMjUgMCIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluMj0iQmFja2dyb3VuZEltYWdlRml4IiByZXN1bHQ9ImVmZmVjdDFfZHJvcFNoYWRvd18xMzlfMjU0MSIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDFfZHJvcFNoYWRvd18xMzlfMjU0MSIgcmVzdWx0PSJzaGFwZSIvPgo8L2ZpbHRlcj4KPGZpbHRlciBpZD0iZmlsdGVyNl9kXzEzOV8yNTQxIiB4PSI0MTkuMjM3IiB5PSIzMzMuNDQ3IiB3aWR0aD0iMjQwLjc2OCIgaGVpZ2h0PSIyNTguOTY5IiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjQiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMTIuNSIvPgo8ZmVDb21wb3NpdGUgaW4yPSJoYXJkQWxwaGEiIG9wZXJhdG9yPSJvdXQiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAuMjUgMCIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluMj0iQmFja2dyb3VuZEltYWdlRml4IiByZXN1bHQ9ImVmZmVjdDFfZHJvcFNoYWRvd18xMzlfMjU0MSIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDFfZHJvcFNoYWRvd18xMzlfMjU0MSIgcmVzdWx0PSJzaGFwZSIvPgo8L2ZpbHRlcj4KPGZpbHRlciBpZD0iZmlsdGVyN19kZF8xMzlfMjU0MSIgeD0iNDYyIiB5PSIyNjAiIHdpZHRoPSIyMDUuNzUxIiBoZWlnaHQ9IjIwNS45ODUiIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIj4KPGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMTQiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMTciLz4KPGZlQ29tcG9zaXRlIGluMj0iaGFyZEFscGhhIiBvcGVyYXRvcj0ib3V0Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwLjI4MjM1MyAwIDAgMCAwIDAuMjkwMTk2IDAgMCAwIDAuMTYgMCIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluMj0iQmFja2dyb3VuZEltYWdlRml4IiByZXN1bHQ9ImVmZmVjdDFfZHJvcFNoYWRvd18xMzlfMjU0MSIvPgo8ZmVDb2xvck1hdHJpeCBpbj0iU291cmNlQWxwaGEiIHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAxMjcgMCIgcmVzdWx0PSJoYXJkQWxwaGEiLz4KPGZlT2Zmc2V0IGR5PSI0Ii8+CjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjQiLz4KPGZlQ29tcG9zaXRlIGluMj0iaGFyZEFscGhhIiBvcGVyYXRvcj0ib3V0Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwLjI4MjM1MyAwIDAgMCAwIDAuMjkwMTk2IDAgMCAwIDAuMSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMTM5XzI1NDEiIHJlc3VsdD0iZWZmZWN0Ml9kcm9wU2hhZG93XzEzOV8yNTQxIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iZWZmZWN0Ml9kcm9wU2hhZG93XzEzOV8yNTQxIiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMTM5XzI1NDEiIHgxPSI1OTIuMTA1IiB5MT0iMTUwLjc4MSIgeDI9IjM0MS40NjIiIHkyPSI0MzYuNjkyIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIG9mZnNldD0iMC40NTcxODQiIHN0b3AtY29sb3I9IiMxMUIxQTIiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMEI4QzhDIi8+CjwvbGluZWFyR3JhZGllbnQ+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxX2xpbmVhcl8xMzlfMjU0MSIgeDE9IjY5NS45OTciIHkxPSI0MjEuODIyIiB4Mj0iNDMwLjk1MSIgeTI9IjQyOS43NTYiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iIzBBOEM3OCIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMxNkQwQjQiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4K',
        title: 'Get advanced features unlocked to build and customize your Datama extension',
        alt: 'Data Mate'
    },
    'logo': {
        src: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA+gAAAPoCAYAAABNo9TkAAAsTUlEQVR4Xu3dX3JUR5rw4UwhsO+KWYH5VmDNCqy+khEdAbMC0ysYegWmV9D0CkZewaCIlrCuPrGCD1YwsIKh7ty2UH51TiVCgCRKpfrznnOeJ4LROeW5mHBYjH7KzDcTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEDX5PoVoJdGP+4+m/xNt1VfgVUo+d3k++5VfbvYaTquTx99u/lqvL//rr4BwOAIdKDXRvd3j3PKP9RXoENKSW9TLm/q60T+GPXnAn98dPBl7ANABwl0oNcEOgzHWdCfX8GvIS/iAegCgQ70mkAHziupvJw+5ePJy7vJn0nIn7wZHx2dW6kHgPUQ6ECvCXRgVpN4f51KfjNdfc+vUj59Mz48vPosPQAskEAHek2gAzfVhntqo/1Nu2XeMDsAlkSgA70m0IFlaM+7N9HerLaLdgAWRKADvSbQgVU5W2lvB9O9P3auHYDrEuhArwl0YF1KSuPJ/2imxx+njXLsPDsAXyPQgV4T6EAUnwR7OXluhR2Azwl0oNcEOhBVvbd9Euwbz9OdW8fOsAMg0IFeE+hAV0yCfX/yxeo6wIAJdKDXBDrQRdM72Zuz62nP2XWA4RDoQK8JdKDrple6lediHaD/BDrQawId6JOzWC/vn9kGD9A/Ah3oNYEO9NV0G3zeS99s7hkwB9APG/UrAAAdklP+Puf09/z7yf+OfnzwfHT/z4/qPwKgo6ygA71mBR0YkunVbWkvnZ7s2QIP0D1W0AEAeiLn9F1O6ee8sfk/7ar6zoPt+o8A6AAr6ECvWUEHhq5dVS/lafr29nNn1QFis4IOANBj7ar6Rv6v9PvJm9H9B09HOzv36j8CIBiBDgAwADml0dn29/u7e0IdIB6BDgAwMDnln4Q6QDwCHQBgoM6F+rGBcgDrJ9ABAAauGaaZN9L/taIOsF4CHQCAlq3vAOsl0AEA+MRZqP+4+2z08OHd+jEASybQAQC4UM75P9vr2X588KR+BMASCXQAAC7VXs+W098nkf7GIDmA5RLoAAB81STSv6uD5I6dTwdYDoEOAMDMmonvaWPz1ej+g6f1IwAWRKADAHAt7bb3lH627R1gsQQ6AABzOdv2bto7wEIIdAAAbqSd9v6vk1dW0wFuRqADAHBjVtMBbk6gAwCwMFbTAeYn0AEAWKiPV7KZ9A5wHQIdAIClaCe9uzcdYGYCHQCApfl4b/qfH9WPALiEQAcAYKmm96aX/24GyNWPALiAQAcAYCWaAXLtlndT3gEuJNABAFiZdst7M+V9d3erfgRAJdABAFipZsp7Kvl4tLP7uH4EwIRABwBg5dpz6Rv5v1zFBvCRQAcAYG3qVWx7zqUDCHQAANYsp/xT+v0Pw+OAwRPoAACs3STSv28jfWfnXv0IYHAEOgAAIbSRvrFpwjswWAIdAIAwmuFx7YR3kQ4MkEAHACAUkQ4MlUAHACCc9hq2kv+fu9KBIRHoAACE1d6VLtKBgRDoAACEJtKBoRDoAACEJ9KBIRDoAAB0w0Z+ZnAc0GcCHQCATjDdHeg7gQ4AQGeIdKDPBDoAAJ1yFukPH96tHwH0gkAHAKBz2kj//Q+RDvSKQAcAoJNyyt83kV5fATpPoAMA0FlNpI/u7+7VV4BOE+gAAHTaJNJ/Gv344El9BegsgQ4AQOflnP4+uv/nR/UVoJMEOgAAPVH2XL8GdJlABwCgF6bXr6U9k92BrhLoAAD0RjvZ/V8nhsYBnSTQAQDolZzTw9H9B0/rK0BnCHQAAHonp/TzaOfBdn0F6ASBDgBAP22k586jA10i0AEA6KV2aNzvfzyvrwDhCXQAAHorp/zD6McHT+orQGgCHQCAXss5/d396EAXCHQAAPqvJFevAeEJdAAAeq+5H93Va0B0Ah0AgEFor16z1R0ITKADADActroDgQl0AAAGw1Z3IDKBDgDAoNjqDkQl0AEAGJ6SntUngDAEOgAAg5NT/mH044Mn9RUgBIEOAMAw5fR09PDh3foGsHYCHQCAQcopjdLvf9jqDoQh0AEAGKyc8k+jnQfb9RVgrQQ6AADDtlFcuwaEINABABi0dmDczu7j+gqwNgIdAABytooOrJ1ABwBg8HJO343uPxDpwFoJdAAAmHri2jVgnQQ6AABMTK9dO3lSXwFWTqADAEA1ifSfRzs79+orwEoJdAAAOG/jlrPowFoIdAAAOCen/JNVdGAdBDoAAHzOKjqwBgIdAAA+YxUdWAeBDgAAF7GKDqyYQAcAgAu0q+juRQdWSKADAMBl3IsOrJBABwCAyz2xig6sikAHAIBL5JRG6V8nj+srwFIJdAAAuJpt7sBKCHQAALhCzum70c6uVXRg6QQ6AAB8zUYS6MDSCXQAAPiKnPIPo93drfoKsBQCHQAAZlGcRQeWS6ADAMBM8iNXrgHLJNABAGAG7ZVrv/3xqL4CLJxABwCAWW3Y5g4sj0AHAIAZ5ZS/NywOWBaBDgAA12FYHLAkAh0AAK4lO4cOLIVABwCAa2iGxY12dh/XV4CFEegAAHBd2So6sHgCHQAArinn9HC0s3OvvgIshEAHAIB55E2r6MBCCXQAAJhHLs6hAwsl0AEAYA7tnei2uQMLJNABAGBetrkDCyTQAQBgXra5Awsk0AEAYE62uQOLJNABAOAmbHMHFkSgAwDATdjmDiyIQAcAgBtot7k/fHi3vgLMTaADAMBN/faHbe7AjQl0AAC4qZwFOnBjAh0AAG4o5/SwPgLMTaADAMACjO7/2So6cCMCHQAAFqGcbtcngLkIdAAAWAjn0IGbEegAALAAOafvRjs79+orwLUJdAAAWJhbtrkDcxPoAACwKBtJoANzE+gAALAwzqED8xPoAACwIDml0Wh3d6u+AlyLQAcAgEU6zba5A3MR6AAAsFgCHZiLQAcAgEXKAh2Yj0AHAIAFcg4dmJdABwCARXufBDpwbQIdAAAWzX3owBwEOgAALFoxyR24PoEOAAALlnP6bvTw4d36CjCTXL8C9NLo/u5xTvmH+goLV1J5PfnybvrWWXcn3yff12dgQcpp+tP46OC4vgJ8lUAHek2gs2x9/AF8tLNzL6XNyZ+JnLYmf+6m0nwtdycfbDUTqtt/BlyppPS38YuDp/UV4KsEOtBrAp1lG+IKWbtt97eTJtybaG8mVU+i3Qo8fK6k8nL84tBZdGBmAh3oNYHOstnCOtVG++/vtyf/QrYnP11sC3ZoV9DH4xcHzqEDMxPoQK8JdJZNoF9susr+x6PpVVP5kW3xDFU5Pfk/46OjN/UV4EqmuAMACzfe3383PjrcG784fNysIJaU/6Ok8kv9xzAcG7ebYyAAMxHoAMDSjV/883kT6+XO5r+V0/KXOv0eBqCd0wAwE4EOAKzMuZX1reZ4QClpv/4j6KfmBgSAGQl0AGAtmrP7418PHjVndG1/p8cEOjAzgQ4ArFUzQKvd/t6EuhV1eibn9F07NBFgBgIdAAihDfV2RT39yRl1euW3E6vowEwEOgAQSrv1vTmjXtJfm3uk68fQXdk2d2A2Ah0ACGn868GzdHqyVVJ5WT+Cjir36gPAlQQ6ABBWPZ++3aym14+ge6ygAzMS6ABAeM1qesnl3yeh/rZ+BB2SBTowE4EOAHTC+PDwVfpm05Z3OienNDLJHZiFQAcAOmO8v/+u3fLu3nS6xiR3YAYCHQDonPbe9JT+Vl+hAwyKA75OoAMAnTR+cfC0nJa/1FeIbSMLdOCrBDoA0Fnjo8M9kU4nFJPcga8T6ABAp4l0OiEXQ+KArxLoAEDntZFeyj/qK4STU/6hPgJcSqADAL0w/vXwienuROaqNeBrBDoA0BvT6e7ldX2FWFy1BnyFQAcA+uXO7e0yafX6BnFsZCvowJUEOgDQK+P9/XfpND2qrxBIsYIOXEmgAwC9Mz46OC4p/a2+QgzFJHfgagIdAOil8YuDp86jE0p2FzpwNYEOAPRXTo/rE0RgBR24kkAHAHprfHj4ylZ3osgpf18fAS4k0AGAXmu3upf0tr4CQFgCHQDov2KrOzGMdh5s10eALwh0AKD3plPdy8v6CgAhCXQAYBhyelKfYI3KvfoA8AWBDgAMwnRgXPmlvsJ6bGSBDlxKoAMAw3H6/ml9AoBwBDoAMBjjo6M3VtFZq5K26hPAFwQ6ADAsp3mvPsHq5XK3PgF8QaADAINiojsAUQl0AGB4TpNVdNYip/xDfQT4gkAHAAZnfHS4V0p6W18BIASBDgAMVHleHwAgBIEOAAxTef+sPsFKjXZ3TXIHLiTQAYBBqleuva6vsDrvs0nuwIUEOgAwXMWVawDEIdABgOEqJ86hs3obVtCBiwl0AGCwbHNnPYoz6MCFBDoAMGy2uQMQhEAHAIbNNncAghDoAMCgtdvcS3pbXwFgbQQ6AEAux/UJVqBs1weATwh0AIC0YZs7AGsn0AEA7tyygg7A2gl0AGDwxvv775xDB2DdBDoAQMM5dADWTKADADROk0BnRfJWfQD4hEAHAGjcSq/qEyxVTmlUHwE+IdABACbGh4cCHYC1EugAAFVJ5WV9BICVE+gAAB+9qV8BYOUEOgDAmSzQAVgbgQ4A8IFJ7gCskUAHADhzYgUdgLUR6AAA1fjoSKCzEqPdXXehA18Q6AAA55RUXtdHWJ73+W59Ajgj0AEAPvWufgWAlRLoAADnlfSqPgHASgl0AIDzcraCDsBaCHQAgE9kK+gArIVABwA477RYQQdgLQQ6AAAABCDQAQDOGR8dHNdHAFgpgQ4AAAABCHQAAAAIQKADAHympPK6PgLAygh0AIAvmeQOwMoJdAAAAAhAoAMAAEAAAh0AAAACEOgAAJ8r6VV9AoCVEegAAJ/L2ZA4AFZOoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQAAIACBDgAAAAEIdAAAAAhAoAMAAEAAAh0AAAACEOgAAAAQgEAHAPhC2a4PALAyAh0AAAACEOgAAAAQgEAHAACAAAQ6AAAABCDQAQC+kLfqAwCsjEAHAPhMTmlUHwFgZQQ6AAAABCDQAQDOGT18eLc+AsBKCXQAgPN+O3H+HIC1EOgAAAAQgEAHAPhEuVcfAGClBDoAwHkbWaADsBYCHQDgvFIMiQNgLQQ6AMB5ORkSB8BaCHQAAFi1bzdf1SeAMwIdAOCcnPIP9RGWZry//64+ApwR6AAA1ejhQ+fPAVgbgQ4A8MFvJ86fA7A2Ah0A4Iw70AFYH4EOAPCBO9ABWCOBDgBwpmzXBwBYOYEOAPBBsYIOwPoIdACAiWaCe87pu/oKS1NKelsfAT4h0AEAGia4syq5vKlPAJ8Q6AAAjY3k/DkAayXQAQAaJVlBB2CtBDoAQCNbQQdgvQQ6ADB4o93drTz5Ul8BYC0EOgDAe9vbWaV8XB8APiHQAQByflSfAGBtBDoAgPPnAAQg0AGAQXP+HIAoBDoAMGzF9nZWLb+qDwCfEOgAwMAVgc5qnZZ39QngEwIdABis0c7OvZzy9/UVANZKoAMAw5U3rZ4DEIZABwCGK5fH9QlWZnx04B504EICHQAYJNvbAYhGoAMAw5RvPalPABCCQAcAhiln29tZuZLK6/oI8AWBDgAMzmhn93GefKmvsEquWAMuJdABgOHZSFbPAQhHoAMAgzLa3d3KKf9QX2G1SnpVnwC+INABgGEpyXA41idnW9yBSwl0AGAw6tVqP9VXAAhFoAMAw7Fx62l9gvU4Tcf1CeALAh0AGIR69tzqOQBhCXQAYBhKelafYI1O3tQHgC8IdACg90Y7D7ZNbieC8dGRQAcuJdABgP7Laa8+wdqUSZ/XR4ALCXQAoNdG9x88zTl9V19hjYo70IErCXQAoLemg+HSz/UVAEIT6ABAfxVb24kku2INuJJABwB6afTj7rOc8vf1FQDCE+gAQO+M7v/5Uc75P+srBJGdQQeuJNABgF5pzp2nVGxtJ57T8q4+AVxIoAMAvTF6+PBuc+48Tx7rRxDHt5tW0IErCXQAoD9+/+PYuXOiGu/vW0EHriTQAYBeGN3f3RPnRFVSeVkfAS4l0AGAzqtx/lN9BYBOEugAQKeJc7rBHejA1wl0AKCTmoFwox8fPBfndEJJzp8DXyXQAYDOaae1NwPhcnpYP4LYSjLBHfgqgQ4AdEp7z/m/Tl4ZCEe3nLypDwCXEugAQGeMdnYfp5KblfPv6kfQCeOjI4EOfJVABwDCOztvvpH/K09e68fQCa5YA2Yl0AGA0Eb3//wo/X7yxnlzOszqOTATgQ4AhDTa2bk3ndJe/tuqOd2WBTowE4EOAITSbme//+Bp2th8ZdWcfsgmuAMzEegAQBjtELhmO3tKP1s1pzdO/xDowEwEOgCwVnUA3JPJnzeGwNFHJrgDsxLoAMBaTM+Y7z6rA+D+7uo0+sgEd+A6BDoAsDLtavnO7uPR/d3jvLH5Pznn/7RiTs9ZPQdmJtABgKU6i/JmIvvvJ/873caef6j/GPqtGBAHzE6gAwALN9p5sN1MYm9Xyj9EuYnsDFFJAh2YWa5fAXqpjQMrdSxROU1/Gh8dHNfXQWrOkqeN21uTfxvNn23fc/BRubP5b+P9/Xf1FeBKAh3oNYHOsg0p0Ee7u1vpfb47+emhCfF70695yxlyuFgp6e3414N79RXgqwQ60GsCnWWb/AD+135sYZ0E90Y+FxKT95Tad99DMJ/J3w/7k0B/VF8BvkqgA70m0AFYl5LS38YvDp7WV4CvMiQOAACW4TQNej4FcH0CHQAAluHbTRPcgWsR6AAAsGAlldemtwPXJdABAGDxrJ4D1ybQAQBg0UoW6MC1CXQAAFi0jWJAHHBtAh0A5lRKelsfAc6UlMbjw0Mr6MC1CXQAmFcub+oTwDlFnANzEegAALBQ2fZ2YC4CHQDmVbIrlIAvnSaBDsxFoAPAvHJ65Rw68Lnx0YFAB+Yi0AHgJpxDB84pqbysjwDXJtABYG7uOQY+5/w5MD+BDgDzOi3OoAOfcv4cuAGBDgBzO7G9HfiE8+fATQh0AJjT+OhIoANnSkn79RFgLgIdAObwcXq786bAGX8fADci0AFgHqa3A5/bKAIduBGBDgDzKMkEd+BMs6tmfHjo7wXgRgQ6AMwj5+kE95JMcgeaXTVWz4EbE+gAMI8PVylZSQdaG8/rA8DcBDoAzOOWO9CBc+7csoIO3JhAB4A5OGsKfNBcrzbe3/dLO+DGBDoAXFNJ5XV9TOOjA6tmgL8HgIUQ6ABwfVbPgY/KifPnwEIIdAC4tvzJHeglpXF9BAam2VEzPjr65O8EgHkJdAC4rg8T3M8UK+owVCXv1SeAGxPoAHBd324KcmDK9nZggQQ6AFxDKentF9Oa3YUOg9T+fWB7O7BAAh0ArufLGM/Z9UowRDnZ3g4slEAHgOvIFwT6abGCBkN0eiLQgYUS6ABwHV8MiGt8OtUd6D/T24FlEOgAcA3jo4MvA/1WscUdhsb0dmAJBDoAzKhZMauPnxgfHhoSB0NjejuwBAIdAGZVLtrePtVMc66PQM+VVF7a3g4sg0AHgFnljUsDPWWD4mAwTk1vB5ZDoAPArO7cujzQUxLoMAAlpXH69rbt7cBSCHQAmEE7sXl//4phcCa5wzCU51f/XQAwP4EOALO44vz5VDYoDobg1PR2YHkEOgDMouSrt7TmUyvo0HPNMMgLr1oEWBCBDgAz+NoP5a5ag0F4Vr8CLIVAB4CvKCXt18crXXZPOtAT32za3g4slUAHgK8pZbaJzcWgOOirksovhsMByybQAeCr3s925jQn29yhrwyHA1ZAoAPAFdrr1Y6OZlwZN8kd+mj694DhcMDyCXQAuEq5xqrZ6R8CHfro1HA4YDUEOgBcZaPMvGrWrLSXyZf6CvRA8z09Pjq0vR1YCYEOAJdo7zy+9vVpxSo69IvVc2BlBDoAXGrG6e2fyM6pQk+0O2LubAp0YGUEOgBcpryf4wdzg+KgP8pzV6sBqyTQAeAC15vefo5BcdAfp++f1ieAlRDoAHCR60xvP6cdFFfS2/oKdFRJ5Ze5fkkHcAMCHQAuUk7mOH9e5dknvwNBWT0H1kCgA8BnSkn7N1o5K86hQ5dZPQfWRaADwOfKPNPbz7nG3elAQFbPgTUR6ABwTnOt0vjocK7z5x80d6e31zMBnWP1HFgngQ4A55Vyozg/U5JVdOgiq+fAGgl0ADhvrrvPLyTQoWOsngPrJtABoLrxcLjzbjIFHlgPq+fAmgl0APggz3f3+UWa0HcfOnRHKeUfVs+BdRPoADDRxPT4xT8Xu+rtPnTohHao4ze3rZ4DayfQAaBRyhJ+ON+wzR264dl4f/9dfQZYG4EOwOC1q2ff3l54TC98RR5YuOnumQOr50AIAh0Alrh61gyeq49ARDk/qU8AayfQARi0dvX8zuairlb7UilW0SGokspLO12ASAQ6AEO33LOnS9g6DyxITlbPgVAEOgCDtfTV84km/m1zh3jaa9UOD1/VV4AQBDoAQ7aayc22uUMozWA416oBEQl0AAZpFavnZ2xzh1hyfuJaNSAigQ7AUK3s3mPb3CGO5nvRYDggKoEOwOCsdPX8A9vcYe3a7/1vNh/XV4BwBDoAQ7Sy1fMPxkeHe20cAOtzWmxtB0IT6AAMSjMcavziYE3Doayiw7q0W9uPDvfqK0BIAh2AYcl5ffce57TabfVAy9Z2oCsEOgCDUVJ5uc7hUM2dy5P/G17XV2Bl8mNb24EuEOgADEdO61s9/+DUKjqsUknlF1Pbga4Q6AAMQinlH80Kdn1dn29vPzcsDlajmTmR7txe/y/mAGYk0AHoven509trGgz3qXabbSkGVcEqbJRHtrYDXSLQARiAYOdPy3vb3GHJSkl/DbFrBuAaBDoAvdZerRTs/On46OhNcy62vgIL1n7f/3rgF2FA5wh0AHor9NVKrlyDpWjPnbtSDegogQ5Af52WJ1HPn9Yr117WV2AB2l/KOXcOdJhAB6CX2i2uR4exh7Gd5hCD66A3ml/KOXcOdJhAB6B3Qm9tP2d8dHBsFR0Wo71KMfov5QC+QqAD0EPBprZfxSo63Nh0KNyh+86BzhPoAPRKu4oWbGr7Vayiw81Mvn9eGwoH9IVAB6A3mh/UO7mKdvpeXMAc2uMsd25vGwoH9IVAB6AX2h/UT98/qq+d4l50uL72ez4XcQ70ikAHoCfy4yZ060v3nL5/2gYH8FVncW5iO9AzAh2AzuvaufOL1F8uPJu+AVdynRrQUwIdgE5rBqz1ZXrz+MXB01LS2/oKXKCclr+4Tg3oK4EOQGe105vv3O7kufNLlWRgHFxCnAN9J9AB6KTpGdTUnfvOZ9Reu1bSfn0FKnEODIFAB6Cb+jwg6pvNxwbGwUfiHBgKgQ5A57Q/rPd4QNR0V0C21R0mxDkwJAIdgE4Zyg/rzVR6W90ZOnEODI1AB6AzSiq/DOqHdVvdGTBxDgyRQAegE9o4f3E4qG3f7Vb309SvKfXwFc0vpcpp+pM4B4ZIoAMQ3hDj/IN2qntKf6uv0GvT2xnKdvPfff0IYFAEOgChDTnOPxi/OHg6+ffwsr5CL03+G3/d69sZAGYg0AEIS5yfc+f2I+fR6as2zu/cFufA4Al0AEIS559qz6Pnsl1foTfq9/rW9HpBgGET6ACEI84v1qwuNpOt6yt0Xjup3fc6wBmBDkAozUA0P7BfrplsbWgcXdcc1zCpHeBLAh2AMKaraQdP6yuXqEPjfqmv0CnT8+ab90xqB/iSQAdg7drVtJT/w2ra7JpdBqWk/foKnVBK+Yfz5gCXE+gArFU7mby5WunFP5/Xj5jVN5uP29VICO5sS/uvh0/qRwBcQKADsDZnW11drTSXdhXyzu1tkU5k7U4PW9oBZiLQAViL9gx1c++xra43ItKJql01L+mv418PHvk+B5iNQAdg5dof2l8cPvZD+2KIdKKZ/Lf4Mp2ebE3i/Fn9CIAZCHQAVmYS5m9LLv/uh/bFO4t0g+NYo7NV8xeH2+Ojozf1YwBmJNABWIk2HL/Z3HLefHmaSG+2E7fHB2DF2u9xq+YAN5LrV4BeGt3fPc4p/1BfWZN2Rc0P7Ss1uv/g6eT/yf9cX2FpJt/fb1NJjw2BA7g5K+gALE1zJtqW9vUYvzh4Wk7LX9pr7GAJ2u3sKf1t8v1tQjvAggh0AJai/cH9xaEt7Ws0Pjrca+6Yb1c4YYHaYxTNdvYXB0/rRwAsgEAHYKHOVs394B5C+wuSbza32qnacEPNf0flNP2pvYXBEDiAhXMGHeg1Z9BXp26lfibM43IunXm1v+A5zU9tZQdYLivoANzY9Id3212ja8+l5/Lvtrwzq+a/lWaWwfTaNHEOsGwCHYC5tT+8p/wf7jzujrMt76X8o34EX5huZZ+EeTsA7nCvfgzAktniDvSaLe7LYTt7P4x2HmxPfhLYyzl9Vz9i4GxlB1gvgQ70mkBfvMkP8L+kO7efjPf339WP6LjmbPrky5PJDwWj6ScMTft9ndMzty4ArJdAB3pNoC9O+wP86funtrL302hn517Km89yTg/rR/RcO4sgp710Z/OZX7gBxCDQgV4T6DfXbnnN6YmVtWFot71vlKe+b/prEub7Kee98Yt/Pq8fARCEQAd6TaDPz5bXYRPq/XK2Wn56smcXDEBcAh3oNYF+fbayc55Q767pMMfy3C/aALpDoAO9JtBn82Equ9U1LlMnvj9xRj22syhPG89tYQfoHoEO9JpAv1pJ5XU6Tc/cc8yspsPkbj1JOT+e/BBh6nsA7fb1dqV841iUA3SbQAd6TaB/ybZXFmW0s/t4EuqPrKqvXju8seTnaaMc+z4G6A+BDvSaQP/ow2p5+vb2c1cqsUj1irZHKZfHk++37+vHLFD7/VvSsVVygH4T6ECvDT3QTW5m1c7F+iO/HJtfu0Ke8vHkz6t059axX6oBDINAB3ptiIF+dh51I+3Z+so6jR4+vJt+f7+d0umjVPJ2zum7+o84p10dT+nV5N/RK1vWAYZNoAO9NpRAn25/zXt+uCeydnU93WqmwW9N/mwPbTv8dEdLedOujJ9Ovt5Kr3y/AnCeQAd6ra+Bfjbo7TQdO1NOl9Xr27Ym/z3fm37NW5MfTjo7Hf5jhKcmxJs/ryYx/m58dHA8/d8AgMsJdKDX+hTo7ZlUU5sZgHZr/G8nW2kj3538l781qd6703hvrCfgp2fCq5JepZynvxRrfknW+HbzlV+UAXBTAh3ota4GertC3kxsTpM/kxiw+gZfGu3ubqX3TcSfs5G269NsPgT25wQ3AGsg0IFe60Kg1+3qryZ/JU9CodkO+8ckyE1cBwAYGoEO9Fq0QK/D3N5M/vZtglyMAwBwRqADvbaOQK9XJr2brohPtFtoT94IcQAAriLQgV5bZKB/DO/2ZTokqkzem+cJ58QBALgJgQ702mhn93HayPfq6+XOhfaZW+WdaekAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEtK/x9NwPZ4BBj0ZgAAAABJRU5ErkJggg==',
        title: 'Datama',
        alt: 'Datama Logo'
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : translation.js project project-deep-sky
 */

const DataMaTranslation = {
    'How to use DataMa ? ': {
        fr: 'Comment utiliser DataMa ? '
    },
    'Datama provides the layer of intelligence needed to explain your performance variations': {
        fr: "Datama apporte la couche d'intelligence ncessaire  l'explication de vos variations de performance"
    },
    'Select the metrics and dimensions to be analyzed. The metrics are the volumes of your performance, and the dimensions will be analyzed as potential explanatory variables of your variations.<br><a title="DataMa Documentation" target="_blank" href="https://datama-solutions.github.io/docs/">Read our documentation</a> to better understand the extension and adapt Datama to your analyses.': {
      fr: 'Selectionnez les mtriques et les dimensions sur lesquels portent votre analyse. Les mtriques sont les volumes de votre performance et les dimensions seront analyses comme potentielles variables explicatives de vos variations.<br><br><a title="DataMa Documentation" target="_blank" href="https://datama-solutions.github.io/docs/">Lisez notre documentation</a> pour mieux comprendre l\'extension et adapter Datama  vos analyses.'
    },
    'Aggregation in %': {
        fr: 'Aggrgation en pourcentage'
    },
    'Numerator': {
        fr: 'Numrateur'
    },
    'Denominator': {
        fr: 'Dnominateur'
    },
    'Formula': {
        fr: 'Formule'
    },
    'Name': {
        fr: 'Nom'
    },
    'Unit': {
        fr: 'Unit'
    },
    'Exclude': {
        fr: 'Ignore(s)'
    },
    'See related documentation': {
        fr: 'Voir la documentation associe'
    },
    'Display as waterfall': {
        fr: 'Afficher sous forme de Waterfall'
    },
    'Display as tree': {
        fr: 'Afficher sous forme d\'arbre de dcision'
    },
    'Reverse axis': {
        fr: 'Faire pivoter les axes'
    },
    'Create your own free insights with': {
        fr: 'Crez vos propres insights avec'
    },
    'Upgrade plan': {
        fr: "Mettre  niveau l'abonnement"
    },
    'Trial version': {
        fr: "Version d'essai"
    },
    'Your current plan': {
        fr: 'Plan actuel'
    },
    'Buy now': {
        fr: 'Acheter maintenant'
    },
    'One week free trial': {
        fr: 'Version d\'essai d\'une semaine'
    },
    'Unlimited rows': {
        fr: 'Lignes illimites'
    },
    'Unlimited dimensions': {
        fr: 'Dimensions illimites'
    },
    'Unlimited metrics': {
        fr: 'Mtriques illimites'
    },
    'Unlimited comparison': {
        fr: 'Comparaison illimites'
    },
    'Recommended': {
        fr: 'Recommand'
    },
    'rows': {
        fr: 'lignes'
    },
    'metrics': {
        fr: 'mtriques'
    },
    'comparison': {
        fr: 'comparaison'
    },
    'Comparison': {
        fr: 'comparaison'
    },
    'Configuration copied to your clipboard, put it into the "Config JSON" input of your editor view to make these change appear by default !': {
        fr: 'La configuration a t copie dans votre presse-papier, afin de la rendre persistante, veuillez la coller dans l\'input \'Config JSON\' de votre outil de visualisation'
    },
    '<p>New license key copied into your clipboard.</p><p>This will be valid for the next week. Enjoy  !</p><br><p>To use it you need to copy it into the "License" part of your visualization tool !</p>': {
      fr: '<p>Votre licence temporaire a t copie dans votre presse-papied.</p><p>Celle-ci sera valide pour les 7 prochains jours. Enjoy  !</p><br><p>Afin de la rendre persitante il faut que vous la placez dans la partie \'License\' de votre outil de visualisation !</p>'
    },
    'Your trial period will expire on expirationDate.  Want more ? Visit ': {
        fr: 'Votre priode d\'essai expirera le expirationDate.  Pour en savoir plus, visitez '
    },
    'Compare by': {
        fr: 'Comparer par'
    },
    'Main KPI': {
        fr: 'KPI Principal'
    },
    'per': {
        fr: 'par'
    },
    'Metrics relation': {
        fr: 'Equation de marcher' // TODO : Translate
    },
    'Comparison': {
        fr: 'Comparaison'
    },
    'Advanced settings': {
        fr: 'Paramtres avancs'
    },
    'Theme': {
        fr: 'Thme'
    },
    'Close': {
        fr: 'Fermer'
    },
    'Apply': {
        fr: 'Appliquer'
    },
    'Save': {
        fr: 'Sauvegarder'
    },
    'Settings': {
        fr: 'Paramtres'
    },
    // Colors
    'Primary': {
        fr: 'Primaire'
    },
    'Secondary': {
        fr: 'Secondaire'
    },
    'Dark': {
        fr: 'Sombre'
    },
    'Light': {
        fr: 'Clair'
    },
    'Background dark': {
        fr: 'Fond clair'
    },
    'Background light': {
        fr: 'Fond sombre'
    },
    'Waterfall In': {
        fr: 'Variation positive (parent)'
    },
    'Waterfall Out': {
        fr: 'Variation ngative (parent)'
    },
    'Waterfall Net': {
        fr: 'Extremum'
    },
    'Waterfall Up': {
        fr: 'Variation positive'
    },
    'Waterfall Down': {
        fr: 'Variation ngative (parent)'
    },
    // Compare waterfall settings
    'Y axis auto scaling': {
        fr: 'Ajuster automatiquement l\'axe des ordonnes'
    },
    'Open biggest/focused element by default': {
        fr: 'Ouvrir par dfaut l\'tape avec la plus grosse variation'
    },
    'Draw links between elements': {
        fr: 'Dessiner un trait entre les tapes de la waterfall'
    },
    'Number of bar before aggregation': {
        fr: 'Nombre d\'lments  afficher par tape'
    },
    'General': {
        fr: 'Gnral'
    },
    'Font': {
        fr: 'Police'
    },
    'Waterfall settings': {
        fr: 'Paramtres de la waterfall'
    },
    'Unit of waterfall': {
        fr: 'Unit de la waterfall'
    },
    'Indicator': {
        fr: 'Indicateur'
    },
    'Conditionnal formatting': {
        fr: 'Rendu conditionnel'
    },
    'Hover only': {
        fr: 'Survol uniquement'
    },
    'Hide': {
        fr: 'Cacher'
    },
    'Colors': {
        fr: 'Couleurs'
    },
    'Color': {
        fr: 'Couleur'
    },
    'Arrows': {
        fr: 'Flches'
    },
    'Gauge': {
        fr: 'Jauge'
    },
    'Impact in volume': {
        fr: 'Impact en volume'
    },
    'Impact in points (pts)': {
        fr: 'Impact en points (pts)'
    },
    'Percent change': {
        fr: 'Evolution en pourcentage'
    },
    'Get a free license available for 7 days !': {
        fr: 'Obtenez gratuitement une licence temporaire de 7 jours'
    },
    'Try DataMa !': {
        fr: 'Essayez DataMa !'
    },
    'Family': {
        fr: 'Famille'
    },
    'Size': {
        fr: 'Taille (px)'
    },
    'decreased': {
        fr: 'baiss'
    },
    'increased': {
        fr: 'augment'
    },
    ' to ': {
        fr: ' au '
    },
    'has variation by': {
        fr: 'a variation de'
    },
    'This has an impact on <b>stepTotalName</b> of <b>impactValue</b>': {
        fr: 'Ceci a un impact sur <b>stepTotalName</b> de <b>impactValue</b>'
    },
    'from <b>fromValue</b> to <b>toValue</b>': {
        fr: 'de <b>fromValue</b>  <b>toValue</b>'
    },
    'in': {
        fr: 'dans'
    },
    '<b>step</b>: <b>ratioStart to ratioEnd</b> (variationPercent Ch, xvariationRatio vs average change)': {
        fr: '<b>step</b>: <b>ratioStart  ratioEnd</b> (variationPercent Ch, xvariationRatio vs changement moyen)'
    },
    'Go deeper with DataMa web Solutions': {
        fr: 'Aller plus loin avec les Solutions web DataMa'
    },
    'Enrich your data': {
        fr: 'Enrichisser vos donnes'
    },
    'Share your result': {
        fr: 'Exporter vos analyses'
    },
    'Shedule your export': {
        fr: 'Exports rcurrents'
    },
    'Number of lines loaded: maxLines (percent) lines.': {
        fr: 'Nombre de lignes charges: maxLines (percent) lignes.'
    },
    '<p>Your license does not allow you to use more than maxColumns metrics and dimensions, following columns have been omitted :</p> omittedColumns': {
        fr: '<p>Votre license ne vous permet pas d\'utiliser plus de maxColumns mtriques et dimensions, les colonnes suivantes ont t ignores:</p>'
    },
    'Metrics relation use non existing columns (steps)': {
        fr: 'Votre quation de marcher utilise des colonnes non existantes'
    },
    '<p>Some part of your saved configuration could not be loaded:</p>failed': {
        fr: '<p>La configuration sauvegarde n\'a pas pu tre recharge:</p>failed'
    },
    'Charts configuration are invalid': {
        fr: 'Les configurations de graphiques sont invalides'
    },
    'Market equation use a non existing step or is invalid)': {
        fr: 'L\'quation de march utilise des tapes non existantes ou est rrone'
    },
    'Made with  for you  by ': {
        fr: 'Fait avec  pour vous  par '
    },
    'Language': {
        fr: 'Langage'
    },
    'language': {
        fr: 'langage'
    },
    'This element is not available': {
        fr: 'Cet lment n\'est pas disponible'
    },
    '<p>We were unable to launch Datama Light due to loading errors.</p>loadingErrors': {
        fr: '<p>Nous n\'avons pas russi lancer Datama Light car nous avons rencontr des erreurs au chargement.</p>loadingErrors'
    },
    'Start/End definition is invalid, it seems that there is less than 2 elements in following comparison : contextIssues': {
        fr: 'La dfinition Start/End n\'est pas valide, il semble qu\'il y ait moins de 2 lments dans la comparaison suivante : contextIssues'
    },
    'Checkout our documentation to better understand our advanced settings': {
        fr: 'Accder a la documentation associ a l\'dition du theme de Datama'
    },
    'Loading DataMa Light core': {
        fr: 'Chargement de Datama...'
    },
    'Loading settings': {
        fr: 'Chargement des paramtres'
    },
    'Loading source': {
        fr: 'Chargement des donnes'
    },
    'Computing metadata...': {
        fr: 'Calcul des metadata'
    },
    'Computing inputs...': {
        fr: 'Calcul des paramtres complmentaires'
    },
    'Checkout our documentation to better understand Comparison definition': {
        fr: 'Accder a la documentation associ a la comparaison dans Datama'
    },
    'Checkout our documentation to better understand Metrics relation': {
        fr: 'Accder a la documentation associ aux quation de marcher dans Datama'
    },
    'Checkout our documentation to discover how Datama Compare is editable': {
        fr: 'Accder a la documentation associ  l\'dition de Datama Compare'
    },
    'Preferences': {
        fr: 'Prfrences'
    },
    'Variation relative to avg': {
        fr: 'Variation relative a la moyenne'
    },
    'Variation %': {
        fr: 'Variation en %'
    },
    'Nothing': {
        fr: 'Aucun'
    },
    'Edit settings': {
        fr: 'Editer les paramtres'
    },
    'Segment text complement': {
        fr: 'Informations complmentaires des segments'
    },
    'Close advanced settings dialog': {
        fr: 'Fermer la fentre d\'dition des paramtres'
    },
    'Apply settings, close and compute': {
        fr: 'Appliquer et fermer la fentre d\'dition des paramtres'
    },
    'Welcome to <span class="font-primary">Datama</span> extension!': {
        fr: 'Bienvenue sur l\'extension <span class="font-primary">Datama</span>!'
    },
    '<span class="font-primary">Datama</span> Compare is a data analysis tool that allows you to quickly identify and explain the biggest drivers of performance variations': {
        fr: '<span class="font-primary">Datama</span> Compare est un outil d\'analyse de donnes qui vous permet d\'identifier et d\'expliquer rapidement les principaux facteurs de variation des performances.'
    },
    'To get started, add columns to this visual in the sidebar!': {
        fr: 'Pour commencer, ajouter des colonnes  ce visuel depuis le menu latrale'
    },
    'You need to have at least one metric and one dimension': {
        fr: 'Vous devez configurer au moins une mtrique et une dimension'
    },
    'Read our documentation to better understand the configuration': {
        fr: 'Rendez-vous sur notre documentation pour mieux comprendre les diffrents paramtres disponibles'
    },
    'Read the documentation': {
        fr: 'Lire la documentation'
    },
    'Upgrade for <span class="font-primary">Premium</span> Benefits!': {
        fr: 'Passez  la vitesse suprieure avec notre version <span class="font-primary">Premium</span>'
    },
    'Split with unlimited number of KPIs!': {
        fr: 'Nombre illimit d\'tapes de la waterfall'
    },
    'Drill down and score interest of unlimited number of dimensions': {
        fr: 'Exploration et score d\'intrt d\'un nombre illimit de dimensions'
    },
    'And much more!': {
        fr: 'Et bien plus encore!'
    },
    'Upgrade Now!': {
        fr: 'Mettre  niveau'
    },
    'Currently on Trial version': {
        fr: 'Version d\'essai en cours'
    },
    'You need to have at least one dimension': {
        fr: 'Vous devez ajouter au moins une dimension'
    },
    'You need to have at least one metric': {
        fr: 'Vous devez ajouter au moins une mtrique'
    },
    'Your license does not allow to use more than 2 dimensions for your analysis': {
        fr: 'Votre licence ne vous permet pas d\'utiliser plus de 2 dimensions pour votre analyse'
    },
    'Select the dimension to compare on': {
        fr: 'Slectionner la dimension a comparer'
    },
    'Your current license does not allow to add others comparison': {
        fr: 'Votre licence ne vous permet pas d\'ajouter de nouvelles comparaisons'
    },
    'Add another comparison': {
        fr: 'Ajouter une nouvelle comparaison'
    },
    'Choose the numerator to use': {
        fr: 'Dfinir le numrateur a utiliser'
    },
    'Choose the denominator to use': {
        fr: 'Dfinir le dnominateur a utiliser'
    },
    'Set step name': {
        fr: 'Dfinir le nom de l\'tape'
    },
    'Set step unit': {
        fr: 'Dfinir l\'unit relative a cette tape'
    },
    'Focus specific dimension on given step': {
        fr: 'Prioriser une dimension pour l\'tape donne'
    },
    'Exclude from analysis dimension(s) for given step': {
        fr: 'Exclure une ou plusieurs dimensions pour l\'tape donne'
    },
    'Remove this step': {
        fr: 'Supprimer cette tape'
    },
    'Create new KPI': {
        fr: 'Ajouter une nouvelle tape'
    },
    'Generate Prod metrics relation': {
        fr: 'Gnrer une quation de marcher multiplicative'
    },
    'Generate Sum metrics relation': {
        fr: 'Gnrer une quation de marcher cumulative'
    },
    'Edit the step function': {
        fr: 'Editer la fonction utilise par l\'quation de marcher'
    },
    'Set the name of Main KPI': {
        fr: 'Dfinir le nom du Main KPI'
    },
    'Your license does not allow to edit Metrics relation': {
        fr: 'Votre licence ne vous permet pas d\'diter l\'quation de marcher'
    },
    'Set the unit of Main KPI': {
        fr: 'Dfinir l\'unit  utiliser pour votre Main KPI'
    },
    'Edit aggregation in %': {
        fr: 'Changer le pourcentage d\'aggrgation'
    },
    'Your license does not allow to edit the aggregation': {
        fr: 'Votre licence ne vous permet pas d\'diter le pourcentage d\'aggrgation'
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaTranslate.js project project-deep-sky
 */

class DataMaTranslate {
    static __putVars(s, v=null) {
        if (v) Object.keys(v).forEach(k => s = s.replace(new RegExp(k), v[k]))
        return s;
    }
    static translate(language, sentence, vars) {
        let exist = DataMaTranslation[sentence], translated;
        if (!exist) {
            return DataMaTranslate.__putVars(sentence, vars)
        }
        if (!DataMaTranslation[sentence][window.DATAMA_LOCAL.split('-')[0]]) {
            translated = DataMaTranslate.__putVars(sentence, vars)
        } else {
            translated = DataMaTranslate.__putVars(DataMaTranslation[sentence][window.DATAMA_LOCAL.split('-')[0]], vars)
        }
        return translated
    }
}
// DATAMA SAS
//
// Copyright (c) [2021-2023] DataMa SAS, All Rights Reserved.
//
// Notice created by Django <django@datama.fr>
// Contributors : Wazhabits <anatole@datama.fr>
// __________________
//
// NOTICE:  All information contained herein is, and remains
// the property of DataMa SAS and/or some open source packages used
// if any.  The intellectual and technical concepts contained
// herein are proprietary to DataMa SAS
// and its suppliers and may be covered by French and Foreign Patents,
// patents in process, and are protected by trade secret or copyright law.
// Dissemination of this information or reproduction of this material
// is strictly forbidden unless prior written permission is obtained
// from DataMa SAS.
// __________________
class DataMaLog {
    /**
     * Info is green on black
     * @param message
     * @param args
     */
    static info(message, ...args) {
        return new Promise(resolve => {
            if (DATAMA_DEBUG) {
            console.info("%c" + message, 'background: #000;color: #129588;')
            if (args && Object.keys(args).length > 0) console.debug(args)
            }
            resolve()
        })
    }
    /**
     * Loading is purple on black
     * @param message
     * @param args
     */
    static loading(message, ...args) {
        return new Promise(resolve => {
            if (DATAMA_DEBUG) {
            console.info("%c" + message, 'background: #000;color: #8062D6;')
            if (args && Object.keys(args).length > 0) console.debug(args)
            }
            resolve()
        })
    }
    /**
     * Ok is blue on black
     * @param message
     * @param args
     */
    static ok(message, ...args) {
        return new Promise(resolve => {
            if (DATAMA_DEBUG) {
            console.info("%c" + message, 'background: #000;color: #1D5D9B;')
            if (args && Object.keys(args).length > 0) console.debug(args)
            }
            resolve()
        })
    }
    /**
     * Warning is orange on black
     * @param message
     * @param args
     */
    static warning(message, ...args) {
        return new Promise(resolve => {
            if (DATAMA_DEBUG) {
            console.warn("%c" + message, 'background: #000;color: #FFB07F;')
            if (args && Object.keys(args).length > 0) console.debug(args)
            }
            resolve()
        })
    }
    /**
     * Error is red on black
     * @param message
     * @param args
     */
    static error(message, ...args) {
        return new Promise(resolve => {
            if (DATAMA_DEBUG) {
            console.error("%c" + message, 'background: #000;color: #B31312;')
            if (args && Object.keys(args).length > 0) console.debug(args)
            }
            resolve()
        })
    }
    static debug(message) {
        return new Promise(resolve => {
            if (DATAMA_DEBUG) {
                if (typeof message !== 'string') {
                    console.debug('%cDataMa Debug :', 'background: #000;color: #79E0EE;')
                    console.debug(message)
                } else {
                    console.debug('%c' + message, 'background: #000;color: #79E0EE;')
                }
            }
            resolve()
        })
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2023 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaColorsManager.js project project-deep-sky
 */
class DataMaColorsManager {
    static init() {
        DataMaColorsManager.base = {
            default: [
                "#eea59c",
                "#A8D7D2",
                "#4682B4",
                "#499e95",
                "#dd4b39",
                "#1F77B4",
                "#FF7F0E",
                "#E3F09B",
                "#BF8FCD",
                "#65AFFF",
                "#F6BD60",
                "#FA8967",
                "#5DD371",
                "#ABBFC8",
                "#FFDE50",
                "#5FB0B7",
                "#525B76",
                "#C4F1BE",
                "#F7AEF8",
                "#8093F1",
                "#F24C00"
            ],
            scattered: [
                "#ff9a8c",
                "#8CFFC7",
                "#2182BF",
                "#18A340",
                "#f05454",
                "#319EDE",
                "#FF8452",
                "#EBBD44",
                "#52949E",
                "#D41EAC",
                "#EDA43E",
                "#76B7B2",
                "#6EDAEB",
                "#121FA1",
                "#edc949",
                "#ea86b6"
            ],
            grayscale: [
                "#222222",
                "#888888",
                "#555555",
                "#AAAAAA",
                "#000000",
                "#444444",
                "#888888",
                "#111111",
                "#181818",
                "#222222",
                "#282828",
                "#333333",
                "#383838",
                "#444444",
                "#484848",
                "#555555"
            ],
            custom: [
                "#eea59c",
                "#A8D7D2",
                "#4682B4",
                "#499e95",
                "#dd4b39",
                "#1F77B4",
                "#FF7F0E",
                "#E3F09B",
                "#BF8FCD",
                "#65AFFF",
                "#F6BD60",
                "#FA8967",
                "#5DD371",
                "#ABBFC8",
                "#FFDE50",
                "#5FB0B7",
                "#525B76",
                "#C4F1BE",
                "#F7AEF8",
                "#8093F1",
                "#F24C00"
            ]
        }
    }
    static setCustomPalette(palette) {
        DataMaColorsManager.base.custom = palette
    }
    static setPalette(palette = 'default') {
        DataMaColorsManager.palette = DataMaColorsManager.base[palette]
    }
    static getWaterfallColors() {
        if (!DataMaColorsManager.palette) {
            DataMaColorsManager.init()
            DataMaColorsManager.setPalette()
        }
        return {
            out: DataMaColorsManager.palette[0],
            in: DataMaColorsManager.palette[1],
            net: DataMaColorsManager.palette[2],
            Up: DataMaColorsManager.palette[3],
            Down: DataMaColorsManager.palette[4]
        }
    }
    static getComparisonColors(properties = false) {
        if (!DataMaColorsManager.palette) {
            DataMaColorsManager.init()
            DataMaColorsManager.setPalette()
        }
        if (properties) {
            return {
                start: DataMaColorsManager.palette[5],
                end: DataMaColorsManager.palette[6],
                default: 'hsla(205, 50, 71, 0.4)',
                other: 'rgba(0, 0, 0, 0.2)',
            }
        } else {
            return [
                DataMaColorsManager.palette[5],
                DataMaColorsManager.palette[6]
            ]
        }
    }
    static getPlotColors(elements, hasObject = false) {
        if (!DataMaColorsManager.palette) {
            DataMaColorsManager.init()
            DataMaColorsManager.setPalette()
        }
        let toObj = (elements, colors) => {
            let i = 0;
            let obj = {};
            while (i < elements.length) {
                obj[elements[i]] = colors[i]
                i++;
            }
            return obj;
        }
        if (elements.length + 7 > DataMaColorsManager.palette.length) {
            let domain = elements.map((e, i) => i);
            let range = DataMaColorsManager.palette.filter((c, i) => i >= 7);
            let mod = range.length / domain.length
            let scale = d3.scaleLinear().domain(range.map((e, i) => i)).range(range)
            let result = domain.map(d => d3.color(scale(d * mod)).formatHex());
            let polarized = (origin) => {
                let result = []
                let i = 0;
                while (i < origin.length / 2) {
                    if (origin[i] != null) {
                        result.push(origin[i])
                    }
                    if (origin[origin.length - i] != null) {
                        result.push(origin[parseInt(origin.length / 2) + i])
                    }
                    i++;
                }
                if (i === origin.length / 2) {
                    result.push(origin[i])
                }
                return result;
            }
            result = polarized(result)
            return hasObject ? toObj(elements, result) : result
        } else {
            return hasObject ? toObj(elements, DataMaColorsManager.palette.filter((c, i) => i >= 7).filter((c, i) => i < elements.length))
                : DataMaColorsManager.palette.filter((c, i) => i >= 7).filter((c, i) => i < elements.length)
        }
    }
    static getRangeColors(start, end, position = 0.5) {
        let scale = d3.scaleLinear().domain([0, 1]).range([start, end])
        return scale(position);
    }
}
// DATAMA SAS
//
// Copyright (c) [2021-2023] DataMa SAS, All Rights Reserved.
//
// Notice created by Django <django@datama.fr>
// Contributors : Wazhabits <anatole@datama.fr>
// __________________
//
// NOTICE:  All information contained herein is, and remains
// the property of DataMa SAS and/or some open source packages used
// if any.  The intellectual and technical concepts contained
// herein are proprietary to DataMa SAS
// and its suppliers and may be covered by French and Foreign Patents,
// patents in process, and are protected by trade secret or copyright law.
// Dissemination of this information or reproduction of this material
// is strictly forbidden unless prior written permission is obtained
// from DataMa SAS.
// __________________
class DataMaTimer {
    constructor() {
        this.running = {}
        this.ended = {}
    }
    start(id) {
        this.running[id] = Date.now();
    }
    stop(id) {
        this.ended[id] = Date.now() - this.running[id];
        DataMaLog.info("> " + id + " : done in " + this.ended[id] + "ms")
    }
    get(id) {
        return this.ended[id] || 'Currently running'
    }
    history() {
        return new Promise(() => {
            let elements = [];
            let total = []
            Object.keys(this.ended).forEach(key => {
                elements.push('\t-\t' + key + ': ' + this.ended[key] + 'ms\n');
                total.push(this.ended[key])
            })
            elements.sort((a, b) => a.length - b.length)
            DataMaLog.debug([
                'DataMa Light execution time:\n',
                ...elements,
                '---\nTotal:' + total.reduce((a, b) => a+b) + 'ms'
            ].join(''))
        })
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2023 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaDate.js project project-deep-sky
 */
class DataMaDate {
    constructor(date) {
        if (typeof date === 'string') {
            this.__date__ = new Date(date);
        } else {
            this.__date__ = new Date();
            this.__date__.setTime(date)
        }
    }
    __getYear() {
        return this.__date__.getFullYear().toString();
    }
    __getMonth() {
        let month = (this.__date__.getMonth() + 1).toString();
        if (month < 10) {
            return '0' + month
        }
        return month
    }
    __getDate() {
        let day = this.__date__.getDate().toString();
        if (day < 10) {
            return '0' + day
        }
        return day
    }
    __getHour() {
        let hour = this.__date__.getHours().toString();
        if (hour < 10) {
            return '0' + hour
        }
        return hour
    }
    __getMinutes() {
        let minutes = this.__date__.getMinutes().toString();
        if (minutes < 10) {
            return '0' + minutes
        }
        return minutes
    }
    __getSeconds() {
        let seconds = this.__date__.getSeconds().toString();
        if (seconds < 10) {
            return '0' + seconds
        }
        return seconds
    }
    get(datetime=true) {
        return this.__getYear() + '/' + this.__getMonth() + '/' + this.__getDate() + (datetime ? ' ' + this.__getHour() + ':' + this.__getMinutes() + ':' + this.__getSeconds() : '');
    }
    getTimestamp() {
        return this.__date__.getTime()
    }
    static format(date, datetime=false) {
        if (typeof date === 'number' || typeof date === 'string') date = new DataMaDate(date)
        return date.get(datetime);
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2023 DATAMA SAS, All rights reserved.
 * Generated for file : DataMath.js project project-deep-sky
 */
class DataMath {
    /**
     * Convert formula to postfix
     * @param formula
     * @return {{elements: {}, postfix: string}}
     */
    static convertFormulaToPostfix(formula) {
        return DataMath.infixToPostfix(formula)
    }
    /**
     * Return operator precedence
     * @param c
     * @return {number}
     */
    static prec(c) {
        if(c === '^')
            return 3;
        else if(c === '/' || c==='*')
            return 2;
        else if(c === '+' || c === '-')
            return 1;
        else
            return -1;
    }

    /**
     * Transflate infix to postfix
     * @param s
     * @return {{elements: {}, postfix: string}}
     */
    static infixToPostfix(s) {
        if (!s || s === '') return ''
        let elements = {};
        let charSteps = 'A'.charCodeAt(0)
        s.match(new RegExp(/(\[\d+])/gm))
            .forEach((r, i) => {
            let c = String.fromCharCode(charSteps + i);
            elements[c] = r
            s = s.replace(
                new RegExp(r.replace('[', '\\[')),
                c
            )
        })
        let numbers = /\d+/g.exec(s);
        let charNumber = 'a'.charCodeAt(0)
        if (numbers) {
            numbers.forEach((r, i) => {
                let c = String.fromCharCode(charNumber + i);
                elements[c] = r
                s = s.replace(
                    new RegExp(r),
                    c
                )
            })
        }
        let i = 0;
        let st = [];
        let result = "";
        while (i < s.length) {
            let c = s[i];
            if ((c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z') || (c[0] >= '0' && c[0] <= '9')) {
                result += c;
            } else if (c === '(') {
                st.push('(');
            } else if (c === ')') {
                while(st.length > 0 && st[st.length - 1] !== '(')
                {
                    result += st[st.length - 1];
                    st.pop();
                }
                st.pop();
            } else {
                while(st.length > 0 && DataMath.prec(s[i]) <= DataMath.prec(st[st.length - 1])) {
                    result += st[st.length - 1];
                    st.pop();
                }
                st.push(c);
            }
            i++
        }
        while(st.length !== 0) {
            result += st[st.length - 1];
            st.pop();
        }
        return {postfix: result, elements: elements};
    }

    /**
     * Make the postfix operation
     * @param postfix
     * @param elements
     * @param operators
     * @param context
     * @return {number}
     */
    static resolvePostfix({postfix, elements}, operators, context) {
        let total = 0;
        let current = [...postfix.split('')];
        let i = 0;
        if (current.length === 1) {
            if (elements[current].match(/\[\d+]/g)) {
                return context[parseInt(elements[current].replace(/[\[\]]/, '')) - 1];
            } else {
                return parseFloat(elements[current])
            }
        }
        while (current.length > 1) {
            if (operators.indexOf(current[i]) !== -1) {
                let operator = current[i];
                let a = current[i - 2] === 'Result' ? total : elements[current[i - 2]];
                let b = current[i - 1] === 'Result' ? total : elements[current[i - 1]];
                if (typeof a === 'string') {
                    if (a.match(/\[\d+]/g)) {
                        a = context[parseInt(a.replace(/[\[\]]/, '')) - 1]
                    } else {
                        a = parseFloat(a)
                    }
                }
                if (typeof b === 'string') {
                    if (b.match(/\[\d+]/g)) {
                        b = context[parseInt(b.replace(/[\[\]]/, '')) - 1]
                    } else {
                        b = parseFloat(b)
                    }
                }
                if (operator === '+') {
                    total = a + b
                } else if (operator === '-') {
                    total = a - b
                } else if (operator === '/') {
                    total = a / b
                } else if (operator === '*') {
                    total = a * b
                } else if (operator === '%') {
                    total = a % b
                } else if (operator === '^') {
                    total = a ^ b
                }
                current.splice(i - 2, 3, 'Result')
                i = 0;
            } else {
                i++;
            }
        }
        return total
    }

    /**
     * Using Intl constructor to format our numbers, very useful func
     * ref: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat/NumberFormat
     * @param number
     * @param locale
     * @param properties
     * @return {string}
     */
    static formatNumber(number, locale='en', properties={}) {
        let isNegative = number < 0;
        let abs;
        if (isNegative) abs = Math.abs(number)
        let configuration = {
            notation: properties?.percent || properties?.compact === false ? 'standard' : ((isNegative && abs < 0.001) || (!isNegative && number < 0.001) ? 'scientific' : 'compact'),
            signDisplay: isNegative || properties?.compact === false ? 'never' : (properties?.sign == null || properties?.sign ? 'exceptZero' : 'never'),
            maximumSignificantDigits: 3,
            minimumSignificantDigits: 3,
            style: 'decimal',
            trailingZeroDisplay: 'stripIfInteger'
        }
        return (isNegative ? '-' : '') + (new Intl.NumberFormat(locale, configuration)).format(isNegative ? abs : number) + (properties?.unit || (properties?.percent ? '%' : '') || '');
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaUtils.js project project-deep-sky
 */
class DataMaUtils {
    /**
     * Add divider in context menu
     * @returns {HTMLElement}
     * @private
     */
    static divider(tag='li', vertical=false, id=false, classList=[], half=false) {
        let node = DataMaUtils.getNode(tag, id)
        node.classList.add('datama-divider', ...classList)
        if (vertical) {
            node.classList.add('vertical')
        }
        if (half) {
            node.classList.add('datama-divider-half')
        }
        return node;
    }
    static proxify(obj, watch){
        return new Proxy(obj, new ProxyHandler("root", watch));
    }
    /**
     *
     * @param tag {string}
     * @param id {string|false}
     * @param classList {Array}
     * @param target {bool|HTMLElement}
     * @param props {Object}
     * @returns {HTMLElement}
     */
    static getNode(tag, id=false, classList=[], target=false, props={}) {
        let node = document.getElementById(id);
        if (!node) {
            node = document.createElement(tag)
            if (id) {
                node.id = id;
            }
        } else {
            return node;
        }
        if (target) target.append(node)
        classList.forEach(c => node.classList.add(c))
        Object.keys(props).forEach(prop => {
            if (prop === 'text') {
                node.innerText = DataMaTranslate.translate(window.DATAMA_LOCAL, props[prop], props?.vars)
            } else if (prop === 'title') {
                node.setAttribute(prop, DataMaTranslate.translate(window.DATAMA_LOCAL, props[prop], props?.vars))
            } else {
                node.setAttribute(prop, props[prop])
            }
        })
        return node;
    }
    /**
     * Convert ['a', 'b', 'c']
     * to {a: placeholder[0] || placeholder, b: placeholder[1] || placeholder, c: placeholder[2] || placeholder}
     * @param array
     * @param placeholders
     * @returns {*}
     */
    static convertArrayToKeyObject(array=[], placeholders=false) {
        return array.reduce((accumulator, value, index) => {
            return {...accumulator, [value]: Array.isArray(placeholders) ? placeholders[index] : placeholders};
        }, {});
    }


    /**
     * This function return if a value is contains into the selection/range given (useful for isStartEnd)
     * @param value
     * @param range
     * @param type
     * @param settings
     * @return {boolean}
     */
    static valueInRange(value, range, type=false, settings) {
        let result;
        if (type === 'int' || type === 'float') {
            if (type === 'float') {
                value = parseFloat(value)
                range = range.map(r => parseFloat(r))
            } else {
                value = parseInt(value)
                range = range.map(r => parseInt(r))
            }
            if (settings?.range) {
                if (range.length === 1) range = [range[0], range[0]]
                result = value >= range[0] && value <= range[1]
            } else {
                result = range.indexOf(value) > -1
            }
        } else if (type === 'date') {
            result = new Date(value).getTime() >= new Date(range[0]).getTime() && new Date(value).getTime() <= new Date(range[1]).getTime()
        } else if (!type || type === 'string' || type === 'unknown' || type === 'boolean') {
            result = range.indexOf(value) > -1
        }
        return result;
    }
    static computeTextRenderWidth(text, font) {
        let node = document.getElementById('datama-testing-text') || document.createElement('DIV')
        if (document.getElementById('datama-testing-text') == null) {
            node.id = 'datama-testing-text'
            document.body.append(node);
        }
        node.setAttribute('style', 'font-size:' + font.size + 'px !important;font-family: "' + font.family + '" !important;font-weight: ' + font.weight + ' !important;')
        node.innerText = text;
        return node.clientWidth;
    }
    static makeText(text, configuration) {
        let {width, font, allowOverflowRatio, breakingChars, verticalAlign, maxLines} = configuration;
        if (!breakingChars) breakingChars = {space: ' ', comma: ',', minus: '-'}
        let result = [];
        let computedWidth = DataMaUtils.computeTextRenderWidth(text, font);
        if (computedWidth > width) {
            let ratio = computedWidth / width
            if (ratio < (allowOverflowRatio || 1.25)) {
                let obj = {
                    text: text,
                    font: {...font}
                }
                while (computedWidth > width) {
                    obj.font.size -= 0.25;
                    computedWidth = DataMaUtils.computeTextRenderWidth(text, obj.font);
                }
                result.push(obj);
            } else {
                let index = 0;
                while (text.length > 0) {
                    index++;
                    let ratio = (DataMaUtils.computeTextRenderWidth(text, font) / width)
                    let baseSplitIndex = parseInt(ratio > 1  ? (text.length / ratio) + ((text.length * ratio) % 1 > 0 ? 1 : 0) : 0);
                    let left_part = text.substring(0, baseSplitIndex + 1).split('').reverse().join('');
                    let left = {};
                    Object.keys(breakingChars).forEach((k) => left[k] = left_part.indexOf(breakingChars[k]))
                    if (Object.keys(left).every(k => left[k] < 0 || left[k] === 0)) {
                        baseSplitIndex = text.length - 1
                        left_part = text.split('').reverse().join('');
                        Object.keys(breakingChars).forEach((k) => left[k] = left_part.indexOf(breakingChars[k]))
                    }
                    let result_left = Object.keys(left).filter(e => left[e] >= 0).map(l => left[l]);
                    let keyLeft = Object.keys(left).filter(e => left[e] >= 0)[result_left.indexOf(Math.min(...result_left))];
                    let subs =[];
                    if (!keyLeft || ratio < 1) {
                        subs = [text]
                        text = '';
                    } else {
                        subs = [text.substring(0, baseSplitIndex - left[keyLeft])]
                        let newText = text.substring(baseSplitIndex - left[keyLeft], text.length).trim();
                        if (newText === text) {
                            subs = [text]
                            text = '';
                        } else {
                            text = newText
                        }
                    }
                    let full_text;
                    if (index === maxLines) {
                        if (text.length > 0) {
                            full_text = subs[0] + ' ' + text
                            subs[0] = subs[0] + '...'
                        }
                        text = []
                    }
                    result.push(...subs.map((s, i) => ({text: s, full_text: full_text, font: {...font}})))
                }
                result = result.map((e, i) => {
                    return {...e, font: {...font, size: font.size}, lags: {y: (i * font.size) - ((((result.length - 1) * font.size) / 2) * (verticalAlign === 'middle' ? 1 : (verticalAlign === 'end' ? 2 : 0)))}}
                })
            }
        } else {
            result.push({
                text: text,
                font: {...font}
            })
        }
        return result;
    }
    static copyToClipboard(content) {
        const textarea = DataMaUtils.getNode("textarea", 'datama-copy-to-clipboard', [], document.body);
        textarea.textContent = content;
        textarea.select();
        document.execCommand("copy");
        textarea.remove();
    }
}
class ProxyHandler {
    constructor(name, watch=()=>null) {
        this.name = name;
        this.watch = watch
    }

    set(o, p, v) {
        (this.watch)();
        v = this.recurse(p, v);
        o[p] = v;
        return true;
    }

    get(o, p) {
        return o[p];
    }

    deleteProperty(o, p){
        return delete o[p];
    }

    recurse(p, v) {
        //check for falsy values
        if (v && v.constructor) {
            if (v.constructor === Object) {
                //check object properties for other objects or arrays
                v = Object.keys(v).reduce((pp, cc) => {
                    pp[cc] = this.recurse(`${p}.${cc}`, v[cc]);
                    return pp;
                }, {})
                //proxify objects
                v = new Proxy(v, new this.constructor(`${this.name}.${p}`, this.watch));
            } else if (v.constructor === Array) {
                //check arrays for objects or arrays
                v = v.map((vv, vk) => this.recurse(`${p}[${vk}]`, vv));
                //set observers on some array methods
                ["push", "pop", "shift", "unshift"].forEach(m => {
                    v[m] = data => {
                        return Array.prototype[m].call(v, data);
                    }
                })
            }
        }
        return v;
    }
}

// DATAMA SAS
//
// Copyright (c) [2021-2023] DataMa SAS, All Rights Reserved.
//
// Notice created by Django <django@datama.fr>
// Contributors : Wazhabits <anatole@datama.fr>
// __________________
//
// NOTICE:  All information contained herein is, and remains
// the property of DataMa SAS and/or some open source packages used
// if any.  The intellectual and technical concepts contained
// herein are proprietary to DataMa SAS
// and its suppliers and may be covered by French and Foreign Patents,
// patents in process, and are protected by trade secret or copyright law.
// Dissemination of this information or reproduction of this material
// is strictly forbidden unless prior written permission is obtained
// from DataMa SAS.
// __________________
class DataMaLogic {
    constructor(core) {
        this.__core__ = core;
    }

    /**
     * Return metadata of context column (used for comparison)
     * @returns {*}
     * @private
     */
    __getContextColumn() {
        let meta = this.__core__.__settings__.meta[this.__core__.__settings__.inputs.context];
        meta.getType = function() {
            switch (this.type) {
                case 'date':
                    return 'date'
                default:
                    return 'select';
            }
        }
        return meta
    }

    /**
     * Compute Start End default value for a given dimension column
     * @param dimension
     * @returns {{start: *, end: *}}
     * @private
     */
    __makeAutoContext(dimension=false) {
        if (!dimension) {
            dimension = this.__core__.__settings__.dimensions[0];
        }
        let size = parseInt(this.__core__.__settings__.meta[dimension].unique.length / 2) - 1;
        let start = [
            this.__core__.__settings__.meta[dimension].unique[0],
            this.__core__.__settings__.meta[dimension].unique[size]
        ].sort((a, b) => a - b)
        let end = [
            this.__core__.__settings__.meta[dimension].unique[parseInt(this.__core__.__settings__.meta[dimension].unique.length / 2)],
            this.__core__.__settings__.meta[dimension].unique[parseInt(this.__core__.__settings__.meta[dimension].unique.length / 2) + size]
        ].sort((a, b) => a - b)
        return {start: start.unique(), end: end.unique()}
    }
}
// DATAMA SAS
//
// Copyright (c) [2021-2023] DataMa SAS, All Rights Reserved.
//
// Notice created by Django <django@datama.fr>
// Contributors : Wazhabits <anatole@datama.fr>
// __________________
//
// NOTICE:  All information contained herein is, and remains
// the property of DataMa SAS and/or some open source packages used
// if any.  The intellectual and technical concepts contained
// herein are proprietary to DataMa SAS
// and its suppliers and may be covered by French and Foreign Patents,
// patents in process, and are protected by trade secret or copyright law.
// Dissemination of this information or reproduction of this material
// is strictly forbidden unless prior written permission is obtained
// from DataMa SAS.
// __________________
class DataMaClassAbstract {
    constructor(props) {
        this.__parameters__ = props
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaRenderingComponentAbstract.js project project-deep-sky
 */
class DataMaRenderingComponentAbstract extends DataMaClassAbstract {
    constructor(props) {
        super(props)
        if (!this.__nodes__) this.__nodes__ = {rendered: {}}
        if (!this.__node__) this.__node__ = false
        this.__result__ = {}
    }

    get(tag='div', id=false, classList=[], target=false, props={}) {
        return DataMaUtils.getNode(tag, id, classList, target, props)
    }

    /**
     *  Return rendered root node
     * @return {boolean|HTMLElement}
     */
    render() {
        if (this.__parameters__?.contents)
            this.__parameters__.contents.forEach((content, index) => this.__renderSingleContent(this.__node__, content, (this.__parameters__?.id || '') + '-' + index))
        else if (this.__parameters__?.content)
            this.__renderSingleContent(this.__node__, this.__parameters__.content, this.__parameters__?.id || '')
        return this.__node__;
    }

    __testingNode() {
        let testingElement = this.get('div', 'datama-panels-testing-element', [], document.body)
        testingElement.classList.add('datama-test-hidden')
        testingElement.childNodes.forEach(node => node.remove())
        return testingElement
    }
    __renderSingleContent(node, content, index=0) {
        let id = node.id + '-' + index
        let result;
        if (typeof content === 'object') {
            if (content.nodeType) {
                // contents already a HTML node
                result = content;
            }
            else {
                if (content.input) {
                    // Case content is input
                    let instance = new DataMaInput(content);
                    result = instance.render()
                } else if (content.title) {
                    // Case contents is part title
                    result = this.get(content?.tag || 'h3', id + '-static-title', ['datama-title-h3', ...(content?.classList || [])], false, content?.props || {})
                    if (content?.html) {
                        result.innerHTML = DataMaTranslate.translate(window.DATAMA_LOCAL, content?.html, content?.vars);
                    } else {
                        result.innerText = DataMaTranslate.translate(window.DATAMA_LOCAL, content?.text, content?.vars);
                    }
                } else if (content.subtitle) {
                    result = this.get('h4', id + '-static-subtitle', ['datama-subtitle-h2', ...(content?.classList || [])])
                    result.innerText = DataMaTranslate.translate(window.DATAMA_LOCAL, content?.text, content?.vars);
                } else if (content.blockquote) {
                    // Case contents is part title
                    result = this.get('blockquote', id + '-static-blockquote', content?.classList || [])
                    if (content.quote === false) {
                        result.classList.add('no-quote')
                    }
                    result.innerText = DataMaTranslate.translate(window.DATAMA_LOCAL, content?.text, content?.vars);
                } else if (content.divider) {
                    result = DataMaUtils.divider('span', content.vertical, content.id, content?.classList || [], content?.half)
                } else if (content.grow) {
                    result = this.get('span', false, ['datama-grow'])
                } else if (content.html) {
                    // HTML Content given
                    result = this.get(content?.tag || 'div', id + '-static-html', content?.classList || [])
                    result.innerHTML = DataMaTranslate.translate(window.DATAMA_LOCAL, content?.html, content?.vars);
                    if (content.icon) result.prepend(content.icon)
                } else if (typeof content.render === 'function') {
                    // contents has a render method
                    result = content.render()
                }
            }
            if (typeof result === 'object' && typeof result.then === 'function') {
                result.then((r) => {
                    if (!r) {
                        DataMaLog.error('DataMa Light : Async content rendering do not return node object')
                    } else {
                        node.append(r)
                    }
                })
            } else {
                node.append(result)
            }
            return result;
        } else if (typeof content === 'string') {
            result = this.get('p', this.__parameters__.id + '-static-text-' + id);
            result.innerHTML = DataMaTranslate.translate(window.DATAMA_LOCAL, content, content?.vars);
            node.append(result)
        }
        return result;

    }

    __renderContent(node, content, index) {
        if (Array.isArray(content)) {
            let section;
            if ("section" in content) {
                section = this.get(
                    content["section"].tag || 'div',
                    content["section"].id || (index ? index : parseInt(Math.random() * 25).toString().hash()),
                    ['datama-section', ...(content["section"].classList || [])],
                    false,
                    content["section"].props || {}
                )
                if (content["section"].title) {
                    let sectionTitle = this.get(
                        content["section"].title?.tag || 'h2',
                        content["section"].title?.id || (index ? index : parseInt(Math.random() * 25).toString().hash()),
                        ['datama-section-title', ...(content["section"].title?.classList || [])],
                        section,
                        content["section"].title?.props || {}
                    )
                    sectionTitle.innerHTML = content["section"]?.title?.html || content["section"]?.title?.text
                }
            } else {
                section = this.get(
                    'div',
                    'datama-section-' + (index ? index : parseInt(Math.random() * 25).toString().hash()),
                    ['datama-section', ...(content?.classList || [])]
                );
            }
            content.forEach((c, i) => this.__renderContent(section, c, index + '-' + i))
            node.append(section);
            return section;
        } else {
            return this.__renderSingleContent(node, content, index)
        }
    }
    __setCallbacks() {
        this.__node__.__datama__ = {
            "class": this
        }
        if (this.__parameters__.callbacks) {
            Object.keys(this.__parameters__.callbacks).forEach(callback => {
                this.__node__.removeEventListener(callback, e => {
                    e.stopPropagation();
                    e.stopImmediatePropagation();
                    this.__parameters__.callbacks[callback](e, this.__parameters__)
                })
                this.__node__.addEventListener(callback, e => {
                    e.stopPropagation();
                    e.stopImmediatePropagation();
                    this.__parameters__.callbacks[callback](e, this.__parameters__)
                })
            })
        }
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : SettingsMutator.js project project-deep-sky
 */
class SettingsMutator {
    /**
     * Build or reload settings based on source / saved configuration
     * @param source
     * @param timer
     * @param configurable
     * @param viewer
     * @param notification
     * @param license
     * @param theme
     * @param configuration
     * @param subscribe
     * @return {{license: DataMaLicense, inputs: {}, privilege: {license: DataMaLicense, max: number, maxLines: number}, metrics: *[], steps: *[], dimensions: *[]}}
     */
    static getSettingsFromSource({
        source,
        timer = false,
        notification,
        license="",
        configurable=true,
        viewer=false,
        subscribe="https://app.datama.io/a/dashboard/subscribe?context=" + DATAMA_CURRENT_EXTENSION,
        configuration,
        theme= {}
    }) {
        let actionFromPrivileges = []
        let generate = {steps: true, inputs: true, configuration: true, function: true};
        let failed = []
        if (timer) timer.start('DataMaLight.settings.init')
        if (timer) timer.start('DataMaLight.settings.init.privilege')
        const privilege = DataMaLicense.getPrivilege(license)
        if (timer) timer.stop('DataMaLight.settings.init.privilege')
        if (configuration && typeof configuration === 'string' && configuration.length) {
            try {
                configuration = JSON.parse(configuration)
                DataMaLog.error('Loading saved configuration...')
            } catch (e) {
                configuration = false;
                DataMaLog.error('Saved configuration cannot be load, read operation error')
            }
        }
        if (timer) timer.start('DataMaLight.settings.init.source')
        if (source.length > privilege.maxLines) {
            let translated = 'Number of lines loaded : maxLines (percent) lines.'.translate({maxLines: privilege.maxLines.format(), percent: ((privilege.maxLines / source.length) * 100).format({percent: true, sign: false})})
            actionFromPrivileges.push(translated)
        }
        source = SourceMutator.prepareSourceRows(source, privilege.maxLines)
        let settings = {
            privilege,
            configurable,
            viewer,
            subscribe,
            errors: [],
            warnings: [],
            dimensions: [],
            metrics: [],
            steps: [],
            inputs: {},
            license: privilege.license,
            theme: Object.keys(theme).length ? theme : false
        };
        if (!source?.length) {
            settings.empty = true
            settings.errors.push('Data is empty')
        }
        if (notification && settings.configurable) notification.update('Computing metadata...', 0.6)
        let sourceData = SourceMutator.getMetaData(source);
        settings.meta = sourceData.meta
        if (timer) timer.stop('DataMaLight.settings.init.source')
        if (timer) timer.start('DataMaLight.settings.init.configuration')
        if (!configuration?.metrics || !configuration?.dimensions) {
            let reverseIndex =  Object.keys(sourceData.meta).map(c => sourceData.meta[c].type).reverse().indexOf('string');
            if (reverseIndex === -1) {
                reverseIndex =  Object.keys(sourceData.meta).map(c => sourceData.meta[c].type).reverse().indexOf('date');
            }
            if (reverseIndex >= 0) {
                let lastStringIndex = Object.keys(sourceData.meta).length - reverseIndex;
                // Computing metrics / dimensions
                settings.dimensions = Object.keys(sourceData.meta).map(c => sourceData.meta[c].name).filter((e, i) => i < lastStringIndex)
                settings.metrics = Object.keys(sourceData.meta).map(c => sourceData.meta[c].name).filter((e, i) => i >= lastStringIndex)//.filter((m, i) => privilege.max === -1 || i < privilege.max)
                if (privilege.max !== -1 && (settings.metrics.length > privilege.max || settings.dimensions.length > privilege.max)) {
                    let translated = '<p>Your license does not allow you to use more than maxColumns metrics and dimensions, following columns have been omitted :</p> omittedColumns'.translate({maxColumns: privilege.max, omittedColumns: [...settings.metrics.filter((m, i) => i >= privilege.max), ...settings.dimensions.filter((d, i) => i >= privilege.max)].map(e => `<li>${e}</li>`).join('')})
                    actionFromPrivileges.push(translated)
                    // settings.dimensions = settings.dimensions.filter((m, i) => privilege.max === -1 || i < privilege.max)
                }
            } else {
                settings.noDimensions = true;
                settings.dimensions = []
                settings.metrics = Object.keys(sourceData.meta)
            }
        } else {
            // Reload of Dimensions & Metrics
            if (configuration && configuration?.metrics) {
                settings.metrics = configuration.metrics;
            }
            if (configuration && configuration?.dimensions) {
                settings.dimensions = configuration.dimensions;
            }
        }
        if (!settings?.metrics.length) {
            settings.noMetrics = true;
        } else {
            settings.noMetrics = false;
        }
        if (!settings?.dimensions.length) {
            settings.noDimensions = true;
        } else {
            settings.noDimensions = false;
        }
        source = SourceMutator.prepareSourceColumns(source, settings.metrics)
        settings.source = source;
        if (notification && settings.configurable) notification.update('Computing inputs...', 0.9)
        if (configuration) {
            // Here configuration is an object
            settings.loaded = !configuration.default;
            settings.debug = configuration.debug
            if (configuration.language) {
                DATAMA_LOCAL = configuration.language
            }
            if (configuration.steps && configuration.inputs && configuration.configuration) {
                let hasValidSteps = SettingsMutator.hasValidSteps(configuration.steps, settings.metrics, settings.dimensions)
                let hasValidInputs = SettingsMutator.hasValidInputs(configuration.inputs)
                let hasValidConfiguration = SettingsMutator.hasValidConfiguration(configuration.configuration)
                let hasValidStepsFunction = SettingsMutator.hasValidStepsFunction(configuration.steps, configuration.inputs.formula)
                if (hasValidSteps) {
                    DataMaLog.info("Settings : use saved steps")
                    settings.steps = configuration.steps
                    generate.steps = false;
                } else {
                    failed.push('Metrics relation use non existing columns (steps)'.translate({steps: configuration.steps.filter(s => !source?.length || source[0][s.numerator] == null || (s.denominator !== '' && source[0][s.denominator] == null) || (s.focus && s.focus !== '' && source[0][s.focus] == null) || (Array.isArray(s.exclude) && s.exclude.length && s.exclude.some(e => !source?.length || source[0][e] == null))).map(s => s.name).join(',')}))
                    DataMaLog.warning('Settings : Steps cannot be reloaded [bad metrics/dimensions used]')
                }
                if (hasValidInputs) {
                    DataMaLog.info("Settings : use saved inputs")
                    settings.inputs = configuration.inputs
                    generate.inputs = false;
                } else {
                    DataMaLog.warning('Settings : Inputs cannot be reloaded [missing inputs]')
                }
                if (hasValidConfiguration) {
                    DataMaLog.info("Settings : use saved configuration")
                    settings.configuration = configuration.configuration
                    generate.configuration = false;
                } else {
                    failed.push('Charts configuration are invalid'.translate())
                    DataMaLog.warning('Settings : Plots settings cannot be reloaded [some key are missing]')
                }
                if (hasValidSteps && hasValidStepsFunction) {
                    DataMaLog.info("Settings : use saved function")
                    settings.inputs.formula = configuration.inputs.formula
                    generate.function = false;
                } else {
                    failed.push('Market equation use a non existing step or is invalid)'.translate())
                    DataMaLog.warning('Settings : Step function cannot be reloaded [Unexisting steps used]')
                }
            }
            if (failed.length) {
                DataMaNotifications.makeNotification({
                    id: 'fail-to-reload',
                    html: `<p>Some part of your saved configuration could not be loaded:</p>failed`.translate({failed: failed.map(e => `<li>- ${e.translate()}</li>`).join('')})
                }, {duration: 10000})
            } else {
                if (notification && settings.configurable && settings.loaded) {
                    DataMaNotifications.makeNotification({id: 'datama-light-reloaded', text: 'Saved configuration has been reloaded'}, {duration: 3000}).show()
                }
            }
        }
        if (generate.steps) {
            DataMaLog.debug("Settings: Generating steps")
            settings.steps = settings.metrics.map((metric, index) => {
                return {
                    numerator: metric,
                    denominator: index === 0 ? '' : settings.metrics[index - 1],
                    name: metric + (index === 0 ? '' : ' ' + DataMaTranslate.translate(window.DATAMA_LOCAL, 'per') + ' ' + settings.metrics[index - 1]),
                    focus: '',
                    exclude: []
                }
            })
        }
        if (generate.configuration) {
            DataMaLog.debug("Settings: Generating configuration")
            settings.configuration = {
                waterfall: DataMaCompareWaterfallModule.getWaterfallDefaultConfiguration()
            }
        }
        if (generate.inputs) {
            DataMaLog.debug("Settings: Generating inputs")
            if (!settings.empty && !settings.noDimensions) {
                let unusable = settings.dimensions.filter(d => settings.meta[d].unique.length <= 1);
                let usable = settings.dimensions.filter(d => settings.meta[d].unique.length > 1);
                if (usable.length === 0) {
                    DataMaNotifications.makeNotification({
                        id: 'unusable-columns',
                        text: 'None of your columns can be used, they do not have enough unique values : ' + unusable.join(', ')
                    }, {duration: 30000, warning: true})
                    settings.errors.push('None of your columns can be used, they do not have enough unique values : ' + unusable.join(', '))
                    settings.inputs.start = []
                    settings.inputs.end = []
                } else {
                    if (unusable.length) {
                        DataMaNotifications.makeNotification({
                            id: 'some-columns-are-ignored',
                            text: 'Some columns in your dataset are not pertinent, so you may need to delete them (they contain only one distinct value) : ' + unusable.join(', ')
                        }, {duration: 30000, warning: true})
                    }
                    settings.inputs.context = settings.dimensions.filter(d => settings.meta[d].unique.length > 1)[0]
                    if (settings.meta[settings.inputs.context].type === 'date') {
                        let size = parseInt(settings.meta[settings.inputs.context].unique.length / 2) - 1;
                        settings.inputs.start = [
                            settings.meta[settings.inputs.context].unique.sort((a, b) => a - b).unique()[0],
                            settings.meta[settings.inputs.context].unique.sort((a, b) => a - b).unique()[size]
                        ]
                        settings.inputs.end = [
                            settings.meta[settings.inputs.context].unique.sort((a, b) => a - b).unique()[parseInt(settings.meta[settings.inputs.context].unique.length / 2)],
                            settings.meta[settings.inputs.context].unique.sort((a, b) => a - b).unique()[settings.meta[settings.inputs.context].unique.length - 1],
                        ]
                    } else {
                        let unique = settings.meta[settings.inputs.context].unique.sort((a, b) => a - b);
                        if (unique.length > 1) {
                            settings.inputs.start = [unique[unique.length - 2]].unique()
                            settings.inputs.end = [unique[unique.length - 1]].unique()
                        } else {
                            settings.errors.push('There is not enough distinct value to choose a default comparison')
                            settings.inputs.start = []
                            settings.inputs.end = []
                        }
                    }
                }
            } else {
                settings.inputs.start = []
                settings.inputs.end = []
                settings.inputs.context = ''
            }
            settings.inputs.totalStepName = settings.metrics[settings.metrics.length - 1] + ' (Total)'
            settings.inputs.segment_complement = 'Variation relative to avg'
            //To rename
            settings.inputs.NumLimit = 2;
            settings.inputs.totalStepUnit = ''
            settings.inputs.filters = {}
        }
        if (generate.function) {
            settings.inputs.formula = settings.steps.map((s, i) => '[' + (i + 1) + ']').join('*')
        }
        if (timer) timer.stop('DataMaLight.settings.init.configuration')
        if (timer) timer.stop('DataMaLight.settings.init')
        if (actionFromPrivileges.length) {
            DataMaNotifications.makeNotification({
                id: 'actions-from-privileges',
                html: `<p>Data partially loaded ${privilege?.license != null && privilege.license.type !== DATAMA_DEMO_LICENSE && privilege?.license?.valid === false ? '(license expired) ' : ''}:</p>${actionFromPrivileges.map(e => `<p>${e}</p>`).join('')}`,
                buttons: [
                    {
                        id: 'datama-notification-privileges-upgrade',
                        text: 'Upgrade Now!',
                        callbacks: {
                            click: () => {
                                window.open(subscribe, "_blank")
                            }
                        },
                        classList: [
                            'bg-primary',
                            'p-2'
                        ],
                        icon: DataMaIcons.get('arrow-up-right'),
                    }
                ]
            }, {duration: 30000, accent: true})
        }
        return SettingsMutator.validateSettings(settings);
    }
    static validateSettings(settings) {
        // Comparison badly set
        if (
            // One comparison is not available
            (Array.isArray(settings.inputs.context) && settings.inputs.context.some(c => !settings.meta[c] || settings.meta[c].unique.length <= 1))
            // The comparison is not available
            || (!Array.isArray(settings.inputs.context) && (!settings.meta[settings.inputs.context] || settings.meta[settings.inputs.context].unique.length <= 1))
        ) {
            settings.errors.push('Start/End definition is invalid, it seems that there is less than 2 elements in following comparison : contextIssues'.translate({contextIssues: ((Array.isArray(settings.inputs.context) ? settings.inputs.context : [settings.inputs.context]).filter(c => !settings.meta[c] || settings.meta[c].unique.length <= 1))}))
        }
        return settings
    }
    /**
     * Generate prod based metrics relation
     * @param metrics
     * @return {*[]}
     */
    static generateProductMetricsRelation(metrics) {
        let result = [];
        let i = 0;
        while (i < metrics.length) {
            result.push({
                numerator: metrics[i],
                denominator: metrics[i - 1] || '',
                name: metrics[i - 1] ? metrics[i] + ' ' + DataMaTranslate.translate(window.DATAMA_LOCAL, 'per') + ' ' + metrics[i - 1] : metrics[i],
                focus: '',
                exclude: []
            })
            i++;
        }
        return result;
    }
    /**
     * Generate sum based metrics relation
     * @param metrics
     * @return {*[]}
     */
    static generateSumMetricsRelation(metrics) {
        let result = [];
        let i = 0;
        while (i < metrics.length) {
            result.push({
                numerator: metrics[i],
                denominator: '',
                name: metrics[i],
                focus: '',
                exclude: []
            })
            i++;
        }
        return result;
    }
    /**
     * Inputs validator
     * @param inputs
     * @return {boolean}
     */
    static hasValidInputs(inputs) {
        return typeof inputs.NumLimit === 'number' && typeof inputs.segment_complement === "string"
    }
    /**
     * Configuration validator
     * @param configuration
     * @return {boolean}
     */
    static hasValidConfiguration(configuration) {
        return Object.keys(configuration).every(c => {
            switch(c) {
                case 'waterfall':
                    return Object.keys(DataMaCompareWaterfallModule.getWaterfallDefaultConfiguration()).every(k => configuration[c][k] != null);
            }
            return false;
        })
    }
    /**
     * Steps validator
     * @param steps
     * @param metrics
     * @param dimensions
     * @return {boolean}
     */
    static hasValidSteps(steps, metrics, dimensions) {
        return steps.every(s =>
            metrics.indexOf(s.numerator) !== -1
            && (metrics.indexOf(s.denominator) !== -1 || s.denominator === '')
            && (s.focus === '' || dimensions.indexOf(s.focus) !== -1)
            && (s.exclude.length === 0 || s.exclude.every(e => dimensions.indexOf(e) !== -1))
        )
    }
    /**
     * Step function validator
     * @param steps
     * @param fn
     * @return {boolean}
     */
    static hasValidStepsFunction(steps, fn) {
        let match = fn.match(/\[\d+]/g);
        return match && match.every(m => {
            let index = parseInt(m.replace(/[\[|]/g, '')) - 1;
            return index >= 0 & index < steps.length;
        })
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : SourceMutator.js project project-deep-sky
 */
const DATAMA_GUESS_TYPE_SAMPLE = 100;
class SourceMutator {
    static leftJoin(objArr1, objArr2, keys) {
        return objArr1.map(anObj1 => ({...objArr2.find(anObj2 => keys.every(k => anObj1[k] === anObj2[k])), ...anObj1}))
    }
    static pivot(data, columnToPivot, groups, values) {
        let uniqueOfColumnToPivot = data.map(r => r[columnToPivot]).unique();
        let pivot = SourceMutator.groupBy(data, groups)
        uniqueOfColumnToPivot.forEach((unique) => {
            pivot = SourceMutator.leftJoin(
                pivot,
                data.filter(r => r[columnToPivot] === unique),
                groups
            ).map((r) => {
                delete r[columnToPivot];
                values.forEach(value => {
                    if (r[value] == null) {
                        // HERE IT IS WHEN A ROWS IS MISSING IN START OR END
                        r[value + unique] = 0
                    } else {
                        r[value + unique] = r[value];
                    }
                    delete r[value]
                })
                return r
            })
        })
        return pivot;
    }
    static groupBy(arr=[], groups=[], aggregations=[]) {
        return Object.values(
            arr.reduce((acc,curr)=>{
                const group = groups.map(k => curr[k]).join('-');
                acc[group] = acc[group] || Object.fromEntries(
                    groups.map(k => [k, curr[k]]).concat(Object.keys(aggregations).map(k => [k, 0])));
                Object.keys(arr[0]).forEach(k => {
                    if (aggregations[k] === 'sum') {
                        acc[group][k] += curr[k]
                    } else {
                        if (aggregations[k]) {
                            acc[group][k] = curr[k]
                        }
                    }
                });
                return acc;
            }, {})
        );
    }
    static extractColumns(array, columns) {
        return array.map(e => {
            let obj = {};
            columns.forEach(c => obj[c] = e[c])
            return obj;
        });
    }

    /**
     * @param data source
     * @param aggregation aggregation object
     * @param threshold threshold
     * @param groupBy Column to group
     */
    static clusterize(data, aggregation, threshold, groupBy) {
        let on = Object.keys(aggregation)[0]
        let cluster = SourceMutator.groupBy(data, [groupBy], aggregation);
        let total = cluster.map(e => e[on]).filter(e => e != null).reduce((a, b) => a + b, 0)

        cluster = cluster.map(c => {
            let obj = {
                ...c
            }
            obj[on] = c[on]
            obj['Total ' + on] = total;
            if (!isNaN((obj[on] / total * 100))) {
                obj['DataMa_Cluster__Prefix___' + groupBy] = (obj[on] / total * 100) > threshold ? c[groupBy] : 'Other (<' + threshold + '% of ' + on + ')'
            } else {
                obj['DataMa_Cluster__Prefix___' + groupBy] = c[groupBy]
            }
            return obj;
        })
        cluster = SourceMutator.groupBy(cluster, ['DataMa_Cluster__Prefix___' + groupBy], aggregation)
        return cluster;
    }

    /**
     * Extract columns metadata
     * @returns {object}
     * @static
     */
    static getMetaData(source) {
        let result = {
            source,
            meta: {}
        }
        if (source.length) {
            let i = 0;
            let columns = Object.keys(source[0]);
            while (i < columns.length) {
                let values = result.source.map(e => e[columns[i]]).unique().sort();
                let columnData = values.filter((e, i) => e != null && i < DATAMA_GUESS_TYPE_SAMPLE);
                let type = SourceMutator.getType(columnData);
                result.meta[columns[i]] = {
                    name: columns[i],
                    type: type,
                    unique: values.filter(v => v != null).map(v => type === 'string' ? String(v) : v)
                }
                i++;
            }
        }
        return result;
    }
    static loadSourceTypes(source, meta) {
        return source.map(r => {
            let obj = {};
            Object.keys(meta).forEach(key => {
                if (meta[key].type === 'int') {
                    obj[key] = parseInt(r[key])
                } else if (meta[key].type === 'float') {
                    obj[key] = parseFloat(r[key])
                } else if (meta[key].type === 'boolean') {
                    obj[key] = r[key].toString()
                } else if (meta[key].type === 'date') {
                    obj[key] = r[key]
                } else {
                    obj[key] = r[key] || 'null'
                }
            })
            return obj;
        })
    }
    /**
     * Return type based on array of values
     * @param sample
     * @returns {string}
     * @static
     */
    static getType(sample) {
        let type;
        if (sample.every(u => typeof u === 'number' || (typeof u === 'string' && u.match(/^(\+|-|)(([0-9]|\.|,| )+)$/g) && !isNaN(parseFloat(u))))) {
            if (sample.some(u => u % 1 !== 0)) {
                // Float
                type = 'float'
            } else {
                // Integer
                type = 'int'
            }
        } else if (sample.every(u => typeof u === 'string')) {
            if (sample.some(u => /(\d{1,2}){1,2}[- /.]\d{1,2}[- /.](\d{1,2}){1,2}/g.test(u))) {
                // Column can be converted to date
                type = 'date'
            } else {
                // Column cannot be converted to date, it is a simple string
                type = 'string'
            }
        } else if (sample.every(u => typeof u === 'boolean')) {
            type = 'boolean'
        } else {
            type = 'unknown'
        }
        return type
    }
    /**
     * Prepare source for Core
     * @param source
     * @param maxLines
     */
    static prepareSourceRows(source, maxLines=10000) {
        return maxLines > -1 ? source.slice(0, maxLines) : source
    }

    static prepareSourceColumns(source, metrics) {
        return source.map(r => {
            let obj = {
                ...r
            };
            metrics.forEach(m => {
                obj[m] = parseFloat(r[m] || 0)
            })
            return obj;
        })
    }

    static filter(source, filter) {
        if (filter) {
            let {dimension, type, values} = filter
            if (values || values.length) {
                return source.filter(r => {
                    switch (type) {
                        case "in":
                            return values.indexOf(r[dimension]) !== -1
                        case "not":
                            return values.indexOf(r[dimension]) === -1
                        case "is":
                        default:
                            return r[dimension] === values
                    }
                });
            }
        }
        return source;
    }
    static getUniqueValues(data, key) {
        return [...new Set(data.map(item => item[key]))];
    }
    static generateCombinations(uniqueValues) {
        return uniqueValues.reduce((acc, values) => {
            return acc.flatMap(accCombination => values.map(value => [...accCombination, value]));
        }, [[]]);
    }
    static addMissingCombinations(data, metrics, dimensions) {
        let uniqueValues = dimensions.map(dim => SourceMutator.getUniqueValues(data, dim));
        let allCombinations = SourceMutator.generateCombinations(uniqueValues);
        let dataMap = new Map(data.map(item => [dimensions.map(dim => item[dim]).join(','), item]));
        allCombinations.forEach(combination => {
            let key = combination.join(',');
            if (!dataMap.has(key)) {
                let newItem = combination.reduce((obj, value, index) => {
                    obj[dimensions[index]] = value;
                    return obj;
                }, {});
                metrics.forEach(metric => newItem[metric] = 0);
                data.push(newItem);
            }
        });
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaImages.js project project-deep-sky
 */

class DataMaImages extends DataMaRenderingComponentAbstract {
    constructor(props) {
        super(props);
    }
    render() {
        this.__node__ = DataMaUtils.getNode('img', this.__parameters__.id, ['datama-image'], this.__parameters__.target, {src: this.__parameters__.src, alt: this.__parameters__.alt, title: this.__parameters__.title})
        return this.__node__;
    }
    static get(image, id=false, classList=[]) {
        return DataMaUtils.getNode('img', id, ['datama-image', ...classList], false, DATAMA_IMAGES[image]);
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaIcons.js project project-deep-sky
 */
class DataMaIcons {
    /**
     * Convert the selection.json file of icomoon to usable array
     * @param icons
     * @param height
     * @return {*}
     */
    static prepare({icons, height}) {
        let result = {}
        icons.forEach(element => {
            result[element.properties.name] = {
                height,
                path: element.icon.paths[0],
                tags: element.icon.tags
            }
        })
        return result;
    }
    /**
     * return SVG formatted icon to bypass external assets restriction
     * @param icon
     * @param {Object} props
     * @return {HTMLElement}
     */
    static get(icon, props=false) {
        let obj = DataMaLightIcons[icon];
        if (!obj) {
            DataMaLog.warning('Non existing icon key : ' + icon + ', search in tags...')
            let result = Object.keys(DataMaLightIcons).filter(k => DataMaLightIcons[k].tags.indexOf(icon) !== -1)[0];
            if (!result) {
                DataMaLog.warning('Non existing icon tags ' + icon)
                return false
            }
            obj = result;
        }
        let container = DataMaUtils.getNode('span', props?.id, ['datama-icon', icon, ...(props?.classList || [])], props?.target, props)
        let node = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
        let path;
        if (obj.path) {
            node.classList.add('icon-booting')
            path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            path.setAttribute('fill', 'transparent')
            path.setAttribute('shape-rendering', 'geometricPrecision')
            path.setAttribute('d', obj.path)
        } else {
            container.classList.add('icon-booting')
            container.innerHTML = obj.html;
            let timeout;
            let observer = new ResizeObserver(() => {
                clearTimeout(timeout)
                timeout = setTimeout(() => {
                    try {
                        let computedStyle = window.getComputedStyle(container.parentNode);
                        let fontSize = computedStyle.getPropertyValue('font-size').match(/(\d+)/g);
                        if (fontSize && fontSize.length) {
                            fontSize = fontSize[0]
                            let ratioH = typeof obj.ratio === 'number' ? obj.ratio : (obj.ratio?.height || 1)
                            let ratioW = typeof obj.ratio === 'number' ? obj.ratio : (obj.ratio?.width || 1)
                            setTimeout(() => {
                                container.firstChild.setAttribute('width', (parseInt(fontSize) * ratioW).toString() + 'px')
                                container.firstChild.setAttribute('height', (parseInt(fontSize) * ratioH).toString() + 'px')
                                container.firstChild.setAttribute('style', 'float: left;')
                                if (path) {
                                    path.setAttribute('transform', 'scale(' + (1 / (obj.height / (parseInt(fontSize) * ratioH))) + ')')
                                    path.setAttribute('shape-rendering', 'geometricPrecision')
                                    path.removeAttribute('fill')
                                }
                                container.classList.remove('icon-booting')
                            })
                        }
                    } catch (e) {
                        DataMaLog.debug(e)
                    }
                })
            })
            observer.observe(container)
            return container;
        }
        let interval = setInterval(() => {
            if (node.parentNode && window.getComputedStyle(node.parentNode).getPropertyValue('font-size') !== '') {
                clearInterval(interval)
                let timeout;
                let observer = new ResizeObserver(() => {
                    clearTimeout(timeout)
                    timeout = setTimeout(() => {
                        try {
                            let computedStyle = window.getComputedStyle(node.parentNode);
                            let fontSize = computedStyle.getPropertyValue('font-size').match(/(\d+)/g);
                            if (fontSize && fontSize.length) {
                                fontSize = fontSize[0]
                                let ratioH = typeof obj.ratio === 'number' ? obj.ratio : (obj.ratio?.height || 1)
                                let ratioW = typeof obj.ratio === 'number' ? obj.ratio : (obj.ratio?.width || 1)
                                setTimeout(() => {
                                    node.setAttribute('width', (parseInt(fontSize) * ratioW).toString() + 'px')
                                    node.setAttribute('height', (parseInt(fontSize) * ratioH).toString() + 'px')
                                    node.setAttribute('style', 'float: left;')
                                    if (path) {
                                        path.setAttribute('transform', 'scale(' + (1 / (obj.height / (parseInt(fontSize) * ratioH))) + ')')
                                        path.setAttribute('shape-rendering', 'geometricPrecision')
                                        path.removeAttribute('fill')
                                    }
                                    node.classList.remove('icon-booting')
                                })
                            }
                        } catch (e) {
                            DataMaLog.debug(e)
                        }
                    })
                })
                observer.observe(node.parentNode)
            }
        }, 10)
        if (path) {
            node.append(path)
        }
        container.append(node)
        return container;
    }
}
// DATAMA SAS
//
// Copyright (c) [2021-2023] DataMa SAS, All Rights Reserved.
//
// Notice created by Django <django@datama.fr>
// Contributors : Wazhabits <anatole@datama.fr>
// __________________
//
// NOTICE:  All information contained herein is, and remains
// the property of DataMa SAS and/or some open source packages used
// if any.  The intellectual and technical concepts contained
// herein are proprietary to DataMa SAS
// and its suppliers and may be covered by French and Foreign Patents,
// patents in process, and are protected by trade secret or copyright law.
// Dissemination of this information or reproduction of this material
// is strictly forbidden unless prior written permission is obtained
// from DataMa SAS.
// __________________
class DataMaSteps extends DataMaRenderingComponentAbstract {
    constructor(props) {
        super(props);
        this.__nodes__.container = this.get('div', this.__parameters__.id, ['datama-steps'])
        this.__nodes__.header = this.get('div', this.__parameters__.id + '-header', ['datama-steps-header'], this.__nodes__.container)
        this.__nodes__.contents = this.get('div', this.__parameters__.id + '-contents', ['datama-steps-content'], this.__nodes__.container)
        this.__node__ = this.__nodes__.container;
    }
    __renderBullet(node, step, index) {
        this.__nodes__.bullets[step?.id || index] = this.get('span', this.__parameters__.id + '-bullet-' + index, ['datama-steps-bullet'], node);
        this.__nodes__.bullets[step?.id || index].innerText = (index + 1);
    }
    __renderBullets() {
        this.__nodes__.bullets = this.get('div', this.__parameters__.id + '-bullets', ['datama-steps-bullets'], this.__nodes__.header);
        this.__parameters__.steps.forEach((s, i) => {
            if (i === 0) {
                this.get('div', this.__parameters__.id + '-' + i + '-link', ['datama-steps-bullets-link', 'datama-steps-bullets-link-half'], this.__nodes__.bullets)
            }
            this.__renderBullet(this.__nodes__.bullets, s, i)
            if (i < this.__parameters__.steps.length) {
                if (i === this.__parameters__.steps.length - 1) {
                    this.get('div', this.__parameters__.id + '-' + i + '-link', ['datama-steps-bullets-link', 'datama-steps-bullets-link-half'], this.__nodes__.bullets)
                } else {
                    this.get('div', this.__parameters__.id + '-' + i + '-link', ['datama-steps-bullets-link'], this.__nodes__.bullets)
                }
            }
        })
    }
    __renderStep(step, index) {
        let node;
        if (!this.__nodes__?.steps || !this.__nodes__?.steps[step?.id || index]) {
            this.__nodes__.steps = {};
            let stepObject = new DataMaStep(step, index, 100 / this.__parameters__.steps.length);
            this.__nodes__.steps[step?.id || index] = stepObject.render()
            this.__nodes__.contents.append(this.__nodes__.steps[step?.id || index])
        } else {
            node = this.__nodes__.steps[step?.id || index]
        }
        return node;
    }
    render() {
        this.__renderBullets();
        if (!this.__nodes__.steps) {
            this.__nodes__.steps = this.__parameters__.steps.map((s, i) => this.__renderStep(s, i))
        }
        return this.__node__;
    }
}
// DATAMA SAS
//
// Copyright (c) [2021-2023] DataMa SAS, All Rights Reserved.
//
// Notice created by Django <django@datama.fr>
// Contributors : Wazhabits <anatole@datama.fr>
// __________________
//
// NOTICE:  All information contained herein is, and remains
// the property of DataMa SAS and/or some open source packages used
// if any.  The intellectual and technical concepts contained
// herein are proprietary to DataMa SAS
// and its suppliers and may be covered by French and Foreign Patents,
// patents in process, and are protected by trade secret or copyright law.
// Dissemination of this information or reproduction of this material
// is strictly forbidden unless prior written permission is obtained
// from DataMa SAS.
// __________________
class DataMaStep extends DataMaRenderingComponentAbstract {
    constructor(props, index, maxWidth=false) {
        super(props);
        this.__nodes__.container = this.get('div', this.__parameters__.id, ['datama-step'])
        this.__nodes__.header = this.get('div', this.__parameters__.id + '-step-header', ['datama-step-header'])
        this.__nodes__.content = this.get('div', this.__parameters__.id + '-step-content', ['datama-step-content'])
        this.__nodes__.container.append(this.__nodes__.header)
        this.__nodes__.container.append(this.__nodes__.content)
        this.__node__ = this.__nodes__.container;
        this.__index__ = index;
        if (maxWidth) this.__nodes__.container.setAttribute('style', 'max-width: ' + (maxWidth / 4 * 3.5) + '%')
    }
    __renderStepNumber() {
        this.__nodes__.number = this.get('span', this.__parameters__.id, ['datama-step-title'])
        this.__nodes__.number.innerText = (this.__index__ + 1);
        this.__nodes__.header.append(this.__nodes__.number)
    }
    __renderStepTitle() {
        if (this.__parameters__?.title) {
            this.__nodes__.title = this.get('span', this.__parameters__.id, ['datama-step-title'])
            this.__nodes__.title.innerHTML = this.__parameters__?.title;
            this.__nodes__.header.append(this.__nodes__.title)
        }
    }
    render() {
        // this.__renderStepNumber();
        this.__renderStepTitle();
        this.__parameters__.contents.forEach((c, i) => {
            this.__renderContent(this.__nodes__.content, c, i)
        });
        return this.__node__;
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaTabs.js project project-deep-sky
 */
/**
* DataMa Tabs UI component, example :
*  new DataMaTabs({
*      id: 'my-tabs-id',
*      tabs: [
*          new DataMaTab({
*              id: 'my-tab-id',
*              title: 'My tab title',
*              contents: [
*                  'My tab content'
*              ],
*              documentation: {
*                  link: 'documentation link',
*                  title: 'documentation title'
*              }
*          })
*     ]
*  })
*/
class DataMaTabs extends DataMaRenderingComponentAbstract {
    /**
     * @param props = {
     *     target: 'targetID',
     * }
     */
    constructor(props) {
        super(props);
        this.__nodes__.container = this.get(
            'div',
            this.__parameters__.id,
            [
                'datama-tabs-container',
                (this.__parameters__.vertical ? ['vertical', this.__parameters__?.align].filter(c => c) : 'horizontal'),
                ...(this.__parameters__.classList || [])
            ].flat(),
            this.__parameters__.target || false,
            this.__parameters__.props || false
        )
        this.__node__ = this.__nodes__.container
        this.__parameters__.tabs.forEach(t => !t.divider ? t.init(this) : null)
    }
    __getMenuElement(tab, index) {
        let list = this.get('li', false, ['datama-tabs-item'])
        let button;
        if (tab.__parameters__.disabled) {
            button = (new DataMaButton({id: tab.__parameters__.id + '-button', text: tab.__parameters__.title, icon: tab.__parameters__.icon, badge: DataMaIcons.get('x'), props: {title: tab.__parameters__.title}, classList: ['datama-tabs-menu-item'], documentation: tab.__parameters__.documentation})).render();
            button.classList.add('disabled')
            list.classList.add('disabled')
        } else {
            button = (new DataMaButton({id: tab.__parameters__.id + '-button', text: tab.__parameters__.title, icon: tab.__parameters__.icon, props: {title: tab.__parameters__.title}, classList: ['datama-tabs-menu-item'], documentation: tab.__parameters__.documentation})).render();
            list.append(button)
            list.removeEventListener('click', () => this.show(index))
            list.addEventListener('click', () => this.show(index))
        }
        list.append(button)
        return list
    }
    show(index) {
        this.__current__ = index;
        this.__parameters__.tabs.forEach((tab, i) => !tab.divider ? (i === index ? tab.show() : tab.hide()) : null)
    }
    render() {
        if (!this.__nodes__.menu) {
            this.__nodes__.menu = this.get('ul', this.__parameters__.id + '-menu', ['datama-tabs'], this.__node__)
        } else {
            this.__nodes__.menu.remove()
            this.__nodes__.menu = this.get('ul', this.__parameters__.id + '-menu', ['datama-tabs'], this.__node__)
        }
        if (!this.__nodes__.contents) {
            this.__nodes__.contents = this.get('div', this.__parameters__.id + '-content', ['datama-tabs-content'], this.__node__)
        } else {
            this.__nodes__.contents.remove()
            this.__nodes__.contents = this.get('div', this.__parameters__.id + '-content', ['datama-tabs-content'], this.__node__)
        }
        this.__nodes__.menu.innerHTML = ''
        this.__nodes__.contents.innerHTML = ''
        this.__nodes__.menu.append(...this.__parameters__.tabs.map((t, i) => !t.divider ? this.__getMenuElement(t, i) : DataMaUtils.divider()))
        this.__nodes__.contents.append(...this.__parameters__.tabs.map(t => !t.divider ? t.render() : ''))
        this.__node__.append(this.__nodes__.menu, this.__nodes__.contents)
        if (this.__parameters__.tabs.length && !this.__state__) {
            setTimeout(() => {
                this.show(this.__parameters__.default || 0)
                this.__state__ = true;
            })
        }
        return this.__node__;
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaTab.js project project-deep-sky
 */
/**
 * DataMa Tabs UI component, example :
 * new DataMaTab({
 *     id: 'my-tab-id',
 *     title: 'My tab title',
 *     contents: [
 *         'My tab content'
 *     ],
 *     documentation: {
 *         link: 'documentation link',
 *         title: 'documentation title'
 *     }
 * })
 */
class DataMaTab extends DataMaRenderingComponentAbstract {
    constructor(props) {
        super(props);
    }
    init(parent) {
        this.__parameters__.parent = parent
        this.__node__ = DataMaUtils.getNode('div', this.__parameters__.parent.__parameters__.id + '-tab-' + this.__parameters__.id, ['datama-tab'], false, this.__parameters__.attrs)
        if (this.__parameters__.footer) this.__node__.classList.add('datama-tab-has-footer')
        if (this.__parameters__.header) this.__node__.classList.add('datama-tab-has-header')
    }
    render() {
        this.__node__.innerHTML = ''
        this.__header()
        this.__nodes__.content = DataMaUtils.getNode('div', this.__parameters__.parent.__parameters__.id + '-tab-' + this.__parameters__.id + '-content', ['datama-tab-content'], this.__node__)
        this.__parameters__.contents.forEach((c, i) => {
            this.__renderContent(this.__nodes__.content, c, c?.id || i)
        })
        this.__footer()
        return this.__node__
    }

    /**
     * @param icon
     * @param text
     * @param title
     * @param id
     * @param callback
     * @param classList
     * @returns {DataMaButton}
     * @private
     */
    __makeButton({icon=false, id, text, title, callback, classList=[]}) {
        return (new DataMaButton({icon, id, text, props: {title}, classList, callbacks: {click: callback}}))
    }

    /**
     * Add DataMa Dialog header, with close button
     * @private
     */
    __header() {
        if (this.__parameters__.header) {
            this.__nodes__.header = this.get('header', false, ['datama-tab-header'], this.__node__)
            if (this.__parameters__.title) {
                let title = this.get('h2', false, ['datama-tab-title'], this.__nodes__.header)
                title.innerText = DataMaTranslate.translate(window.DATAMA_LOCAL, this.__parameters__.title)
            }
            let buttons = [];
            if (this.__parameters__.documentation) {
                buttons.push(new DataMaDocumentation(this.__parameters__.documentation).render(), DataMaUtils.divider('span', true))
            }
            if (this.__parameters__.header.buttons) {
                buttons.push(...this.__parameters__.header.buttons.map((headerButton) => headerButton.divider ? DataMaUtils.divider('span', headerButton.vertical) : this.__makeButton(headerButton).render()))
            }
            buttons.forEach(button => this.__nodes__.header.appendChild(button))
        }
    }

    /**
     * Add DataMa Dialog footer
     * @private
     */
    __footer() {
        if (this.__parameters__.footer) {
            let buttons = [];
            this.__nodes__.footer = this.get('footer', false, ['datama-tab-footer'], this.__node__)
            if (this.__parameters__.footer.buttons) {
                buttons.push(...this.__parameters__.footer.buttons.map((footerButton) => footerButton.divider ? DataMaUtils.divider('span', footerButton.vertical) : this.__makeButton(footerButton).render()))
            }
            buttons.forEach(button => this.__nodes__.footer.appendChild(button))
        }
    }
    show() {
        this.__node__.setAttribute('style', '')
        this.render()
        let buttonID = this.__parameters__.id + '-button';
        let button = DataMaUtils.getNode('button', buttonID)
        button.classList.add('active')
    }
    hide() {
        let buttonID = this.__parameters__.id + '-button';
        let button = DataMaUtils.getNode('button', buttonID)
        button.classList.remove('active')
        this.__node__.setAttribute('style', 'display: none')
    }
}
// DATAMA SAS
//
// Copyright (c) [2021-2023] DataMa SAS, All Rights Reserved.
//
// Notice created by Django <django@datama.fr>
// Contributors : Wazhabits <anatole@datama.fr>
// __________________
//
// NOTICE:  All information contained herein is, and remains
// the property of DataMa SAS and/or some open source packages used
// if any.  The intellectual and technical concepts contained
// herein are proprietary to DataMa SAS
// and its suppliers and may be covered by French and Foreign Patents,
// patents in process, and are protected by trade secret or copyright law.
// Dissemination of this information or reproduction of this material
// is strictly forbidden unless prior written permission is obtained
// from DataMa SAS.
// __________________
class DataMaPromoBoxes extends DataMaRenderingComponentAbstract {
    constructor(props) {
        super(props);
        this.__node__ = this.get('div', this.__parameters__.id + '-promo-container', ['datama-promo-boxes'])
        this.__nodes__.boxes = {};
    }

    render() {
        this.__parameters__.boxes.forEach(b => {
            if (!this.__nodes__.boxes[b.id]) {
                this.__nodes__.boxes[b.id] = new DataMaPromoBox({...b, id: this.__parameters__.id + '-' + b.id, parent: this})
                this.__node__.append(this.__nodes__.boxes[b.id].render())
            } else {
                this.__nodes__.boxes[b.id].render()
            }
        })
        return this.__node__;
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaPromoBox.js project project-deep-sky
 */
class DataMaPromoBox extends DataMaRenderingComponentAbstract {
    constructor(props) {
        super(props);
        this.__node__ = this.get('div', this.__parameters__.id + '-box', ['datama-promo-box'])
        this.__nodes__.contents = []
    }
    __renderTitle() {
        if (this.__parameters__?.title) {
            if (!this.__nodes__.title) {
                this.__nodes__.title = this.get('div', this.__parameters__.id + '-box-title', ['datama-promo-box-title', 'mb-2'])
                this.__node__.append(this.__nodes__.title)
            }
            this.__nodes__.title.innerText = this.__parameters__?.title
        }
    }
    __renderSubtitle() {
        if (this.__parameters__?.subtitle) {
            if (!this.__nodes__.subtitle) {
                this.__nodes__.subtitle = this.get('div', this.__parameters__.id + '-box-sub-title', ['datama-promo-box-sub-title', 'mb-2'])
                this.__node__.append(this.__nodes__.subtitle)
            }
            this.__nodes__.subtitle.innerText = this.__parameters__?.subtitle
        }
    }

    render() {
        this.__renderTitle();
        this.__renderSubtitle();
        (this.__parameters__?.contents || []).forEach((b, i) => {
            if (this.__nodes__.contents[this.__parameters__.parent.__parameters__.id + '-' + i]) {
                this.__nodes__.contents[this.__parameters__.parent.__parameters__.id + '-' + i].remove();
            }
            this.__nodes__.contents[this.__parameters__.parent.__parameters__.id + '-' + i] = this.__renderContent(this.__node__, b, this.__parameters__.parent.__parameters__.id + '-' + i)
        });
        this.__setCallbacks();
        return this.__node__;
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2023 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaPanels.js project project-deep-sky
 */
class DataMaPanels extends DataMaRenderingComponentAbstract {
    render() {
        let node = this.get('div', this.__parameters__.id, ['datama-panels', 'mb-2']);
        node.append(...this.__parameters__.panels.map((panel, i) => panel.render({parent: this, id: this.__parameters__.id + '-panel-' + i})))
        return node;
    }

    /**
     * Toggle a panel
     * @param id
     */
    toggle(id) {
        let closed = false;
        this.__parameters__.panels.forEach((panel, i) => {
            if (id === this.__parameters__.id + '-panel-' + i) {
                if (panel.__state__) {
                    closed = true;
                    panel.close()
                } else {
                    panel.open()
                }
            }
        })
        if (!closed && !this.__parameters__.multiple) {
            this.__parameters__.panels.forEach((panel, i) => {
                if (id !== this.__parameters__.id + '-panel-' + i) {
                    panel.close()
                }
            })
        }
    }

    /**
     * Open given panel, close others if panels doesn't allow multiple
     * @param id
     */
    open(id) {
        if (!id) {
            this.__parameters__.panels.forEach(panel => panel.open())
        } else {
            this.__parameters__.panels.forEach((panel, i) => id === this.__parameters__.id + '-panel-' + i ? panel.open() : (this.__parameters__.multiple ? null : panel.close()))
        }

    }
    close(id=false) {
        if (!id) {
            this.__parameters__.panels.forEach(panel => panel.close())
        } else {
            this.__parameters__.panels.forEach((panel, i) => id === this.__parameters__.id + '-panel-' + i ? panel.close() : null)
        }
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2023 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaPanel.js project project-deep-sky
 */
class DataMaPanel extends DataMaRenderingComponentAbstract {
    constructor(props) {
        super(props);
        this.__state__ = false;
    }

    /**
     * Return panel header node element
     * @param id
     * @param parent
     * @return {HTMLElement}
     * @private
     */
    __renderHeader(id, parent) {
        let node = this.get('div', id + '-header', ['datama-panel-header'])
        node.innerText = this.__parameters__.title
        node.removeEventListener('click', e => this.__click(e, id, parent))
        node.addEventListener('click', e => this.__click(e, id, parent))
        this.__nodes__.header = node;
        return node;
    }

    __click(e, id, parent) {
        e.preventDefault();
        e.stopPropagation();
        e.stopImmediatePropagation()
        parent.toggle(id)
    }

    /**
     * Return panel body node element
     * @param id
     * @return {HTMLElement}
     * @private
     */
    __renderBody(id) {
        let node = this.get('div', id + '-content', ['datama-panel-content', 'mt-2'])
        this.__parameters__.contents.forEach(content => this.__renderContent(node, content))
        let testingElement = this.__testingNode()
        testingElement.append(node);
        node.setAttribute('style', 'height: ' + testingElement.clientHeight + 'px;')
        testingElement.remove();
        this.__nodes__.content = node;
        return node
    }

    /**
     * Return the panel node element
     * @param parent
     * @param id
     * @return {HTMLElement}
     */
    render({parent, id}) {
        let node = this.get('div', id, ['datama-panel'])
        if (!this.__parameters__.open) {
            node.classList.add('datama-panel-close')
        } else {
            delete this.__parameters__.open
        }
        node.append(this.__renderHeader(id, parent), this.__renderBody(id))
        this.__node__ = node;
        return node;
    }

    /**
     * Open this panel
     */
    open() {
        this.__node__.classList.remove('datama-panel-close')
        setTimeout(() => {
            this.__nodes__.content.classList.add('allow-overflow')
        }, 350)
        this.__state__ = true;
    }

    /**
     * Close this panel
     */
    close() {
        this.__node__.classList.add('datama-panel-close')
        this.__nodes__.content.classList.remove('allow-overflow')
        this.__state__ = false;
    }
}
// DATAMA SAS
//
// Copyright (c) [2021-2023] DataMa SAS, All Rights Reserved.
//
// Notice created by Django <django@datama.fr>
// Contributors : Wazhabits <anatole@datama.fr>
// __________________
//
// NOTICE:  All information contained herein is, and remains
// the property of DataMa SAS and/or some open source packages used
// if any.  The intellectual and technical concepts contained
// herein are proprietary to DataMa SAS
// and its suppliers and may be covered by French and Foreign Patents,
// patents in process, and are protected by trade secret or copyright law.
// Dissemination of this information or reproduction of this material
// is strictly forbidden unless prior written permission is obtained
// from DataMa SAS.
// __________________
class DataMaList extends DataMaRenderingComponentAbstract {
    render() {
        if (this.__node__) this.__node__.remove()
        this.__node__ = this.get('div', false, ['datama-list', ...(this.__parameters__.classList || [])])
        return super.render();
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaTable.js project project-deep-sky
 */
class DataMaTable {
    /**
     * @param data
     * @param header
     * @param footer
     * @param settings
     * @param core
     */
    constructor({data, header = false, footer=false, settings=false, core=false}) {
        this.__core__ = core;
        this.__data__ = data;
        this.__settings__ = settings
        this.__footer__ = footer
        if (!header) {
            this.__header__ = Object.keys(data[0])
        } else {
            this.__header__ = header
        }
    }

    /**
     * Return DataMaTable formatted cell
     * @param type
     * @param props
     * @return {HTMLElement}
     * @private
     */
    __rowCell(type='td', props) {
        let node = DataMaUtils.getNode(type, false, ['datama-table-' + type]);
        let style = '';
        Object.keys(props).forEach(key => {
            switch (key) {
                case 'text':
                    let textContainer = DataMaUtils.getNode('span', false, ['datama-table-' + type + '-text']);
                    textContainer.append(DataMaTranslate.translate(window.DATAMA_LOCAL, props[key], props?.vars))
                    node.append(textContainer)
                    node.setAttribute('data-' + key, props[key])
                    break;
                case 'align':
                    if (props[key] != null) {
                        node.classList.add('text-' + props[key])
                    }
                    break;
                case 'border':
                    if (props[key] != null && !props[key]) {
                        node.classList.add('no-border')
                    }
                    break;
                case 'width':
                    if (props[key] != null) {
                        style += 'width: ' + props[key] + 'px;'
                    }
                    break;
                case 'padding':
                    if (props[key] != null) {
                        style += 'padding: ' + props[key] + 'px;'
                    }
                    break;
                case 'colspan':
                    if (props[key] != null) {
                        node.setAttribute('colspan', props[key])
                    }
                    break;
                case 'icon':
                    node.append(DataMaIcons.get(props[key]))
                    break;
                case 'title':
                    node.setAttribute('title', props[key])
                    break;
                default:
                    if (!typeof props[key] === 'function') {
                        node.setAttribute('data-' + key, props[key])
                    }
                    break;
            }
        })
        if (style) {
            node.setAttribute('style', style)
        }
        return node;
    }

    /**
     * Return basic tr
     * @param id
     * @return {HTMLElement}
     * @private
     */
    __rowNode(id=false) {
        return DataMaUtils.getNode('tr', id, ['datama-table-row'])
    }

    /**
     * Render table header including sub elements
     * @return {HTMLElement}
     * @private
     */
    __renderHeader() {
        let thead = DataMaUtils.getNode('thead', false, ['datama-table-thead'])
        let row = this.__rowNode()
        thead.append(row);
        this.__header__.forEach((header, i) => {
            let th = this.__rowCell('th', header);
            if (header.elements && header.elements.length) {
                th.classList.add('pl-0', 'pr-0', 'pb-0')
                let subrow = DataMaUtils.getNode('div', false, ['d-flex', 'flex-nowrap', 'justify-space-between', 'datama-table-sub'])
                header.elements.forEach(header => {
                    let subheader = this.__rowCell('div', header)
                    subheader.classList.add('datama-table-th', 'w-100')
                    subrow.append(subheader)
                })
                th.append(subrow)
            }
            row.append(th)
        })
        return thead;
    }

    /**
     * Render tfoot, including elements & sub elements
     * @return {HTMLElement}
     * @private
     */
    __renderFooter() {
        let tfoot = DataMaUtils.getNode('tfoot', false, ['datama-table-tfoot'])
        this.__footer__.forEach(footer => {
            let row = this.__rowNode()
            if (footer.elements) {
                if (footer.small) row.classList.add('small')
                footer.elements.forEach(footer => {
                    let cell;
                    cell = this.__rowCell('th', footer);
                    if (footer.element && typeof footer.element.render === 'function') {
                        cell.append(footer.element.render())
                    }
                    row.append(cell)
                })
                tfoot.append(row);
            } else {
                let cell;
                cell = this.__rowCell('th', footer);
                if (footer.element && typeof footer.element.render === 'function') {
                    cell.append(footer.element.render())
                }
                row.append(cell)
                tfoot.append(row);
            }
        })
        return tfoot;
    }

    /**
     * Render table body, each cell can be computed / static / input, rows can be draggable
     * @return {HTMLElement}
     * @private
     */
    __renderBody() {
        let tbody = DataMaUtils.getNode('tbody', false, ['datama-table-tbody'])
        let i = 0;
        if (this.__settings__.rows.draggable && !this.__settings__.disabled) {
            tbody.ondrop = e => DataMaTable.__dropRow(e)
            tbody.ondragover = e => DataMaTable.__dropAllow(e)
        }
        while (i < this.__data__.length) {
            let r = this.__data__[i]
            let row = this.__rowNode()
            row.setAttribute('data-id', i)
            if (this.__settings__.rows.draggable && !this.__settings__.disabled) {
                row.classList.add('datama-draggable-element')
                row.setAttribute('draggable', 'true')
                row.ondragstart = e => DataMaTable.__dragStart(e)
            }
            tbody.append(row);
            this.__header__.forEach(h => {
                let elements = [h]
                if (h.elements) {
                    elements = h.elements
                }
                elements.forEach(h => {
                    if (typeof h.value === 'function') {
                        row.append(this.__rowCell('td', {...h, text: h.value({data: r, index: i})}))
                    } else if (Object.keys(h).length === 1 && h.text != null) {
                        let cell = this.__rowCell('td', {align: h.align, padding: 0})
                        if (h.colspan) cell.setAttribute('colspan', h.colspan)
                        cell.innerText = DataMaTranslate.translate(window.DATAMA_LOCAL, h?.text, h?.vars);
                        row.append(cell)
                    } else {
                        let cell = this.__rowCell('td', {align: h.align, width: h.width, padding: h.padding, border: h.border != null ? h.border : true})
                        if (h.colspan) cell.setAttribute('colspan', h.colspan)
                        if (h.input) {
                            let input = new DataMaInput({
                                id: h.value,
                                key: h.value,
                                type: h.input.type,
                                items: h.input.items,
                                multiple: h.input.multiple,
                                nullable: h.input.nullable,
                                disabled: h.input.disabled,
                                props: h.input.props,
                                readOnly: typeof h.input.readOnly === 'function' ? h.input.readOnly(r, i) : h.input.readOnly,
                                list: typeof h.input.list === 'function' ? h.input.list(r) : h.input.list,
                                callbacks: {
                                    input: (v) => {
                                        r[h.value] = v
                                        if (h.input.callbacks && h.input.callbacks.input) {
                                            h.input.callbacks.input(v)
                                        }
                                        if (this.__core__) {
                                            this.__core__.__datama__.needRecompute()
                                        }
                                    }
                                }
                            })
                            cell.append(input.render())
                        } else {
                            if (typeof r[h.value] === 'string') {
                                cell.innerText = DataMaTranslate.translate(window.DATAMA_LOCAL, r[h.value], h?.vars);
                            } else if (r[h.value] instanceof Element) {
                                cell.append(r[h.value])
                            } else {
                                cell.innerText = DataMaTranslate.translate(window.DATAMA_LOCAL, r[h.value].toString(), h?.vars);
                            }
                        }
                        row.append(cell)
                    }
                })
            })
            i++;
        }
        return tbody;
    }

    /**
     * Drag & drop logic
     * @param from
     * @param to
     * @private
     */
    __moveRow(from, to) {
        // Extracting moved row
        let row = this.__data__.splice(from, 1)[0];
        // Put it to its final space
        this.__data__.splice(to, 0, row)
        if (this.__core__) {
            this.__core__.__datama__.needRecompute()
        }
        this.render()
    }

    /**
     * Drop event
     * @param event
     * @private
     */
    static __dropRow(event) {
        event.preventDefault()
        event.stopPropagation()
        let id = event.dataTransfer.getData('text/plain')
        let target = event.target.closest('.datama-draggable-element').attributes['data-id'].value
        let instance = event.target.closest('.datama-draggable').instance;
        instance.__moveRow(id, target)
    }

    /**
     * Drag start event
     * @param event
     * @private
     */
    static __dragStart(event) {
        event.dataTransfer.setData("text/plain", event.target.attributes['data-id'].value);
        event.dataTransfer.dropEffect = "move";
    }

    /**
     * Drop allow
     * @param event
     * @private
     */
    static __dropAllow(event) {
        event.preventDefault();
        event.stopPropagation();
        event.dataTransfer.dropEffect = "move";
    }

    /**
     * Render Table
     * @return {*}
     */
    render() {
        if (this.__nodes__) {
            Object.keys(this.__nodes__).forEach(node => {
                if (node !== 'container') {
                    if (this.__nodes__[node] instanceof Element) {
                        this.__nodes__[node].remove();
                        delete this.__nodes__[node];
                    }
                }
            })
        } else {
            this.__nodes__ = {}
            this.__nodes__.container = DataMaUtils.getNode('div', false, ['datama-table-container'])
        }
        this.__nodes__.table = DataMaUtils.getNode('table', false, ['datama-table'])
        if (this.__settings__?.fullWidth) {
            this.__nodes__.table.classList.add('datama-table-full')
        }
        this.__nodes__.header = this.__renderHeader();
        this.__nodes__.body = this.__renderBody();
        this.__nodes__.colgroup = DataMaUtils.getNode('colgroup', false, ['datama-table-colgroup'])
        this.__header__.forEach(header => this.__nodes__.colgroup.append(DataMaUtils.getNode('col', false, ['datama-table-col'], false, {span: header.colspan ? header.colspan : 1, style: 'width:' + header.width + 'px;padding:' + header.padding + 'px'})))
        this.__nodes__.table.append(this.__nodes__.colgroup, this.__nodes__.header, this.__nodes__.body)
        if (this.__footer__) {
            let footer = this.__renderFooter()
            this.__nodes__.table.append(footer)
        }
        if (this.__settings__.rows.draggable && !this.__settings__.disabled) {
            this.__nodes__.container.instance = this;
            this.__nodes__.container.classList.add('datama-draggable')
        }
        this.__nodes__.container.append(this.__nodes__.table)
        this.__nodes__.container.__datama__ = {class: this}
        return this.__nodes__.container;
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaButton.js project project-deep-sky
 */
/**
 * DataMa Button UI resource, example:
 * let button = new DataMaButton({
 *     id: 'header-dark-mode',
 *     text: this.__core__.__theme__.darkMode ? '' : '',
 *     props: {
 *         title: myCondition ? 'Toggle light mode' : 'Toggle dark mode',
 *     },
 *     classList: ['border-square'],
 *     callbacks: {click: callback}
 * })
 * let node = button.render()
 */
class DataMaButton extends DataMaRenderingComponentAbstract {
    /**
     * Get inner icon of button
     * @returns {HTMLElement}
     * @private
     */
    __icon(badge=false) {
        let node = this.get('span', this.__parameters__.id ? this.__parameters__.id + (badge ? '-badge' : '-icon') : false, Array.isArray(this.__parameters__.icon) ? this.__parameters__.icon : ['datama-button-icon'])
        node.remove()
        node = this.get('span', this.__parameters__.id ? this.__parameters__.id + (badge ? '-badge' : '-icon') : false, Array.isArray(this.__parameters__.icon) ? this.__parameters__.icon : ['datama-button-icon'])
        if (!Array.isArray(this.__parameters__.icon)) {
            if (typeof this.__parameters__.icon === 'string') {
                node.innerText = this.__parameters__.icon;
            } else {
                let icon;
                if (this.__parameters__.icon instanceof HTMLElement || this.__parameters__.icon instanceof SVGElement) {
                    icon = this.__parameters__[badge ? 'badge' : 'icon'];
                } else {
                    icon = DataMaIcons.get(this.__parameters__[badge ? 'badge' : 'icon'])
                }
                if (badge) this.__parameters__[badge ? 'badge' : 'icon'].classList.add('datama-badge')
                node.append(icon)
            }
        }
        return node;
    }

    /**
     * Get inner text of button
     * @returns {HTMLElement}
     * @private
     */
    __text() {
        if (this.__parameters__.text) {
            let node = this.get('span', this.__parameters__.id + '-title', ['datama-button-text'])
            node.innerText = DataMaTranslate.translate(window.DATAMA_LOCAL, this.__parameters__.text, this.__parameters__.vars)
            return node;
        }
        return false;
    }

    /**
     * Return HTML node of DataMaButton
     * @returns {HTMLElement}
     */
    render() {
        this.__node__ = this.get('button', this.__parameters__.id, ['datama-button', ...(this.__parameters__.classList || [])], this.__parameters__.target, this.__parameters__.props)
        if (this.__parameters__.title) {
            this.__node__.setAttribute('title', DataMaTranslate.translate(DATAMA_LOCAL, this.__parameters__.title))
        }
        if (this.__parameters__.icon) {
            this.__node__.append(this.__icon())
        }
        if (this.__parameters__.badge) {
            this.__node__.append(this.__icon(true))
        }
        if (this.__parameters__.text) {
            this.__node__.append(this.__text())
        } else {
            this.__node__.classList.add('no-text')
        }
        if (this.__parameters__.documentation) {
            this.__node__.append(new DataMaDocumentation(this.__parameters__.documentation).render())
        }
        if (!this.__parameters__.disabled) {
            this.__setCallbacks()
        } else {
            this.__node__.classList.add('disabled')
        }
        return this.__node__;
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaNotification.js project project-deep-sky
 */

class DataMaNotification extends DataMaRenderingComponentAbstract {
    constructor(parameters, settings) {
        let {id, text, html, nodes=null, progress=null, buttons=[], contents} = parameters;
        super(parameters)
        this.id = id + '-notification';
        this.text = text;
        this.html = html;
        this.nodes = nodes;
        this.settings = settings;
        this.__node__ = DataMaUtils.getNode('div', this.id, ['datama-notification'], DataMaUtils.getNode('div', 'datama-light-notifications', [], document.body));
        this.__node__.childNodes.forEach(c => c.remove())
        this.__node__.removeEventListener('click', () => this.dismiss());
        this.__node__.addEventListener('click', () => this.dismiss());
        if (settings.accent) this.__node__.classList.add('datama-notification-accent')
        if (settings.error) this.__node__.classList.add('datama-notification-error')
        if (settings.warning) this.__node__.classList.add('datama-notification-warning')
        if (contents) {
            contents.forEach((c, i) => {
                this.__renderSingleContent(this.__node__, c, this.id + '-datama-notification-content-' + i)
            });
        } else {
            this.__text = DataMaUtils.getNode(nodes ? 'div' : 'p', this.id + '-text', [], this.__node__);
            if (progress != null) {
                this.progress = progress;
                this.__progress = DataMaUtils.getNode('div', this.id + '-progress', ['datama-progress'], this.__node__)
                this.__progressBar = DataMaUtils.getNode('div', this.id + '-progress-bar', ['datama-progress-bar'], this.__progress)
                this.__progressBar.setAttribute('style', 'width: ' + (progress * 100) + '%;')
            } else {
                setTimeout(() => {
                    this.dismiss()
                }, this.settings.duration || 3000)
            }
            if (this.text || this.html) {
                if (this.html) {
                    this.__text.innerHTML = DataMaTranslate.translate(window.DATAMA_LOCAL, this.html);
                } else {
                    this.__text.innerText = DataMaTranslate.translate(window.DATAMA_LOCAL, this.text);
                }
            } else if (this.nodes) {
                this.__text.replaceChildren(...(Array.isArray(this.nodes) ? this.nodes : [this.nodes]))
            }
            this.__buttons__ = buttons.map(button => new DataMaButton(button).render())
            this.__node__.replaceChildren(...[this.__text, this.__progress, ...this.__buttons__].filter(e => e ? e : ''))
        }
        this.show();
    }
    update(text, progress) {
        if (this.progress != null) {
            this.__progressBar.setAttribute('style', 'width: ' + (progress * 100) + '%;')
        }
        if (this.text || this.html) {
            if (this.html) {
                this.__text.innerHTML = DataMaTranslate.translate(window.DATAMA_LOCAL, text);
            } else {
                this.__text.innerText = DataMaTranslate.translate(window.DATAMA_LOCAL, text);
            }
        } else if (this.nodes) {
            this.__text.replaceChildren(this.nodes)
        }
    }
    show() {
        this.__node__.classList.add('datama-notification-show')
    }
    dismiss() {
        this.__node__.classList.remove('datama-notification-show')
        setTimeout(() => {
            if (this.__parameters__?.parent) {
                delete this.__parameters__?.parent.__notifications__[this.id.split('-notification')[0]]
            }
            let i = this.__node__.childNodes.length - 1;
            while (i > 0) {
                this.__node__.childNodes[i].remove()
                i--;
            }
            this.__node__.childNodes.forEach(c => {
                c.remove()
            })
            this.__node__.remove()
        }, 500)
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaNotifications.js project project-deep-sky
 */
class DataMaNotifications {
    constructor({silent}) {
        this.__notifications__ = {};
        this.__silent__ = silent
    }
    static makeNotification({id, text, html, nodes, progress = null, buttons=[]}, settings={}) {
        return new DataMaNotification({id, text, html, nodes, progress, buttons}, settings)
    }
    notify({id, text, html, nodes, progress = null, buttons = [], forceDisplay=false, contents}, settings={}) {
        if (this.__silent__ && !forceDisplay) return;
        return new Promise((resolve) => {
            setTimeout(() => {
                this.__notifications__[id] = new DataMaNotification({id, text, html, nodes, progress, buttons, contents, parent: this}, settings)
                resolve();
            })
        })
    }
    update(id, text, progress=1) {
        if (this.__silent__) return;
        return new Promise((resolve) => {
            setTimeout(() => {
                if (this.__notifications__[id]) {
                    this.__notifications__[id].update(text, progress)
                    if (progress === 1) {
                        setTimeout(() => {
                            this.dismiss(id)
                        }, this.__notifications__[id].settings.duration || 5000)
                    }
                } else {
                    DataMaLog.error("> Notification " + id + " do not exist")
                }
                resolve();
            })
        })
    }
    dismiss(id) {
        if (this.__silent__) return;
        return new Promise((resolve) => {
            setTimeout(() => {
                if (this.__notifications__[id]) {
                    this.__notifications__[id].dismiss()
                    delete this.__notifications__[id];
                    resolve()
                }
            })
        })
    }
}
// DATAMA SAS
//
// Copyright (c) [2021-2023] DataMa SAS, All Rights Reserved.
//
// Notice created by Django <django@datama.fr>
// Contributors : Wazhabits <anatole@datama.fr>
// __________________
//
// NOTICE:  All information contained herein is, and remains
// the property of DataMa SAS and/or some open source packages used
// if any.  The intellectual and technical concepts contained
// herein are proprietary to DataMa SAS
// and its suppliers and may be covered by French and Foreign Patents,
// patents in process, and are protected by trade secret or copyright law.
// Dissemination of this information or reproduction of this material
// is strictly forbidden unless prior written permission is obtained
// from DataMa SAS.
// __________________
class DataMaDocumentation extends DataMaRenderingComponentAbstract {
    /**
     * @param props = {
     *     link: 'http...',
     *     title: 'Mine zuber title'
     * }
     */
    constructor(props) {
        super(props);
    }
    render() {
        return new DataMaButton({
            icon: DataMaIcons.get('help-circle'),
            props: {
                title: DataMaTranslate.translate(window.DATAMA_LOCAL, this.__parameters__.title, this.__parameters__?.vars)
            },
            classList: [
                'datama-documentation'
            ],
            callbacks: {
                click: e => this.__handleClick(e)
            }
        }).render();
    }
    __handleClick(e) {
        e.preventDefault();
        e.stopPropagation();
        e.stopImmediatePropagation();
        window.open(this.__parameters__.link, '_blank')
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaInput.js project project-deep-sky
 */
class DataMaInput {
    constructor(parameters) {
        this.__parameters__ = parameters
    }

    /**
     * Render simple input like :
     * - text
     * - number
     * - mail
     * - date
     * - tel
     * @returns {HTMLElement|*}
     * @private
     */
    __renderSimpleInput(revertLabel=false) {
        let node = DataMaUtils.getNode(
            'input',
            this.__parameters__.id,
            ['datama-input', 'datama-input-' + this.__parameters__.type, (this.__parameters__.disabled ? 'datama-input-disabled' : (this.__parameters__.readOnly ? 'datama-input-read-only' : false))].filter(c => c),
            false,
            this.__parameters__?.props
        )
        if (this.__parameters__.type) {
            node.setAttribute('type', this.__parameters__.type)
        }
        if (this.__parameters__.min) {
            node.setAttribute('min', this.__parameters__.min)
        }
        if (this.__parameters__.max) {
            node.setAttribute('max', this.__parameters__.max)
        }
        if (this.__parameters__.readOnly) {
            node.setAttribute('read-only', 'read-only')
        }
        if (this.__parameters__.disabled) {
            node.setAttribute('disabled', 'disabled')
        }
        if (this.__parameters__.documentation) {
            node.setAttribute('documentation', this.__parameters__.documentation)
        }
        if (this.__parameters__.placeholder) {
            node.setAttribute('placeholder', DataMaTranslate.translate(window.DATAMA_LOCAL, this.__parameters__.placeholder, this.__parameters__?.vars))
        }
        if (this.__parameters__.list || this.__value__) {
            node.value = this.__value__
        }
        return this.__addLabelAndCommonAttributes(node, revertLabel);
    }
    /**
     * Add container / label, add title on input & callbacks
     * @returns {HTMLElement|*}
     * @private
     */
    __addLabelAndCommonAttributes(node, revertLabel=false) {
        if (this.__parameters__.title) {
            node.setAttribute('title', DataMaTranslate.translate(window.DATAMA_LOCAL, this.__parameters__.title, this.__parameters__?.vars))
        }
        if (this.__parameters__.callbacks && !(this.__parameters__.disabled || this.__parameters__.readOnly)) {
            let callbacks = Object.keys(this.__parameters__.callbacks)
            node.removeEventListener('input', e => this.__value__ = e.target.value);
            node.addEventListener('input', e => this.__value__ = e.target.value);
            callbacks.forEach(c => {
                node.removeEventListener(c, e => {
                    this.__parameters__.callbacks[c](this.__value__)
                    if (c === 'input' && typeof this.__parameters__.callbacks.post === 'function') {
                        this.__parameters__.callbacks.post(this.__value__)
                    }
                })
                node.addEventListener(c, e => {
                    this.__parameters__.callbacks[c](this.__value__)
                    if (c === 'input' && typeof this.__parameters__.callbacks.post === 'function') {
                        this.__parameters__.callbacks.post(this.__value__)
                    }
                })
            })
            if (callbacks.indexOf('input') === -1 && this.__parameters__.list) {
                this.__parameters__.list[this.__parameters__.key != null ?  this.__parameters__.key : this.__parameters__.id] = this.__value__
            }
        }
        if (this.__parameters__.label) {
            let label = DataMaUtils.getNode('label', this.__parameters__.id + '-label', ['datama-input-label', (revertLabel ? 'ml-4' : 'mr-4')])
            label.setAttribute('for', this.__parameters__.id)
            label.innerText = DataMaTranslate.translate(window.DATAMA_LOCAL, this.__parameters__.label, this.__parameters__?.vars);
            if (this.__parameters__.documentation) {
                label.append(new DataMaDocumentation(this.__parameters__.documentation).render())
            }
            let container = DataMaUtils.getNode('div', this.__parameters__.id + '-container', ['datama-input-container'])
            container.append(...(revertLabel ? [node, label] : [label, node]))
            this.__node__ = node;
            return container
        } else {
            this.__node__ = node;
            return node;
        }
    }

    /**
     * Render select input
     * @returns {HTMLElement|*}
     * @private
     */
    __renderSelectInput() {
        let node = DataMaUtils.getNode('div', this.__parameters__.id, ['datama-input', 'datama-input-select'], false, this.__parameters__?.props)
        let nodeText = DataMaUtils.getNode('div', this.__parameters__.id + '-text', ['datama-input-select-value', ...(this.__parameters__.classList || [])])
        if (this.__parameters__.light) {
            node.classList.add('datama-input-select-light')
        }
        if (this.__parameters__.weights) {
            node.classList.add('datama-input-select-weighted')
        }
        if (this.__parameters__.disabled || this.__parameters__.readOnly) {
            node.classList.add('disabled')
        }
        nodeText.innerText = DataMaTranslate.translate(window.DATAMA_LOCAL, this.__getFormattedValue());
        node.removeEventListener('click', e => this.__handleSelectInputClickOnText(e))
        node.addEventListener('click', e => this.__handleSelectInputClickOnText(e))
        let nodeDropDown = DataMaUtils.getNode('div', this.__parameters__.id + '-dropdown', ['datama-input-select-dropdown'])
        this.__elValue__ = nodeText
        node.append(nodeText)
        node.append(this.__renderSelectInputDropDown(nodeDropDown))
        return this.__addLabelAndCommonAttributes(node);
    }

    __renderSwitch() {
        let node = DataMaUtils.getNode('div', this.__parameters__.id, ['datama-input', 'datama-input-' + this.__parameters__.type])
        // node.removeEventListener('click', e => this.__handleSelectInputClickOnText(e))
        let value;
        if (this.__parameters__.list) {
            if (this.__parameters__.key) {
                value = this.__parameters__.list[this.__parameters__.key]
            } else {
                value = this.__parameters__.list[this.__parameters__.id]
            }
        } else {
            value = this.__parameters__.value
        }
        if (this.__parameters__?.readOnly || this.__parameters__?.disabled) {
            if (this.__parameters__?.readOnly) {
                node.classList.add('datama-input-read-only')
            }
            if (this.__parameters__?.disabled) {
                node.classList.add('datama-input-disabled')
            }
            node.setAttribute('title', this.__parameters__?.title || 'Disabled')
        } else {
            node.removeEventListener('click', e => {
                let value;
                if (this.__parameters__.list) {
                    if (this.__parameters__.key) {
                        this.__parameters__.list[this.__parameters__.key] = !this.__parameters__.list[this.__parameters__.key]
                        value = this.__parameters__.list[this.__parameters__.key]
                    } else {
                        this.__parameters__.list[this.__parameters__.id] = !this.__parameters__.list[this.__parameters__.id]
                        value = this.__parameters__.list[this.__parameters__.id]
                    }
                } else {
                    this.__parameters__.value = !this.__parameters__.value
                    value = this.__parameters__.value
                }
                if (this.__parameters__.callbacks) {
                    if (typeof this.__parameters__.callbacks.input === 'function') this.__parameters__.callbacks.input(value);
                }
                node.setAttribute('data-value', value.toString())
            })
            node.addEventListener('click', e => {
                let value;
                if (this.__parameters__.list) {
                    if (this.__parameters__.key) {
                        this.__parameters__.list[this.__parameters__.key] = !this.__parameters__.list[this.__parameters__.key]
                        value = this.__parameters__.list[this.__parameters__.key]
                    } else {
                        this.__parameters__.list[this.__parameters__.id] = !this.__parameters__.list[this.__parameters__.id]
                        value = this.__parameters__.list[this.__parameters__.id]
                    }
                } else {
                    this.__parameters__.value = !this.__parameters__.value
                    value = this.__parameters__.value
                }
                if (this.__parameters__.callbacks) {
                    if (typeof this.__parameters__.callbacks.input === 'function') this.__parameters__.callbacks.input(value);
                }
                node.setAttribute('data-value', value.toString())
            })
        }
        node.setAttribute('data-value', (value || false).toString())
        if (this.__parameters__.title) {
            node.setAttribute('title', DataMaTranslate.translate(window.DATAMA_LOCAL, this.__parameters__.title, this.__parameters__?.vars))
        }
        if (this.__parameters__.label) {
            let label = DataMaUtils.getNode('label', this.__parameters__.id + '-label', ['datama-input-label', 'ml-2'])
            label.setAttribute('for', this.__parameters__.id)
            label.innerText = DataMaTranslate.translate(window.DATAMA_LOCAL, this.__parameters__.label, this.__parameters__?.vars);
            if (this.__parameters__.documentation) {
                label.append(new DataMaDocumentation(this.__parameters__.documentation).render())
            }
            let container = DataMaUtils.getNode('div', this.__parameters__.id + '-container', ['datama-input-container'])
            container.append(node)
            container.append(label)
            this.__node__ = node;
            return container
        } else {
            this.__node__ = node;
            return node;
        }
    }

    /**
     * Get formatted value for select input (crop etc)
     * @returns {*}
     * @private
     */
    __getFormattedValue() {
        return this.__parameters__.multiple ?
            // Case  multiple
            (Array.isArray(this.__value__) ? this.__value__ : [this.__value__].filter(e => e && e !== ''))
                .filter((e, i) => i < 3)
                .join(', ') + (this.__value__.length > 3 ? ' (+' + (this.__value__.length - 3) + ')' : '')
            // Case simple
            : (this.__parameters__.items.filter(i => i.value === this.__value__)[0] ? this.__parameters__.items.filter(i => i[this.__parameters__.item_value || 'value'] === this.__value__ || i === this.__value__)[0][this.__parameters__.item_text || 'text'] : (this.__value__ || ''));
    }

    /**
     * Render dropdown of select input + handle events
     * @param node
     * @returns {*}
     * @private
     */
    __renderSelectInputDropDown(node=false) {
        let groups = this.__parameters__.items.some(item => typeof item === 'object' ? item.group : null) ? this.__parameters__.items.map(item => item.group).unique().filter(e => e) : ['default']
        if (node) node.childNodes.forEach(node => node.remove())
        if (this.__options__ && this.__options__.length) this.__options__.forEach(node => node.remove())
        groups.forEach((group, groupIndex) => {
            let groupContainer = DataMaUtils.getNode('div', this.__parameters__.id + '-group-' + groupIndex, ['datama-input-select-group']);
            if (groups.length > 1) {
                groupContainer.setAttribute('data-label', group)
            }
            groupContainer.childNodes.forEach(node => node.remove())
            this.__parameters__.items
                .filter(i => typeof i === 'object' ? (i.group === group || group === 'default' && !i.group) : true)
                .forEach((item, itemIndex) => {
                    let divOption = DataMaUtils.getNode('div', this.__parameters__.id + '-group-' + groupIndex + '-option-' + itemIndex, ['datama-input-select-group-option']);
                    switch (typeof item) {
                        case 'string':
                            if (this.__parameters__.list && (Array.isArray(this.__value__) ? this.__value__.indexOf(item) !== -1 : this.__value__ === item)) {
                                divOption.setAttribute('data-selected', 'selected')
                            }
                            divOption.setAttribute('data-value', item)
                            divOption.innerText = DataMaTranslate.translate(window.DATAMA_LOCAL, item);
                            break;
                        case 'object':
                            if (item[this.__parameters__.item_value || 'value'] == null) {
                                if (this.__parameters__.list && (this.__value__ == null || !this.__value__)) {
                                    divOption.setAttribute('data-selected', 'selected')
                                }
                                divOption.setAttribute('data-value', 'null')
                                divOption.innerText = DataMaTranslate.translate(window.DATAMA_LOCAL, item[this.__parameters__.item_text || 'text'], item?.vars);
                            } else {
                                if (this.__parameters__.list && this.__value__ === item[this.__parameters__.item_value || 'value']) {
                                    divOption.setAttribute('data-selected', 'selected')
                                }
                                divOption.setAttribute('data-value', item[this.__parameters__.item_value || 'value'])
                                divOption.innerText = DataMaTranslate.translate(window.DATAMA_LOCAL, item[this.__parameters__.item_text || 'text'], item?.vars);
                            }
                            break;
                    }
                    if (item.active === false) {
                        divOption.classList.add('disabled')
                        divOption.setAttribute('title', (item?.title || 'This element is not available').translate())
                    } else {
                        if (!this.__parameters__.disabled && !this.__parameters__.readOnly) {
                            divOption.removeEventListener('click', e => this.__handleSelectInput(e))
                            divOption.addEventListener('click', e => this.__handleSelectInput(e))
                        } else {
                            divOption.removeEventListener('click', e => {
                                e.preventDefault();
                                e.stopImmediatePropagation();
                                this.__node__.classList.toggle('datama-input-select-open')
                            })
                            divOption.addEventListener('click', e => {
                                e.preventDefault();
                                e.stopImmediatePropagation();
                                this.__node__.classList.toggle('datama-input-select-open')
                            })
                        }
                    }
                    /**
                     * <li id="drill-down-sub-0" class="dimensions"><a>
                     *     <span class="figure-label"><span class="text">Country</span>
                     *     <span class="detailed">Dimensions then Steps</span></span>
                     *     <div class="figure"><span class="datama-label">
                     *         <span class="datama-label-text">Interest Score:</span><span class="value">0.84</span></span>
                     *         <span class="bar" style="width: 100%;"></span><
                     *     /div>
                     * </a></li>
                     */
                    if (this.__parameters__.weights) {
                        if (this.__parameters__.callbacks.selected) {
                            if (this.__parameters__.callbacks.selected(item)) {
                                divOption.setAttribute('data-selected', 'selected')
                            }
                        }
                        divOption.innerText = ''
                        let textContainer = DataMaUtils.getNode('span', this.__parameters__.id + '-' + itemIndex + '-text', ['text-container'], divOption)
                        let text = DataMaUtils.getNode('span', this.__parameters__.id + '-' + itemIndex + '-text', ['text'], textContainer)
                        text.innerText = item[this.__parameters__.item_text || 'text'];
                        let detailed = DataMaUtils.getNode('div', this.__parameters__.id + '-' + itemIndex + '-detailed', ['detail'], textContainer)
                        detailed.innerText = item[this.__parameters__.item_value || 'value'].replace('.' + item[this.__parameters__.item_text || 'text'], '')
                        let figure = DataMaUtils.getNode('div', this.__parameters__.id + '-' + itemIndex + '-figure', ['figure'], divOption)
                        if (item.variant) {
                            figure.classList.add('variant')
                        }
                        let bar = DataMaUtils.getNode(
                            'span',
                            this.__parameters__.id + '-' + itemIndex + '-label',
                            ['bar'],
                            figure,
                            {
                                style: 'width: ' + (item.interest / Math.max(...this.__parameters__.weights.map(w => w + (Math.min(...this.__parameters__.weights) < 0 ? Math.abs(Math.min(...this.__parameters__.weights)) : 0))) * 100) + '%;'
                            }
                        )
                        let figureTextContainer = DataMaUtils.getNode('span', this.__parameters__.id + '-' + itemIndex + '-figure-text', ['text-container'], figure)
                        let figureLabel = DataMaUtils.getNode('span', this.__parameters__.id + '-' + itemIndex + '-figure-label', ['label'], figureTextContainer)
                        figureLabel.innerText = item.label;
                        let figureValue = DataMaUtils.getNode('span', this.__parameters__.id + '-' + itemIndex + '-figure-value', ['value'], figureTextContainer)
                        figureValue.innerText = item.interest.toFixed(2)
                    }
                    if (!this.__options__) this.__options__ = []
                    this.__options__.push(divOption)
                    groupContainer.append(divOption)
                })
            if (node) node.append(groupContainer)
        })
        return node;
    }

    /**
     * Open/Close select dropdown
     * @param e
     * @private
     */
    __handleSelectInputClickOnText(e) {
        e.preventDefault();
        this.__node__.classList.toggle('datama-input-select-open');
    }

    /**
     * Handle click of element in select dropdown
     * @param e
     * @private
     */
    __handleSelectInput(e) {
        e.stopPropagation()
        e.stopImmediatePropagation()
        e.preventDefault()
        let event = false;
        let value;
        value = e.target.closest('[data-value]').attributes['data-value'].value;
        if (this.__parameters__.multiple) {
            event = true;
            if (this.__value__.indexOf(value) === -1) {
                this.__value__.push(value)
                e.target.closest('[data-value]').setAttribute('data-selected', 'selected')
            } else {
                this.__value__.splice(this.__value__.indexOf(value), 1)
                e.target.closest('[data-value]').setAttribute('data-selected', null)
            }
        } else {
            this.__options__.forEach(e => e.setAttribute('data-selected', null))
            if (value !== this.__value__) {
                event = true;
                this.__value__ = value;
                e.target.closest('[data-value]').setAttribute('data-selected', 'selected')
            } else if (this.__parameters__.nullable) {
                event = true;
                this.__value__ = null
                e.target.closest('[data-value]').setAttribute('data-selected', null)
            }
        }
        this.__node__.value = this.__value__;
        if (event) {
            this.__node__.dispatchEvent(new CustomEvent('input', {bubbles: true, cancelable: true, detail: this.__value__}))
        }
        this.__elValue__.innerText = this.__getFormattedValue()
        if (!this.__parameters__.multiple) {
            this.__node__.classList.toggle('datama-input-select-open');
        }
        if (event) {
            this.__node__.dispatchEvent(new CustomEvent('post', {bubbles: true, cancelable: true, detail: this.__value__}))
        }
    }

    /**
     * Render Datama Input
     * @returns {HTMLElement}
     */
    render() {
        let result;
        if (this.__parameters__.list) {
            this.__value__ = this.__parameters__.list[this.__parameters__.key != null ?  this.__parameters__.key : this.__parameters__.id] || (this.__parameters__.multiple ? [] : null);
        } else {
            this.__value__ = this.__parameters__.multiple ? [] : this.__parameters__.value
        }
        if (typeof this.__value__ === 'object' && this.__parameters__.type === 'text' && this.__value__ != null) {
            this.__value__ = JSON.stringify(this.__value__)
        }
        switch (this.__parameters__.type) {
            case 'select-weighted':
            case 'select':
                result = this.__renderSelectInput()
                break;
            case 'switch':
                result = this.__renderSwitch();
                break
            case 'color':
                result = this.__renderSimpleInput(true)
                break;
            case 'text':
            case 'number':
            case 'email':
            case 'tel':
            default:
                result = this.__renderSimpleInput()
                break;
        }
        this.__node__.__datama__ = {
            "class": this
        }
        return result;
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaDialog.js project project-deep-sky
 */
/**
 * DataMa Dialog UI resource
 */
class DataMaDialog extends DataMaRenderingComponentAbstract {
    constructor(props, contents) {
        super(props)
        let {id, target, classList, header, footer} = props
        this.__id__ = id;
        this.__target__ = target;
        this.__contents__ = contents || [];
        this.__nodes__ = {}
        this.__nodes__.contents = []
        this.__header__ = header || false
        this.__footer__ = footer || false
        this.__classes__ = classList || []
        this.state = false;
    }

    /**
     * @param icon
     * @param text
     * @param title
     * @param callback
     * @param classList
     * @returns {DataMaButton}
     * @private
     */
    __makeButton({icon=false, text, title, callback, classList=[]}) {
        return (new DataMaButton({icon: icon, text, props: {title}, classList, callbacks: {click: callback}}))
    }

    /**
     * Add DataMa Dialog header, with close button
     * @private
     */
    __header() {
        if (this.__header__) {
            this.__nodes__.header = this.get('header', false, ['datama-dialog-container-header'], this.__node__)
            if (this.__header__.icon) {
                let icon = this.get('span', false, ['datama-dialog-icon'], this.__nodes__.header)
                if (typeof this.__header__.icon === 'string') {
                    icon.innerText = this.__header__.icon
                } else if (this.__header__.icon instanceof HTMLElement) {
                    icon.append(this.__header__.icon)
                }
            }
            if (this.__header__.title) {
                let title = this.get('h2', false, ['datama-dialog-title'], this.__nodes__.header)
                title.innerText = DataMaTranslate.translate(window.DATAMA_LOCAL, this.__header__.title)
            }
            let buttons = [];
            if (this.__header__.buttons) {
                buttons.push(...this.__header__.buttons.map((headerButton) => headerButton.divider ? DataMaUtils.divider('span', headerButton.vertical) : this.__makeButton(headerButton).render()))
            }
            if (this.__parameters__.documentation) {
                buttons.push(new DataMaDocumentation(this.__parameters__.documentation).render(), DataMaUtils.divider('span', true))
            }
            buttons.push(this.__makeButton({title: 'Close', icon: DataMaIcons.get('close'), callback: e => this.close(e)}).render())
            buttons.forEach(button => this.__nodes__.header.appendChild(button))
        }
    }

    /**
     * Add DataMa Dialog footer
     * @private
     */
    __footer() {
        if (this.__footer__) {
            let buttons = [];
            this.__nodes__.footer = this.get('footer', false, ['datama-dialog-container-footer'], this.__node__)
            if (this.__footer__.buttons) {
                buttons.push(...this.__footer__.buttons.map((footerButton) => footerButton.divider ? DataMaUtils.divider('span', footerButton.vertical) : this.__makeButton(footerButton).render()))
            }
            buttons.forEach(button => this.__nodes__.footer.appendChild(button))
        }
    }

    /**
     * Render and show a DataMa Dialog
     */
    show() {
        this.render().then(() => {
            this.__nodes__.frame.classList.remove('datama-dialog-hidden')
            this.__nodes__.frame.classList.add('datama-dialog-open')
            this.state = true;
        })
    }

    /**
     * Close DataMa Dialog
     * @param e
     */
    close(e) {
        if (e) {
            e.preventDefault()
        }
        this.__nodes__.frame.classList.remove('datama-dialog-open')
        this.__nodes__.frame.classList.add('datama-dialog-hidden')
        this.state = false;
    }

    /**
     * Render a Dialog, each dialog are freshly renderer on open
     * @return Promise
     */
    render() {
        return new Promise(resolve => {
            this.__nodes__.frame = this.get('div', 'datama-dialog-' + this.__id__, ['datama-dialog', 'datama-dialog-hidden', ...this.__classes__], this.__target__)
            this.__nodes__.frame.innerHTML = '';
            this.__node__ = this.get('div', false, ['datama-dialog-container'], this.__nodes__.frame)
            this.__header()
            this.__nodes__.content = this.get('main', false, ['datama-dialog-container-main'], this.__node__)
            this.__footer()
            this.__contents__.forEach((content, index) => {
                this.__renderContent(this.__nodes__.content, content, index)
            })

            // this.__node__.append(this.__nodes__.header)
            // this.__node__.append(this.__nodes__.content)
            // this.__node__.append(this.__nodes__.footer)
            resolve()
        })
    }
    // Removing all dialog nodes
    unmount() {
        Object.keys(this.__nodes__).forEach(node => {
            if (this.__nodes__[node] instanceof Element) {
                this.__nodes__[node].remove();
            }
        })
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaSlideActions.js project project-deep-sky
 */
class DataMaSlideActions extends DataMaRenderingComponentAbstract {
    __sync() {
        return true;
    }
    __renderShortcut(dialog) {
        let doc = this.__getDocumentationLink()
        this.__nodes__.buttons = [
            ...this.__getSettingsShortcut(),
            ...(doc ? [doc, {divider: true, vertical: true}] : []),
            new DataMaButton({
                id: this.__parameters__.id + '-button',
                icon: DataMaIcons.get('cog'),
                title: 'Edit settings',
                classList: ['transparent', 'p-0'],
                callbacks: {
                    click: e => {
                        if (!dialog.state) {
                            e.preventDefault();
                            dialog.show();
                        } else {
                            dialog.close(e)
                        }
                    }
                }
            })
        ]
        this.__node__.append(...this.__nodes__.buttons.map(button => button.divider ? DataMaUtils.divider('span', true, false, button.classList) : button.render()))
    }
    __getDialog() {
        return new DataMaDialog(
            {
                id: 'datama-' + this.__parameters__.id + '-settings-dialog',
                target: this.__node__,
                classList: [
                    'no-border'
                ]
                // header: {
                //     title: DataMaTranslate.translate(window.DATAMA_LOCAL, this.__parameters__.name + ' settings'),
                //     icon: DataMaIcons.get('cog')
                // }
                // footer: {
                //     buttons: [
                //
                //     ]
                // }
            },
            this.__getSettingsContent()
        )
    }
    render() {
        this.__node__ = this.get(
            'div',
            this.__parameters__.id + '-container',
            ['datama-slide-actions', 'd-flex', 'justify-end'],
            false,
            {}
        )
        this.__dialog__ = this.__getDialog()
        this.__renderShortcut(this.__dialog__);
        this.__nodes__.dialogs = {
            settings: this.__dialog__.__node__
        }
        return this.__node__;
    }
    __getSettingsContent() {
        return []
    }
    __getSettingsShortcut() {
        return []
    }
    __getDocumentationLink() {
        return false
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaGlobalIntroduction.js project project-deep-sky
 */

class DataMaGlobalIntroduction extends DataMaRenderingComponentAbstract {
    constructor(props) {
        super(props);
        this.__node__ = DataMaUtils.getNode('div', 'datama-light-introduction', ['datama-module'], this.__parameters__.core.__nodes__.modules)
        this.__parameters__.contents = this.__getContents(DATAMA_CURRENT_EXTENSION)
    }

    __getContents(scope) {
        let scopes = {
            'default': [
                {
                    title: true,
                    html: 'Welcome to <span class="font-primary">Datama</span> extension!',
                    tag: 'h1',
                    classList: ['text-center', 'w-100'],
                    props: {
                        style: 'text-transform: uppercase;'
                    }
                },
                DataMaImages.get('super-datamate', 'introduction-data-mate', ['small', 'ml-auto', 'mr-auto']),
                {
                    html: '<span class="font-primary">Datama</span> Compare is a data analysis tool that allows you to quickly identify and explain the biggest drivers of performance variations',
                    tag: 'blockquote',
                    classList: ['text-center', 'no-quote', 'ml-auto', 'mr-auto', 'mt-0', 'w-50']
                },
                {
                    html: 'To get started, add columns to this visual in the sidebar!',
                    icon: DataMaIcons.get('check', {classList: ['mr-2']}),
                    classList: ['d-flex', 'justify-start', 'w-50', 'pl-5', 'pr-5', 'mt-5', 'mb-2', 'icon-primary-light']
                },
                {
                    html: 'You need to have at least one metric and one dimension',
                    icon: DataMaIcons.get('check', {classList: ['mr-2']}),
                    classList: ['d-flex', 'justify-start', 'w-50', 'pl-5', 'pr-5', 'mb-2', 'icon-primary-light']
                },
                {
                    html: 'Read our documentation to better understand the configuration',
                    icon: DataMaIcons.get('check', {classList: ['mr-2']}),
                    classList: ['d-flex', 'justify-start', 'mb-2', 'w-50', 'pl-5', 'pr-5', 'mb-5', 'icon-primary-light']
                },
                new DataMaButton({
                    id: 'datama-introduction-read-the-doc',
                    text: 'Read the documentation',
                    callbacks: {
                        click: (event) => {
                            window.open(DATAMA_DOCUMENTATION)
                            event.stopPropagation()
                        }
                    },
                    classList: [
                        'bg-primary',
                        'p-2'
                    ],
                    icon: DataMaIcons.get('arrow-right'),
                })
            ],
            'lookerstudio': [
                {
                    title: true,
                    html: 'Welcome to <span class="font-primary">Datama</span> extension!',
                    tag: 'h1',
                    classList: ['text-center'],
                    props: {
                        style: 'text-transform: uppercase;'
                    }
                },
                DataMaImages.get('super-datamate', 'introduction-data-mate', ['small', 'ml-auto', 'mr-auto']),
                {
                    html: '<span class="font-primary">Datama</span> Compare is a data analysis tool that allows you to quickly identify and explain the biggest drivers of performance variations',
                    tag: 'blockquote',
                    classList: ['text-center', 'no-quote', 'ml-auto', 'mr-auto', 'mt-0', 'w-50']
                },
                {
                    html: 'To get started, add columns to this visual in the sidebar!',
                    icon: DataMaIcons.get('check', {classList: ['mr-2']}),
                    classList: ['d-flex', 'justify-start', 'w-50', 'pl-5', 'pr-5', 'mt-5', 'mb-2', 'icon-primary-light']
                },
                {
                    html: 'You need to have at least one metric and one dimension',
                    icon: DataMaIcons.get('check', {classList: ['mr-2']}),
                    classList: ['d-flex', 'justify-start', 'w-50', 'pl-5', 'pr-5', 'mb-2', 'icon-primary-light']
                },
                {
                    html: 'Read our documentation to better understand the configuration',
                    icon: DataMaIcons.get('check', {classList: ['mr-2']}),
                    classList: ['d-flex', 'justify-start', 'mb-2', 'w-50', 'pl-5', 'pr-5', 'mb-5', 'icon-primary-light']
                },
                new DataMaButton({
                    id: 'datama-introduction-read-the-doc',
                    text: 'Read the documentation',
                    callbacks: {
                        click: (event) => {
                            window.open(DATAMA_DOCUMENTATION)
                            event.stopPropagation()
                        }
                    },
                    classList: [
                        'bg-primary',
                        'p-2'
                    ],
                    icon: DataMaIcons.get('arrow-right'),
                })
            ],
            'powerbi': [
                {
                    title: true,
                    html: 'Welcome to <span class="font-primary">Datama</span> extension!',
                    tag: 'h1',
                    classList: ['text-center'],
                    props: {
                        style: 'text-transform: uppercase;'
                    }
                },
                DataMaImages.get('super-datamate', 'introduction-data-mate', ['small', 'ml-auto', 'mr-auto']),
                {
                    html: '<span class="font-primary">Datama</span> Compare is a data analysis tool that allows you to quickly identify and explain the biggest drivers of performance variations',
                    tag: 'blockquote',
                    classList: ['text-center', 'no-quote', 'ml-auto', 'mr-auto', 'mt-0', 'w-50']
                },
                {
                    html: 'To get started, add columns to this visual in the sidebar!',
                    icon: DataMaIcons.get('check', {classList: ['mr-2']}),
                    classList: ['d-flex', 'justify-start', 'w-50', 'pl-5', 'pr-5', 'mt-5', 'mb-2', 'icon-primary-light']
                },
                {
                    html: 'You need to have at least one metric and one dimension',
                    icon: DataMaIcons.get('check', {classList: ['mr-2']}),
                    classList: ['d-flex', 'justify-start', 'w-50', 'pl-5', 'pr-5', 'mb-2', 'icon-primary-light']
                },
                {
                    html: 'Read our documentation to better understand the configuration',
                    icon: DataMaIcons.get('check', {classList: ['mr-2']}),
                    classList: ['d-flex', 'justify-start', 'mb-2', 'w-50', 'pl-5', 'pr-5', 'mb-5', 'icon-primary-light']
                },
                new DataMaButton({
                    id: 'datama-introduction-read-the-doc',
                    text: 'Read the documentation',
                    callbacks: {
                        click: (event) => {
                            window.open(DATAMA_DOCUMENTATION)
                            event.stopPropagation()
                        }
                    },
                    classList: [
                        'bg-primary',
                        'p-2'
                    ],
                    icon: DataMaIcons.get('arrow-right'),
                })
            ],
            'tableau': [
                {
                    title: true,
                    html: 'Welcome to <span class="font-primary">Datama</span> extension!',
                    tag: 'h1',
                    classList: ['text-center'],
                    props: {
                        style: 'text-transform: uppercase;'
                    }
                },
                DataMaImages.get('super-datamate', 'introduction-data-mate', ['small', 'ml-auto', 'mr-auto']),
                {
                    html: '<span class="font-primary">Datama</span> Compare is a data analysis tool that allows you to quickly identify and explain the biggest drivers of performance variations',
                    tag: 'blockquote',
                    classList: ['text-center', 'no-quote', 'ml-auto', 'mr-auto', 'mt-0', 'w-50']
                },
                {
                    html: 'add a source worksheet to this dashboard to get started!',
                    icon: DataMaIcons.get('check', {classList: ['mr-2']}),
                    classList: ['d-flex', 'justify-start', 'w-50', 'pl-5', 'pr-5', 'mt-5', 'mb-2', 'icon-primary-light']
                },
                {
                    html: 'You need to have at least one metric and one dimension',
                    icon: DataMaIcons.get('check', {classList: ['mr-2']}),
                    classList: ['d-flex', 'justify-start', 'w-50', 'pl-5', 'pr-5', 'mb-2', 'icon-primary-light']
                },
                {
                    html: 'Read our documentation to better understand the configuration',
                    icon: DataMaIcons.get('check', {classList: ['mr-2']}),
                    classList: ['d-flex', 'justify-start', 'mb-2', 'w-50', 'pl-5', 'pr-5', 'mb-5', 'icon-primary-light']
                },
                new DataMaButton({
                    id: 'datama-introduction-read-the-doc',
                    text: 'Read the documentation',
                    callbacks: {
                        click: (event) => {
                            window.open(DATAMA_DOCUMENTATION)
                            event.stopPropagation()
                        }
                    },
                    classList: [
                        'bg-primary',
                        'p-2'
                    ],
                    icon: DataMaIcons.get('arrow-right'),
                })
            ]
        }
        return scopes[scope] || scopes.default
    }

    render() {
        if (!this.__nodes__?.introduction) {
            this.__nodes__.introduction = DataMaUtils.getNode('div', 'datama-light-introduction-section', ['datama-section', 'bg-white', 'h-100', 'd-flex', 'flex-column', 'align-middle'], this.__node__);
            this.__parameters__.contents.forEach((e, i) => this.__renderContent(this.__nodes__.introduction, e, i))
        }
    }

    unmount() {
        delete this.__node__
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaGlobalNoMetrics.js project project-deep-sky
 */

class DataMaGlobalNoMetrics extends DataMaRenderingComponentAbstract {
    constructor(props) {
        super(props);
        this.__node__ = DataMaUtils.getNode('div', 'datama-light-no-metrics', ['datama-module'], this.__parameters__.core.__nodes__.modules)
        this.__parameters__.contents = this.__getContents(DATAMA_CURRENT_EXTENSION)
    }

    __getContents(scope) {
        let scopes = {
            'default': [
                {
                    title: true,
                    html: 'Welcome to <span class="font-primary">Datama</span> extension!',
                    tag: 'h1',
                    classList: ['text-center', 'w-100'],
                    props: {
                        style: 'text-transform: uppercase;'
                    }
                },
                DataMaImages.get('super-datamate', 'introduction-data-mate', ['small', 'ml-auto', 'mr-auto']),
                {
                    html: '<span class="font-primary">Datama</span> Compare is a data analysis tool that allows you to quickly identify and explain the biggest drivers of performance variations',
                    tag: 'blockquote',
                    classList: ['text-center', 'no-quote', 'ml-auto', 'mr-auto', 'mt-0', 'w-50']
                },
                {
                    html: 'You need to have at least one metric',
                    icon: DataMaIcons.get('x', {classList: ['mr-2']}),
                    tag: 'h4',
                    classList: ['d-flex', 'justify-start', 'w-50', 'pl-5', 'pr-5', 'mb-4', 'icon-danger']
                },
                new DataMaButton({
                    id: 'datama-introduction-read-the-doc',
                    text: 'Read the documentation',
                    callbacks: {
                        click: (event) => {
                            window.open(DATAMA_DOCUMENTATION)
                            event.stopPropagation()
                        }
                    },
                    classList: [
                        'bg-primary',
                        'p-2'
                    ],
                    icon: DataMaIcons.get('arrow-right'),
                })
            ],
            'lookerstudio': [
                {
                    title: true,
                    html: 'Welcome to <span class="font-primary">Datama</span> extension!',
                    tag: 'h1',
                    classList: ['text-center', 'w-100'],
                    props: {
                        style: 'text-transform: uppercase;'
                    }
                },
                DataMaImages.get('super-datamate', 'introduction-data-mate', ['small', 'ml-auto', 'mr-auto']),
                {
                    html: '<span class="font-primary">Datama</span> Compare is a data analysis tool that allows you to quickly identify and explain the biggest drivers of performance variations',
                    tag: 'blockquote',
                    classList: ['text-center', 'no-quote', 'ml-auto', 'mr-auto', 'mt-0', 'w-50']
                },
                {
                    html: 'You need to have at least one metric',
                    icon: DataMaIcons.get('x', {classList: ['mr-2']}),
                    tag: 'h4',
                    classList: ['d-flex', 'justify-start', 'w-50', 'pl-5', 'pr-5', 'mb-4', 'icon-danger']
                },
                new DataMaButton({
                    id: 'datama-introduction-read-the-doc',
                    text: 'Read the documentation',
                    callbacks: {
                        click: (event) => {
                            window.open(DATAMA_DOCUMENTATION)
                            event.stopPropagation()
                        }
                    },
                    classList: [
                        'bg-primary',
                        'p-2'
                    ],
                    icon: DataMaIcons.get('arrow-right'),
                })
            ],
            'powerbi': [
                {
                    title: true,
                    html: 'Welcome to <span class="font-primary">Datama</span> extension!',
                    tag: 'h1',
                    classList: ['text-center', 'w-100'],
                    props: {
                        style: 'text-transform: uppercase;'
                    }
                },
                DataMaImages.get('super-datamate', 'introduction-data-mate', ['small', 'ml-auto', 'mr-auto']),
                {
                    html: '<span class="font-primary">Datama</span> Compare is a data analysis tool that allows you to quickly identify and explain the biggest drivers of performance variations',
                    tag: 'blockquote',
                    classList: ['text-center', 'no-quote', 'ml-auto', 'mr-auto', 'mt-0', 'w-50']
                },
                {
                    html: 'You need to have at least one metric',
                    icon: DataMaIcons.get('x', {classList: ['mr-2']}),
                    tag: 'h4',
                    classList: ['d-flex', 'justify-start', 'w-50', 'pl-5', 'pr-5', 'mb-4', 'icon-danger']
                },
                new DataMaButton({
                    id: 'datama-introduction-read-the-doc',
                    text: 'Read the documentation',
                    callbacks: {
                        click: (event) => {
                            window.open(DATAMA_DOCUMENTATION)
                            event.stopPropagation()
                        }
                    },
                    classList: [
                        'bg-primary',
                        'p-2'
                    ],
                    icon: DataMaIcons.get('arrow-right'),
                })
            ],
            'tableau': [
                {
                    title: true,
                    html: 'Welcome to <span class="font-primary">Datama</span> extension!',
                    tag: 'h1',
                    classList: ['text-center', 'w-100'],
                    props: {
                        style: 'text-transform: uppercase;'
                    }
                },
                DataMaImages.get('super-datamate', 'introduction-data-mate', ['small', 'ml-auto', 'mr-auto']),
                {
                    html: '<span class="font-primary">Datama</span> Compare is a data analysis tool that allows you to quickly identify and explain the biggest drivers of performance variations',
                    tag: 'blockquote',
                    classList: ['text-center', 'no-quote', 'ml-auto', 'mr-auto', 'mt-0', 'w-50']
                },
                {
                    html: 'You need to have at least one metric',
                    icon: DataMaIcons.get('x', {classList: ['mr-2']}),
                    tag: 'h4',
                    classList: ['d-flex', 'justify-start', 'w-50', 'pl-5', 'pr-5', 'mb-4', 'icon-danger']
                },
                new DataMaButton({
                    id: 'datama-introduction-read-the-doc',
                    text: 'Read the documentation',
                    callbacks: {
                        click: (event) => {
                            window.open(DATAMA_DOCUMENTATION)
                            event.stopPropagation()
                        }
                    },
                    classList: [
                        'bg-primary',
                        'p-2'
                    ],
                    icon: DataMaIcons.get('arrow-right'),
                })
            ]
        }
        return scopes[scope] || scopes.default
    }

    render() {
        if (!this.__nodes__?.noMetrics) {
            this.__nodes__.noMetrics = DataMaUtils.getNode('div', 'datama-light-no-metrics-section', ['datama-section', 'bg-white', 'h-100', 'd-flex', 'flex-column', 'align-middle'], this.__node__);
            this.__parameters__.contents.forEach((e, i) => this.__renderContent(this.__nodes__.noMetrics, e, i))
        }
    }

    unmount() {
        delete this.__node__
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaGlobalNoDimensions.js project project-deep-sky
 */

class DataMaGlobalNoDimensions extends DataMaRenderingComponentAbstract {
    constructor(props) {
        super(props);
        this.__node__ = DataMaUtils.getNode('div', 'datama-light-no-dimensions', ['datama-module'], this.__parameters__.core.__nodes__.modules)
        this.__parameters__.contents = this.__getContents(DATAMA_CURRENT_EXTENSION)
    }

    __getContents(scope) {
        let scopes = {
            'default': [
                {
                    title: true,
                    html: 'Welcome to <span class="font-primary">Datama</span> extension!',
                    tag: 'h1',
                    classList: ['text-center', 'w-100'],
                    props: {
                        style: 'text-transform: uppercase;'
                    }
                },
                DataMaImages.get('super-datamate', 'introduction-data-mate', ['small', 'ml-auto', 'mr-auto']),
                {
                    html: '<span class="font-primary">Datama</span> Compare is a data analysis tool that allows you to quickly identify and explain the biggest drivers of performance variations',
                    tag: 'blockquote',
                    classList: ['text-center', 'no-quote', 'ml-auto', 'mr-auto', 'mt-0', 'w-50']
                },
                {
                    html: 'You need to have at least one dimension',
                    icon: DataMaIcons.get('x', {classList: ['mr-2']}),
                    tag: 'h4',
                    classList: ['d-flex', 'justify-start', 'w-50', 'pl-5', 'pr-5', 'mb-4', 'icon-danger']
                },
                new DataMaButton({
                    id: 'datama-introduction-read-the-doc',
                    text: 'Read the documentation',
                    callbacks: {
                        click: (event) => {
                            window.open(DATAMA_DOCUMENTATION)
                            event.stopPropagation()
                        }
                    },
                    classList: [
                        'bg-primary',
                        'p-2'
                    ],
                    icon: DataMaIcons.get('arrow-right'),
                })
            ],
            'lookerstudio': [
                {
                    title: true,
                    html: 'Welcome to <span class="font-primary">Datama</span> extension!',
                    tag: 'h1',
                    classList: ['text-center', 'w-100'],
                    props: {
                        style: 'text-transform: uppercase;'
                    }
                },
                DataMaImages.get('super-datamate', 'introduction-data-mate', ['small', 'ml-auto', 'mr-auto']),
                {
                    html: '<span class="font-primary">Datama</span> Compare is a data analysis tool that allows you to quickly identify and explain the biggest drivers of performance variations',
                    tag: 'blockquote',
                    classList: ['text-center', 'no-quote', 'ml-auto', 'mr-auto', 'mt-0', 'w-50']
                },
                {
                    html: 'You need to have at least one dimension',
                    icon: DataMaIcons.get('x', {classList: ['mr-2']}),
                    tag: 'h4',
                    classList: ['d-flex', 'justify-start', 'w-50', 'pl-5', 'pr-5', 'mb-4', 'icon-danger']
                },
                new DataMaButton({
                    id: 'datama-introduction-read-the-doc',
                    text: 'Read the documentation',
                    callbacks: {
                        click: (event) => {
                            window.open(DATAMA_DOCUMENTATION)
                            event.stopPropagation()
                        }
                    },
                    classList: [
                        'bg-primary',
                        'p-2'
                    ],
                    icon: DataMaIcons.get('arrow-right'),
                })
            ],
            'powerbi': [
                {
                    title: true,
                    html: 'Welcome to <span class="font-primary">Datama</span> extension!',
                    tag: 'h1',
                    classList: ['text-center', 'w-100'],
                    props: {
                        style: 'text-transform: uppercase;'
                    }
                },
                DataMaImages.get('super-datamate', 'introduction-data-mate', ['small', 'ml-auto', 'mr-auto']),
                {
                    html: '<span class="font-primary">Datama</span> Compare is a data analysis tool that allows you to quickly identify and explain the biggest drivers of performance variations',
                    tag: 'blockquote',
                    classList: ['text-center', 'no-quote', 'ml-auto', 'mr-auto', 'mt-0', 'w-50']
                },
                {
                    html: 'You need to have at least one dimension',
                    icon: DataMaIcons.get('x', {classList: ['mr-2']}),
                    tag: 'h4',
                    classList: ['d-flex', 'justify-start', 'w-50', 'pl-5', 'pr-5', 'mb-4', 'icon-danger']
                },
                new DataMaButton({
                    id: 'datama-introduction-read-the-doc',
                    text: 'Read the documentation',
                    callbacks: {
                        click: (event) => {
                            window.open(DATAMA_DOCUMENTATION)
                            event.stopPropagation()
                        }
                    },
                    classList: [
                        'bg-primary',
                        'p-2'
                    ],
                    icon: DataMaIcons.get('arrow-right'),
                })
            ],
            'tableau': [
                {
                    title: true,
                    html: 'Welcome to <span class="font-primary">Datama</span> extension!',
                    tag: 'h1',
                    classList: ['text-center', 'w-100'],
                    props: {
                        style: 'text-transform: uppercase;'
                    }
                },
                DataMaImages.get('super-datamate', 'introduction-data-mate', ['small', 'ml-auto', 'mr-auto']),
                {
                    html: '<span class="font-primary">Datama</span> Compare is a data analysis tool that allows you to quickly identify and explain the biggest drivers of performance variations',
                    tag: 'blockquote',
                    classList: ['text-center', 'no-quote', 'ml-auto', 'mr-auto', 'mt-0', 'w-50']
                },
                {
                    html: 'You need to have at least one dimension',
                    icon: DataMaIcons.get('x', {classList: ['mr-2']}),
                    tag: 'h4',
                    classList: ['d-flex', 'justify-start', 'w-50', 'pl-5', 'pr-5', 'mb-4', 'icon-danger']
                },
                new DataMaButton({
                    id: 'datama-introduction-read-the-doc',
                    text: 'Read the documentation',
                    callbacks: {
                        click: (event) => {
                            window.open(DATAMA_DOCUMENTATION)
                            event.stopPropagation()
                        }
                    },
                    classList: [
                        'bg-primary',
                        'p-2'
                    ],
                    icon: DataMaIcons.get('arrow-right'),
                })
            ]
        }
        return scopes[scope] || scopes.default
    }

    render() {
        if (!this.__nodes__?.noDimensions) {
            this.__nodes__.noDimensions = DataMaUtils.getNode('div', 'datama-light-no-dimensions-section', ['datama-section', 'bg-white', 'h-100', 'd-flex', 'flex-column', 'align-middle'], this.__node__);
            this.__parameters__.contents.forEach((e, i) => this.__renderContent(this.__nodes__.noDimensions, e, i))
        }
    }

    unmount() {
        delete this.__node__
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaGlobal.js project project-deep-sky
 */

class DataMaGlobal {
    constructor(core) {
        this.__core__ = core
    }
    init() {
        if (!this.__core__?.__nodes__?.introduction) {
            this.__core__.__nodes__.introduction = DataMaUtils.getNode('div', 'datama-light-introduction', ['datama-section', 'datama-section-gradient'], this.__core__.__nodes__.container)
        }
    }
    boot(moduleName) {
        if (!this.__core__.solutions.global.modules) {
            this.__core__.solutions.global.modules = {}
        }
        if (moduleName) {
            if (moduleName === 'introduction') {
                this.__core__.solutions.global.modules.introduction = new DataMaGlobalIntroduction({core: this.__core__})
                this.__core__.solutions.global.modules.introduction.render();
            } else if (moduleName === 'noDimensions') {
                this.__core__.solutions.global.modules.introduction = new DataMaGlobalNoDimensions({core: this.__core__})
                this.__core__.solutions.global.modules.introduction.render();
            } else if (moduleName === 'noMetrics') {
                this.__core__.solutions.global.modules.introduction = new DataMaGlobalNoMetrics({core: this.__core__})
                this.__core__.solutions.global.modules.introduction.render();
            }
        }
    }
    unmount() {
        if (this.__core__.solutions.global) {
            if (this.__core__.solutions.global.modules) {
                Object.keys(this.__core__.solutions.global.modules).forEach(element => this.__core__.solutions.global.modules[element].unmount())
            }
            Object.keys(this.__core__.solutions.global).filter(e => e !== '__core__').forEach(element => this.__core__.solutions.global[element].unmount ? this.__core__.solutions.global[element].unmount() : delete this.__core__.solutions.global[element])
        }
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaCompareWaterfallModule.js project project-deep-sky
 */
class DataMaCompareWaterfallModule {
    constructor(core) {
        this.requireSolutionReboot = true;
        this.__core__ = core
        this.container = []
        if (!this.__core__.__settings__.configuration.waterfall) {
            this.__core__.__settings__.configuration.waterfall = DataMaCompareWaterfallModule.getWaterfallDefaultConfiguration()
        }
        this.__core__.__settings__.configuration.waterfall.display.segment_complement = this.__core__.__settings__.inputs.segment_complement
    }
    sync(comparison='default', comparisons, update=false) {
        this.__core__.__settings__.configuration.waterfall.cards.root = this.__core__.__settings__.inputs.totalStepName !== '' ? this.__core__.__settings__.inputs.totalStepName : this.__core__.__settings__.metrics[this.__core__.__settings__.metrics.length - 1]
        this.__core__.__settings__.configuration.waterfall.display.segment_complement = this.__core__.__settings__.inputs.segment_complement;
        this.__core__.__settings__.configuration.waterfall.axis.unit = this.__core__.__settings__.inputs.totalStepUnit
        if (Array.isArray(this.instance)) {
            if (this.instance[comparison]) {
                let {data} = this.__getWaterfallData(comparison);
                let score = this.__getWaterfallScore(data, comparison);
                this.__addRank(data, false, score, false)
                this.instance[comparison].setScore(score)
                this.instance[comparison].addChunkedData(data)
            } else {
                this.__unmount(comparison, comparisons)
                this.render()
            }
        } else {
            let {data, coc} = this.__getWaterfallData();
            if (!coc && this.instance.__configuration.coc) {
                this.instance.__configuration.coc = false;
                this.__unmount(comparison, comparisons)
                this.render()
            } else if (coc && !this.instance.__configuration.coc) {
                this.instance.unmount()
                let score = this.__getWaterfallScore(data, comparison), scoreCoC;
                if (coc) {
                    scoreCoC = this.__getWaterfallScore(coc, comparison);
                }
                this.__addRank(data, coc, score, scoreCoC)
                this.instance.setScore(score, scoreCoC)
                this.instance.setData({
                    source: data,
                    comparison: coc,
                    drill_down_dimension: this.instance.__drill_down_dimension,
                    drill_down: this.instance.__drill_down
                }, score)
            } else {
                let score = this.__getWaterfallScore(data, comparison), scoreCoC;
                if (coc) {
                    scoreCoC = this.__getWaterfallScore(coc, comparison);
                }
                this.__addRank(data, coc, score, scoreCoC)
                this.instance.setScore(score, scoreCoC)
                this.instance.addChunkedData(data, coc)
                if (update) {
                    setTimeout(() => {
                        this.instance.update()
                    })
                }
            }
        }
    }
    __addRank(data, coc=false, score, scoreCoC=false) {
        data = data.map(r => {
            if (r.Filter) {
                let s = score.filter(s => s.DimensionNames === r.Filter && s.StepNames === r.Level_00)[0];
                if (s) {
                    r.Filter_Rank = s.Dimension_interest_rank.toString()
                }
            }
            return r
        })
        if (coc && scoreCoC) {
            coc = coc.map(r => {
                if (r.Filter) {
                    let s = scoreCoC.filter(s => s.DimensionNames === r.Filter && s.StepNames === r.Level_00)[0];
                    if (s) {
                        r.Filter_Rank = s.Dimension_interest_rank.toString()
                    }
                }
                return r
            })
        }
    }
    __unmount(comparison, comparisons) {
        let keys = Object.keys(this.__core__.solutions.compare.table);
        if (Array.isArray(this.container)) {
            keys.forEach(async function(k, i) {
                if (comparison !== k && comparisons.indexOf(k) === -1) {
                    if (this.instance[k]) {
                        this.instance[k].unmount()
                    }
                    // Remove useless comparison
                    delete this.__core__.solutions.compare.table[k]
                    this.container[i].remove();
                }
            }.bind(this))
        } else {
            this.instance.unmount();
            this.container.remove();
        }
    }
    update(comparison=false) {
        this.__core__.__settings__.configuration.waterfall.cards.root = this.__core__.__settings__.inputs.totalStepName !== '' ? this.__core__.__settings__.inputs.totalStepName : this.__core__.__settings__.metrics[this.__core__.__settings__.metrics.length - 1]
        this.__core__.__settings__.configuration.waterfall.axis.unit = this.__core__.__settings__.inputs.totalStepUnit
        let comparisonNumber = Object.keys(this.__core__.solutions.compare.table).length
        if (comparisonNumber <= 2) {
            if (Array.isArray(this.instance)) {
                this.instance = this.instance[Object.keys(this.instance)[0]]
            }
            if (this.instance && (comparisonNumber === 1 || (comparisonNumber === 2 && this.instance.__configuration.coc))) {
                this.instance.setColors(DataMaColorsManager.getWaterfallColors())
                this.instance.title(this.__title(0))
                this.instance.subtitle(this.__subtitle(0), this.__subtitle(1))
                this.instance.update();
            } else if (this.instance && comparisonNumber === 2 && !this.instance.__configuration.coc) {
                let {data, coc} = this.__getWaterfallData();
                this.instance.unmount()
                this.instance.setColors(DataMaColorsManager.getWaterfallColors())
                let score = this.__getWaterfallScore(data, comparison), scoreCoC;
                if (coc) {
                    scoreCoC = this.__getWaterfallScore(coc, comparison);
                }
                this.instance.setScore(score, scoreCoC)
                this.instance.setData({
                    source: data,
                    comparison: coc,
                    drill_down_dimension: this.instance.__drill_down_dimension,
                    drill_down: this.instance.__drill_down
                }, score)
                this.instance.title(this.__title(0))
                this.instance.subtitle(this.__subtitle(0), this.__subtitle(1))
            } else {
                this.render()
            }
        } else {
            if (comparison && this.instance[comparison]) {
                this.instance[comparison].setColors(DataMaColorsManager.getWaterfallColors())
                this.instance[comparison].title(this.__title(comparison))
                this.instance[comparison].subtitle(this.__subtitle(comparison))
                this.instance[comparison].update();
            } else {
                if (Array.isArray(this.instance)) {
                    DataMaLog.warning('Compare Waterfall module : Updating all comparison...')
                    this.__core__.__timer__.start('DataMaLight.Compare.modules.waterfall.update')
                    Object.keys(this.instance).forEach(comparison => {
                        DataMaLog.info('Compare Waterfall module : updating ' + comparison + '...')
                        this.__core__.__timer__.start('DataMaLight.Compare.modules.waterfall.update.' + comparison)
                        this.instance[comparison].setColors(DataMaColorsManager.getWaterfallColors())
                        this.instance[comparison].title(this.__title(Object.keys(this.__core__.solutions.compare.table).indexOf(comparison)))
                        this.instance[comparison].subtitle(this.__subtitle(Object.keys(this.__core__.solutions.compare.table).indexOf(comparison)))
                        this.instance[comparison].update();
                        this.__core__.__timer__.stop('DataMaLight.Compare.modules.waterfall.update.' + comparison)
                    })
                    this.__core__.__timer__.stop('DataMaLight.Compare.modules.waterfall.update')
                } else {
                    if (this.instance instanceof DataMaWaterfall) {
                        this.instance.unmount()
                        delete this.instance
                        this.container.remove()
                        delete this.container
                        this.render();
                    } else {
                        DataMaLog.error('Compare Waterfall module : There is no comparison to update')
                    }
                }
            }
        }
    }
    __renderSettings(container, settings, instance) {
        let actionsManager = new DataMaWaterfallActions({
            id: 'datama-light-waterfall-v2-settings',
            core: this.__core__,
            list: settings,
            name: 'Waterfall',
            instance: instance
        });
        container.prepend(actionsManager.render())
        return actionsManager;
    }
    render() {
        this.__core__.__settings__.configuration.waterfall.cards.root = this.__core__.__settings__.inputs.totalStepName !== '' ? this.__core__.__settings__.inputs.totalStepName : this.__core__.__settings__.metrics[this.__core__.__settings__.metrics.length - 1]
        this.__core__.__settings__.configuration.waterfall.axis.unit = this.__core__.__settings__.inputs.totalStepUnit
        if (this.__core__.solutions.compare.table) {
            let comparison = Object.keys(this.__core__.solutions.compare.table)
            if (comparison.length <= 2) {
                this.container = DataMaUtils.getNode('div', 'datama-light-waterfall-v2', ['datama-module'], this.__core__.__nodes__.modules)
                let {data, coc} = this.__getWaterfallData();
                let score = this.__getWaterfallScore(data), scoreCoC;
                if (coc) scoreCoC = this.__getWaterfallScore(coc);
                this.__addRank(data, coc, score, scoreCoC)
                this.instance = this.__boot(this.container.id, {data, score}, {data: coc, score: scoreCoC})
                setTimeout(() => {
                    this.__renderSettings(this.container, this.__core__.__settings__.configuration.waterfall, this.instance);
                })
            } else {
                if (!Array.isArray(this.container)) this.container = []
                if (!Array.isArray(this.instance)) this.instance = []
                comparison.forEach((c, i) => {
                    if (!this.container[i] || this.container[i].id !== 'datama-light-waterfall-v2-' + c.hash() + '-' + i) {
                        this.container[i] = DataMaUtils.getNode('div', 'datama-light-waterfall-v2-' + c.hash() + '-' + i, ['datama-module'], this.__core__.__nodes__.modules);
                    }
                    try {
                        this.__core__.__timer__.start('DataMaLight.Compare.modules.waterfall.render.' + c)
                        let {data} = this.__getWaterfallData(c);
                        let score = this.__getWaterfallScore(data, c);
                        this.__addRank(data, false, score, false)
                        this.instance[c] = new DataMaWaterfall({
                            dataset: data,
                            comparison: null,
                            target: this.container[i].id,
                            score: score,
                            filter: {Filter_Rank: '1'},
                            d3: d3,
                            drill_down: 'Steps then Dimensions',
                            configuration: this.__core__.__settings__.configuration.waterfall,
                            shortcut: false
                        })
                        this.instance[c].setColors(DataMaColorsManager.getWaterfallColors())
                        this.instance[c].draw()
                        this.instance[c].title(this.__title(Object.keys(this.__core__.solutions.compare.table).indexOf(c)))
                        this.instance[c].subtitle(this.__subtitle(Object.keys(this.__core__.solutions.compare.table).indexOf(c)))
                        this.instance[c].update()
                        this.__core__.__timer__.stop('DataMaLight.Compare.modules.waterfall.render.' + c)
                    } catch (e) {
                        DataMaLog.error(e)
                    }
                })
            }
        }
    }

    __boot(id, {data, score}, coc, index=0) {
        let instance = false;
        try {
            this.__core__.__timer__.start('DataMaLight.Compare.modules.waterfall.render')
            instance = new DataMaWaterfall({
                dataset: data,
                comparison: coc.data,
                target: id,
                score: score,
                filter: {Filter_Rank: '1'},
                d3: d3,
                drill_down: 'Steps then Dimensions',
                configuration: this.__core__.__settings__.configuration.waterfall,
                shortcut: false
            })
            instance.setColors(DataMaColorsManager.getWaterfallColors())
            instance.draw()
            instance.title(this.__title(index))
            instance.subtitle(this.__subtitle(index))
            instance.update()
            this.__core__.__timer__.stop('DataMaLight.Compare.modules.waterfall.render')
        } catch (e) {
            DataMaLog.error(e)
        }
        return instance;
    }
    unmount() {
        if (Array.isArray(this.instance)) {
            let comparison = Object.keys(this.__core__.solutions.compare.table)
            return comparison.map(c => {
                return this.instance[c].unmount();
            })
        } else if (this.instance instanceof DataMaWaterfall) {
            this.instance.unmount()
        } else {
            DataMaLog.error('Waterfall : Nothing to unmount')
        }
    }
    static getWaterfallDefaultConfiguration() {
        return {
            debug: false,
            baseWidth: -1,
            baseHeight: -1,
            padding: {
                t: 0,
                b: 0,
                l: 0,
                r: 0
            },
            fonts: {
                size: 12,
                family: 'Montserrat, Arial, sans-serif',
                tick: {
                    x: {
                        // X Ticks anchor, can be:
                        // - null|start|middle|end
                        // If set to false, ticks will be placed around the X line
                        anchor: null
                    }
                }
            },
            bars: {
                texts: {
                    top: true,
                    label: true
                },
                hover: {
                    points: false,
                    impact: false,
                    variation: false,
                    extremum: false
                },
                remain: 4,
                links: true,
                minHeight: 2,
                // Transition delay
                transition: 1500,
                depthPadding: 10,
                depthRadius: 5
            },
            display: {
                primary: {
                    column: 'Value',
                    formatting: {
                        arrows: false,
                        colors: false,
                        bars: true
                    }
                },
                available: [
                    'Pts_gap_disp',
                    'Impact_disp',
                    'Top_Line_Label',
                    'RatioStart_disp',
                    'RatioEnd_disp'
                ],
                secondary: [
                    {
                        column: 'Impact_disp',
                        formatting: {
                            arrows: false,
                            colors: false,
                            bars: false
                        },
                        hoverOnly: false,
                        hidden: false
                    },
                    {
                        column: 'Top_Line_Label',
                        formatting: {
                            arrows: false,
                            colors: true,
                            bars: false
                        },
                        hoverOnly: false,
                        hidden: false
                    },
                    {
                        column: 'Pts_gap_disp',
                        formatting: {
                            arrows: false,
                            colors: true,
                            bars: false
                        },
                        hoverOnly: false,
                        hidden: false
                    }
                ]
            },
            cards: {
                width: 200,
                height: 100,
                numberOfChildToFetch: 4,
                exploration: 'hierarchy' // Can be 'top'
            },
            bubbles: {
                size: {
                    min: 100,
                    max: 200
                },
                // Child range expansion ratio from parent range
                // Value may be between 1.5 and 2 for readability
                scaleOfZoom: 2,
                higherInterestIsFar: false,
                // Weight repartition take into account N depth of children or only 1
                weightFromParentOnly: false,
                // Do bubbles are scaled by their values
                scaledSizing: false,
                // Allow to choose how hierarchy will grow
                firstLevelRepartition: 360,
                startPosition: 'top',
                noDepth: false,
                // Do not edit
                __position: {
                    bottom: 0,
                    "bottom-right": 45,
                    right: 90,
                    "top-right": 135,
                    top: 180,
                    "top-left": 225,
                    left: 270,
                    "bottom-left": 315
                },
                numberOfChildToFetch: 4
            },
            scale: {
                // Padding arround min & max values when y axis is crop
                padding: .025,
                refer: 'view'//can be : view|source, default is 'source' (source has no effect, axes begin to zero)
            },
            axis: {
                reverse: false
            },
            explore: {
                // Depth of zoom, -1 mean to the deeper level
                depthOfZoom: -1,
                stack: ['Filter_Rank', 'Filter'],
                levels: ['Level_00', 'Level_01', 'Level_02'],
                current: 'default',
                openBarByDefault: false
            },
            plot: 'waterfall',
            value: 'Value',
            // Dimensions Weights
            weights: {},
            comparison: {
                side: 'horizontal',
                allowAutoJoin: true,
                translate: {
                    x: 10,
                    y: 0
                }
            }
        }
    }
    __getWaterfallData(comparison=false) {
        // .map() IS USE TO DISABLE IMPACT IN POINTS
        if (!comparison) {
            let keys = Object.keys(this.__core__.solutions.compare.table);
            if (keys.length === 1) {
                return {
                    data: this.__core__.solutions.compare.table[keys[0]].filter(e => e.Level_00 !== this.__core__.__settings__.inputs.totalStepName).map(e => ({...e, Pts_gap: null}))
                }
            } else if (keys.length === 2) {
                return {
                    data: this.__core__.solutions.compare.table[keys[0]].filter(e => e.Level_00 !== this.__core__.__settings__.inputs.totalStepName).map(e => ({...e, Pts_gap: null})),
                    coc: this.__core__.solutions.compare.table[keys[1]].filter(e => e.Level_00 !== this.__core__.__settings__.inputs.totalStepName).map(e => ({...e, Pts_gap: null}))
                }
            }
        } else {
            return {
                data: this.__core__.solutions.compare.table[comparison].filter(e => e.Level_00 !== this.__core__.__settings__.inputs.totalStepName).map(e => ({...e, Pts_gap: null}))
            }
        }
    }
    __title() {
        let title;
        if (DATAMA_MATH_OPERATORS.filter(o => o !== '*').every(o => this.__core__.__settings__.inputs.formula.indexOf(o) === -1)) {
            if (this.__core__.__settings__.inputs.totalStepName && this.__core__.__settings__.inputs.totalStepName !== '') {
                title = this.__core__.__settings__.inputs.totalStepName;
            } else {
                title = this.__core__.__settings__.steps[this.__core__.__settings__.steps.length - 1].numerator
            }
        } else {
            title = this.__core__.__settings__.inputs.totalStepName
        }
        return title
    }
    __subtitle(comparisonIndex) {
        if (this.__core__.__settings__.inputs.context[comparisonIndex]) {
            let type = this.__core__.__settings__.meta[Array.isArray(this.__core__.__settings__.inputs.context) ? this.__core__.__settings__.inputs.context[comparisonIndex] : this.__core__.__settings__.inputs.context].type;
            let start = Array.isArray(this.__core__.__settings__.inputs.start) && Array.isArray(this.__core__.__settings__.inputs.start[0]) ? this.__core__.__settings__.inputs.start[comparisonIndex] : this.__core__.__settings__.inputs.start
            let end = Array.isArray(this.__core__.__settings__.inputs.end) && Array.isArray(this.__core__.__settings__.inputs.end[0]) ? this.__core__.__settings__.inputs.end[comparisonIndex] : this.__core__.__settings__.inputs.end
            let filter = ''
            let hasFilterArray = typeof this.__core__.__settings__.inputs.filters === 'object' && this.__core__.__settings__.inputs.filters != null;
            let currentFilter = this.__core__.__settings__.inputs.filters[this.__core__.__settings__.inputs.context[comparisonIndex]+'-'+comparisonIndex]
            if (hasFilterArray && currentFilter) {
                let {dimension, type, values} = this.__core__.__settings__.inputs.filters[this.__core__.__settings__.inputs.context[comparisonIndex]+'-'+comparisonIndex]
                let valuesLength = values.length - 3
                filter = `, filtered on ${dimension} ${type} ${Array.isArray(values) ? values.filter((v, i) => i < 3).join(', ') : values.substring(0, 15)}${Array.isArray(values) ? (valuesLength > 0 ? '... (+' + valuesLength + ')' : '') : values.length > 15 ? '...' : ''}`
            }
            if (type === 'date') {
                start = start.join(' to ')
                end = end.join(' to ')
            } else {
                start = start.join(', ')
                end = end.join(', ')
            }
            let result = end
                + ' (End) vs '
                + start
                + ' (Start)'
                + filter
            return result;
        }
        return null
    }
    __getWaterfallScore(data, comparison) {
        let steps = data.map(r => r.Filter_Level_00).filter(d => d && d !== '').unique()
        return steps.map(s => {
            // let dimensions = data.filter(r => r.Filter_Level_00 === s).map(r => r.Filter).filter(d => d && d !== '').unique()
            let dimensions = this.__core__.__settings__.dimensions
            let keys = Object.keys(this.__core__.solutions.compare.table);
            let comparisonIndex = keys.indexOf(comparison);
            if (!Array.isArray(this.__core__.__settings__.inputs.context)) {
                let compareDimension = this.__core__.__settings__.inputs.context
                dimensions = dimensions.filter(d => d !== compareDimension)
            } else {
                let compareDimension = this.__core__.__settings__.inputs.context[comparisonIndex]
                dimensions = dimensions.filter(d => d !== compareDimension)
            }
            return dimensions.map(d => {
                let obj;
                let interest = data.filter(r => r.Filter === d && r.Filter_Level_00 === s && r.Level_02 && r.Level_02 !== '')[0];
                if (interest && !interest.disabled) {
                    obj = {
                        Interest_Score: interest.Dimension_Interest,
                        StepNames: interest.Filter_Level_00,
                        DimensionNames: d,
                        focus: this.__core__.__settings__.steps.filter(step => step.name === s)[0].focus === d
                    }
                } else {
                    obj = {
                        Interest_Score: 0,
                        StepNames: s,
                        DimensionNames: d,
                        focus: false,
                        disabled: true
                    }
                }
                return obj;
            })
                .filter(e => e)
                .sort((a, b) => a.focus ? -1 : (b.focus ? 1 : b.Interest_Score - a.Interest_Score))
                .map((score, i) => ({...score, Dimension_interest_rank: i + 1}))
                .map((e, i) => this.__core__.__settings__.privilege.max !== -1 && i >= this.__core__.__settings__.privilege.max - 1 ? {...e, Interest_Score: 0, focus: false, disabled: true} : e)
        }).flat().filter(s => s);
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaCompare.js project project-deep-sky
 */
const DATAMA_MATH_OPERATORS = ['+', '-', '/', '*', '%', '^'];

class DataMaCompare {
    constructor(core) {
        this.__core__ = core
    }
    init() {
        this.__core__.__timer__.start('DataMaLight.Compare.init')
        this.__core__.__notifications__.notify({id: 'boot-compare', html: '<p>Computing clusters...</p>', progress: 0})
        return this.__makeStartEndCluster().then(comparison => {
            // Unmount unloaded comparison
            if (this.__core__.solutions.compare.table) {
                Object.keys(this.__core__.solutions.compare.table)
                    .reverse()
                    .forEach((k, i, s) => {
                        if (comparison.indexOf(k) === -1) {
                            if (this.__core__.solutions.compare.table) delete this.__core__.solutions.compare.table[k]
                            if (this.__core__.solutions.compare.simulation) delete this.__core__.solutions.compare.simulation[k]
                            if (this.__core__.solutions.compare.transpose) delete this.__core__.solutions.compare.transpose[k]
                            if (this.__core__.solutions.compare.clusters) delete this.__core__.solutions.compare.clusters[k]
                            if (this.__core__.solutions.compare.startEndCluster) delete this.__core__.solutions.compare.startEndCluster[k]
                            if (this.__core__.solutions.compare.startEndStepsValue) delete this.__core__.solutions.compare.startEndStepsValue[k]
                            if (this.__core__.solutions.compare?.modules?.waterfall?.instance && this.__core__.solutions.compare?.modules?.waterfall?.instance[k]) {
                                if (this.__core__.solutions.compare.modules.waterfall.instance[k]) {
                                    this.__core__.solutions.compare.modules.waterfall.instance[k].unmount();
                                    delete this.__core__.solutions.compare.modules.waterfall.instance[k];
                                }
                                if (this.__core__.solutions.compare.modules.waterfall.container[s.length - (1 + i)]) {
                                    this.__core__.solutions.compare.modules.waterfall.container[s.length - (1 + i)].remove()
                                    this.__core__.solutions.compare.modules.waterfall.container.splice(s.length - (1 + i), 1)
                                }
                            }
                        }
                    })
            }
            return comparison.map(c => {
                this.__core__.__timer__.start('DataMaLight.Compare.init.' + c)
                if (this.__core__.__settings__.dimensions.length === 1) {
                    this.__core__.__notifications__.update('boot-compare', '<p>Computing first level...</p>', 1)
                } else {
                    this.__core__.__notifications__.update('boot-compare', '<p>Computing first level...</p>', (1 / (this.__core__.__settings__.dimensions.length - 1)) / 2)
                }
                this.__transpose(c);
                this.__simulate(c);
                let result = this.__makeComparisonTable(c, comparison).finally(() => {
                    setTimeout(() => {
                        this.__core__.__notifications__.update('boot-compare', '<p>Computation done</p>', 1)
                    })
                })
                this.__core__.__timer__.stop('DataMaLight.Compare.init.' + c)
                this.__core__.__notifications__.update('boot-compare', '<p>Computing sub levels...</p>', (1 / (this.__core__.__settings__.dimensions.length - 1)))
                return result;
            })
        });
    }
    boot(moduleName) {
        if (!this.__core__.solutions.compare.modules) {
            this.__core__.solutions.compare.modules = {}
        }
        if (moduleName) {
            if (moduleName === 'waterfall') {
                this.__core__.solutions.compare.modules.waterfall = new DataMaCompareWaterfallModule(this.__core__)
                this.__core__.solutions.compare.modules.waterfall.render();
            }
        }
    }
    unmount() {
        if (this.__core__.solutions.compare) {
            if (this.__core__.solutions.compare.modules) {
                Object.keys(this.__core__.solutions.compare.modules).forEach(element => this.__core__.solutions.compare.modules[element].unmount())
            }
            Object.keys(this.__core__.solutions.compare).filter(e => e !== '__core__').forEach(element => this.__core__.solutions.compare[element].unmount ? this.__core__.solutions.compare[element].unmount() : delete this.__core__.solutions.compare[element])
        }
    }
    __makeStartEndCluster() {
        return new Promise((resolve, reject) => {
            let compareDimension = this.__core__.__settings__.inputs.context;
            if (!this.__core__.solutions.compare.startEndCluster) this.__core__.solutions.compare.startEndCluster = {}
            if (!this.__core__.solutions.compare.startEndStepsValue) this.__core__.solutions.compare.startEndStepsValue = {}
            if (Array.isArray(compareDimension)) {
                // Multiple comparison
                try {
                    compareDimension.forEach((comparisonDimension, comparisonIndex) => {
                        this.__core__.__timer__.start('DataMaLight.Compare.init.startEndCluster.' + comparisonDimension)
                        let columnMetaData = this.__core__.__settings__.meta[this.__core__.__settings__.inputs.context[comparisonIndex]]
                        // Apply comparison filter
                        let startEnd = SourceMutator.filter(this.__core__.common.source.clean, this.__core__.__settings__.inputs.filters[comparisonDimension+'-'+comparisonIndex])
                            // Prepare base data
                            .map(e => ({
                                ...e,
                                isStartEnd: DataMaUtils.valueInRange(
                                    e[comparisonDimension],
                                    this.__core__.__settings__.inputs.start[comparisonIndex],
                                    columnMetaData.type
                                ) ? 'Start' : (
                                    DataMaUtils.valueInRange(
                                        e[comparisonDimension],
                                        this.__core__.__settings__.inputs.end[comparisonIndex],
                                        columnMetaData.type
                                    ) ? 'End' : null
                                )})).filter(e => e.isStartEnd)
                        this.__core__.solutions.compare.startEndCluster[comparisonDimension+'_datama_comparison_'+comparisonIndex] = SourceMutator.groupBy(
                            startEnd,
                            [
                                'isStartEnd',
                                ...this.__core__.__settings__.dimensions.filter(d => d !== this.__core__.__settings__.inputs.context)
                            ],
                            DataMaUtils.convertArrayToKeyObject(this.__core__.__settings__.metrics, 'sum')
                        )
                        this.__core__.solutions.compare.startEndStepsValue[comparisonDimension+'_datama_comparison_'+comparisonIndex] = SourceMutator.groupBy(this.__core__.solutions.compare.startEndCluster[comparisonDimension+'_datama_comparison_'+comparisonIndex], ['isStartEnd'], DataMaUtils.convertArrayToKeyObject(this.__core__.__settings__.metrics, 'sum')).map(row => {
                            let obj = {
                                cluster: row.isStartEnd,
                                name: this.__core__.__settings__.inputs[row.isStartEnd.toLowerCase()][comparisonIndex].join(columnMetaData.type === 'date' ? ' to '.translate() : ', ')
                            };
                            this.__core__.__settings__.steps.forEach(step => obj[step.name] = row[step.numerator] / (row[step.denominator] || 1))
                            if (this.__core__.__settings__.steps.length > 1) {
                                obj[this.__core__.__settings__.inputs.totalStepName || 'total'] = DataMath.resolvePostfix(this.__core__.__settings__.__formulaPostFix__, DATAMA_MATH_OPERATORS, this.__core__.__settings__.steps.map(({numerator, denominator}) => row[numerator] / (row[denominator] || 1)));
                            } else {
                                obj[this.__core__.__settings__.inputs.totalStepName || 'total'] = obj[this.__core__.__settings__.steps[0].name]
                            }
                            return obj;
                        })
                        this.__core__.solutions.compare.startEndStepsValue[comparisonDimension+'_datama_comparison_'+comparisonIndex]
                            .sort((a, b) => {
                                if (a.cluster === 'Start') {
                                    return 1
                                } else {
                                    return -1
                                }
                            })
                        this.__core__.__timer__.stop('DataMaLight.Compare.init.startEndCluster.' + comparisonDimension)
                    })
                    resolve(compareDimension.map((c,i)=>(c+'_datama_comparison_'+i)))
                } catch (e) {
                    reject(e)
                }
            } else {
                try {
                    this.__core__.__timer__.start('DataMaLight.Compare.init.startEndCluster.' + compareDimension)
                    let columnMetaData = this.__core__.__settings__.meta[this.__core__.__settings__.inputs.context]
                    // Single comparison
                    let startEnd = this.__core__.common.source.clean.map(e => ({
                        ...e,
                        isStartEnd: DataMaUtils.valueInRange(
                            e[compareDimension],
                            this.__core__.__settings__.inputs.start,
                            columnMetaData.type
                        ) ? 'Start' : (
                            DataMaUtils.valueInRange(
                                e[compareDimension],
                                this.__core__.__settings__.inputs.end,
                                columnMetaData.type
                            ) ? 'End' : null
                        )})).filter(e => e.isStartEnd)
                    this.__core__.solutions.compare.startEndCluster[compareDimension+'_datama_comparison_0'] = SourceMutator.groupBy(
                        startEnd,
                        [
                            'isStartEnd',
                            ...this.__core__.__settings__.dimensions.filter(d => d !== this.__core__.__settings__.inputs.context)
                        ],
                        DataMaUtils.convertArrayToKeyObject(this.__core__.__settings__.metrics, 'sum')
                    )
                    this.__core__.solutions.compare.startEndStepsValue[compareDimension+'_datama_comparison_0'] = SourceMutator.groupBy(
                        this.__core__.solutions.compare.startEndCluster[compareDimension+'_datama_comparison_0'],
                        [
                            'isStartEnd'
                        ],
                        DataMaUtils.convertArrayToKeyObject(this.__core__.__settings__.metrics, 'sum')
                    ).map(row => {
                        let obj = {
                            cluster: row.isStartEnd,
                            name: this.__core__.__settings__.inputs[row.isStartEnd.toLowerCase()].join(columnMetaData.type === 'date' ? ' to '.translate() : ', ')
                        };
                        this.__core__.__settings__.steps.forEach(step => obj[step.name] = row[step.numerator] / (row[step.denominator] || 1))
                        if (this.__core__.__settings__.steps.length > 1) {
                            obj[this.__core__.__settings__.inputs.totalStepName || 'total'] = DataMath.resolvePostfix(this.__core__.__settings__.__formulaPostFix__, DATAMA_MATH_OPERATORS, this.__core__.__settings__.steps.map(({numerator, denominator}) => row[numerator] / (row[denominator] || 1)));
                        } else {
                            obj[this.__core__.__settings__.inputs.totalStepName || 'total'] = obj[this.__core__.__settings__.steps[0].name]
                        }
                        return obj;
                    })
                    this.__core__.solutions.compare.startEndStepsValue[compareDimension+'_datama_comparison_0'].sort((a, b) => {
                        if (a.cluster === 'Start') {
                            return 1
                        } else {
                            return -1
                        }
                    })
                    this.__core__.__timer__.stop('DataMaLight.Compare.init.startEndCluster.' + compareDimension)
                    resolve([compareDimension+'_datama_comparison_0'])
                } catch (e) {
                    reject(e)
                }
            }
        })
    }
    __transpose(comparison='default') {
        if (!this.__core__.solutions.compare.transpose) this.__core__.solutions.compare.transpose = {}
        if (!this.__core__.solutions.compare.clusters) this.__core__.solutions.compare.clusters = {}
        this.__core__.__timer__.start('DataMaLight.Compare.init.transpose.' + comparison)
        let stepTotalName = this.__core__.__settings__.inputs.totalStepName ? this.__core__.__settings__.inputs.totalStepName : (this.__core__.__settings__.steps[this.__core__.__settings__.steps.length - 1].numerator + ' (Total)');
        let clusters = this.__core__.solutions.compare.startEndStepsValue[comparison].map(e => e.name);
        // Transposed view
        this.__core__.solutions.compare.transpose[comparison] = [...this.__core__.__settings__.steps.map(s => s.name), stepTotalName].map(step => {
            let i = 0;
            // Get step name
            let obj = {
                name: step
            };
            // Get step value for each clusters
            while (i < clusters.length) {
                let cluster = this.__core__.solutions.compare.startEndStepsValue[comparison].filter(r => r.name === clusters[i])[0];
                obj[cluster.name] = cluster[step === stepTotalName ? stepTotalName : step]
                i++;
            }
            return obj;
        })
        this.__core__.solutions.compare.clusters[comparison] = {
            start: this.__core__.solutions.compare.startEndStepsValue[comparison].filter(e => e.cluster === 'Start')[0].name,
            end: this.__core__.solutions.compare.startEndStepsValue[comparison].filter(e => e.cluster === 'End')[0].name
        };
        this.__core__.__timer__.stop('DataMaLight.Compare.init.transpose.' + comparison)
    }
    __simulate(comparison='default') {
        this.__core__.__timer__.start('DataMaLight.Compare.init.simulate.' + comparison)
        let stepTotalName = this.__core__.__settings__.inputs.totalStepName ? this.__core__.__settings__.inputs.totalStepName : (this.__core__.__settings__.steps[this.__core__.__settings__.steps.length - 1].numerator + ' (Total)');
        if (!this.__core__.solutions.compare.simulation) this.__core__.solutions.compare.simulation = {}
        // Simulation of waterfall
        this.__core__.solutions.compare.simulation[comparison] = this.__core__.solutions.compare.transpose[comparison]
            .map((element) => {
                let obj = {...element}
                let elements = this.__core__.__settings__.steps
                    .map(s => s.name === obj.name ? this.__core__.solutions.compare.startEndStepsValue[comparison][0][s.name] : this.__core__.solutions.compare.startEndStepsValue[comparison][1][s.name]);
                obj.whatIf = DataMath.resolvePostfix(this.__core__.__settings__.__formulaPostFix__, DATAMA_MATH_OPERATORS, elements)
                // Clean ?
                obj.primaryRatioStart = this.__core__.solutions.compare.startEndStepsValue[comparison]
                    .filter(e => e.name === this.__core__.solutions.compare.clusters[comparison].start)[0][stepTotalName]
                // CLean ?
                obj.primaryRatioEnd = this.__core__.solutions.compare.startEndStepsValue[comparison]
                    .filter(e => e.name === this.__core__.solutions.compare.clusters[comparison].end)[0][stepTotalName]
                // Clean ?
                obj.gap = obj.whatIf - obj.primaryRatioStart
                // Clean ?
                obj.gapAbs = Math.abs(obj.gap)
                obj.actualGap = obj.primaryRatioEnd - obj.primaryRatioStart
                obj.stepGap = obj[this.__core__.solutions.compare.clusters[comparison].end] - obj[this.__core__.solutions.compare.clusters[comparison].start]
                obj.percentChange = (obj[this.__core__.solutions.compare.clusters[comparison].end] / obj[this.__core__.solutions.compare.clusters[comparison].start]) - 1
                return obj
            })
        this.__core__.solutions.compare.simulation[comparison] = this.__core__.solutions.compare.simulation[comparison].map((element) => {
            let obj = {...element}
            obj.sumGap = this.__core__.solutions.compare.simulation[comparison].map(e => e.gap).reduce((a, b) => parseFloat(a) + parseFloat(b))
            obj.sumGapAbs = this.__core__.solutions.compare.simulation[comparison].map(e => e.gapAbs).reduce((a, b) => Math.abs(parseFloat(a)) + Math.abs(parseFloat(b)))
            obj.redistributedGap = obj.gap + (((obj.actualGap - obj.sumGap) * obj.gapAbs) / obj.sumGapAbs)
            obj.ptsGap = obj.redistributedGap / obj.primaryRatioStart
            obj.stepScaler = obj.redistributedGap / obj.stepGap
            return obj;
        })
        this.__core__.__timer__.stop('DataMaLight.Compare.init.simulate.' + comparison)
    }

    /**
     * Create whole waterfall table
     * @param comparison
     * @param comparisons
     * @return Promise
     * @private
     */
    __makeComparisonTable(comparison='default', comparisons=[]) {
        this.__core__.__timer__.start('DataMaLight.Compare.init.table.' + comparison)
        this.__core__.solutions.compare.__makeFirstLevel(comparison);
        this.__sortTable(comparison);
        let aggregation = DataMaUtils.convertArrayToKeyObject(this.__core__.__settings__.metrics, 'sum');
        let columnsToParse = this.__core__.__settings__.dimensions.filter(d => d !== this.__core__.__settings__.inputs.context);
        let promises = []
        if (columnsToParse.length) {
            columnsToParse.forEach((c, i) => {
                DataMaLog.info("Computing rows for [" + c + "]")
                promises.push(new Promise((resolve, reject) => {
                    // Make level 3
                    try {
                        let rows = this.__core__.solutions.compare.__makeComparisonTableByScope(comparison, ['isStartEnd', c], aggregation, i);
                        // Make level 2
                        let levelsForDimension = SourceMutator.groupBy(
                            rows,
                            ['Kind_Number', 'Level_00', 'Level_01'],
                            {Value: 'sum', Pts_gap: 'sum', Impact: 'sum'}
                        ).map(({...keys}) => ({...keys, Filter: c, Filter_Level_00: keys.Level_00, Level_02: '', Type: keys.Value >= 0 ? 'in' : 'out'}))
                        levelsForDimension.forEach((r, i, s) => {
                            s[i].Pts_gap_disp = s[i].Pts_gap.format()
                            s[i].Impact_disp = s[i].Impact.format({unit: (this.__core__.__settings__.inputs.totalStepUnit || '')})
                            s[i].Hover = this.__makeHover(r)
                        })
                        this.__core__.solutions.compare.table[comparison].push(...levelsForDimension, ...rows)
                        this.__sortTable(comparison);
                        resolve();
                        if (this.__core__.solutions.compare?.modules?.waterfall) {
                            this.__core__.solutions.compare.modules.waterfall.sync(comparison, comparisons, i === columnsToParse.length - 1);
                        }
                        DataMaLog.info("Append rows & sort with new dimension part [" + c + "]")
                    } catch (e) {
                        DataMaLog.error(e)
                        reject()
                    }
                }))
            });
        } else {
            if (this.__core__.solutions.compare?.modules?.waterfall) {
                this.__core__.solutions.compare.modules.waterfall.sync(comparison, comparisons, true);
            }
        }
        this.__core__.__timer__.stop('DataMaLight.Compare.init.table.' + comparison)
        return Promise.all(promises)
    }

    /**
     * Make waterfall rows for each dimensions
     * @param comparison
     * @param groups
     * @param aggregation
     * @param index
     * @return {T[]}
     * @private
     */
    __makeComparisonTableByScope(comparison='default', groups, aggregation, index) {
        this.__core__.__notifications__.update('boot-compare', '<p>Computing ' + groups[1] + '...</p>', (1 / (index + 1)))
        let rows = SourceMutator.groupBy(this.__core__.solutions.compare.startEndCluster[comparison], groups, aggregation)
        SourceMutator.addMissingCombinations(rows, Object.keys(aggregation), groups)
        let clusterAggregation = {};
        let on = this.__core__.__settings__.steps[this.__core__.__settings__.steps.length - 1].numerator;
        let stepTotalName = this.__core__.__settings__.inputs.totalStepName ? this.__core__.__settings__.inputs.totalStepName : (this.__core__.__settings__.steps[this.__core__.__settings__.steps.length - 1].numerator + ' (Total)');
        let stepTotal = {
            name: stepTotalName,
            numerator: this.__core__.__settings__.steps[this.__core__.__settings__.steps.length - 1].numerator,
            denominator: 1
        };
        clusterAggregation[on] = 'sum'
        let clusters = SourceMutator.clusterize(rows, clusterAggregation, this.__core__.__settings__.inputs.NumLimit, groups[1])
        let unpivot = rows.map(r => {
            let obj = {};
            obj[groups[0]] = r[groups[0]];
            Object.keys(aggregation).forEach(key => {
                obj[key] = r[key]
            });
            let filtered = clusters.filter(cluster => cluster['DataMa_Cluster__Prefix___' + groups[1]] === r[groups[1]]);
            if (filtered.length) {
                obj['DataMa_Cluster__Prefix___' + groups[1]] = filtered[0]['DataMa_Cluster__Prefix___' + groups[1]];
            } else {
                let filtered = clusters.filter(cluster => String(cluster['DataMa_Cluster__Prefix___' + groups[1]]).indexOf('Other (') === 0);
                obj['DataMa_Cluster__Prefix___' + groups[1]] = filtered[0]['DataMa_Cluster__Prefix___' + groups[1]];
            }

            return obj;
        })
        unpivot = SourceMutator.groupBy(unpivot, ['isStartEnd', 'DataMa_Cluster__Prefix___' + groups[1]], DataMaUtils.convertArrayToKeyObject(this.__core__.__settings__.metrics, 'sum'))
        unpivot = unpivot.map(obj => {
            ([...this.__core__.__settings__.steps, stepTotal]).forEach(step => {
                if (obj[step.denominator] === 0) {
                    obj[step.name + '_DataMaRatio'] = 0;
                } else {
                    obj[step.name + '_DataMaRatio'] = obj[step.numerator] / (obj[step.denominator] || 1)
                }
                obj[step.name + '_DataMaDenom'] = obj[step.denominator]
                obj[step.name + '_DataMaNum'] = obj[step.numerator]
            })
            return obj;
        }).map(r => {
            let result = [];
            ([...this.__core__.__settings__.steps, stepTotal])
                .filter(s => s.exclude && Array.isArray(s.exclude) && s.exclude.indexOf(groups[1]) === -1)
                .forEach(step => {
                    let obj = {};
                    obj[groups[0]] = r[groups[0]];
                    obj['DataMa_Cluster__Prefix___' + groups[1]] = r['DataMa_Cluster__Prefix___' + groups[1]]
                    obj.Step = step.name
                    obj.NumName = step.numerator
                    obj.DenomName = step.denominator
                    obj.Ratio = r[step.name + '_DataMaRatio'] || ''
                    obj.Denom = r[step.name + '_DataMaDenom'] || ''
                    obj.Num = r[step.name + '_DataMaNum'] || ''
                    result.push(obj)
                })
            return result;
        }).flat()
        unpivot = unpivot.map(r => {
            if (typeof r.Denom === 'number') {
                let group = SourceMutator.groupBy(unpivot, [groups[0], 'Step'], {Denom: 'sum'})
                r.Mix = r.Denom / group.filter(g => g.isStartEnd === r.isStartEnd && g.Step === r.Step)[0].Denom
            } else {
                if (r.DenomName === '' || !r.DenomName) {
                    // Fictive denominator (first step)
                    r.Mix = 1
                } else {
                    // The step has a valid denominator but a segment is not represented in Start or End
                    r.Mix = 0
                }
            }
            return r
        })
        let pivot = SourceMutator.pivot(unpivot, 'isStartEnd', ['DataMa_Cluster__Prefix___' + groups[1], 'Step', 'DenomName'], ['Ratio', 'Mix', 'Denom', 'Num'])
        pivot = pivot.map(row => {
            row.RatioPercentCh = (row.RatioEnd / row.RatioStart) - 1
            row.RatioEndTotal = this.__core__.solutions.compare.startEndStepsValue[comparison].filter(cl => cl.cluster === 'End')[0][row.Step]
            row.RatioDriver = (row.RatioEnd - row.RatioStart) * row.MixStart
            row.MixDriver = (row.MixEnd - row.MixStart) * (row.RatioStart - row.RatioEndTotal)
            row.BothDriver = (row.MixEnd - row.MixStart) * (row.RatioEnd - row.RatioStart)
            return row
        })
        pivot = pivot.map(row => {
            row.Ratio_Driver_Total = pivot.filter(e => e.Step === row.Step).map(e => e.RatioDriver).reduce((a, b) => a + b);
            row.Mix_Driver_Total = pivot.filter(e => e.Step === row.Step).map(e => e.MixDriver).reduce((a, b) => a + b);
            row.RatioDriver_with_Covar = row.RatioDriver + row.BothDriver * Math.abs(row.Ratio_Driver_Total) / (Math.abs(row.Ratio_Driver_Total) + Math.abs(row.Mix_Driver_Total))
            row.MixDriver_with_Covar = row.MixDriver + row.BothDriver * Math.abs(row.Mix_Driver_Total) / (Math.abs(row.Ratio_Driver_Total) + Math.abs(row.Mix_Driver_Total))
            row.TotalDriver = row.RatioDriver + row.MixDriver + row.BothDriver
            row.Mix_Driver_Share = row.Mix_Driver_Total / (row.Ratio_Driver_Total + row.Mix_Driver_Total)
            if (row.DenomName !== '') {
                row.Split_Mix_and_Perf = this.__core__.__settings__.inputs.Split_Mix_and_Perf === 'Never' ? 0 : (this.__core__.__settings__.inputs.Split_Mix_and_Perf === 'Always' ? 1 : (row.Mix_Driver_Share > 0.25 ? 1 : 0))
            } else {
                row.Split_Mix_and_Perf = 0
            }
            row.Value_1 = row.Split_Mix_and_Perf === 0 ? (row.TotalDriver > 0 ? row.TotalDriver : 0) : row.MixDriver_with_Covar
            row.Value_2 = row.Split_Mix_and_Perf === 0 ? (row.TotalDriver <= 0 ? row.TotalDriver : 0) : row.RatioDriver_with_Covar
            let unit = ((row.Step === this.__core__.__settings__.inputs.totalStepName ? (this.__core__.__settings__.inputs.totalStepUnit || '') : this.__core__.__settings__.steps.filter(s => row.Step === s.name)[0].unit) || '');
            row.RatioStart_disp = (row.RatioStart * (unit === '%' ? 100 : 1)).format({unit})
            row.RatioEnd_disp = (row.RatioEnd * (unit === '%' ? 100 : 1)).format({unit})
            row.MixStart_disp = row.MixStart.format()
            row.MixEnd_disp = row.MixEnd.format()
            return row
        })
        let double = pivot.map(r => {
            let simulated = this.__core__.solutions.compare.simulation[comparison].filter(e => e.name === r.Step)[0];
            let obj = {
                ...r,
                Kind: 'Mix',
                Kind_Number: r.Split_Mix_and_Perf === 0 ? 3 : 1,
                Value_detailed: r.Value_1,
                StepScaler: simulated?.stepScaler || 1,
                StepGap: simulated?.stepGap || 1,
                RedistributedGap: simulated?.redistributedGap || 1,
                Step_Percent_ch: simulated?.percentChange || 1,
                ConsideredDimension: groups[1],
                Percent_ch: r.RatioEnd / r.RatioStart - 1
            }
            obj.Level_01 = obj.Kind_Number === 3 ? (groups[1] + ' ()') : (obj.Kind_Number === 1 ? groups[1] + ' Mix' : groups[1])
            obj.Value = obj.Value_detailed * obj.StepScaler
            obj.Value_for_ranking = (obj.Value_detailed * (obj.Value < 0 ? -1 : (obj.Value > 0 ? 1 : 0)))
            obj.Var_vs_average = obj.Percent_ch / obj.Step_Percent_ch
            obj.Variation_avg = (obj.Percent_ch / obj.Step_Percent_ch).toFixed(2);
            obj.Variation_percent = (obj.Percent_ch * 100).toFixed(2)
            if (this.__core__.__settings__.inputs.segment_complement === 'Variation relative to avg') {
                obj.Variation = obj.Variation_avg;
            } else {
                obj.Variation = obj.Variation_percent;
            }
            obj.Segment = obj['DataMa_Cluster__Prefix___' + groups[1]];
            obj.Pts_gap = obj.Value / this.__core__.solutions.compare.transpose[comparison][this.__core__.solutions.compare.transpose[comparison].length - 1][this.__core__.solutions.compare.clusters[comparison].start]
            obj.Pts_gap_disp = obj.Pts_gap.format()
            obj.Segment_Interest = (obj.Split_Mix_and_Perf === 1 && obj.Kind === 'Mix' && obj.Kind_Number === 1 ? (obj.Value) : ((Math.max(obj.Var_vs_average, 1) - 1) * obj.Value)) / obj.RedistributedGap
            return obj;
        })
        double.push(...pivot.map(r => {
            let simulated = this.__core__.solutions.compare.simulation[comparison].filter(e => e.name === r.Step)[0];
            let obj = {
                ...r,
                Kind: 'Perf',
                Kind_Number: r.Split_Mix_and_Perf === 0 ? 4 : 2,
                Value_detailed: r.Value_2,
                StepScaler: simulated?.stepScaler || 1,
                StepGap: simulated?.stepGap || 1,
                RedistributedGap: simulated?.redistributedGap || 1,
                Step_Percent_ch: simulated?.percentChange || 1,
                ConsideredDimension: groups[1],
                Percent_ch: r.RatioEnd / r.RatioStart - 1
            }
            obj.Level_01 = obj.Kind_Number === 4 ? (groups[1] + ' ()') : (obj.Kind_Number === 2 ? groups[1] + ' Perf' : groups[1])
            obj.Value = obj.Value_detailed * obj.StepScaler
            obj.Value_for_ranking = (obj.Value_detailed * (obj.Value < 0 ? -1 : (obj.Value > 0 ? 1 : 0)))
            obj.Variation_avg = (obj.Percent_ch / obj.Step_Percent_ch).toFixed(2);
            obj.Variation_percent = (obj.Percent_ch * 100).toFixed(2)
            if (this.__core__.__settings__.inputs.segment_complement === 'Variation relative to avg') {
                obj.Variation = obj.Variation_avg;
            } else {
                obj.Variation = obj.Variation_percent;
            }
            obj.Var_vs_average = obj.Percent_ch / obj.Step_Percent_ch
            obj.Segment = obj['DataMa_Cluster__Prefix___' + groups[1]];
            obj.Pts_gap = obj.Value / this.__core__.solutions.compare.transpose[comparison][this.__core__.solutions.compare.transpose[comparison].length - 1][this.__core__.solutions.compare.clusters[comparison].start]
            obj.Pts_gap_disp = obj.Pts_gap.format()
            obj.Segment_Interest = ((Math.max(obj.Var_vs_average, 1) - 1) * obj.Value) / obj.RedistributedGap
            return obj;
        }))
        return double.map(e => {
            let topLineValue,
                type,
                value,
                percent = true;
            if (e.Split_Mix_and_Perf === 1 && e.Kind === 'Mix' && e.Kind_Number === 1) {
                percent = false;
                topLineValue = ((e.MixEnd - e.MixStart) * 100)
                value = e.Pts_gap
            } else {
                topLineValue = (e.Percent_ch * 100)
                value = e.Percent_ch
            }
            type = value >= 0 ? 'in' : 'out';
            // Make level 3
            let obj = {
                Main_Filter: 'Steps',
                Main_Filter_Type: 'Steps then Dimensions',
                Main_Filter_Interest: 1,
                Main_Filter_Rank: 0,
                Filter_Level_00: e.Step,
                Filter: e.ConsideredDimension,
                Level_00: e.Step,
                Level_01: e.Level_01,
                Level_02: e.Segment.toString(),
                Type: type,
                Value: e.Value,
                Variation: e.Variation,
                Variation_avg: e.Variation_avg,
                Variation_percent: e.Variation_percent,
                Top_Line_Label: topLineValue.format({percent, unit: !percent ? 'pts' : ''}),
                Kind_Number: e.Kind_Number,
                Label: e.Value.format(),
                Pts_gap: e.Pts_gap,
                Pts_gap_disp: e.Pts_gap_disp,
                Impact: e.Value,
                Impact_disp: e.Value.format({unit: (this.__core__.__settings__.inputs.totalStepUnit || '')}),
                RatioStart: e.RatioStart,
                RatioEnd: e.RatioEnd,
                RatioStart_disp: e.RatioStart_disp,
                RatioEnd_disp: e.RatioEnd_disp,
                MixStart_disp: e.MixStart_disp,
                MixEnd_disp: e.MixEnd_disp,
                MixStart: e.MixStart,
                MixEnd: e.MixEnd,
                MixDelta: e.MixEnd - e.MixStart,
                NumStart: e.NumStart,
                NumEnd: e.NumEnd,
                DenomEnd: e.DenomEnd,
                DenomStart: e.DenomStart,
                denom: e.denom,
                line_1: e.Step,
                line_2: '',
                line_3: '',
                Step_Percent_ch: e.Step_Percent_ch,
                Value_for_ranking: e.Split_Mix_and_Perf === 0 ? Math.abs(e.Value) : e.Value * e.RedistributedGap,
                Var_vs_average: e.Var_vs_average,
                Segment_Interest: e.Segment_Interest,
                Segment: e.Segment,
                RedistributedGap: e.RedistributedGap,
                Split_Mix_and_Perf: e.Split_Mix_and_Perf,
                Kind: e.Kind,

            }
            obj.Hover = this.__makeHover(obj, e)
            return obj;
        }).sort((a, b) => {
            let index_a = this.__core__.__settings__.steps.map(s => s.name).indexOf(a.Level_00)
            let index_b = this.__core__.__settings__.steps.map(s => s.name).indexOf(b.Level_00)
            if (index_a === -1) {
                index_a = this.__core__.__settings__.steps.length;
            }
            if (index_b === -1) {
                index_b = this.__core__.__settings__.steps.length;
            }
            if (a.extremum || b.extremum) {
                if (a.extremum) {
                    return -1
                } else {
                    return 1
                }
            }
            if (a.Level_00 === b.Level_00) {
                if (a.Level_01 === b.Level_01 && a.Level_02 !== b.Level_02) {
                    if (a.Kind_Number === b.Kind_Number) {
                        index_a = b.Value_for_ranking
                        index_b = a.Value_for_ranking
                    } else {
                        index_a = b.Kind_Number
                        index_b = a.Kind_Number
                    }
                } else {
                    index_a = this.__core__.__settings__.dimensions.map(s => s.name).indexOf(a.Filter)
                    index_b = this.__core__.__settings__.dimensions.map(s => s.name).indexOf(b.Filter)
                }
            }
            return index_a < index_b ? -1 : 1
        }).map((r,i,s) => {
            let otherSegments = s.filter(rf => rf.Filter_Level_00 === r.Filter_Level_00 && rf.Filter === r.Filter);
            r.Dimension_Interest = otherSegments.map(o => o.Segment_Interest).reduce((acc, e) => (acc + e))
            return r;
        });
    }

    /**
     * Sort waterfall table to the correct order
     * @param comparison
     * @private
     */
    __sortTable(comparison='default') {
        this.__core__.solutions.compare.table[comparison] = this.__core__.solutions.compare.table[comparison]
            .sort((a, b) => {
                let index_a = this.__core__.__settings__.steps.map(s => s.name).indexOf(a.Level_00)
                let index_b = this.__core__.__settings__.steps.map(s => s.name).indexOf(b.Level_00)
                if (index_a === -1) {
                    index_a = this.__core__.__settings__.steps.length;
                }
                if (index_b === -1) {
                    index_b = this.__core__.__settings__.steps.length;
                }
                if (a.extremum || b.extremum) {
                    if (a.extremum) {
                        if (a.extremum === 'Start') {
                            return -1
                        } else {
                            return 1;
                        }
                    } else {
                        if (b.extremum === 'Start') {
                            return 1
                        } else {
                            return -1;
                        }
                    }
                }
                if (a.Level_00 === b.Level_00) {
                    if (a.Level_01 === b.Level_01) {
                        if (a.Level_02 === b.Level_02) {
                            if (a.Kind_Number === b.Kind_Number) {
                                index_a = a.Value_for_ranking
                                index_b = b.Value_for_ranking
                            } else {
                                index_a = a.Kind_Number
                                index_b = b.Kind_Number
                            }
                        } else {
                            if (a.Level_02 === '') {
                                return -1
                            } else {
                                return 1
                            }
                        }
                    } else {
                        if (a.Level_01 === '') {
                            return -1
                        } else {
                            return 1
                        }
                    }
                }
                return index_a < index_b ? -1 : 1
            })
            .map((e, i) => ({...e, Row: (i + 1)}))
    }

    /**
     * Make nets bars
     * @param comparison
     * @return {*}
     * @private
     */
    __makeExtremumRows(comparison='default') {
        let barNets = this.__core__.solutions.compare.startEndStepsValue[comparison].map(extremum => {
            return {
                Main_Filter: 'Steps',
                Main_Filter_Type: 'Steps then Dimensions',
                Main_Filter_Rank: 0,
                Main_Filter_Interest: 1,
                extremum: extremum.cluster,
                Level_00: extremum.name,
                Type: 'net',
                Value: extremum[this.__core__.__settings__.inputs.totalStepName || 'total']
            }
        })
        barNets = barNets.map(e => {
            let start = barNets.filter(r => r.extremum === 'Start')[0],
                end = barNets.filter(r => r.extremum === 'End')[0],
                unit = (this.__core__.__settings__.inputs.totalStepUnit || ''),
                obj = e,
                percent = ((end.Value / start.Value) - 1) * 100;
            if (e.extremum === 'End') {
                e.Pts_gap = percent;
                e.Pts_gap_disp = (percent.toFixed(1) / 100).format() + 'pts';
                e.Impact = end.Value - start.Value
                e.Impact_disp = e.Impact.format({unit})
                e.Top_Line_Label = percent.format({percent: true});
                e.RatioStart = start.Value
                e.RatioEnd = end.Value
            } else {
                e.Pts_gap = 0;
                e.Pts_gap_disp = '+0pts';
                e.Top_Line_Label = '';
                e.RatioStart = '';
                e.RatioEnd = '';
            }
            // Input language
            e.Label = e.Value.format({unit})
            // Inputs digits
            // Input language
            e.RatioStart_disp = (e.RatioStart * (unit === '%' ? 100 : 1)).format({unit})
            // Input language
            e.RatioEnd_disp = (e.RatioEnd * (unit === '%' ? 100 : 1)).format({unit})
            e.Hover = this.__makeHover(obj)
            return obj;
        })
        return barNets
    }

    /**
     * Make first level bars
     * @param comparison
     * @return {*}
     * @private
     */
    __makeFirstLevelRows(comparison='default') {
        return this.__core__.solutions.compare.simulation[comparison].map((element, index) => {
            let obj = {};
            // Total unit of step
            let unit = (this.__core__.__settings__.inputs.totalStepUnit || '');
            if (
                // Steps is outside privilege
                this.__core__.__settings__.privilege.max > -1
                && index >= this.__core__.__settings__.privilege.max
                // Step is not Total step
                && index < this.__core__.solutions.compare.simulation[comparison].length - 1
            ) {
                obj.disabled = true;
            }
            obj.Main_Filter = 'Steps'
            obj.Main_Filter_Type = 'Steps then Dimensions'
            obj.Main_Filter_Interest = 1
            obj.Main_Filter_Rank = 0
            obj.Filter_Level_00 = element.name;
            obj.Level_00 = element.name;
            obj.Value = element.redistributedGap;
            obj.Type = element.redistributedGap >= 0 ? 'in' : 'out'
            // Input language
            obj.Kind_Number = '0'
            obj.Pts_gap = element.ptsGap
            // Input digits
            // Input language
            obj.Impact = obj.Value
            obj.RatioStart = element.stepGap
            obj.RatioEnd = element.stepGap
            if (!obj.disabled) {
                obj.Top_Line_Label = (element.percentChange * 100).format({percent: true})
                obj.Hover = this.__makeHover(obj, element, comparison)
                obj.Pts_gap_disp = (obj.Pts_gap * 100).format()
                obj.Impact_disp = obj.Value.format({unit})
                obj.Label = obj.Value.format()
            } else {
                obj.Pts_gap_disp = '?'
                obj.Impact_disp = '?'
                obj.Label = '?'
                obj.Top_Line_Label = '?'
                obj.Hover = 'Your license does not allow more than 2 calculated steps'
            }
            // Unit of step
            unit = ((element.name === this.__core__.__settings__.inputs.totalStepName ? (this.__core__.__settings__.inputs.totalStepUnit || '') : this.__core__.__settings__.steps.filter(s => element.name === s.name)[0].unit) || '');
            obj.RatioStart_disp = element.stepGap.format({unit, percent: unit === '%'})
            obj.RatioEnd_disp = element.stepGap.format({unit, percent: unit === '%'})
            return obj;
        })
    }

    /**
     * Make full first level (including net bars)
     * @param comparison
     * @private
     */
    __makeFirstLevel(comparison='default') {
        if (!this.__core__.solutions.compare.table) this.__core__.solutions.compare.table = {}
        let nets = this.__makeExtremumRows(comparison);
        let firstLevel = this.__makeFirstLevelRows(comparison);
        let rows = [
            ...nets,
            ...firstLevel
        ];
        rows = rows.map((r, i) => ({...r, Row: i + 1}));
        this.__core__.solutions.compare.table[comparison] = rows;
    }

    /**
     * HOVER PARTS
     */

    /**
     * Return formatted hover for 2nd level
     * @param row
     * @param element
     * @return {string}
     * @private
     */
    __makeHoverThirdLevel(row, element) {
        let stepTotalName = this.__core__.__settings__.inputs.totalStepName || this.__core__.__settings__.metrics[this.__core__.__settings__.metrics.length - 1];
        if (row.Split_Mix_and_Perf === 1 && row.Kind === 'Mix' && row.Kind_Number === 1) {
            return `<p><b>${row.Segment}</b></p><p>Mix: <b>${((element.MixStart * 100).format({percent: true, sign: false})) + ' to ' + ((element.MixEnd * 100).format({percent: true, sign: false}))}</b> (${row.Top_Line_Label})</p><p>${'This has an impact on <b>stepTotalName</b> of <b>impactValue</b>'.translate({stepTotalName, impactValue: row.Impact_disp})}</p>`;
        }
        let complement = '';
        if (this.__core__.__settings__.inputs.segment_complement === 'Variation relative to avg') {
            complement = '(x' + parseFloat(row.Variation_avg).format({sign: false}) + ')'
        } else if (this.__core__.__settings__.inputs.segment_complement === 'Variation %') {
            complement = '(' + parseFloat(row.Variation_percent).format({percent: true}) + ')'
        }
        return `<p><b>${row.Segment} ${complement}</b></p><p>${'<b>step</b>: <b>ratioStart to ratioEnd</b> (variationPercent Ch, xvariationRatio vs average change)'.translate({step: element.Step, ratioStart: element?.RatioStart_disp !== '' ? element?.RatioStart_disp : NaN, ratioEnd: element?.RatioEnd_disp !== '' ? element?.RatioEnd_disp : NaN, variationPercent: row.Top_Line_Label, variationRatio: element.Variation})}</p><p>${'This has an impact on <b>stepTotalName</b> of <b>impactValue</b>'.translate({stepTotalName, impactValue: row.Impact_disp})}</p>`;
    }

    /**
     * Return formatted hover for 2nd level
     * @param row
     * @return {string}
     * @private
     */
    __makeHoverSecondLevel(row) {
        let stepTotalName = this.__core__.__settings__.inputs.totalStepName || this.__core__.__settings__.steps[this.__core__.__settings__.steps.length - 1].numerator;
        let stepTotalUnit = (this.__core__.__settings__.inputs.totalStepUnit || '')
        return `<p><b>${row.Level_01}</b> ${'in'.translate()} <b>${row.Filter_Level_00}</b></p><p>${'This has an impact on <b>stepTotalName</b> of <b>impactValue</b>'.translate({stepTotalName, impactValue: row.Value.format({unit: stepTotalUnit})})}</p>`
    }

    /**
     * Return formatted hover for 1st level
     * @param row
     * @param element
     * @param comparison
     * @return {string}
     * @private
     */
    __makeHoverFirstLevel(row, element, comparison) {
        let stepTotalName = this.__core__.__settings__.inputs.totalStepName || this.__core__.__settings__.steps[this.__core__.__settings__.steps.length - 1].numerator;
        let stepTotalUnit = (this.__core__.__settings__.inputs.totalStepUnit || '')
        let stepUnit = element.name === stepTotalName ? stepTotalUnit : (this.__core__.__settings__.steps.filter(s => element.name === s.name)[0].unit || '')
        let variation = element[this.__core__.solutions.compare.clusters[comparison].end] - element[this.__core__.solutions.compare.clusters[comparison].start]
        let comparisonIndex = Object.keys(this.__core__.solutions.compare.startEndStepsValue).indexOf(comparison);
        let comparisonDimension = (Array.isArray(this.__core__.__settings__.inputs.context) ? this.__core__.__settings__.inputs.context : [this.__core__.__settings__.inputs.context])[comparisonIndex];
        let comparisonEnd = (Array.isArray(this.__core__.__settings__.inputs.context) ? this.__core__.__settings__.inputs.end : [this.__core__.__settings__.inputs.end])[comparisonIndex]
        let comparisonStart = (Array.isArray(this.__core__.__settings__.inputs.context) ? this.__core__.__settings__.inputs.start : [this.__core__.__settings__.inputs.start])[comparisonIndex]
        let formattedComparisonStart, formattedComparisonEnd;
        if (this.__core__.__settings__.meta[comparisonDimension].type === 'date') {
            formattedComparisonStart = comparisonStart.join(' to '.translate())
            formattedComparisonEnd = comparisonEnd.join(' to '.translate())
        } else {
            formattedComparisonStart = comparisonStart.join(', ')
            formattedComparisonEnd = comparisonEnd.join(', ')
        }
        return `<p><b>${element.name}</b> ${('has variation by').translate({variation: (variation >= 0 ? 'increased' : 'decreased').translate()})} <b>${(element.percentChange * 100).format({percent: true})}</b>, ${'from <b>fromValue</b> to <b>toValue</b>'.translate({fromValue: (element[this.__core__.solutions.compare.clusters[comparison].start] * (stepUnit === '%' ? 100 : 1)).format({unit: stepUnit, sign: false}) + ' (' + formattedComparisonStart + ')', toValue: (element[this.__core__.solutions.compare.clusters[comparison].end] * (stepUnit === '%' ? 100 : 1)).format({unit: stepUnit, sign: false}) + ' (' + formattedComparisonEnd + ')'})})</p><p>${'This has an impact on <b>stepTotalName</b> of <b>impactValue</b>'.translate({stepTotalName, impactValue: row.Value.format({unit: stepTotalUnit})})}</p>`;
    }

    /**
     * Return formatted hover for root level
     * @param row
     * @return {string}
     * @private
     */
    __makeHoverRootLevel(row) {
        return row.Level_00 + ': ' + row.Label
    }

    /**
     * Make hover for given object & element
     * @param obj
     * @param element
     * @param comparison
     * @return {string}
     * @private
     */
    __makeHover(obj, element=null, comparison=null) {
        let result = '';
        let depth = [obj.Level_00, obj.Level_01, obj.Level_02].filter(e => e && e !== '').length;
        if (obj.Type === 'net') depth--;
        switch (depth) {
            case 3:
                result = this.__makeHoverThirdLevel(obj, element);
                break;
            case 2:
                result = this.__makeHoverSecondLevel(obj);
                break;
            case 1:
                result = this.__makeHoverFirstLevel(obj, element, comparison);
                break;
            case 0:
                result = this.__makeHoverRootLevel(obj);
            default:
                break;
        }
        return result;
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaStartEnd.js project project-deep-sky
 */
class DataMaStartEnd extends DataMaRenderingComponentAbstract {
    __isMultiple() {
        return Array.isArray(this.__parameters__.core.__settings__.inputs.context)
    }
    __renderComparison({context, start, end}, id=false) {
        let container = this.get('div', this.__isMultiple() ? 'datama-start-end-' + context.hash() + '-' + id + '-container' : 'datama-start-end-' + context + '-' + id + '-container', ['p-2', 'mr-4', 'datama-start-end-container'])
        container.childNodes.forEach(n => n.remove())
        container.setAttribute('data-id', id)
        let contextInput, startInput, endInput;
        if (this.__isMultiple()) {
            contextInput = new DataMaInput({
                id: 'datama-start-end-context-' + context.hash() + '-' + id + '-context',
                key: id,
                type: 'select',
                items: this.__parameters__.core.__settings__.dimensions.map((d, i) => ({
                    text: d,
                    value: d,
                    active: this.__parameters__.core.__settings__.privilege.max === -1 || i < this.__parameters__.core.__settings__.privilege.max,
                    title: !this.__parameters__.core.__settings__?.license.valid ? 'Your license does not allow to use more than 2 dimensions for your analysis' : 'Select the dimension to compare on'
                })),
                list: this.__parameters__.core.__settings__.inputs.context,
                label: 'Compare by',
                callbacks: {
                    input: (context) => {
                        let {start, end} = this.__makeAutoContext(context);
                        this.__parameters__.core.__settings__.inputs.context[id] = context;
                        this.__parameters__.core.__settings__.inputs.start[id] = start;
                        this.__parameters__.core.__settings__.inputs.end[id] = end;
                        this.__parameters__.core.__datama__.needRecompute()
                        this.render()
                    }
                }
            }).render()
            if (this.__parameters__.core.__settings__.meta[context].type === 'date') {
                startInput = this.get('div', 'datama-context-start-container-' + context + '-' + id);
                startInput.append(
                    this.__renderClusterInputs({
                        id: 'datama-context-start-container-' + context.hash() + '-' + id + '-0',
                        key: 0,
                        items: this.__parameters__.core.__settings__.meta[context].unique,
                        list: this.__parameters__.core.__settings__.inputs.start[id],
                        type: this.__parameters__.core.__settings__.meta[context].type === 'date' ? 'date' : 'select',
                        multiple: this.__parameters__.core.__settings__.meta[context] !== 'date',
                        callbacks: {
                            input: (start) => {
                                this.__parameters__.core.__settings__.inputs.start[id][0] = start;
                                this.__parameters__.core.__datama__.needRecompute()
                            }
                        }
                    }),
                    this.__renderClusterInputs({
                        id: 'datama-context-start-container-' + context.hash() + '-' + id + '-1',
                        key: 1,
                        items: this.__parameters__.core.__settings__.meta[context].unique,
                        list: this.__parameters__.core.__settings__.inputs.start[id],
                        type: this.__parameters__.core.__settings__.meta[context].type === 'date' ? 'date' : 'select',
                        multiple: this.__parameters__.core.__settings__.meta[context] !== 'date',
                        callbacks: {
                            input: (start) => {
                                this.__parameters__.core.__settings__.inputs.start[id][1] = start;
                                this.__parameters__.core.__datama__.needRecompute()
                            }
                        }
                    })
                )
                endInput = this.get('div', 'datama-context-end-container-' + context + '-' + id);
                endInput.append(
                    this.__renderClusterInputs({
                        id: 'datama-context-end-container-' + context.hash() + '-' + id + '-0',
                        key: 0,
                        items: this.__parameters__.core.__settings__.meta[context].unique,
                        list: this.__parameters__.core.__settings__.inputs.end[id],
                        type: this.__parameters__.core.__settings__.meta[context].type === 'date' ? 'date' : 'select',
                        multiple: this.__parameters__.core.__settings__.meta[context] !== 'date',
                        callbacks: {
                            input: (end) => {
                                this.__parameters__.core.__settings__.inputs.end[id][0] = end;
                                this.__parameters__.core.__datama__.needRecompute()
                            }
                        }
                    }),
                    this.__renderClusterInputs({
                        id: 'datama-context-end-container-' + context.hash() + '-' + id + '-1',
                        key: 1,
                        items: this.__parameters__.core.__settings__.meta[context].unique,
                        list: this.__parameters__.core.__settings__.inputs.end[id],
                        type: this.__parameters__.core.__settings__.meta[context].type === 'date' ? 'date' : 'select',
                        multiple: this.__parameters__.core.__settings__.meta[context] !== 'date',
                        callbacks: {
                            input: (end) => {
                                this.__parameters__.core.__settings__.inputs.end[id][1] = end;
                                this.__parameters__.core.__datama__.needRecompute()
                            }
                        }
                    })
                )
            } else {
                startInput = this.__renderClusterInputs({
                    id: 'datama-context-start-container-' + context.hash() + '-' + id + '-0',
                    key: id,
                    items: this.__parameters__.core.__settings__.meta[context].unique,
                    list: this.__parameters__.core.__settings__.inputs.start,
                    type: this.__parameters__.core.__settings__.meta[context].type === 'date' ? 'date' : 'select',
                    multiple: this.__parameters__.core.__settings__.meta[context] !== 'date',
                    callbacks: {
                        input: (start) => {
                            this.__parameters__.core.__settings__.inputs.start[id] = start;
                            this.__parameters__.core.__datama__.needRecompute()
                        }
                    }
                })
                endInput = this.__renderClusterInputs({
                    id: 'datama-context-end-container-' + context.hash() + '-' + id + '-0',
                    key: id,
                    items: this.__parameters__.core.__settings__.meta[context].unique,
                    list: this.__parameters__.core.__settings__.inputs.end,
                    type: this.__parameters__.core.__settings__.meta[context].type === 'date' ? 'date' : 'select',
                    multiple: this.__parameters__.core.__settings__.meta[context] !== 'date',
                    callbacks: {
                        input: (end) => {
                            this.__parameters__.core.__settings__.inputs.end[id] = end;
                            this.__parameters__.core.__datama__.needRecompute()
                        }
                    }
                })
            }
        } else {
            contextInput = new DataMaInput({
                id: 'datama-start-end-context-' + context.hash() + '-0-context',
                key: 'context',
                list: this.__parameters__.core.__settings__.inputs,
                type: 'select',
                items: this.__parameters__.core.__settings__.dimensions.map((d, i) => ({
                    text: d,
                    value: d,
                    active: this.__parameters__.core.__settings__.privilege.max === -1 || i < this.__parameters__.core.__settings__.privilege.max,
                    title: !this.__parameters__.core.__settings__?.license.valid ? 'Your license does not allow to use more than 2 dimensions for your analysis' : 'Select the dimension to compare on'
                })),
                label: 'Compare by',
                callbacks: {
                    input: (context) => {
                        let {start, end} = this.__makeAutoContext(context);
                        this.__parameters__.core.__settings__.inputs.context = context;
                        this.__parameters__.core.__settings__.inputs.start = start;
                        this.__parameters__.core.__settings__.inputs.end = end;
                        this.__parameters__.core.__datama__.needRecompute()
                        // this.__renderComparison({context, start, end}, id)
                        this.render();
                    }
                }
            }).render()
            if (this.__parameters__.core.__settings__.meta[context].type === 'date') {
                startInput = this.get('div', 'datama-context-start-container');
                startInput.append(
                    this.__renderClusterInputs({
                        id: 'datama-context-start-container-' + context.hash() + '-' + id + '-0',
                        key: 0,
                        items: this.__parameters__.core.__settings__.meta[context].unique,
                        list: this.__parameters__.core.__settings__.inputs.start,
                        type: this.__parameters__.core.__settings__.meta[context].type === 'date' ? 'date' : 'select',
                        multiple: this.__parameters__.core.__settings__.meta[context] !== 'date',
                        callbacks: {
                            input: (start) => {
                                this.__parameters__.core.__settings__.inputs.start[0] = start;
                                this.__parameters__.core.__datama__.needRecompute()
                            }
                        }
                    }),
                    this.__renderClusterInputs({
                        id: 'datama-context-start-container-' + context.hash() + '-' + id + '-1',
                        key: 1,
                        items: this.__parameters__.core.__settings__.meta[context].unique,
                        list: this.__parameters__.core.__settings__.inputs.start,
                        type: this.__parameters__.core.__settings__.meta[context].type === 'date' ? 'date' : 'select',
                        multiple: this.__parameters__.core.__settings__.meta[context] !== 'date',
                        callbacks: {
                            input: (start) => {
                                this.__parameters__.core.__settings__.inputs.start[1] = start;
                                this.__parameters__.core.__datama__.needRecompute()
                            }
                        }
                    })
                )
                endInput = this.get('div', 'datama-context-end-container');
                endInput.append(
                    this.__renderClusterInputs({
                        id: 'datama-context-end-container-' + context.hash() + '-' + id + '-0',
                        key: 0,
                        items: this.__parameters__.core.__settings__.meta[context].unique,
                        list: this.__parameters__.core.__settings__.inputs.end,
                        type: this.__parameters__.core.__settings__.meta[context].type === 'date' ? 'date' : 'select',
                        multiple: this.__parameters__.core.__settings__.meta[context] !== 'date',
                        callbacks: {
                            input: (end) => {
                                this.__parameters__.core.__settings__.inputs.end[0] = end;
                                this.__parameters__.core.__datama__.needRecompute()
                            }
                        }
                    }),
                    this.__renderClusterInputs({
                        id: 'datama-context-end-container-' + context.hash() + '-' + id + '-1',
                        key: 1,
                        items: this.__parameters__.core.__settings__.meta[context].unique,
                        list: this.__parameters__.core.__settings__.inputs.end,
                        type: this.__parameters__.core.__settings__.meta[context].type === 'date' ? 'date' : 'select',
                        multiple: this.__parameters__.core.__settings__.meta[context] !== 'date',
                        callbacks: {
                            input: (end) => {
                                this.__parameters__.core.__settings__.inputs.end[1] = end;
                                this.__parameters__.core.__datama__.needRecompute()
                            }
                        }
                    })
                )
            } else {
                startInput = this.__renderClusterInputs({
                    id: 'datama-context-start-container-' + context.hash() + '-' + id + '-0',
                    key: 'start',
                    items: this.__parameters__.core.__settings__.meta[context].unique,
                    list: this.__parameters__.core.__settings__.inputs,
                    type: this.__parameters__.core.__settings__.meta[context].type === 'date' ? 'date' : 'select',
                    multiple: this.__parameters__.core.__settings__.meta[context] !== 'date',
                    callbacks: {
                        input: (start) => {
                            this.__parameters__.core.__settings__.inputs.start = start;
                            this.__parameters__.core.__datama__.needRecompute()
                        }
                    }
                })
                endInput = this.__renderClusterInputs({
                    id: 'datama-context-end-container-' + context.hash() + '-' + id + '-0',
                    key: 'end',
                    items: this.__parameters__.core.__settings__.meta[context].unique,
                    list: this.__parameters__.core.__settings__.inputs,
                    type: this.__parameters__.core.__settings__.meta[context].type === 'date' ? 'date' : 'select',
                    multiple: this.__parameters__.core.__settings__.meta[context] !== 'date',
                    callbacks: {
                        input: (end) => {
                            this.__parameters__.core.__settings__.inputs.end = end;
                            this.__parameters__.core.__datama__.needRecompute()
                            this.__parameters__.core.__settings__.inputs.start = this.__parameters__.core.__settings__.inputs.start.filter(e => end.indexOf(e) === -1)
                            let inputStart = this.get('div', 'datama-context-start-container-' + context.hash() + '-' + id + '-0');
                            inputStart.__datama__.class.__value__ = this.__parameters__.core.__settings__.inputs.start
                            inputStart.__datama__.class.__elValue__.innerText = inputStart.__datama__.class.__getFormattedValue()
                            inputStart.__datama__.class.__parameters__.items = this.__parameters__.core.__settings__.meta[context].unique.filter(i => end.indexOf(i) === -1)
                            inputStart.__datama__.class.__renderSelectInputDropDown()
                        }
                    }
                })
            }
        }
        endInput.classList.add('mb-2')
        startInput.classList.add('mb-2')
        endInput.classList.add('datama-start-end-container')
        startInput.classList.add('datama-start-end-container')
        let vsContainer = this.get('div', 'datama-start-end-' + context + (this.__isMultiple() ? id : '0') + '-vs-container')
        let vs = this.get('label', 'datama-start-end-' + context + (this.__isMultiple() ? id : '0') + '-vs', ['datama-input-label', 'mb-2', 'mr-0'])
        let reverse = new DataMaButton({
            id: 'datama-start-end-' + context + (this.__isMultiple() ? id : '0') + '-reverse',
            icon: '',
            classList: ['ml-2', 'transparent'],
            title: 'Reverse Start & End',
            callbacks: {
                click: e => {
                    if (this.__parameters__.core.__settings__.meta[context].type === 'date') {
                        if (this.__isMultiple()) {
                            let tmp = JSON.parse(JSON.stringify(this.__parameters__.core.__settings__.inputs.end[id]));
                            this.__parameters__.core.__settings__.inputs.end[id] = this.__parameters__.core.__settings__.inputs.start[id];
                            this.__parameters__.core.__settings__.inputs.start[id] = tmp;
                        } else {
                            let tmp = JSON.parse(JSON.stringify(this.__parameters__.core.__settings__.inputs.end));
                            this.__parameters__.core.__settings__.inputs.end = this.__parameters__.core.__settings__.inputs.start;
                            this.__parameters__.core.__settings__.inputs.start = tmp;
                        }
                        let inputStart = [
                            this.get('div', 'datama-context-start-container-' + context.hash() + '-' + id + '-0'),
                            this.get('div', 'datama-context-start-container-' + context.hash() + '-' + id + '-1')
                        ];
                        let inputEnd = [
                            this.get('div', 'datama-context-end-container-' + context.hash() + '-' + id + '-0'),
                            this.get('div', 'datama-context-end-container-' + context.hash() + '-' + id + '-1')
                        ];
                        inputEnd.forEach((input, index) => {
                            if (this.__isMultiple()) {
                                input.value = this.__parameters__.core.__settings__.inputs.end[id][index]
                                input.__datama__.class.__value__ = this.__parameters__.core.__settings__.inputs.end[id][index]
                            } else {
                                input.value = this.__parameters__.core.__settings__.inputs.end[index]
                                input.__datama__.class.__value__ = this.__parameters__.core.__settings__.inputs.end[index]
                            }
                        })
                        inputStart.forEach((input, index) => {
                            if (this.__isMultiple()) {
                                input.value = this.__parameters__.core.__settings__.inputs.start[id][index]
                                input.__datama__.class.__value__ = this.__parameters__.core.__settings__.inputs.start[id][index]
                            } else {
                                input.value = this.__parameters__.core.__settings__.inputs.start[index]
                                input.__datama__.class.__value__ = this.__parameters__.core.__settings__.inputs.start[index]
                            }
                        })
                    } else {
                        let inputStart = this.get('div', 'datama-context-start-container-' + context.hash() + '-' + id + '-0');
                        let inputEnd = this.get('div', 'datama-context-end-container-' + context.hash() + '-' + id + '-0');
                        if (this.__isMultiple()) {
                            let tmp = JSON.parse(JSON.stringify(this.__parameters__.core.__settings__.inputs.end[id]));
                            this.__parameters__.core.__settings__.inputs.end[id] = this.__parameters__.core.__settings__.inputs.start[id];
                            this.__parameters__.core.__settings__.inputs.start[id] = tmp;
                            inputEnd.__datama__.class.__value__ = this.__parameters__.core.__settings__.inputs.end[id]
                            inputStart.__datama__.class.__value__ = this.__parameters__.core.__settings__.inputs.start[id]
                        } else {
                            let tmp = JSON.parse(JSON.stringify(this.__parameters__.core.__settings__.inputs.end));
                            this.__parameters__.core.__settings__.inputs.end = this.__parameters__.core.__settings__.inputs.start;
                            this.__parameters__.core.__settings__.inputs.start = tmp;
                            inputEnd.__datama__.class.__value__ = this.__parameters__.core.__settings__.inputs.end
                            inputStart.__datama__.class.__value__ = this.__parameters__.core.__settings__.inputs.start
                        }
                        inputEnd.__datama__.class.__elValue__.innerText = inputEnd.__datama__.class.__getFormattedValue()
                        inputEnd.__datama__.class.__parameters__.items = this.__parameters__.core.__settings__.meta[context].unique
                        inputEnd.__datama__.class.__renderSelectInputDropDown()
                        inputStart.__datama__.class.__elValue__.innerText = inputStart.__datama__.class.__getFormattedValue()
                        inputStart.__datama__.class.__parameters__.items = this.__parameters__.core.__settings__.meta[context].unique.filter(i => this.__parameters__.core.__settings__.inputs.end.indexOf(i) === -1)
                        inputStart.__datama__.class.__renderSelectInputDropDown()
                    }
                    this.__parameters__.core.__datama__.needRecompute()
                }
            }
        })
        vs.innerText = 'Vs.'
        vsContainer.append(reverse.render(), vs)
        container.append(contextInput, endInput, vsContainer, startInput)
        if (this.__isMultiple()) {
            let panels = new DataMaPanels({
                id: 'datama-start-end-advanced-panel-' + context + '-' + id,
                multiple: false,
                panels: [
                    new DataMaPanel({
                        title: 'Advanced',
                        contents: [
                            new DataMaInput({
                                id: 'datama-start-end-advanced-panel-' + context + (this.__isMultiple() ? id : '0') + 'filter-dimension',
                                key: 'dimension',
                                list: this.__parameters__.core.__settings__.inputs.filters[context+'-'+id] || {type: 'in', values: '', dimension: ''},
                                label: 'Filter by',
                                type: 'select',
                                items: this.__parameters__.core.__settings__.dimensions.map((d, i) => ({
                                    text: d,
                                    value: d,
                                    active: this.__parameters__.core.__settings__.privilege.max === -1 || i < this.__parameters__.core.__settings__.privilege.max,
                                    title: !this.__parameters__.core.__settings__?.license.valid ? 'Your license does not allow to use more than 2 dimensions for your analysis' : 'Select the dimension to compare on'
                                })).filter(e => e.value !== context),
                                callbacks: {
                                    input: (value) => {
                                        if (!this.__parameters__.core.__settings__.inputs.filters[context+'-'+id]) {
                                            this.__parameters__.core.__settings__.inputs.filters[context+'-'+id] = {}
                                        }
                                        this.__parameters__.core.__settings__.inputs.filters[context+'-'+id].dimension = value;
                                        this.__parameters__.core.__settings__.inputs.filters[context+'-'+id].type = 'in';
                                        this.__parameters__.core.__settings__.inputs.filters[context+'-'+id].values = [];
                                        let inputDimension = this.get('div', 'datama-start-end-advanced-panel-' + context + (this.__isMultiple() ? id : '0') + 'filter-dimension');
                                        let inputValues = this.get('div', 'datama-start-end-advanced-panel-' + context + (this.__isMultiple() ? id : '0') + 'filter-values');
                                        let inputType = this.get('div', 'datama-start-end-advanced-panel-' + context + (this.__isMultiple() ? id : '0') + 'filter-type');
                                        inputValues.__datama__.class.__parameters__.items = this.__parameters__.core.__settings__.meta[value].unique
                                        inputValues.__datama__.class.__parameters__.list = this.__parameters__.core.__settings__.inputs.filters[context+'-'+id]
                                        inputValues.__datama__.class.__renderSelectInputDropDown()
                                        inputType.__datama__.class.__parameters__.list = this.__parameters__.core.__settings__.inputs.filters[context+'-'+id]
                                        inputType.__datama__.class.__renderSelectInputDropDown()
                                        inputDimension.__datama__.class.__parameters__.list = this.__parameters__.core.__settings__.inputs.filters[context+'-'+id]
                                        inputDimension.__datama__.class.__renderSelectInputDropDown()
                                        this.__parameters__.core.__datama__.needRecompute()
                                    }
                                }
                            }),
                            new DataMaInput({
                                id: 'datama-start-end-advanced-panel-' + context + (this.__isMultiple() ? id : '0') + 'filter-type',
                                key: 'type',
                                list: this.__parameters__.core.__settings__.inputs.filters[context+'-'+id],
                                label: 'Operator',
                                type: 'select',
                                items: [
                                    {
                                        text: 'In',
                                        value: 'in'
                                    },
                                    {
                                        text: 'Not in',
                                        value: 'not'
                                    },
                                    {
                                        text: 'Is',
                                        value: 'is'
                                    }
                                ],
                                callbacks: {
                                    input: (value) => {
                                        this.__parameters__.core.__settings__.inputs.filters[context+'-'+id].type = value;
                                        let inputValues = this.get('div', 'datama-start-end-advanced-panel-' + context + (this.__isMultiple() ? id : '0') + 'filter-values');
                                        let inputType = this.get('div', 'datama-start-end-advanced-panel-' + context + (this.__isMultiple() ? id : '0') + 'filter-type');
                                        inputValues.__datama__.class.__parameters__.multiple = value !== 'is'
                                        if (Array.isArray(this.__parameters__.core.__settings__.inputs.filters[context+'-'+id].values) && !inputValues.__datama__.class.__parameters__.multiple) {
                                            this.__parameters__.core.__settings__.inputs.filters[context+'-'+id].values = this.__parameters__.core.__settings__.inputs.filters[context+'-'+id].values[0] || ''
                                        } else if (inputValues.__datama__.class.__parameters__.multiple) {
                                            if (this.__parameters__.core.__settings__.inputs.filters[context+'-'+id].values != null
                                                && this.__parameters__.core.__settings__.inputs.filters[context+'-'+id].values !== ''
                                                && !Array.isArray(this.__parameters__.core.__settings__.inputs.filters[context+'-'+id].values)
                                            ) {
                                                this.__parameters__.core.__settings__.inputs.filters[context+'-'+id].values = [this.__parameters__.core.__settings__.inputs.filters[context+'-'+id].values]
                                            } else {
                                                this.__parameters__.core.__settings__.inputs.filters[context+'-'+id].values = []
                                                inputValues.__datama__.class.__value__ = []
                                            }
                                        }
                                        inputValues.__datama__.class.__value__ = this.__parameters__.core.__settings__.inputs.filters[context+'-'+id].values
                                        inputValues.__datama__.class.__elValue__.innerText = inputValues.__datama__.class.__getFormattedValue()
                                        inputValues.__datama__.class.__renderSelectInputDropDown()
                                        inputType.__datama__.class.__renderSelectInputDropDown()
                                        this.__parameters__.core.__datama__.needRecompute()
                                    }
                                }
                            }),
                            new DataMaInput({
                                id: 'datama-start-end-advanced-panel-' + context + (this.__isMultiple() ? id : '0') + 'filter-values',
                                key: 'values',
                                list: this.__parameters__.core.__settings__.inputs.filters[context+'-'+id],
                                label: 'Values',
                                type: 'select',
                                items: [],
                                multiple: true,
                                callbacks: {
                                    input: (value) => {
                                        this.__parameters__.core.__settings__.inputs.filters[context+'-'+id].values = value;
                                        this.__parameters__.core.__datama__.needRecompute()
                                    }
                                }
                            })
                        ]
                    })
                ]
            })
            let divider = DataMaUtils.divider('span', false, 'datama-start-end-' + context + '-0-divider');
            divider.classList.add('mb-2', 'mt-2')
            container.append(divider, panels.render())
        }
        if (id && id > 0) {
            this.__addDeleteComparisonButton(container)
        }
        return container;
    }
    __renderComparisonFilters(node) {

    }
    __renderClusterInputs({id, key, items, list, type, callbacks}) {
        return new DataMaInput({
            id,
            key,
            items,
            list,
            type,
            callbacks,
            multiple: type !== 'date'
        }).render()
    }
    __addDeleteComparisonButton(node) {
        node.append(
            new DataMaButton({
                text: ' Delete',
                props: {
                    title: 'Remove this comparison',
                    id: node.id + '-delete-button'
                },
                classList: [
                    'transparent'
                ],
                callbacks: {
                    click: (e) => {
                        e.preventDefault();
                        let id = parseInt(node.getAttribute('data-id'))
                        if (id) {
                            this.__parameters__.core.__settings__.inputs.context.splice(id, 1)
                            this.__parameters__.core.__settings__.inputs.start.splice(id, 1)
                            this.__parameters__.core.__settings__.inputs.end.splice(id, 1)
                            if (this.__parameters__.core.__settings__.inputs.context.length === 1) {
                                this.__parameters__.core.__settings__.inputs.context = this.__parameters__.core.__settings__.inputs.context[0]
                                this.__parameters__.core.__settings__.inputs.start = this.__parameters__.core.__settings__.inputs.start[0]
                                this.__parameters__.core.__settings__.inputs.end = this.__parameters__.core.__settings__.inputs.end[0]
                            }
                            this.__parameters__.core.__datama__.needRecompute()
                        }
                        this.render()
                    }
                }
            }).render()
        )
    }
    __renderNewComparisonButton(node) {
        if (!this.__nodes__.button) {
            this.__nodes__.button = (new DataMaButton({
                id: 'datama-start-end-new-comparison',
                text: 'Add comparison',
                props: {
                    title: !this.__parameters__.core.__settings__?.license.valid ? 'Your current license does not allow to add others comparison' : 'Add another comparison',
                },
                classList: [
                    'transparent',
                    'p-2'
                ],
                disabled: !this.__parameters__.core.__settings__?.license.valid,
                callbacks: {
                    click: (e) => {
                        e.preventDefault();
                        if (Array.isArray(this.__parameters__.core.__settings__.inputs.context)) {
                            let contexts = this.__getContext();
                            // Add an element to the comparison array
                            this.__parameters__.core.__settings__.inputs.context.push(contexts[contexts.length - 1].context);
                            let {start, end} = this.__makeAutoContext(contexts[contexts.length - 1].context);
                            this.__parameters__.core.__settings__.inputs.start.push(start);
                            this.__parameters__.core.__settings__.inputs.end.push(end);
                        } else {
                            // Create the comparison array
                            this.__parameters__.core.__settings__.inputs.context = [this.__parameters__.core.__settings__.inputs.context]
                            this.__parameters__.core.__settings__.inputs.start = [this.__parameters__.core.__settings__.inputs.start]
                            this.__parameters__.core.__settings__.inputs.end = [this.__parameters__.core.__settings__.inputs.end]
                            let contexts = this.__getContext();
                            // Add the new element
                            this.__parameters__.core.__settings__.inputs.context.push(contexts[contexts.length - 1].context);
                            let {start, end} = this.__makeAutoContext(contexts[contexts.length - 1].context);
                            this.__parameters__.core.__settings__.inputs.start.push(start);
                            this.__parameters__.core.__settings__.inputs.end.push(end);
                        }
                        this.__parameters__.core.__datama__.needRecompute()
                        this.render()
                    }
                }
            })).render();
            node.append(this.__nodes__.button)
        }
    }
    render() {
        if (Object.keys(this.__nodes__).length) Object.keys(this.__nodes__).forEach(n => {
            if (this.__nodes__[n] instanceof Element) {
                this.__nodes__[n].remove()
                delete this.__nodes__[n]
            } else if (Array.isArray(this.__nodes__[n])) {
                this.__nodes__[n].forEach(n => {
                    if (this.__nodes__[n] instanceof Element) {
                        this.__nodes__[n].remove()
                        delete this.__nodes__[n]
                    }
                })
            } else if (typeof this.__nodes__[n] === 'object' && this.__nodes__[n]) {
                Object.keys(this.__nodes__[n]).forEach(k => {
                    if (this.__nodes__[n][k] instanceof Element) {
                        this.__nodes__[n][k].remove()
                        delete this.__nodes__[n][k]
                    }
                })
            }
        })
        let node = this.get('div', 'datama-start-end', [])
        let container = this.get('div', 'datama-start-end-content', ['d-flex', 'justify-start', 'mb-4'])
        let contexts = this.__getContext();
        contexts.forEach(({context, start, end}, i) => {
            if (context !== '' && start?.length && end?.length) this.__nodes__[context+i] = this.__renderComparison({context, start, end}, i)
        })
        container.append(...Object.keys(this.__nodes__).map(n => this.__nodes__[n] instanceof Element ? this.__nodes__[n] : null).filter(e => e))
        node.append(container)
        this.__renderNewComparisonButton(container)
        this.__node__ = node;
        return node;
    }
    __getContext() {
        let { context, start, end } = this.__parameters__.core.__settings__.inputs;
        let result = []
        if (Array.isArray(context)) {
            context.forEach((c, i) => result.push({context: c, start: start[i], end: end[i]}))
        } else {
            result.push({context, start, end})
        }
        return result;
    }
    /**
     * Compute Start End default value for a given dimension column
     * @param dimension
     * @returns {{start: *, end: *}}
     * @private
     */
    __makeAutoContext(dimension=false) {
        if (!dimension) {
            dimension = this.__parameters__.core.__settings__.dimensions[0];
        }
        let size = parseInt(this.__parameters__.core.__settings__.meta[dimension].unique.length / 2) - 1;
        let start = [
            this.__parameters__.core.__settings__.meta[dimension].unique[0],
            this.__parameters__.core.__settings__.meta[dimension].unique[size]
        ].sort((a, b) => a - b)
        let end = [
            this.__parameters__.core.__settings__.meta[dimension].unique[parseInt(this.__parameters__.core.__settings__.meta[dimension].unique.length / 2)],
            this.__parameters__.core.__settings__.meta[dimension].unique[parseInt(this.__parameters__.core.__settings__.meta[dimension].unique.length / 2) + size]
        ].sort((a, b) => a - b)
        return {start: start.unique(), end: end.unique()}
    }
}
// DATAMA SAS
//
// Copyright (c) [2021-2023] DataMa SAS, All Rights Reserved.
//
// Notice created by Django <django@datama.fr>
// Contributors : Wazhabits <anatole@datama.fr>
// __________________
//
// NOTICE:  All information contained herein is, and remains
// the property of DataMa SAS and/or some open source packages used
// if any.  The intellectual and technical concepts contained
// herein are proprietary to DataMa SAS
// and its suppliers and may be covered by French and Foreign Patents,
// patents in process, and are protected by trade secret or copyright law.
// Dissemination of this information or reproduction of this material
// is strictly forbidden unless prior written permission is obtained
// from DataMa SAS.
// __________________
class DataMaMarketOperand extends DataMaLogic{
    constructor(core, list, metrics, id) {
        super(core)
        this.__list__ = list
        this.__metrics__ = core.settings.metrics
        this.__id__ = id
    }
    __renderOperand(value, operator, params) {
        let container = DataMaUtils.getNode('div', false, ['datama-market-equation-value-container']);
        let valueContainer = DataMaUtils.getNode('span', false, ['datama-market-equation-value']);
        let valueInput = new DataMaInput({
            id: value,
            list: this.__list__,
            type: 'select',
            items: [{text: '1', value: null}, ...this.__metrics__.map(m => ({text: m, value: m}))],
            ...params,
            callbacks: {
                input: (value) => {
                    this.__list__[params.key] = value;
                    this.__core__.__datama__.needRecompute()
                }
            }
        })
        valueContainer.append(valueInput.render())
        if (operator) {
            let operatorContainer = DataMaUtils.getNode('span', false, ['datama-market-equation-operator']);
            operatorContainer.innerText = operator
            container.append(operatorContainer)
        }
        container.append(valueContainer)
        return container;
    }

    render() {
        let operation = this.__list__.operation;
        let result = DataMaUtils.getNode('div', false, ['datama-market-equation-operand-container']);
        if (operation) {
            operation.forEach((operand) => {
                result.append(this.__renderOperand(operand.value, operand.operator))
            })
        } else {
            result.append(this.__renderOperand('numerator', null, {title: 'Numerator', key: 'numerator', id: this.__id__}))
            result.append(this.__renderOperand('denominator', '/', {title: 'Denominator', key: 'denominator', id: this.__id__}))
        }
        return result;
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaMarketEquation.js project project-deep-sky
 */
class DataMaMarketEquation extends DataMaRenderingComponentAbstract {
    constructor(props) {
        super(props);
    }

    __renderStepTable() {
        let header = [
            {
                text: '#',
                align: 'center',
                sortable: true,
                value: ({index}) => index + 1,
                width: 50,
                padding: 0
            },
            {
                text: 'Formula',
                colspan: 3,
                align: 'center',
                elements: [
                    {
                        text: 'Numerator',
                        value: 'numerator',
                        input: {
                            disabled: !this.__parameters__.core.__settings__?.license.valid,
                            type: 'select',
                            items: this.__parameters__.core.__settings__.metrics.map(m => ({text: m, value: m})),
                            list: (row) => row,
                            props: {
                                title: !this.__parameters__.core.__settings__?.license.valid ? 'Your license does not allow to edit Metrics relation' : 'Choose the numerator to use'
                            }
                        }
                    },
                    {
                      text: '/'
                    },
                    {
                        text: 'Denominator',
                        value: 'denominator',
                        border: false,
                        input: {
                            disabled: !this.__parameters__.core.__settings__?.license.valid,
                            type: 'select',
                            items: [null, ...this.__parameters__.core.__settings__.metrics].map(m => ({text: m || '1', value: m})),
                            list: (row) => row,
                            props: {
                                title: !this.__parameters__.core.__settings__?.license.valid ? 'Your license does not allow to edit Metrics relation' : 'Choose the denominator to use'
                            }
                        }
                    },
                ]
            },
            {
                text: 'Name',
                value: 'name',
                input: {
                    disabled: !this.__parameters__.core.__settings__?.license.valid,
                    type: 'text',
                    list: (row) => row,
                    props: {
                        title: !this.__parameters__.core.__settings__?.license.valid ? 'Your license does not allow to edit Metrics relation' : 'Set step name'
                    }
                }
            },
            {
                text: 'Unit',
                value: 'unit',
                input: {
                    disabled: !this.__parameters__.core.__settings__?.license.valid,
                    type: 'text',
                    list: (row) => row,
                    props: {
                        title: !this.__parameters__.core.__settings__?.license.valid ? 'Your license does not allow to edit Metrics relation' : 'Set step unit'
                    }
                }
            },
            {
                text: 'Focus',
                value: 'focus',
                input: {
                    disabled: !this.__parameters__.core.__settings__?.license.valid,
                    type: 'select',
                    items: this.__parameters__.core.__settings__.dimensions.map((d, i) => ({text: d, value: d, active: this.__parameters__.core.__settings__.privilege.max === -1 || i < this.__parameters__.core.__settings__.privilege.max})),
                    nullable: true,
                    list: (row) => row,
                    props: {
                        title: !this.__parameters__.core.__settings__?.license.valid ? 'Your license does not allow to edit Metrics relation' : 'Focus specific dimension on given step'
                    }
                }
            },
            {
                text: 'Exclude',
                value: 'exclude',
                input: {
                    disabled: !this.__parameters__.core.__settings__?.license.valid,
                    type: 'select',
                    items: this.__parameters__.core.__settings__.dimensions.map((d, i) => ({text: d, value: d, active: this.__parameters__.core.__settings__.privilege.max === -1 || i < this.__parameters__.core.__settings__.privilege.max})),
                    multiple: true,
                    nullable: true,
                    list: (row) => row,
                    props: {
                        title: !this.__parameters__.core.__settings__?.license.valid ? 'Your license does not allow to edit Metrics relation' : 'Exclude from analysis dimension(s) for given step'
                    }
                }
            },
            {
                text: 'Actions',
                align: 'right',
                value: ({index}) => {
                    let deleteButton = new DataMaButton({
                        id: 'metrics-relation-delete-' + index,
                        text: '',
                        props: {title: !this.__parameters__.core.__settings__?.license.valid ? 'Your license does not allow to edit Metrics relation' : 'Remove this step'},
                        classList: ['transparent', 'no-border'],
                        disabled: !this.__parameters__.core.__settings__?.license.valid,
                        callbacks: {
                            click: (e) => {
                                e.preventDefault()
                                this.__table__.__data__.splice(index, 1)
                                this.__table__.render()
                            }
                        }
                    })
                    return deleteButton.render()
                }
            }
        ]
        let footer = [
            {
                small: true,
                elements: [
                    {
                        align: 'left',
                        colspan: 9,
                        element: new DataMaList({
                            classList: ['d-flex', 'flex-nowrap'],
                            elements: [
                                new DataMaButton({
                                    icon: '',
                                    title: 'Create new KPI',
                                    classList: ['transparent'],
                                    disabled: !this.__parameters__.core.__settings__?.license.valid,
                                    props: {title: !this.__parameters__.core.__settings__?.license.valid ? 'Your license does not allow to edit Metrics relation' : 'Create new KPI'},
                                    callbacks: {
                                        click: (e, p) => {
                                            let availableNumerator = this.__parameters__.core.__settings__.metrics.filter(metric => this.__parameters__.core.__settings__.steps.map(s => s.numerator).indexOf(metric) === -1)
                                            let availableDenominator = ['', ...this.__parameters__.core.__settings__.metrics].filter(metric => this.__parameters__.core.__settings__.steps.map(s => s.denominator).indexOf(metric) === -1)
                                            let obj = {}
                                            this.__table__.__header__.forEach(h => {
                                                if (typeof h.value === 'string') {
                                                    obj[h.value] = ''
                                                } else if (h.elements) {
                                                    h.elements.forEach(h => {
                                                        if (h.value === 'numerator') {
                                                            obj[h.value] = availableNumerator[0] || this.__parameters__.core.__settings__.metrics[0]
                                                        } else if (h.value === 'denominator') {
                                                            obj[h.value] = availableDenominator[0] || ''
                                                        }
                                                        if (!obj[h.value]) obj[h.value] = ''
                                                    })
                                                }
                                            })
                                            obj.name = obj.numerator + (obj.denominator !== '' ? ' ' + DataMaTranslate.translate(window.DATAMA_LOCAL, 'per') + ' ' + obj.denominator : '')
                                            this.__table__.__data__.push(obj);
                                            this.__table__.render()
                                            e.preventDefault();
                                        }
                                    }
                                }),
                                {divider: true, vertical: true},
                                new DataMaButton({
                                    icon: '',
                                    classList: ['transparent'],
                                    disabled: !this.__parameters__.core.__settings__?.license.valid,
                                    props: {title: !this.__parameters__.core.__settings__?.license.valid ? 'Your license does not allow to edit Metrics relation' : 'Generate Prod metrics relation'},
                                    callbacks: {
                                        click: (e) => {
                                            e.preventDefault();
                                            this.__parameters__.core.__settings__.steps = SettingsMutator.generateProductMetricsRelation(this.__parameters__.core.__settings__.metrics)
                                            this.__table__.__data__ = this.__parameters__.core.__settings__.steps
                                            this.__table__.render()
                                            this.__parameters__.core.__settings__.inputs.formula = this.__table__.__data__.map((r, i) => '[' + (i + 1) + ']').join('*')
                                            try {
                                                this.__parameters__.core.__settings__.__formulaPostFix__ = DataMath.convertFormulaToPostfix(this.__parameters__.core.__settings__.inputs.formula)
                                            } catch (e) {
                                                DataMaLog.error(e)
                                            }
                                            this.__parameters__.core.__datama__.needRecompute()
                                        }
                                    }
                                }),
                                new DataMaButton({
                                    icon: '',
                                    classList: ['transparent'],
                                    disabled: !this.__parameters__.core.__settings__?.license.valid,
                                    props: {title: !this.__parameters__.core.__settings__?.license.valid ? 'Your license does not allow to edit Metrics relation' : 'Generate Sum metrics relation'},
                                    callbacks: {
                                        click: (e) => {
                                            e.preventDefault();
                                            this.__parameters__.core.__settings__.steps = SettingsMutator.generateSumMetricsRelation(this.__parameters__.core.__settings__.metrics)
                                            this.__table__.__data__ = this.__parameters__.core.__settings__.steps
                                            this.__table__.render()
                                            this.__parameters__.core.__settings__.inputs.formula = this.__table__.__data__.map((r, i) => '[' + (i + 1) + ']').join('+')
                                            try {
                                                this.__parameters__.core.__settings__.__formulaPostFix__ = DataMath.convertFormulaToPostfix(this.__parameters__.core.__settings__.inputs.formula)
                                            } catch (e) {
                                                DataMaLog.error(e)
                                            }
                                            this.__parameters__.core.__datama__.needRecompute()
                                        }
                                    }
                                })
                            ]
                        })
                    }
                ]
            },
            {
                elements: [
                    {
                        text: 'Total',
                        align: 'right',
                        colspan: 1
                    },
                    {
                        colspan: 3,
                        element: new DataMaInput({
                            id: 'formula',
                            key: 'formula',
                            list: this.__parameters__.core.__settings__.inputs,
                            type: 'text',
                            disabled: !this.__parameters__.core.__settings__?.license.valid,
                            props: {title: !this.__parameters__.core.__settings__?.license.valid ? 'Your license does not allow to edit Metrics relation' : 'Edit the step function'},
                            callbacks: {
                                blur: (value) => {
                                    this.__parameters__.core.__settings__.inputs.formula = value;
                                    if (value.split('').filter(c => c === '(').length !== value.split('').filter(c => c === ')').length) {
                                        return false;
                                    }
                                    try {
                                        this.__parameters__.core.__settings__.__formulaPostFix__ = DataMath.convertFormulaToPostfix(value)
                                    } catch (e) {
                                        DataMaLog.error(e)
                                    }
                                    this.__parameters__.core.__datama__.needRecompute()
                                }
                            }
                        })
                    },
                    /**
                     * Inputs
                     */
                    {
                        colspan: 1,
                        element: new DataMaInput({
                            id: 'totalStepName',
                            list: this.__parameters__.core.__settings__.inputs,
                            key: 'totalStepName',
                            type: 'text',
                            disabled: !this.__parameters__.core.__settings__?.license.valid,
                            props: {title: !this.__parameters__.core.__settings__?.license.valid ? 'Your license does not allow to edit Metrics relation' : 'Set the name of Main KPI'},
                            callbacks: {
                                input: (value) => {
                                    this.__parameters__.core.__settings__.inputs.totalStepName = value
                                    this.__parameters__.core.__datama__.needRecompute()
                                }
                            }
                        })
                    },
                    {
                        colspan: 1,
                        element: new DataMaInput({
                            id: 'totalStepUnit',
                            key: 'totalStepUnit',
                            list: this.__parameters__.core.__settings__.inputs,
                            placeholder: '$, , ...',
                            type: 'text',
                            disabled: !this.__parameters__.core.__settings__?.license.valid,
                            props: {title: !this.__parameters__.core.__settings__?.license.valid ? 'Your license does not allow to edit Metrics relation' : 'Set the unit of Main KPI'},
                            callbacks: {
                                input: (value) => {
                                    this.__parameters__.core.__settings__.inputs.totalStepUnit = value
                                    this.__parameters__.core.__datama__.needRecompute()
                                }
                            }
                        })
                    },
                    {
                        colspan: 4
                    }
                ]
            }
        ]
        if (!this.__table__) {
            this.__table__ = new DataMaTable(
                {
                    core: this.__parameters__.core,
                    data: this.__parameters__.core.__settings__.steps,
                    header: header,
                    footer: footer,
                    settings: {
                        // pagination: {
                        //     itemsPerPage: 50
                        // },
                        rows: {
                            draggable: true,
                            create: true,
                            delete: true,
                            move: true
                        },
                        disabled: !this.__parameters__.core.__settings__?.license.valid,
                    }
                });
        }
        let node = this.__table__.render();
        this.__container__.append(node);
    }

    __renderStepList() {
        if (this.__stepListInput__) {
            this.__stepListInput__.remove()
        }
        this.__stepListInput__ = DataMaUtils.getNode('div', false, ['datama-market-equation-steps-container']);
        let list = this.__parameters__.core.__settings__.inputs.formula.split('').map((o, i) => {
            if (/\d+/.test(o)) {
                let step = this.__parameters__.core.__settings__.steps[parseInt(o)];
                return (new DataMaMarketOperand(this.__parameters__.core, step, step.name + i)).render()
            } else {
                let node = DataMaUtils.getNode('div', false, [o === '(' || o === ')' ? 'datama-market-equation-parenthesis' : 'datama-market-equation-operator'])
                node.innerText = o;
                return node;
            }
        })
        list.forEach(s => {
            this.__stepListInput__.append(s)
        })
        this.__container__.prepend(this.__stepListInput__)
    }

    __renderFormulaInput() {
        let input = new DataMaInput({
            id: 'formula',
            key: 'formula',
            list: this.__parameters__.core.__settings__.inputs,
            type: 'text',
            label: 'Formula',
            callbacks: {
                input: (value) => {
                    this.__parameters__.core.__settings__.inputs.formula = value;
                    this.__parameters__.core.__datama__.needRecompute()
                    this.__renderStepList();
                }
            }
        })
        this.__formulaInput__ = input.render();
        this.__container__.append(this.__formulaInput__)
    }

    render() {
        this.__container__ = DataMaUtils.getNode('div', this.__parameters__.id, ['datama-market-equation-container']);
        if (this.__parameters__.list) {
            this.__renderStepList()
            this.__renderFormulaInput()
        } else {
            this.__renderStepTable()
        }
        return this.__container__;
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaHeader.js project project-deep-sky
 */
class DataMaHeader extends DataMaRenderingComponentAbstract{
    constructor(props) {
        super(props)
        let isAnonymous = !this.__parameters__.core.__settings__?.license.valid
        this.__node__ = DataMaUtils.getNode('header', 'datama-light-header', ['pr-1'], this.__parameters__.core.__nodes__.container, {style: DATAMA_CURRENT_EXTENSION === 'powerbi' && isAnonymous ? 'border-top: var(--border)' : ''});
        this.init()
    }
    
    init() {
        let computedStyle = getComputedStyle(document.documentElement);
        let timeout;
        let preferencesMeta = [
            new DataMaInput({
                id: 'header-language',
                type: 'select',
                items: [
                    {value: 'en-US', text: 'English'},
                    {value: 'fr-FR', text: 'Franais'}
                ],
                label: 'Language',
                list: window,
                key: 'DATAMA_LOCAL',
                props: {title: 'Language'},
                light: true,
                classList: ['primary'],
                callbacks: {input: e => this.__changeLanguage(e)}
            }),
            //new DataMaInput({
            //    id: 'logo',
            //    list: this.__parameters__.core.__theme__.logo,
            //    key: 'src',
            //    label: 'Logo (base64)',
            //    type: 'image:base64',
            //    callbacks: {
            //        input: value => {
            //            window.DATAMA_LOGO_BASE64 = value;
            //            this.__parameters__.core.__theme__.logo.src = value;
            //            this.__parameters__.core.__structure__.header.render()
            //        }
            //    }
            //})
        ], colorsSection = [
            new DataMaPanels({
                id: 'datama-theme-application-colors',
                multiple: false,
                panels: [
                    new DataMaPanel({
                        title: 'Application',
                        contents: [
                            new DataMaInput({
                                id: 'primary',
                                value: '#' + computedStyle.getPropertyValue('--color-primary-rgb').split(', ').map(c => parseInt(c).toString(16)).join(''),
                                label: 'Primary',
                                type: 'color',
                                callbacks: {
                                    input: value => {
                                        let r = parseInt(value.substring(1, 3), 16);
                                        let g = parseInt(value.substring(3, 5), 16);
                                        let b = parseInt(value.substring(5, 7), 16);
                                        document.documentElement.style.setProperty('--color-primary-rgb', [r, g, b].join(', '));
                                    }
                                }
                            }),
                            new DataMaInput({
                                id: 'secondary',
                                value: '#' + computedStyle.getPropertyValue('--color-secondary-rgb').split(', ').map(c => parseInt(c).toString(16)).join(''),
                                label: 'Secondary',
                                type: 'color',
                                callbacks: {
                                    input: value => {
                                        let r = parseInt(value.substring(1, 3), 16);
                                        let g = parseInt(value.substring(3, 5), 16);
                                        let b = parseInt(value.substring(5, 7), 16);
                                        document.documentElement.style.setProperty('--color-secondary-rgb', [r, g, b].join(', '));
                                    }
                                }
                            }),
                            new DataMaInput({
                                id: 'dark',
                                value: '#' + computedStyle.getPropertyValue('--color-dark-rgb').split(', ').map(c => parseInt(c).toString(16)).join(''),
                                label: 'Dark',
                                type: 'color',
                                callbacks: {
                                    input: value => {
                                        let r = parseInt(value.substring(1, 3), 16);
                                        let g = parseInt(value.substring(3, 5), 16);
                                        let b = parseInt(value.substring(5, 7), 16);
                                        document.documentElement.style.setProperty('--color-dark-rgb', [r, g, b].join(', '));
                                    }
                                }
                            }),
                            new DataMaInput({
                                id: 'light',
                                value: '#' + computedStyle.getPropertyValue('--color-white-rgb').split(', ').map(c => parseInt(c).toString(16)).join(''),
                                label: 'Light',
                                type: 'color',
                                callbacks: {
                                    input: value => {
                                        let r = parseInt(value.substring(1, 3), 16);
                                        let g = parseInt(value.substring(3, 5), 16);
                                        let b = parseInt(value.substring(5, 7), 16);
                                        document.documentElement.style.setProperty('--color-white-rgb', [r, g, b].join(', '));
                                    }
                                }
                            }),
                            new DataMaInput({
                                id: 'bg-light',
                                value: '#' + computedStyle.getPropertyValue('--color-bg-light-rgb').split(', ').map(c => parseInt(c).toString(16)).join(''),
                                label: 'Background light',
                                type: 'color',
                                callbacks: {
                                    input: value => {
                                        let r = parseInt(value.substring(1, 3), 16);
                                        let g = parseInt(value.substring(3, 5), 16);
                                        let b = parseInt(value.substring(5, 7), 16);
                                        document.documentElement.style.setProperty('--color-bg-light-rgb', [r, g, b].join(', '));
                                    }
                                }
                            }),
                            new DataMaInput({
                                id: 'bg-dark',
                                value: '#' + computedStyle.getPropertyValue('--color-bg-dark-rgb').split(', ').map(c => parseInt(c).toString(16)).join(''),
                                label: 'Background dark',
                                type: 'color',
                                callbacks: {
                                    input: value => {
                                        let r = parseInt(value.substring(1, 3), 16);
                                        let g = parseInt(value.substring(3, 5), 16);
                                        let b = parseInt(value.substring(5, 7), 16);
                                        document.documentElement.style.setProperty('--color-bg-dark-rgb', [r, g, b].join(', '));
                                    }
                                }
                            })
                        ]
                    }),
                    new DataMaPanel({
                        title: 'Waterfall',
                        contents: [
                            new DataMaInput({
                                id: 'color-waterfall-out',
                                value: DataMaColorsManager.palette[0],
                                label: 'Negative container',
                                type: 'color',
                                callbacks: {
                                    input: value => {
                                        DataMaColorsManager.palette[0] = value;
                                        clearTimeout(timeout)
                                        timeout = setTimeout(() => {
                                            let modules = Object.keys(this.__parameters__.core.solutions).map(s => this.__parameters__.core.solutions[s].modules ? Object.keys(this.__parameters__.core.solutions[s].modules).map(m => s + '.' + m) : []).flat();
                                            this.__parameters__.core.__datama__.compute(modules)
                                        }, 500)
                                    }
                                }
                            }),
                            new DataMaInput({
                                id: 'color-waterfall-in',
                                value: DataMaColorsManager.palette[1],
                                label: 'Positive container',
                                type: 'color',
                                callbacks: {
                                    input: value => {
                                        DataMaColorsManager.palette[1] = value;
                                        clearTimeout(timeout)
                                        timeout = setTimeout(() => {
                                            let modules = Object.keys(this.__parameters__.core.solutions).map(s => this.__parameters__.core.solutions[s].modules ? Object.keys(this.__parameters__.core.solutions[s].modules).map(m => s + '.' + m) : []).flat();
                                            this.__parameters__.core.__datama__.compute(modules)
                                        }, 500)
                                    }
                                }
                            }),
                            new DataMaInput({
                                id: 'color-waterfall-net',
                                value: DataMaColorsManager.palette[2],
                                label: 'Start & End bars',
                                type: 'color',
                                callbacks: {
                                    input: value => {
                                        DataMaColorsManager.palette[2] = value;
                                        clearTimeout(timeout)
                                        timeout = setTimeout(() => {
                                            let modules = Object.keys(this.__parameters__.core.solutions).map(s => this.__parameters__.core.solutions[s].modules ? Object.keys(this.__parameters__.core.solutions[s].modules).map(m => s + '.' + m) : []).flat();
                                            this.__parameters__.core.__datama__.compute(modules)
                                        }, 500)
                                    }
                                }
                            }),
                            new DataMaInput({
                                id: 'color-waterfall-up',
                                value: DataMaColorsManager.palette[3],
                                label: 'Positive variation',
                                type: 'color',
                                callbacks: {
                                    input: value => {
                                        DataMaColorsManager.palette[3] = value;
                                        clearTimeout(timeout)
                                        timeout = setTimeout(() => {
                                            let modules = Object.keys(this.__parameters__.core.solutions).map(s => this.__parameters__.core.solutions[s].modules ? Object.keys(this.__parameters__.core.solutions[s].modules).map(m => s + '.' + m) : []).flat();
                                            this.__parameters__.core.__datama__.compute(modules)
                                        }, 500)
                                    }
                                }
                            }),
                            new DataMaInput({
                                id: 'color-waterfall-down',
                                value: DataMaColorsManager.palette[4],
                                label: 'Negative variation',
                                type: 'color',
                                callbacks: {
                                    input: value => {
                                        DataMaColorsManager.palette[4] = value;
                                        clearTimeout(timeout)
                                        timeout = setTimeout(() => {
                                            let modules = Object.keys(this.__parameters__.core.solutions).map(s => this.__parameters__.core.solutions[s].modules ? Object.keys(this.__parameters__.core.solutions[s].modules).map(m => s + '.' + m) : []).flat();
                                            this.__parameters__.core.__datama__.compute(modules)
                                        }, 500)
                                    }
                                }
                            })
                        ]
                    })
                ]
            })
        ]

        let headerButton = [
            {
                icon: DataMaIcons.get('close'),
                title: 'Close advanced settings dialog',
                classList: [
                    'primary',
                    'pr-4',
                    'ml-2',
                    'mr-2'
                ],
                callback: (e) => {
                    this.__dialog__.close(e)
                }
            }
        ];
        let footer = {
            /**
             * Dialog footer custom buttons
             */
            buttons: [
                {
                    text: 'Close',
                    icon: DataMaIcons.get('close'),
                    title: 'Close advanced settings dialog',
                    id: 'close-advanced-settings',
                    classList: [
                        'primary',
                        'pr-4',
                        'ml-2',
                        'mr-2'
                    ],
                    callback: (e) => {
                        this.__dialog__.close(e)
                    }
                },
                {
                    text: 'Apply',
                    icon: DataMaIcons.get('check'),
                    title: 'Apply settings, close and compute',
                    id: 'apply-advanced-settings',
                    classList: [
                        'bg-primary',
                        'pr-4'
                    ],
                    callback: (e) => {
                        this.__dialog__.close(e)
                        if (this.__parameters__.core.__settings__?.license.valid) {
                            setTimeout(() => {
                                let settings ={
                                    steps: this.__parameters__.core.__settings__.steps,
                                    inputs: this.__parameters__.core.__settings__.inputs,
                                    configuration: this.__parameters__.core.__settings__.configuration,
                                    language: window.DATAMA_LOCAL
                                };
                                if (this.__parameters__.core.__datama__.__callbacks__?.onSettingsApply && typeof this.__parameters__.core.__datama__.__callbacks__?.onSettingsApply === 'function') {
                                    this.__parameters__.core.__datama__.__callbacks__?.onSettingsApply(settings, this.__parameters__.core)
                                }
                                else {
                                    DataMaUtils.copyToClipboard(JSON.stringify(settings))
                                    this.__parameters__.core.__notifications__.notify({id: 'header-dialog-settings-save', text: 'Configuration copied to your clipboard, put it into the "Config JSON" input of your editor view to make these change appear by default !'}, {accent: true, duration: 30000})
                                }
                            })
                        }
                        setTimeout(() => {
                            let modules = Object.keys(this.__parameters__.core.solutions).map(solution => this.__parameters__.core.solutions[solution].modules ? Object.keys(this.__parameters__.core.solutions[solution].modules).map(module => solution + '.' + module) : false).filter(e => e).flat()
                            this.__parameters__.core.__datama__.compute(modules);
                        })
                    }
                }
            ]
        }
        preferencesMeta['section'] = {
            id: 'global-preferences',
            title: {
                text: 'Global',
                id: 'global-preferences-title'
            },
            classList: ['pt-0', 'pb-2']
        };
        colorsSection['section'] = {
            id: 'colors-preferences',
            title: {
                text: 'Theme',
                id: 'colors-preferences-title'
            },
            classList: ['pt-2', 'pb-0']
        };
        if (!this.__tabs__) {
            let tabs = [
                new DataMaTab({
                    id: 'definition',
                    icon: DataMaIcons.get('balance-scale'),
                    title: 'Comparison',
                    disabled: Object.keys(this.__parameters__.core.__settings__.meta).length === 0 || this.__parameters__.core.__settings__.dimensions.length === 0,
                    contents: [
                        new DataMaStartEnd({core: this.__parameters__.core, demo: !this.__parameters__.core.__settings__?.license.valid})
                    ],
                    documentation: {
                        link: 'https://datama-solutions.github.io/docs/extensions/datama-compare/settings/settings.html#12-comparison',
                        title: 'Checkout our documentation to better understand Comparison definition'
                    },
                    header: {
                        /**
                         * Dialog custom buttons
                         */
                        buttons: headerButton
                    },
                    footer
                }),
                new DataMaTab({
                    id: 'metrics-relations',
                    title: 'Metrics relation',
                    icon: DataMaIcons.get('function'),
                    disabled: Object.keys(this.__parameters__.core.__settings__.meta).length === 0 || this.__parameters__.core.__settings__.metrics.length === 0,
                    contents: [
                        new DataMaMarketEquation({core: this.__parameters__.core, list: false, id: 'metrics-relation-component', demo: !this.__parameters__.core.__settings__?.license.valid})
                    ],
                    documentation: {
                        link: 'https://datama-solutions.github.io/docs/extensions/datama-compare/settings/settings.html#13-metrics-relation',
                        title: 'Checkout our documentation to better understand Metrics relation'
                    },
                    header: {
                        /**
                         * Dialog custom buttons
                         */
                        buttons: headerButton
                    },
                    footer
                }),
                new DataMaTab({
                    id: 'advanced-settings',
                    title: 'Advanced settings',
                    icon: DataMaIcons.get('cog'),
                    contents: [
                        // NumLimit
                        {
                            id: 'NumLimit',
                            list: this.__parameters__.core.__settings__.inputs,
                            input: true,
                            label: 'Aggregation in %',
                            type: 'number',
                            min: 0,
                            max: 100,
                            disabled: !this.__parameters__.core.__settings__?.license.valid,
                            props: {
                                title: !this.__parameters__.core.__settings__?.license.valid ? 'Your license does not allow to edit the aggregation' : 'Edit aggregation in %'
                            },
                            callbacks: {
                                input: (value) => {
                                    this.__parameters__.core.__settings__.inputs.NumLimit = parseInt(value)
                                    this.__parameters__.core.__datama__.needRecompute()
                                }
                            }
                        }

                    ],
                    documentation: {
                        link: 'https://datama-solutions.github.io/docs/extensions/datama-compare/settings/settings.html#11-model-configuration',
                        title: 'Checkout our documentation to better understand our advanced settings'
                    },
                    header: {
                        /**
                         * Dialog custom buttons
                         */
                        buttons: headerButton
                    },
                    footer
                }),
                new DataMaTab({
                    icon: DataMaIcons.get('paint'),
                    id: 'preferences',
                    title: 'Preferences',
                    documentation: {
                        title: 'Checkout our documentation to discover how Datama Compare is editable',
                        link: 'https://datama-solutions.github.io/docs/extensions/datama-compare/settings/settings.html#14-preferences'
                    },
                    contents: [
                        preferencesMeta,
                        !this.__parameters__.core.__settings__.theme ? colorsSection : false
                    ].filter(e => e),
                    header: {
                        /**
                         * Dialog custom buttons
                         */
                        buttons: headerButton
                    },
                    footer
                })
            ];
            this.__tabs__ = new DataMaTabs({
                id: 'advanced-settings-tabs',
                tabs: tabs
            });
        } else {
            this.__tabs__.show(this.__tabs__.__current__)
        }
        if (!this.__dialog__) {
            if (this.__parameters__.core.__settings__.viewer) {
                this.__dialog__ = new DataMaDialog(
                    {
                        id: 'datama-header-dialog-viewer',
                        target: this.__parameters__.core.__nodes__.container,
                        footer: {
                            /**
                             * Dialog footer custom buttons
                             */
                            buttons: [
                                {
                                    text: 'Close',
                                    icon: DataMaIcons.get('close'),
                                    title: 'Close advanced settings dialog',
                                    classList: [
                                        'primary',
                                        'pr-4',
                                        'ml-2',
                                        'mr-2'
                                    ],
                                    callback: (e) => {
                                        this.__dialog__.close(e)
                                    }
                                },
                                {
                                    text: 'Upgrade Now!',
                                    icon: DataMaIcons.get('arrow-up-right'),
                                    title: 'Upgrade Now!',
                                    classList: [
                                        'bg-primary',
                                        'pr-4'
                                    ],
                                    callback: (e) => {
                                        this.__dialog__.close(e)
                                        window.open(this.__parameters__.core.__settings__.subscribe, "_blank")
                                    }
                                }
                            ]
                        },
                    },
                    [
                        DataMaImages.get('hammer-datamate', 'setting-upgrade-hammer-datamate' ,['small', 'ml-auto', 'mr-auto', 'mt-4']),
                        {
                            title: true,
                            tag: 'h2',
                            html: 'Upgrade to get <span class="font-primary">builder plan</span> benefits!',
                            classList: ['text-center', 'strong', 'primary', 'mt-2']
                        },
                        {
                            blockquote: true,
                            text: 'Get advanced features unlocked to build and customize your Datama extension',
                            classList: ['text-center', 'primary', 'no-quote']
                        },
                        new DataMaList({
                            id: 'upgrade-popup-checklist-list',
                            classList: ['fit-content', 'ml-auto', 'mr-auto'],
                            contents: [
                                {
                                    html: 'Customize your comparison and perform multiple comparison at the same time',
                                    icon: DataMaIcons.get('check'),
                                    classList: ['d-flex', 'justify-start', 'mb-2']
                                },
                                {
                                    html: 'Define advanced market equation',
                                    icon: DataMaIcons.get('check'),
                                    classList: ['d-flex', 'justify-start', 'mb-2']
                                },
                                {
                                    html: 'Save your custom settings so that viewers can benefit from it',
                                    icon: DataMaIcons.get('check'),
                                    classList: ['d-flex', 'justify-start', 'mb-2']
                                },
                            ]
                        }),
                    ]
                )
            } else {
                this.__dialog__ = new DataMaDialog(
                    {
                        id: 'datama-header-dialog',
                        target: this.__parameters__.core.__nodes__.container
                    },
                    [
                        this.__tabs__
                    ]
                )
            }
        }
        else {
            // this.__dialog__.show()
        }
        // this.__dialog__.show()
    }

    /**
     * Render DataMa Light header
     */
    render(init=false) {
        if (init) this.init()
        this.__renderLogo(this.__parameters__.core.__theme__.logo)
        // this.__renderLanguageSelect()
        this.__parameters__.core.__nodes__.header.append(DataMaUtils.divider('div', true, 'header-divider'))
        this.__renderSettingsButton()
    }

    /**
     * Render logo in header (can be edited)
     * @param url
     * @param title
     * @param src
     * @private
     */
    __renderLogo({url, title, src}) {
        let container = DataMaUtils.getNode('div', 'datama-header-logo', ['datama-header-logo'])
        let img = DataMaUtils.getNode('img', 'datama-header-logo-img', ['datama-image'], false)
        let base = DataMaImages.get('logo');
        img.setAttribute('src', base.src)
        img.setAttribute('href', url)
        img.setAttribute('title', title)
        img.setAttribute('target', '_blank')
        img.removeEventListener('click', e => {
            e.preventDefault();
            window.open(e.target.attributes['href'].value, e.target.attributes['target'].value).focus()
        })
        img.addEventListener('click', e => {
            e.preventDefault();
            window.open(e.target.attributes['href'].value, e.target.attributes['target'].value).focus()
        })
        container.append(img)
        if (!this.__parameters__.core.__nodes__.logo) {
            this.__parameters__.core.__nodes__.logo = container
            this.__parameters__.core.__nodes__.header.append(this.__parameters__.core.__nodes__.logo)
        }
    }
    /**
     * Settings Dialog button
     * @private
     */
    __renderSettingsButton() {
        let callback = e => this.__openHeaderDialog(e);
        let button = new DataMaButton({
            id: 'header-advanced-settings',
            icon: DataMaIcons.get('settings'),
            badge: this.__parameters__.core.__settings__.loaded ? DataMaIcons.get('download') : false,
            props: {title: 'Advanced Settings' + (this.__parameters__.core.__settings__.loaded ? ' (configuration reloaded)' : '')},
            classList: [],
            callbacks: {click: callback}
        })
        if (!this.__parameters__.core.__nodes__.settingsButton) {
            this.__parameters__.core.__nodes__.settingsButton = button.render();
            this.__parameters__.core.__nodes__.header.append(this.__parameters__.core.__nodes__.settingsButton)
        }
    }
    /**
     * Language select
     * @private
     */
    __renderLanguageSelect() {
        let callback = e => this.__changeLanguage(e);
        let button = new DataMaInput({
            id: 'header-language',
            type: 'select',
            items: [
                {value: 'en-US', text: 'EN'},
                {value: 'fr-FR', text: 'FR'}
            ],
            list: window,
            key: 'DATAMA_LOCAL',
            props: {title: 'Language'},
            light: true,
            classList: ['primary'],
            callbacks: {input: this.__changeLanguage}
        })
        if (!this.__parameters__.core.__nodes__.languageSelect) {
            this.__parameters__.core.__nodes__.languageSelect = button.render();
            this.__parameters__.core.__nodes__.header.append(this.__parameters__.core.__nodes__.languageSelect)
        }
    }
    __changeLanguage(language) {
        window.DATAMA_LOCAL = language
        this.__parameters__.core.__datama__.__update(true)
        this.render(true)
        // this.__parameters__.core.__structure__.header.__dialog__.show()
    }
    /**
     * Dark Mode button
     * @private
     */
    __renderDarkModeButton() {
        let callback = e => {
            this.__parameters__.core.__datama__.darkMode(e)
            node.innerText = this.__parameters__.core.__theme__.darkMode ? '' : ''
            node.setAttribute('title', this.__parameters__.core.__theme__.darkMode ? 'Toggle light mode' : 'Toggle dark mode')
        };
        let button = (new DataMaButton({
            id: 'header-dark-mode',
            text: this.__parameters__.core.__theme__.darkMode ? '' : '',
            props: {
                title: this.__parameters__.core.__theme__.darkMode ? 'Toggle light mode' : 'Toggle dark mode',
            },
            classList: ['border-square'],
            callbacks: {click: callback}
        }))
        let node = button.render();
        this.__parameters__.core.__nodes__.header.append(node)
    }
    /**
     * Run new DataMa Light computation
     * @param e
     * @param modules
     * @private
     */
    __compute(e, modules) {
        e.preventDefault();
        this.__parameters__.core.__datama__.compute(modules);
        this.__parameters__.core.__nodes__.compute.remove()

    }
    /**
     * Add compute button
     * @param modules
     */
    addComputeButton(modules) {
        let computeButton = DataMaUtils.getNode('button', 'header-compute', this.__parameters__.core.__status__.compute === DATAMA_STATE.NEEDED ? [] : ['datama-hidden'], this.__parameters__.core.__nodes__.header)
        computeButton.innerText = ''
        computeButton.setAttribute('title', 'Compute')
        computeButton.removeEventListener('click', e => this.__compute(e, modules))
        computeButton.addEventListener('click', e => this.__compute(e, modules))
        this.__parameters__.core.__nodes__.compute = computeButton
        this.__parameters__.core.__nodes__.header.append(this.__parameters__.core.__nodes__.compute)
    }
    /**
     * Open settings dialog
     * @param e
     * @private
     */
    __openHeaderDialog(e) {
        e.preventDefault();
        if (this.__dialog__.state) {
            this.__dialog__.close();
        } else {
            this.__dialog__.show();
        }
    }
    /**
     * Unmount & remove dialog
     */
    unmount() {
        this.__dialog__.unmount()
        delete this.__dialog__;
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaFooter.js project project-deep-sky
 */
class DataMaFooter {
    constructor(core) {
        this.__core__ = core;
    }
    __makeUserFooter(node, mode='anonymous', message='Create your own free insights with', testBtn=false) {
        let container = DataMaUtils.getNode('div', 'datama-light-footer-message-container', ['datama-footer-message'], node)
        let messageDemoTextContainer = DataMaUtils.getNode('p', 'datama-light-footer-demo', [], container)
        let messageDemoText = DataMaUtils.getNode('span', 'datama-light-footer-message', [], messageDemoTextContainer)
        let messageDemoTextBrand = DataMaUtils.getNode('a', 'datama-official-footer-link', ['datama-footer-link', 'strong'], messageDemoTextContainer)
        messageDemoText.innerText = DataMaTranslate.translate(window.DATAMA_LOCAL, message)
        messageDemoTextBrand.setAttribute('href', 'https://www.datama.io/lets-talk/?utm_source=lookerstudio&utm_medium=datamalight+extension&utm_campaign=demo+' + DATAMA_CURRENT_EXTENSION + '&utm_id=00215')
        messageDemoTextBrand.setAttribute('target', '_blank')
        messageDemoTextBrand.removeEventListener('click', e => {
            e.preventDefault();
            window.open(e.target.attributes['href'].value, e.target.attributes['target'].value).focus()
        })
        messageDemoTextBrand.addEventListener('click', e => {
            e.preventDefault();
            window.open(e.target.attributes['href'].value, e.target.attributes['target'].value).focus()
        })
        messageDemoTextBrand.innerText = 'Datama'
        messageDemoTextBrand.classList.add('ml-1')
        if (testBtn) {
                messageDemoTextBrand.after(DataMaUtils.divider('span', true, 'datama-demo-divider'))
                let messageDemoTextFreeTrial = DataMaUtils.getNode('a', 'datama-official-footer-link-trial', ['datama-footer-link', 'primary'], messageDemoTextContainer)
                messageDemoTextFreeTrial.innerText = DataMaTranslate.translate(window.DATAMA_LOCAL, 'Trial version')
                messageDemoTextFreeTrial.removeEventListener('click', e => {
                    e.preventDefault();
                    e.stopImmediatePropagation()
                    this.__upgradeNotification()
                })
                messageDemoTextFreeTrial.addEventListener('click', e => {
                    e.preventDefault();
                    e.stopImmediatePropagation()
                    this.__upgradeNotification()
                })
        }
        if (mode === 'anonymous') {
            node.classList.add('bg-primary')
        } else if (mode === 'expired') {
             if (this.__core__.__settings__.configurable) {
                 node.classList.add('bg-primary')
             } else {
                 node.classList.add('transparent')
             }
        } else if (mode === 'demo') {
            if (this.__core__.__settings__.configurable) {
                node.classList.add('bg-primary')
            } else {
                node.classList.add('bg-light')
            }
        } else {
            if (this.__core__.__settings__.configurable) {
                node.classList.add('bg-primary')
            }
        }
        return container;
    }
    __addUserFooter(node) {
        if (this.__core__.__settings__.license) {
            if (this.__core__.__settings__.license.valid) {
                if (this.__core__.__settings__.license.type === DATAMA_TEMP_LICENSE) {
                    // Current demo
                    return this.__makeUserFooter(node, 'demo', 'Your trial period will expire on expirationDate.  Want more ? Visit '.translate({expirationDate: this.__core__.__settings__.license.expiration}), true)
                } else {
                    if (this.__core__.__settings__.configurable) {
                        return this.__makeUserFooter(node, 'user', 'Made with  for you  by '.translate(), false)
                    }
                    // Correct user
                    return false
                }
            } else {
                if (this.__core__.__settings__.license.type === DATAMA_TEMP_LICENSE) {
                    // Temporary license expired
                    return this.__makeUserFooter(node, 'expired', 'Your trial license expired since ' + this.__core__.__settings__.license.expiration + '. Contact us on solutions@datama.io to subscribe to  ', true)
                } else if (this.__core__.__settings__.license.type === DATAMA_USER_LICENSE) {
                    // User license expired
                    return this.__makeUserFooter(node, 'expired', 'Your license expired since ' + this.__core__.__settings__.license.expiration + '. You can fix that from your profile on ', true)
                }
            }
        }
        // No license
        return this.__makeUserFooter(node, 'anonymous', 'Create your own free insights with', true)
    }
    /**
     * Render DataMa Light header
     */
    render() {
        let node = DataMaUtils.getNode('div', 'datama-light-footer', ['datama-footer'], this.__core__.__nodes__.container)
        this.__addUserFooter(node)
        this.__node__ = node;
    }
    unmount() {
        delete this.__node__;
    }

    __upgradeNotification() {
        return this.__core__.__notifications__.notify({
            id: 'footer-current-version',
            contents: [
                new DataMaButton({
                    text: 'Currently on Trial version',
                    classList: ['outline-primary', 'disabled', 'no-border'],
                    id: 'upgrade-notification-current-version'
                }),
                DataMaImages.get('super-datamate', 'footer-upgrade-notification-super-datamate' ,['medium']),
                {
                    title: true,
                    html: 'Upgrade for <span class="font-primary">Premium</span> Benefits!',
                    tag: 'h2',
                    classList: ['text-center']
                },
                {
                    html: 'Split with unlimited number of KPIs!',
                    icon: DataMaIcons.get('check', {classList: ['mr-1']}),
                    classList: ['d-flex', 'justify-start']
                },
                {
                    html: 'Drill down and score interest of unlimited number of dimensions',
                    icon: DataMaIcons.get('check', {classList: ['mr-1']}),
                    classList: ['d-flex', 'justify-start']
                },
                {
                    html: 'And much more!',
                    icon: DataMaIcons.get('check', {classList: ['mr-1']}),
                    classList: ['d-flex', 'justify-start', 'mb-2']
                },
                new DataMaButton({
                    id: 'datama-notification-upgrade-now',
                    text: 'Upgrade Now!',
                    callbacks: {
                        click: (event) => {
                            window.open(this.__core__.__settings__.subscribe, "_blank")
                            event.stopPropagation()
                        }
                    },
                    classList: [
                        'bg-primary',
                        'p-2'
                    ],
                    icon: DataMaIcons.get('arrow-up-right'),
                })
            ],
            forceDisplay: true
        }, {duration: 30000})
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaWaterfallActions.js project project-deep-sky
 */
const DataMaWaterfallDocumentationLink = 'https://datama-solutions.github.io/docs/extensions/datama-compare/introduction.html'
class DataMaWaterfallActions extends DataMaSlideActions {
    __getDocumentationLink() {
        return new DataMaButton({
            id: 'waterfall-action-documentation',
            icon: DataMaIcons.get('help-circle'),
            classList: ['transparent', 'p-0'],
            props: {
                title: DataMaTranslate.translate(window.DATAMA_LOCAL, 'See related documentation')
            },
            callbacks: {
                click: (e) => {
                    e.preventDefault()
                    window.open(DataMaWaterfallDocumentationLink, '_blank')
                }
            }
        });
    }
    __getSettingsContent() {
        let translations = {
            Pts_gap_disp: 'Impact in points (pts)',
            Impact_disp: 'Impact in volume',
            Top_Line_Label: 'Percent change',
            RatioStart_disp: 'Start',
            RatioEnd_disp: 'End'
        }
        let header = {
                buttons: [
                    {
                        icon: DataMaIcons.get('close'),
                        title: 'Close waterfall settings',
                        classList: [
                            'primary',
                            'pr-4',
                            'ml-2',
                            'mr-2'
                        ],
                        callback: (e) => {
                            this.__dialog__.close(e)
                        }
                    }
                ]
            },
            footer = {
                buttons: [
                    {
                        text: 'Close',
                        icon: DataMaIcons.get('close'),
                        title: 'Close waterfall settings dialog',
                        id: 'close-waterfall-settings',
                        classList: [
                            'primary',
                            'pr-4',
                            'ml-2',
                            'mr-2'
                        ],
                        callback: (e) => {
                            this.__dialog__.close(e)
                        }
                    },
                    {
                        text: 'Apply',
                        icon: DataMaIcons.get('check'),
                        title: 'Apply settings, close and compute',
                        id: 'apply-advanced-settings',
                        classList: [
                            'bg-primary',
                            'pr-4'
                        ],
                        callback: (e) => {
                            this.__dialog__.close(e)
                            if (this.__parameters__.core.__settings__?.license.valid) {
                                setTimeout(() => {
                                    let settings = JSON.stringify({
                                        steps: this.__parameters__.core.__settings__.steps,
                                        inputs: this.__parameters__.core.__settings__.inputs,
                                        configuration: this.__parameters__.core.__settings__.configuration,
                                        language: window.DATAMA_LOCAL
                                    });
                                    DataMaUtils.copyToClipboard(settings)
                                    this.__parameters__.core.__notifications__.notify({
                                        id: 'slide-actions-settings-save',
                                        text: 'Configuration copied to your clipboard, put it into the "Config JSON" input of your editor view to make these change appear by default !'
                                    }, {accent: true, duration: 30000})
                                })
                            }
                        }
                    }
                ]
            }
        this.__tabs__ = new DataMaTabs({
            id: this.__parameters__.id + '-tabs',
            tabs: [
                new DataMaTab({
                    id: this.__parameters__.id + '-tab-general',
                    title: 'General',
                    icon: DataMaIcons.get('cog'),
                    contents: [
                        // segment_complement
                        {
                            id: 'segment_complement',
                            input: true,
                            list: this.__parameters__.core.__settings__.inputs,
                            key: 'segment_complement',
                            label: 'Segment text complement',
                            type: 'select',
                            items: [
                                {
                                    text: 'Variation relative to avg',
                                    value: 'Variation relative to avg'
                                },
                                {
                                    text: 'Variation %',
                                    value: 'Variation %'
                                },
                                {
                                    text: 'Nothing',
                                    value: 'Nothing'
                                }
                            ],
                            callbacks: {
                                input: (value) => {
                                    this.__parameters__.core.__settings__.inputs.segment_complement = value
                                    this.__parameters__.core.__settings__.configuration.waterfall.display.segment_complement = value;
                                    this.__parameters__.core.__datama__.compute()
                                    setTimeout(() => {
                                        this.__sync()
                                    })
                                }
                            }
                        },
                        {divider: true},
                        new DataMaInput({
                            id: this.__parameters__.id + '-tab-general-aggregation',
                            list: this.__parameters__.list.bars,
                            label: 'Number of bar before aggregation',
                            key: 'remain',
                            type: 'number',
                            min: 1,
                            max: 20,
                            callbacks: {
                                input: value => {
                                    this.__parameters__.list.bars.remain = value
                                    this.__sync()
                                }
                            }
                        }),
                        new DataMaInput({
                            id: this.__parameters__.id + '-tab-general-y-auto-scale',
                            value: this.__parameters__.list.scale.refer === 'view',
                            label: 'Y axis auto scaling',
                            key: 'refer',
                            type: 'switch',
                            callbacks: {
                                input: value => {
                                    this.__parameters__.list.scale.refer = value
                                    this.__sync()
                                }
                            }
                        }),
                        new DataMaInput({
                            id: this.__parameters__.id + '-tab-general-open-biggest-variation',
                            list: this.__parameters__.list.explore,
                            label: 'Open biggest/focused element by default',
                            key: 'openBarByDefault',
                            type: 'switch',
                            callbacks: {
                                input: (v) => {
                                    this.__parameters__.list.explore.openBarByDefault = v;
                                    this.__sync()
                                }
                            }
                        }),
                        new DataMaInput({
                            id: this.__parameters__.id + '-tab-general-draw-links',
                            list: this.__parameters__.list.bars,
                            label: 'Draw links between elements',
                            key: 'links',
                            type: 'switch',
                            callbacks: {
                                input: (v) => {
                                    this.__parameters__.list.bars.links = v;
                                    this.__sync()
                                }
                            }
                        }),
                        new DataMaInput({
                            id: this.__parameters__.id + '-tab-general-reverse-axis',
                            list: this.__parameters__.list.axis,
                            label: 'Reverse axis',
                            key: 'reverse',
                            type: 'switch',
                            callbacks: {
                                input: (v) => {
                                    this.__parameters__.list.axis.reverse = v;
                                    this.__sync()
                                }
                            }
                        })
                    ],
                    footer,
                    header
                }),
                new DataMaTab({
                    id: this.__parameters__.id + '-tab-fonts',
                    title: 'Font',
                    icon: DataMaIcons.get('font'),
                    contents: [
                        new DataMaInput({
                            id: this.__parameters__.id + '-tab-font-family',
                            list: this.__parameters__.list.fonts,
                            label: 'Family',
                            key: 'family',
                            type: 'select',
                            items: [
                                {value: 'Arial, sans-serif', text: 'Arial'},
                                {value: 'Montserrat, Arial, sans-serif', text: 'Montserrat'}
                            ],
                            callbacks: {
                                input: (v) => {
                                    this.__parameters__.list.fonts.family = v;
                                    this.__sync()
                                }
                            }
                        }),
                        new DataMaInput({
                            id: this.__parameters__.id + '-tab-font-size',
                            list: this.__parameters__.list.fonts,
                            label: 'Size',
                            key: 'size',
                            type: 'number',
                            min: 8,
                            max: 20,
                            callbacks: {
                                input: (v) => {
                                    this.__parameters__.list.fonts.size = v;
                                    this.__sync()
                                }
                            }
                        })
                    ],
                    footer,
                    header
                }),
                {divider: true, horizontal: true},
                new DataMaTab({
                    id: this.__parameters__.id + '-tab-label',
                    title: 'Label',
                    icon: DataMaIcons.get('label'),
                    contents: [
                        // Disabled for now [Impact in points]
                        // new DataMaInput({
                        //     id: this.__parameters__.id + '-tab-label-unit',
                        //     list: this.__parameters__.list,
                        //     label: 'Unit of waterfall',
                        //     key: 'value',
                        //     type: 'select',
                        //     items: [{text: 'Volume', value: 'Value'}, {text: 'Points', value: 'Pts_gap'}],
                        //     callbacks: {
                        //         input: (v) => {
                        //             this.__parameters__.list.value = v
                        //             this.__parameters__.instance.setData({
                        //                 source: this.__parameters__.instance.__datasets.default,
                        //                 comparison: this.__parameters__.instance.__datasets.comparison,
                        //                 drill_down: this.__parameters__.instance.__drill_down,
                        //                 drill_down_dimension: this.__parameters__.instance.__drill_down_dimension
                        //             }, this.__parameters__.instance.__configuration.weights)
                        //             this.__sync()
                        //         }
                        //     }
                        // }),
                        new DataMaTable({
                            data: this.__parameters__.list.display.secondary,
                            header: [
                                {
                                    text: 'Indicator',
                                    align: 'left',
                                    sortable: false,
                                    value: 'column',
                                    input: {
                                        type: 'select',
                                        items: this.__parameters__.list.display.available.map(e => ({text: translations[e], value: e})),
                                        list: row => row,
                                        callbacks: {
                                            input: () => this.__sync()
                                        }
                                    }
                                },
                                {
                                    text: 'Conditionnal formatting',
                                    align: 'center',
                                    colspan: 3,
                                    elements: [
                                        {
                                            align: 'center',
                                            text: 'Gauge',
                                            icon: 'gauge',
                                            value: 'bars',
                                            title: 'Display gauge',
                                            colspan: 1,
                                            input: {
                                                type: 'switch',
                                                list: row => row.formatting,
                                                readOnly: (row, index) => this.__parameters__.list.plot === 'waterfall',
                                                callbacks: {
                                                    input: () => this.__sync()
                                                }
                                            }
                                        },
                                        {
                                            align: 'center',
                                            text: 'Arrows',
                                            icon: 'arrow-up-right',
                                            value: 'arrows',
                                            title: 'Display arrows',
                                            colspan: 1,
                                            input: {
                                                type: 'switch',
                                                list: row => row.formatting,
                                                readOnly: (row, index) => (index === this.__parameters__.list.display.secondary.length - 1 && this.__parameters__.list.plot === 'waterfall'),
                                                callbacks: {
                                                    input: () => this.__sync()
                                                }
                                            }
                                        },
                                        {
                                            align: 'center',
                                            text: 'Colors',
                                            value: 'colors',
                                            title: 'Display colors',
                                            icon: 'text-color',
                                            colspan: 1,
                                            input: {
                                                type: 'switch',
                                                readOnly: (row, index) => (index === this.__parameters__.list.display.secondary.length - 1 && this.__parameters__.list.plot === 'waterfall'),
                                                list: row => row.formatting,
                                                callbacks: {
                                                    input: () => this.__sync()
                                                }
                                            }
                                        }
                                    ]
                                },
                                {
                                    align: 'center',
                                    text: 'Hover only',
                                    value: 'hoverOnly',
                                    colspan: 1,
                                    input: {
                                        type: 'switch',
                                        list: row => row,
                                        readOnly: (row, index) => (index === this.__parameters__.list.display.secondary.length - 1 && this.__parameters__.list.plot === 'waterfall'),
                                        callbacks: {
                                            input: () => this.__sync()
                                        }
                                    }
                                },
                                {
                                    align: 'center',
                                    text: 'Hide',
                                    value: 'hidden',
                                    colspan: 1,
                                    input: {
                                        type: 'switch',
                                        list: row => row,
                                        readOnly: (row, index) => index === this.__parameters__.list.display.secondary.length - 1,
                                        callbacks: {
                                            input: () => this.__sync()
                                        }
                                    }
                                }
                            ],
                            footer: [],
                            settings: {
                                rows: {
                                    draggable: false,
                                    create: false,
                                    delete: false,
                                    move: false
                                }
                            }
                        })
                    ],
                    footer,
                    header
                })
            ]
        })
        return [
            this.__tabs__
        ]
    }
    __getSettingsShortcut() {
        return [
            new DataMaButton({
                id: this.__parameters__.id + '-reverse',
                icon: DataMaIcons.get('reverse-axis'),
                title: DataMaTranslate.translate(window.DATAMA_LOCAL, 'Reverse axis'),
                classList: ['transparent', 'p-0', 'mr-1', (this.__parameters__.list.axis.reverse ? 'active' : null)],
                callbacks: {
                    click: e => {
                        let node = DataMaUtils.getNode('button', this.__parameters__.id + '-reverse')
                        this.__parameters__.list.axis.reverse = !this.__parameters__.list.axis.reverse
                        if (this.__parameters__.list.axis.reverse) {
                            node.classList.add('active')
                        } else {
                            node.classList.remove('active')
                        }
                        this.__sync()
                    }
                }
            }),
            {divider: true, classList: ['mr-1']},
            new DataMaButton({
                id: this.__parameters__.id + '-waterfall',
                icon: DataMaIcons.get('compare'),
                title: DataMaTranslate.translate(window.DATAMA_LOCAL, 'Display as waterfall'),
                classList: ['transparent', 'p-0', 'mr-1', (this.__parameters__.list.plot === 'waterfall' ? 'active' : null)],
                callbacks: {
                    click: e => {
                        let currentNode = DataMaUtils.getNode('button', this.__parameters__.id + '-waterfall')
                        let otherNode = DataMaUtils.getNode('button', this.__parameters__.id + '-tree')
                        currentNode.classList.add('active')
                        otherNode.classList.remove('active')
                        this.__parameters__.instance.setPlot('waterfall')
                        this.__sync()
                    }
                }
            }),
            new DataMaButton({
                id: this.__parameters__.id + '-tree',
                icon: DataMaIcons.get('tree'),
                title: DataMaTranslate.translate(window.DATAMA_LOCAL, 'Display as tree'),
                classList: ['transparent', 'p-0', 'mr-1', (this.__parameters__.list.plot === 'tree' ? 'active' : null)],
                callbacks: {
                    click: e => {
                        let currentNode = DataMaUtils.getNode('button', this.__parameters__.id + '-tree')
                        let otherNode = DataMaUtils.getNode('button', this.__parameters__.id + '-waterfall')
                        currentNode.classList.add('active')
                        otherNode.classList.remove('active')
                        this.__parameters__.instance.setPlot('tree')
                        this.__sync()
                    }
                }
            }),
            {divider: true, classList: ['mr-1']}
        ]
    }
    __sync() {
        // Update settings tabs
        this.__tabs__.show(this.__tabs__.__current__)
        return this.__parameters__.instance.update()
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaLight.js project project-deep-sky
 */
window.DATAMA_LOCAL = 'en-US'
window.DATAMA_LOGO_BASE64 = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODUiIGhlaWdodD0iODYiIHZpZXdCb3g9IjAgMCA4NSA4NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMC4yOTk4MDUgNDMuMTFDMC4yOTk4MDUgMTkuNzIwNyAxOS4yNjA2IDAuNzYwMDEgNDIuNjQ5OCAwLjc2MDAxQzY2LjAzOTIgMC43NjAwMSA4NSAxOS43MjA4IDg1IDQzLjExMDFWODUuNDZINDIuNjQ5OEMxOS4yNjA1IDg1LjQ2IDAuMjk5ODA1IDY2LjQ5OTIgMC4yOTk4MDUgNDMuMTFaIiBmaWxsPSIjMTZEMEI0Ii8+DQogICAgPHBhdGggZD0iTTQ0LjE0NDUgNTQuNTcxMUM0NC44MTQ1IDYxLjAxNjEgNDguNDk0NSA2NS4wMzExIDU0LjE4NDUgNjUuMDMxMUM2MC42Mjk2IDY1LjAzMTEgNjQuODk0NiA2NS4wMzExIDY0Ljg5NDYgNjUuMDMxMVY0MC45NTYxQzY0Ljg5NDYgMzUuMDQxMSA2MC4wOTk2IDMwLjI0NjEgNTQuMTg0NSAzMC4yNDYxQzQ4LjkxNDUgMzAuMjQ2MSA0NS4zMTQ1IDMzLjU5MTEgNDQuMzA5NSAzOS42MTYxTDQ0LjE0NDUgNTQuNTcxMVoiIGZpbGw9IndoaXRlIi8+DQogICAgPGcgc3R5bGU9Im1peC1ibGVuZC1tb2RlOm11bHRpcGx5Ij4NCiAgICAgICAgPHBhdGggZD0iTTIxLjU1OTYgMjcuOTUxM0MyMS41NTk2IDE4LjE5NjMgMzkuNjg0NiAxOC4xOTYzIDM5LjY4NDYgMjcuOTUxM0gyMS41NTk2WiIgZmlsbD0iIzE2RDBCNCIvPg0KICAgIDwvZz4NCiAgICA8ZyBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6bXVsdGlwbHkiPg0KICAgICAgICA8cGF0aCBkPSJNNDYuNzY5NSAyNy45NTEyQzQ4LjY2NDUgMTcuNjAxMiA2My4yODk2IDE4LjE5NjIgNjQuODk0NiAyNy45NTEySDQ2Ljc2OTVaIiBmaWxsPSIjMTZEMEI0Ii8+DQogICAgPC9nPg0KICAgIDxwYXRoIGQ9Ik0yMC4zNDk2IDU0LjU3MTFDMjEuMDE5NiA2MS4wMTYxIDI0LjY5OTYgNjUuMDMxMSAzMC4zODk2IDY1LjAzMTFDMzYuODM0NiA2NS4wMzExIDQxLjA5OTcgNjUuMDMxMSA0MS4wOTk3IDY1LjAzMTFWNDAuOTU2MUM0MS4wOTk3IDM1LjA0MTEgMzYuMzA0NiAzMC4yNDYxIDMwLjM4OTYgMzAuMjQ2MUMyNS4xMTk2IDMwLjI0NjEgMjEuNTE5NiAzMy41OTExIDIwLjUxNDYgMzkuNjE2MUwyMC4zNDk2IDU0LjU3MTFaIiBmaWxsPSJ3aGl0ZSIvPg0KICAgIDxnIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTptdWx0aXBseSI+DQogICAgICAgIDxwYXRoIGQ9Ik0yNy4xMzUgNTUuNDUxMUMzMC40MDczIDU1LjQ1MTEgMzMuMDYgNTIuNzk4NCAzMy4wNiA0OS41MjYxQzMzLjA2IDQ2LjI1MzggMzAuNDA3MyA0My42MDExIDI3LjEzNSA0My42MDExQzIzLjg2MjcgNDMuNjAxMSAyMS4yMSA0Ni4yNTM4IDIxLjIxIDQ5LjUyNjFDMjEuMjEgNTIuNzk4NCAyMy44NjI3IDU1LjQ1MTEgMjcuMTM1IDU1LjQ1MTFaIiBmaWxsPSIjMDA0ODRBIi8+DQogICAgPC9nPg0KICAgIDxnIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTptdWx0aXBseSI+DQogICAgICAgIDxwYXRoIGQ9Ik01MS4wNTQ5IDU1LjQ1MTFDNTQuMzI3MiA1NS40NTExIDU2Ljk3OTkgNTIuNzk4NCA1Ni45Nzk5IDQ5LjUyNjFDNTYuOTc5OSA0Ni4yNTM4IDU0LjMyNzIgNDMuNjAxMSA1MS4wNTQ5IDQzLjYwMTFDNDcuNzgyNiA0My42MDExIDQ1LjEyOTkgNDYuMjUzOCA0NS4xMjk5IDQ5LjUyNjFDNDUuMTI5OSA1Mi43OTg0IDQ3Ljc4MjYgNTUuNDUxMSA1MS4wNTQ5IDU1LjQ1MTFaIiBmaWxsPSIjMDA0ODRBIi8+DQogICAgPC9nPg0KICAgIDxwYXRoIGQ9Ik01Mi41MDQ3IDQ2Ljk0NjFDNTMuMzA1NSA0Ni45NDYxIDUzLjk1NDcgNDYuMjk3IDUzLjk1NDcgNDUuNDk2MUM1My45NTQ3IDQ0LjY5NTMgNTMuMzA1NSA0NC4wNDYxIDUyLjUwNDcgNDQuMDQ2MUM1MS43MDM5IDQ0LjA0NjEgNTEuMDU0NyA0NC42OTUzIDUxLjA1NDcgNDUuNDk2MUM1MS4wNTQ3IDQ2LjI5NyA1MS43MDM5IDQ2Ljk0NjEgNTIuNTA0NyA0Ni45NDYxWiIgZmlsbD0id2hpdGUiLz4NCiAgICA8cGF0aCBkPSJNMjguODY1IDQ2Ljk0NTlDMjkuNjY1OSA0Ni45NDU5IDMwLjMxNSA0Ni4yOTY3IDMwLjMxNSA0NS40OTU5QzMwLjMxNSA0NC42OTUxIDI5LjY2NTkgNDQuMDQ1OSAyOC44NjUgNDQuMDQ1OUMyOC4wNjQyIDQ0LjA0NTkgMjcuNDE1IDQ0LjY5NTEgMjcuNDE1IDQ1LjQ5NTlDMjcuNDE1IDQ2LjI5NjcgMjguMDY0MiA0Ni45NDU5IDI4Ljg2NSA0Ni45NDU5WiIgZmlsbD0id2hpdGUiLz4NCjwvc3ZnPg0K'
let DATAMA_CURRENT_EXTENSION = 'powerbi'
let DATAMA_CURRENT_VERSION = 'local'
const DATAMA_DOCUMENTATION = 'https://datama-solutions.github.io/docs/extensions/index.html'
const DATAMA_STATE = {
    FAILED: 0,
    READY: 1,
    LOADING: 2,
    NEEDED: 3
}
const DATAMA_BASE_8 = 8
const DATAMA_BASE_16 = 16
const DATAMA_BASE_32 = 32
const DATAMA_BASE_36 = 36
const DATAMA_BASE_64 = 64
// Return unique values of an array
Array.prototype.unique = function () {
    let unique = [];
    let distinct = []
    for (let i = 0; i < this.length; i++) {
        if (!unique[this[i]]) {
            unique[this[i]] = 1
            distinct.push(this[i])
        }
    }
    return distinct
}
String.prototype.hash = function () {
    let result = [];
    let i = 0;
    while (i < this.length) {
        let chr = this.charCodeAt(i).toString(DATAMA_BASE_36);
        chr = ((chr.length === 1) ? '0' : '') + chr;
        result.push(chr.toString());
        i++;
    }
    return result.join('').toString();
}
String.prototype.format = function () {
    return this;
}
String.prototype.translate = function (vars) {
    return DataMaTranslate.translate(window.DATAMA_LOCAL, this, vars);
}
Number.prototype.format = function (properties) {
    return DataMath.formatNumber(this, window.DATAMA_LOCAL, properties)
}

/**
 * DataMa Core Light
 */
class DataMaLight {
    constructor(settings = {}, {target = '', solutions = [], callbacks = false, timer = false}) {

        DataMaLog.info("DataMa Light initialization...")
        DataMaColorsManager.init()
        if (settings.theme) {
            this.__loadTheme(settings.theme)
        }
        DataMaColorsManager.setPalette('custom')
        if (!callbacks) callbacks = {}
        this.__callbacks__ = callbacks
        this.__solutionsToBoot__ = solutions
        this.__core__ = {__datama__: this, state: {}}
        this.__core__.__timer__ = timer ? timer : (new DataMaTimer())
        this.__core__.__notifications__ = new DataMaNotifications({silent: !settings.configurable})
        // this.__core__.__notifications__.notify({id: 'datama-core', text: 'Loading DataMa Light core', progress: 0})
        let classList = []
        if (settings.configurable) classList.push('configurable')
        if (!settings?.license?.type || (settings?.license?.type === DATAMA_DEMO_LICENSE || settings?.license?.type === DATAMA_TEMP_LICENSE) || (settings?.license?.type === DATAMA_DEMO_LICENSE && !settings?.license?.valid)) classList.push('demo')
        let isAnonymous = !this.__core__.__settings__?.license?.valid
        this.__core__.__nodes__ = {
            container: DataMaUtils.getNode('div', target, classList, document.body, {style: DATAMA_CURRENT_EXTENSION === 'powerbi' && isAnonymous ? 'padding-top: 40px !important;' : ''})
        }
        // this.__core__.__notifications__.update('datama-core', 'Loading settings', 0.05)
        // this.__core__.__notifications__.update('datama-core', 'Loading source meta data', 0.15)
        let {source} = settings
        if (!settings) {
            this.__core__.__timer__.start('DataMaLight.init.settingsFromSource')
            settings = SettingsMutator.getSettingsFromSource({source})
            this.__core__.__timer__.stop('DataMaLight.init.settingsFromSource')
            this.__core__.__timer__.start('DataMaLight.init.columnsMetaData')
            settings.meta = SourceMutator.getMetaData(source).meta
            this.__core__.__timer__.stop('DataMaLight.init.columnsMetaData')

        }
        settings.__formulaPostFix__ = DataMath.convertFormulaToPostfix(settings.inputs.formula)
        this.__core__.__settings__ = settings
        this.__core__.__structure__ = {}
        this.__core__.__boot__ = {}
        this.__core__.__status__ = {
            compute: DATAMA_STATE.READY
        }
        this.__core__.__theme__ = {
            logo: {
                title: 'DataMa',
                src: window.DATAMA_LOGO_BASE64,
                url: 'https://www.datama.io/'
            }
        }
        this.__core__.common = {}
        this.__core__.solutions = {
            global: new DataMaGlobal(this.__core__)
        }
        // this.__core__.__notifications__.update('datama-core', 'Loading source type', 0.35)
        source = SourceMutator.loadSourceTypes(source, settings.meta)
        this.__core__.common = {
            source: {
                /**
                 * Original source
                 */
                original: source,
                /**
                 * Clean unused columns
                 */
                clean: SourceMutator.extractColumns(source, [...settings.dimensions, ...settings.metrics])
            }
        }
        document.body.removeEventListener('click', e => this.__bodyClickHandler(e))
        document.body.addEventListener('click', e => this.__bodyClickHandler(e))
        this.__initFonts()
        // this.__core__.__notifications__.update('datama-core', 'Loading core', 0.75)
        this.__update(true).then(() => {
            // this.__core__.__notifications__.update('datama-core', 'Core loaded', 1)
        })
    }

    __loadTheme({application, waterfall, plots}) {
        let palette = [
            ...Object.keys(waterfall).map(k => waterfall[k]),
            ...Object.keys(plots).map(k => plots[k])
        ];
        Object.keys(application).forEach((k) => {
            if (k !== 'font-family') {
                document.documentElement.style.setProperty('--color-' + k, application[k]);
            } else {
                document.documentElement.style.setProperty('--' + k, application[k]);
            }
        })
        DataMaColorsManager.setCustomPalette(palette)
    }

    __update(init = false) {
        return new Promise((resolve) => {
            if (this.__core__.__settings__.configurable) {
                if (!this.__core__.__structure__.header) {
                    this.__core__.__structure__.header = new DataMaHeader({core: this.__core__})
                    this.__core__.__nodes__.header = this.__core__.__structure__.header.__node__
                }
            }
            this.__core__.__nodes__.modules = DataMaUtils.getNode('main', 'datama-light-modules', [], this.__core__.__nodes__.container)
            if (!this.__core__.__structure__.footer) {
                this.__core__.__structure__.footer = new DataMaFooter(this.__core__)
            }
            this.__core__.__timer__.start('DataMaLight.init')
            if (init) {
                this.__core__.__boot__.core = this.init().then(() => {
                    this.__core__.__timer__.stop('DataMaLight.init')
                    this.__unmountAndReload()
                });
            } else {
                this.__unmountAndReload()
            }
            resolve()
        })
    }

    __unmountAndReload() {
        if (this.__core__.__settings__.errors.length === 0 && (!this.__core__.__settings__.noMetrics && !this.__core__.__settings__.noDimensions)) {
            if (this.__core__?.solutions?.global?.modules) {
                if (this.__core__.solutions.global.modules.introduction) {
                    this.unmount('global.introduction')
                }
                if (this.__core__.solutions.global.modules?.noMetrics) {
                    this.unmount('global.noMetrics')
                }
                if (this.__core__.solutions.global.modules?.noDimensions) {
                    this.unmount('global.noDimensions')
                }
            }
            this.compute();
        } else {
            if (!this.__core__.__settings__.empty && this.__core__.__settings__.loaded) {
                DataMaNotifications.makeNotification({
                    id: 'settings-error',
                    html: '<p>We were unable to launch Datama Light due to loading errors.</p>loadingErrors'.translate({loadingErrors: '<ul>' + this.__core__.__settings__.errors.map(e => '<li>- ' + e + '</li>').join('') + '</ul>'})
                }, {duration: 30000, error: true})
            } else if (this.__core__.__settings__.empty) {
                DataMaLog.warning('Introduce to Datama Light Compare')
                this.global('introduction')
            } else if (this.__core__.__settings__.metrics.length === 0) {
                this.global('noMetrics')
            } else if (this.__core__.__settings__.dimensions.length === 0) {
                this.global('noDimensions')
            } else {
                this.global('introduction')
            }
        }
    }

    /**
     * Generic handler [eq on click outside]
     * @param e
     * @private
     */
    __bodyClickHandler(e) {
        // Close select dropdown
        let dropDownNodes = document.getElementsByClassName('datama-input-select-open');
        [...dropDownNodes].forEach(node => {
            if (!node.isEqualNode(e.target.closest('.datama-input-select'))) {
                node.classList.remove('datama-input-select-open')
            }
        })
        // Close Context Menu dropdown
        let contextMenuNodes = document.getElementsByClassName('datama-context-menu-show');
        [...contextMenuNodes].forEach(node => {
            if (!node.isEqualNode(e.target.closest('.datama-context-menu-show'))) {
                node.classList.remove('datama-context-menu-show')
            }
        })
    }

    /**
     * Init Googles inc. fonts [Roboto / Montserrat]
     * @private
     */
    __initFonts() {
        return new Promise(resolve => {
            let nodeTracking = DataMaUtils.getNode('meta', 'allow-datama-tracking')
            nodeTracking.setAttribute('http-equiv', 'Content-Security-Policy')
            nodeTracking.setAttribute('content', "default-src 'self' https://api.prep2.datama.io https://api.prep.datama.io")
            let nodePreconnectGoogle = DataMaUtils.getNode('link', 'google-fonts-preconnect', [], document.head)
            let nodePreconnectGoogleStatic = DataMaUtils.getNode('link', 'google-fonts-preconnect-gstatic', [], document.head)
            let nodeFonts = DataMaUtils.getNode('link', 'google-fonts', [], document.head)
            nodePreconnectGoogle.setAttribute('rel', 'preconnect')
            nodePreconnectGoogle.setAttribute('href', 'https://fonts.googleapis.com')
            nodePreconnectGoogleStatic.setAttribute('crossorigin', '')
            nodePreconnectGoogleStatic.setAttribute('href', 'https://fonts.gstatic.com')
            nodeFonts.setAttribute('rel', 'stylesheet');
            nodeFonts.setAttribute('href', 'https://fonts.googleapis.com/css2?family=Karla:wght@200;300;400;500;600;700;800&Montserrat:wght@100;200;300;400;500;600;700&family=Roboto+Slab:wght@100;200;300;400;500;600&family=Roboto:wght@100;300;400;500;700&display=swap')
            resolve()
        })
    }

    global(module) {
        this.get(['global.' + module])
    }

    /**
     * Initialization of common vars for cores
     */
    init() {
        setTimeout(() => {
            if (this.__core__.__structure__.footer) {
                new Promise((resolve) => {
                    this.__core__.__structure__.footer.render(true);
                    resolve()
                })
            }
            if (this.__core__.__settings__.configurable) {
                new Promise((resolve) => {
                    this.__core__.__structure__.header.render(true);
                    resolve();
                })
            }
        })
        return new Promise((resolve, reject) => {
            try {
                this.__core__.common.computed = {
                    sourceGroupedDimensions: SourceMutator.groupBy(
                        this.__core__.common.source.clean,
                        this.__core__.__settings__.dimensions,
                        DataMaUtils.convertArrayToKeyObject(this.__core__.__settings__.metrics, 'sum')
                    ),
                    clusters: {
                        Start: [],
                        End: []
                    }
                }
                resolve();
            } catch (e) {
                this.__core__.__notifications__.notify({
                    id: 'datama-core-fail',
                    text: 'Fail to load data source'
                }, {duration: 10000})
                reject(e)
            }
        })
    }

    /**
     * Load a solution/module compute
     * @param modules
     */
    compute(modules = false) {
        if (this?.__core__?.__structure__?.header && this.__core__?.__nodes__?.compute) {
            this.__core__?.__nodes__?.compute.remove()
        }
        if (modules) {
            try {
                modules.forEach((m) => {
                    let solution = m.split('.')[0],
                        module = m.split('.')[1];
                    if (this.__core__.solutions[solution] && this.__core__.solutions[solution].modules[module] && !this.__core__.solutions[solution].modules[module].requireSolutionReboot) {
                        this.__core__.solutions[solution].modules[module].unmount();
                        this.get([module])
                    } else {
                        this.__core__.solutions[solution].init().then(() => {
                            if (this.__callbacks__?.onCompute && typeof this.__callbacks__?.onCompute === 'function') {
                                this.__callbacks__.onCompute({solution: solution, user: this.__core__.__settings__.license?.user || 'demo'})
                            }
                            this.__core__.solutions[solution].modules[module].update()
                        })
                    }
                })
            } catch (error) {
                if (this.__callbacks__?.onCompute && typeof this.__callbacks__?.onCompute === 'function') {
                    this.__callbacks__.onCompute({modules, error, user: this.__core__.__settings__.license?.user || 'demo'})
                }
            }
        } else {
            try {
                this.__solutionsToBoot__.forEach(solution => {
                    this.__core__.__boot__[solution] = new Promise((resolve, reject) => {
                        try {
                            if (this.__core__.solutions[solution] && this.__core__.solutions[solution]?.modules) {
                                Object.keys(this.__core__.solutions[solution].modules).forEach(module => this.__core__.solutions[solution].modules[module].unmount())
                            } else {
                                if (solution === 'compare') {
                                    this.__core__.solutions[solution] = new DataMaCompare(this.__core__)
                                }
                            }
                            let result = this.__core__.solutions[solution].init()
                            if (result?.then) {
                                result.then(() => {
                                    if (this.__callbacks__?.onCompute && typeof this.__callbacks__?.onCompute === 'function') {
                                        this.__callbacks__.onCompute({solution: solution, user: this.__core__.__settings__.license?.user || 'demo'})
                                    }
                                    resolve()
                                })
                            } else {
                                if (this.__callbacks__?.onCompute && typeof this.__callbacks__?.onCompute === 'function') {
                                    this.__callbacks__.onCompute({solution: solution, user: this.__core__.__settings__.license?.user || 'demo'})
                                }
                                resolve()
                            }
                        } catch (e) {
                            this.__core__.__notifications__.notify({
                                id: 'datama-solution-' + solution + '-fail',
                                text: 'Fail to load ' + solution + ' core'
                            }, {duration: 5000})
                            reject(e)
                        }
                    })
                })
            }  catch (error) {
                if (this.__callbacks__?.onCompute && typeof this.__callbacks__?.onCompute === 'function') {
                    this.__callbacks__.onCompute({solutions: this.__solutionsToBoot__, error, user: this.__core__.__settings__.license?.user || 'demo'})
                }
            }
        }
    }

    /**
     * get() allow to compute & append a new module.
     *
     * @param modules
     * modules ID is formatted like :
     * solutionName.moduleName
     *
     * e.g.:
     * DataMaLightInstance.get('compare.waterfall')
     *
     * @returns {Promise<Awaited<unknown>[]>}
     *
     * Returned promise resolve mean that Solution and Module has boot
     */
    get(modules = []) {
        if (!Array.isArray(modules) && typeof modules === 'string') modules = [modules]
        let promises = []
        modules.forEach(module => {
            let solution = module.split('.')[0];
            DataMaLog.info('DataMa Light - get ' + module)
            let mod = module.split('.')[1];
            let promise = new Promise(resolve => resolve())
            let booting = false;
            if (this.__core__.__boot__.core) {
                DataMaLog.loading("DataMa Light - Waiting Core...")
                booting = true;
                promise = this.__core__.__boot__.core
            }
            promises.push(promise)
            promise.then(() => {
                if (booting) {
                    booting = false;
                }
                if (this.__core__.solutions[solution] || this.__core__.__boot__[solution]) {
                    if (this.__core__.__boot__[solution]) {
                        DataMaLog.loading("DataMa Light - Waiting [" + solution + "]... ")
                        this.__core__.__boot__[solution].then(() => {
                            promises.push(new Promise((resolve) => {
                                this.__core__.solutions[solution].boot(mod)
                                resolve();
                            }))
                        })
                    } else {
                        promises.push(new Promise((resolve) => {
                            this.__core__.solutions[solution].boot(mod)
                            resolve();
                        }))
                    }
                } else {
                    DataMaLog.error("DataMa Light - Cannot boot " + mod + " on unmounted solution " + solution)
                }
            })
        })
        return Promise.all(promises)
    }

    /**
     * Reverse [*-dark, *-light] CSS vars
     */
    darkMode() {
        let computedStyle = getComputedStyle(document.documentElement);
        let lightRGB = computedStyle.getPropertyValue('--color-light-rgb');
        let darkRGB = computedStyle.getPropertyValue('--color-dark-rgb');
        let lightBackground = computedStyle.getPropertyValue('--color-bg-light');
        let darkBackground = computedStyle.getPropertyValue('--color-bg-dark');
        document.documentElement.style.setProperty('--color-dark-rgb', lightRGB);
        document.documentElement.style.setProperty('--color-light-rgb', darkRGB);
        document.documentElement.style.setProperty('--color-bg-dark', lightBackground);
        document.documentElement.style.setProperty('--color-bg-light', darkBackground);
        this.__core__.__theme__.darkMode = !this.__core__.__theme__.darkMode;
    }

    /**
     * Show computation button on header
     * @param modules
     */
    needRecompute(modules = false) {
        setTimeout(() => {
            if (this?.__core__?.__status__) {
                this.__core__.__status__.compute = DATAMA_STATE.NEEDED;
                if (!modules) {
                    modules = Object.keys(this.__core__.solutions).map(solution => this.__core__.solutions[solution].modules ? Object.keys(this.__core__.solutions[solution].modules).map(module => solution + '.' + module) : false).filter(e => e).flat()
                }
            }
            if (this?.__core__?.__structure__?.header) {
                this.__core__.__structure__.header.addComputeButton(modules)
            }
        })
    }

    /**
     * Unmount DataMaLight
     */
    unmount(id = false) {
        if (id) {
            let [module, solution] = id.split('.')
            if (this.__core__.solutions[solution]) {
                this.__core__.solutions[solution].unmount(module)
            }
        } else {
            // Unmount DataMa Light structure : header/footer...
            Object.keys(this.__core__.__structure__).forEach(element => this.__core__.__structure__[element].unmount())
            Object.keys(this.__core__.solutions).forEach(solution => {
                // Unmount solution
                this.__core__.solutions[solution].unmount();
            })
            // Remove nodes from DOM
            Object.keys(this.__core__.__nodes__).forEach(node => {
                this.__core__.__nodes__[node].remove();
            })
        }
    }

    /**
     * Print DataMa Light core
     */
    debug() {
        DataMaLog.debug(this.__core__)
        this.__core__.__timer__.history()
    }
}

/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaWaterfallPrepare.js project project-deep-sky
 */
class DataMaWaterfallPrepare {
    constructor(data, id='default', type='value') {
        this.filter = [
            "Filter_Rank",
            "Filter"
        ]
        this.zoomable = [
            "Level_00",
            "Level_01",
            "Level_02"
        ]
        this.id = id;
        this.type = type;
        this.remaining = 4
        this.current = 0;
        this.__data = data;
        let i = 0;
        while (i < this.__data.length) {
            let j = 0;
            while (j < this.filter.length) {
                if (this.__data[i][this.filter[j]] == null) {
                    this.__data[i][this.filter[j]] = ""
                } else {
                    this.__data[i][this.filter[j]] = this.__data[i][this.filter[j]].toString()
                }
                j++;
            }
            j = 0;
            while (j < this.zoomable.length) {
                if (this.__data[i][this.zoomable[j]] == null) {
                    this.__data[i][this.zoomable[j]] = "";
                }
                j++;
            }
            i++;
        }
        this.__makeUnique();
        this.__data = this.__data.map(r => {
            if (r.Type === 'net_OoS') {
                r.Row = (r.Row - 1.5)
            }
            return r;
        });
        this.__data.sort((a, b) => {
            return a.Row - b.Row;
        })
    }
    getData(filter, zooms) {
        let keys = Reflect.ownKeys(filter)
        if (keys.length > 1) {
            let oldValue = filter[keys[0]]
            filter = {}
            filter[keys[0]] = oldValue
        }
        let data = this.__findBy(filter, false,true);
        let firstLevelFilter = {};
        firstLevelFilter[this.zoomable[this.current + 1]] = ''
        data = this.__findBy(firstLevelFilter, data, true)
        data = data.concat(this.__flow(filter, zooms))
        // Here we need to calc remaining;
        return this.__sort(data.filter(d => parseFloat(d[this.type]) !== 0 || d.Type === 'net' || this.getElementDepth(d) === 0))
    }
    getScope(element, data, withOthersSub = true) {
        let i = 0;
        let neighborFilter = {};
        while (i < this.filter.length) {
            neighborFilter[this.filter[i]] = element[this.filter[i]]
            i++;
        }
        i = 0;
        while (i < this.zoomable.length - 1 && element[this.zoomable[i + 1]] !== "") {
            neighborFilter[this.zoomable[i]] = element[this.zoomable[i]]
            i++;
        }
        if (withOthersSub) {
            neighborFilter[this.zoomable[i]] = false
        } else {
            neighborFilter[this.zoomable[i]] = false
            neighborFilter[this.zoomable[i + 1]] = ''
        }
        let neighbors = this.__findBy(neighborFilter, data);
        let parent = data[data.indexOf(neighbors[0]) - 1];
        return this.__sort([parent, ...neighbors])
    }
    getElementDepth(element) {
        let depth = 0;
        while (depth < this.zoomable.length - 1 && element[this.zoomable[depth + 1]] !== '') {
            depth++;
        }
        return depth;
    }
    getMaxDepth(data) {
        let maxDepth = 0;
        let i = 0;
        while (i < data.length) {
            if (this.getElementDepth(data[i]) > maxDepth) {
                maxDepth = this.getElementDepth(data[i])
            }
            i++;
        }
        return maxDepth;
    }
    getChild(element, data, sub = false, filter = false, nextLevel = false) {
        let i = 0;
        let filters = {};
        if (filter) {
            filters[Object.keys(filter)[0]] = filter[Object.keys(filter)[0]];
        } else {
            if (filter !== false) {
                filters[this.filter[0]] = '1';
            }
        }
        while (i < this.zoomable.length && element[this.zoomable[i]] !== "") {
            filters[this.zoomable[i]] = element[this.zoomable[i]]
            i++;
        }
        if (i === this.zoomable.length) {
            return [];
        }
        if (nextLevel) {
            filters[this.zoomable[i]] = '';
        } else {
            if (sub) {
                filters[this.zoomable[i - 1]] = false;
            } else {
                filters[this.zoomable[i]] = false;
            }
        }
        let child = this.__findBy(filters, data);
        return this.__sort(child);
    }
    remain(data, number = 4) {
        let i = 0;
        number -= 1;
        const maxLevels = []
        let base;
        while (i < data.length) {
            if (this.getElementDepth(data[i]) === this.zoomable.length - 1) {
                maxLevels.push(data[i])
                base = {
                    ...this.__getFilterFromElement(data[i]),
                    ...this.__getZoomableFromElement(data[i]),
                    ...data[i]
                }
                base[this.zoomable[this.zoomable.length - 1]] = 'remaining'
            }
            i++;
        }
        if (maxLevels.length > number) {
            base.Total = maxLevels[maxLevels.length - 1].Total
            base.Start = maxLevels[number].Start
            base[this.type] = (base.Total - base.Start).toString()
            base.unique = maxLevels[number].unique
            base.Pts_gap = maxLevels.map((e,i) => i < number ? 0 : e.Pts_gap * 100).reduce((acc, v) => acc + v, 0)
            if (base.Impact_disp) {
                let to_reduce = maxLevels.filter((e,i) => i >= number)
                // Care about Waterfall V2 lib is used for Pivot CAS Tree, but all columns of compare does not exist in Pivot
                let suffix = base.Impact_disp.match(/([^\d.-]+)$/);
                let prefix = base.Impact_disp.match(/^([^\d.-]+)/);
                if (suffix) suffix = suffix[0]
                if (prefix) prefix = prefix[0]
                base.Impact = to_reduce.map(e => e.Impact).reduce((acc, v) => acc + v, 0)
                base.Impact_disp = (prefix || '') + base.Impact.toFixed(2) + (suffix || '')
                base.Pts_gap_disp = (base.Pts_gap >= 0 ? '+' + base.Pts_gap.toFixed(2) : base.Pts_gap.toFixed(2)) + 'pts'
                if (base.Split_Mix_and_Perf && base.Kind_Number === 1) {
                    let sum_of_mix_delta = to_reduce.map(e => e.MixDelta).reduce((acc, v) => acc + v, 0) * 100;
                    base.Top_Line_Label = sum_of_mix_delta.toFixed(Math.abs(sum_of_mix_delta) < 10 ? 1 : (Math.abs(sum_of_mix_delta) < 1 ? 2 : 0)) + 'pts'
                } else {
                    // Default
                    if (base.denom !== 'N') {
                        let sum_of_denom_start = to_reduce.map(e => e.DenomStart).reduce((acc, v) => acc + v, 0);
                        let sum_of_num_start = to_reduce.map(e => e.NumStart).reduce((acc, v) => acc + v, 0);
                        let ratio_start = sum_of_num_start / sum_of_denom_start;
                        let sum_of_denom_end = to_reduce.map(e => e.DenomEnd).reduce((acc, v) => acc + v, 0);
                        let sum_of_num_end = to_reduce.map(e => e.NumEnd).reduce((acc, v) => acc + v, 0);
                        let ratio_end = sum_of_num_end / sum_of_denom_end;
                        let ratio = (ratio_end / ratio_start) - 1;
                        // Seems ratio does not need to be multiplied by 100
                        base.Top_Line_Label = (ratio >= 0 ? '+' : '') + (ratio).toFixed(2) + '%'
                    } else {
                        let sum_of_num_start = maxLevels.map((e,i) => i < number ? 0 : e.NumStart).reduce((acc, v) => acc + v, 0);
                        let sum_of_num_end = maxLevels.map((e,i) => i < number ? 0 : e.NumEnd).reduce((acc, v) => acc + v, 0);
                        let ratio = (sum_of_num_start / sum_of_num_end) - 1;
                        base.Top_Line_Label = (ratio >= 0 ? '+' : '') + ratio.toFixed(2) + '%'
                    }
                }
                // base.Top_Line_Label = ''
            }
            if (base[this.type] >= 0) {
                base.Type = 'in'
            } else {
                base.Type = 'out'
            }
            base.Row = maxLevels[number].Row
            base.Spliced = maxLevels.length - number
            base.Hover = 'Click to expand ' + (maxLevels.length - number) + ' bars'
            base[this.zoomable[this.zoomable.length - 1]] = 'remaining'
            data.splice(data.indexOf(maxLevels[number]), (maxLevels.length - number), base)
        }
        return data;
    }
    __sum(data) {
        let steps = data.filter(d => d[this.zoomable[0]] !== '' && d[this.zoomable[1]] === '')
        let i = 0;
        let start = 0;
        while (i < steps.length) {
            data[data.indexOf(steps[i])].Start = start
            if (steps[i].Type !== 'net_OoS') {
                start += parseFloat(steps[i][this.type])
            } else {
                start = parseFloat(steps[i - 1].Total)
            }
            if (steps[i].Type !== 'net' && steps[i].Type !== 'net_OoS') {
                data[data.indexOf(steps[i])].Total = start
                data = this.__sumByStep(data, steps[i]);
            } else {
                data[data.indexOf(steps[i])].Total = parseFloat(steps[i][this.type])
            }
            i++;
        }
        return data;
    }
    __flow(filter, zooms) {
        let data = this.__findBy(filter, false,true);
        let __flowingFilter = filter;
        let index = 0;
        let keys = Reflect.ownKeys(zooms)
        let __flowedData = [];
        while (index < keys.length - 1) {
            __flowingFilter[keys[index]] = zooms[keys[index]];
            __flowingFilter[keys[index + 1]] = false
            if (index < this.zoomable.length - 2) {
                __flowingFilter[this.zoomable[index + 2]] = ''
            }
            __flowedData.push(...this.__findBy(__flowingFilter, data, false))
            index++;
        }
        return __flowedData;
    }
    __makeUnique() {
        let i = 0;
        let data = this.__data;
        while (i < data.length) {
            data[i]["unique"] = "waterfall-row-" + this.id + "-" + ((data[i].Main_Filter_Type || '') + (data[i].Filter || '') + (data[i].Level_00 || '') + (data[i].Level_01 || '') + (data[i].Level_02 || '') + (data[i].Type || '')).hash();
            let j = 0;
            let mandatory = [...this.zoomable, ...this.filter, 'Hover', 'Label', 'line_1', 'line_2', 'line_3', 'Top_Line_Label', 'Type', 'Value', 'Row', 'Start', 'Total', 'Filter_Rank']
            while (j < mandatory.length) {
                // Static export specification, all NULL value are not present in object, so set them to blank string
                if (data[i][mandatory[j]] == null) {
                    data[i][mandatory[j]] = ''
                } else if (Array.isArray(data[i][mandatory[j]])) {
                    // Some value are encaps into bracket so we need to extract them
                    data[i][mandatory[j]] = data[i][mandatory[j]][0]
                } else if (typeof data[i][mandatory[j]] === 'object') {
                    // Some null value are converted into empty object, set them to string
                    data[i][mandatory[j]] = ''
                }
                j++;
            }
            i++;
        }
        this.__data = this.__sum(data);
    }
    __sumByStep(data, parent) {
        let stepElements = data.filter(d => d[this.zoomable[0]] === parent[this.zoomable[0]])
        let uniqueRanking = stepElements.filter(d => d[this.filter[0]] !== '').map(d => d[this.filter[0]]).filter((value, index, self) => {
            return self.indexOf(value) === index && value !== '';
        });
        let start = parent.Start;
        let i = 0;
        while (i < uniqueRanking.length) {
            let filteredData = stepElements.filter(d => d[this.filter[0]] === uniqueRanking[i])
            let filteredContainer = filteredData.filter(d => d[this.zoomable[2]] === '')
            let filteredChilds = filteredData.filter(d => d[this.zoomable[2]] !== '')
            let j = 0;
            let containerStart = start
            while (j < filteredContainer.length) {
                data[data.indexOf(filteredContainer[j])].Start = containerStart
                containerStart += parseFloat(filteredContainer[j][this.type])
                data[data.indexOf(filteredContainer[j])].Total = containerStart
                j++;
            }
            let k = 0;
            let childStart = start
            while (k < filteredChilds.length) {
                data[data.indexOf(filteredChilds[k])].Start = childStart
                childStart += parseFloat(filteredChilds[k][this.type])
                data[data.indexOf(filteredChilds[k])].Total = childStart
                k++;
            }
            i++;
        }
        return data;
    }
    __sort(data) {
        return data.sort((a, b) => {
            return a.Row - b.Row;
        })
    }
    __findBy(filter, initial = false, keepStep = false) {
        let i = 0;
        let keys = Reflect.ownKeys(filter);
        let data = initial !== false ? initial : this.__data;
        while (i < keys.length) {
            data = filter[keys[i]] === false ?
                data.filter(d => d[keys[i]] !== '' || (keepStep && d[this.zoomable[0]] !== '' && d[this.zoomable[1]] === ''))
                : data.filter(d => d[keys[i]] === filter[keys[i]] || (keepStep && d[this.zoomable[0]] !== '' && d[this.zoomable[1]] === ''))
            i++;
        }
        return data;
    }
    __getZoomableFromElement(element) {
        let i = 0;
        let result = {};
        while (i < this.zoomable.length - 1 && element[this.zoomable[i]] !== '') {
            result[this.zoomable[i]] = element[this.zoomable[i]];
            i++;
        }
        result[this.zoomable[i]] = false;
        return result;
    }
    __getFilterFromElement(element) {
        let i = 0;
        let result = {};
        while (i < this.filter.length) {
            result[this.filter[i]] = element[this.filter[i]];
            i++;
        }
        return result;
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaWaterfall.js project project-deep-sky
 */
class DataMaWaterfall {
    constructor({d3, dataset=null, configuration=null, drill_down='Steps then Dimensions', comparison=false, target=null, filter, score=null, reverse=false, step=false, dimension=false, side='horizontal', layers=['waterfall', 'tree'], shortcut=false}) {
        this.__target = target;
        this.mounted = false;
        if (this.__target != null) {
            this.__callback = {};
            this.__d3 = d3;
            this.__palette = {
                out: '#eea59c',
                in: '#A8D7D2',
                net: '#4682B4',
                Up: '#499e95',
                Down: '#dd4b39'
            }
            this.__keys = {
                shift: false,
                ctrl: false
            }
            let element = document.getElementById(target);
            this.__el = element;
            this.__hover = new DataMaHover(this)
            this.__contextMenu = new DataMaWaterfallContextMenu(this)
            if (configuration) {
                configuration.baseWidth = element.clientWidth
                configuration.baseHeight = element.clientHeight - parseInt(getComputedStyle(element).paddingTop.replace('px', ''))
                if (configuration?.axis?.reverse == null) configuration.axis.reverse = reverse
                if (configuration?.axis?.side == null) configuration.side = side
                if (typeof configuration.scale.padding !== 'object') {
                    configuration.scale.padding = {top: 0.025, bottom: 0.35}
                }
            }
            this.__score = score;
            this.__configuration = configuration
            this.__default_filter = filter;
            if (dataset != null) {
                this.__datasets = {
                    default: dataset,
                    comparison: comparison
                }
                if (drill_down === 'Auto') {
                    let bestFilterValue = Math.min(...dataset.filter(r =>  r.Main_Filter_Interest != null && r.Main_Filter_Interest !== '').map(r => r.Main_Filter_Rank || 0));
                    this.__drill_down = dataset.filter(r => parseFloat(r.Main_Filter_Rank) === parseFloat(bestFilterValue)).map(r => r.Main_Filter_Type).unique()[0];
                } else {
                    this.__drill_down = drill_down
                }
                if (this.__drill_down === 'Dimensions then Steps') {
                    this.__drill_down_dimension = dataset.filter(r => r.Main_Filter_Type === this.__drill_down && r.Filter_Rank != null && r.Filter_Rank.toString() === '1' && r.Main_Filter !== '')[0].Filter;
                    dataset = dataset.filter(r => (r.Main_Filter_Type === this.__drill_down && ((this.__drill_down === 'Dimensions then Steps' && r.Filter === this.__drill_down_dimension) || this.__drill_down !== 'Dimensions then Steps')) || r.Type === 'net' || r.Type === 'net_OoS').filter(e => e.Type !== "")
                    this.__default_filter = {Filter: this.__drill_down_dimension}
                    this.__dataset = new DataMaWaterfallPrepare(dataset.filter(r => r.Type !== ''), 'default', configuration.value);
                    if (comparison) {
                        this.__configuration.coc = false;
                    }
                } else {
                    if (this.__configuration.dimension) {
                        this.__default_filter = {Filter: this.__configuration.dimension};
                    } else {
                        this.__default_filter = {Filter_Rank: '1'};
                    }
                    this.__dataset = new DataMaWaterfallPrepare(dataset.filter(r => r.Main_Filter_Type !== 'Dimensions then Steps' && r.Type !== ''), 'default', configuration.value);
                    if (comparison) {
                        this.__comparison = new DataMaWaterfallPrepare(comparison.filter(r => r.Main_Filter_Type !== 'Dimensions then Steps' && r.Type !== ''), 'coc', configuration.value)
                        this.__configuration.coc = true;
                    }
                }
                if (comparison) this.__testIfWaterfallsCanBeJoined();
                this.__layers = {}
                if (layers.indexOf('waterfall') !== -1) {
                    this.__layers.waterfall = new DataMaLayerWaterfall(this)
                }
                if (layers.indexOf('tree') !== -1) {
                    this.__layers.tree = new DataMaLayerTree(this)
                }
                if (layers.indexOf('bubbles') !== -1) {
                    this.__layers.bubbles = new DataMaLayerBubbles(this)
                }
                if (this.__configuration.explore.openBarByDefault && !this.__configuration?.filters?.length) {
                    this.__openDefaultBiggestVariation(step, dimension);
                }
                if (shortcut) {
                    this.addWaterfallShortcut()
                }
            } else throw new Error('DataMa Waterfall : you must provide a data source')
        } else throw new Error('DataMa Waterfall : you must define a target')
    }

    __makeDrillDownSelector(node) {
        let reverseAxisContainer = DataMaUtils.getNode('li', false, ['datama-shortcut-item'], node, {style: 'width: unset'})
        let items = this.__datasets.default.map(r => r.Main_Filter_Type).filter(e => e).unique();
        if (items.indexOf('Dimensions then Steps') !== -1) {
            items.splice(items.indexOf('Steps then Dimensions'), 1, this.__datasets.default.filter(r => r.Main_Filter_Type === 'Steps then Dimensions').map(r => JSON.stringify({
                text: r.Main_Filter,
                value: r.Main_Filter_Type + '.' + r.Main_Filter,
                interest: r.Main_Filter_Interest,
                label: 'Interest score:',
                variant: true
            })).unique().map(e => JSON.parse(e)))
            items.splice(items.indexOf('Dimensions then Steps'), 1, this.__datasets.default.filter(r => r.Main_Filter_Type === 'Dimensions then Steps').map(r => JSON.stringify({
                text: r.Main_Filter,
                value: r.Main_Filter_Type + '.' + r.Main_Filter,
                interest: r.Main_Filter_Interest,
                label: 'Interest score:'
            })).unique().map(e => JSON.parse(e)))
            items = items.flat().sort((a, b) => b.interest - a.interest);
        }
        reverseAxisContainer.append(new DataMaInput({
            id: 'drill_down',
            type: 'select-weighted',
            items: items,
            weights: items.map(e => e.interest),
            value: this.__drill_down,
            light: true,
            props: {
              style: 'font-size: 12px;font-weight: 300;height: 20px;'
            },
            callbacks: {
                selected: element => {
                    // Real selection
                    return element.value === this.__drill_down + '.' + this.__drill_down_dimension
                    // Default steps then dimensions
                    || (this.__drill_down === 'Steps then Dimensions' && element.value.split('.')[0] === this.__drill_down)
                },
                input: e => {
                    if (this.__callback["contextMenu.drillDown"]) {
                        this.__callback["contextMenu.drillDown"](e)
                    }
                    this.setData({
                        source: this.__datasets.default,
                        comparison: this.__datasets.comparison,
                        drill_down: e.split('.')[0],
                        drill_down_dimension: e.replace(e.split('.')[0] + '.', '')
                    })
                }
            }
        }).render())
    }

    __makeReverseAxisShortcut(node) {
        // Reverse Axis
        let reverseAxisContainer = DataMaUtils.getNode('li', false, ['datama-shortcut-item'], node)
        let reverseAxisShortcut = DataMaUtils.getNode('button', 'datama-waterfall-shortcut-' + this.__target + '-reverse-axis', ['datama-shortcut-item'], reverseAxisContainer)
        if (this.__configuration.axis.reverse) {
            reverseAxisShortcut.classList.add('active')
        }
        reverseAxisShortcut.append(DataMaIcons.get('reverse-axis'))
        return reverseAxisShortcut;
    }
    __makeWaterfallShortcut(node) {
        // Waterfall
        let waterfallContainer = DataMaUtils.getNode('li', false, ['datama-shortcut-item'], node)
        let waterfallShortcut = DataMaUtils.getNode('button', 'datama-waterfall-shortcut-' + this.__target + '-waterfall', ['datama-shortcut-item'], waterfallContainer)
        if (this.__configuration.plot === 'waterfall') {
            waterfallShortcut.classList.add('active')
        }
        waterfallShortcut.append(DataMaIcons.get('compare'))
        return waterfallShortcut;
    }
    __makeTreeShortcut(node) {
        // Tree
        let treeContainer = DataMaUtils.getNode('li', false, ['datama-shortcut-item'], node)
        let treeShortcut = DataMaUtils.getNode('button', 'datama-waterfall-shortcut-' + this.__target + '-tree', ['datama-shortcut-item'], treeContainer)
        if (this.__configuration.plot === 'tree') {
            treeShortcut.classList.add('active')
        }
        treeShortcut.append(DataMaIcons.get('tree'))
        return treeShortcut;
    }
    __listenShortcuts(reverse, waterfall, tree) {
        let waterfallListener = e => {
            e.preventDefault();
            tree.classList.remove('active')
            waterfall.classList.add('active')
            this.setPlot('waterfall')
        }
        let treeListener = e => {
            e.preventDefault();
            waterfall.classList.remove('active')
            tree.classList.add('active')
            this.setPlot('tree')
        }
        let reverseListener = e => {
            e.preventDefault();
            this.reverseAxis()
            if (this.__configuration.axis.reverse) {
                reverse.classList.add('active')
            } else {
                reverse.classList.remove('active')
            }
            this.update()
        }
        waterfall.removeEventListener('click', waterfallListener.bind(this))
        waterfall.addEventListener('click', waterfallListener.bind(this))
        tree.removeEventListener('click', treeListener.bind(this))
        tree.addEventListener('click', treeListener.bind(this))
        reverse.removeEventListener('click', reverseListener.bind(this))
        reverse.addEventListener('click', reverseListener.bind(this))
    }
    addWaterfallShortcut() {
        this.__el.classList.add('datama-waterfall-with-shortcut')
        let node = DataMaUtils.getNode('ul', 'datama-waterfall-shortcut-' + this.__target, ['datama-shortcut'], this.__el)
        if (this.__datasets.default.map(r => r.Main_Filter_Type).filter(e => e).unique().length === 2) {
            this.__makeDrillDownSelector(node)
            node.append(DataMaUtils.divider('li', true))
        }
        let reverseAxisShortcut = this.__makeReverseAxisShortcut(node)
        node.append(DataMaUtils.divider('li', true))
        let waterfallShortcut = this.__makeWaterfallShortcut(node)
        let treeShortcut = this.__makeTreeShortcut(node)
        this.__listenShortcuts(reverseAxisShortcut, waterfallShortcut, treeShortcut)
        // node.append(DataMaUtils.divider('li', true))
        // Settings
        // let settingsContainer = DataMaUtils.getNode('li', false, ['datama-shortcut-item'], node)
        // let settingsShortcut = DataMaUtils.getNode('button', 'datama-waterfall-shortcut-' + this.__target + '-settings', ['datama-shortcut-item'], settingsContainer)
        // settingsShortcut.append(DataMaIcons.get('cog'))
    }
    setConfiguration(configuration) {
        // Break pointer (unmount unexpected behavior)
        configuration = JSON.parse(JSON.stringify(configuration))
        // Preserve previous data
        configuration.coc = this.__configuration.coc
        configuration.baseWidth = this.__configuration.baseWidth
        configuration.baseHeight = this.__configuration.baseHeight
        configuration.width = this.__configuration.width
        configuration.height = this.__configuration.height
        configuration.padding.b = parseInt(configuration.padding.b)
        configuration.padding.t = parseInt(configuration.padding.t)
        configuration.padding.r = parseInt(configuration.padding.r)
        configuration.padding.l = parseInt(configuration.padding.l)
        if (typeof configuration.scale.padding !== 'object') {
            configuration.scale.padding = {top: 0.025, bottom: 0.35}
        }
        this.__configuration = configuration
        // Object.keys(this.__layers).map(l => this.__layers[l].configuration = configuration)
        this.__addFrames()
        this.update()
    }
    setColors(colors) {
        this.__palette = colors;
    }
    addChunkedData(newSource, newSourceCoC) {
        return new Promise((resolve, reject) => {
            try {
                this.__datasets.default = newSource
                this.__datasets.comparison = newSourceCoC
                this.__dataset = new DataMaWaterfallPrepare(newSource, 'default', this.__configuration.value);
                if (newSourceCoC) {
                    this.__comparison = new DataMaWaterfallPrepare(newSourceCoC, 'coc', this.__configuration.value)
                    this.__configuration.coc = true;
                }
                // Get new core data
                this.__core = this.__layers[this.__configuration.plot].getCore(
                    {
                        source: this.__dataset.__data,
                        comparison: this.__comparison ? this.__comparison.__data : false,
                        filter: this.__default_filter,
                        parents: this.__core.parents
                    },
                    this.__core.frame,
                    this.__core.frame.comparison
                )
                resolve()
            } catch (e) {
                reject(e)
            }
        })
    }
    setData({source, comparison = false, drill_down="Steps then Dimensions", drill_down_dimension = false, step=false, dimension=false}, score) {
        let keys = [
            'bars',
            'bar',
            'links',
            'texts',
            'annotations',
            'x_line',
            'linksChevronLeft',
            'linksChevronRight',
            'x',
            'y'
        ]
        let i = 0;
        while (i < keys.length) {
            if (this.__core.frame[keys[i]]) {
                this.__core.frame[keys[i]].remove().exit()
                delete this.__core.frame[keys[i]];
            }
            if (this.__core.frame.comparison) {
                if (this.__core.frame.comparison[keys[i]]) {
                    this.__core.frame.comparison[keys[i]].remove().exit()
                    delete this.__core.frame.comparison[keys[i]];
                }
            }
            i++;
        }
        this.__score = score;
        this.__configuration.coc = comparison != null && comparison !== false;
        this.__datasets = {
            default: source,
            comparison: comparison
        }
        if (drill_down === 'Auto') {
            let bestFilterValue = Math.min(...source.filter(r =>  r.Main_Filter_Interest != null && r.Main_Filter_Interest !== '').map(r => r.Main_Filter_Rank || 0));
            this.__drill_down = source.filter(r => parseFloat(r.Main_Filter_Rank) === parseFloat(bestFilterValue)).map(r => r.Main_Filter_Type).unique()[0];
        } else {
            this.__drill_down = drill_down
        }
        if (this.__drill_down === 'Dimensions then Steps') {
            if (drill_down_dimension) {
                this.__drill_down_dimension = drill_down_dimension;
            } else {
                this.__drill_down_dimension = source.filter(r => r.Main_Filter_Type === this.__drill_down && r.Filter_Rank != null && r.Filter_Rank.toString() === '1' && r.Main_Filter !== '')[0].Filter;
            }
            this.__default_filter = {Filter: this.__drill_down_dimension};
            source = source.filter(r => (r.Main_Filter_Type === this.__drill_down && ((this.__drill_down === 'Dimensions then Steps' && r.Filter === this.__drill_down_dimension) || this.__drill_down !== 'Dimensions then Steps')) || r.Type === 'net' || r.Type === 'net_OoS').filter(e => e.Type !== "")
            this.__dataset = new DataMaWaterfallPrepare(source.filter(r => r.Type !== ''), 'default', this.__configuration.value);
            this.__configuration.coc = false;
            if (this.__comparison) delete this.__comparison
        } else {
            this.__default_filter = {Filter_Rank: '1'};
            this.__dataset = new DataMaWaterfallPrepare(source.filter(r => r.Main_Filter_Type !== 'Dimensions then Steps' && r.Type !== ''), 'default', this.__configuration.value);
            if (comparison) {
                this.__comparison = new DataMaWaterfallPrepare(comparison.filter(r => r.Main_Filter_Type !== 'Dimensions then Steps' && r.Type !== ''), 'coc', this.__configuration.value)
                this.__configuration.coc = true;
            } else {
                this.__configuration.coc = false;
                if (this.__comparison) delete this.__comparison
            }
        }
        if (comparison) this.__testIfWaterfallsCanBeJoined();
        if (this.__configuration.explore.openBarByDefault && !this.__configuration?.filters?.length) {
            this.__openDefaultBiggestVariation(step, dimension, true);
        }
        this.draw()
    }

    setScore(score, scoreCoC) {
        this.__score = score;
        this.__scoreCoC = scoreCoC;
    }

    reverseAxis(value=null) {
        if (value == null) {
            this.__configuration.axis.reverse = !this.__configuration.axis.reverse
        } else {
            this.__configuration.axis.reverse = value;
        }
    }

    __openDefaultBiggestVariation(step=false, dimension=false, force=false) {
        if (!this.mounted || force) {
            this.__layers[this.__configuration.plot].filters = []
            let biggestFirstLevel;
            if (this.__callback["core.defaultFilter"]) {
                biggestFirstLevel = this.__callback["core.defaultBarExpand"]()
            } else {
                let firstLevel = this.__dataset.__data.filter(r => !r[this.__configuration.explore.levels[1]] || r[this.__configuration.explore.levels[1]] === '')
                biggestFirstLevel = firstLevel.filter(r => Math.abs(r[this.__configuration?.gauge || this.__configuration.value]) === Math.max(...firstLevel.filter(r => r.Type !== 'net' && r.Type !== 'net_OoS').map(r => Math.abs(r[this.__configuration?.gauge || this.__configuration.value]))))[0]
            }
            let biggestPath;
            if (this.__callback["core.defaultFilterLevel"]) {
                biggestPath = this.__callback["core.defaultFilterLevel"]()
            } else {
                if (this.__drill_down === 'Steps then Dimensions') {
                    if (step && dimension) {
                        biggestPath = [{Filter: dimension}, {Level_00: step}, {Level_01: false}, {Level_02: false}]
                    } else {
                        if (step) {
                            biggestPath = [{...this.__default_filter}, {Level_00: step}, {Level_01: false}, {Level_02: false}]
                        } else {
                            let source = this.__datasets.default.filter(r => r.Main_Filter_Type !== 'Dimensions then Steps')
                            biggestPath = this.__layers[this.__configuration.plot].__core.__makeWaterfallPath(biggestFirstLevel, false)
                            let childs = this.__layers[this.__configuration.plot].__core.__getRowsByPath(biggestPath, source).filter(r => r.Type !== 'net' && r.Type !== 'net_OoS')
                            let ranks = childs.filter(r => r.Filter_Rank && r.Filter_Rank.length).map(sr => parseFloat(sr.Filter_Rank));
                            let toUse = Math.min(...ranks);
                            childs = childs.filter(c => parseFloat(c.Filter_Rank) === toUse)
                            if (childs[0] == null) {
                                return false
                            }
                            biggestPath = [{Filter: childs[0].Filter}, ...biggestPath]
                        }
                    }
                } else {
                    biggestPath = this.__layers[this.__configuration.plot].__core.__makeWaterfallPath(biggestFirstLevel)
                }
            }
            if (!this.__layers[this.__configuration.plot].__filterExist(biggestPath, false)) {
                this.__layers[this.__configuration.plot].filters.push(biggestPath)
                let child = this.__layers[this.__configuration.plot].__core.__getRowsByPath(biggestPath, this.__datasets.default).filter(e => e.Type !== 'net' && e.Type !== 'net_OoS' && (!e.Level_02 || e.Level_02 === ''))
                // Expand child
                child
                    .forEach(c => {
                        let path = this.__layers[this.__configuration.plot].__core.__makeWaterfallPath(c);
                        /**
                         * Add new filter
                         */
                        this.__layers[this.__configuration.plot].filters.push(path);
                    })
            }
        }
    }

    __testIfWaterfallsCanBeJoined() {
        if (this.__comparison && this.__configuration.coc) {
            if (this.__comparison.__data.filter(r => r.Type === 'net')[1].Value === this.__dataset.__data.filter(r => r.Type === 'net')[0].Value) {
                this.__canBeJoin = true;
                this.__join = this.__configuration.comparison.allowAutoJoin && this.__configuration.comparison.side === 'overlay';
                if (this.__join) {
                    this.__joinContinuous = false;
                }
            } else if (this.__comparison.__data.filter(r => r.Type === 'net')[0].Value === this.__dataset.__data.filter(r => r.Type === 'net')[1].Value) {
                this.__canBeJoin = true;
                this.__join = this.__configuration.comparison.allowAutoJoin && this.__configuration.comparison.side === 'overlay';
                if (this.__join) {
                    this.__joinContinuous = true;
                }
            } else {
                this.__canBeJoin = false;
            }
        } else {
            this.__join = false;
            this.__joinContinuous = false;
        }
    }
    setComparisonSide(value='horizontal') {
        this.__configuration.comparison.side = value;
        this.__testIfWaterfallsCanBeJoined();
        if (this.__configuration.explore.openBarByDefault && !this.__configuration?.filters?.length) {
            this.__openDefaultBiggestVariation(this.__configuration.step, this.__configuration.dimension);
        }
        this.__addFrames()
        this.update()
    }

    __addSvgFrame(frames) {
        if (frames != null && frames.svg) {
            frames.svg
                .attr("width", this.__configuration.baseWidth)
                .attr("height", this.__configuration.baseHeight)
            if (this.__configuration.debug && frames.debug_svg) {
                frames.debug_svg
                    .attr('width', this.__configuration.baseWidth)
                    .attr('height', this.__configuration.baseHeight)
                    .attr("stroke", 'rgba(0,0,0,' + (this.__configuration.debug ? 1 : 0) + ')')
                    .attr("stroke-width", this.__configuration.debug ? 1 : 0)
                    .attr("fill", 'white')
            }
        } else {
            if (frames == null) frames = {}
            frames.svg = this.__d3.select('#' + this.__target)
                .selectAll('#datama-waterfall-container-' + this.__target)
                .data([{id: 'svg'}], r => r.id)
                .enter()
                .append("svg")
                .attr('id', 'datama-waterfall-container-' + this.__target)
                .attr('class', 'datama-waterfall-container')
                .attr("width", this.__configuration.baseWidth)
                .attr("height", this.__configuration.baseHeight)
                .attr('fill', 'white')
            if (this.__configuration.debug) {
                frames.debug_svg = frames.svg
                    .selectAll("#debug-svg")
                    .data([{id: 'debug-svg'}], r => r.id)
                    .enter()
                    .append('rect')
                    .attr("id", d => d.id)
                    .attr('x', 0)
                    .attr('y', 0)
                    .attr('class', 'no-click')
                    .attr('width', this.__configuration.baseWidth)
                    .attr('height', this.__configuration.baseHeight)
                    .attr("stroke", 'rgba(0,0,0,' + (this.__configuration.debug ? 1 : 0) + ')')
                    .attr("stroke-width", this.__configuration.debug ? 1 : 0)
                    .attr("fill", 'white')
            }
        }
    }
    __addHeaderFrame(frames) {
        if (frames.header == null) frames.header = {};
        if (frames.header.container != null) {
            frames.header.container
                .attr('transform', 'translate(' + this.__configuration.padding.l + ", 0)")
                .attr('width', this.__configuration.baseWidth - (this.__configuration.padding.l + this.__configuration.padding.r))
                .attr('height', ((this.__configuration.fonts.size * 1.75) + (this.__configuration.fonts.size * 1.25)) * 1.5)
            frames.header.title
                .attr('transform', 'translate(0, ' + this.__configuration.padding.t + ')')
                .attr('width', this.__configuration.baseWidth - (this.__configuration.padding.l + this.__configuration.padding.r))
                .attr('height', this.__configuration.fonts.size * 1.75 * 1.25)
            // frames.header.subtitle
            //     .attr('transform', 'translate(0, ' + (this.__configuration.padding.t + (this.__configuration.fonts.size * 1.75 * 1.25)) + ')')
            //     .attr('height', (this.__configuration.fonts.size * 1.25) * 1.25)
            if (this.__configuration.debug && frames.debug_title) {
                frames.debug_title
                    .attr('width', this.__configuration.baseWidth - (this.__configuration.padding.r + this.__configuration.padding.l))
                    .attr('height', (this.__configuration.fonts.size * 1.75) * 1.25)
                    .attr("stroke", 'rgba(0,0,0,' + (this.__configuration.debug ? 1 : 0) + ')')
                    .attr("stroke-width", this.__configuration.debug ? 1 : 0)
                    .attr("fill", 'white')
                    .attr('fill-opacity', 1)
            }
            // frames.debug_subtitle
            //     .attr('width', this.__configuration.baseWidth - (this.__configuration.padding.r + this.__configuration.padding.l))
            //     .attr('height', (this.__configuration.fonts.size * 1.25) * 1.25)
            //     .attr("stroke", 'rgba(0,0,0,' + (this.__configuration.debug ? 1 : 0) + ')')
            //     .attr("stroke-width", this.__configuration.debug ? 1 : 0)
            //     .attr("fill", 'white')
            //     .attr('fill-opacity', 1)
        } else {
            frames.header.container = frames.svg
                .selectAll("#header-container")
                .data([{id: 'header-container'}], r => r.id)
                .enter()
                .append('g')
                .attr("id", d => d.id)
                .attr('class', 'datama-waterfall-header')
                .attr('transform', 'translate(' + this.__configuration.padding.l + ", 0)")
                .attr('width', this.__configuration.baseWidth - (this.__configuration.padding.l + this.__configuration.padding.r))
                .attr('height', ((this.__configuration.fonts.size * 1.75) + (this.__configuration.fonts.size * 1.25)) * 1.5)
            frames.header.title = frames.header.container
                .selectAll("#header-title")
                .data([{id: 'header-title'}], r => r.id)
                .enter()
                .append('g')
                .attr("id", d => d.id)
                .attr('class', 'datama-waterfall-title')
                .attr('transform', 'translate(0, ' + this.__configuration.padding.t + ')')
                .attr('width', this.__configuration.baseWidth - (this.__configuration.padding.l + this.__configuration.padding.r))
                .attr('height', (this.__configuration.fonts.size * 1.75) * 1.25)
            // frames.header.subtitle = frames.header.container
            //     .selectAll("#header-subtitle")
            //     .data([{id: 'header-subtitle'}], r => r.id)
            //     .enter()
            //     .append('g')
            //     .attr("id", d => d.id)
            //     .attr('class', 'datama-waterfall-subtitle')
            //     .attr('transform', 'translate(0, ' + (this.__configuration.padding.t) + ')')
            //     .attr('height', (this.__configuration.fonts.size * 1.25) * 1.25)
            if (this.__configuration.debug) {
                frames.debug_title = frames.header.title
                    .selectAll("#header-debug-title")
                    .data([{id: 'header-debug-title'}], r => r.id)
                    .enter()
                    .append('rect')
                    .attr("id", d => d.id)
                    .attr('x', 0)
                    .attr('y', 0)
                    .attr('class', 'no-click')
                    .attr('width', this.__configuration.baseWidth - (this.__configuration.padding.r + this.__configuration.padding.l))
                    .attr('height', (this.__configuration.fonts.size * 1.75) * 1.25)
                    .attr("stroke", 'rgba(0,0,0,' + (this.__configuration.debug ? 1 : 0) + ')')
                    .attr("stroke-width", this.__configuration.debug ? 1 : 0)
                    .attr("fill", 'white')
                    .attr('fill-opacity', 1)
            }
        }
    }

    __addPlotFrame(frames) {
        let plotWidth = this.__configuration.baseWidth - (this.__configuration.padding.l + this.__configuration.padding.r)
        let plotHeight = this.__configuration.baseHeight - ((this.__configuration.padding.t + this.__configuration.padding.b + (((this.__configuration.fonts.size * 1.75) + (this.__configuration.fonts.size * 1.25)) * 1.5)))
        let translateX = 0, translateY = 0;
        if (this.__comparison && this.__configuration.coc) {
            if (this.__configuration.comparison.side === 'horizontal') {
                plotWidth = (plotWidth / 2) - this.__configuration.bars.depthPadding
                translateX += plotWidth + (this.__configuration.bars.depthPadding * 2)
            } else if (this.__configuration.comparison.side === 'vertical') {
                plotHeight = (plotHeight / 2) - this.__configuration.bars.depthPadding
                translateY += plotHeight + (this.__configuration.bars.depthPadding * 2)
            } else if (this.__configuration.comparison.side === 'overlay') {
                // CoC bars can overlay default waterfall bars
                if (this.__configuration.axis.reverse) {
                    translateX = this.__configuration.comparison.translate.y
                    translateY = this.__configuration.comparison.translate.x
                } else {
                    translateX = this.__configuration.comparison.translate.x
                    translateY = this.__configuration.comparison.translate.y
                }
            }
            if (frames.comparison) {
                frames.comparison.plot
                    .attr('transform', 'translate(' + (this.__configuration.padding.l + translateX) + ", " + (translateY + this.__configuration.padding.t + (((this.__configuration.fonts.size * 1.75) + (this.__configuration.fonts.size * 1.25)) * 1.25)) + ")")
                    .attr('width', plotWidth)
                    .attr('height', plotHeight)
                if (this.__configuration.debug && frames.comparison.debug_comparison_plot) {
                    frames.comparison.debug_comparison_plot
                        .attr('class', this.__configuration.comparison.side === 'overlay' ? 'no-click' : '')
                        .attr('x', (this.__configuration.padding.l + translateX))
                        .attr('y', 0)//(translateY + this.__configuration.padding.t + (((this.__configuration.fonts.size * 1.75) + (this.__configuration.fonts.size * 1.25)) * 1.25)))
                        .attr('width', plotWidth + (this.__configuration.axis.reverse ? 0 : this.__configuration.padding.l + translateX))
                        .attr('height', this.__configuration.axis.reverse ? plotHeight + (this.__configuration.padding.l + translateY) : plotHeight)
                        .attr("stroke", 'rgba(0,0,0,' + (this.__configuration.debug ? 1 : 0) + ')')
                }
                frames.comparison.plot_title
                    .attr('x', this.__configuration.comparison.side === 'overlay' && !this.__configuration.axis.reverse ? -this.__configuration.comparison.translate.x : 0)
                    .attr('y', this.__configuration.comparison.side === 'overlay' ? (this.__configuration.fonts.size * 1.25) : 0)
                    .attr('fill', 'black')
                    .attr('transform', 'translate(' + (this.__configuration.padding.l + 50) + ',' + ((this.__configuration.padding.t + 2)) + ")")
                    .attr('font-size', () => this.__configuration.comparison.side === 'overlay' ? this.__configuration.fonts.size : (this.__configuration.fonts.size * 1.25))
                    .attr('font-family', this.__configuration.fonts.family + ', Arial, sans-serif')
                    .attr('font-style', this.__configuration.comparison.side === 'overlay' ? 'italic' : 'normal')
            } else {
                frames.comparison =  {}
                // Comparison G Plot
                frames.comparison.plot = frames.svg.append('g')
                    .attr('class', 'datama-waterfall-plot')
                    .attr('transform', 'translate(' + (this.__configuration.padding.l + translateX) + ", " + (translateY + this.__configuration.padding.t + (((this.__configuration.fonts.size * 1.75) + (this.__configuration.fonts.size * 1.25)) * 1.25)) + ")")
                    .attr('width', plotWidth)
                    .attr('height', plotHeight)
                    .attr('fill', 'white')
                    .attr('stroke-width', 0)
                if (this.__configuration.debug) {
                    frames.comparison.debug_comparison_plot = frames.comparison.plot.append('rect')
                        .attr('class', this.__configuration.comparison.side === 'overlay' ? 'no-click' : '')
                        .attr('x', (this.__configuration.padding.l + translateX))
                        .attr('y', (translateY + this.__configuration.padding.t + (((this.__configuration.fonts.size * 1.75) + (this.__configuration.fonts.size * 1.25)) * 1.25)))
                        .attr('width', plotWidth + (this.__configuration.axis.reverse ? 0 : this.__configuration.padding.l + translateX))
                        .attr('height', this.__configuration.axis.reverse ? plotHeight + (this.__configuration.padding.l + translateY) : plotHeight)
                        .attr("stroke", 'rgba(0,0,0,' + (this.__configuration.debug ? 1 : 0) + ')')
                        .attr("stroke-width", this.__configuration.debug ? 1 : 0)
                        .attr("fill", 'white')
                }
                frames.comparison.plot_title = frames.comparison.plot
                    .append('text')
                    .attr('x', this.__configuration.comparison.side === 'overlay' && !this.__configuration.axis.reverse ? -this.__configuration.comparison.translate.x : 0)
                    .attr('y', this.__configuration.comparison.side === 'overlay' ? (this.__configuration.fonts.size * 1.25) : 0)
                    .attr('fill', 'black')
                    .attr('transform', 'translate(' + (this.__configuration.padding.l + 50) + ',' + ((this.__configuration.padding.t + 2)) + ")")
                    .attr('font-size', () => this.__configuration.comparison.side === 'overlay' ? this.__configuration.fonts.size : (this.__configuration.fonts.size * 1.25))
                    .attr('font-family', this.__configuration.fonts.family + ', Arial, sans-serif')
                    .attr('font-style', this.__configuration.comparison.side === 'overlay' ? 'italic' : 'normal')
            }
        }
        // G Plot
        if (frames.plot) {
            frames.plot
                .attr('transform', 'translate(' + this.__configuration.padding.l + ", " + (this.__configuration.padding.t + (this.__configuration.fonts.size * 1.75 * 1.25)) + ")")
                .attr('width', plotWidth)
                .attr('height', plotHeight + (this.__configuration.fonts.size * 1.25 * 1.25))
            if (this.__configuration.debug && frames.debug_plot) {
                frames.debug_plot
                    .attr('width', plotWidth)
                    .attr('height', plotHeight + (this.__configuration.fonts.size * 1.25 * 1.75))
            }
            frames.plot_title
                .attr('x', 0)
                .attr('y', this.__comparison && this.__configuration.coc ? ((this.__configuration.fonts.size * 1.5) * -1) : 0)
        } else {
            frames.plot = frames.svg.append('g')
                .attr('transform', 'translate(' + this.__configuration.padding.l + ", " + (this.__configuration.padding.t + (this.__configuration.fonts.size * 1.75 * 1.25)) + ")")
                .attr('class', 'datama-waterfall-plot')
                .attr('width', plotWidth)
                .attr('height', plotHeight + (this.__configuration.fonts.size * 1.25 * 1.25))
                .attr('fill', 'white')
                .attr('stroke-width', 0)
            if (this.__configuration.debug) {
                frames.debug_plot = frames.plot.append('rect')
                    .attr('transform', 'translate(' + this.__configuration.padding.l + ", " + (this.__configuration.padding.t) + ")")
                    .attr('x', 0)
                    .attr('y', 0)
                    .attr('width', plotWidth)
                    .attr('height', plotHeight + (this.__configuration.fonts.size * 1.25 * 1.75))
                    .attr("stroke", 'rgba(0,0,0,' + (this.__configuration.debug ? 1 : 0) + ')')
                    .attr("stroke-width", this.__configuration.debug ? 1 : 0)
                    .attr("fill", 'white')
            }
            frames.plot_title = frames.plot
                .append('text')
                .attr('x', 0)
                .attr('y', this.__comparison && this.__configuration.coc ? ((this.__configuration.fonts.size * 1.5) * -1) : 0)
                .attr('fill', 'black')
                .attr('transform', 'translate(' + (this.__configuration.padding.l + 50) + ',' + ((this.__configuration.padding.t + (this.__configuration.fonts.size * 1.25 * 1.25))) + ")")
                .attr('font-size', (this.__configuration.fonts.size * 1.25))
                .attr('font-family', this.__configuration.fonts.family + ', Arial, sans-serif')
        }
        // Flag overlap
        if (this.__comparison) {
            if (this.__configuration.coc && this.__join) {
                frames.comparison.plot
                    .attr('class', 'datama-waterfall-plot no-click')
                frames.plot
                    .attr('transform', 'translate(' + this.__configuration.padding.l + ", " + (this.__configuration.padding.t + (((this.__configuration.fonts.size * 1.75) + (this.__configuration.fonts.size * 1.25)) * 1.25)) + ")")
                    .attr('class', 'datama-waterfall-plot')
                    .attr('opacity', 1)
                plotWidth = this.__configuration.baseWidth;
            } else {
                frames.comparison.plot
                    .attr('transform', 'translate(' + (this.__configuration.padding.l + translateX) + ", " + (translateY + this.__configuration.padding.t + (((this.__configuration.fonts.size * 1.75) + (this.__configuration.fonts.size * 1.25)) * 1.25)) + ")")
                    .attr('class', 'datama-waterfall-plot')
                    .attr('opacity', 1)
                frames.plot
                    .attr('transform', 'translate(' + this.__configuration.padding.l + ", " + (this.__configuration.padding.t + (((this.__configuration.fonts.size * 1.75) + (this.__configuration.fonts.size * 1.25)) * 1.25)) + ")")
                    .attr('class', 'datama-waterfall-plot')
                    .attr('opacity', 1)
            }
        }
        this.__configuration.width = plotWidth;
        this.__configuration.height = plotHeight;

    }
    /**
     * Add base frame of plot like title / subtitle / header / plot
     */
    __addFrames() {
        let frames = this.__core ? this.__core.frame : {};
        this.__addSvgFrame(frames)
        this.__addPlotFrame(frames)
        this.__addHeaderFrame(frames)
        // Make Waterfall core
        this.__core = this.__layers[this.__configuration.plot].getCore(
            {source: this.__dataset.__data, comparison: this.__comparison ? this.__comparison.__data : false, filter: this.__default_filter},
            frames,
            frames.comparison
        )
        // return frames;
        return this;
    }
    title(title) {
        if (this.__core.frame.header.title_text) {
            this.__core.frame.header.title_text
                .data([{id: 'title', text: title}], r => r.id)
                .enter()
                .merge(this.__core.frame.header.title_text)
                .attr('fill', 'black')
                .attr('transform', 'translate(' + (this.__configuration.padding.l + 50) + ',' + ((this.__configuration.padding.t + ((this.__configuration.fonts.size * 1.75) / 3) + (this.__configuration.fonts.size * 1.75 / 2))) + ")")
                .attr('font-size', (this.__configuration.fonts.size * 1.75))
                .style('font-family', this.__configuration.fonts.family + ', Arial, sans-serif')
                .text(d => d.text)
        } else {
            this.__core.frame.header.title_text = this.__core.frame.header.title
                .selectAll('#datama-waterfall-container-' + this.__target + '-title')
                .data([{id: 'title', text: title}], r => r.id)
                .enter()
                .append('text')
                .attr('fill', 'black')
                .attr('transform', 'translate(' + (this.__configuration.padding.l + 50) + ',' + ((this.__configuration.padding.t + ((this.__configuration.fonts.size * 1.75) / 3) + (this.__configuration.fonts.size * 1.75 / 2))) + ")")
                .attr('font-size', (this.__configuration.fonts.size * 1.75))
                .attr('font-family', this.__configuration.fonts.family + ', Arial, sans-serif')
                .text(d => d.text)
        }
    }
    subtitle(subtitle, subtitle_comparison) {
        this.__subtitle = subtitle
        this.__subtitle_comparison = subtitle_comparison
        this.__core.frame.plot_title.text(subtitle).attr('margin-bottom', '50px')
        if (this.__comparison && this.__configuration.coc) {
            this.__core.frame.comparison.plot_title.text(subtitle_comparison)
        }
    }
    flushTexts() {
        this.__layers[this.__configuration.plot].core.texts = null
        this.__layers[this.__configuration.plot].core.annotations = null
    }
    draw() {
        if (!this.__el || !this.__el.parentNode) {
            this.unmount()
            return false
        }
        // Add basic frames :
        // - Title
        // - SubTitle
        // - Plot container
        this.__addFrames();
        this.__layers[this.__configuration.plot]
            .syncContextMenu()
            // Add plot frames :
            // - X/Y axes
            .addOverlay(this.__core)
        if (this.__comparison && this.__configuration.coc) {
            this.__layers[this.__configuration.plot].addOverlay(this.__core.__comparison)
        }
        // Add plot traces
        this.__layers[this.__configuration.plot].addTraces()
        if (!this.__observer) {
            let skipFirst = true;
            let timeout;
            this.__observer = new ResizeObserver(() => {
                clearTimeout(timeout)
                timeout = setTimeout(() => {
                    if (!skipFirst) {
                        if (this.__el?.parentNode?.offsetParent != null) {
                            if (this.__core.frame != null && this.__core.frame.svg) {
                                this.__core.frame.svg
                                    .attr("width", null)
                                    .attr("height", null)
                            }
                            let width = this.__el.clientWidth;
                            let height = this.__el.clientHeight;
                            this.__configuration.baseWidth = width;
                            this.__configuration.baseHeight = height;
                            this.__addFrames()
                            if (width > 0 && height > 0) {
                                this.update()
                            }
                        }
                    } else {
                        skipFirst = false;
                    }
                }, 500)
            })
            this.__observer.observe(this.__el.parentNode)
            window.addEventListener('keydown', e => this.__listenKeyDown(e))
            window.addEventListener('keyup', e => this.__listenKeyUp(e))
        } else {
            this.update();
        }
        return true;
    }
    __listenKeyDown(e) {
        if (e.key) {
            if (e.key.toLowerCase() === 'control') {
                e.stopPropagation()
                e.stopImmediatePropagation()
                this.__keys.ctrl = true;
            } else if (e.key.toLowerCase() === 'shift') {
                e.stopPropagation()
                e.stopImmediatePropagation()
                this.__keys.shift = true;
            }
        }
    }
    __listenKeyUp(e) {
        if (e.key) {
            if (e.key.toLowerCase() === 'control') {
                e.stopPropagation()
                e.stopImmediatePropagation()
                this.__keys.ctrl = false;
            } else if (e.key.toLowerCase() === 'shift') {
                e.stopPropagation()
                e.stopImmediatePropagation()
                this.__keys.shift = false;
            }
        }
    }
    unmount() {
        if (this.__timeout) clearTimeout(this.__timeout)
        this.__layers[this.__configuration.plot].unmount()
        if (this.__core) {
            let keys = [
                'bars',
                'bar',
                'links',
                'texts',
                'annotations',
                'x_line',
                'x',
                'y'
            ]
            let i = 0;
            while (i < keys.length) {
                if (this.__core.frame[keys[i]]) {
                    this.__core.frame[keys[i]].remove().exit()
                    delete this.__core.frame[keys[i]];
                }
                if (this.__core.frame.comparison) {
                    if (this.__core.frame.comparison[keys[i]]) {
                        this.__core.frame.comparison[keys[i]].remove().exit()
                        delete this.__core.frame.comparison[keys[i]];
                    }
                }
                i++;
            }
        }
        if (this.__observer) this.__observer.disconnect()
        window.removeEventListener('keyup', e => this.__listenKeyUp(e))
        window.removeEventListener('keydown', e => this.__listenKeyDown(e))
    }
    setPlot(mode='waterfall') {
        if (this.mounted) {
            if (this.__configuration.debug) {
                console.info('%cWaterfall - Unmounting ' + this.__configuration.plot + ' layer ...', 'background: #222; color: #bada55')
            }
            // Unmount specific layers data
            this.__core = this.__layers[this.__configuration.plot].unmount()
            if (this.__configuration.debug) {
                console.info('%cWaterfall - Sync filters with new ' + mode + ' layers...', 'background: #222; color: #bada55')
            }
            // Transpile filters to new layers
            this.__layers[mode].loadFilters(this.__layers[this.__configuration.plot].filters, this.__default_filter)
        }
        this.__configuration.plot = mode;
        let side = this.__configuration.comparison.side;
        if (this.__configuration.plot === 'tree' && this.__configuration.comparison.side === 'overlay') {
            // reset comparison side to show potential secondary comparison
            side = 'horizontal';
        } else if (this.__configuration.plot === 'waterfall' && this.__configuration.comparison.side !== 'overlay' && this.__canBeJoin && this.__configuration.comparison.allowAutoJoin) {
            side = 'overlay'
        }
        this.setComparisonSide(side)
    }
    setFilter(filter) {
        this.__default_filter = filter
        this.__core.filter = filter
    }
    setCallback(name, callback) {
        this.__callback[name] = callback
    }
    update(observe=false) {
        if (observe) {
            if (this.__observer) {
                this.__observer.disconnect()
            }
            this.__observer.observe(this.__el.parentNode)
        }
        // Get new core data
        this.__core = this.__layers[this.__configuration.plot].getCore(
            {
                source: this.__dataset.__data,
                comparison: this.__comparison ? this.__comparison.__data : false,
                filter: this.__default_filter,
                parents: this.__core.parents
            },
            this.__core.frame,
            this.__core.frame.comparison
        )
        // Add plot frames :
        // - X/Y axes
        this.__layers[this.__configuration.plot].addOverlay(this.__core)

        if (this.__comparison && this.__configuration.coc) {
            this.__layers[this.__configuration.plot].addOverlay(this.__core.__comparison)
        }
        // Add plot traces
        this.__layers[this.__configuration.plot].addTraces(true)
        this.subtitle(this.__subtitle, this.__subtitle_comparison)
    }
}

/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaHover.js project project-deep-sky
 */

class DataMaHover {
    constructor(parent) {
        this.parent = parent;
        this.init()
    }

    /**
     * Create or load existing node for datama-hover of given plot
     */
    init() {
        let node = document.getElementById(this.parent.__el.id + '-hover');
        if (!node) {
            node = document.createElement('DIV');
            node.id = this.parent.__el.id + '-hover'
            node.classList.toggle('datama-hover')
            this.parent.__el.append(node);
        }
        this.__el = node;
    }

    /**
     * Render inner html of datama-hover div
     * @param e
     * @param configuration
     * @private
     */
    __render(e, configuration) {
        if (this.parent.__configuration) {
            this.__el.style.fontFamily = this.parent.__configuration.fonts.family
        }
        let depth;
        let html = '';
        if (e.Spliced == null && (configuration.points || configuration.impact || configuration.variation || configuration.extremum)) {
            html += "<header>"
            if ((configuration.points || true) && e.Type !== 'net' && e.Type !== 'net_OoS') {
                html += `<div><label>Points : </label><span>${e.Pts_gap_disp}</span></div>`
            }
            if ((configuration.impact || true) && e.Type !== 'net' && e.Type !== 'net_OoS') {
                html += `<div><label>Impact : </label><span>${e.Label}</span></div>`
            }
            if ((configuration.variation || true) && e.Top_Line_Label) {
                html += `<div><label>Variation : </label><span>${e.Top_Line_Label}</span></div>`
            }
            if ((configuration.extremum || true) && e.Type !== 'net' && e.Type !== 'net_OoS') {
                html += `<div><label>From : </label><span>${e.Start.toFixed(2)}</span><label>To : </label><span>${e.Total.toFixed(2)}</span></div>`
            }
            html += '</header>'
        }
        html += '<main>' + (this.parent.__configuration.cards.exploration === 'top' ? ((e.Main_Filter_Type !== 'Dimensions then Steps' ? (e.Filter && e.Filter.length ? '<b style="width: 100% !important;display: inline-block;">' + e.Filter + '</b>' : '') : (e.Main_Filter && e.Main_Filter.length ? '<b style="width: 100% !important;display: inline-block;">' + e.Main_Filter + '</b>' : '')) || '') + e.Hover : e.Hover) + '</main>'
        if (e?.disabled !== true) {
            if (e?.Level_02?.length) {
                html += '<footer style="margin-top: 10px;font-style: italic;font-size: 11px;font-weight: 300;">Click right and "Split by" to see how your other dimensions are performing</footer>';
            } else if (e?.Level_01?.length) {
                html += '<footer style="margin-top: 10px;font-style: italic;font-size: 11px;font-weight: 300;">Click to expand/collapse the subsequent depth</footer>';
            } else {
                if (e.Type === 'net' || e.Type === 'net_OoS') {
                    html += '<footer style="margin-top: 10px;font-style: italic;font-size: 11px;font-weight: 300;">Click to collapse the waterfall</footer>';
                } else {
                    let childs = this.parent.__layers[this.parent.__configuration.plot].core.__getNextLevelChild(e, this.parent.__layers[this.parent.__configuration.plot].core)
                    if (childs.length) {
                        html += '<footer style="margin-top: 10px;font-style: italic;font-size: 11px;font-weight: 300;">Click to understand what\'s driving this steps</footer>';
                    } else {
                        html += '<footer style="margin-top: 10px;font-style: italic;font-size: 11px;font-weight: 300;">Add dimensions to understand what\'s driving this variation</footer>';
                    }
                }
            }
        }
        this.__el.innerHTML = html;
    }

    /**
     * Mouse enter behavior
     * @param x
     * @param y
     * @param element
     * @param configuration
     */
    show({x, y}, element, configuration) {
        if (this.__timeout) clearTimeout(this.__timeout)
        if (this.__timeout) clearTimeout(this.__timeout_hide)
        this.__el.setAttribute('style', (x < 0 ? 'right' : 'left') + ': ' + Math.abs(x) + 'px;' + (y < 0 ? 'bottom' : 'top') + ': ' + Math.abs(y) + 'px;')
        if (x < 0) {
            this.__el.classList.remove('datama-hover-right')
            this.__el.classList.add('datama-hover-left')
        } else {
            this.__el.classList.remove('datama-hover-left')
            this.__el.classList.add('datama-hover-right')
        }
        if (y < 0) {
            this.__el.classList.remove('datama-hover-bottom')
            this.__el.classList.add('datama-hover-top')
        } else {
            this.__el.classList.remove('datama-hover-top')
            this.__el.classList.add('datama-hover-bottom')
        }
        this.__timeout = setTimeout(() => {
            this.__render(element, configuration)
            this.__el.classList.add('datama-hover-show')
        }, 250)
    }

    /**
     * Mouse leave
     */
    hide() {
        if (this.__timeout_hide) clearTimeout(this.__timeout_hide)
        if (this.__timeout) clearTimeout(this.__timeout)
        this.__timeout_hide = setTimeout(() => {
            this.__el.classList.remove('datama-hover-show')
        }, 50)
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2023 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaWaterfallContextMenu.js project project-deep-sky
 */

class DataMaWaterfallContextMenu {
    constructor(parent, elements = false, callbacks = false) {
        this.parent = parent;
        if (elements) {
            this.elements = elements;
        }
        if (callbacks) {
            this.callbacks = callbacks;
        }
        document.body.addEventListener('click', event => {
            if (event.target.closest('.datama-waterfall-context-menu') == null && this.state) {
                this.hide()
            }
        })
        this.state = false;
        this.init()
    }

    set(key, value) {
        this[key] = value;
    }

    /**
     * Create or load existing node for datama-hover of given plot
     */
    init() {
        let node = document.getElementById(this.parent.__el.id + '-context-menu');
        if (!node) {
            node = document.createElement('UL');
            node.id = this.parent.__el.id + '-context-menu'
            node.classList.toggle('datama-waterfall-context-menu')
            this.parent.__el.append(node);
        }
        this.__el = node;
    }

    __displaySettings() {
        return [
            {
                divider: true,
                name: 'Display'
            },
            {
                id: 'display',
                text: 'Display',
                icon: ['mdi', 'mdi-cogs'],
                sub: [
                    {
                        id: 'layer',
                        text: 'Layer',
                        sub: [
                            {
                                id: 'waterfall',
                                text: 'Waterfall',
                                render(parent) {
                                    let node = document.createElement('LI')
                                    node.id = this.id;
                                    if (parent.parent.__configuration.plot === this.id) {
                                        node.classList.add('selected')
                                    }
                                    let text = document.createElement('A')
                                    text.innerHTML = (this.icon ? parent.__icon(this.icon).outerHTML : '') + this.text
                                    node.append(text);
                                    node.addEventListener('click', (event) => {
                                        event.preventDefault();
                                        parent.parent.setPlot(this.id)
                                        parent.parent.update()
                                        parent.hide()
                                    })
                                    return node;
                                }
                            },
                            {
                                id: 'tree',
                                text: 'Tree',
                                render(parent) {
                                    let node = document.createElement('LI')
                                    node.id = this.id;
                                    if (parent.parent.__configuration.plot === this.id) {
                                        node.classList.add('selected')
                                    }
                                    let text = document.createElement('A')
                                    text.innerHTML = (this.icon ? parent.__icon(this.icon).outerHTML : '') + this.text
                                    node.append(text);
                                    node.addEventListener('click', (event) => {
                                        event.preventDefault();
                                        parent.parent.setPlot(this.id)
                                        parent.parent.update()
                                        parent.hide()
                                    })
                                    return node;
                                }
                            }
                            // {
                            //     id: 'bubbles',
                            //     text: 'Bubbles',
                            //     render(parent) {
                            //         let node = document.createElement('LI')
                            //         node.id = this.id;
                            //         if (parent.parent.__configuration.plot === this.id) {
                            //             node.classList.add('selected')
                            //         }
                            //         let text = document.createElement('A')
                            //         text.innerHTML = (this.icon ? parent.__icon(this.icon).outerHTML : '') + this.text
                            //         node.append(text);
                            //         node.addEventListener('click', (event) => {
                            //             event.preventDefault();
                            //             parent.parent.setPlot(this.id)
                            //             parent.parent.update()
                            //             parent.hide()
                            //         })
                            //         return node;
                            //     }
                            // }
                        ].filter(e => this.parent.__layers[e.id] != null),
                        render(parent) {
                            let node = document.createElement('LI')
                            node.id = this.id;
                            let text = document.createElement('A')
                            text.classList.add('sub')
                            text.innerHTML = (this.icon ? parent.__icon(this.icon).outerHTML : '') + this.text
                            let list = document.createElement('UL')
                            let subResult = this.sub.map(s => s.divider ? parent.__divider() : s.render(parent));
                            if (subResult.length === 1) {
                                return false;
                            } else {
                                list.append(...subResult)
                                node.append(text, list)
                            }
                            return node;
                        }
                    },
                    {
                        id: 'reverse',
                        text: 'Reverse axis',
                        render(parent) {
                            let node = document.createElement('LI')
                            node.id = this.id;
                            let text = document.createElement('A')
                            text.innerHTML = (this.icon ? parent.__icon(this.icon).outerHTML : '') + this.text
                            if (parent.parent.__configuration.axis.reverse) {
                                node.classList.add('selected')
                            }
                            node.append(text);
                            node.addEventListener('click', (event) => {
                                event.preventDefault();
                                parent.parent.__configuration.axis.reverse = !parent.parent.__configuration.axis.reverse
                                parent.parent.__addFrames();
                                parent.parent.update();
                                parent.hide();
                            })
                            return node;
                        }
                    },
                    {
                        id: 'side',
                        text: 'Secondary comparison',
                        if: (element, configuration, parent) => {
                            return parent.parent.__datasets.comparison && parent.parent.__drill_down !== 'Dimensions then Steps'
                        },
                        sub: [
                            {
                                id: 'horizontal',
                                text: 'Right',
                                render(parent) {
                                    let node = document.createElement('LI')
                                    node.id = this.id;
                                    if (parent.parent.__configuration.comparison.side === this.id) {
                                        node.classList.add('selected')
                                    }
                                    let text = document.createElement('A')
                                    text.innerHTML = (this.icon ? parent.__icon(this.icon).outerHTML : '') + this.text
                                    node.append(text);
                                    node.addEventListener('click', (event) => {
                                        event.preventDefault();
                                        parent.parent.setComparisonSide(this.id)
                                        parent.hide()
                                    })
                                    return node;
                                }
                            },
                            {
                                id: 'vertical',
                                text: 'Below',
                                render(parent) {
                                    let node = document.createElement('LI')
                                    node.id = this.id;
                                    if (parent.parent.__configuration.comparison.side === this.id) {
                                        node.classList.add('selected')
                                    }
                                    let text = document.createElement('A')
                                    text.innerHTML = (this.icon ? parent.__icon(this.icon).outerHTML : '') + this.text
                                    node.append(text);
                                    node.addEventListener('click', (event) => {
                                        event.preventDefault();
                                        parent.parent.setComparisonSide(this.id)
                                        parent.hide()
                                    })
                                    return node;
                                }
                            },
                            {
                                id: 'overlay',
                                text: 'Overlay',
                                render(parent) {
                                    let node = document.createElement('LI')
                                    node.id = this.id;
                                    if (parent.parent.__configuration.comparison.side === this.id) {
                                        node.classList.add('selected')
                                    }
                                    let text = document.createElement('A')
                                    text.innerHTML = (this.icon ? parent.__icon(this.icon).outerHTML : '') + this.text
                                    node.append(text);
                                    node.addEventListener('click', (event) => {
                                        event.preventDefault();
                                        parent.parent.setComparisonSide(this.id)
                                        parent.hide()
                                    })
                                    return node;
                                }
                            }
                        ],
                        render(parent) {
                            let node = document.createElement('LI')
                            node.id = this.id;
                            let text = document.createElement('A')
                            text.classList.add('sub')
                            text.innerHTML = (this.icon ? parent.__icon(this.icon).outerHTML : '') + this.text
                            node.append(text);
                            let list = document.createElement('UL')
                            node.append(list)
                            list.append(...this.sub.map(s => s.divider ? parent.__divider() : s.render(parent)))
                            return node;
                        }
                    },
                ],
                render(element, configuration, parent) {
                    let node = document.createElement('LI')
                    node.id = this.id;
                    let text = document.createElement('A')
                    text.classList.add('sub')
                    text.innerHTML = (this.icon ? parent.__icon(this.icon).outerHTML : '') + this.text
                    node.append(text);
                    let list = document.createElement('UL')
                    list.append(...this.sub
                        .map(e => e.divider ? parent.__divider(e) : (typeof e.if !== "function" || e.if(element, configuration, parent) ? e.render(parent) : false))
                        // Conditionnal display (remove unavailable node)
                        .filter(node => node)
                    )
                    node.append(list)
                    return node;
                }
            }
        ]
    }

    __ActionSettings() {
        return [
            {
                divider: true,
                name: 'Action'
            },
            {
                id: 'zoom',
                icon: ['fas', 'fa-search'],
                text: (element, parent) => parent.core.bars.get(element.unique).children && parent.core.bars.get(element.unique).children.length || parent.core.bars.get(element.unique).depth === 2 ? 'Zoom out' : 'Zoom in',
                if(element, configuration, parent) {
                    return parent.core.bars.get(element.unique).depth < 2 && element.Type !== 'net' && element.Type !== 'net_OoS'
                },
                render(element, configuration, parent) {
                    let node = document.createElement('LI')
                    node.id = this.id;
                    let text = document.createElement('A')
                    text.innerHTML = (this.icon ? parent.__icon(this.icon).outerHTML : '') + this.text(element, parent);
                    node.append(text);
                    node.addEventListener('click', (event) => {
                        event.preventDefault();
                        event.stopPropagation();
                        parent.parent.__layers[parent.parent.__configuration.plot].explore(element, parent.core)
                        parent.hide();
                    })
                    return node;
                }
            },
            {
                id: 'join',
                icon: (element, parent) => parent.parent.__configuration.comparison.allowAutoJoin && parent.parent.__join ? ['mdi', 'mdi-set-split'] : ['mdi', 'mdi-table-merge-cells'],
                text: (element, parent) => (parent.parent.__configuration.comparison.allowAutoJoin && parent.parent.__join ? 'Unmerge' : 'Merge') + ' waterfalls on common bars',
                if: (element, configuration, parent) => parent.parent.__canBeJoin && parent.parent.__drill_down !== 'Dimensions then Steps',
                render(element, configuration, parent) {
                    let node = document.createElement('LI')
                    node.id = this.id;
                    let text = document.createElement('A')
                    text.innerHTML = parent.__icon(this.icon(element, parent)).outerHTML + this.text(element, parent);
                    node.append(text);
                    node.addEventListener('click', (event) => {
                        event.preventDefault();
                        event.stopPropagation();
                        if (parent.parent.__join) {
                            parent.parent.__configuration.comparison.allowAutoJoin = false
                            parent.parent.setComparisonSide(parent.parent.__configuration.comparison.side)
                        } else {
                            parent.parent.__configuration.comparison.allowAutoJoin = true
                            parent.parent.setComparisonSide('overlay')
                        }
                        parent.hide();
                    })
                    return node;
                }
            },
            {
                divider: true,
                name: 'Filter'
            },
            {
                id: 'keep',
                icon: ['mdi', 'mdi-filter-plus'],
                text: (element, parent) => {
                    let match;
                    if (parent.parent.__drill_down === 'Dimensions then Steps') {
                        match = element[parent.parent.__configuration.explore.levels[0]].match(/(.*)\s\(|(.*)$/);
                    } else {
                        match = element[parent.parent.__configuration.explore.levels[parent.parent.__configuration.explore.levels.length - 1]].match(/(.*)\s\(|(.*)$/);
                    }
                    return 'Keep only ' + (match[1] || match[0])
                },
                if(element, configuration, parent) {
                    let isSegment = false;
                    let hasCallback = parent.parent.__callback["contextMenu.keep"] && typeof parent.parent.__callback["contextMenu.keep"] === 'function';
                    if (hasCallback) {
                        if (parent.parent.__drill_down === 'Dimensions then Steps') {
                            isSegment = parent.core.bars.get(element.unique).depth === 0 && element.Type !== 'net' && element.Type !== 'net_OoS'
                        } else {
                            isSegment = parent.core.bars.get(element.unique).depth === 2 && !parent.core.bars.get(element.unique).properties.Spliced
                        }
                    }
                    return hasCallback && isSegment
                },
                render(element, configuration, parent) {
                    let node = document.createElement('LI')
                    node.id = this.id;
                    let text = document.createElement('A')
                    text.innerHTML = (this.icon ? parent.__icon(this.icon).outerHTML : '') + this.text(element, parent);
                    node.append(text);
                    node.addEventListener('click', (event) => {
                        event.preventDefault();
                        event.stopPropagation();
                        if (parent.parent.__callback["contextMenu.keep"] && typeof parent.parent.__callback["contextMenu.keep"] === 'function') {
                            let filter, value;
                            filter = element[parent.parent.__configuration.explore.stack[1]]
                            if (parent.parent.__drill_down === 'Dimensions then Steps') {
                                value = element[parent.parent.__configuration.explore.levels[0]].match(/(.*)\s\(|(.*)$/);
                            } else {
                                value = element[parent.parent.__configuration.explore.levels[parent.parent.__configuration.explore.levels.length - 1]].match(/(.*)\s\(|(.*)$/);
                            }
                            value = value[1] || value[0];
                            let result = {};
                            result[filter] = value;
                            parent.parent.__callback["contextMenu.keep"](result)
                        }
                        parent.hide();
                    })
                    return node;
                }
            },
            {
                id: 'exclude',
                icon: ['mdi', 'mdi-filter-minus'],
                text: (element, parent) => {
                    let match;
                    if (parent.parent.__drill_down === 'Dimensions then Steps') {
                        match = element[parent.parent.__configuration.explore.levels[0]].match(/(.*)\s\(|(.*)$/);
                    } else {
                        match = element[parent.parent.__configuration.explore.levels[parent.parent.__configuration.explore.levels.length - 1]].match(/(.*)\s\(|(.*)$/);
                    }
                    return 'Exclude ' + (match[1] || match[0])
                },
                if(element, configuration, parent) {
                    let isSegment = false;
                    let hasCallback = parent.parent.__callback["contextMenu.exclude"] && typeof parent.parent.__callback["contextMenu.exclude"] === 'function';
                    if (hasCallback) {
                        if (parent.parent.__drill_down === 'Dimensions then Steps') {
                            isSegment = parent.core.bars.get(element.unique).depth === 0 && element.Type !== 'net' && element.Type !== 'net_OoS'
                        } else {
                            isSegment = parent.core.bars.get(element.unique).depth === 2 && !parent.core.bars.get(element.unique).properties.Spliced
                        }
                    }
                    return hasCallback && isSegment
                },
                render(element, configuration, parent) {
                    let node = document.createElement('LI')
                    node.id = this.id;
                    let text = document.createElement('A')
                    text.innerHTML = (this.icon ? parent.__icon(this.icon).outerHTML : '') + this.text(element, parent);
                    node.append(text);
                    node.addEventListener('click', (event) => {
                        event.preventDefault();
                        event.stopPropagation();
                        if (parent.parent.__callback["contextMenu.exclude"] && typeof parent.parent.__callback["contextMenu.exclude"] === 'function') {
                            let filter, value;
                            filter = element[parent.parent.__configuration.explore.stack[1]]
                            if (parent.parent.__drill_down === 'Dimensions then Steps') {
                                value = element[parent.parent.__configuration.explore.levels[0]].match(/(.*)\s\(|(.*)$/);
                            } else {
                                value = element[parent.parent.__configuration.explore.levels[parent.parent.__configuration.explore.levels.length - 1]].match(/(.*)\s\(|(.*)$/);
                            }
                            value = value[1] || value[0];
                            let result = {};
                            result[filter] = value;
                            parent.parent.__callback["contextMenu.exclude"](result)
                        }
                        parent.hide();
                    })
                    return node;
                }
            }
        ]
    }

    __POVSettings() {
        return [
            {
                divider: true,
                name: 'View'
            },
            {
                id: 'exploration-method',
                text: 'Exploration method',
                if: (element, configuration, parent) => parent.parent.__configuration.plot === 'tree',
                sub: [
                    {
                        id: 'hierarchy',
                        text: 'Hierarchy',
                        render(parent) {
                            let node = document.createElement('LI')
                            node.id = this.id;
                            if (parent.parent.__configuration.cards.exploration === this.id) {
                                node.classList.add('selected')
                            }
                            let text = document.createElement('A')
                            text.innerHTML = (this.icon ? parent.__icon(this.icon).outerHTML : '') + this.text
                            node.append(text);
                            node.addEventListener('click', (event) => {
                                event.preventDefault();
                                parent.parent.__configuration.cards.exploration = this.id
                                parent.parent.update()
                                parent.hide()
                            })
                            return node;
                        }
                    },
                    {
                        id: 'top',
                        text: 'Top',
                        render(parent) {
                            let node = document.createElement('LI')
                            node.id = this.id;
                            if (parent.parent.__configuration.cards.exploration === this.id) {
                                node.classList.add('selected')
                            }
                            let text = document.createElement('A')
                            let textContainer = document.createElement('span')
                            textContainer.innerHTML = (this.icon ? parent.__icon(this.icon).outerHTML : '') + this.text
                            text.classList.add(...['w-100', 'd-flex', 'justify-space-between'])
                            text.setAttribute('style', 'padding-right: 0')
                            text.append(textContainer)
                            node.append(text);
                            let input = document.createElement('input')
                            input.setAttribute('type', 'number')
                            input.setAttribute('min', '1')
                            input.setAttribute('max', '50')
                            input.setAttribute('value', parent.parent.__configuration.cards.numberOfChildToFetch)
                            input.setAttribute('style', 'margin-left: 10px;float: right;width: 40px;padding: 0;line-height: 26px;margin-top:3px;border: none; outline: none;background: rgba(0,0,0,0.05) !important;text-align: center;border-radius: 10px;')
                            text.append(input)
                            input.addEventListener('click', (event) => {
                                event.preventDefault();
                                event.stopPropagation();
                                event.stopImmediatePropagation();
                            })
                            input.addEventListener('blur', (event) => {
                                event.preventDefault();
                                if (parent.parent.__configuration.cards.exploration !== 'top') parent.parent.__configuration.cards.exploration = 'top'
                                parent.parent.__configuration.cards.numberOfChildToFetch = event.target.value
                                parent.parent.update()
                            })
                            node.addEventListener('click', (event) => {
                                event.preventDefault();
                                if (parent.parent.__configuration.cards.exploration !== this.id) {
                                    parent.parent.__configuration.cards.exploration = this.id
                                    parent.parent.update()
                                    parent.hide()
                                }
                            })
                            return node;
                        }
                    }
                ],
                render(element, configuration, parent) {
                    let node = document.createElement('LI')
                    node.id = this.id;
                    let text = document.createElement('A')
                    text.classList.add('sub')
                    text.innerHTML = (this.icon ? parent.__icon(this.icon).outerHTML : '') + this.text
                    node.append(text);
                    let list = document.createElement('UL')
                    node.append(list)
                    let subs = this.sub.map(s => s.divider ? parent.__divider() : (s.if ? (s.if(element, configuration, parent) ? s.render(parent) : null) : s.render(parent))).filter(e => e)
                    list.append(...subs)
                    return node;
                }
            },
            {
                id: 'value-to-pts',
                if: (element) => element?.Pts_gap != null,
                text: (element, parent) => 'Impact in ' + (parent.parent.__configuration.value === 'Value' ? 'points' : 'volume'),
                render(element, configuration, parent) {
                    let node = document.createElement('LI')
                    node.id = this.id;
                    let text = document.createElement('A')
                    text.innerHTML = (this.icon ? parent.__icon(this.icon).outerHTML : '') + this.text(element, parent);
                    node.append(text);
                    node.addEventListener('click', (event) => {
                        event.preventDefault();
                        event.stopPropagation();
                        parent.parent.__configuration.value = parent.parent.__configuration.value === 'Value' ? 'Pts_gap' : 'Value';
                        if (parent.parent.__callback['contextMenu.valueToPts'] && typeof parent.parent.__callback['contextMenu.valueToPts'] === 'function') {
                            parent.parent.__callback['contextMenu.valueToPts'](parent.parent.__configuration.value)
                        }
                        parent.parent.setData({
                            source: parent.parent.__datasets.default,
                            comparison: parent.parent.__datasets.comparison,
                            drill_down: parent.parent.__drill_down,
                            drill_down_dimension: parent.parent.__drill_down_dimension
                        }, parent.parent.__score)
                        parent.hide();
                    })
                    return node;
                },
                icon: ['mdi', 'mdi-percent']
            },
            {
                id: 'drill-down',
                text: 'Drill down...',
                icon: ['fa', 'fa-eye'],
                if: (element, configuration, parent) => (element.Type === 'net' || element.Type === 'net_OoS') && parent.parent.__datasets.default.map(r => r.Main_Filter_Type).filter(e => e && e !== '').unique().length > 1,
                render(element, configuration, parent) {
                    let node = document.createElement('LI')
                    node.id = this.id;
                    node.classList.add('figured')
                    let text = document.createElement('A')
                    text.classList.add('sub')
                    text.innerHTML = (this.icon ? parent.__icon(this.icon).outerHTML : '') + this.text
                    node.append(text);
                    let list = document.createElement('UL')
                    list.classList.add('scrollable')
                    node.append(list)
                    let sub = parent.parent.__datasets.default
                        .filter(r => r.Main_Filter_Interest != null && r.Main_Filter_Interest !== '')
                        .map(r => JSON.stringify({
                            split: r.Main_Filter_Type,
                            interest: r.Main_Filter_Interest,
                            text: r.Main_Filter,
                            rank: parseFloat(r.Main_Filter_Rank)
                        }))
                        .unique()
                        .map(r => JSON.parse(r));
                    sub.sort((a, b) => a.rank - b.rank)
                    let lag = Math.min(...sub.map(d => d.interest));
                    if (lag > 0) lag = 0
                    else lag = Math.abs(lag)
                    let total = Math.max(...sub.map(d => d.interest + lag))
                    sub = sub.map((el, i) => {
                        let node = document.createElement('LI')
                        node.id = 'drill-down-sub-' + i;
                        if (el.split === parent.parent.__drill_down && el.text === parent.parent.__drill_down_dimension) {
                            node.classList.add('selected')
                        }
                        if (el.split === 'Dimensions then Steps') {
                            node.classList.add('dimensions')
                        } else {
                            node.classList.add('steps')
                        }
                        let text = document.createElement('A')
                        text.innerHTML = '<span class="figure-label"><span class="text">' + el.text + '</span><span class="detailed">' + el.split + '</span></span>' + parent.__figure(el.interest, '', total, lag);
                        node.append(text);
                        node.addEventListener('click', (event) => {
                            event.preventDefault();
                            event.stopPropagation();
                            parent.parent.setData({
                                source: parent.parent.__datasets.default,
                                comparison: parent.parent.__datasets.comparison,
                                drill_down: el.split,
                                drill_down_dimension: el.text
                            }, parent.parent.__score)
                            if (parent.parent.__callback['contextMenu.drillDown'] && typeof parent.parent.__callback['contextMenu.drillDown'] === 'function') {
                                parent.parent.__callback['contextMenu.drillDown'](el)
                            }
                            parent.hide()
                        })
                        return node;
                    })
                    list.append(...sub)
                    return node;
                }
            },
            {
                id: 'split-by',
                text: 'Split by...',
                icon: ['fa', 'fa-eye'],
                if(element, configuration, parent) {
                    if (element.Type === 'net' || element.Type === 'net_OoS' || element.Spliced != null) return false;
                    let bar = parent.core.bars.get(element.unique);
                    return bar && ((bar.depth > 0) || (bar.depth === 0 && bar.children && bar.children.length)) && parent.parent.__drill_down !== 'Dimensions then Steps'
                },
                render(element, configuration, parent) {
                    let node = document.createElement('LI')
                    node.id = this.id;
                    node.classList.add('figured')
                    let text = document.createElement('A')
                    text.classList.add('sub')
                    text.innerHTML = (this.icon ? parent.__icon(this.icon).outerHTML : '') + this.text
                    node.append(text);
                    let list = document.createElement('UL')
                    list.classList.add('scrollable')
                    node.append(list)
                    let scores = parent.parent.__score.filter(s => s.StepNames === element.Level_00).sort((a, b) => a.Rank_Selection - b.Rank_Selection)
                    let scoresResult = {}
                    scores.map(s => {
                        scoresResult[s.DimensionNames] = s.Interest_Score
                    })
                    let sub = Object.keys(scoresResult).map(k => {
                        return {
                            id: 'split-by-' + k,
                            text: k,
                            render(parent, element) {
                                let disabled = scores.filter(s => s.DimensionNames === k)[0].disabled;
                                let node = document.createElement('LI')
                                node.id = this.id;
                                if (disabled) {
                                    node.classList.add('disabled')
                                    node.setAttribute('title', k + ' is not available in free/trial license (There is only 2 dimensions computed)')
                                }
                                // Same
                                let core = parent.core;
                                let path = core.__makeWaterfallPath(element, false);
                                let index = parent.parent.__layers[parent.parent.__configuration.plot].__filterIndex(path, false);
                                if (index === -1) {
                                    /**
                                     * Here we must update parent filter
                                     * @type {number}
                                     */
                                    let parentPathIndex = -1;
                                    let parentProps = core.bars.get(element.unique).parent
                                    while (parentPathIndex === -1) {
                                        let parentPath = core.__makeWaterfallPath(parentProps, false)
                                        let parentObj = core.bars.get(parentProps.unique)
                                        parentPathIndex = parent.parent.__layers[parent.parent.__configuration.plot].filters.map(f => JSON.stringify(f.filter((ff, i) => i > 0))).indexOf(JSON.stringify(parentPath))
                                        if (parentPathIndex === -1) {
                                            if (parentObj.parent == null) {
                                                parentPathIndex = false
                                            } else {
                                                parentProps = parentObj.parent;
                                            }
                                        }
                                    }
                                    if (parentPathIndex !== false) {
                                        index = parentPathIndex
                                    }
                                }
                                let key = Object.keys(parent.parent.__layers[parent.parent.__configuration.plot].filters[index][0])[0];
                                if (JSON.stringify(parent.parent.__default_filter) === JSON.stringify(parent.parent.__layers[parent.parent.__configuration.plot].filters[index][0])) {
                                    // Open default biggest variation, so filter is "Filters_Rank: 1"
                                    if (element.Filter === this.text) {
                                        node.classList.add('selected')
                                    }
                                } else {
                                    // Here we have the correct dimension
                                    if (parent.parent.__layers[parent.parent.__configuration.plot].filters[index][0][key] === this.text) {
                                        node.classList.add('selected')
                                    }
                                }
                                node.classList.add('dimensions')
                                let lag = Math.min(...Object.keys(scoresResult).map(k => scoresResult[k]));
                                if (lag >= 0) lag = 0;
                                else lag = Math.abs(lag)
                                let total = Math.max(...Object.keys(scoresResult).map(k => scoresResult[k] + lag))
                                // Same
                                let text = document.createElement('A')
                                text.innerHTML = '<span class="text">' + this.text + '</span>' + parent.__figure(scoresResult[k], '', total, lag)
                                node.append(text);
                                node.addEventListener('click', (event) => {
                                    event.preventDefault();
                                    event.stopPropagation();
                                    if (!disabled) {
                                        let core = parent.core;
                                        let path = core.__makeWaterfallPath(element, false);
                                        let index = parent.parent.__layers[parent.parent.__configuration.plot].__filterIndex(path, false);
                                        /**
                                         * Here we must update parent filter
                                         * @type {number}
                                         */
                                        let parentPathIndex = -1;
                                        let parentProps = core.bars.get(element.unique).parent
                                        if (parentProps) {
                                            while (parentPathIndex === -1) {
                                                let parentPath = core.__makeWaterfallPath(parentProps, false)
                                                let parentObj = core.bars.get(parentProps.unique)
                                                if (parentObj.parent == null) {
                                                    parentPathIndex = false
                                                    parentPathIndex = parent.parent.__layers[parent.parent.__configuration.plot].filters.map(f => JSON.stringify(f.filter((ff, i) => i > 0))).indexOf(JSON.stringify(parentPath))
                                                } else {
                                                    parentProps = parentObj.parent;
                                                    parentPathIndex = -1
                                                }
                                            }
                                        } else {
                                            parentPathIndex = parent.parent.__layers[parent.parent.__configuration.plot].filters.map(f => JSON.stringify(f.filter((ff, i) => i > 0))).indexOf(JSON.stringify(path))
                                        }
                                        let paths = [];
                                        if (parentPathIndex !== false && parentPathIndex !== -1) {
                                            let parentPath = parent.parent.__layers[parent.parent.__configuration.plot].filters[parentPathIndex]
                                            if (parentPath.length > path.length) {
                                                parentPath = parentPath.filter((p, i)=> i > 0)
                                            }
                                            parentPath = parentPath.filter(p => p[Object.keys(p)[0]] !== '' && p[Object.keys(p)[0]])
                                            // Get deeper filters matching parent filter begin
                                            let indices = parent.parent.__layers[parent.parent.__configuration.plot].filters
                                                .filter(f => parentPath.every(p => {
                                                    let pathFilter = f.filter(pf => Object.keys(pf)[0] === Object.keys(p)[0])[0];
                                                    return p[Object.keys(p)[0]] === pathFilter[Object.keys(pathFilter)[0]];
                                                }))
                                                .map(f => parent.parent.__layers[parent.parent.__configuration.plot].__filterIndex(f))
                                                .filter(i => i !== parentPathIndex)
                                                .sort()
                                                .reverse()
                                            // Remove deeper filters
                                            indices.forEach(i => parent.parent.__layers[parent.parent.__configuration.plot].filters.splice(i, 1))
                                            // Need to update parent only
                                            paths = [parentPathIndex]
                                        } else if (typeof index === "number" && index !== -1) {
                                            // Only one path to update
                                            paths = [index]
                                        }
                                        if (paths.length) {
                                            if (parent.parent.__layers[parent.parent.__configuration.plot].filters[paths[0]].length > path.length) {
                                                parent.parent.__layers[parent.parent.__configuration.plot].filters[paths[0]][0] = {Filter: k}
                                                parent.parent.__layers[parent.parent.__configuration.plot].core
                                                    .__getRowsByPath(
                                                        parent.parent.__layers[parent.parent.__configuration.plot].filters[paths[0]],
                                                        core.source
                                                    )
                                                    .filter(c => !c.Level_02 || c.Level_02 === '')
                                                    .forEach(c => parent.parent.__layers[parent.parent.__configuration.plot].filters.push(core.__makeWaterfallPath(c)))
                                            }
                                        }
                                        if (parent.parent.__callback['contextMenu.splitBy'] && typeof parent.parent.__callback['contextMenu.splitBy'] === 'function') {
                                            parent.parent.__callback['contextMenu.splitBy'](k)
                                        }
                                        parent.parent.update()
                                    }
                                    parent.hide()
                                })
                                return node;
                            }
                        }
                    });
                    list.append(...sub.map(s => s.divider ? parent.__divider() : s.render(parent, element)))
                    return node;
                }
            },
            {
                id: 'skip-steps',
                text: (parent, element) => parent.parent.__callback['contextMenu.skipStepsText'] && typeof parent.parent.__callback['contextMenu.skipStepsText'] === 'function' ? parent.parent.__callback['contextMenu.skipStepsText'](parent, element) : ['fas', 'fa-plus-square'],
                icon: (parent, element) => parent.parent.__callback['contextMenu.skipStepsIcon'] && typeof parent.parent.__callback['contextMenu.skipStepsIcon'] === 'function' ? parent.parent.__callback['contextMenu.skipStepsIcon'](parent, element) : ['fas', 'fa-plus-square'],
                if(element, configuration, parent) {
                    if (element.Type === 'net' || element.Type === 'net_OoS') return false;
                    let bar = parent.core.bars.get(element.unique);
                    return bar.depth === 0 && parent.parent.__callback['contextMenu.skipStepsIcon'] && parent.parent.__callback['contextMenu.skipStepsSubs'] && parent.parent.__callback["contextMenu.skipSteps"]
                },
                render(element, configuration, parent) {
                    let node = document.createElement('LI')
                    node.id = this.id;
                    let text = document.createElement('A')
                    text.classList.add('sub')
                    text.innerHTML = (this.icon ? parent.__icon(this.icon(parent, element), parent, element).outerHTML : '') + this.text(parent, element);
                    node.append(text);
                    let list = document.createElement('UL')
                    node.append(list)
                    let sub = []
                    if (parent.parent.__callback['contextMenu.skipStepsSubs'] && typeof parent.parent.__callback['contextMenu.skipStepsSubs'] === 'function') {
                        sub = parent.parent.__callback['contextMenu.skipStepsSubs'](parent, element).map(s => {
                            return {
                                id: 'skip-step-' + s.name,
                                text: s.name,
                                value: s.state,
                                render(parent) {
                                    let node = document.createElement('LI')
                                    node.id = this.id;
                                    let text = document.createElement('A')
                                    text.innerHTML = '<span class="text">' + this.text + '</span>';
                                    node.append(text);
                                    if (s.state) {
                                        node.classList.add('selected')
                                    }
                                    node.addEventListener('click', (event) => {
                                        event.preventDefault();
                                        event.stopPropagation();
                                        parent.parent.__callback["contextMenu.skipSteps"](this.text, !s.state)
                                        parent.hide()
                                    })
                                    return node;
                                }
                            }
                        })
                    }
                    list.append(...sub.map(s => s.divider ? parent.__divider() : s.render(parent, element)))
                    return node;
                }
            },
            {
                id: 'remaining',
                name: 'Remaining',
                icon: ['fas', 'fa-plus'],
                if: (element) => element.Spliced != null,
                text: () => 'Remaining',
                render(element, configuration, parent) {
                    let node = document.createElement('LI')
                    node.id = this.id;
                    let text = document.createElement('A')
                    text.innerHTML = (this.icon ? parent.__icon(this.icon).outerHTML : '') + this.text(element, parent);
                    node.append(text);
                    node.addEventListener('click', (event) => {
                        event.preventDefault();
                        event.stopPropagation();
                        parent.parent.__configuration.bars.remain += element.properties.Spliced
                        parent.parent.update();
                        parent.hide();
                    })
                    return node;
                }
            }
        ]
    }

    /**
     * Add divider in context menu
     * @returns {HTMLElement}
     * @private
     */
    __divider(element = false) {
        let node = document.createElement('LI')
        node.classList.add('datama-context-menu-divider')
        if (element && element.name) {
            let text = document.createElement('SPAN')
            text.innerText = element.name
            node.append(text)
        }
        return node;
    }

    __icon(icons, parent, element) {
        let result = icons;
        let node = document.createElement('span')
        node.classList.add('datama-context-menu-icon')
        if (typeof icons === "function") {
            result = icons(parent, element);
        }
        if (Array.isArray(result)) {
            result.forEach(className => node.classList.add(className))
        } else {
            node.classList.add(result)
        }
        return node;
    }

    /**
     * Render inner html of datama-hover div
     * @param element
     * @param configuration
     * @private
     */
    __render(element, configuration) {
        if (this.parent.__configuration) {
            this.__el.style.fontFamily = this.parent.__configuration.fonts.family
        }
        this.__el.innerHTML = ""
        this.__el.append(
            ...[
                // Layer custom elements
                ...this.elements,
                ...this.__ActionSettings()
                    // Allow override of first level element
                    .filter(s => s.id == null || this.elements.map(e => e.id).indexOf(s.id) === -1),
                ...this.__POVSettings()
                    // Allow override of first level element
                    .filter(s => s.id == null || this.elements.map(e => e.id).indexOf(s.id) === -1),
                // Global settings of context menu
                ...this.__displaySettings()
                    // Allow override of first level element
                    .filter(s => s.id == null || this.elements.map(e => e.id).indexOf(s.id) === -1)
            ].map(e => e.divider ? this.__divider(e) : (typeof e.if !== "function" || e.if(element, configuration, this) ? e.render(element, configuration, this) : false))
                // Conditionnal display (remove unavailable node)
                .filter(node => node)
                // Context menu cannot begin or end with divider
                .filter((n, i, s) => !n.classList.contains('datama-context-menu-divider') || (i > 0 && i < s.length - 1))
        )
    }

    __figure(score, format, total = 1, lag = 0) {
        let bar = {};
        if (typeof format === "object") format = format[0]
        if (typeof score === "object") score = score[0]
        if (typeof lag === "object") lag = lag[0]
        switch (format) {
            case '%':
                bar.style = `width: ${(score < 0 ? 0 : score * 100)}%;${score * 100 < 1 ? 'border-radius: 50%;' : ''}`;
                bar.suffix = '%';
                bar.action = (e) => Math.trunc(e * 100) + (Math.trunc(((e * 100 % 1) * 100)) / 100);
                break;
            default:
                bar.style = `width: ${(((score + Math.abs(lag)) / total) * 100)}%;${(((score + Math.abs(lag)) / total) * 100) < 1 ? 'border-radius: 50%;' : ''}`;
                bar.suffix = '';
                bar.action = (e) => parseFloat(e).toFixed(2);
                break;
        }
        return `<div class="figure"><span class="datama-label"><span class="datama-label-text">Interest Score:</span><span class="value">${bar.action(score)}${bar.suffix}</span></span><span class="bar" style="${bar.style}"></span></div>`;
    }

    /**
     * Mouse enter behavior
     * @param x
     * @param y
     * @param element
     * @param configuration
     */
    show({x = false, y = false, event = false}, element, configuration) {
        if (!x && !y && !event) {
            if (this.parent.parent.__configuration.debug) {
                console.error("[Waterfall] Cannot display context menu without position")
            }
            return false;
        }
        if (!x && !y && event) {
            let eventX = event.layerX,
                eventY = event.layerY;
            let parent = event.target.closest('.datama-waterfall-container');
            let parentBounds = parent.getBoundingClientRect();
            let parentX1 = parentBounds.width;
            let parentY1 = parentBounds.height;
            let middleX = parentX1 / 2;
            let middleY = parentY1 / 2;
            x = eventX;
            y = eventY;
            let positionX = 'left: ' + x + "px;"
            let positionY = 'top: ' + y + "px;"
            if (x > middleX) {
                positionX = 'right: ' + (parentX1 - x) + 'px;'
                this.__el.classList.remove('to-right')
                this.__el.classList.add('to-left')
            } else {
                this.__el.classList.add('to-right')
                this.__el.classList.remove('to-left')
            }
            if (y > middleY) {
                positionY = 'bottom: ' + (parentY1 - y) + 'px;'
                this.__el.classList.remove('to-bottom')
                this.__el.classList.add('to-top')
            } else {
                this.__el.classList.add('to-bottom')
                this.__el.classList.remove('to-top')
            }
            this.__el.setAttribute('style', positionX + positionY)
        } else {
            this.__el.setAttribute('style', 'left: ' + x + 'px;' + 'top: ' + y + 'px;')
        }
        this.__render(element, configuration)
        this.__el.classList.add('datama-context-menu-show')
        this.state = true;
    }

    /**
     * Mouse leave
     */
    hide() {
        this.__el.classList.remove('datama-context-menu-show')
        this.state = false;
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaLayerGeneric.js project project-deep-sky
 */
class DataMaLayerGeneric {
    constructor(parent) {
        let testingElement = document.getElementById('datama-testing-text') || document.createElement('DIV')
        testingElement.id = 'datama-testing-text'
        if (document.getElementById('datama-testing-text') == null) {
            document.body.append(testingElement);
        }
        this.__testingElement = testingElement;
        this.depthPadding = parent.__configuration.bars.depthPadding
        this.__contextMenu = {
            elements: [
            ],
            callbacks: [
            ]
        }
        this.parent = parent;
        this.filters = parent?.__configuration?.filters || [];
        this.__core = {
            filter: parent.__default_filter,
            parents: [],
            circleXY(r, theta) {
                theta = (theta-90) * Math.PI/180;
                return {
                    x: r * Math.cos(theta),
                    y: -r * Math.sin(theta)
                }
            },
            __getRowDepthFromPath(row, path) {
                let i = 0, result = 0;
                while (i < path.length) {
                    let key = Object.keys(path[i])[0], value = path[i][key];
                    if (value !== false) {
                        if (row[key].toString() === value.toString()) {
                            result++;
                        }
                    } else if (row[key] !== '') {
                        result++;
                    }
                    i++;
                }
                return result;
            },
            __getNextLevelChild(element, core) {
                let path = core.__makeWaterfallPath(element);
                let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 2;
                return core.__getRowsByPath(path, core.source).filter(c => {
                    let childPath = core.__makeWaterfallPath(c);
                    let childPathDepth = childPath.filter(p => p[Object.keys(p)[0]] !== false).length - 2;
                    return childPathDepth === pathDepth + 1;
                }).map(c => ({...c, parent: element}));
            },
            __makeWaterfallPath(element, includeDefaultFilter=true) {
                let path = []
                let filter = {}
                if (this.filter && element[Object.keys(this.filter)] && element[Object.keys(this.filter)] !== '') {
                    filter[Object.keys(this.filter)] = element[Object.keys(this.filter)]
                } else {
                    if (includeDefaultFilter) {
                        filter = this.filter;
                    }
                }
                if (parent.__configuration.explore.current === 'default') {
                    if (includeDefaultFilter) {
                        path.push(filter)
                    }
                } else {
                    let obj = {};
                    obj[parent.__configuration.explore.stack[parent.__configuration.explore.current]] = element[parent.__configuration.explore.stack[parent.__configuration.explore.current]]
                    if (obj[parent.__configuration.explore.stack[parent.__configuration.explore.current]] === '') {
                        if (includeDefaultFilter) {
                            path.push(filter)
                        }
                    } else {
                        path.push(obj)
                    }
                }
                let i = 0;
                while (i < parent.__configuration.explore.levels.length) {
                    let obj = {};
                    let value = element[parent.__configuration.explore.levels[i]]
                    if (value === '') {
                        value = false;
                    }
                    obj[parent.__configuration.explore.levels[i]] = value;
                    path.push(obj)
                    i++;
                }
                return path;
            },
            __getRowsByPath(path, data=null) {
                return data.filter(row => (this.__isRowMatchPath(row, path) || row.Type === 'net') && (row.Value !== 0 || row.depth < 2))
            },
            __isRowMatchPath(row, path) {
                let i = 0;
                while (i < path.length) {
                    let key = Object.keys(path[i])[0];
                    let value = path[i][key]
                    if (value !== false) {
                        if (((!row[key] && row[key] !== '') || row[key].toString() !== value.toString())) {
                            return false
                        }
                    }
                    i++;
                }
                return true;
            }
        }
    }
    /**
     * Core Part
     */
    /**
     * Get waterfall bars properties
     * @param core
     * @returns {{get(*): (*|boolean), uniqueExist(*): boolean, parentExist(*): boolean, bars: *, parents: *}|*|boolean}
     */
    getPlotData(core) {
        let $this = this;
        let baseBarsData = {
            bars: [],
            parents: [],
            get(unique) {
                let result = false;
                let element = document.getElementById(unique);
                let uniqueExist = this.uniqueExist(unique);
                let parentExist = this.parentExist(unique);
                if (uniqueExist || parentExist) {
                    result = uniqueExist || parentExist
                    let path = this.core.__makeWaterfallPath(result.properties)
                    let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 2;
                    if (pathDepth === 0) path = this.core.__makeWaterfallPath(result.properties, false);
                    result.el = element;
                    result.text = document.getElementById(unique + '-text')
                    result.figure = document.getElementById(unique + '-figure')
                    result.depth = pathDepth
                    if (result.properties.Type !== 'net') {
                        result.children = this.core.__getRowsByPath(path, this.core.data).filter(r => r.Type !== 'net' && r.Type !== 'net_OoS' && r.unique !== unique).map(c => this.uniqueExist(c.unique) || this.parentExist(c.unique))
                    }
                    if (pathDepth > 0) {
                        path[pathDepth + 1][Object.keys(path[pathDepth + 1])[0]] = ''
                        if ($this.parent.__configuration.cards.exploration === 'top' && $this.parent.__drill_down === 'Steps then Dimensions' && pathDepth === 2) {
                            path[pathDepth][Object.keys(path[pathDepth])[0]] = ''
                        }
                        result.parent = this.core.__getRowsByPath(path.filter((p, i) => i > 0), [...this.core.data, ...this.core.parents]).filter(r => r.Type !== 'net' && r.Type !== 'net_OoS' && r.unique !== unique)[0]
                    }
                }
                return result;
            },
            uniqueExist(unique) {
                return this.bars[unique];
            },
            parentExist(unique) {
                return this.parents[unique]
            }
        };
        let barsData = {
            ...baseBarsData,
            core: core
        }
        if (core.data.length) {
            barsData.bars = core.data.map((row) => ({
                x: this.getX({data: core.data, parents: core.parents, element: row}, core, this.parent.__configuration),
                y: this.getY({data: core.data, parents: core.parents, element: row}, core, this.parent.__configuration),
                width: this.getWidth({data: core.data, parents: core.parents, element: row}, core, this.parent.__configuration),
                height: this.getHeight({data: core.data, parents: core.parents, element: row}, core, this.parent.__configuration),
                properties: row
            })).reduce((acc, current) => {
                acc[current.properties.unique] = current;
                return acc;
            }, {})
        } else {
            barsData.bars = []
        }
        if (core.parents.length) {
            barsData.parents = core.parents.map((row) => ({
                x: this.getX({data: core.data, parents: core.parents, element: row}, core, this.parent.__configuration),
                y: this.getY({data: core.data, parents: core.parents, element: row}, core, this.parent.__configuration),
                width: this.getWidth({data: core.data, parents: core.parents, element: row}, core, this.parent.__configuration),
                height: this.getHeight({data: core.data, parents: core.parents, element: row}, core, this.parent.__configuration),
                properties: row
            })).reduce((acc, current) => {
                acc[current.properties.unique] = current;
                return acc;
            }, {})
        } else {
            barsData.parents = []
        }
        this.core.bars = barsData;
        if (this.parent.__comparison && this.parent.__configuration.coc) {
            let barsData = {
                ...baseBarsData,
                core: core.__comparison
            }
            if (core.__comparison.data.length) {
                barsData.bars = core.__comparison.data.map((row) => ({
                    x: this.getX({data: core.__comparison.data, parents: core.__comparison.parents, element: row}, core.__comparison, this.parent.__configuration),
                    y: this.getY({data: core.__comparison.data, parents: core.__comparison.parents, element: row}, core.__comparison, this.parent.__configuration),
                    width: this.getWidth({data: core.__comparison.data, parents: core.__comparison.parents, element: row}, core.__comparison, this.parent.__configuration),
                    height: this.getHeight({data: core.__comparison.data, parents: core.__comparison.parents, element: row}, core.__comparison, this.parent.__configuration),
                    properties: row
                })).reduce((acc, current) => {
                    acc[current.properties.unique] = current;
                    return acc;
                }, {})
            } else {
                barsData.bars = []
            }
            if (core.__comparison.parents.length) {
                barsData.parents = core.__comparison.parents.map((row) => ({
                    x: this.getX({data: core.__comparison.data, parents: core.__comparison.parents, element: row}, core.__comparison, this.parent.__configuration),
                    y: this.getY({data: core.__comparison.data, parents: core.__comparison.parents, element: row}, core.__comparison, this.parent.__configuration),
                    width: this.getWidth({data: core.__comparison.data, parents: core.__comparison.parents, element: row}, core.__comparison, this.parent.__configuration),
                    height: this.getHeight({data: core.__comparison.data, parents: core.__comparison.parents, element: row}, core.__comparison, this.parent.__configuration),
                    properties: row
                })).reduce((acc, current) => {
                    acc[current.properties.unique] = current;
                    return acc;
                }, {})
            } else {
                barsData.parents = []
            }
            this.core.__comparison.bars = barsData;
        }
        return barsData
    }

    /**
     * Return layer object
     * @param source
     * @param comparison
     * @param filter
     * @param parents
     * @param current
     * @param frame
     * @param comparisonFrame
     * @returns {{circleXY(*, *): {x, y}, __isRowMatchPath(*, *): (boolean), __makeWaterfallPath(*, *): *[], __getRowsByPath(*, null=): *, frame: {}, parents: *[]}|*|boolean|*[]|{x: number, y: number}}
     */
    getCore({source, comparison, filter, parents=[]}, frame={}, comparisonFrame={}) {
        let core = {
            ...this.__core,
            frame,
            parents
        }
        core.source = source
        core.d3 = this.parent.__d3
        core.annotations = []
        // let prevTexts, prevAnnotations;
        // let prevData = this.core && this.core.data && this.core.data
        // let prevDataLength;
        // if (prevData) {
        //     prevDataLength = prevData.length
        // }
        // if (prevDataLength && prevDataLength > 0) {
        //     prevTexts = this.core.texts;
        //     prevAnnotations = this.core.annotations;
        // }
        this.core = core;
        let result = this.filteredRows(source);
        // Here work about remain
        core.data = result.data.map(r => {
            let path = this.core.__makeWaterfallPath(r, false);
            let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
            return {...r, depth: pathDepth}
        });
        core.parents = result.parents.map(r => {
            let path = this.core.__makeWaterfallPath(r, false);
            let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
            return {...r, depth: pathDepth}
        });
        core.scale = this.getScales(core)
        core.axes = this.getAxes(core)
        // if (!prevDataLength || (result.data.length !== prevDataLength || result.data.map(r => r.unique).join(',') !== prevData.map(r => r.unique).join(',')) || !prevTexts || !prevAnnotations) {
        core.texts = this.prepareTextData([...core.data, ...core.parents].sort((a, b) => a.Row - b.Row))
        core.annotations = this.prepareAnnotationData([...core.data, ...core.parents])
        // } else {
        //     core.texts = prevTexts
        //     core.annotations = prevAnnotations
        // }
        if (this.parent.__configuration.coc && comparison) {
            comparison = comparison.map(r => {
                let path = core.__makeWaterfallPath(r, false);
                let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
                return {...r, depth: pathDepth}
            })
            let result = this.filteredRows(comparison);
            core.__comparison = {
                source: comparison,
                d3: core.d3,
                ...this.__core,
                ...result,
                isComparison: true,
                frame: comparisonFrame,
            }
            // let prevTexts, prevAnnotations;
            // let prevData = this.core && this.core.__comparison && this.core.__comparison.data
            // let prevDataLength;
            // if (prevData) {
            //     prevDataLength = prevData.length
            // }
            // if (!prevDataLength || (result.data.length !== prevDataLength || result.data.map(r => r.unique).join(',') !== prevData.map(r => r.unique).join(',')) || !prevTexts || !prevAnnotations) {
            core.__comparison.annotations = this.prepareAnnotationData([...core.__comparison.data, ...core.__comparison.parents])
            core.__comparison.texts = this.prepareTextData([...core.__comparison.data, ...core.__comparison.parents]);
            // } else {
            //     core.__comparison.annotations = this.core.__comparison.texts
            //     core.__comparison.texts = this.core.__comparison.annotations
            // }
            core.__comparison.scale = this.getScales(core.__comparison);
            core.__comparison.axes = this.getAxes(core.__comparison);
            // Joins both scale
            if (this.parent.__configuration.axis.reverse) {
                let newDomainX = [Math.min(...core.__comparison.scale.x.domain, ...core.scale.x.domain), Math.max(...core.__comparison.scale.x.domain, ...core.scale.x.domain)]
                core.scale.x.for.domain(newDomainX)
                core.scale.x.domain = newDomainX
                core.__comparison.scale.x.for.domain(newDomainX)
                core.__comparison.scale.x.domain = newDomainX
            } else {
                let newDomainY = [Math.min(...core.__comparison.scale.y.domain, ...core.scale.y.domain), Math.max(...core.__comparison.scale.y.domain, ...core.scale.y.domain)]
                core.scale.y.for.domain(newDomainY)
                core.scale.y.domain = newDomainY
                core.__comparison.scale.y.for.domain(newDomainY)
                core.__comparison.scale.y.domain = newDomainY
            }

            if (this.parent.__join) {
                let resultData;
                let leftData = [...core.data, ...core.parents].sort((a, b) => a.Row - b.Row)
                let rightData = [...core.__comparison.data, ...core.__comparison.parents].sort((a, b) => a.Row - b.Row)
                if (!this.parent.__joinContinuous) {
                    if (leftData[1].Type === 'net_OoS') {
                        leftData = leftData.filter((r, i) => i > 1)
                    } else {
                        leftData = leftData.filter((r, i) => i > 0)
                    }
                    resultData = [...rightData, ...leftData.map(r => ({...r, Row: r.Row + core.__comparison.source.length}))]
                } else {
                    if (rightData[1].Type === 'net_OoS') {
                        rightData = rightData.filter((r, i) => i > 1)
                    } else {
                        rightData = rightData.filter((r, i) => i > 0)
                    }
                    resultData = [...leftData, ...rightData.map(r => ({...r, Row: r.Row + core.source.length}))]
                }
                core.data = resultData.filter(r => [...core.parents.map(e => e.unique), ...core.__comparison.parents.map(e => e.unique)].indexOf(r.unique) === -1);
                core.parents = resultData.filter(r => [...core.parents.map(e => e.unique), ...core.__comparison.parents.map(e => e.unique)].indexOf(r.unique) !== -1);
                core.texts = this.prepareTextData([...core.data, ...core.parents].sort((a, b) => a.Row - b.Row))
                core.annotations = this.prepareAnnotationData([...core.data, ...core.parents])
                core.scale = this.getScales(core)
                core.axes = this.getAxes(core)
            }
        }
        this.core = core;
        return this.core;
    }

    /**
     * This allow to unmount current layer to switch plot type
     * @returns {*|{filter, circleXY(*, *): {x, y}, __isRowMatchPath(*, *): (boolean), __getRowDepthFromPath(*, *): number, __makeWaterfallPath(*, boolean=): *[], __getRowsByPath(*, null=): *}}
     */
    unmount() {
        if (this.parent.mounted) {
            if (this.core.frame.links) {
                this.core.frame.links.remove().exit()
                delete this.core.frame.links;
            }
            if (this.core.frame.annotations) {
                this.core.frame.annotations.remove().exit()
                delete this.core.frame.annotations;
            }
            if (this.core.frame.comparison) {
                if (this.core.frame.comparison.links) {
                    this.core.frame.comparison.links.remove().exit()
                    delete this.core.frame.comparison.links;
                }
                if (this.core.frame.comparison.annotations) {
                    this.core.frame.comparison.annotations.remove().exit()
                    delete this.core.frame.comparison.annotations;
                }
            }
        }
        return this.core;
    }

    /**
     * This method should add to each traces/texts/links their position and style
     * @param core
     * @param transition
     */
    addPosition(core, transition = false) {
        throw new Error('Layers should override addPosition method');
    }
    __addAnnotationsTraces(update, core, frame) {
        if (update) {
            frame.__annotations = frame.plot
                .selectAll('text.datama-waterfall-bar-annotations')
                .data(core.annotations, d => d.unique)
            frame.annotations = frame.__annotations
                .enter()
                .append('text')
                .attr('id', d => d.unique + '-annotations-' + d.type)
                .attr('class', d => 'datama-waterfall-bar-annotations ' + (d.disabled ? 'no-click' : ''))
                .attr('data-unique', d => d.unique)
                .merge(frame.__annotations)
                .on('click', (e, d) => this.parent.__layers[this.parent.__configuration.plot].explore(d.unique ? d : core.bars.get((e.target || d3.event.target).attributes['data-unique'].value).properties, core))
                .on('contextmenu', (event, d) => this.__listenContextMenu(event, d, core))
                .on("mouseenter", (event, d) => this.__listenHover(event, d, core, true))
                .on("mouseout", (event, d) => this.__listenHover(event, d, core, false))
            frame.__annotations.exit().remove()
        } else {
            frame.__annotations = frame.plot
                .selectAll('text.datama-waterfall-bar-annotations')
                .data(core.annotations, d => d.id)
            frame.annotations = frame.__annotations.enter()
                .append('text')
                .attr('id', d => d.unique + '-annotations-' + d.type)
                .attr('class', d => 'datama-waterfall-bar-annotations ' + (d.disabled ? 'no-click' : ''))
                .attr('data-unique', d => d.unique)
                .on('click', (e, d) => this.parent.__layers[this.parent.__configuration.plot].explore(d.unique ? d : core.bars.get((e.target || d3.event.target).attributes['data-unique'].value).properties, core))
                .on('contextmenu', (event, d) => this.__listenContextMenu(event, d, core))
                .on("mouseenter", (event, d) => this.__listenHover(event, d, core, true))
                .on("mouseout", (event, d) => this.__listenHover(event, d, core, false))
        }
    }

    __addTextsTraces(update, core, frame) {
        frame.__texts = frame.plot
            .selectAll('text.datama-waterfall-bar-texts')
            .data(core.texts, d => d.id)
        if (update) {
            frame.texts = frame.__texts
                .enter()
                .append('text')
                .attr('id', d => d.id)
                .attr('class', d => 'datama-waterfall-bar-texts ' + (d.disabled ? 'no-click' : ''))
                .merge(frame.__texts)
                .attr('data-unique', d => d.unique)
                .on('click', (e, d) => {
                    this.parent.__layers[this.parent.__configuration.plot].explore(d.unique ? d : core.bars.get((e.target || d3.event.target).attributes['data-unique'].value).properties, core)
                })
                .on('contextmenu', (event, d) => this.__listenContextMenu(event, d, core))
                .on("mouseenter", (event, d) => this.__listenHover(event, d, core, true))
                .on("mouseout", (event, d) => this.__listenHover(event, d, core, false))
            frame.__texts.exit().remove()
        } else {
            frame.texts = frame.__texts.enter()
                .append('text')
                .attr('id', d => d.id)
                .attr('class', d => 'datama-waterfall-bar-texts ' + (d.disabled ? 'no-click' : ''))
                .attr('data-unique', d => d.unique)
                .on('click', (e, d) => this.parent.__layers[this.parent.__configuration.plot].explore(d.unique ? d : core.bars.get((e.target || d3.event.target).attributes['data-unique'].value).properties, core))
                .on('contextmenu', (event, d) => this.__listenContextMenu(event, d, core))
                .on("mouseenter", (event, d) => this.__listenHover(event, d, core, true))
                .on("mouseout", (event, d) => this.__listenHover(event, d, core, false))
            frame.__texts.exit().remove()
        }
    }

    __addLinksTraces(update, core, frame) {
        frame.__links = frame.plot
            .selectAll('line.datama-waterfall-bar-links')
            .data([...core.data, ...core.parents].sort((a, b) => a.Row - b.Row), d => d.unique)
        if (update) {
            frame.links = frame.__links
                .enter()
                .append('line')
                .attr('class', d => 'datama-waterfall-bar-links ' + (core.data.map(r => r.unique).indexOf(d.unique) !== -1 && !d.disabled ? '' : 'no-click'))
                .merge(frame.__links)
            frame.__links.exit().remove()
        } else {
            frame.links = frame.__links
                .enter()
                .append('line')
                .attr('class', d => 'datama-waterfall-bar-links ' + (core.data.map(r => r.unique).indexOf(d.unique) !== -1 && !d.disabled ? '' : 'no-click'))
                .attr('data-unique', d => d.unique)
                .on('click', (e, d) => this.parent.__layers[this.parent.__configuration.plot].explore(d.unique ? d : core.bars.get((e.target || d3.event.target).attributes['data-unique'].value).properties, core))
                .on('contextmenu', (event, d) => this.__listenContextMenu(event, d, core))
                .on("mouseenter", (event, d) => this.__listenHover(event, d, core, true))
                .on("mouseout", (event, d) => this.__listenHover(event, d, core, false))
        }
    }

    __addBarsTraces(update, core, frame) {
        if (!frame.bars) {
            frame.bars = frame.plot
                .append('g')
                .attr('class', 'datama-waterfall-bars')
        }
        frame.__bar = frame.bars
            .selectAll('rect.datama-waterfall-bar')
            .data([...core.data, ...core.parents].sort((a, b) => a.Row - b.Row), d => d.unique)
        if (update) {
            frame.__bar.exit().remove()
            frame.bar = frame.__bar
                .enter()
                .append('rect')
                .attr('id', d => d.unique)
                .attr('data-unique', d => d.unique)
                .attr('data-type', d => d.Type)
                .attr('data-depth', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        return bar.depth
                    }
                    return 0;
                })
                .attr('data-position', d => {
                    return d.position
                })
                .attr('data-expanded', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar && bar.children && bar.children.length) {
                        return true;
                    }
                    return false
                })
                .merge(frame.__bar)
                .on('click', (e, d) => this.parent.__layers[this.parent.__configuration.plot].explore(d.unique ? d : core.bars.get((e.target || d3.event.target).attributes['data-unique'].value).properties, core))
                .on('contextmenu', (event, d) => this.__listenContextMenu(event, d, core))
                .on("mouseenter", (event, d) => this.__listenHover(event, d, core, true))
                .on("mouseout", (event, d) => this.__listenHover(event, d, core, false))
        } else {
            frame.bar = frame.__bar
                .enter()
                .append('rect')
                .attr('id', d => d.unique)
                .attr('data-unique', d => d.unique)
                .attr('data-type', d => d.Type)
                .attr('data-depth', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        return bar.depth
                    }
                    return 0;
                })
                .attr('data-position', d => {
                    return d.position
                })
                .attr('data-expanded', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar && bar.children && bar.children.length) {
                        return true;
                    }
                    return false
                })
                .on('click', (e, d) => this.parent.__layers[this.parent.__configuration.plot].explore(d.unique ? d : core.bars.get((e.target || d3.event.target).attributes['data-unique'].value).properties, core))
                .on('contextmenu', (event, d) => this.__listenContextMenu(event, d, core))
                .on("mouseenter", (event, d) => this.__listenHover(event, d, core, true))
                .on("mouseout", (event, d) => this.__listenHover(event, d, core, false))
        }
    }

    addTraces(update=false) {
        this.getPlotData(this.core)
        this.__addBarsTraces(update, this.core, this.core.frame)
        this.__addLinksTraces(update, this.core, this.core.frame)
        this.__addAnnotationsTraces(update, this.core, this.core.frame)
        this.__addTextsTraces(update, this.core, this.core.frame)
        if (this.parent.__comparison && this.parent.__configuration.coc) {
            this.__addBarsTraces(update, this.core.__comparison, this.core.frame.comparison)
            this.__addLinksTraces(update, this.core.__comparison, this.core.frame.comparison)
            this.__addAnnotationsTraces(update, this.core.__comparison, this.core.frame.comparison)
            this.__addTextsTraces(update, this.core.__comparison, this.core.frame.comparison)
        }
        this.__listenZoom()
        this.addPosition(this.core, update)
    }

    /**
     * Listen zoom on plot
     * @private
     */
    __listenZoom() {
        return new Promise(resolve => {
            this.core.frame.zoom = this.core.d3.zoom().scaleExtent([0.25, 2], [this.parent.__configuration.width, this.parent.__configuration.height]).on('zoom', (event) => {
                if (this.parent.__keys.ctrl && event.sourceEvent.type === 'wheel') {
                    this.zoom(event, this.core.source)
                } else if (this.parent.__keys.shift && event.sourceEvent.type === 'mousemove') {
                    this.zoom(event, this.core.source)
                }
            })
            let keys = Object.keys(this.core.frame).filter(e => e !== 'zoom');
            let i = 0;
            while (i < keys.length) {
                if (keys[i].indexOf('debug') === -1 && this.core.frame[keys[i]].call && keys[i] !== 'svg' && keys[i] !== 'plot') {
                    this.core.frame[keys[i]].call(this.core.frame.zoom, this.core.d3.zoomIdentity)
                }
                i++;
            }
            if (this.core.__comparison) {
                let keys = Object.keys(this.core.frame.comparison).filter(e => e !== 'zoom');
                let i = 0;
                while (i < keys.length) {
                    if (keys[i].indexOf('debug') === -1 && this.core.frame.comparison[keys[i]].call && keys[i] !== 'svg' && keys[i] !== 'plot') {
                        this.core.frame.comparison[keys[i]].call(this.core.frame.zoom, this.core.d3.zoomIdentity)
                    }
                    i++;
                }
            }
            resolve()
        })
    }

    /**
     * load filters from previous layers
     * @private
     */
    loadFilters(filters) {
        throw new Error('Layers should override loadFilters method');
    }


    /**
     * Fetch data from filters
     * @param source
     * @returns {{data: *, parents: *[]}}
     */
    filteredRows(source) {
        throw new Error('Layers should override loadFilters method');
    }

    /**
     * Handler of D3 Zoom event :
     * - Double click
     * - Wheel zoom
     * - Drag
     * @returns {boolean}
     */

    zoom(event, data) {
        let scale = this.parent.__configuration.axis.reverse ? this.core.scale.x : this.core.scale.y,
            axes = this.parent.__configuration.axis.reverse ? this.core.axes.x : this.core.axes.y,
            frame = this.parent.__configuration.axis.reverse ? this.core.frame.x : this.core.frame.y,
            scale_comparison = false,
            axes_comparison = false,
            frame_comparison = false;
        let scaleCopy = scale.for.copy()
        scale.for = event.transform.rescaleY(scaleCopy)
        scale.domain = scale.for.domain()
        scale.range = scale.for.range()
        frame.call(axes.scale(scale.for))
        this.core.frame.x_line
            .attr("x1", this.parent.__configuration.axis.reverse ? this.core.scale.x.for(Math.max(...[this.core.scale.x.domain[0], 0])) : this.core.scale.x.range[0])     // x position of the first end of the line
            .attr("y1", this.parent.__configuration.axis.reverse ? this.core.scale.y.range[0] : this.core.scale.y.for(Math.max(...[this.core.scale.y.domain[0], 0])))      // y position of the first end of the line
            .attr("x2", this.parent.__configuration.axis.reverse ? this.core.scale.x.for(Math.max(...[this.core.scale.x.domain[0], 0])) : this.core.scale.x.range[this.core.scale.x.range.length - 1] + (this.core.scale.x.part / 2))     // x position of the second end of the line
            .attr("y2", this.parent.__configuration.axis.reverse ? this.core.scale.y.range[this.core.scale.y.range.length - 1] : this.core.scale.y.for(Math.max(...[this.core.scale.y.domain[0], 0])));
        if (this.core.__comparison) {
            scale_comparison = this.parent.__configuration.axis.reverse ? this.core.__comparison.scale.x : this.core.__comparison.scale.y
            axes_comparison = this.parent.__configuration.axis.reverse ? this.core.__comparison.axes.x : this.core.__comparison.axes.y
            frame_comparison = this.parent.__configuration.axis.reverse ? this.core.frame.comparison.x : this.core.frame.comparison.y
            let scaleComparisonCopy = scale_comparison.for.copy()
            scale_comparison.for = event.transform.rescaleY(scaleComparisonCopy)
            scale_comparison.domain = scale_comparison.for.domain()
            scale_comparison.range = scale_comparison.for.range()
            frame_comparison.call(axes_comparison.scale(scale_comparison.for))
            this.core.frame.comparison.x_line
                .attr("x1", this.parent.__configuration.axis.reverse ? this.core.__comparison.scale.x.for(Math.max(...[this.core.__comparison.scale.x.domain[0], 0])) : this.core.__comparison.scale.x.range[0])     // x position of the first end of the line
                .attr("y1", this.parent.__configuration.axis.reverse ? this.core.__comparison.scale.y.range[0] : this.core.__comparison.scale.y.for(Math.max(...[this.core.__comparison.scale.y.domain[0], 0])))      // y position of the first end of the line
                .attr("x2", this.parent.__configuration.axis.reverse ? this.core.__comparison.scale.x.for(Math.max(...[this.core.__comparison.scale.x.domain[0], 0])) : this.core.__comparison.scale.x.range[this.core.__comparison.scale.x.range.length - 1] + (this.core.__comparison.scale.x.part / 2))     // x position of the second end of the line
                .attr("y2", this.parent.__configuration.axis.reverse ? this.core.__comparison.scale.y.range[this.core.__comparison.scale.y.range.length - 1] : this.core.__comparison.scale.y.for(Math.max(...[this.core.__comparison.scale.y.domain[0], 0])));
        }
        this.getPlotData(this.core)
        this.addPosition(this.core, true)
    }

    /**
     * Display fully a text if cropped when hover or hovering bar
     * @param event
     * @param element
     * @param core
     * @param state
     * @returns {*}
     * @private
     */
    __hoveringBarDisplayCroppedTextFully(event, element, core, state) {
        return new Promise((resolve) => {
            if (element.text && element.full_text) {
                let el = core.frame.plot.select('#' + (event.target || d3.event).id)
                if (state && element.text.indexOf('...') === element.text.length - 3 && element.text !== element.full_text) {
                    el.text(element.full_text)
                } else {
                    el.text(element.text)
                }
                el.on("mouseenter", (event) => this.__listenHover(event, element, core, true)).on("mouseout", (event) => this.__listenHover(event, element, core, false))
            }
            resolve();
        })
    }
    __getElementText(core, d) {
        let bar = core.bars.get(d.unique);
        if (bar) {
            let fontSize = this.parent.__configuration.fonts.size;
            this.__testingElement.setAttribute('style', 'font-size: ' + fontSize + "px !important;")
            if (bar.properties.Spliced) {
                return bar.properties[this.parent.__configuration.explore.levels[this.parent.__configuration.explore.levels.length - 1]]
            }
            if (d.text && d.full_text && d.text.indexOf('...') !== -1) {
                this.__testingElement.innerText = d.full_text;
                if (this.parent.__configuration.axis.reverse) {
                    if (this.__testingElement.clientWidth < core.scale.x.spaces[bar.depth]) {
                        return d.full_text
                    } else {
                        let text = d.full_text
                        // Try to apply crop here
                        while (this.__testingElement.clientWidth > core.scale.x.spaces[bar.depth]) {
                            text = text.substring(0, text.length - 2);
                            this.__testingElement.innerText = text;
                        }
                        return text + '...'
                    }
                } else {
                    if (this.__testingElement.clientWidth < bar.width || bar.depth >= 2) {
                        return d.full_text
                    } else {
                        let text = d.full_text
                        // Try to apply crop here
                        while (this.__testingElement.clientWidth > bar.width) {
                            text = text.substring(0, text.length - 2);
                            this.__testingElement.innerText = text;
                        }
                        return text + '...'
                    }
                }
            } else if (d.text && d.text.indexOf('...') === -1) {
                this.__testingElement.innerText = d.text;
                if (this.parent.__configuration.axis.reverse) {
                    if (this.__testingElement.clientWidth < core.scale.x.spaces[bar.depth]) {
                        return d.text
                    } else {
                        let text = d.text
                        // Try to apply crop here
                        while (this.__testingElement.clientWidth > core.scale.x.spaces[bar.depth]) {
                            text = text.substring(0, text.length - 2);
                            this.__testingElement.innerText = text;
                        }
                        return text + '...'
                    }
                } else {
                    if (this.__testingElement.clientWidth < bar.width || bar.depth >= 2) {
                        return d.text
                    } else {
                        let text = d.text
                        // Try to apply crop here
                        while (this.__testingElement.clientWidth > bar.width) {
                            text = text.substring(0, text.length - 2);
                            this.__testingElement.innerText = text;
                        }
                        return text + '...'
                    }

                }
            }
            return d.text;
        }
        return '';
    }

    /**
     * Toggle opacity of hoverOnly texts
     * @param event
     * @param element
     * @param core
     * @param state
     * @returns {*}
     * @private
     */
    __hoveringBarDisplayHoverOnlyAnnotation(event, element, core, state) {
        return new Promise((resolve) => {
            let bar = core.bars.get(element.unique);
            if (bar) {
                if (state) {
                    if (!this.parent.__configuration.display.secondary[1].hidden && this.parent.__configuration.display.secondary[1].hoverOnly) {
                        // Show top labels
                        let el = document.getElementById(element.unique + '-annotations-top')
                        if (el && el.attributes.opacity) {
                            el.attributes.opacity.value = 1
                        }
                    }
                    if (!this.parent.__configuration.display.secondary[0].hidden && this.parent.__configuration.display.secondary[0].hoverOnly && (!bar.children || bar.children.length === 0)) {
                        // Show bar labels
                        let el = document.getElementById(element.unique + '-annotations-label')
                        if (el && el.attributes.opacity) {
                            el.attributes.opacity.value = 1
                        }
                    }
                } else {
                    if (this.parent.__configuration.display.secondary[1].hoverOnly) {
                        // Show top labels
                        let el = document.getElementById(element.unique + '-annotations-top')
                        if (el && el.attributes.opacity) {
                            el.attributes.opacity.value = 0
                        }
                    }
                    if (this.parent.__configuration.display.secondary[0].hoverOnly && (!bar.children || bar.children.length === 0)) {
                        // Show bar labels
                        let el = document.getElementById(element.unique + '-annotations-label')
                        if (el && el.attributes.opacity) {
                            el.attributes.opacity.value = 0
                        }
                    }
                }
            }
            resolve()
        })
    }
    __hoverExpandChild(event, element, core, state) {
        let childs = core.__getNextLevelChild(element, core)
        // childs.forEach(c => {
        //     // console.log(core.bars.select('#' + c.unique))
        // })
        // Here i can show the childs on hover
        console.log(childs)
    }

    /**
     * Handler of hover event
     * @returns {boolean}
     */
    __listenHover(event, element, core, state) {
        if (!element.unique) {
            element = core.bars.get(event.target.attributes['data-unique'].value).properties
        }
        // this.__hoverExpandChild(event, element, core, state);
        this.__hoveringBarDisplayCroppedTextFully(event, {...element}, core, state)
        if (!element.Type) {
            element = core.bars.get(element.unique).properties
        }
        this.__hoveringBarDisplayHoverOnlyAnnotation(event, element, core, state)
        return new Promise((resolve) => {
            if (state) {
                let bar = core.bars.get(element.unique);
                if (bar) {
                    new Promise((resolve) => {
                        if (bar.el) {
                            bar.el.classList.add('hover')
                        }
                        resolve()
                    })
                    let fromTop;
                    if (bar.y > this.parent.__configuration.baseHeight / 2) {
                        fromTop = (this.parent.__configuration.baseHeight - (bar.y + (this.parent.__configuration.padding.t + this.parent.__configuration.padding.b + (((this.parent.__configuration.fonts.size * 1.75) + (this.parent.__configuration.fonts.size * 1.25)) * 1.5)))) * -1
                    } else {
                        fromTop = bar.y + ((this.parent.__configuration.padding.t + this.parent.__configuration.padding.b + (((this.parent.__configuration.fonts.size * 1.75) + (this.parent.__configuration.fonts.size * 1.25)) * 1.5)))
                    }
                    let fromLeft = bar.x + bar.width + this.parent.__configuration.padding.l
                    if (fromLeft > this.parent.__configuration.baseWidth / 2) {
                        fromLeft = (this.parent.__configuration.baseWidth - bar.x - this.parent.__configuration.padding.r) * -1
                        if (core.isComparison && this.parent.__configuration.comparison.side === 'overlay') {
                            fromLeft += this.parent.__configuration.comparison.translate.x
                        }
                    } else {
                        if (core.isComparison && this.parent.__configuration.comparison.side === 'overlay') {
                            fromLeft += this.parent.__configuration.comparison.translate.x
                        }
                    }
                    if (core.isComparison && this.parent.__configuration.comparison.side !== 'overlay') {
                        if (this.parent.__configuration.comparison.side === 'horizontal') {
                            fromLeft = this.parent.__configuration.width + (this.depthPadding * 2) + bar.x + bar.width + this.parent.__configuration.padding.l
                            if (fromLeft > this.parent.__configuration.width * 1.5) {
                                fromLeft = (this.parent.__configuration.baseWidth - (this.parent.__configuration.width + (this.depthPadding * 2)) - bar.x - this.parent.__configuration.padding.r) * -1
                                if (core.isComparison && this.parent.__configuration.comparison.side === 'overlay') {
                                    fromLeft += this.parent.__configuration.comparison.translate.x
                                }
                            } else {
                                if (core.isComparison && this.parent.__configuration.comparison.side === 'overlay') {
                                    fromLeft += this.parent.__configuration.comparison.translate.x
                                }
                            }
                        } else {
                            if (bar.y > this.parent.__configuration.height / 2) {
                                fromTop = this.parent.__configuration.height + (this.depthPadding * 2) + (this.parent.__configuration.baseHeight - (bar.y + (this.parent.__configuration.padding.t + this.parent.__configuration.padding.b + (((this.parent.__configuration.fonts.size * 1.75) + (this.parent.__configuration.fonts.size * 1.25)) * 1.5)))) * -1
                            } else {
                                fromTop = this.parent.__configuration.height + (this.depthPadding * 2) + bar.y + ((this.parent.__configuration.padding.t + this.parent.__configuration.padding.b + (((this.parent.__configuration.fonts.size * 1.75) + (this.parent.__configuration.fonts.size * 1.25)) * 1.5)))
                            }
                        }
                    }
                    if ((bar && bar.children && bar.children.length === 0) || (bar.properties.Hover && bar.properties.Hover.length) || (bar.properties.Type === 'net' || bar.properties.Type === 'net_OoS')) {
                        this.parent.__hover.show({x: fromLeft, y: fromTop}, bar.properties, this.parent.__configuration.bars.hover)
                    }
                }
            } else {
                let bar = core.bars.get(element.unique);
                if (bar) {
                    new Promise((resolve) => {
                        if (bar.el) {
                            bar.el.classList.remove('hover')
                        }
                        resolve()
                    })
                    this.parent.__hover.hide()
                }
            }
            resolve()
        })
    }

    /**
     * Handler of contextmenu event
     * @returns {boolean}
     */
    __listenContextMenu(event, element, core) {
        if (typeof element === 'number') {
            element = event;
            event = d3.event
        }
        if (!element.unique) {
            element = core.bars.get((event.target || d3.event).attributes['data-unique'].value).properties
        }
        if (!element.Type) {
            element = core.bars.get(element.unique).properties
        }
        event.preventDefault()
        if (!element.Type) {
            element = core.bars.get(element.unique).properties
        }
        let bar = core.bars.get(element.unique);
        if (bar) {
            this.parent.__contextMenu.set('core', core)
            this.parent.__contextMenu.show({event}, element, {})
        }
    }

    /**
     * Synchronize context menu configuration
     */
    syncContextMenu() {
        this.parent.__contextMenu.set('elements', this.__contextMenu.elements)
        this.parent.__contextMenu.set('callbacks', this.__contextMenu.callbacks)
        return this;
    }

    __filterIndex(path, includeDefaultFilter=true) {
        return this.filters.map(f => JSON.stringify(f.filter((ff, i) => {
            return !includeDefaultFilter && f.length !== path.length ? i > 0 : true
        }))).indexOf(JSON.stringify(path))
    }
    __filterExist(path, includeDefaultFilter=true) {
        return  this.__filterIndex(path, includeDefaultFilter) !== -1;
    }

    __removeFilter(path, removePath=true) {
        let removed = 0;
        /**
         * Remove filters & childs filters
         */
        let sub_filters = path.filter(f => f[Object.keys(f)[0]]);
        sub_filters = sub_filters.filter((f, i) => i > 0).map(f => Object.keys(f)[0] + '>' + f[Object.keys(f)[0]]).join('');
        let filters_transformed = this.filters.map((filter) => filter.filter((f, i) => i > 0).map(f => Object.keys(f)[0] + '>' + f[Object.keys(f)[0]]).join(''));
        let i = filters_transformed.length - 1;
        while (i >= 0) {
            if (filters_transformed[i].indexOf(sub_filters) === 0) {
                if ((i === 0 && removePath) || i !== 0) {
                    this.filters.splice(i, 1)
                    removed++;
                }
            }
            i--;
        }
        return removed;
    }

    /**
     * Exploration behavior
     * @param element
     * @param core
     * @returns {*}
     */
    explore(element, core) {
        if (!element.Type) {
            element = core.bars.get(element.unique).properties
        }
        if (element.disabled) return false;
        if (element.Type !== 'net') {
            let source;
            let isFromComparison = false;
            if (this.parent.__join) {
                isFromComparison = this.core.source.map(r => r.unique).indexOf(element.unique) === -1
                source = this.core.source.map(r => r.unique).indexOf(element.unique) !== -1 ? this.core.source : this.core.__comparison.source
            } else {
                source = this.core.source
            }
            let bar = (isFromComparison ? this.core.bars : core.bars).get(element.unique)
            if (bar && bar.properties.Spliced) {
                this.parent.__configuration.bars.remain += bar.properties.Spliced
                this.parent.update();
            } else {
                /**
                 * Make path of selected element
                 * @type {[]}
                 */
                let path = core.__makeWaterfallPath(element);
                let pathNoDefaultFilter = core.__makeWaterfallPath(element, false);
                let childs = core.__getRowsByPath(pathNoDefaultFilter, source).filter(r => r.Type !== 'net' && r.unique !== element.unique);
                childs.sort((a, b) => parseInt(a.Filter_Rank) - parseInt(b.Filter_Rank))
                if (!this.__filterExist(path) && !this.__filterExist(pathNoDefaultFilter, false)) {
                    if (childs.length > 0 && !(isFromComparison ? core.__comparison.data : core.data).some(r => childs.map(c => c.unique).indexOf(r.unique) !== -1)) {
                        /**
                         * Add new filter
                         */
                        this.filters.push(path);
                        if (this.parent.__callback.exploreIn) {
                            this.parent.__callback.exploreIn(childs[0])
                        }
                        // Expand child
                        childs = core.__getRowsByPath(path, source)
                            .filter(r => r.Type !== 'net' && r.unique !== element.unique)
                            .filter(c => !c.Level_02 || c.Level_02 === '')
                        childs.forEach(c => {
                                let path = core.__makeWaterfallPath(c);
                                /**
                                 * Add new filter
                                 */
                                this.filters.push(path);
                            })
                    } else {
                        /**
                         * Here we must delete parent filter
                         * @type {number}
                         */
                        let parentPathIndex = -1;
                        let parent = (isFromComparison ? this.core.__comparison.bars : this.core.bars).get(element.unique).parent
                        while (parentPathIndex === -1) {
                            let parentPath  = core.__makeWaterfallPath(parent, false)
                            let parentObj = (isFromComparison ? this.core.bars : core.bars).get(parent.unique)
                            parentPathIndex = this.__filterIndex(parentPath, false)
                            if (parentPathIndex === -1) {
                                if (parentObj.parent == null) {
                                    parentPathIndex = false
                                } else {
                                    parent = parentObj.parent;
                                }
                            }
                        }
                        if (parentPathIndex !== false) {
                            this.filters.splice(parentPathIndex, 1)
                            if (this.parent.__callback.exploreOut) {
                                this.parent.__callback.exploreOut(element)
                            }
                        }
                    }
                } else {
                    this.__removeFilter(path)
                    if (this.parent.__callback.exploreOut) {
                        this.parent.__callback.exploreOut(element)
                    }
                }
            }
        } else {
            /**
             * Click on net bar, remove filters
             * @type {*[]}
             */
            this.filters = []
            if (this.parent.__callback.exploreOut) {
                this.parent.__callback.exploreOut('all')
            }
        }
        core = this.getCore(
            {
                source: this.core.source,
                comparison: this.core.__comparison ? this.core.__comparison.source : false,
                parents: this.core.parents
            },
            this.core.frame,
            this.core.frame.comparison
        )
        this.addOverlay(this.core)
        if (this.parent.__comparison && this.parent.__configuration.coc) {
            this.addOverlay(this.core.__comparison)
        }
        this.addTraces(true);
        return core;
    }

    prepareTextData(data) {
        let texts = []
        data.forEach(r => {
            let path = this.core.__makeWaterfallPath(r, false)
            let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
            let maxWidth;
            if (this.parent.__configuration.axis.reverse && pathDepth < 2 && this.core.scale.x.spaces) {
                maxWidth = this.core.scale.x.spaces[pathDepth];
            } else {
                maxWidth = this.core.scale.x.part / 2;
                if (pathDepth === 2) {
                    maxWidth = this.parent.__configuration.height - 150;
                }
            }
            if (maxWidth <= 0) {
                maxWidth = 50;
            }
            // Reduce segments length
            let text = r[this.parent.__configuration.explore.levels[pathDepth]].split('(')[0]
                .trim()
            if (text.split(' ').length > text.split('*').length || text.split(' ').length > text.split('_').length) {
                text = text.split(' ').map((e,i,s) => {
                    if (s.length >= 2 || r[this.parent.__configuration.explore.levels[pathDepth]].length > 15) {
                        if (pathDepth > 1 && e.length > 6 && e[0] !== -1) e = e.substring(0, 5) + '.'
                    }
                    return e
                }).join(' ')
            } else if (text.split('*').length > text.split(' ').length) {
                text = text.split('*').map((e,i,s) => {
                    if (s.length >= 2 || r[this.parent.__configuration.explore.levels[pathDepth]].length > 15) {
                        if (pathDepth > 1 && e.length > 6 && e[0] !== -1) e = e.substring(0, 5) + '.'
                    }
                    return e
                }).join('*')
            } else {
                text = text.split('_').map((e,i,s) => {
                    if (s.length >= 2 || r[this.parent.__configuration.explore.levels[pathDepth]].length > 15) {
                        if (pathDepth > 1 && e.length > 6 && e[0] !== -1) e = e.substring(0, 5) + '.'
                    }
                    return e
                }).join('_')
            }
            if (r[this.parent.__configuration.explore.levels[pathDepth]] && typeof r[this.parent.__configuration.explore.levels[pathDepth]] === "string") {
                text += (r[this.parent.__configuration.explore.levels[pathDepth]].split('(')[1] ? ' (' + r[this.parent.__configuration.explore.levels[pathDepth]].split('(')[1] : '');
            }
            let result = DataMaUtils.makeText(
                text,
                {
                    width: maxWidth,
                    font: this.parent.__configuration.fonts,
                    allowOverflowRatio: 1.1,
                    breakingChars: {slash: '/', space: ' ', comma: ','}
                }
            ).map((t, i) => ({...r, ...t, id: r.unique + '-' + i}));
            texts.push(...result)
            return texts;
        });
        return texts;
    }

    prepareAnnotationData(data) {
        let result = [];
        let topLabels = data
            .map(r => {
                let obj = {
                    unique: r.unique,
                    text: r[this.parent.__configuration.display.secondary[1].column] && r[this.parent.__configuration.display.secondary[1].column].length ? r[this.parent.__configuration.display.secondary[1].column] + (
                        this.parent.__configuration.display.secondary[1].formatting.arrows ?
                            (r.Type === 'out' ? ' ()' : (r.Type === 'in' ? ' ()' : (r.Impact < 0 ? ' ()' : ' ()')))
                            : ''
                    ) : '',
                    type: 'top',
                    column: this.parent.__configuration.display.secondary[1].column
                };
                if (r.Type === 'net' || r.Type === 'net_OoS') {
                    if (this.parent.__configuration.display.secondary[1].column === 'Impact_disp') {
                        obj.text = r['Label'] + (this.parent.__configuration.display.secondary[0].column !== 'Impact_disp' && r["Impact_disp"] && r["Impact_disp"].length ? " (" + r["Impact_disp"] + ")" : '');
                    }
                }
                return obj;
            })
        let labels = data
            .map(r => {
                let text;
                if ((r.Type === 'net' || r.Type === 'net_OoS') && this.parent.__configuration.display.secondary[0].column === 'Impact_disp') {
                    text = r['Label'] + (this.parent.__configuration.display.secondary[1].column !== 'Impact_disp' && r["Impact_disp"] && r["Impact_disp"].length ? " (" + r["Impact_disp"] + ")" : '');
                } else {
                    text = r[this.parent.__configuration.display.secondary[0].column];
                }
                if (!text) {
                    text = ''
                } else {
                    text += (this.parent.__configuration.display.secondary[0].formatting.arrows ? (r.Type === 'out' ? ' ()' : (r.Type === 'in' ? ' ()' : (r.Impact < 0 ? ' ()' : ' ()'))) : '')
                }
                return {
                    unique: r.unique,
                    text:  text,
                    type: 'label',
                    column: this.parent.__configuration.display.secondary[0].column
                }})
        result.push(...topLabels)
        result.push(...labels)
        return result;
    }

    /**
     * Overlay parts
     */
    /**
     * Add to plot svg waterfall overlay :
     * - Axis lines
     * - Ticks
     */
    addOverlay(core, transition = false) {
        if (core.frame.x_line == null) {
            core.frame.x_line = core.frame.plot.append("line")
                // attach a line
                .attr('shape-rendering', 'crispedges')
                .style("stroke", "rgba(0,0,0,0.25)")  // colour the line
                .attr('stroke-width', .5)
                .attr("x1", this.parent.__configuration.axis.reverse ? this.core.scale.x.for(Math.max(...[this.core.scale.x.domain[0], 0])) : this.core.scale.x.range[0])     // x position of the first end of the line
                .attr("y1", this.parent.__configuration.axis.reverse ? this.core.scale.y.range[0] : this.core.scale.y.for(Math.max(...[this.core.scale.y.domain[0], 0])))      // y position of the first end of the line
                .attr("x2", this.parent.__configuration.axis.reverse ? this.core.scale.x.for(Math.max(...[this.core.scale.x.domain[0], 0])) : this.core.scale.x.range[this.core.scale.x.range.length - 1] + (this.core.scale.x.part - 50))     // x position of the second end of the line
                .attr("y2", this.parent.__configuration.axis.reverse ? this.core.scale.y.range[this.core.scale.y.range.length - 1] : this.core.scale.y.for(Math.max(...[this.core.scale.y.domain[0], 0])));
        } else {
            core.frame.x_line
                .style("stroke", "rgba(0,0,0,0.25)")  // colour the line
                .attr('stroke-width', .5)
                .attr("x1", this.parent.__configuration.axis.reverse ? this.core.scale.x.for(Math.max(...[this.core.scale.x.domain[0], 0])) : this.core.scale.x.range[0])     // x position of the first end of the line
                .attr("y1", this.parent.__configuration.axis.reverse ? this.core.scale.y.range[0] : this.core.scale.y.for(Math.max(...[this.core.scale.y.domain[0], 0])))      // y position of the first end of the line
                .attr("x2", this.parent.__configuration.axis.reverse ? this.core.scale.x.for(Math.max(...[this.core.scale.x.domain[0], 0])) : this.core.scale.x.range[this.core.scale.x.range.length - 1] + (this.core.scale.x.part - 50))     // x position of the second end of the line
                .attr("y2", this.parent.__configuration.axis.reverse ? this.core.scale.y.range[this.core.scale.y.range.length - 1] : this.core.scale.y.for(Math.max(...[this.core.scale.y.domain[0], 0])));
        }
        if (core.frame.y == null) {
            core.frame.y = core.frame.plot
                .append("g")
        }
        if (core.frame.x == null) {
            core.frame.x = core.frame.plot.append("g")
        }
        core.frame.y
            .attr('class', 'y axis')
            .attr('stroke-width', 0)
            .attr('transform', "translate(20, 0)")
            .call(core.axes.y)
            .attr('text-anchor', 'start')
            .attr('font-family', this.parent.__configuration.fonts.family + ', Arial, sans-serif')
            .attr('fill-opacity', !this.parent.__configuration.axis.reverse && core.isComparison ? (this.parent.__configuration.comparison.side === 'overlay' ? 0 : 1) : 1)
        core.frame.x.attr('transform', 'translate(' + (this.parent.__configuration.axis.reverse ? 0 : core.scale.x.part / 4) + ', ' + (this.parent.__configuration.height - ((this.parent.__configuration.axis.reverse ? 10 : 30) + (this.parent.__configuration.padding.t + this.parent.__configuration.padding.b))) + ')')
            .attr('class', 'datama-waterfall-x')
            .attr('stroke-width', 0)
            .attr('font-family', this.parent.__configuration.fonts.family + ', Arial, sans-serif')
            .call(core.axes.x)
            .attr('fill-opacity', this.parent.__configuration.axis.reverse && core.isComparison ? (this.parent.__configuration.comparison.side === 'overlay' ? 0 : 1) : 1)
        return this;
    }
    addText(parent, {id, text, x, y, fontSize, maxWidth=50}, update=false) {
        this.__testingElement.innerHTML = text;
        let texts = [];
        let textWidth = this.__testingElement.clientWidth;
        if (textWidth > maxWidth) {
            let divider = parseInt(textWidth / maxWidth);
            if (divider < 2) divider = 2;
            if (text.split(' ').length >= divider && text.split(' ').length < (divider * 2)) {
                // Split each space to new line
                text = text.split(' ')
                divider = text.length;
            } else {
                let i = 0;
                while (textWidth > maxWidth) {
                    this.__testingElement.innerHTML = text.substring(0, text.length - i)
                    textWidth = this.__testingElement.clientWidth;
                    i++;
                }
                text = [text.substring(0, i) + (i > 0 ? '...' : '')]
                divider = 1;
            }
            let i = 0;
            while (i < divider) {
                texts.push({
                    x: x,
                    y: y + (i * (fontSize * 1.5)),
                    text: text[i],
                    fontSize: fontSize,
                    id: id + '-' + i
                })
                i++;
            }
        } else {
            texts.push({
                x: x,
                y: y,
                text: text,
                fontSize: fontSize,
                id: id
            })
        }
        if (update) {
            parent
                .data(texts, r => r.id)
                .enter()
                .attr('class', 'datama-text-' + id)
                .attr('id', r => r.id)
                .attr('x', r => r.x)
                .attr('y', r => r.y)
                .attr('font-size', r => r.fontSize)
                .text(r => r.text)
        } else {
            parent.selectAll('datama-text-' + id)
                .data(texts, r => r.id)
                .enter()
                .append('text')
                .attr('class', 'datama-text-' + id)
                .attr('id', r => r.id)
                .attr('x', r => r.x)
                .attr('y', r => r.y)
                .attr('font-size', r => r.fontSize)
                .text(r => r.text)
        }
    }
    /**
     * Axes part
     */
    /**
     * Return d3 x & y axes
     * @param d3
     * @param scale
     * @param data
     * @param this.parent.__configuration
     */
    getAxes({d3, scale, data}) {
        let axes = {
            x: d3.axisBottom().scale(scale.x.for).tickFormat((d) => {
                if (this.parent.__configuration.axis.reverse) {
                    if (d < 1) {
                        return d + (this.parent.__configuration?.axis?.unit || '')
                    } else if (d >= 1e9 && d < 1e12) {
                        return (d/1e9).toFixed(0) + "B" + (this.parent.__configuration?.axis?.unit || '')
                    }
                    return d3.format(".3s")(d) + (this.parent.__configuration?.axis?.unit || '')
                } else {
                    return this.parent.__configuration.debug ? d : ''
                }
            }),
                y: d3.axisLeft(scale.y.for).tickFormat((d) => {
                if (this.parent.__configuration.axis.reverse) {
                    return this.parent.__configuration.debug ? d : ''
                } else {
                    if (d < 1) {
                        return d + (this.parent.__configuration?.axis?.unit || '')
                    } else if (d >= 1e9 && d < 1e12) {
                        return (d/1e9).toFixed(0) + "B" + (this.parent.__configuration?.axis?.unit || '')
                    }
                    return d3.format(".3s")(d) + (this.parent.__configuration?.axis?.unit || '')
                }
            })
        }
        if (this.parent.__configuration.axis.reverse) {
            axes.x = axes.x.ticks(5)
        } else {
            axes.y = axes.y.ticks(5)
        }
        return axes;
    }

    /**
     * Make Scales
     */
    /**
     * Return computed x & y scales
     * @param core
     * @param this.parent.__configuration
     * @returns {{x: {domain: *}, y: {range: number[]}}}
     */
    getScales(core) {
        return {
            x: this.getScaleX(core),
            y: this.getScaleY(core)
        }
    }

    /**
     * Make X Scale
     */
    /**
     * Return waterfall X scale
     * @param data
     * @param source
     * @param parents
     * @param comparison
     * @param d3
     * @returns {{domain: *}}
     */
    getScaleX({data, parents, source, comparison, d3}) {
        let scale = {};
        if (this.parent.__configuration.axis.reverse) {
            let maxDepth = Math.max(...data.map(r => r.depth));
            let refer = this.parent.__configuration.scale.refer === 'view' ? data : source;
            if (maxDepth === 2) maxDepth--
            let i = 0;
            let left_space = 0;
            scale.spaces = [];
            while (i <= maxDepth) {
                let data_mapped = [...data, ...parents].filter(r => r.depth === i).map(r => r[this.parent.__configuration.explore.levels[i]])
                data_mapped = data_mapped.filter((r, i, s) => r.length === Math.max(...s.map(r => r.length))).map(r => {
                    this.__testingElement.innerHTML = r || '';
                    return document.getElementById('datama-testing-text').clientWidth;
                });
                scale.spaces[i] = Math.max(...data_mapped) / 1.5;
                left_space += Math.max(...data_mapped) / 1.5;
                i++;
            }
            scale.range = [
                left_space + (20 * (maxDepth + 2)),
                (this.parent.__configuration.width - (this.parent.__configuration.padding.l + this.parent.__configuration.padding.r)) - 100
            ]
            let y_max = Math.max(...data.map(e => e.Type === 'net_OoS' || e.Type === 'net' ? parseFloat(e[this.parent.__configuration.value]) : parseFloat(e.Total))),
                y_min = Math.min(...data.map(e => e.Type === 'net_OoS' || e.Type === 'net' ? parseFloat(e[this.parent.__configuration.value]) : parseFloat(e.Total))),
                y_comparison_max,
                y_comparison_min;
            if (y_min > 0) {
                if (this.parent.__configuration.scale.refer === 'view') {
                    y_min = y_min - (y_min * this.parent.__configuration.scale.padding.bottom)
                    y_max = y_max + (y_max * this.parent.__configuration.scale.padding.top)
                } else {
                    y_min = 0
                }
            }
            if (y_max < 0) {
                y_max = 0
            }
            if (comparison) {
                y_comparison_min = Math.min(...comparison.map(e => e.Type === 'net_OoS' || e.Type === 'net' ? parseFloat(e[this.parent.__configuration.value]) : parseFloat(e.Total)))
                y_comparison_max = Math.max(...comparison.map(e => e.Type === 'net_OoS' || e.Type === 'net' ? parseFloat(e[this.parent.__configuration.value]) : parseFloat(e.Total)))
            } else {
                y_comparison_min = y_min
                y_comparison_max = y_max
            }
            scale.domain = [Math.min(...[y_min, y_comparison_min]), Math.max(...[y_max, y_comparison_max])]
            scale.part = Math.max(...refer.map(e => e.Start)) / 10;
            scale.for = d3.scaleLinear().range(scale.range).domain(scale.domain)
        } else {
            scale = {
                domain: data.filter(r => r.Type !== 'net_OoS').map((d, i) => i),
                part: ((this.parent.__configuration.width - (50 + this.parent.__configuration.padding.l + this.parent.__configuration.padding.r)) / data.filter(r => r.Type !== 'net_OoS').length)
            }
            scale.range = data.filter(r => r.Type !== 'net_OoS').map((d, i) => 50 + (i * scale.part));
            scale.for = d3.scaleOrdinal().range(scale.range).domain(scale.domain)
        }
        return scale;
    }

    /**
     * Make Y Scale
     */
    /**
     * Return waterfall Y scale
     * @param data
     * @param source
     * @param comparison
     * @param d3
     * @param this.parent.__configuration
     * @returns {{range: number[]}}
     */
    getScaleY({data, source, comparison, d3}) {
        let refer = this.parent.__configuration.scale.refer ? data : source;
        let scale;
        let lagY = this.parent.__configuration.fonts.size * 1.25 * 1.5;
        if (this.parent.__comparison && this.parent.__configuration.coc && this.parent.__configuration.comparison.side === 'overlay') {
            lagY += (this.parent.__configuration.fonts.size * 1.25) + 5;
        }
        if (this.parent.__configuration.axis.reverse) {
            scale = {
                domain: data.filter(r => r.Type !== 'net_OoS').map((d, i) => i),
                part: (this.parent.__configuration.height - ((this.parent.__configuration.padding.t + this.parent.__configuration.padding.b + (this.parent.__configuration.fonts.size * 5)))) / data.filter(r => r.Type !== 'net_OoS').length
            }
            scale.range = data.filter(r => r.Type !== 'net_OoS').map((d, i) => (i * scale.part) + (lagY * 2));
            scale.for = d3.scaleOrdinal().range(scale.range).domain(scale.domain)
        } else {
            scale = {
                range: [
                    // Bottom part
                    (this.parent.__configuration.height) - ((this.parent.__configuration.padding.t + this.parent.__configuration.padding.b + (this.parent.__configuration.fonts.size * 6))),
                    // Top part
                    ((this.parent.__configuration.fonts.size * 1.75 + lagY) * 1.5) + (this.parent.__configuration.fonts.size * 1.5) + (data.filter(r => r.Type === 'net_OoS').length ? this.parent.__configuration.fonts.size * 2 : 0)//(this.parent.__configuration.fonts.size * 4) + lagY
                ]
            }
            let y_max = Math.max(...data.map(e => e.Type === 'net_OoS' || e.Type === 'net' ? parseFloat(e[this.parent.__configuration.value]) : parseFloat(e.Total))),
                y_min = Math.min(...data.map(e => e.Type === 'net_OoS' || e.Type === 'net' ? parseFloat(e[this.parent.__configuration.value]) : parseFloat(e.Total))),
                y_comparison_max,
                y_comparison_min;
            if (y_min > 0) {
                if (this.parent.__configuration.scale.refer) {
                    y_min = y_min - (y_min * (this.parent.__configuration.scale.padding.bottom))
                    y_max = y_max + (y_max * this.parent.__configuration.scale.padding.top)
                } else {
                    y_min = 0
                }
            }
            if (y_max < 0) {
                y_max = 0
            }
            if (comparison) {
                y_comparison_min = Math.min(...comparison.map(e => e.Type === 'net_OoS' || e.Type === 'net' ? parseFloat(e[this.parent.__configuration.value]) : parseFloat(e.Total)))
                y_comparison_max = Math.max(...comparison.map(e => e.Type === 'net_OoS' || e.Type === 'net' ? parseFloat(e[this.parent.__configuration.value]) : parseFloat(e.Total)))
            } else {
                y_comparison_min = y_min
                y_comparison_max = y_max
            }
            scale.domain = [Math.min(...[y_min, y_comparison_min]), Math.max(...[y_max, y_comparison_max])]
            scale.part = Math.max(...refer.map(e => e.Start)) / 10;
            scale.for = d3.scaleLinear().range(scale.range).domain(scale.domain)
        }
        return scale;
    }
}
/**
 DATAMA SAS

 Copyright (c) [2021-2023] DataMa SAS, All Rights Reserved.

 Notice created by Django <django@datama.fr>
 Contributors : Django <django@datama.fr>, Wazhabits <anatole@datama.fr>
 __________________

 NOTICE:  All information contained herein is, and remains
 the property of DataMa SAS and/or some open source packages used
 if any.  The intellectual and technical concepts contained
 herein are proprietary to DataMa SAS
 and its suppliers and may be covered by French and Foreign Patents,
 patents in process, and are protected by trade secret or copyright law.
 Dissemination of this information or reproduction of this material
 is strictly forbidden unless prior written permission is obtained
 from DataMa SAS.
 __________________
 DataMa Bubbles Layer
 */
class DataMaLayerBubbles extends DataMaLayerGeneric {
    constructor(parent, filter) {
        super(parent, filter);
        this.__contextMenu = {
            elements: [
                {
                    id: 'zoom',
                    icon: ['fas', 'fa-search'],
                    text: (element, parent) => parent.core.bars.get(element.unique).children && parent.core.bars.get(element.unique).children.length ? 'Zoom out' : 'Zoom in',
                    if(element, configuration, parent) {
                        return parent.core.bars.get(element.unique).depth < 2 && element.Type !== 'net' && element.Type !== 'net_OoS'
                    },
                    render(element, configuration, parent) {
                        let node = document.createElement('LI')
                        node.id = this.id;
                        let text = document.createElement('A')
                        text.innerHTML = (this.icon ? parent.__icon(this.icon).outerHTML : '') + this.text(element, parent);
                        node.append(text);
                        node.addEventListener('click', (event) => {
                            event.preventDefault();
                            parent.parent.__layers[parent.parent.__configuration.plot].explore(element, parent.core)
                            parent.hide();
                        })
                        return node;
                    }
                }
            ],
            callbacks: [

            ]
        }
    }

    /**
     * Return bubble Y
     * @param element
     * @param data
     * @param parents
     * @param obj
     * @param tmp
     * @param core
     * @param configuration
     * @param angle
     * @returns {*}
     */
    getY({element, data, obj, tmp, parents}, core, configuration, angle) {
        let y;
        let middle = ((core.scale.y.range[0] - core.scale.y.range[core.scale.y.range.length - 1]) / 2)
        middle += (obj.size / 2)
        if (element.Type === 'net' || element.Type === 'net_OoS') {
            y = middle
        } else {
            if (obj.parent) {
                // distanceRatio = element.weight / (obj.parent.weight - 1);
                middle = tmp[obj.parent.unique].y// + (parent.size / 2)
            }
            let ratio = element.Filter ? configuration.weights[element.Filter] + Math.abs(Math.min(...Object.keys(configuration.weights).map(k => configuration.weights[k]))) : Math.max(...Object.keys(configuration.weights).map(k => configuration.weights[k]));
            if (!configuration.bubbles.higherInterestIsFar) {
                ratio = ratio / Math.max(...Object.keys(configuration.weights).map(k => configuration.weights[k] + Math.abs(Math.min(...Object.keys(configuration.weights).map(k => configuration.weights[k])))))
            } else {
                ratio += 0.5
            }
            y = middle + core.circleXY(obj.size + (core.scale.x.part * ratio), angle).y
        }
        return y
    }

    /**
     * Return bubble x
     * @param element
     * @param data
     * @param obj
     * @param tmp
     * @param core
     * @param configuration
     * @param angle
     * @returns {*}
     */
    getX({element, data, obj, tmp}, core, configuration, angle) {
        let x;
        let middle = (this.parent.__configuration.width - (this.parent.__configuration.padding.l + this.parent.__configuration.padding.r)) / 2
        middle -= (obj.size / 2)
        if (element.Type === 'net' || element.Type === 'net_OoS') {
            x = middle
        } else {
            if (obj.parent) {
                // distanceRatio = element.weight / obj.parent.weight;
                middle = tmp[obj.parent.unique].x// + (parent.size / 2)
            }
            let ratio = element.Filter ? configuration.weights[element.Filter] + Math.abs(Math.min(...Object.keys(configuration.weights).map(k => configuration.weights[k]))) : Math.max(...Object.keys(configuration.weights).map(k => configuration.weights[k]));
            if (!configuration.bubbles.higherInterestIsFar) {
                ratio = ratio / Math.max(...Object.keys(configuration.weights).map(k => configuration.weights[k] + Math.abs(Math.min(...Object.keys(configuration.weights).map(k => configuration.weights[k])))))
            } else {
                ratio += 0.5
            }
            x = middle + core.circleXY(obj.size + (core.scale.x.part * ratio), angle).x
        }
        return x
    }

    /**
     * Return bubble height
     * @param element
     * @param data
     * @param parents
     * @param core
     * @param configuration
     * @param barsData
     * @returns {any}
     */
    getHeight({element, data, parents}, core, configuration, barsData) {
        let height = 50;
        if (configuration.bubbles.scaledSizing) {
            let value;
            if (parents.map(p => p.unique).indexOf(element.unique) !== -1) {
                value = element.Value
                height = core.scale.y.for(value)
            } else {
                if (element.Type === 'net' || element.Type === 'net_OoS') {
                    height = core.scale.y.range[1]
                } else {
                    value = element.Value
                    height = core.scale.y.for(value)
                }
            }
            return height / 2
        }
        let maxDepth = Math.max(...data.map(r => r.depth));
        if (maxDepth === 0) maxDepth += 2;
        return this.parent.__configuration.height / (maxDepth * 3)//configuration.bubbles.size.min;
    }

    // /**
    //  * Return bubble width
    //  * @param element
    //  * @param data
    //  * @param parents
    //  * @param core
    //  * @param configuration
    //  * @param barsData
    //  * @returns {number}
    //  */
    // getWidth({element, data, parents}, core, configuration, barsData) {
    //     let path = core.__makeWaterfallPath(element);
    //     let divider = configuration.bars.links ? 2 : 1.5;
    //     if (parents.map(r => r.unique).indexOf(element.unique) !== -1) {
    //         let childrensInCurrentData = core.__getRowsByPath(path, data).filter(e => e.Type !== 'net')
    //         return (core.scale.x.part * childrensInCurrentData.length) - (core.scale.x.part / 2);
    //     } else {
    //         return (core.scale.x.part / divider)
    //     }
    // }

    /**
     * Return bubble angle from parent
     * @param element
     * @param data
     * @param tmp
     * @param obj
     * @param core
     * @param configuration
     * @returns {*}
     */
    getAngle({element, data, tmp, obj}, core, configuration) {
        if (element.Type === 'net') {
            return configuration.bubbles.__position[configuration.bubbles.startPosition]
        } else {
            let index = data.filter(e => e.Type !== 'net').map(d => d.unique).indexOf(element.unique) + 1;
            let parentAngle = 90;
            let availableRange = configuration.bubbles.firstLevelRepartition;
            let angle;
            if (obj.parent) {
                availableRange = obj.parent.range * 1.4;
                parentAngle = tmp[obj.parent.unique].angle// + (parent.size / 2)
                angle = ((availableRange / data.filter(e => e.Type !== 'net').length) * (index - 1 - ((data.length - 1) / 2)));
                // Rotate by parent angle
                angle += parentAngle;
            } else {
                angle = (availableRange / (data.filter(e => e.Type !== 'net').length) * index) % availableRange;
                // Rotate by given configuration
                angle += configuration.bubbles.__position[configuration.bubbles.startPosition]
            }
            return angle;
        }
    }

    /**
     * Compute bubble data by scope
     * @param data
     * @param parents
     * @param toMap
     * @param core
     * @param configuration
     * @param depth
     * @param result
     * @param parent
     * @returns {*[]}
     */
    makeByLevel({data, parents}, toMap, core, configuration, depth = false, result = [], parent=false) {
        let maxDepth = Math.max(...data.map(row => {
            let path = core.__makeWaterfallPath(row, false)
            return path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
        }))
        if (depth === false) {
            depth = Math.min(...data.map(row => {
                let path = core.__makeWaterfallPath(row, false)
                return path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
            }))
        }
        let depthData = toMap.filter(row => {
            let path = core.__makeWaterfallPath(row, false)
            let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
            return pathDepth === depth;
        })
        let i = 0;
        while (i < depthData.length) {
            let row = depthData[i]
            let obj = {}
            let path = core.__makeWaterfallPath(row)
            if (parent) {
                obj.parent = parent;
                row.range = parent.range * 0.75
            }
            obj.size = this.getHeight({data: depthData, parents: [], tmp: result, obj, element: row}, core, configuration)
            let angle = this.getAngle({data: depthData, parents: [], tmp: result, obj, element: row}, core, configuration);
            obj.x = this.getX({data: depthData, parents: [], tmp: result, obj, element: row}, core, configuration, angle)
            obj.y = this.getY({data: depthData, parents: [], tmp: result, obj, element: row}, core, configuration, angle)
            obj.angle = angle
            obj.properties = row
            result[obj.properties.unique] = obj;
            let childs = core.__getRowsByPath(path, data).filter(c => c.Type !== 'net');
            if (depth < maxDepth && childs.length) {
                result = this.makeByLevel({data, parents}, childs, core, configuration, depth + 1, result, row)
            }
            i++;
        }
        return result;
    }

    __getCorePlotData(core) {
        let barsData = {
            bars: {},
            get(unique) {
                let result = false;
                let element = document.getElementById(unique);
                let uniqueExist = this.uniqueExist(unique);
                let parentExist = this.parentExist(unique);
                if (uniqueExist || parentExist) {
                    result = uniqueExist || parentExist
                    let path = core.__makeWaterfallPath(result.properties)
                    let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 2;
                    if (pathDepth === 0) path = core.__makeWaterfallPath(result.properties, false);
                    result.el = element;
                    result.text = document.getElementById(unique + '-text')
                    result.figure = document.getElementById(unique + '-figure')
                    result.depth = pathDepth
                    if (result.properties.Type !== 'net') {
                        result.children = core.__getRowsByPath(path, core.data).filter(r => r.Type !== 'net' && r.Type !== 'net_OoS' && r.unique !== unique).map(c => this.uniqueExist(c.unique) || this.parentExist(c.unique))
                    }
                    if (pathDepth > 0) {
                        path[pathDepth + 1][Object.keys(path[pathDepth + 1])[0]] = ''
                        path[pathDepth][Object.keys(path[pathDepth])[0]] = ''
                        result.parent = core.__getRowsByPath(path.filter((p, i) => i > 0), [...core.data, ...core.parents]).filter(r => r.Type !== 'net' && r.Type !== 'net_OoS' && r.unique !== unique)[0]
                        result.properties.parent = core.__getRowsByPath(path.filter((p, i) => i > 0), [...core.data, ...core.parents]).filter(r => r.Type !== 'net' && r.Type !== 'net_OoS' && r.unique !== unique)[0]
                    } else if (result.properties.Type !== 'net' && result.properties.Type !== 'net_OoS') {
                        result.properties.parent = core.data.filter(r => r.Type === 'net')[1];
                    }
                }
                return result;
            },
            uniqueExist(unique) {
                return this.bars[unique];
            },
            parentExist(unique) {
                return this.parents[unique]
            }
        };
        let i = 0;
        core.data = core.data.map(row => {
            let path = core.__makeWaterfallPath(row, false)
            let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
            let childs = core.__getRowsByPath(path, core.data).filter(c => c.Type !== 'net').filter(c => {
                let path = core.__makeWaterfallPath(c, false)
                let pathDepthChild = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
                if (this.parent.__configuration.bubbles.weightFromParentOnly) {
                    return pathDepthChild === pathDepth + 1
                } else {
                    return pathDepthChild > pathDepth + 1
                }
            });
            if (row.Type === 'net' || row.Type === 'net_OoS') {
                row.weight = 0
            } else {
                row.weight = childs.length > 0 ? ((childs.length + 1) * this.parent.__configuration.bubbles.scaleOfZoom) : 1
            }
            row.depth = pathDepth;
            return row
        })
        let firstLevel = core.data.filter(row => {
            let path = core.__makeWaterfallPath(row, false)
            let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
            return pathDepth === 0
        })
        let initialAngle = this.parent.__configuration.bubbles.firstLevelRepartition / (firstLevel.filter(e => e.Type !== 'net').map(r => r.weight).reduce((partial_sum, a) => partial_sum + a));
        while (i < core.data.length) {
            let row = core.data[i];
            let path = core.__makeWaterfallPath(row, false)
            let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
            let childs = core.__getRowsByPath(path, core.data).filter(c => c.Type !== 'net');
            childs.sort((a, b) => a.Value - b.Value)
            let obj = {
                properties: row
            }
            if (pathDepth === 0 && ((row.Type !== 'net' || firstLevel.filter(r => r.Type === 'net').map(r => r.unique).indexOf(row.unique) === 1) && row.Type !== 'net_OoS')) {
                obj.size = this.getHeight({data: firstLevel, parents: [], tmp: barsData.bars, obj, element: row}, core, this.parent.__configuration)
                let previous = firstLevel.filter(e => e.Type !== 'net' && e.Type !== 'net_OoS').filter((e, index) => index < firstLevel.filter(e => e.Type !== 'net' && e.Type !== 'net_OoS').map(r => r.unique).indexOf(row.unique));
                let angle;
                let range;
                if (previous.length < 1) {
                    angle = 0;
                    range = initialAngle * row.weight
                } else {
                    angle = (initialAngle * previous.map(r => r.weight).reduce((partial_sum, a) => partial_sum + a))
                    range = initialAngle * row.weight
                }
                if (row.weight > 1) {
                    angle += (initialAngle * ((row.weight - 1) / 2))
                    range = initialAngle * row.weight
                }
                angle += this.parent.__configuration.bubbles.__position[this.parent.__configuration.bubbles.startPosition]
                row.range = range;
                // row.range = range > 120 ? 120 : range
                obj.x = this.getX({data: firstLevel, parents: [], tmp: barsData.bars, obj, element: row}, core, this.parent.__configuration, angle)
                obj.y = this.getY({data: firstLevel, parents: [], tmp: barsData.bars, obj, element: row}, core, this.parent.__configuration, angle)
                obj.angle = angle
                obj.range = range
                obj.properties = row
                obj.weight = 1
                if (obj.properties.Type === 'net') {
                    obj.properties.Row = firstLevel.filter(r => r.Type === 'net')[0].Row
                } else if (obj.properties.Type === 'net_OoS') {
                    obj.properties.Row = firstLevel.filter(r => r.Type === 'net_OoS')[0].Row
                }
                barsData.bars[obj.properties.unique] = obj
                if (row.Type !== 'net' && row.Type !== 'net_OoS') {
                    obj.weight = childs.length + 1
                    if (childs.length) {
                        barsData.bars = this.makeByLevel({data: core.data, parents: core.parents}, childs, core, this.parent.__configuration, 2, barsData.bars, row);
                    }
                }
            }
            i++;
        }
        barsData.parents = []
        core.bars = barsData
        return core
    }

    /**
     * Return full plot data
     * @param core
     * @returns {{get(*): (*|boolean), uniqueExist(*): boolean, parentExist(*): boolean, bars: *, parents: *}|*|boolean}
     */
    getPlotData(core) {
        core = this.__getCorePlotData(core);
        if (this.parent.__comparison && this.parent.__configuration.coc) {
            core.__comparison = this.__getCorePlotData(core.__comparison);
        }
    }

    addLinks(core, transition) {
        return (
            transition ?
                core.frame.links
                    .attr('opacity', d => this.parent.__configuration.debug && core.bars.get(d.unique) && d.Type !== 'net_OoS' ? (core.bars.get(d.unique).parent ? .5 : .25) : 0)
                    .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                    .attr('x1', d =>  {
                        let path = core.__makeWaterfallPath(d, false)
                        let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
                        if (pathDepth === 0) {
                            return (this.parent.__configuration.width - (this.parent.__configuration.padding.l + this.parent.__configuration.padding.r)) / 2
                        }
                        let bar = core.bars.get(d.unique);
                        return core.bars.get(d.unique) && core.bars.get(d.unique).parent ? core.bars.get(core.bars.get(d.unique).parent.unique).x + (core.bars.get(core.bars.get(d.unique).parent.unique).size / 2) : 0;
                    })
                    .attr('x2', d =>  {
                        let path = core.__makeWaterfallPath(d, false)
                        let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
                        if (pathDepth === 0) {
                            return (this.parent.__configuration.width - (this.parent.__configuration.padding.l + this.parent.__configuration.padding.r)) / 2
                        }
                        return core.bars.get(d.unique) && core.bars.get(d.unique).parent ? core.bars.get(core.bars.get(d.unique).parent.unique).x + (core.bars.get(core.bars.get(d.unique).parent.unique).size / 2) : 0;
                    })
                    .attr('y1', d => {
                        let path = core.__makeWaterfallPath(d, false)
                        let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
                        if (pathDepth === 0) {
                            return ((core.scale.y.range[0] - core.scale.y.range[core.scale.y.range.length - 1]) / 2)
                        }
                        return core.bars.get(d.unique) && core.bars.get(d.unique).parent ? core.bars.get(core.bars.get(d.unique).parent.unique).y + (core.bars.get(core.bars.get(d.unique).parent.unique).size / 2) : 0
                    })
                    .attr('y2', d => {
                        let path = core.__makeWaterfallPath(d, false)
                        let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
                        if (pathDepth === 0) {
                            return ((core.scale.y.range[0] - core.scale.y.range[core.scale.y.range.length - 1]) / 2)
                        }
                        return core.bars.get(d.unique) && core.bars.get(d.unique).parent ? core.bars.get(core.bars.get(d.unique).parent.unique).y + (core.bars.get(core.bars.get(d.unique).parent.unique).size / 2) : 0
                    })
                    .attr('stroke', "rgba(0,0,0,0)")
                    .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                : core.frame.links
                    .attr('opacity', d => this.parent.__configuration.debug && core.bars.get(d.unique) && d.Type !== 'net_OoS' ? (core.bars.get(d.unique).parent ? .5 : .25) : 0)
        )
            .attr('x1', d =>  {
                let path = core.__makeWaterfallPath(d, false)
                let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
                if (pathDepth === 0) {
                    return (this.parent.__configuration.width - (this.parent.__configuration.padding.l + this.parent.__configuration.padding.r)) / 2
                }
                return core.bars.get(d.unique) && core.bars.get(d.unique).parent ? core.bars.get(core.bars.get(d.unique).parent.unique).x + (core.bars.get(core.bars.get(d.unique).parent.unique).size / 2) : 0;
            })
            .attr('y1', d => {
                let path = core.__makeWaterfallPath(d, false)
                let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
                if (pathDepth === 0) {
                    return ((core.scale.y.range[0] - core.scale.y.range[core.scale.y.range.length - 1]) / 2) + core.bars.get(d.unique).size
                }
                return core.bars.get(d.unique) && core.bars.get(d.unique).parent ? core.bars.get(core.bars.get(d.unique).parent.unique).y + (core.bars.get(core.bars.get(d.unique).parent.unique).size / 2) : 0
            })
            .attr('x2', d =>  {
                return core.bars.get(d.unique) ? core.bars.get(d.unique).x + (core.bars.get(d.unique).size / 2) : 0
            })
            .attr('y2', d => core.bars.get(d.unique) ? core.bars.get(d.unique).y + (core.bars.get(d.unique).size / 2) : 0)
            .attr('fill', 'black')
            .attr('stroke', d => {
                if (this.parent.__configuration.debug && this.parent.__configuration.bars.links && d.Type !== 'net') {
                    return "rgba(0,0,0,0.25)"
                }
                return "rgba(0,0,0,0)"
            })
            .attr('transform', d => {
                if (core.bars.uniqueExist(d.unique)) {
                    return 'translate(0, 0)';
                }
                return 'translate(0, -10)'
            })
        return false;
    }

    addBubbles(core, transition) {
        return (transition ?
                core.frame.bar
                    .attr('opacity', d => core.bars.get(d.unique) && (!core.isComparison || this.parent.__configuration.comparison.side !== 'overlay') ? (core.bars.get(d.unique).parent ? .5 : .25) : 0)
                    .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                    .attr('x', d => {
                        if (core.bars.get(d.unique) && core.bars.get(d.unique).parent) {
                            return core.bars.get(core.bars.get(d.unique).parent.unique).x
                        } else if (core.bars.get(d.unique)) {
                            return core.bars.get(d.unique).x
                        }
                        return 0
                    })
                    .attr('y', d => {
                        if (core.bars.get(d.unique) && core.bars.get(d.unique).parent) {
                            return core.bars.get(core.bars.get(d.unique).parent.unique).y
                        } else if (core.bars.get(d.unique)) {
                            return core.bars.get(d.unique).y
                        }
                        return 0
                    })
                    .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                : core.frame.bar
        ).attr('class', d => 'datama-waterfall-bar ' + (core.data.map(r => r.unique).indexOf(d.unique) !== -1 ? '' : 'no-click'))
            .attr('data-type', d => d.Type)
            .attr('id', d => d.unique)
            .attr('x', d => core.bars.get(d.unique) ? core.bars.get(d.unique).x : 0)
            .attr('y', d => core.bars.get(d.unique) ? core.bars.get(d.unique).y : 0)
            .attr('width', d => core.bars.get(d.unique) ? core.bars.get(d.unique).size : 0)
            .attr('height', d => core.bars.get(d.unique) ? core.bars.get(d.unique).size : 0)
            .attr('fill', d => d.Type === 'net' || d.Type === 'net_Oos' ? 'darkblue' : (d.Value > 0 ? 'green' : (d.Value === 0 ? 'black' : 'red')))
            .attr('fill-opacity', .5)
            .attr('opacity', d => core.bars.get(d.unique) && (!core.isComparison || this.parent.__configuration.comparison.side !== 'overlay') ? (core.bars.get(d.unique).parent ? .5 : .25) : 0)
            .attr('transform', d => {
                if (core.bars.get(d.unique)) {
                    return 'translate(0, 0)';
                }
                return 'translate(0, -10)'
            })
            .attr("ry", (d) => {
                let bar = core.bars.get(d.unique);
                return bar ? bar.size : 0;
            })
            .attr('stroke', d => d.Type === 'net' || d.Type === 'net_Oos' ? 'darkblue' : (d.Value > 0 ? 'green' : (d.Value === 0 ? 'black' : 'red')))
            .attr('stroke-width', 1)
    }

    addTexts(core, transition) {
        return (
            transition ?
                core.frame.texts
                    .attr('opacity', d =>  core.bars.get(d.unique) &&  core.bars.get(d.unique).parent == null ? 1 : 0)
                    .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                    .attr('x', d => core.bars.get(d.unique) ? core.bars.get(d.unique).x + (core.bars.get(d.unique).size / 2) : 0)
                    .attr('y', d => core.bars.get(d.unique) ? (core.bars.get(d.unique).y + (core.bars.get(d.unique).size / 2) + (this.parent.__configuration.fonts.size / 2) + d.y_lag) : 0)
                    .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                : core.frame.texts
                    .attr('x', d => core.bars.get(d.unique) ? core.bars.get(d.unique).x + (core.bars.get(d.unique).size / 2) : 0)
                    .attr('y', d => core.bars.get(d.unique) ? (core.bars.get(d.unique).y + (core.bars.get(d.unique).size / 2) + (this.parent.__configuration.fonts.size / 2) + d.y_lag) : 0)
        )
            .attr('font-size', this.parent.__configuration.fonts.size)
            .attr('font-family', this.parent.__configuration.fonts.family + ', Arial, sans-serif')
            .attr('text-anchor', 'middle')
            .attr('opacity', d => core.bars.get(d.unique) && (!core.isComparison || this.parent.__configuration.comparison.side !== 'overlay') ? 1 : 0)
            .attr('alignment-baseline', 'middle')
            .attr('fill', 'black')
            .text(d => core.bars.get(d.unique) ? d.text : '')
            .attr('transform', d => {
                if (core.bars.uniqueExist(d.unique)) {
                    return 'translate(0, 0)';
                }
                return 'translate(0, -10)'
            })
    }

    /**
     * Add bubbles attributes :
     * - position (x / y)
     * - size (width / height)
     * - class
     * - color
     * - opacity
     * - transformation
     * Can apply with transition
     * @param core
     * @param transition
     * @returns {*}
     */
    addPosition(core, transition = false) {
        this.addBubbles(core, transition)
        // this.addLinks(core, transition)
        this.addTexts(core, transition)
        this.addChevronPosition(core, core.frame, transition)
        if (this.parent.__comparison && this.parent.__configuration.coc) {
            this.addBubbles(core.__comparison, transition);
            // this.addLinks(core.__comparison, transition);
            this.addTexts(core.__comparison, transition);
            this.addChevronPosition(core.__comparison, core.frame.comparison, transition)
        }
        this.parent.mounted = true;
    }

    unmount() {
        this.core = super.unmount()
        if (this.core.frame.linksChevronLeft) {
            this.core.frame.linksChevronLeft.attr('opacity', 0).remove().exit()
            delete this.core.frame.linksChevronLeft
        }
        if (this.core.frame.linksChevronRight) {
            this.core.frame.linksChevronRight.attr('opacity', 0).remove().exit()
            delete this.core.frame.linksChevronRight
        }
        if (this.core.__comparison) {
            if (this.core.frame.comparison.linksChevronLeft) {
                this.core.frame.comparison.linksChevronLeft.attr('opacity', 0).remove().exit()
                delete this.core.frame.comparison.linksChevronLeft
            }
            if (this.core.frame.comparison.linksChevronRight) {
                this.core.frame.comparison.linksChevronRight.attr('opacity', 0).remove().exit()
                delete this.core.frame.comparison.linksChevronRight
            }
        }
        return this.core
    }

    /**
     * Make Scales
     */
    /**
     * Return computed x & y scales
     * @param core
     * @param this.parent.__configuration
     * @returns {{x: {domain: *}, y: {range: number[]}}}
     */
    getScales(core) {
        return {
            x: this.getScaleX(core),
            y: this.getScaleY(core)
        }
    }

    /**
     * Make Y Scale
     */
    /**
     * Return waterfall Y scale
     * @param data
     * @param source
     * @param comparison
     * @param d3
     * @param this.parent.__configuration
     * @returns {{range: number[]}}
     */
    getScaleY({data, source, d3}) {
        let plotRange = [
            this.parent.__configuration.bubbles.size.min,
            this.parent.__configuration.bubbles.size.max
        ];
        let scale = {
            range: [
                this.parent.__configuration.height - ((60 + this.parent.__configuration.padding.t + this.parent.__configuration.padding.b + (((this.parent.__configuration.fonts.size * 1.75) + (this.parent.__configuration.fonts.size * 1.25)) * 1.5))),
                60
            ]
        }
        scale.domain = [Math.min(...data.filter(r => r.Type !== 'net').map(r => r.Value)), Math.max(...data.filter(r => r.Type !== 'net').map(r => r.Value))]
        scale.part = Math.abs(scale.domain[0]) / 10;
        scale.for = d3.scaleLinear().range(plotRange).domain(scale.domain)
        return scale;
    }

    /**
     * Make X Scale
     */
    /**
     * Return waterfall X scale
     * @param data
     * @param d3
     * @returns {{domain: *}}
     */
    getScaleX({data, d3}) {
        let scale = {};
        scale.domain = [
            Math.min(...[0, ...Object.keys(this.parent.__configuration.weights).map(k => this.parent.__configuration.weights[k])]),
            Math.max(...[0, ...Object.keys(this.parent.__configuration.weights).map(k => this.parent.__configuration.weights[k])])
        ]
        scale.range = [
            0,
            this.parent.__configuration.bubbles.size.min
        ]
        scale.for = d3.scaleLinear().range(scale.range).domain(scale.domain)
        let maxDepth = Math.max(...data.map(r => r.depth));
        if (maxDepth === 0) maxDepth += 1;
        scale.part = this.parent.__configuration.height / (Math.max(...Object.keys(this.parent.__configuration.weights).map(k => this.parent.__configuration.weights[k] + Math.abs(Math.min(...Object.keys(this.parent.__configuration.weights).map(k => this.parent.__configuration.weights[k]))))) * maxDepth * 2.5)
        return scale;
    }
    /**
     * Add to plot svg waterfall overlay :
     * - Axis lines
     * - Ticks
     */
    addOverlay(core) {
        if (core.frame.x_line == null) {
            core.frame.x_line = core.frame.plot.append("line")
                // attach a line
                .style("stroke", "rgba(0,0,0,0,0)")  // colour the line
                .attr("x1", core.scale.x.range[0])     // x position of the first end of the line
                .attr("y1", core.scale.y.range[0] - 2)      // y position of the first end of the line
                .attr("x2", core.scale.x.range[core.scale.x.range.length - 1] + (core.scale.x.part / 2))     // x position of the second end of the line
                .attr("y2", core.scale.y.range[0] - 2);
        } else {
            core.frame.x_line.style("stroke", "rgba(0,0,0,0)")  // colour the line
                .attr("x1", core.scale.x.range[0])     // x position of the first end of the line
                .attr("y1", core.scale.y.range[0] - 2)      // y position of the first end of the line
                .attr("x2", core.scale.x.range[core.scale.x.range.length - 1] + (core.scale.x.part / 2))     // x position of the second end of the line
                .attr("y2", core.scale.y.range[0] - 2);
        }
        if (core.frame.y == null) {
            core.frame.y = core.frame.plot
                .append("g")
        }
        if (core.frame.x == null) {
            core.frame.x = core.frame.plot.append("g")
        }
        // core.frame.y
        //     .attr('class', 'y axis')
        //     .attr('stroke-width', 1)
        //     .attr('transform', "translate(" + this.parent.__configuration.padding.l + ",0)")
        //     .call(core.axes.y)
        // core.frame.x
        //     .attr('transform', 'translate(' + core.scale.x.part / 4 + ', ' + (this.parent.__configuration.height - (30 + (this.parent.__configuration.padding.t + this.parent.__configuration.padding.b + (((this.parent.__configuration.fonts.size * 1.75) + (this.parent.__configuration.fonts.size * 1.25)) * 1.5)))) + ')')
        //     .attr('class', 'datama-waterfall-x')
        //     .attr('stroke-width', 1)
        //     .attr('opacity', 1)
        //     .attr('font-family', this.parent.__configuration.fonts.tick.family)
        //     .call(core.axes.x)
        return core
    }
    /**
     * Axes part
     */
    /**
     * Return d3 x & y axes
     * @param d3
     * @param scale
     * @param data
     * @param this.parent.__configuration
     */
    getAxes({d3, scale, data}) {
        return {
            x: d3.axisBottom().scale(scale.x.for),//.tickFormat((i) =>  this.parent.__configuration.weights[Object.keys(this.parent.__configuration.weights)[i]]),
            y: d3.axisLeft(scale.y.for).tickFormat(d => {
                if (d < 1) {
                    return d
                }
                return d3.format(".2s")(d)
            }).ticks(5)
        }
    }

    /**
     * Listen zoom on plot
     * @private
     */
    loadFilters(filters, defaultFilter) {
        this.filters = filters
            .filter(path => path.filter(p => p[Object.keys(p)[0]] !== false).length - 2 === 0)
            .map(path => path.filter(p => this.parent.__configuration.explore.levels.indexOf(Object.keys(p)[0]) !== -1))
    }

    /**
     * Fetch data from filters
     * @param source
     * @returns {{data: *, parents: *[]}}
     */
    filteredRows(source) {
        let i = 0;
        let tempData = source.filter(r => {
            let path = this.core.__makeWaterfallPath(r, false);
            let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
            return pathDepth === 0
        })
        if (this.filters.length) {
            while (i < this.filters.length) {
                let path = this.filters[i]
                let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
                let childs = this.core.__getRowsByPath(path, source).filter(r => r.Type !== 'net').filter(r => {
                    let path = this.core.__makeWaterfallPath(r, false);
                    let depth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
                    return depth === pathDepth + 2
                });
                // Order by higher variation
                childs.sort((a, b) => Math.abs(b.Value) - Math.abs(a.Value))
                tempData.push(...childs.filter((c, i) => i < this.parent.__configuration.bubbles.numberOfChildToFetch))
                i++;
            }
        }
        tempData = tempData.filter((e, i, s) => s.map(sp => sp.unique).indexOf(e.unique) === i)
        tempData.sort((a, b) => {
            let pathA = this.core.__makeWaterfallPath(a, false)
            let pathDepthA = pathA.filter(p => p[Object.keys(p)[0]] !== false).length;
            let pathB = this.core.__makeWaterfallPath(b, false)
            let pathDepthB = pathB.filter(p => p[Object.keys(p)[0]] !== false).length;
            return pathDepthA - pathDepthB;
        })
        let parents = []
        let data = tempData
        return {parents, data}
    }

    /**
     * Exploration behavior
     * @param element
     * @param core
     * @returns {*|{filter, circleXY(*, *): {x, y}, __isRowMatchPath(*, *): (boolean), __getRowDepthFromPath(*, *): number, __makeWaterfallPath(*, boolean=): *[], __getRowsByPath(*, null=): *}}
     */
    explore(element, core) {
        if (element.Type !== 'net') {
            /**
             * Make path of selected element
             * @type {[]}
             */
            let path = core.__makeWaterfallPath(element, false);
            let childs = core.__getRowsByPath(path, core.source).filter(r => r.Type !== 'net' && r.unique !== element.unique);
            if (this.filters.map(f => JSON.stringify(f)).indexOf(JSON.stringify(path)) === -1) {
                if (childs.length) {
                    this.filters.push(path);
                } else {
                    let parentPathIndex = -1;
                    let parent = core.bars.get(element.unique).parent
                    while (parentPathIndex === -1) {
                        let parentPath  = core.__makeWaterfallPath(parent, false)
                        parentPathIndex = this.filters.map(f => JSON.stringify(f)).indexOf(JSON.stringify(parentPath))
                        if (parent.parent == null) {
                            parentPathIndex = false
                        } else {
                            parent = parent.parent;
                        }
                    }
                    if (parentPathIndex !== false) {
                        this.filters.splice(parentPathIndex, 1)
                    }
                }
            } else {
                // Here i need to add the fact child filters will be closed too
                this.filters.splice(this.filters.map(f => JSON.stringify(f)).indexOf(JSON.stringify(path)), 1)
            }
        } else {
            this.filters = []
        }
        core = this.getCore(
            {
                source: this.core.source,
                comparison: this.core.__comparison ? this.core.__comparison.source : false,
                current: this.core.data,
                parents: this.core.parents
            },
            this.core.frame,
            this.core.frame.comparison
        )
        this.addOverlay(core)
        this.addTraces(true);
        return core;
    }

    /**
     * Zoom behavior
     * @param event
     */
    zoom(event) {
        this.core.frame.plot.attr('transform', event.transform);
        if (this.core.__comparison) {
            this.core.frame.comparison.plot.attr('transform', event.transform);
        }
    }

    __addChevronPosition(core, frame, state, transition) {
        (transition ? frame.transition().duration(this.parent.__configuration.bars.transition).ease(core.d3.easeExp) : frame)
            .attr('x1', d =>  {
                let bar = core.bars.get(d.unique);
                if (bar && bar.properties.parent) {
                    let parent = core.bars.get(bar.properties.parent.unique);
                    if (this.parent.__configuration.axis.reverse) {
                        return  bar.x + (bar.width / 2)
                    } else {
                        let x1 = bar.x
                        let x2 = parent.x + parent.size
                        return (x1 + x2) / 2
                    }
                }
                return 0;
            })
            .attr('y1', d =>  {
                let bar = core.bars.get(d.unique);
                if (bar && bar.properties.parent) {
                    let parent = core.bars.get(bar.properties.parent.unique);
                    if (this.parent.__configuration.axis.reverse) {
                        return bar.y
                    } else {
                        let y1 = bar.y + (bar.size / 2) //+ (bar.height / 2)
                        let y2 = parent.y + (bar.size / 2) //+ (parent.height / 2)
                        return ((y1 + y2) / 2) + (state ? 2 : -2)
                    }
                }
                return 0;
            })
            .attr('x2', d =>  {
                let bar = core.bars.get(d.unique);
                if (bar && bar.properties.parent) {
                    let parent = core.bars.get(bar.properties.parent.unique);
                    if (this.parent.__configuration.axis.reverse) {
                        return  bar.x + (bar.width / 2)
                    } else {
                        let x1 = bar.x
                        let x2 = parent.x + parent.size
                        return ((x1 + x2) / 2) - 10
                    }
                }
                return 0;
            })
            .attr('y2', d =>  {
                let bar = core.bars.get(d.unique);
                if (bar && bar.properties.parent) {
                    let parent = core.bars.get(bar.properties.parent.unique);
                    if (this.parent.__configuration.axis.reverse) {
                        return bar.y
                    } else {
                        let y1 = bar.y + (bar.size / 2)
                        let y2 = parent.y + (bar.size / 2)
                        return ((y1 + y2) / 2) + (!state ? 10 : -10)
                    }
                }
                return 0;
            })
            .attr('stroke', core.isComparison && this.parent.__configuration.comparison.side === 'overlay' ? 'transparent' : 'black')
            .attr('stroke-width', 5)
            .attr('transform', d => {
                let bar = core.bars.get(d.unique);
                if (bar && bar.properties.parent) {
                    let parent = core.bars.get(bar.properties.parent.unique);
                    let x1 = bar.x
                    let x2 = parent.x + parent.size
                    let y1 = bar.y + (bar.size / 2)
                    let y2 = parent.y + (bar.size / 2)
                    let a = (Math.max(...[x1, x2]) - Math.min(...[x1, x2]))
                    let b = (Math.max(...[y1, y2]) - Math.min(...[y1, y2]))
                    let angle = Math.atan2(a, b) * 180 / Math.PI
                    if (y1 > y2) {
                        angle *= -1
                    }
                    let lag = 0
                    if (angle !== 90) {
                        lag = y1 > y2 ? -80 : 80
                    } else {
                        lag = 90
                    }
                    return 'rotate(' + (-bar.angle + 90) + ', ' + ((x1 + x2) / 2) + ', ' + ((y1 + y2) / 2) + ')'
                }
                return null
            })
            .style('stroke-opacity', () => {
                if (core.isComparison && this.parent.__configuration.comparison.side === 'overlay') {
                    return 0;
                }
                return 1;
            })
    }

    addChevronPosition(core, frame, transition) {
        this.__addChevronPosition(core, frame.linksChevronLeft, false, transition)
        this.__addChevronPosition(core, frame.linksChevronRight, true, transition)
    }

    __addChevronsTraces(update, core, frame) {
        frame.__linksChevronLeft = frame.bars
            .selectAll('line.datama-waterfall-bar-links-chevron-left')
            .data([...core.data, ...core.parents], d => d.unique + '-left')
        frame.__linksChevronRight = frame.bars
            .selectAll('line.datama-waterfall-bar-links-chevron-right')
            .data([...core.data, ...core.parents], d => d.unique + '-right')
        if (update) {
            frame.linksChevronLeft = frame.__linksChevronLeft
                .enter()
                .append('line')
                .attr('class', 'datama-waterfall-bar-links-chevron-left')
                .merge(frame.__linksChevronLeft)
            frame.linksChevronRight = frame.__linksChevronRight
                .enter()
                .append('line')
                .attr('class', 'datama-waterfall-bar-links-chevron-right')
                .merge(frame.__linksChevronRight)
            frame.__linksChevronLeft.exit().remove()
            frame.__linksChevronRight.exit().remove()
        } else {
            frame.linksChevronLeft = frame.__linksChevronLeft
                .enter()
                .append('line')
                .attr('class', 'datama-waterfall-bar-links-chevron-left')
            frame.linksChevronRight = frame.__linksChevronRight
                .enter()
                .append('line')
                .attr('class', 'datama-waterfall-bar-links-chevron-right')
        }
    }

    addTraces(update=false) {
        this.getPlotData(this.core)
        this.__addBarsTraces(update, this.core, this.core.frame)
        this.__addChevronsTraces(update, this.core, this.core.frame)
        this.__addLinksTraces(update, this.core, this.core.frame)
        this.__addAnnotationsTraces(update, this.core, this.core.frame)
        this.__addTextsTraces(update, this.core, this.core.frame)
        if (this.parent.__comparison && this.parent.__configuration.coc) {
            this.__addBarsTraces(update, this.core.__comparison, this.core.frame.comparison)
            this.__addChevronsTraces(update, this.core.__comparison, this.core.frame.comparison)
            this.__addLinksTraces(update, this.core.__comparison, this.core.frame.comparison)
            this.__addAnnotationsTraces(update, this.core.__comparison, this.core.frame.comparison)
            this.__addTextsTraces(update, this.core.__comparison, this.core.frame.comparison)
        }
        this.__listenZoom()
        this.addPosition(this.core, update)
    }
}
/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaLayerWaterfall.js project project-deep-sky
 */
class DataMaLayerWaterfall extends DataMaLayerGeneric {
    constructor(parent, filter) {
        super(parent, filter);
        this.__contextMenu = {
            elements: [
            ],
            callbacks: [

            ]
        }
    }

    setContextMenu(configuration) {
        this.__contextMenu = configuration
    }
    /**
     * Return waterfall bar Height
     * @param element
     * @param data
     * @param parents
     * @param core
     * @param configuration
     * @param barsData
     * @returns {any}
     */
    getHeight({element, data, parents}, core, configuration, barsData) {
        let height;
        if (this.parent.__configuration.axis.reverse) {
            let path = core.__makeWaterfallPath(element);
            let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 2;
            if (pathDepth === 0) path = this.core.__makeWaterfallPath(element, false);
            let divider = 1.5;
            if (parents.map(r => r.unique).indexOf(element.unique) !== -1) {
                let childrensInCurrentData = core.__getRowsByPath(path, data).filter(r => r.Type !== 'net' && r.Type !== 'net_OoS' && r.unique.indexOf(element.unique.indexOf('-coc') !== -1 ? '-coc' : '-default') !== -1)
                height = (core.scale.y.part * childrensInCurrentData.length) - (core.scale.y.part / divider / 2)
            } else {
                height = (core.scale.y.part / divider)
            }
        } else {
            let value;
            if (parents.map(p => p.unique).indexOf(element.unique) !== -1) {
                let childrens = [
                    element,
                    ...core.__getRowsByPath(core.__makeWaterfallPath(element), data).filter(c => c.Type !== 'net' && c.Type !== 'net_Oos')
                ].filter(r => r.Type !== 'net' && r.Type !== 'net_OoS' && r.unique.indexOf(element.unique.indexOf('-coc') !== -1 ? '-coc' : '-default') !== -1);
                let minimalTotalOfChildrens = Math.min(...[...childrens.map(c => c.Total), ...childrens.map(c => c.Start)])
                let maximalTotalOfChildrens = Math.max(...[...childrens.map(c => c.Total), ...childrens.map(c => c.Start)])
                value = core.scale.y.for(minimalTotalOfChildrens) - core.scale.y.for(maximalTotalOfChildrens)
                height = value
            } else {
                if (element.Type === 'net' || element.Type === 'net_OoS') {
                    value = element.Total
                    let base = core.scale.y.domain[0];
                    if (base < 0) base = 0
                    height = core.scale.y.for(base) - core.scale.y.for(Math.abs(value))
                } else {
                    if (element.Total < element.Start) {
                        height = core.scale.y.for(element.Total) - core.scale.y.for(element.Start)
                    } else {
                        height = core.scale.y.for(element.Start) - core.scale.y.for(element.Total)
                    }
                }
                // If with new scale a bar will detach from axis
                if (height + core.scale.y.for(element[this.parent.__configuration.value] < 0 ? element.Total - element[this.parent.__configuration.value] : element.Total) > core.scale.y.range[0]) {
                    height =  core.scale.y.range[0] - core.scale.y.for(element[this.parent.__configuration.value] < 0 ? element.Total - element[this.parent.__configuration.value] : element.Total)
                }
            }
            if (height < configuration.bars.minHeight) {
                height = configuration.bars.minHeight
            }
        }
        return height
    }

    /**
     * Return waterfall bar Width
     * @param element
     * @param data
     * @param parents
     * @param core
     * @param configuration
     * @param barsData
     * @returns {number}
     */
    getWidth({element, data, parents}, core, configuration, barsData) {
        let width;
        if (this.parent.__configuration.axis.reverse) {
            let value;
            if (parents.map(p => p.unique).indexOf(element.unique) !== -1) {
                let childrens = [
                    element,
                    ...core.__getRowsByPath(core.__makeWaterfallPath(element), data).filter(c => c.Type !== 'net' && c.Type !== 'net_Oos')
                ].filter(r => r.Type !== 'net' && r.Type !== 'net_OoS' && r.unique.indexOf(element.unique.indexOf('-coc') !== -1 ? '-coc' : '-default') !== -1);
                let minimalTotalOfChildrens = Math.min(...[...childrens.map(c => c.Total), ...childrens.map(c => c.Start)])
                let maximalTotalOfChildrens = Math.max(...[...childrens.map(c => c.Total), ...childrens.map(c => c.Start)])
                value = core.scale.x.for(maximalTotalOfChildrens) - core.scale.x.for(minimalTotalOfChildrens)
                width = value
            } else {
                if (element.Type === 'net' || element.Type === 'net_OoS') {
                    value = element.Total
                    let base = core.scale.x.domain[0];
                    if (base < 0) base = 0
                    width = core.scale.x.for(Math.abs(value)) - core.scale.x.for(base)
                } else {
                    if (element.Total > element.Start) {
                        width = core.scale.x.for(element.Total) - core.scale.x.for(element.Start)
                    } else {
                        width = core.scale.x.for(element.Start) - core.scale.x.for(element.Total)
                    }
                }
            }
            if (width < configuration.bars.minHeight) {
                width = configuration.bars.minHeight
            }
        } else {
            let path = core.__makeWaterfallPath(element);
            let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 2;
            if (pathDepth === 0) path = core.__makeWaterfallPath(element, false);
            let divider = 1.5;
            if (parents.map(r => r.unique).indexOf(element.unique) !== -1) {
                let childrensInCurrentData = core.__getRowsByPath(path, data).filter(r => r.Type !== 'net' && r.Type !== 'net_OoS' && r.unique.indexOf(element.unique.indexOf('-coc') !== -1 ? '-coc' : '-default') !== -1)
                width = (core.scale.x.part * (childrensInCurrentData.length)) - ((core.scale.x.part * (1/3)));
            } else {
                width = (core.scale.x.part / divider)
            }
        }
        return width
    }

    /**
     * Return waterfall bar Y
     * @param element
     * @param data
     * @param parents
     * @param core
     * @param configuration
     * @returns {*}
     */
    getY({element, data, parents}, core, configuration) {
        let y;
        if (this.parent.__configuration.axis.reverse) {
            y = core.scale.y.for(element[configuration.explore.levels[0]])
            if (data.map(d => d.unique).indexOf(element.unique) !== -1) {
                if (element.Type === 'net_OoS') {
                    // Out of scope positioning
                    let oos_position = data.filter(r => r.Type === 'net_OoS').map(d => d.unique).indexOf(element.unique)
                    let refer_position = data.map(d => d.unique).indexOf(element.unique) - oos_position;
                    if (refer_position < 0) refer_position = 0
                    y = core.scale.y.range[refer_position]
                } else {
                    y = core.scale.y.range[data.filter(r => r.Type !== 'net_OoS').map(d => d.unique).indexOf(element.unique)]
                }
            } else {
                if (parents.map(d => d.unique).indexOf(element.unique) !== -1) {
                    // Here we want to make the path to select neighbors
                    // Path of element
                    let path = core.__makeWaterfallPath(element);
                    let depth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 2
                    if (depth === 0) path = core.__makeWaterfallPath(element, false);
                    let childs = core.__getRowsByPath(path, data).filter(r => r.Type !== 'net' && r.Type !== 'net_OoS' && r.unique.indexOf(element.unique.indexOf('-coc') !== -1 ? '-coc' : '-default') !== -1)
                    let firstChild = childs[0]
                    if (depth > 0) {
                        path[depth + 1][Object.keys(path[depth + 1])] = false;
                    }
                    let pathData = core.__getRowsByPath(path, data).filter(r => r.Type !== 'net' && r.Type !== 'net_OoS' && r.unique.indexOf(element.unique.indexOf('-coc') !== -1 ? '-coc' : '-default') !== -1)
                    let contextPosition = pathData.map(r => r.unique).indexOf(firstChild.unique)
                    if (contextPosition === -1) contextPosition = 0
                    y = core.scale.y.range[data.filter(r =>  r.Type !== 'net_OoS').map(d => d[configuration.explore.levels[0]] + (d.unique.indexOf('-coc') !== -1 ? '-coc' : '-default')).indexOf(element[configuration.explore.levels[0]] + (element.unique.indexOf('-coc') !== -1 ? '-coc' : '-default')) + contextPosition]
                }
            }
        } else {
            let value = element[this.parent.__configuration.value] < 0 ? element.Total - element[this.parent.__configuration.value] : element.Total;
            if (parents.map(p => p.unique).indexOf(element.unique) !== -1) {
                let childrens = [element, ...core.__getRowsByPath(core.__makeWaterfallPath(element), data).filter(r => r.Type !== 'net' && r.Type !== 'net_OoS' && r.unique.indexOf(element.unique.indexOf('-coc') !== -1 ? '-coc' : '-default') !== -1)];
                value = Math.max(...[...childrens.map(c => c.Start), ...childrens.map(c => c.Total)])
            }
            y = core.scale.y.for(value)
        }
        return y
    }

    /**
     * Return waterfall bar X
     * @param element
     * @param data
     * @param parents
     * @param core
     * @param configuration
     * @returns {*}
     */
    getX({element, data, parents}, core, configuration) {
        let x;
        if (this.parent.__configuration.axis.reverse) {
            let value;
            if (element.Type === 'net' || element.Type === 'net_OoS') {
                value = element[this.parent.__configuration.value] < 0 ? element.Total : Math.max(...[core.scale.x.domain[0], 0]);
            } else {
                value = element[this.parent.__configuration.value] > 0 ? element.Total - element[this.parent.__configuration.value] : element.Total;
                if (parents.map(p => p.unique).indexOf(element.unique) !== -1) {
                    let childrens = [element, ...core.__getRowsByPath(core.__makeWaterfallPath(element), data).filter(r => r.Type !== 'net' && r.Type !== 'net_OoS' && r.unique.indexOf(element.unique.indexOf('-coc') !== -1 ? '-coc' : '-default') !== -1)];
                    value = Math.min(...[...childrens.map(c => c.Start), ...childrens.map(c => c.Total)])
                }
            }
            x = core.scale.x.for(value)
        } else {
            x = core.scale.x.for(element[configuration.explore.levels[0]])
            if (data.map(d => d.unique).indexOf(element.unique) !== -1) {
                if (element.Type === 'net_OoS') {
                    // Out of scope positioning
                    let oos_position = data.filter(r => r.Type === 'net_OoS').map(d => d.unique).indexOf(element.unique)
                    let refer_position = data.map(d => d.unique).indexOf(element.unique) - oos_position;
                    x = core.scale.x.range[refer_position]
                } else {
                    x = core.scale.x.range[data.filter(r => r.Type !== 'net_OoS').map(d => d.unique).indexOf(element.unique)]
                }
            } else {
                if (parents.map(d => d.unique).indexOf(element.unique) !== -1) {
                    // Here we want to make the path to select neighbors
                    // Path of element
                    let path = core.__makeWaterfallPath(element);
                    let depth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 2
                    if (depth === 0) path = core.__makeWaterfallPath(element, false);
                    let childs = core.__getRowsByPath(path, data).filter(r => r.Type !== 'net' && r.Type !== 'net_OoS' && r.unique.indexOf(element.unique.indexOf('-coc') !== -1 ? '-coc' : '-default') !== -1)
                    let firstChild = childs[0]
                    if (depth > 0) {
                        path[depth + 1][Object.keys(path[depth + 1])] = false;
                    }
                    let pathData = core.__getRowsByPath(path, data).filter(r => r.Type !== 'net' && r.Type !== 'net_OoS' && r.unique.indexOf(element.unique.indexOf('-coc') !== -1 ? '-coc' : '-default') !== -1)
                    let contextPosition = pathData.map(r => r.unique).indexOf(firstChild.unique)
                    if (contextPosition === -1) contextPosition = 0
                    x = core.scale.x.range[data.filter(r =>  r.Type !== 'net_OoS').map(d => d[configuration.explore.levels[0]] + (d.unique.indexOf('-coc') !== -1 ? '-coc' : '-default')).indexOf(element[configuration.explore.levels[0]] + (element.unique.indexOf('-coc') !== -1 ? '-coc' : '-default')) + contextPosition]
                }
            }
        }
        return x
    }
    addBars(core, transition) {
        core.frame.bar
            .attr('class', d => {
                let bar = core.bars.get(d.unique);
                if (this.parent.__configuration.comparison.side === 'overlay' && core.isComparison) {
                    if (Math.max(...[...core.data, ...core.parents].map(r => core.bars.get(r.unique).depth)) > 0) {
                        bar = false;
                    }
                }
                return 'datama-waterfall-bar ' + (core.isComparison ? 'datama-waterfall-bar-coc' : '') + ' ' + (bar ? '' : 'no-click') + ' ' + (bar.children && bar.children.length ? 'has-children' : '') + ' ' + (d.disabled ? 'no-data' : '')
            })
            .attr('data-expanded', d => {
                let bar = core.bars.get(d.unique);
                if (bar && bar.children && bar.children.length) {
                    return true;
                }
                return false
            })
            .attr('fill-opacity', d => {
                let bar = core.bars.get(d.unique);
                if (bar.properties.disabled || bar.properties[this.parent.__configuration.value] === 0) {
                    return .25
                }
                return 1
            })
        if (transition) {
            core.frame.bar
                .attr('x', (d) => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if (bar.el && bar.el.attributes.opacity && bar.el.attributes.opacity.value === '0') {
                            return bar.x
                        } else {
                            if (bar.el && bar.el.attributes.x) {
                                return bar.el.attributes.x.value
                            } else {
                                return bar.x
                            }
                        }
                    }
                    return 0;
                })
                .attr('y', (d) => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if (bar.el && bar.el.attributes.opacity && bar.el.attributes.opacity.value === '0') {
                            return bar.y
                        } else {
                            if (bar.el && bar.el.attributes.y && d.Type !== 'net' && d.Type !== 'net_OoS') {
                                return bar.el.attributes.y.value
                            } else {
                                return bar.y
                            }
                        }
                    }
                    return 0;
                })
                .attr('height', (d) => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if (bar.el && ((bar.el.attributes.opacity && bar.el.attributes.opacity.value === '0') || (!bar.el.attributes.opacity && d.depth === 2))) {
                            return 0;
                        } else {
                            if (bar.children && bar.children.length && Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth) {
                                return bar.height + (this.depthPadding * 2 * (Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth));
                            } else {
                                return bar.height;
                            }
                        }
                    } else {
                        return this.getHeight({element: d, data: core.data, parents: core.parents}, core, this.parent.__configuration);
                    }
                })
                .attr('opacity', d => {
                    let opacity;
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if (core.isComparison && this.parent.__configuration.coc && this.parent.__join) {
                            return 0
                        }
                        if (bar.el && ((bar.el.attributes.opacity && bar.el.attributes.opacity.value === '0') || !bar.el.attributes.opacity)) {
                            opacity = 0;
                        } else {
                            if (this.parent.__configuration.comparison.side === 'overlay' && core.isComparison) {
                                if (Math.max(...[...core.data, ...core.parents].map(r => core.bars.get(r.unique).depth)) > 0) {
                                    opacity = 0;
                                } else {
                                    opacity = 0.5
                                }
                            } else {
                                opacity = d.Type === 'net_OoS' ? .5 : 1;
                            }
                        }
                    } else {
                        opacity = 0
                    }
                    return opacity
                })
                .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                .attr('x', (d) => {
                    return core.bars.get(d.unique) ? core.bars.get(d.unique).x : this.getX({element: d, data: core.data, parents: core.parents}, core, this.parent.__configuration);
                })
                .attr('y', (d) => {
                    return core.bars.get(d.unique) ? core.bars.get(d.unique).y : this.getY({element: d, data: core.data, parents: core.parents}, core, this.parent.__configuration);
                })
                .attr('opacity', d => {
                    let opacity;
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if (core.isComparison && this.parent.__configuration.coc && this.parent.__join) {
                            return 0
                        }
                        if (bar.el && ((bar.el.attributes.opacity && bar.el.attributes.opacity.value === '0') || !bar.el.attributes.opacity)) {
                            opacity = 0;
                        } else {
                            if (this.parent.__configuration.comparison.side === 'overlay' && core.isComparison) {
                                if (Math.max(...[...core.data, ...core.parents].map(r => core.bars.get(r.unique).depth)) > 0) {
                                    opacity = 0;
                                } else {
                                    opacity = 0.5
                                }
                            } else {
                                opacity = d.Type === 'net_OoS' ? .5 : 1;
                            }
                        }
                    } else {
                        opacity = 0
                    }
                    return opacity
                })
                .attr('transform', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if (bar.children && bar.children.length && Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth) {
                            return 'translate(' + -(this.depthPadding * (Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth)) + ', ' + -(this.depthPadding * (Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth)) + ')';
                        } else {
                            return 'translate(0, 0)';
                        }
                    } else {
                        return 'translate(0, -10)';
                    }
                })
                .attr('width', (d) => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if (bar.children && bar.children.length && Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth) {
                            return bar.width + (this.depthPadding * 2) * (Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth);
                        } else {
                            return bar.width;
                        }
                    } else {
                        return this.getWidth({element: d, data: core.data, parents: core.parents}, core, this.parent.__configuration);
                    }
                })
                .attr('height', (d) => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if (bar.el && ((bar.el.attributes.opacity && bar.el.attributes.opacity.value === '0') || (!bar.el.attributes.opacity && d.depth === 2))) {
                            return 0;
                        } else {
                            if (bar.children && bar.children.length && Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth) {
                                return bar.height + (this.depthPadding * 2 * (Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth));
                            } else {
                                return bar.height;
                            }
                        }
                    } else {
                        return this.getHeight({element: d, data: core.data, parents: core.parents}, core, this.parent.__configuration);
                    }
                })
                .attr('stroke', d => {
                    let stroke = 'transparent';
                    let bar = core.bars.get(d.unique)
                    if (bar) {
                        if (bar.children && bar.children.length) {
                            let gap = bar.children.length && Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth;
                            if (gap === 1) {
                                if (bar.depth === 0) {
                                    stroke = 'rgba(0,0,0,0.25)'
                                } else if (d[this.parent.__configuration.value] === 0) {
                                    stroke = 'black';
                                } else {
                                    stroke = this.parent.__palette[d.Type.replace('_OoS', '')];
                                }
                            } else if (gap === 2) {
                                stroke = 'rgba(0,0,0,0.25)'
                            }
                        }
                    } else {
                        if (this.parent.__configuration.debug) {
                            stroke = 'rgba(0,0,0,0.5)'
                        }
                    }
                    return stroke;
                })
                .attr('fill', d => {
                    let color = 'transparent';
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if (bar.children && bar.children.length && Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth) {
                            if (bar.depth > 0) {
                                color = this.parent.__palette[bar.properties.Type.replace('_OoS', '')];
                            } else {
                                color = 'white'
                            }
                        } else {
                            if (bar.properties.disabled ||bar.properties[this.parent.__configuration.value] === 0) {
                                color = 'black';
                            } else {
                                if (bar.properties.Type === 'in') {
                                    color = this.parent.__palette.Up;
                                } else if (bar.properties.Type === 'out') {
                                    color = this.parent.__palette.Down;
                                } else {
                                    color = this.parent.__palette.net
                                }
                            }
                        }
                    }
                    return color
                })
                .attr('stroke-width', d => core.bars.get(d.unique) && core.bars.get(d.unique).children && core.bars.get(d.unique).children.length ? 0.5 : 0)
                .attr('stroke-dasharray', d => {
                    let strokeDashArray = [0, 0];
                    let bar = core.bars.get(d.unique)
                    if (bar) {
                        let gap = bar.children && bar.children.length && Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth;
                        if (gap > 1 || (bar.depth === 0 && bar?.children?.length)) {
                            strokeDashArray = [5, 5]
                        }
                    }
                    return strokeDashArray.join(', ');

                })
                .attr("ry", (d) => {
                    let radius = 0;
                    let bar = core.bars.get(d.unique)
                    if (bar) {
                        let gap = bar.children && bar.children.length && Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth;
                        if (gap > 0) {
                            radius = this.parent.__configuration.bars.depthRadius * gap
                        }
                    }
                    return radius;
                })
                .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                .attr('opacity', d => {
                    let opacity;
                    if (core.bars.get(d.unique)) {
                        if (core.isComparison && this.parent.__configuration.coc && this.parent.__join) {
                            return 0
                        }
                        if (this.parent.__configuration.comparison.side === 'overlay' && core.isComparison) {
                            if (Math.max(...[...core.data, ...core.parents].map(r => core.bars.get(r.unique).depth)) > 0) {
                                opacity = 0;
                            } else {
                                opacity = 0.5
                            }
                        } else {
                            opacity = d.Type === 'net_OoS' ? .5 : 1;
                        }
                    } else {
                        opacity = 0
                    }
                    return opacity
                })
                .attr('height', (d) => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if (bar.children && bar.children.length && Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth) {
                            return bar.height + (this.depthPadding * 2 * (Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth));
                        } else {
                            return bar.height;
                        }
                    } else {
                        return this.getHeight({element: d, data: core.data, parents: core.parents}, core, this.parent.__configuration);
                    }
                })
        } else {
            core.frame.bar
                .attr('transform', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if (bar.children && bar.children.length && Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth) {
                            return 'translate(' + -(this.depthPadding * (Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth)) + ', ' + -(this.depthPadding * (Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth)) + ')';
                        } else {
                            return 'translate(0, 0)';
                        }
                    } else {
                        return 'translate(0, -10)';
                    }
                })
                .attr("ry", (d) => {
                    let radius = 0;
                    let bar = core.bars.get(d.unique)
                    if (bar) {
                        let gap = bar.children && bar.children.length && Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth;
                        if (gap > 0) {
                            radius = this.parent.__configuration.bars.depthRadius * gap
                        }
                    }
                    return radius;
                })
                .attr('x', (d) => {
                    return core.bars.get(d.unique) ? core.bars.get(d.unique).x : this.getX({element: d, data: core.data, parents: core.parents}, core, this.parent.__configuration);
                })
                .attr('y', (d) => {
                    return core.bars.get(d.unique) ? core.bars.get(d.unique).y : this.getY({element: d, data: core.data, parents: core.parents}, core, this.parent.__configuration);
                })
                .attr('height', (d) => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if (!bar.children || bar.children.length === 0) {
                            return 0;
                        } else {
                            if (d.depth === 2) return 0
                            if (bar.children && bar.children.length && Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth) {
                                return bar.height + (this.depthPadding * 2 * (Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth));
                            } else {
                                return bar.height;
                            }
                        }
                    } else {
                        return this.getHeight({element: d, data: core.data, parents: core.parents}, core, this.parent.__configuration);
                    }
                })
                .attr('width', (d) => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if (bar.children && bar.children.length && Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth) {
                            return bar.width + (this.depthPadding * 2 * (Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth));
                        } else {
                            return bar.width;
                        }
                    } else {
                        return this.getWidth({element: d, data: core.data, parents: core.parents}, core, this.parent.__configuration);
                    }
                })
                .attr('transform', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if (bar.children && bar.children.length && Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth) {
                            return 'translate(' + -(this.depthPadding * (Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth)) + ', ' + -(this.depthPadding * (Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth)) + ')';
                        } else {
                            return 'translate(0, 0)';
                        }
                    } else {
                        return 'translate(0, -10)';
                    }
                })
                .attr('opacity', d => {
                    let opacity;
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if (core.isComparison && this.parent.__configuration.coc && this.parent.__join) {
                            return 0
                        }
                        if (this.parent.__configuration.comparison.side === 'overlay' && core.isComparison) {
                            if (Math.max(...[...core.data, ...core.parents].map(r => core.bars.get(r.unique).depth)) > 0) {
                                opacity = 0;
                            } else {
                                opacity = 0.5
                            }
                        } else {
                            if (d.depth === 2 || (bar.children && bar.children.length)) {
                                opacity = 0;
                            } else {
                                opacity = d.Type === 'net_OoS' ? .5 : 1;
                            }
                        }
                    } else {
                        opacity = 0
                    }
                    return opacity
                })
            core.frame.bar
                .attr('stroke', d => {
                    let stroke = 'transparent';
                    let bar = core.bars.get(d.unique)
                    if (bar) {
                        if (bar.children && bar.children.length) {
                            let gap = bar.children.length && Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth;
                            if (gap === 1) {
                                if (bar.depth === 0) {
                                    stroke = 'rgba(0,0,0,0.25)'
                                } else if (d[this.parent.__configuration.value] === 0) {
                                    stroke = 'black';
                                } else {
                                    stroke = this.parent.__palette[d.Type.replace('_OoS', '')];
                                }
                            } else if (gap === 2) {
                                stroke = 'rgba(0,0,0,0.25)'
                            }
                        }
                    } else {
                        if (this.parent.__configuration.debug) {
                            stroke = 'rgba(0,0,0,0.5)'
                        }
                    }
                    return stroke;
                })
                .attr('stroke-width', d => core.bars.get(d.unique) && core.bars.get(d.unique).children && core.bars.get(d.unique).children.length ? 0.5 : 0)
                .attr('stroke-dasharray', d => {
                    let strokeDashArray = [0, 0];
                    let bar = core.bars.get(d.unique)
                    if (bar) {
                        let gap = bar.children && bar.children.length && Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth;
                        if (gap > 1 || (bar.depth === 0 && bar?.children?.length)) {
                            strokeDashArray = [5, 5]
                        }
                    }
                    return strokeDashArray.join(', ');

                })
                .attr('fill', d => {
                    let color = 'transparent';
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if (bar.children && bar.children.length && Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth) {
                            if (bar.depth > 0) {
                                color = this.parent.__palette[bar.properties.Type.replace('_OoS', '')];
                            } else {
                                color = 'white'
                            }
                        } else {
                            if (bar.properties.disabled ||bar.properties[this.parent.__configuration.value] === 0) {
                                color = 'black';
                            } else {
                                if (bar.properties.Type === 'in') {
                                    color = this.parent.__palette.Up;
                                } else if (bar.properties.Type === 'out') {
                                    color = this.parent.__palette.Down;
                                } else {
                                    color = this.parent.__palette.net
                                }
                            }
                        }
                    }
                    return color
                })
                .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                .attr('height', (d) => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if (bar.children && bar.children.length && Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth) {
                            return bar.height + (this.depthPadding * 2 * (Math.max(...bar.children.filter(r => r).map(r => r.depth)) - bar.depth));
                        } else {
                            return bar.height;
                        }
                    } else {
                        return this.getHeight({element: d, data: core.data, parents: core.parents}, core, this.parent.__configuration);
                    }
                })
                .attr('opacity', d => {
                    let opacity;
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if (core.isComparison && this.parent.__configuration.coc && this.parent.__join) {
                            return 0
                        }
                        if (this.parent.__configuration.comparison.side === 'overlay' && core.isComparison) {
                            if (Math.max(...[...core.data, ...core.parents].map(r => core.bars.get(r.unique).depth)) > 0) {
                                opacity = 0;
                            } else {
                                opacity = 0.5
                            }
                        } else {
                            opacity = d.Type === 'net_OoS' ? .5 : 1;
                        }
                    } else {
                        opacity = 0
                    }
                    return opacity
                })
        }
    }

    addTexts(core, transition) {
        core.frame.texts
            .attr('transform', d => {
                let bar = core.bars.get(d.unique);
                if (bar) {
                    let path = core.__makeWaterfallPath(d, false)
                    let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length;
                    if (this.parent.__configuration.axis.reverse) {
                        return 'translate(' + (pathDepth - 1 === 0 ? 50 : (pathDepth - 1 === 1 ? 25 : 0)) + ', ' + (d.y_lag || 0) + ')';
                    } else {
                        if (pathDepth > 2) {
                            let bar = core.bars.get(d.unique);
                            let x = (bar.x + (bar.width / 2)) + (this.parent.__configuration.fonts.size / 2);
                            let y;
                            if (this.parent.__configuration.display.secondary[0].formatting.anchor === 'default' || !this.parent.__configuration.display.secondary[0].formatting.anchor) {
                                y = core.scale.y.for(core.scale.y.domain[0]) - 20
                            } else {
                                this.__getElementText(core, d)
                                let lag = this.__testingElement.clientWidth;
                                y = (bar.y + bar.height) + (this.parent.__configuration.display.secondary[0].formatting.anchor === 'right' ? lag : (this.parent.__configuration.display.secondary[0].formatting.anchor === 'left' ? 0 : (lag/2)));
                            }
                            return 'rotate(270, ' + (x) + ', ' + (y) + ')';
                        } else {
                            let lineHeight = this.parent.__configuration.fonts.size * 1.25
                            let grow = (pathDepth % 2) - 1;
                            if (grow < 0) {
                                grow += 0.25
                            }
                            return 'translate(0, ' + (pathDepth * (lineHeight * grow) + lineHeight + (d.y_lag || 0)) +  ')';
                        }
                    }
                }
                return 'translate(0, -10)'
            })
            .attr('x', (d) => {
                let bar = core.bars.get(d.unique);
                if (bar) {
                    if (bar.el && bar.el.attributes.opacity && bar.el.attributes.opacity.value === '0') {
                        return bar.x + (bar.width / 2)
                    } else {
                        if (bar.el && bar.el.attributes.x) {
                            return bar.el.attributes.x.value
                        }
                    }
                }
                return this.getX({element: d, data: core.data, parents: core.parents}, core, this.parent.__configuration);
            })
            .attr('y', d => {
                let bar = core.bars.get(d.unique);
                if (bar) {
                    if (this.parent.__configuration.axis.reverse) {
                        return bar.y + (bar.height / 2)
                    } else {
                        let path = core.__makeWaterfallPath(d)
                        let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
                        if (pathDepth > 2) {
                            if (this.parent.__configuration.display.secondary[0].formatting.anchor === 'default' || !this.parent.__configuration.display.secondary[0].formatting.anchor) {
                                return core.scale.y.for(core.scale.y.domain[0]) - 20
                            } else {
                                this.__getElementText(core, d)
                                let lag = this.__testingElement.clientWidth;
                                return (bar.y + bar.height) + (this.parent.__configuration.display.secondary[0].formatting.anchor === 'right' ? lag : (this.parent.__configuration.display.secondary[0].formatting.anchor === 'left' ? 0 : (lag/2)));
                            }
                        }
                        if (bar.depth === 1) {
                            return core.scale.y.for(core.scale.y.domain[0]) + (this.parent.__configuration.fonts.size * 1.5 * 1.5)
                        } else {
                            return core.scale.y.for(core.scale.y.domain[0]) + (this.parent.__configuration.fonts.size * 1.5 * 1.25)
                        }
                    }
                }
                return 0
            })
        let texts = (
            transition ?
                core.frame.texts
                    .attr('opacity', d =>  core.isComparison && this.parent.__configuration.comparison.side === 'overlay' ?  0 : (core.bars.get(d.unique) ? 1 : 0))
                    .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                    .attr('x', d => {
                        let bar = core.bars.get(d.unique);
                        if (bar) {
                            if (this.parent.__configuration.axis.reverse) {
                                let path = core.__makeWaterfallPath(d)
                                let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
                                if (pathDepth === 1) {
                                    return 0
                                } else if (pathDepth === 2) {
                                    return core.scale.x.spaces[0] + 10
                                } else if (pathDepth === 3) {
                                    return core.bars.get(bar.parent.unique).x;
                                }
                            } else {
                                return bar.x + (bar.width / 2)
                            }
                        }
                        return 0
                    })
                    .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                    .attr('y', d => {
                        let bar = core.bars.get(d.unique);
                        let yLag = d.lags?.y || 0
                        if (bar) {
                            if (this.parent.__configuration.axis.reverse) {
                                return bar.y + (bar.height / 2) + yLag
                            } else {
                                let path = core.__makeWaterfallPath(d)
                                let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
                                if (pathDepth > 2) {
                                    if (this.parent.__configuration.display.secondary[0].formatting.anchor === 'default' || !this.parent.__configuration.display.secondary[0].formatting.anchor) {
                                        return core.scale.y.for(core.scale.y.domain[0]) - 20 + yLag
                                    } else {
                                        this.__getElementText(core, d)
                                        let lag = this.__testingElement.clientWidth;
                                        return (bar.y + bar.height) + (this.parent.__configuration.display.secondary[0].formatting.anchor === 'right' ? lag : (this.parent.__configuration.display.secondary[0].formatting.anchor === 'left' ? 0 : (lag/2))); + yLag
                                    }
                                }
                                if (bar.depth === 1) {
                                    return core.scale.y.for(core.scale.y.domain[0]) + (this.parent.__configuration.fonts.size * 1.5 * 1.5) + yLag
                                } else {
                                    return core.scale.y.for(core.scale.y.domain[0]) + (this.parent.__configuration.fonts.size * 1.5 * 1.25) + yLag
                                }
                            }
                        }
                        return 0
                    })
                : core.frame.texts
                    .attr('x', d => {
                        let bar = core.bars.get(d.unique);
                        if (bar) {
                            if (this.parent.__configuration.axis.reverse) {
                                let path = core.__makeWaterfallPath(d)
                                let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
                                if (pathDepth <= 2) {
                                    return 0
                                } else if (pathDepth === 2) {
                                    return core.scale.x.spaces[0] + 10
                                } else if (pathDepth === 3) {
                                    return core.bars.get(bar.parent.unique).x;
                                }
                            } else {
                                return bar.x + (bar.width / 2)
                            }
                        }
                        return 0
                    })
                    .attr('y', d => {
                        let bar = core.bars.get(d.unique);
                        let yLag = d.lags?.y || 0
                        if (bar) {
                            if (this.parent.__configuration.axis.reverse) {
                                return bar.y + (bar.height / 2) + yLag
                            } else {
                                let path = core.__makeWaterfallPath(d)
                                let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
                                if (pathDepth > 2) {
                                    if (this.parent.__configuration.display.secondary[0].formatting.anchor === 'default' || !this.parent.__configuration.display.secondary[0].formatting.anchor) {
                                        return core.scale.y.for(core.scale.y.domain[0]) - 20 + yLag
                                    } else {
                                        this.__getElementText(core, d)
                                        let lag = this.__testingElement.clientWidth;
                                        return (bar.y + bar.height) + (this.parent.__configuration.display.secondary[0].formatting.anchor === 'right' ? lag : (this.parent.__configuration.display.secondary[0].formatting.anchor === 'left' ? 0 : (lag/2))) + yLag;
                                    }
                                }
                                return core.scale.y.for(core.scale.y.domain[0]) + (this.parent.__configuration.fonts.size * 1.5) + yLag
                            }
                        }
                        return 0
                    })
                    .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
        )
            .attr('font-size', r => r.font.size)
            .attr('font-family', r => r.font.family)
            .attr('font-style', core.isComparison && this.parent.__configuration.comparison.side === 'overlay' ? 'italic' : 'normal')
            .attr('text-anchor', d => {
                let bar = core.bars.get(d.unique);
                if (bar) {
                    let path = core.__makeWaterfallPath(d)
                    let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 2;
                    if (this.parent.__configuration.axis.reverse) {
                        return 'start'
                    } else {
                        if (pathDepth > 1) {
                            return this.parent.__configuration.display.secondary[0].formatting.anchor || 'start'
                        }
                    }
                }
                return 'middle'
            })
            .attr('fill', 'black')
            .attr('alignment-baseline', 'ideographic')
            .attr('opacity', d => core.isComparison && this.parent.__configuration.comparison.side === 'overlay' ?  0 : (d.Type !== 'net_OoS' && core.bars.get(d.unique) ? 1 : 0))
            .text(r => {
                let text = r.text
                if (this.parent.__configuration.display.segment_complement === 'Variation %' && r?.Variation_percent) {
                    text += ' (' + parseFloat(r?.Variation_percent).format({percent: true}) + ')'
                } else if (this.parent.__configuration.display.segment_complement === 'Variation relative to avg' && r?.Variation_avg) {
                    text += ' (x' + parseFloat(r?.Variation_avg) + ')'
                }
                return text;
            })
        if (core.isComparison && this.parent.__configuration.coc && this.parent.__join) {
            core.frame.texts.attr('opacity', 0)
        }
    }
    addLinks(core, transition) {
        let divider = 1.5;
        (
            transition ?
                core.frame.links
                    .attr('transform', d => {
                        if (core.bars.uniqueExist(d.unique)) {
                            return 'translate(0, 0)';
                        }
                        return 'translate(0, -10)'
                    })
                    .attr('opacity', d => {
                        let opacity = 0;
                        if (this.parent.__configuration.bars.links && this.parent.__configuration.plot === 'waterfall' && core.bars.uniqueExist(d.unique) && d.Type !== 'net_OoS' && !((d.Type === 'net') && core.data.filter(r => r.Type !== 'net_OoS').map(r => r.unique).indexOf(d.unique) === core.data.filter(r => r.Type !== 'net_OoS').length - 1)) {
                            opacity = this.parent.__configuration.comparison.side === 'overlay' && core.isComparison ? 0.25 : .5;
                            if (core.isComparison && this.parent.__configuration.comparison.side === 'overlay') {
                                if (Math.max(...core.data.map(r => r.depth)) > 0) {
                                    opacity = 0;
                                }
                            }
                        }
                        return opacity;
                    })
                    .attr('y1', d => {
                        let bar = core.bars.get(d.unique);
                        if (bar) {
                            if (this.parent.__configuration.axis.reverse) {
                                return parseInt((bar.y + core.scale.y.part / divider) + 1)
                            } else {
                                if (bar.properties.Value < 0) {
                                    return bar.y + bar.height
                                }
                                return bar.y;
                                // return parseInt(core.scale.y.for(d.Type === 'net' ? d[this.parent.__configuration.value] : d.Total))
                            }

                        }
                        return 0
                    })
                    .attr('y2', d => {
                        let bar = core.bars.get(d.unique);
                        if (bar) {
                            if (this.parent.__configuration.axis.reverse) {
                                return parseInt((bar.y + core.scale.y.part / divider) + (core.scale.y.part - (core.scale.y.part / divider)) - 1)
                            } else {
                                if (bar.properties.Value < 0) {
                                    return bar.y + bar.height
                                }
                                return bar.y;
                                // return parseInt(core.scale.y.for(d.Type === 'net' ? d[this.parent.__configuration.value] : d.Total))
                            }

                        }
                        return 0

                    })
                    .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                    .attr('x1', d =>  {
                        let bar = core.bars.get(d.unique);
                        if (bar) {
                            if (this.parent.__configuration.axis.reverse) {
                                return parseInt(core.scale.x.for(d.Type === 'net' ? d[this.parent.__configuration.value] : d.Total))
                            } else {
                                return parseInt((bar.x + core.scale.x.part / divider))
                            }

                        }
                        return 0;
                    })
                    .attr('x2', d =>  {
                        let bar = core.bars.get(d.unique);
                        if (bar) {
                            if (this.parent.__configuration.axis.reverse) {
                                return parseInt(core.scale.x.for(d.Type === 'net' ? d[this.parent.__configuration.value] : d.Total))
                            } else {
                                return parseInt((bar.x + core.scale.x.part / divider) + (core.scale.x.part - (core.scale.x.part / divider)))
                            }

                        }
                        return 0;
                    })
                    .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                : core.frame.links
                    .attr('opacity', 0)
                    .attr('transform', d => {
                        if (core.bars.uniqueExist(d.unique)) {
                            return 'translate(0, 0)';
                        }
                        return 'translate(0, -10)'
                    })
                    .attr('x1', d =>  {
                        let bar = core.bars.get(d.unique);
                        if (bar) {
                            if (this.parent.__configuration.axis.reverse) {
                                return parseInt(core.scale.x.for(d.Type === 'net' ? d[this.parent.__configuration.value] : d.Total))
                            } else {
                                return parseInt((bar.x + core.scale.x.part / divider))
                            }

                        }
                        return 0;
                    })
                    .attr('y1', d => {
                        let bar = core.bars.get(d.unique);
                        if (bar) {
                            if (this.parent.__configuration.axis.reverse) {
                                return parseInt((bar.y + core.scale.y.part / divider) + 1)
                            } else {
                                if (bar.properties.Value < 0) {
                                    return bar.y + bar.height
                                }
                                return bar.y;
                                // return parseInt(core.scale.y.for(d.Type === 'net' ? d[this.parent.__configuration.value] : d.Total))
                            }

                        }
                        return 0
                    })
                    .attr('x2', d =>  {
                        let bar = core.bars.get(d.unique);
                        if (bar) {
                            if (this.parent.__configuration.axis.reverse) {
                                return parseInt(core.scale.x.for(d.Type === 'net' ? d[this.parent.__configuration.value] : d.Total))
                            } else {
                                return parseInt((bar.x + core.scale.x.part / divider))
                            }

                        }
                        return 0;
                    })
                    .attr('y2', d => {
                        let bar = core.bars.get(d.unique);
                        if (bar) {
                            if (this.parent.__configuration.axis.reverse) {
                                return parseInt((bar.y + core.scale.y.part / divider) + 1)
                            } else {
                                if (bar.properties.Value < 0) {
                                    return bar.y + bar.height
                                }
                                return bar.y;
                                // return parseInt(core.scale.y.for(d.Type === 'net' ? d[this.parent.__configuration.value] : d.Total))
                            }

                        }
                        return 0
                    })
                    .transition().duration(this.parent.__configuration.bars.transition).ease(core.d3.easeExp)
        )
            .attr('data-unique', d => d.unique)
            .attr('class', d => 'datama-waterfall-bar-links ' + (core.data.map(r => r.unique).indexOf(d.unique) !== -1 && d.disabled !== true ? '' : 'no-click'))
            .attr('shape-rendering', 'crispedges')
            .attr('stroke', this.parent.__configuration.bars.links ? 'rgba(0,0,0,0.5)' : 'transparent')
            .attr('stroke-width', .5)
            .attr('opacity', d => {
                let opacity = 0;
                if (this.parent.__configuration.bars.links && this.parent.__configuration.plot === 'waterfall' && core.bars.uniqueExist(d.unique) && d.Type !== 'net_OoS' && !((d.Type === 'net') && core.data.filter(r => r.Type !== 'net_OoS').map(r => r.unique).indexOf(d.unique) === core.data.filter(r => r.Type !== 'net_OoS').length - 1)) {
                    opacity = this.parent.__configuration.comparison.side === 'overlay' && core.isComparison ? 0.25 : .5;
                    if (core.isComparison && this.parent.__configuration.comparison.side === 'overlay') {
                        if (Math.max(...core.data.map(r => r.depth)) > 0) {
                            opacity = 0;
                        }
                    }
                }
                return opacity;
            })

        if (core.isComparison && this.parent.__configuration.coc && this.parent.__join) {
            core.frame.links.attr('opacity', 0)
        }
    }

    __annotationIsVisible(core, element) {
        let result;
        let bar = core.bars.get(element.unique);
        // Top label must be hide when :
        // - COC overlay [no join]
        // - has children
        // - Label is hidden
        if (bar) {
            let children = bar.children
            if (children) children = children.filter(c => c.depth > bar.depth)
            if (element.type === 'top') {
                if (
                    // Is level 0 + has children
                    (bar.depth === 0 && children && children.length > 0 && children.some(c => c.depth - bar.depth === 2 || c.depth - bar.depth === 1))
                    // Is level 1 + has children
                    || (bar.depth === 1 && children && children.length > 0 && children.some(c => c.depth - bar.depth === 1))
                    // Label hidden
                    || (this.parent.__configuration.display.secondary[1].hoverOnly || this.parent.__configuration.display.secondary[1].hidden)
                    // Is comparison and side is Overlay
                    || (core.isComparison && this.parent.__configuration.coc && (!this.parent.__join && this.parent.__configuration.comparison.side === 'overlay') && Math.max(...core.data.map(r => r.depth)) > 0)
                    // Join discontinuous
                    || (!core.__comparison && this.parent.__join && !this.parent.__joinContinuous)
                    // Join continuous
                    || (!core.__comparison && this.parent.__join && this.parent.__joinContinuous)
                ) {
                    result = 0;
                } else {
                    result = 1;
                    if (bar.properties.Type === 'net_OoS') {
                        result /= 2
                    }
                }
            } else if (element.type === 'label') {
                if (
                    // Has children
                    (children && children.length > 0)
                    // Is comparison and side is Overlay
                    || (core.isComparison && this.parent.__configuration.coc && (!this.parent.__join && this.parent.__configuration.comparison.side === 'overlay'))
                    // Label hidden
                    || (this.parent.__configuration.display.secondary[0].hoverOnly || this.parent.__configuration.display.secondary[0].hidden)
                    // Is segment (text overlap)
                    || bar.depth === 2
                    // Join discontinuous
                    || (!core.__comparison && this.parent.__join && !this.parent.__joinContinuous)
                    // Join continuous
                    || (!core.__comparison && this.parent.__join && this.parent.__joinContinuous)
                ) {
                    result = 0;
                } else {
                    result = 1;
                }
            }
        } else {
            return 0;
        }
        return result;
    }

    addAnnotationsPosition(core, transition) {
        (
            transition ?
                core.frame.annotations
                    .attr('transform', d => {
                        let bar = core.bars.get(d.unique);
                        if (bar) {
                            let lagX = core.isComparison && this.parent.__configuration.comparison.side === 'overlay' ? (this.parent.__configuration.axis.reverse ? 0 : this.parent.__configuration.comparison.translate.x) : 0;
                            let lagY = core.isComparison && this.parent.__configuration.comparison.side === 'overlay' ? (this.parent.__configuration.axis.reverse ? this.parent.__configuration.comparison.translate.x : 0) : 0;
                            if (this.parent.__configuration.axis.reverse && lagX === 0 && d.type === 'top') {
                                lagX = -50
                            }
                            return 'translate(' + -lagX + ', ' + -lagY + ')';
                        }
                        return 'translate(0, -10)'
                    })
                    .attr('opacity', d => this.__annotationIsVisible(core, d, .5))
                    .attr('y', d => {
                        let bar = core.bars.get(d.unique);
                        if (bar) {
                            let fontSize = this.parent.__configuration.fonts.size;
                            let lag = core.isComparison && this.parent.__configuration.comparison.side === 'overlay' ? fontSize * 1.25 : 0;
                            if (this.parent.__configuration.axis.reverse) {
                                return bar.y + (bar.height / 2) + lag;
                            } else {
                                if (d.type === 'top') {
                                    let y = core.scale.y.for(core.scale.y.domain[1]) - (fontSize * 3) + lag
                                    if (bar.properties.Type === 'net_OoS') {
                                        if (core.isComparison && this.parent.__configuration.coc && !this.parent.__join) {
                                            y -= (fontSize * 3)
                                        } else if (!core.isComparison && this.parent.__configuration.coc && !this.parent.__join) {
                                            if (Object.keys(core.bars.bars).filter(b => core.bars.bars[b].depth > 0).length) {
                                                y -= (fontSize * 1.5)
                                            } else {
                                                y -= (fontSize * 3)
                                            }
                                        } else {
                                            y -= (fontSize * 1.5)
                                        }
                                    }
                                    return y;
                                } else if (d.type === 'label') {
                                    if (bar.properties.Type === 'out') {
                                        return bar.y + bar.height + (fontSize * 0.5) + 5
                                    } else {
                                        return bar.y - (fontSize / 2) - 5
                                    }
                                    // return bar.y - (bar.height + 3)
                                }
                            }
                            // }
                            return bar.y;
                        }
                        return 0;
                    })
                    .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                    .attr('x', d => {
                        let bar = core.bars.get(d.unique);
                        if (bar) {
                            if (this.parent.__configuration.axis.reverse) {
                                if (d.type === 'top') {
                                    return core.scale.x.for(core.scale.x.domain[1])
                                } else if (d.type === 'label') {
                                    if (bar.properties.Type === 'out') {
                                        return bar.x - 5;
                                    } else {
                                        return bar.x + bar.width + 5;
                                    }
                                }
                            } else {
                                if (bar.depth === 0 && core.isComparison && this.parent.__configuration.comparison.side === 'overlay') {
                                    // Here we need to select the equivalent bar on default source to stay align in all depth
                                    let path = core.__makeWaterfallPath(bar.properties, false);
                                    let childs = this.core.__getRowsByPath(path, this.core.source).filter(r => r.Type !== 'net' && r.Type !== 'net_OoS' && r.unique.indexOf(d.unique.indexOf('-coc') !== -1 ? '-coc' : '-default') !== -1);
                                    if (bar.properties.Type !== 'net' && bar.properties.Type !== 'net_OoS') {
                                        childs = childs.filter(c => c.Type !== 'net');
                                    } else {
                                        if (bar.properties.Type === 'net') {
                                            let netIndex = core.data.filter(r => r.Type === 'net').map(r => r.unique).indexOf(bar.properties.unique);
                                            childs = [childs.filter(r => r.Type === 'net')[netIndex]]
                                        } else {
                                            let netIndex = core.data.filter(r => r.Type === 'net_OoS').map(r => r.unique).indexOf(bar.properties.unique);
                                            childs = [childs.filter(r => r.Type === 'net_OoS')[netIndex]]
                                        }
                                    }
                                    childs = childs.filter(c => c)
                                    if (childs.length) {
                                        let equivalent_bar = this.core.bars.get(childs[0].unique.replace('-coc', '-default'))
                                        let x = equivalent_bar.x;
                                        let width = equivalent_bar.width
                                        return x + (width / 2)
                                    } else {
                                        return bar.x + (bar.width / 2);
                                    }
                                } else {
                                    return bar.x + (bar.width / 2);
                                }
                            }
                        }
                        return 0;
                    })
                    .attr('opacity', d => this.__annotationIsVisible(core, d, 1))
                : core.frame.annotations
                    .attr('opacity', d => this.__annotationIsVisible(core, d, .5))
                    .attr('x', d => {
                        let bar = core.bars.get(d.unique);
                        if (bar) {
                            if (this.parent.__configuration.axis.reverse) {
                                if (d.type === 'top') {
                                    return core.scale.x.for(core.scale.x.domain[1])
                                } else if (d.type === 'label') {
                                    if (bar.properties.Type === 'out') {
                                        return bar.x - 5;
                                    } else {
                                        return bar.x + bar.width + 5;
                                    }
                                }
                            } else {
                                if (bar.depth === 0 && core.isComparison && this.parent.__configuration.comparison.side === 'overlay') {
                                    // Here we need to select the equivalent bar on default source to stay align in all depth
                                    let path = core.__makeWaterfallPath(bar.properties, false);
                                    let childs = this.core.__getRowsByPath(path, this.core.source).filter(r => r.Type !== 'net' && r.Type !== 'net_OoS' && r.unique.indexOf(d.unique.indexOf('-coc') !== -1 ? '-coc' : '-default') !== -1);
                                    if (bar.properties.Type !== 'net' && bar.properties.Type !== 'net_OoS') {
                                        childs = childs.filter(c => c.Type !== 'net');
                                    } else {
                                        if (bar.properties.Type === 'net') {
                                            let netIndex = core.data.filter(r => r.Type === 'net').map(r => r.unique).indexOf(bar.properties.unique);
                                            childs = [childs.filter(r => r.Type === 'net')[netIndex]]
                                        } else {
                                            let netIndex = core.data.filter(r => r.Type === 'net_OoS').map(r => r.unique).indexOf(bar.properties.unique);
                                            childs = [childs.filter(r => r.Type === 'net_OoS')[netIndex]]
                                        }
                                    }
                                    childs = childs.filter(c => c)
                                    if (childs.length) {
                                        let equivalent_bar = this.core.bars.get(childs[0].unique.replace('-coc', '-default'))
                                        let x = equivalent_bar.x;
                                        let width = equivalent_bar.width
                                        return x + (width / 2)
                                    } else {
                                        return bar.x + (bar.width / 2);
                                    }
                                } else {
                                    return bar.x + (bar.width / 2);
                                }
                            }
                        }
                        return 0;
                    })
                    .attr('y', d => {
                        let bar = core.bars.get(d.unique);
                        if (bar) {
                            let fontSize = this.parent.__configuration.fonts.size;
                            let lag = core.isComparison && this.parent.__configuration.comparison.side === 'overlay' ? fontSize * 1.25 : 0;
                            if (this.parent.__configuration.axis.reverse) {
                                return bar.y + (bar.height / 2) + lag;
                            } else {
                                if (d.type === 'top') {
                                    let y = core.scale.y.for(core.scale.y.domain[1]) - (fontSize * 3) + lag
                                    if (bar.properties.Type === 'net_OoS') {
                                        if (core.isComparison && this.parent.__configuration.coc && !this.parent.__join) {
                                            y -= (fontSize * 3)
                                        } else if (!core.isComparison && this.parent.__configuration.coc && !this.parent.__join) {
                                            if (Object.keys(core.bars.bars).filter(b => core.bars.bars[b].depth > 0).length) {
                                                y -= (fontSize * 1.5)
                                            } else {
                                                y -= (fontSize * 3)
                                            }
                                        } else {
                                            y -= (fontSize * 1.5)
                                        }
                                    }
                                    return y;
                                } else if (d.type === 'label') {
                                    if (bar.properties.Type === 'out') {
                                        return bar.y + bar.height + (fontSize * 0.5) + 5
                                    } else {
                                        return bar.y - (fontSize / 2) - 5
                                    }
                                    // return bar.y - (bar.height + 3)
                                }
                            }
                            // }
                            return bar.y;
                        }
                        return 0;
                    })
                    .attr('transform', d => {
                        let bar = core.bars.get(d.unique);
                        if (bar) {
                            let lagX = core.isComparison && this.parent.__configuration.comparison.side === 'overlay' ? (this.parent.__configuration.axis.reverse ? 0 : this.parent.__configuration.comparison.translate.x) : 0;
                            let lagY = core.isComparison && this.parent.__configuration.comparison.side === 'overlay' ? (this.parent.__configuration.axis.reverse ? this.parent.__configuration.comparison.translate.x : 0) : 0;
                            if (this.parent.__configuration.axis.reverse && lagX === 0 && d.type === 'top') {
                                lagX = -50
                            }
                            return 'translate(' + -lagX + ', ' + -lagY + ')';
                        }
                        return 'translate(0, -10)'
                    })
                    .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                    .attr('opacity', d => this.__annotationIsVisible(core, d, 1))
        )
            .attr('font-size', this.parent.__configuration.fonts.size * (core.isComparison && this.parent.__configuration.comparison.side === 'overlay' ? 0.8 : 1))
            .attr('font-family', this.parent.__configuration.fonts.family + ', Arial, sans-serif')
            .attr('font-style', core.isComparison && this.parent.__configuration.comparison.side === 'overlay' ? 'italic' : 'normal')
            .attr('text-anchor', d => {
                let bar = core.bars.get(d.unique);
                if (bar) {
                    if (d.type === 'top') {
                        if (this.parent.__configuration.axis.reverse) {
                            return 'middle'
                        }
                        return 'middle'
                    } else if (d.type === 'label') {
                        if (this.parent.__configuration.axis.reverse) {
                            if (bar.properties.Type === 'out') {
                                return 'end'
                            } else {
                                return 'start'
                            }
                        }
                        return 'middle'
                    } else {
                        return 'end'
                    }
                }
                return 'middle'
            })
            .attr('fill', d => {
                let color = 'transparent';
                let bar = core.bars.get(d.unique);
                if (bar) {
                    if (bar.properties.disabled ||this.parent.__configuration.display.secondary.map(r => r.column).indexOf(d.column) === -1 || (!this.parent.__configuration.display.secondary[this.parent.__configuration.display.secondary.map(r => r.column).indexOf(d.column)].formatting.colors)) {
                        color = 'black'
                    } else {
                        if (bar.properties[this.parent.__configuration.value] === 0) {
                            color = 'black';
                        } else if (bar.properties.Type === 'net_OoS') {
                            return this.parent.__palette.net
                        } else {
                            if (bar.properties.Type === 'in') {
                                color = this.parent.__palette.Up;
                            } else if (bar.properties.Type === 'out') {
                                color = this.parent.__palette.Down;
                            } else {
                                if (bar.properties.Pts_gap < 0) {
                                    color = this.parent.__palette.Down;
                                } else if (bar.properties.Pts_gap > 0) {
                                    color = this.parent.__palette.Up;
                                } else {
                                    color = this.parent.__palette.net

                                }
                            }
                        }
                    }
                }
                return color;
            })
            .attr('alignment-baseline', 'middle')
            .text(d => {
                if (d.text && d.text.length) {
                    if (d.column === 'RatioStart_disp') {
                        return 'From ' + d.text
                    } else if (d.column === 'RatioEnd_disp') {
                        return 'To ' + d.text
                    }
                    return d.text;
                }
                return ''
            })
    }

    /**
     * Add waterfall bars attributes :
     * - position (x / y)
     * - size (width / height)
     * - class
     * - color
     * - opacity
     * - transformation
     * Can apply with transition
     * @param core
     * @param transition
     * @returns {*}
     */
    addPosition(core, transition = false) {
        if (this.parent.__configuration.axis.reverse) {
            if (this.core.scale.y.part * (1/3) < this.depthPadding * 4) {
                this.depthPadding = (this.core.scale.y.part * (1/3)) / 4
            }
        } else {
            if (this.core.scale.x.part * (1/3) < this.depthPadding * 4) {
                this.depthPadding = (this.core.scale.x.part * (1/3)) / 4
            }
        }
        return new Promise(resolve => {
            this.addBars(core, transition);
            this.addLinks(core, transition);
            this.addTexts(core, transition);
            this.addAnnotationsPosition(core, transition)
            if (this.parent.__comparison && this.parent.__configuration.coc) {
                this.addBars(core.__comparison, transition);
                this.addLinks(core.__comparison, transition);
                this.addTexts(core.__comparison, transition);
                this.addAnnotationsPosition(core.__comparison, transition)
            }
            this.parent.mounted = true;
            resolve()
        })
    }
    /**
     * Unmount waterfall specific traces
     * @returns {any}
     */
    unmount() {
        if (this.parent.__configuration.cards.exploration === 'top') {
            if (this.core.frame.bar) {
                this.core.frame.bar.remove().exit()
                delete this.core.frame.bar;
            }
            if (this.core.frame.texts) {
                this.core.frame.texts.remove().exit()
                delete this.core.frame.texts;
            }
            if (this.core.frame.annotations) {
                this.core.frame.annotations.remove().exit()
                delete this.core.frame.annotations;
            }
            if (this.core.frame.comparison) {
                if (this.core.frame.comparison.bar) {
                    this.core.frame.comparison.bar.remove().exit()
                    delete this.core.frame.comparison.bar;
                }
                if (this.core.frame.comparison.texts) {
                    this.core.frame.comparison.texts.remove().exit()
                    delete this.core.comparison.frame.texts;
                }
                if (this.core.frame.comparison.annotations) {
                    this.core.frame.comparison.annotations.remove().exit()
                    delete this.core.comparison.frame.annotations;
                }
            }
        }
        return super.unmount();
    }

    /**
     * Behavior on user zoom event
     * @param event
     * @param data
     */
    zoom(event, data) {
        let scale = this.parent.__configuration.axis.reverse ? this.core.scale.x : this.core.scale.y,
            axes = this.parent.__configuration.axis.reverse ? this.core.axes.x : this.core.axes.y,
            frame = this.parent.__configuration.axis.reverse ? this.core.frame.x : this.core.frame.y,
            scale_comparison = false,
            axes_comparison = false,
            frame_comparison = false;
        let value_max = Math.max(...this.core.data.map(e => e.Type === 'net_OoS' || e.Type === 'net' ? parseFloat(e[this.parent.__configuration.value]) : parseFloat(e.Total))),
            value_min = Math.min(...this.core.data.map(e => e.Type === 'net_OoS' || e.Type === 'net' ? parseFloat(e[this.parent.__configuration.value]) : parseFloat(e.Total))),
            value_comparison_max,
            value_comparison_min;
        if (value_max < 0) {
            value_max = 0
        }
        if (this.core.__comparison) {
            value_comparison_min = Math.min(...this.core.__comparison.data.map(e => e.Type === 'net_OoS' || e.Type === 'net' ? parseFloat(e[this.parent.__configuration.value]) : parseFloat(e.Total)))
            value_comparison_max = Math.max(...this.core.__comparison.data.map(e => e.Type === 'net_OoS' || e.Type === 'net' ? parseFloat(e[this.parent.__configuration.value]) : parseFloat(e.Total)))
        } else {
            value_comparison_min = value_min
            value_comparison_max = value_max
        }
        let scaleCopy = scale.for.copy()
        let test = event.transform.rescaleY(scaleCopy);
        let domain = test.domain();
        if (domain[0] > Math.min(...[value_min, value_comparison_min])) {
            domain = [Math.min(...[value_min, value_comparison_min]), domain[1]]
        } else if (domain[0] < Math.min(...[value_min, value_comparison_min]) / 2) {
            // Unzoom gap
            domain = [Math.min(...[value_min, value_comparison_min]) / 2, domain[1]]
        }
        if (domain[1] < Math.max(...[value_max, value_comparison_max])) {
            domain = [domain[0], Math.max(...[value_max, value_comparison_max])]
        } else if (domain[1] > Math.max(...[value_max, value_comparison_max]) * 1.5) {
            // Unzoom gap
            domain = [domain[0], Math.max(...[value_max, value_comparison_max]) * 1.5]
        }
        test.domain(domain);
        scale.for = test
        scale.domain = test.domain()
        scale.range = test.range()
        frame.call(axes.scale(scale.for))
        this.core.frame.x_line
            .attr("x1", this.parent.__configuration.axis.reverse ? this.core.scale.x.for(Math.max(...[this.core.scale.x.domain[0], 0])) : this.core.scale.x.range[0])     // x position of the first end of the line
            .attr("y1", this.parent.__configuration.axis.reverse ? this.core.scale.y.range[0] : this.core.scale.y.for(Math.max(...[this.core.scale.y.domain[0], 0])))      // y position of the first end of the line
            .attr("x2", this.parent.__configuration.axis.reverse ? this.core.scale.x.for(Math.max(...[this.core.scale.x.domain[0], 0])) : this.core.scale.x.range[this.core.scale.x.range.length - 1] + (this.core.scale.x.part / 2))     // x position of the second end of the line
            .attr("y2", this.parent.__configuration.axis.reverse ? this.core.scale.y.range[this.core.scale.y.range.length - 1] : this.core.scale.y.for(Math.max(...[this.core.scale.y.domain[0], 0])));
        if (this.core.__comparison) {
            scale_comparison = this.parent.__configuration.axis.reverse ? this.core.__comparison.scale.x : this.core.__comparison.scale.y
            axes_comparison = this.parent.__configuration.axis.reverse ? this.core.__comparison.axes.x : this.core.__comparison.axes.y
            frame_comparison = this.parent.__configuration.axis.reverse ? this.core.frame.comparison.x : this.core.frame.comparison.y
            scale_comparison.for = test
            scale_comparison.domain = test.domain()
            scale_comparison.range = test.range()
            frame_comparison.call(axes_comparison.scale(scale_comparison.for))
            this.core.frame.comparison.x_line
                .attr("x1", this.parent.__configuration.axis.reverse ? this.core.__comparison.scale.x.for(Math.max(...[this.core.__comparison.scale.x.domain[0], 0])) : this.core.__comparison.scale.x.range[0])     // x position of the first end of the line
                .attr("y1", this.parent.__configuration.axis.reverse ? this.core.__comparison.scale.y.range[0] : this.core.__comparison.scale.y.for(Math.max(...[this.core.__comparison.scale.y.domain[0], 0])))      // y position of the first end of the line
                .attr("x2", this.parent.__configuration.axis.reverse ? this.core.__comparison.scale.x.for(Math.max(...[this.core.__comparison.scale.x.domain[0], 0])) : this.core.__comparison.scale.x.range[this.core.__comparison.scale.x.range.length - 1] + (this.core.__comparison.scale.x.part / 2))     // x position of the second end of the line
                .attr("y2", this.parent.__configuration.axis.reverse ? this.core.__comparison.scale.y.range[this.core.__comparison.scale.y.range.length - 1] : this.core.__comparison.scale.y.for(Math.max(...[this.core.__comparison.scale.y.domain[0], 0])));
        }
        this.getPlotData(this.core)
        this.addPosition(this.core, true)
    }

    /**
     * Listen zoom on plot
     * @private
     */
    loadFilters(filters, defaultFilter) {
        this.filters = filters
            .map(path => path.filter(p => this.parent.__configuration.explore.levels.indexOf(Object.keys(p)[0]) !== -1))
            .map(path => [defaultFilter, ...path])
    }

    /**
     * Get subset of source by applying filters
     * @param source
     * @returns {{data: *, parents: *}}
     */
    filteredRows(source) {
        let i = 0;
        // Get first level
        let tempData = source.filter(r => {
            let path = this.core.__makeWaterfallPath(r);
            let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 2;
            return pathDepth === 0
        });
        if (this.filters.length) {
            while (i < this.filters.length) {
                let path = this.filters[i]
                let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 2;
                let parentPath = JSON.parse(JSON.stringify(this.filters[i]))
                parentPath[pathDepth][Object.keys(parentPath[pathDepth])[0]] = ''
                let subs = [
                    ...this.core.__getRowsByPath(parentPath, source).filter(r => {
                        let path = this.core.__makeWaterfallPath(r);
                        let depth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 2;
                        return depth === pathDepth && r.Type !== 'net' && r.Type !== 'net_OoS';
                    }),
                    ...this.core.__getRowsByPath(path, source).filter(r => {
                        let path = this.core.__makeWaterfallPath(r);
                        let depth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 2;
                        if (this.parent.__configuration.explore.depthOfZoom === -1) {
                            return true;
                        } else {
                            return depth <= pathDepth + this.parent.__configuration.explore.depthOfZoom
                        }
                    })
                ]
                let lastLevelGrouped = subs.filter(r => {
                    let path = this.core.__makeWaterfallPath(r);
                    let depth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 2;
                    return depth === 2
                })
                if (lastLevelGrouped.length) {
                    subs = subs.filter(r => {
                        let path = this.core.__makeWaterfallPath(r);
                        let depth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 2;
                        return depth < 2
                    })
                    let keys = lastLevelGrouped.map(r => r.Level_01).unique()
                    let groupLevelIndex = 0;
                    while (groupLevelIndex < keys.length) {
                        let elements = lastLevelGrouped.filter(r => r.Level_01 === keys[groupLevelIndex]).filter((e, i, s) => s.map(sr => sr.unique).indexOf(e.unique) === i);
                        if (elements.length > this.parent.__configuration.bars.remain) {
                            elements = this.parent.__dataset.remain(elements, this.parent.__drill_down === 'Dimensions then Steps' ? elements.length + 1 : this.parent.__configuration.bars.remain)
                        }
                        // Remove previous elements
                        lastLevelGrouped = lastLevelGrouped.filter(r => r.Level_01 !== keys[groupLevelIndex]);
                        // Replace by new remained elements
                        lastLevelGrouped.push(...elements);
                        groupLevelIndex++;
                    }
                    subs.push(...lastLevelGrouped);
                }
                tempData.push(...subs);
                i++;
            }
        }
        tempData = tempData.filter((e, i, s) => s.map(sp => sp.unique).indexOf(e.unique) === i)
            // .filter(d => {
            //     let path = this.core.__makeWaterfallPath(d);
            //     let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 2;
            //     return d.Value !== 0 || (pathDepth === 0 || pathDepth === 2)
            // })
        tempData.sort((a, b) => a.Row - b.Row)
        let parents = tempData.filter(r => {
            if (r.Type !== 'net') {
                let path = this.core.__makeWaterfallPath(r);
                let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 2;
                if (pathDepth === 0) path = this.core.__makeWaterfallPath(r, false);
                let childs = this.core.__getRowsByPath(path, tempData).filter(d => d.Type !== 'net' && d.unique !== r.unique)
                return childs.length > 0 && pathDepth < 2
            }
            return false;
        })
        let data = tempData.filter(r => {
            if (r.Type !== 'net') {
                let path = this.core.__makeWaterfallPath(r);
                let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 2;
                if (pathDepth === 0) path = this.core.__makeWaterfallPath(r, false);
                let childs = this.core.__getRowsByPath(path, tempData).filter(d => d.Type !== 'net' && d.unique !== r.unique)
                return childs.length === 0 || pathDepth === 2
            }
            return true;
        })
        return {parents, data}
    }

    /**
     * Get core data
     * @param source
     * @param comparison
     * @param filter
     * @param parents
     * @param current
     * @param frame
     * @param comparisonFrame
     * @returns {DataMaLayerGeneric.core}
     */
    getCore({source, comparison, filter, parents = [], current = false}, frame = {}, comparisonFrame={}) {
        if (current) {
            current.sort((a, b) => a.Row - b.Row);
        }
        if (parents) {
            parents.sort((a, b) => a.Row - b.Row);
        }
        return super.getCore({source, comparison, filter, parents, current}, frame, comparisonFrame);
    }
}

/*
 * DATAMA SAS
 * --------------
 * NOTICE:  All information contained herein is, and remains
 * the property of DataMa SAS and/or some open source packages used
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to DataMa SAS
 * and its suppliers and may be covered by French and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from DataMa SAS.
 * Notice created by Django <django@datama.fr>, Wazhabits <anatole@datama.fr> updated by Anatole Piveteau
 * Copyright (c) 2024 DATAMA SAS, All rights reserved.
 * Generated for file : DataMaLayerTree.js project project-deep-sky
 */
class DataMaLayerTree extends DataMaLayerGeneric {
    constructor(parent, filter) {
        super(parent, filter);
        this.__contextMenu = {
            elements: [
                {
                    id: 'zoom',
                    icon: ['fas', 'fa-search'],
                    text: (element, parent) => parent.core.bars.get(element.unique).children &&  parent.core.bars.get(element.unique).children.length ? 'Zoom out' : 'Zoom in',
                    if(element, configuration, parent) {
                        return parent.core.bars.get(element.unique).depth < 2 && element.Type !== 'net' && element.Type !== 'net_OoS'
                    },
                    render(element, configuration, parent) {
                        let node = document.createElement('LI')
                        node.id = this.id;
                        let text = document.createElement('A')
                        text.innerHTML = (this.icon ? parent.__icon(this.icon).outerHTML : '') + this.text(element, parent);
                        node.append(text);
                        node.addEventListener('click', (event) => {
                            event.preventDefault();
                            parent.parent.__layers[parent.parent.__configuration.plot].explore(element, parent.core)
                            parent.hide();
                        })
                        return node;
                    }
                }
            ],
            callbacks: [

            ]
        }
    }
    /**
     * Return waterfall bar Y
     * @param element
     * @param data
     * @param parents
     * @param core
     * @param configuration
     * @param barsData
     * @returns {*}
     */
    getY({element, data, parents}, core, configuration) {
        if (!this.parent.__configuration.axis.reverse) {
            return (core.scale.y.part * ((element.depth * 1.25) + 0.5)) + (this.parent.__configuration.fonts.size * 1.5 * 1.5);
        } else {
            return core.scale.y.for(element.position)
        }
    }

    /**
     * Return waterfall bar X
     * @param element
     * @param data
     * @param parents
     * @param core
     * @param configuration
     * @param barsData
     * @returns {*}
     */
    getX({element, data, parents}, core, configuration) {
        let x = element.position;
        if (!this.parent.__configuration.axis.reverse) {
            return core.scale.x.for(x) + 20;
        } else {
            x = (core.scale.x.part + 10) * element.depth;
            // if (element.Type === 'net_OoS') x += (0.25 * core.scale.x.part) - (core.scale.x.part * 0.05)
        }
        return x + 20
    }

    /**
     * Return bubble width
     * @param element
     * @param data
     * @param parents
     * @param core
     * @param configuration
     * @param barsData
     * @returns {number}
     */
    getWidth({element, data, parents}, core, configuration) {
        return core.scale.x.part * 0.9
    }

    /**
     * Return bubble height
     * @param element
     * @param data
     * @param parents
     * @param core
     * @param configuration
     * @param barsData
     * @returns {number}
     */
    getHeight({element, data, parents}, core, configuration) {
        return core.scale.y.part
    }

    addFiguresPosition(core, transition) {
        core.frame.figures
            .attr('id', d => d.unique + '-figure')
            .attr(!this.parent.__configuration.axis.reverse ? 'width' : 'height', d => {
                let bar = core.bars.get(d.unique);
                if (bar) {
                    if (!this.parent.__configuration.axis.reverse) {
                        return bar.width
                    } else {
                        return bar.height
                    }
                }
            })
            .attr('ry', d => {
                let bar = core.bars.get(d.unique);
                if (bar) {
                    return !this.parent.__configuration.axis.reverse ? 10 : core.bars.get(d.unique).height / 6
                }
            })
            .attr('fill', d => {
                let color = 'transparent';
                let bar = core.bars.get(d.unique);
                if (bar) {
                    if (bar.properties.disabled ||bar.properties.Value === 0) {
                        color = 'black';
                    } else {
                        if (d.Type === 'net') {
                            if (d.Pts_gap === 0 || !d.Pts_gap) {
                                color = 'black'
                            } else if (d.Pts_gap > 0) {
                                color = this.parent.__palette.in
                            } else {
                                color = this.parent.__palette.out
                            }
                        } else {
                            color = this.parent.__palette[bar.properties.Type.replace('_OoS', '')];
                        }
                    }
                }
                return color
            })
        if (transition && this.parent.__configuration.display.secondary[0].formatting.bars) {
            core.frame.figures
                .attr('x', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar && bar.figure && bar.figure.attributes.x) {
                        return bar.figure.attributes.x.value
                    } else {
                        return bar.x
                    }
                })
                .attr('y', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar && bar.figure && bar.figure.attributes.y) {
                        return bar.figure.attributes.y.value
                    } else {
                        return bar.y
                    }
                })
            core.frame.figures.attr('fill-opacity', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if ((core.isComparison && this.parent.__configuration.comparison.side === 'overlay') || !this.parent.__configuration.display.secondary[0].formatting.bars) {
                            return 0
                        }
                        return .25
                    }
                })
                .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                .attr('x', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        return bar.x
                    }
                })
                .attr('y', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if (!this.parent.__configuration.axis.reverse) {
                            let radius = !this.parent.__configuration.axis.reverse ? 10 : core.bars.get(d.unique).height / 6;
                            let height;
                            if (d.Type === 'net' || d.Type === 'net_OoS') {
                                if (d[this.parent.__configuration?.gauge || this.parent.__configuration.value]) {
                                    height = bar.height
                                } else {
                                    height = 0
                                }
                            } else {
                                let max = [...core.data, ...core.parents]
                                    .filter(r => r.Type !== 'net' && r.Type !== 'net_OoS')
                                    .filter(element => element.depth === d.depth)
                                    .map(r => r[this.parent.__configuration?.gauge || this.parent.__configuration.value])
                                max = max.map(e => Math.abs(e))
                                max = Math.max(...max)
                                let percent = (Math.abs(d[this.parent.__configuration?.gauge || this.parent.__configuration.value]) / max)
                                height = bar.height * percent
                            }
                            if (height < radius) height = radius
                            return bar.y + (bar.height / 2) - height
                        } else {
                            return bar.y - (bar.height / 2)// + bar.height
                        }
                    }
                })
                .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                .attr(!this.parent.__configuration.axis.reverse ? 'height' : 'width', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        let max = [...core.data, ...core.parents]
                            .filter(r => r.Type !== 'net' && r.Type !== 'net_OoS')
                            .filter(element => element.depth === d.depth)
                            .map(r => r[this.parent.__configuration?.gauge || this.parent.__configuration.value])
                        max = max.map(e => Math.abs(e))
                        max = Math.max(...max)
                        if (!this.parent.__configuration.axis.reverse) {
                            if (d.Type === 'net' || d.Type === 'net_OoS') {
                                if (d[this.parent.__configuration?.gauge || this.parent.__configuration.value]) {
                                    return bar.height
                                } else {
                                    return 0
                                }
                            }
                            let percent = (Math.abs(d[this.parent.__configuration?.gauge || this.parent.__configuration.value]) / max)
                            let height = bar.height * percent
                            let radius = !this.parent.__configuration.axis.reverse ? 10 : core.bars.get(d.unique).height / 6;
                            if (height < radius) height = radius
                            return height
                        } else {
                            if (d.Type === 'net' || d.Type === 'net_OoS') {
                                if (d[this.parent.__configuration?.gauge || this.parent.__configuration.value]) {
                                    return bar.width
                                } else {
                                    return 0
                                }
                            }
                            let percent = (Math.abs(d[this.parent.__configuration?.gauge || this.parent.__configuration.value]) / max)
                            let width = bar.width * percent
                            let radius = !this.parent.__configuration.axis.reverse ? 10 : core.bars.get(d.unique).height / 6;
                            if (width < radius) width = radius
                            return width
                        }
                    }
                })
        } else {
            core.frame.figures
                .attr('x', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        return bar.x
                    }
                })
                .attr('y', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if (!this.parent.__configuration.axis.reverse) {
                            let radius = !this.parent.__configuration.axis.reverse ? 10 : core.bars.get(d.unique).height / 6;
                            let height;
                            if (d.Type === 'net' || d.Type === 'net_OoS') {
                                if (d[this.parent.__configuration?.gauge || this.parent.__configuration.value]) {
                                    height = bar.height
                                } else {
                                    height = 0
                                }
                            } else {
                                let max = [...core.data, ...core.parents]
                                    .filter(r => r.Type !== 'net' && r.Type !== 'net_OoS')
                                    .filter(element => element.depth === d.depth)
                                    .map(r => r[this.parent.__configuration?.gauge || this.parent.__configuration.value])
                                max = max.map(e => Math.abs(e))
                                max = Math.max(...max)
                                let percent = (Math.abs(d[this.parent.__configuration?.gauge || this.parent.__configuration.value]) / max)
                                height = bar.height * percent
                            }
                            if (height < radius) height = radius
                            return bar.y + (bar.height / 2) - height
                        } else {
                            return bar.y - (bar.height / 2)// + bar.height
                        }
                    }
                })
                .attr('fill-opacity', 0)
                .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                .attr(!this.parent.__configuration.axis.reverse ? 'height' : 'width', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        let max = [...core.data, ...core.parents]
                            .filter(r => r.Type !== 'net' && r.Type !== 'net_OoS')
                            .filter(element => element.depth === d.depth)
                            .map(r => r[this.parent.__configuration?.gauge || this.parent.__configuration.value])
                        max = max.map(e => Math.abs(e))
                        max = Math.max(...max)
                        if (!this.parent.__configuration.axis.reverse) {
                            if (d.Type === 'net' || d.Type === 'net_OoS') {
                                if (d[this.parent.__configuration?.gauge || this.parent.__configuration.value]) {
                                    return bar.height
                                } else {
                                    return 0
                                }
                            }
                            let percent = (Math.abs(d[this.parent.__configuration?.gauge || this.parent.__configuration.value]) / max)
                            let height = bar.height * percent
                            let radius = !this.parent.__configuration.axis.reverse ? 10 : core.bars.get(d.unique).height / 6;
                            if (height < radius) height = radius
                            return height
                        } else {
                            if (d.Type === 'net' || d.Type === 'net_OoS') {
                                if (d[this.parent.__configuration?.gauge || this.parent.__configuration.value]) {
                                    return bar.width
                                } else {
                                    return 0
                                }
                            }
                            let percent = (Math.abs(d[this.parent.__configuration?.gauge || this.parent.__configuration.value]) / max)
                            let width = bar.width * percent
                            let radius = !this.parent.__configuration.axis.reverse ? 10 : core.bars.get(d.unique).height / 6;
                            if (width < radius) width = radius
                            return width
                        }
                    }
                })
        }
    }

    addBarsPosition(core, transition) {
        core.frame.bar
            .attr('class', d => 'datama-waterfall-bar ' + (core.bars.uniqueExist(d.unique) || core.bars.parentExist(d.unique) ? '' : 'no-click') + ' ' + (d.disabled ? 'no-data' : ''))
            .attr('id', d => d.unique)
            .attr('data-type', d => d.Type)
            .attr('fill', d => {
                let color = 'transparent';
                let bar = core.bars.get(d.unique);
                if (bar) {
                    if (bar.properties.disabled ||bar.properties.Value === 0) {
                        color = 'black';
                    } else {
                        if (d.Type === 'net') {
                            if (d.Pts_gap === 0 || !d.Pts_gap) {
                                color = 'black'
                            } else if (d.Pts_gap > 0) {
                                color = this.parent.__palette.in
                            } else {
                                color = this.parent.__palette.out
                            }
                        } else {
                            if (bar.properties.Pts_gap === 0 || !bar.properties.Pts_gap) {
                                color = 'rgba(0,0,0,0.5)'
                            } else {
                                color = this.parent.__palette[bar.properties.Type.replace('_OoS', '')];
                            }
                        }
                    }
                }
                return color
            })
            .attr('fill-opacity', d => {
                let opacity = 0;
                let bar = core.bars.get(d.unique);
                if (bar) {
                    opacity = 0
                }
                return opacity
            })
            .attr('stroke', d => {
                let stroke = 'transparent';
                let bar = core.bars.get(d.unique);
                if (bar) {
                    if (d.Type === 'net') {
                        if (d.Pts_gap === 0 || !d.Pts_gap) {
                            stroke = 'black'
                        } else if (d.Pts_gap > 0) {
                            stroke = this.parent.__palette.in
                        } else {
                            stroke = this.parent.__palette.out
                        }
                    } else {
                        if (bar.properties.Pts_gap === 0 || !bar.properties.Pts_gap || bar.properties.disabled) {
                            stroke = 'rgba(0,0,0,0.5)'
                        } else {
                            stroke = this.parent.__palette[bar.properties.Type.replace('_OoS', '')];
                        }
                    }
                } else {
                    if (this.parent.__configuration.debug) {
                        stroke = 'rgba(0,0,0,0.5)'
                    }
                }
                return stroke;
            })
            .attr('stroke-width', 1)
            .attr('stroke-dasharray', null)
            .attr("ry", d => core.bars.get(d.unique) ? (!this.parent.__configuration.axis.reverse ? 10 : core.bars.get(d.unique).height / 6) : 0)
        if (transition) {
            core.frame.bar
                .attr('y', (d) => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        let parentUnique = Object.keys(core.bars.bars).filter(k => {
                            let bar = core.bars.get(k)
                            return bar.children && bar.children.map(c => c.properties.unique).indexOf(d.unique) !== -1
                        })[0]
                        if (parentUnique && bar.el && bar.el.attributes.opacity && bar.el.attributes.opacity.value === '0') {
                            let parent = core.bars.get(parentUnique);
                            return parseFloat(parent.el.attributes.y.value) + (parseFloat(parent.el.attributes.height.value) / 2)
                        } else {
                            if (bar.el && bar.el.attributes.y) {
                                return bar.el.attributes.y.value;
                            }
                        }
                    }
                    return this.parent.__configuration.baseWidth  / 2;
                })
                .attr('x', (d) => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        let parentUnique = Object.keys(core.bars.bars).filter(k => {
                            let bar = core.bars.get(k)
                            return bar.children && bar.children.map(c => c.properties.unique).indexOf(d.unique) !== -1
                        })[0]
                        if (parentUnique && bar.el && bar.el.attributes.opacity && bar.el.attributes.opacity.value === '0') {
                            let parent = core.bars.get(parentUnique);
                            return parseFloat(parent.el.attributes.x.value) + parseFloat(parent.el.attributes.width.value)
                        } else {
                            if (bar.el && bar.el.attributes.x) {
                                return bar.el.attributes.x.value;
                            }
                        }
                    }
                    return this.parent.__configuration.baseWidth  / 2;
                })
                .attr('stroke-opacity', d => {
                    let opacity;
                    let bar = core.bars.get(d.unique);
                    if (bar && bar.el && bar.el.attributes.opacity) {
                        opacity = bar.el.attributes.opacity.value
                    } else {
                        opacity = 0
                    }
                    return opacity
                })
            core.frame.bar
                .attr('transform', d => {
                    if (core.bars.get(d.unique)) {
                        return 'translate(0, ' + ((core.scale.y.part / 2) * -1) + ')';
                    } else {
                        return 'translate(0, -10)';
                    }
                })
                .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                .attr('width', (d) => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        return bar.width;
                    } else {
                        return 0
                    }
                })
                .attr('height', (d) => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        return bar.height;
                    } else {
                        return 0
                    }
                })
                .attr('transform', d => {
                    if (core.bars.get(d.unique)) {
                        return 'translate(0, ' + ((core.scale.y.part / 2) * -1) + ')';
                    } else {
                        return 'translate(0, -10)';
                    }
                })
                .attr('y', (d) => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        return bar.y
                    }
                    return this.parent.__configuration.baseHeight  / 2;
                })
                .attr('x', (d) => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        return bar.x
                    }
                    return this.parent.__configuration.baseWidth  / 2;
                })
                .transition().duration(this.parent.__configuration.bars.transition / 4).ease(core.d3.easeExp)
                .attr('stroke-opacity', d => {
                    let opacity;
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        opacity = 1
                    } else {
                        opacity = 0
                    }
                    return opacity
                })
                .attr('opacity', d => {
                    let opacity;
                    if (core.bars.get(d.unique) && (this.parent.__configuration.comparison.side !== 'overlay' || !core.isComparison)) {
                        opacity = d.Type === 'net_OoS' ? .5 : 1;
                    } else {
                        opacity = 0
                    }
                    return opacity
                })
        } else {
            core.frame.bar
                .attr('opacity', d => {
                    let opacity;
                    if (core.bars.get(d.unique) && (this.parent.__configuration.comparison.side !== 'overlay' || !core.isComparison)) {
                        opacity = d.Type === 'net_OoS' ? .5 : 1;
                    } else {
                        opacity = 0
                    }
                    return opacity
                })
                .attr('stroke-opacity', d => {
                    let opacity;
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        opacity = bar.el.attributes.opacity.value
                    } else {
                        opacity = 0
                    }
                    return opacity
                })
                .attr('transform', d => {
                    if (core.bars.get(d.unique)) {
                        return 'translate(0, ' + ((core.scale.y.part / 2) * -1) + ')';
                    } else {
                        return 'translate(0, -10)';
                    }
                })
                .attr('x', (d) => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        return bar.x
                    }
                    return 0;
                })
                .attr('y', (d) => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        return bar.y
                    }
                    return this.parent.__configuration.baseHeight  / 2;
                })
                .attr('width', (d) => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        return bar.width;
                    } else {
                        return 0
                    }
                })
                .attr('height', (d) => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        return bar.height;
                    } else {
                        return 0
                    }
                })
                .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                .attr('stroke-opacity', 1)
        }
    }

    /**
     * Top Label : Middle right
     * Tick : Middle left
     * Label : middle right + 1 line height // If no space hide it
     * @param core
     * @param transition
     */
    addAnnotationsPosition(core, transition) {
        core.frame.annotations
            .attr('data-hidden', d => {
                let bar = core.bars.get(d.unique);
                if (bar) {
                    let fontSize = this.parent.__configuration.fonts.size;
                    if (bar.el && bar.el.attributes.opacity && bar.el.attributes.opacity.value !== '0') {
                        if (!this.parent.__configuration.axis.reverse) {
                            let y;
                            let paddingTop = 0;
                            let barTextSize = (fontSize * 2 * 1.5) * 1.25
                            let barAnnotationTopSize = (fontSize * 1.5 * 1.5) * 1.25
                            let numberLineHeight = barTextSize + barAnnotationTopSize
                            let maxTop = (bar.y - (bar.height / 2)) + paddingTop + numberLineHeight + 10
                            if (d.type === 'label') {
                                y = (bar.y + (bar.height / 2) - (fontSize * 1.25)) - (d.y_lag ? (d.y_lag > 0 ? d.y_lag * 1.5 : (Math.max(...core.annotations.filter(a => a.unique === d.unique && a.y_lag).map(a => a.y_lag)) * 1.5) + Math.abs(d.y_lag) * 1.5) : 0)
                                if (y < maxTop) {
                                    return 'true'
                                }
                            }
                        } else {
                            let linesRequiredHeight = (((fontSize * 1.5) + 5) + ((fontSize * 1.25) + 5));
                            if (bar.height < linesRequiredHeight && d.type === 'label') {
                                return 'true'
                            }
                        }
                    }
                    return 'false'
                }
                return 'true'
            })
            .attr('font-size', d => d.font.size)
            .attr('font-family', this.parent.__configuration.fonts.family + ', Arial, sans-serif')
            .attr('text-anchor', d => {
                let bar = core.bars.get(d.unique);
                if (bar) {
                    if (this.parent.__configuration.axis.reverse) {
                        return 'end'
                    } else {
                        return 'middle'
                    }
                }
                return 'start'
            })
            .attr('font-weight', d => d.type === 'top' ? 400 : 300)
            .attr('fill', d => {
                let color = 'transparent';
                let bar = core.bars.get(d.unique);
                if (bar && (!core.isComparison || this.parent.__configuration.comparison.side !== 'overlay')) {
                    if (d.type === 'label') {
                        if (bar.properties.disabled ||this.parent.__configuration.display.secondary.map(r => r.column).indexOf(d.column) === -1 || (!this.parent.__configuration.display.secondary[this.parent.__configuration.display.secondary.map(r => r.column).indexOf(d.column)].formatting.colors)) {
                            color = 'black'
                        } else {
                            if (bar.properties[this.parent.__configuration.value] === 0) {
                                color = 'black';
                            } else {
                                if (bar.properties.Type === 'in') {
                                    color = this.parent.__palette.in;
                                } else if (bar.properties.Type === 'out') {
                                    color = this.parent.__palette.out;
                                } else {
                                    if (bar.properties.Pts_gap < 0) {
                                        color = this.parent.__palette.out;
                                    } else if (bar.properties.Pts_gap > 0) {
                                        color = this.parent.__palette.in;
                                    } else {
                                        color = this.parent.__palette.net
                                    }
                                }
                            }
                        }
                    } else {
                        if (bar.properties.disabled ||bar.properties.Value === 0 || !this.parent.__configuration.display.secondary[0].formatting.colors) {
                            color = 'black';
                        } else {
                            if (bar.properties.Type === 'net') {
                                if (bar.properties.Pts_gap === 0 || !bar.properties.Pts_gap) {
                                    color = 'black'
                                } else if (bar.properties.Pts_gap > 0) {
                                    color = this.parent.__palette.in
                                } else {
                                    color = this.parent.__palette.out
                                }
                            } else {
                                color = this.parent.__palette[bar.properties.Type.replace('_OoS', '')];
                            }
                        }
                    }
                }
                return color;
            })
            .attr('alignment-baseline', d => {
                if (this.parent.__configuration.axis.reverse) {
                    if (d.type === 'label') {
                        return 'baseline'
                    }
                }
                return 'hanging'
            })
            .text(d => d.text)
        if (transition) {
            core.frame.annotations
                .attr('x', d => {
                    let x = this.parent.__configuration.baseWidth  / 2;
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if (d.type === 'label' || d.type === 'top') {
                            if (this.parent.__configuration.axis.reverse) {
                                x = parseFloat(bar.el.attributes?.x?.value || 0) + parseFloat(bar.el.attributes?.width?.value || 0) - 10;
                            } else {
                                x = parseFloat(bar.el.attributes?.x?.value || 0) + (parseFloat(bar.el.attributes?.width?.value || 0) / 2)
                            }
                        }
                    }
                    return x;
                })
                .attr('y', d => {
                    let fontSize = this.parent.__configuration.fonts.size;
                    let bar = core.bars.get(d.unique);
                    let padding = (d.font.size / 2)
                    if (this.parent.__configuration.axis.reverse) {
                        if (d.type === 'top') {
                            if (bar.height - this.parent.__configuration.bars.depthPadding < d.font.size) {
                                padding = parseInt((parseFloat(bar.el.attributes?.height?.value || 0) - this.parent.__configuration.bars.depthPadding) / 2);
                            }
                            return parseFloat(bar.el.attributes?.y?.value || 0) - (parseFloat(bar.el.attributes?.height?.value || 0) / 2) + padding
                        } else {
                            return parseFloat(bar.el.attributes?.y?.value || 0) + (parseFloat(bar.el.attributes?.height?.value || 0) / 2) - ((fontSize * 1.25) * (1.5 + (d?.index || 0))) + padding
                        }
                    } else {
                        let availableSpace = 0;
                        if (core.scale.y.numberOfLabelDisplayed > 0 && core.scale.y.numberOfLabelDisplayed < 3) {
                            availableSpace = core.scale.y.numberOfLabelDisplayed % parseInt(core.scale.y.numberOfLabelDisplayed >= 1 ? core.scale.y.numberOfLabelDisplayed : 1)
                        } else if (core.scale.y.numberOfLabelDisplayed > 3) {
                            availableSpace = core.scale.y.numberOfLabelDisplayed - 3
                        }
                        let spaceToDispatch = (availableSpace * fontSize / 2) / 2
                        if (d.type === 'top') {
                            return parseFloat(bar.el.attributes?.y?.value || 0) - (parseFloat(bar.el.attributes?.height?.value || 0) / 2) + ((fontSize * 1.5) * 1.5) + padding + spaceToDispatch
                        } else {
                            return parseFloat(bar.el.attributes?.y?.value || 0) + (parseFloat(bar.el.attributes?.height?.value || 0) / 2) - (fontSize * (1.5 + (d?.index || 0))) + padding - spaceToDispatch
                        }
                    }
                    return this.parent.__configuration.baseWidth  / 2;
                })
                .style('fill-opacity', d => {
                    let bar = core.bars.get(d.unique);
                    let padding = (this.parent.__configuration.bars.depthPadding / 2)
                    if (bar) {
                        let hoverOnly
                        if (d.type === 'label') {
                            if (Array.isArray(d.column)) {
                                hoverOnly = this.parent.__configuration.display.secondary.filter(s => d.column.indexOf(s.column) !== -1).some(s => s.hoverOnly)
                            } else {
                                if (this.parent.__configuration.display.secondary.map(s => s.column).indexOf(d.column) !== -1) {
                                    hoverOnly = this.parent.__configuration.display.secondary[this.parent.__configuration.display.secondary.map(s => s.column).indexOf(d.column)].hoverOnly
                                }
                            }
                        } else {
                            hoverOnly = this.parent.__configuration.display.secondary[0].hoverOnly
                        }
                        let fontSize = this.parent.__configuration.fonts.size;
                        if (!this.parent.__configuration.axis.reverse) {
                            let availableSpace = 0;
                            if (core.scale.y.numberOfLabelDisplayed > 0 && core.scale.y.numberOfLabelDisplayed < 3) {
                                availableSpace = core.scale.y.numberOfLabelDisplayed % parseInt(core.scale.y.numberOfLabelDisplayed >= 1 ? core.scale.y.numberOfLabelDisplayed : 1)
                            } else if (core.scale.y.numberOfLabelDisplayed > 3) {
                                availableSpace = (core.scale.y.numberOfLabelDisplayed || 0) - 3
                            }
                            let spaceToDispatch = (availableSpace * fontSize / 2) / 2
                            let y;
                            let maxTop = bar.y - (bar.height / 2) + ((fontSize * 1.5) * 2.75) + padding + spaceToDispatch
                            if (d.type === 'label') {
                                y = (bar.y + (bar.height / 2)) - (d.font.size * (this.parent.__configuration.display.secondary.length - (d.index + 1)))
                                if (hoverOnly || y < maxTop) {
                                    return 0
                                } else {
                                    return 1
                                }
                            } else {
                                return 1
                            }
                        } else {
                            if (!hoverOnly) {
                                if (d.type === 'label') {
                                    if (bar.height - (d.font.size + this.parent.__configuration.bars.depthPadding) > d.font.size) {
                                        return 1
                                    }
                                } else {
                                    return 1
                                }
                            }
                        }
                        return 0;
                    }
                    return 0
                })
                .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                .attr('x', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if (d.type === 'label' || d.type === 'top') {
                            if (this.parent.__configuration.axis.reverse) {
                                return bar.x + bar.width - (this.parent.__configuration.bars.depthPadding / 2);
                            } else {
                                return bar.x + (bar.width / 2)
                            }
                        }
                    }
                    return this.parent.__configuration.baseWidth  / 2;
                })
                .attr('y', d => {
                    let fontSize = this.parent.__configuration.fonts.size;
                    let bar = core.bars.get(d.unique);
                    let padding = (this.parent.__configuration.bars.depthPadding / 2)
                    if (this.parent.__configuration.axis.reverse) {
                        if (bar.height - this.parent.__configuration.bars.depthPadding < d.font.size) {
                            padding = parseInt((bar.height - this.parent.__configuration.bars.depthPadding) / 2);
                        }
                        if (d.type === 'top') {
                            return bar.y - (bar.height / 2) + padding
                        } else {
                            return bar.y + (bar.height / 2) - padding
                        }
                    } else {
                        let availableSpace = 0;
                        if (core.scale.y.numberOfLabelDisplayed > 0 && core.scale.y.numberOfLabelDisplayed < 3) {
                            availableSpace = core.scale.y.numberOfLabelDisplayed % parseInt(core.scale.y.numberOfLabelDisplayed >= 1 ? core.scale.y.numberOfLabelDisplayed : 1)
                        } else if (core.scale.y.numberOfLabelDisplayed > 3) {
                            availableSpace = core.scale.y.numberOfLabelDisplayed - 3
                        }
                        let spaceToDispatch = (availableSpace * fontSize / 2) / 2
                        let result;
                        if (d.type === 'top') {
                            result = bar.y - (bar.height / 2) + ((fontSize * 1.5) * 1.5) + padding + spaceToDispatch
                        } else {
                            result = bar.y + (bar.height / 2) - (fontSize * (1.5 + (d?.index || 0))) + padding - spaceToDispatch
                        }
                        return result;
                    }
                })
                .attr('transform', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        return 'translate(0, 0)';
                    }
                    return 'translate(0, -10)'
                })
                .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                .style('fill-opacity', d => {
                    let bar = core.bars.get(d.unique);
                    let padding = (this.parent.__configuration.bars.depthPadding / 2)
                    if (bar) {
                        let hoverOnly
                        if (d.type === 'label') {
                            if (Array.isArray(d.column)) {
                                hoverOnly = this.parent.__configuration.display.secondary.filter(s => d.column.indexOf(s.column) !== -1).some(s => s.hoverOnly)
                            } else {
                                if (this.parent.__configuration.display.secondary.map(s => s.column).indexOf(d.column) !== -1) {
                                    hoverOnly = this.parent.__configuration.display.secondary[this.parent.__configuration.display.secondary.map(s => s.column).indexOf(d.column)].hoverOnly
                                }
                            }
                        } else {
                            hoverOnly = this.parent.__configuration.display.secondary[0].hoverOnly
                        }
                        let fontSize = this.parent.__configuration.fonts.size;
                        if (!this.parent.__configuration.axis.reverse) {
                            let availableSpace = 0;
                            if (core.scale.y.numberOfLabelDisplayed > 0 && core.scale.y.numberOfLabelDisplayed < 3) {
                                availableSpace = core.scale.y.numberOfLabelDisplayed % parseInt(core.scale.y.numberOfLabelDisplayed >= 1 ? core.scale.y.numberOfLabelDisplayed : 1)
                            } else if (core.scale.y.numberOfLabelDisplayed > 3) {
                                availableSpace = (core.scale.y.numberOfLabelDisplayed || 0) - 3
                            }
                            let spaceToDispatch = (availableSpace * fontSize / 2) / 2
                            let y;
                            let maxTop = bar.y - (bar.height / 2) + ((fontSize * 1.5) * 2.75) + padding + spaceToDispatch
                            if (d.type === 'label') {
                                y = (bar.y + (bar.height / 2)) - (d.font.size * (this.parent.__configuration.display.secondary.length - (d.index + 1)))
                                if (hoverOnly || y < maxTop) {
                                    return 0
                                } else {
                                    return 1
                                }
                            } else {
                                return 1
                            }
                        } else {
                            if (!hoverOnly) {
                                if (d.type === 'label') {
                                    if (bar.height - (d.font.size + this.parent.__configuration.bars.depthPadding) > d.font.size) {
                                        return 1
                                    }
                                } else {
                                    return 1
                                }
                            }
                        }
                        return 0;
                    }
                    return 0
                })
        } else {
            core.frame.annotations
                .style('fill-opacity', 0)
                .attr('x', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if (d.type === 'label' || d.type === 'top') {
                            if (this.parent.__configuration.axis.reverse) {
                                return bar.x + bar.width - 10;
                            }
                            return bar.x + (bar.width / 2)
                        }
                    }
                    return this.parent.__configuration.baseWidth  / 2;
                })
                .attr('y', d => {
                    let fontSize = this.parent.__configuration.fonts.size;
                    let bar = core.bars.get(d.unique);
                    let padding = (this.parent.__configuration.bars.depthPadding / 2)
                    if (this.parent.__configuration.axis.reverse) {
                        if (bar.height - this.parent.__configuration.bars.depthPadding < d.font.size) {
                            padding = parseInt((bar.height - this.parent.__configuration.bars.depthPadding) / 2);
                        }
                        if (d.type === 'top') {
                            return bar.y - (bar.height / 2) + padding
                        } else {
                            return bar.y + (bar.height / 2) - padding
                        }
                    } else {
                        let availableSpace = 0;
                        if (core.scale.y.numberOfLabelDisplayed > 0 && core.scale.y.numberOfLabelDisplayed < 3) {
                            availableSpace = core.scale.y.numberOfLabelDisplayed % parseInt(core.scale.y.numberOfLabelDisplayed >= 1 ? core.scale.y.numberOfLabelDisplayed : 1)
                        } else if (core.scale.y.numberOfLabelDisplayed > 3) {
                            availableSpace = core.scale.y.numberOfLabelDisplayed - 3
                        }
                        let spaceToDispatch = (availableSpace * fontSize / 2) / 2
                        let result;
                        if (d.type === 'top') {
                            result = bar.y - (bar.height / 2) + ((fontSize * 1.5) * 1.5) + padding + spaceToDispatch
                        } else {
                            result = bar.y + (bar.height / 2) - (fontSize * (1.5 + (d?.index || 0))) + padding - spaceToDispatch
                        }
                        return result;
                    }
                })
                .attr('transform', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        return 'translate(0, 0)';
                    }
                    return 'translate(0, -10)'
                })
        }
    }

    addLinksPosition(core, transition) {
        let links = (!this.parent.__configuration.axis.reverse ? core.d3.linkVertical() : core.d3.linkHorizontal())
            .x(d => d.x)
            .y(d => d.y)
        core.frame.links
            .attr('class', d => 'datama-waterfall-bar-links ' + (core.data.map(r => r.unique).indexOf(d.unique) !== -1 && !d.disabled ? '' : 'no-click'))
            .attr('fill', 'none')
            .attr('stroke', d => {
                if (this.parent.__configuration.bars.links && core.bars.get(d.unique) && core.bars.get(d.unique).properties.parent && (this.parent.__configuration.comparison.side !== 'overlay' || !core.isComparison)) {
                    return "black"
                }
                return  "transparent"
            })
            .attr('stroke-width', 1)
            .attr('transform', d => {
                if (core.bars.uniqueExist(d.unique)) {
                    return 'translate(0, ' + ((core.scale.y.part / 2) * -1) + ')';
                }
                return 'translate(0, -10)'
            })
            .attr('stroke-opacity', 1)
        if (transition) {
            core.frame.links
                .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                .attr('d', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar && bar.properties.parent) {
                        let parent = core.bars.get(bar.properties.parent.unique);
                        if (parent) {
                            let parent = core.bars.get(bar.properties.parent.unique);
                            let x2 = !this.parent.__configuration.axis.reverse ? parent.x + (parent.width / 2) : parent.x + parent.width;
                            let y2 = !this.parent.__configuration.axis.reverse ? parent.y + parent.height : parent.y + (parent.height / 2);
                            let x1 = x2;
                            let y1 = y2;
                            if (bar.el && bar.el.attributes.opacity && bar.el.attributes.opacity.value !== '0') {
                                x1 = !this.parent.__configuration.axis.reverse ? bar.x + (bar.width / 2) : bar.x;
                                y1 = !this.parent.__configuration.axis.reverse ? bar.y : bar.y + (bar.height / 2);
                                return links({source: {x: x1, y: y1}, target :{x: x2, y: y2}})
                            }
                            return links({source: {x: (x1 + x2) / 2, y: (y1 + y2) / 2}, target :{x: x2, y: y2}})
                        }
                    }
                    return null;
                })
                .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                .attr('d', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar && bar.properties.parent) {
                        let parent = core.bars.get(bar.properties.parent.unique);
                        if (parent) {
                            let parent = core.bars.get(bar.properties.parent.unique);
                            let x1 = !this.parent.__configuration.axis.reverse ? bar.x + (bar.width / 2) : bar.x;
                            let y1 = !this.parent.__configuration.axis.reverse ? bar.y : bar.y + (bar.height / 2);
                            let x2 = !this.parent.__configuration.axis.reverse ? parent.x + (parent.width / 2) : parent.x + parent.width;
                            let y2 = !this.parent.__configuration.axis.reverse ? parent.y + parent.height : parent.y + (parent.height / 2);
                            return links({source: {x: x1, y: y1}, target :{x: x2, y: y2}})
                        }
                    }
                    return null;
                })

        } else {
            core.frame.links
                .attr('d', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar && bar.properties.parent) {
                        let parent = core.bars.get(bar.properties.parent.unique);
                        if (parent) {
                            let parent = core.bars.get(bar.properties.parent.unique);
                            let x2 = !this.parent.__configuration.axis.reverse ? parent.x + (parent.width / 2) : parent.x + parent.width;
                            let y2 = !this.parent.__configuration.axis.reverse ? parent.y + parent.height : parent.y + (parent.height / 2);
                            return links({source: {x: x2, y: y2}, target :{x: x2, y: y2}})
                        }
                    }
                    return null;
                })
            core.frame.links
                .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                .attr('d', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar && bar.properties.parent) {
                        let parent = core.bars.get(bar.properties.parent.unique);
                        if (parent) {
                            let parent = core.bars.get(bar.properties.parent.unique);
                            let x1 = !this.parent.__configuration.axis.reverse ? bar.x + (bar.width / 2) : bar.x;
                            let y1 = !this.parent.__configuration.axis.reverse ? bar.y : bar.y + (bar.height / 2);
                            let x2 = !this.parent.__configuration.axis.reverse ? parent.x + (parent.width / 2) : parent.x + parent.width;
                            let y2 = !this.parent.__configuration.axis.reverse ? parent.y + parent.height : parent.y + (parent.height / 2);
                            return links({source: {x: (x1 + x2) / 2, y: (y1 + y2) / 2}, target :{x: x2, y: y2}})
                        }
                    }
                    return null;
                })
                .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                .attr('d', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar && bar.properties.parent) {
                        let parent = core.bars.get(bar.properties.parent.unique);
                        if (parent) {
                            let parent = core.bars.get(bar.properties.parent.unique);
                            let x1 = !this.parent.__configuration.axis.reverse ? bar.x + (bar.width / 2) : bar.x;
                            let y1 = !this.parent.__configuration.axis.reverse ? bar.y : bar.y + (bar.height / 2);
                            let x2 = !this.parent.__configuration.axis.reverse ? parent.x + (parent.width / 2) : parent.x + parent.width;
                            let y2 = !this.parent.__configuration.axis.reverse ? parent.y + parent.height : parent.y + (parent.height / 2);
                            return links({source: {x: x1, y: y1}, target :{x: x2, y: y2}})
                        }
                    }
                    return null;
                })

        }
    }

    addTextsPosition(core, transition) {
        core.frame.texts
            .attr('opacity', 0)
            .attr('font-size', d => d.font.size)
            .attr('alignment-baseline', 'hanging')
            .attr('font-family', this.parent.__configuration.fonts.family + ', Arial, sans-serif')
            .attr('text-anchor', this.parent.__configuration.axis.reverse ? 'start' : 'middle')
            .attr('fill', 'black')
            .text(r => {
                let text = r.text
                if (this.parent.__configuration.display.segment_complement === 'Variation %' && r?.Variation_percent) {
                    text += ' (' + parseFloat(r?.Variation_percent).format({percent: true}) + ')'
                } else if (this.parent.__configuration.display.segment_complement === 'Variation relative to avg' && r?.Variation_avg) {
                    text += ' (x' + parseFloat(r?.Variation_avg) + ')'
                }
                return text;
            })
        if (transition) {
            core.frame.texts
                .attr('x', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        if (bar.el && bar.el.attributes.opacity && bar.el.attributes.opacity.value !== '0') {
                            let leftOfCard = parseFloat(bar.el.attributes.x.value)
                            if (this.parent.__configuration.axis.reverse) {
                                return leftOfCard + (this.parent.__configuration.bars.depthPadding / 2)
                            }
                            return leftOfCard + (parseFloat(bar.el.attributes.width.value) / 2)
                        }
                    }
                    return this.parent.__configuration.baseWidth  / 2;
                })
                .attr('y', d => {
                    let bar = core.bars.get(d.unique);
                    let lag = d?.lags?.y || 0
                    let padding = (d.font.size / 2)
                    if (bar) {
                        if (bar.el && bar.el.attributes.opacity && bar.el.attributes.opacity.value !== '0') {
                            if (this.parent.__configuration.axis.reverse) {
                                if (parseFloat(bar.el.attributes.height.value) - this.parent.__configuration.bars.depthPadding < d.font.size) {
                                    padding = parseInt((bar.height - this.parent.__configuration.bars.depthPadding) / 2);
                                }
                                return parseFloat(bar.el.attributes.y.value) - (parseFloat(bar.el.attributes.height.value) / 2) + padding + lag
                            } else {
                                return parseFloat(bar.el.attributes.y.value) - (parseFloat(bar.el.attributes.height.value) / 2) + padding + lag
                            }
                        }
                    }
                    return this.parent.__configuration.baseWidth  / 2 + lag;
                })
                .attr('opacity', d => {
                    let opacity;
                    let bar = core.bars.get(d.unique);
                    if (bar && bar.el && bar.el.attributes.opacity) {
                        opacity = parseFloat(bar.el.attributes.opacity.value)
                    } else {
                        opacity = 0
                    }
                    return opacity
                })
                .attr('transform', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        return 'translate(0, 0)'
                    }
                    return 'translate(0, -10)'
                })
                .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                .attr('x', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        let leftOfCard = bar.x
                        if (this.parent.__configuration.axis.reverse) {
                            return leftOfCard + (this.parent.__configuration.bars.depthPadding / 2)
                        }
                        return leftOfCard + (bar.width / 2)
                    }
                    return this.parent.__configuration.baseWidth / 2;
                })
                .attr('y', d => {
                    let bar = core.bars.get(d.unique);
                    let lag = d?.lags?.y || 0
                    let padding = (d.font.size / 2)
                    let fontSize = this.parent.__configuration.fonts.size;
                    if (bar) {
                        if (this.parent.__configuration.axis.reverse && bar.height - this.parent.__configuration.bars.depthPadding < d.font.size) {
                            padding = parseInt((bar.height - this.parent.__configuration.bars.depthPadding) / 2);
                        }
                        let availableSpace = 0;
                        if (core.scale.y.numberOfLabelDisplayed > 0 && core.scale.y.numberOfLabelDisplayed < 3) {
                            availableSpace = core.scale.y.numberOfLabelDisplayed % parseInt(core.scale.y.numberOfLabelDisplayed >= 1 ? core.scale.y.numberOfLabelDisplayed : 1)
                        } else if (core.scale.y.numberOfLabelDisplayed > 3) {
                            availableSpace = core.scale.y.numberOfLabelDisplayed - 3
                        }
                        let spaceToDispatch = (availableSpace * fontSize / 2) / 2
                        // Top of card + 1/2 line height + padding top + lag (multiline)
                        return (bar.y - (bar.height / 2)) + padding + lag + spaceToDispatch
                    }
                    return this.parent.__configuration.baseWidth  / 2 + lag;
                })
                .transition().duration(this.parent.__configuration.bars.transition / 2).ease(core.d3.easeExp)
                .attr('opacity', d => core.bars.get(d.unique) && (this.parent.__configuration.comparison.side !== 'overlay' || !core.isComparison) ? 1 : 0)
        } else {
            core.frame.texts
                .attr('transform', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        return 'translate(0, 0)'
                    }
                    return 'translate(0, -10)'
                })
                .attr('opacity', 0)
                .attr('x', d => {
                    let bar = core.bars.get(d.unique);
                    if (bar) {
                        let leftOfCard = bar.x
                        if (this.parent.__configuration.axis.reverse) {
                            return leftOfCard + (this.parent.__configuration.bars.depthPadding / 2)
                        }
                        return leftOfCard + (bar.width / 2)
                    }
                    return this.parent.__configuration.baseWidth  / 2;
                })
                .attr('y', d => {
                    let bar = core.bars.get(d.unique);
                    let lag = d?.lags?.y || 0
                    let padding = (d.font.size / 2)
                    let fontSize = this.parent.__configuration.fonts.size;
                    if (bar) {
                        if (this.parent.__configuration.axis.reverse && bar.height - this.parent.__configuration.bars.depthPadding < d.font.size) {
                            padding = parseInt((bar.height - this.parent.__configuration.bars.depthPadding) / 2);
                        }
                        let availableSpace = 0;
                        if (core.scale.y.numberOfLabelDisplayed > 0 && core.scale.y.numberOfLabelDisplayed < 3) {
                            availableSpace = core.scale.y.numberOfLabelDisplayed % parseInt(core.scale.y.numberOfLabelDisplayed >= 1 ? core.scale.y.numberOfLabelDisplayed : 1)
                        } else if (core.scale.y.numberOfLabelDisplayed > 3) {
                            availableSpace = core.scale.y.numberOfLabelDisplayed - 3
                        }
                        let spaceToDispatch = (availableSpace * fontSize / 2) / 2
                        // Top of card + 1/2 line height + padding top + lag (multiline)
                        return (bar.y - (bar.height / 2)) + padding + lag + spaceToDispatch
                    }
                    return this.parent.__configuration.baseWidth  / 2 + lag;
                })
        }
    }
    __getElementText(core, d) {
        let bar = core.bars.get(d.unique);
        if (bar) {
            let fontSize = this.parent.__configuration.fonts.size;
            this.__testingElement.setAttribute('style', 'font-size: ' + fontSize + "px !important;")
            if (bar.properties.Spliced) {
                return bar.properties[this.parent.__configuration.explore.levels[this.parent.__configuration.explore.levels.length - 1]]
            }
            if (d.text && d.full_text && d.text.indexOf('...') !== -1) {
                this.__testingElement.innerText = d.full_text;
                if (!this.parent.__configuration.axis.reverse) {
                    if (this.__testingElement.clientWidth < bar.width - 40) {
                        return d.full_text
                    } else {
                        let text = d.full_text
                        // Try to apply crop here
                        while (this.__testingElement.clientWidth > bar.width - 40) {
                            text = text.substring(0, text.length - 2);
                            this.__testingElement.innerText = text;
                        }
                        return text + '...'
                    }
                } else {
                    if (this.__testingElement.clientWidth < bar.width - 40) {
                        return d.full_text
                    } else {
                        let text = d.full_text
                        // Try to apply crop here
                        while (this.__testingElement.clientWidth > bar.width - 40) {
                            text = text.substring(0, text.length - 2);
                            this.__testingElement.innerText = text;
                        }
                        return text + '...'
                    }
                }
            } else if (d.text && d.text.indexOf('...') === -1) {
                this.__testingElement.innerText = d.text;
                if (!this.parent.__configuration.axis.reverse) {
                    if (this.__testingElement.clientWidth < bar.width - 40) {
                        return d.text
                    } else {
                        let text = d.text
                        // Try to apply crop here
                        while (this.__testingElement.clientWidth > bar.width - 40) {
                            text = text.substring(0, text.length - 2);
                            this.__testingElement.innerText = text;
                        }
                        return text + '...'
                    }
                } else {
                    if (this.__testingElement.clientWidth < bar.width - 40) {
                        return d.text
                    } else {
                        let text = d.text
                        // Try to apply crop here
                        while (this.__testingElement.clientWidth > bar.width - 40) {
                            text = text.substring(0, text.length - 2);
                            this.__testingElement.innerText = text;
                        }
                        return text + '...'
                    }

                }
            }
            return d.text;
        }
        return '';
    }

    /**
     * Add waterfall bars attributes :
     * - position (x / y)
     * - size (width / height)
     * - class
     * - color
     * - opacity
     * - transformation
     * Can apply with transition
     * @param frames
     * @param barsData
     * @param data
     * @param parents
     * @param core
     * @param configuration
     * @param transition
     * @returns {*}
     */
    addPosition(core, transition = false) {
        this.addBarsPosition(core, transition)
        this.addFiguresPosition(core, transition)
        this.addLinksPosition(core, transition)
        this.addTextsPosition(core, transition);
        this.addAnnotationsPosition(core, transition)
        if (this.parent.__comparison && this.parent.__configuration.coc) {
            this.addBarsPosition(core.__comparison, transition)
            this.addFiguresPosition(core.__comparison, transition)
            this.addLinksPosition(core.__comparison, transition)
            this.addTextsPosition(core.__comparison, transition)
            this.addAnnotationsPosition(core.__comparison, transition)
        }
        this.parent.mounted = true;
    }

    zoom(event, data) {
        this.core.frame.plot.attr('transform', event.transform);
        if (this.core.__comparison) {
            this.core.frame.comparison.plot.attr('transform', event.transform);
        }
    }
    /**
     * Overlay parts
     */
    /**
     * Add to plot svg waterfall overlay :
     * - Axis lines
     * - Ticks
     */
    addOverlay(core, transition = false) {
        if (core.frame.x_line == null) {
            core.frame.x_line = core.frame.plot.append("line")
                // attach a line
                .style("stroke", "rgba(0,0,0,0)")  // colour the line
                .attr("x1", core.scale.x.range[0])     // x position of the first end of the line
                .attr("y1", core.scale.y.for(Math.max(...[core.scale.y.domain[0], 0])))      // y position of the first end of the line
                .attr("x2", core.scale.x.range[core.scale.x.range.length - 1] + (core.scale.x.part / 2))     // x position of the second end of the line
                .attr("y2", core.scale.y.for(Math.max(...[core.scale.y.domain[0], 0])));
        } else {
            core.frame.x_line.style("stroke", "rgba(0,0,0,0)")  // colour the line
                .attr("x1", core.scale.x.range[0])     // x position of the first end of the line
                .attr("y1", core.scale.y.for(Math.max(...[core.scale.y.domain[0], 0])))      // y position of the first end of the line
                .attr("x2", core.scale.x.range[core.scale.x.range.length - 1] + (core.scale.x.part / 2))     // x position of the second end of the line
                .attr("y2", core.scale.y.for(Math.max(...[core.scale.y.domain[0], 0])));
        }
        if (core.frame.y == null) {
            core.frame.y = core.frame.plot
                .append("g")
        }
        if (core.frame.x == null) {
            core.frame.x = core.frame.plot.append("g")
        }
        core.frame.y
            .attr('class', 'y axis')
            .attr('stroke-width', 0)
            .attr('transform', "translate(10, 0)")
            .call(core.axes.y)
            .attr('text-anchor', 'start')
            .attr('fill-opacity', 0)
        core.frame.x
            .attr('transform', 'translate(0, 0)')
            .attr('class', 'datama-waterfall-x')
            .attr('stroke-width', 0)
            .attr('font-family', this.parent.__configuration.fonts.family + ', Arial, sans-serif')
            .attr('text-anchor', 'start')
            .attr('fill-opacity', 0)
            .call(core.axes.x)
        return this;
    }

    /**
     * Listen zoom on plot
     * @private
     */
    loadFilters(filters, defaultFilter) {
        this.filters = filters
            .map(path => path.filter(p => this.parent.__configuration.explore.levels.indexOf(Object.keys(p)[0]) !== -1))
            .map(path => [defaultFilter, ...path])
    }


    /**
     * Fetch data from filters
     * @param core
     * @returns {{data: *, parents: *[]}}
     */
    filteredRows(core) {
        let data, parents;
        if (this.parent.__configuration.cards.exploration === 'hierarchy') {
            let result = this.__filteredRowsByHierarchy(core)
            data = result.data;
            parents = result.parents
        } else if (this.parent.__configuration.cards.exploration === 'top') {
            let i = 0;
            let tempData;
            if (this.parent.__drill_down === 'Dimensions then Steps') {
                core.source = (core.isComparison ? this.parent.__datasets.comparison : this.parent.__datasets.default).filter(r => r.Main_Filter_Type === 'Dimensions then Steps' || r.Type === 'net' || r.Type === 'net_OoS');
                let dimension = core.source.map(r => r.Main_Filter).filter(e => e).unique();
                core.source = dimension.map(d => {
                    return (new DataMaWaterfallPrepare(core.source.filter(r => r.Main_Filter === d || r.Type === 'net' || r.Type === 'net_OoS'), 'default', this.parent.__configuration.value)).__data;
                }).flat().filter((r, i, s) => s.map(rs => rs.unique).indexOf(r.unique) === i)
                core.source.sort((a, b) => a.Row - b.Row);
                let firstLevel = core.source.filter(r => {
                    let path = core.__makeWaterfallPath(r, false);
                    let pathDepth = path.filter(p => p[Object.keys(p)[0]]).length - 1;
                    return pathDepth === 0 && r.Type !== 'net' && r.Type !== 'net_OoS'
                })
                let nets = core.source.filter(r => r.Type === 'net' || r.Type === 'net_OoS')
                firstLevel.sort((a, b) => Math.abs(b.Value) - Math.abs(a.Value))
                tempData = [...nets, ...firstLevel.filter((e, i) => i < this.parent.__configuration.cards.numberOfChildToFetch)]
                tempData.sort((a, b) => a.Row - b.Row)
            } else {
                tempData = core.source.filter(r => {
                    let path = core.__makeWaterfallPath(r, false);
                    let pathDepth = path.filter(p => p[Object.keys(p)[0]]).length - 1;
                    return pathDepth === 0
                })
            }
            if (this.filters.length) {
                while (i < this.filters.length) {
                    let path = this.filters[i]
                    let childs;
                    if (this.parent.__drill_down === 'Dimensions then Steps') {
                        let pathDepth = path.filter(p => p[Object.keys(p)[0]]).length - 2;
                        childs = core.__getRowsByPath(path, core.source).filter(r => r.Type !== 'net').filter(r => {
                            let path = core.__makeWaterfallPath(r);
                            let depth = path.filter(p => p[Object.keys(p)[0]]).length - 2;
                            return depth > pathDepth
                        });
                        // TODO: NEED TO BE APPLY FOR Steps Then Dimensions
                        // Order by higher variation
                        childs.sort((a, b) => Math.abs(b.Value) - Math.abs(a.Value))
                    } else {
                        let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
                        childs = this.core.__getRowsByPath(path, core.source).filter(r => r.Type !== 'net').filter(r => {
                            let path = this.core.__makeWaterfallPath(r, false);
                            let depth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 1;
                            return depth === pathDepth + 2
                        });
                        // Order by higher variation
                        childs.sort((a, b) => Math.abs(b.Value) - Math.abs(a.Value))
                        // Get only the wanted number of childs
                        childs = childs.filter((e, i) => i < this.parent.__configuration.cards.numberOfChildToFetch)
                    }
                    tempData.push(...childs)
                    i++;
                }
            }
            tempData = tempData
                // Remove duplicate
                .filter((e, i, s) => s.map(sp => sp.unique).indexOf(e.unique) === i)
                // Remove empty rows
                .filter(d => {
                    let path = this.core.__makeWaterfallPath(d);
                    let pathDepth = path.filter(p => p[Object.keys(p)[0]] !== false).length - 2;
                    return d.Value !== 0 || pathDepth === 0
                })
                // Should not be sort by row for top
            parents = []
            data = tempData
        } else {
            parents = []
            data = []
        }
        return {parents, data}
    }

    __filteredRowsByHierarchy(core) {
        let i = 0;
        let tempData = core.source.filter(r => {
            let path = core.__makeWaterfallPath(r);
            let pathDepth = path.filter(p => p[Object.keys(p)[0]]).length - 2;
            return pathDepth === 0
        }).filter(r => r.Value !== '')
        if (this.filters.length) {
            while (i < this.filters.length) {
                let path = this.filters[i]
                let pathDepth = path.filter(p => p[Object.keys(p)[0]]).length - 2;
                let parentPath = JSON.parse(JSON.stringify(this.filters[i]))
                let subs = [
                    ...this.core.__getRowsByPath(parentPath, core.source),
                    ...this.core.__getRowsByPath(path, core.source).filter(r => {
                        let path = this.core.__makeWaterfallPath(r);
                        let depth = path.filter(p => p[Object.keys(p)[0]]).length - 2;
                        if (this.parent.__configuration.explore.depthOfZoom === -1) {
                            return true;
                        } else {
                            return depth <= pathDepth + this.parent.__configuration.explore.depthOfZoom
                        }
                    })
                ]
                let lastLevelGrouped = subs.filter(r => {
                    let path = this.core.__makeWaterfallPath(r);
                    let depth = path.filter(p => p[Object.keys(p)[0]]).length - 2;
                    return depth === 2 && r.Value !== 0
                })
                if (lastLevelGrouped.length) {
                    subs = subs.filter(r => {
                        let path = this.core.__makeWaterfallPath(r);
                        let depth = path.filter(p => p[Object.keys(p)[0]]).length - 2;
                        return depth < 2
                    })
                    let keys = lastLevelGrouped.map(r => r.Level_01).unique()
                    let groupLevelIndex = 0;
                    while (groupLevelIndex < keys.length) {
                        let elements = lastLevelGrouped.filter(r => r.Level_01 === keys[groupLevelIndex]).filter((e, i, s) => s.map(sr => sr.unique).indexOf(e.unique) === i);
                        if (elements.length > this.parent.__configuration.bars.remain) {
                            elements = this.parent.__dataset.remain(elements, this.parent.__drill_down === 'Dimensions then Steps' ? elements.length + 1 : this.parent.__configuration.bars.remain)
                        }
                        // Remove previous elements
                        lastLevelGrouped = lastLevelGrouped.filter(r => r.Level_01 !== keys[groupLevelIndex]);
                        // Replace by new remained elements
                        lastLevelGrouped.push(...elements);
                        groupLevelIndex++;
                    }
                    subs.push(...lastLevelGrouped);
                }
                tempData.push(...subs);
                i++;
            }
        }
        tempData = tempData.filter((e, i, s) => s.map(sp => sp.unique).indexOf(e.unique) === i).filter(d => {
            let path = this.core.__makeWaterfallPath(d);
            let pathDepth = path.filter(p => p[Object.keys(p)[0]]).length - 2;
            return d.Value !== 0 || pathDepth === 0
        })
        tempData.sort((a, b) => a.Row - b.Row)
        let parents = tempData.filter(r => {
            if (r.Type !== 'net') {
                let path = core.__makeWaterfallPath(r);
                let childs = core.__getRowsByPath(path, tempData).filter(d => d.Type !== 'net' && d.unique !== r.unique)
                return childs.length > 0
            }
            return false;
        })
        let data = tempData.filter(r => {
            if (r.Type !== 'net') {
                let path = core.__makeWaterfallPath(r);
                let childs = core.__getRowsByPath(path, tempData).filter(d => d.Type !== 'net' && d.unique !== r.unique)
                return childs.length === 0
            }
            return true;
        })
        return {parents, data}
    }

    prepareData({data, parents}, core) {
        let result = [];
        let total_oos;
        let total;
        let oos = [];
        if (this.parent.__layers.waterfall != null) {
            // Default use of Waterfall V2
            // Total card
            let nets = data.filter(r => r.Type === 'net');
            oos = data.filter(r => r.Type === 'net_OoS');
            total = {
                ...nets[nets.length - 1],
                "depth": 0,
                "Level_00": "Total",
                "Row": nets[0].Row,
                "children": []
            }
            if (oos.length) {
                total_oos = {
                    ...oos[oos.length - 1],
                    "depth": 0,
                    "Level_00": "Out of scope",
                    "Row": total.Row + 0.5,
                    "children": []
                }
            }
        } else {
            // Pivot specific use of DataMa Waterfall V2
            total = {
                ...data.filter(r => r.Step === 'Root')[0],
                Row: 0,
                depth: 0,
                children: []
            }
        }
        // Prepare base data
        // - Add net
        // - Add depth from 0<net> to max
        data = data.map(r => ({...r, depth: core.__makeWaterfallPath(r, this.parent.__configuration.cards.exploration === 'hierarchy').filter(p => p[Object.keys(p)[0]]).length - (this.parent.__configuration.cards.exploration === 'hierarchy' ? 1 : 0)}))
        parents = parents.map(r => ({...r, depth: core.__makeWaterfallPath(r, this.parent.__configuration.cards.exploration === 'hierarchy').filter(p => p[Object.keys(p)[0]]).length - (this.parent.__configuration.cards.exploration === 'hierarchy' ? 1 : 0)}))
        result = [
            ...data.filter(r => r.Type !== 'net' && r.Type !== 'net_OoS'),
            ...parents.filter(r => r.Type !== 'net' && r.Type !== 'net_OoS')
        ].sort((a, b) => a.Row - b.Row)
        let first = result.filter(r => r.depth === 1)
        let third = result.filter(r => r.depth === 3)
        // Here i fetch from data source the parent of selected level 3
        let second = third.map(e => {
            let path = core.__makeWaterfallPath(e, false).filter((p,i,s) => i !== s.length - 1);
            let rows = core.__getRowsByPath(path, core.source)
            let obj = rows.filter(p => p.Type !== 'net' && p.Level_02 === '')[0]
            return {...obj, depth: 2}
        }).filter((e,i,s) => s.map(r => r.unique).indexOf(e.unique) === i)
        // Here i need to sort level 3 childs [again]
        third = second.map(s => {
            let obj = core.__makeWaterfallPath(s, false);
            let childs = core.__getRowsByPath(obj, result)
                .filter(p => p.Type !== 'net' && p.Level_02 !== '');
            let objects;
            if (this.parent.__drill_down === 'Dimensions then Steps') {
                objects = childs.sort((a, b) => a.Row - b.Row)
            } else {
                if (s.Type === 'out') {
                    objects = childs.sort((a, b) => a.Value - b.Value)
                } else {
                    objects = childs.sort((a, b) => b.Value - a.Value)
                }
            }
            return objects.map(r => ({...r, depth: 3}));
        }).flat()
        // Here i map parent/children for each rows
        first = first.map(f => {
            let childs = second.filter(s => s.Level_00 === f.Level_00).sort((a, b) => Math.abs(b.Value) - Math.abs(a.Value));
            f.parent = total
            f.children = childs.map(c => ({...c, parent: f, children: c.children}));
            return [f, ...childs.map(c => {
                let childs = third.filter(t => c.Level_00 === t.Level_00 && c.Level_01 === t.Level_01);
                if (this.parent.__drill_down === 'Dimensions then Steps') {
                    childs = childs.sort((a, b) => a.Row - b.Row)
                } else {
                    if (f.Type === 'out') {
                        childs = childs.sort((a, b) => a.Value - b.Value)
                    } else {
                        childs = childs.sort((a, b) => b.Value - a.Value)
                    }
                    childs = childs.sort((a, b) => Math.abs(b.Value) - Math.abs(a.Value))
                }
                c.parent = f;
                c.children = childs.map(cc => ({...cc, parent: c, children: cc.children}));
                return [c, ...childs.map(t => ({...t, parent: c, children: []}))]
            }).flat()]
        }).flat();
        total.children = first.filter(e => e.depth === 1)
        if (total_oos) {
            total_oos.children = first.filter(e => e.depth === 1)
        }
        if (oos.length) {
            result = [total, total_oos, ...first]
        } else {
            result = [total, ...first]
        }
        result = result.filter((e,i,s) => s.map(r => r.unique).indexOf(e.unique) === i)
        // add childs
        result = result.map((r, i, s) => {
            r.position = s.filter(sc => sc.depth === r.depth).map(sr => sr.unique).indexOf(r.unique);
            return r;
        })
        // Make hierarchy (parents/childs)
        result = result.map((r, i, s) => {
                if (r.depth > 0) {
                    let path = core.__makeWaterfallPath(r, false);
                    let childs = core.__getRowsByPath(path, s).filter(fs => fs.depth === r.depth + 1);
                    childs = childs.map(c => {
                        c.parent = r;
                        return c;
                    })
                    r.children = childs
                    if (r.depth === 1) {
                        r.parent = s.filter(rs => rs.depth === 0)[0];
                    }
                } else {
                    r.children = s.filter(rs => rs.depth === 1)
                }
                return r;
            })
        // apply children lag
        result = result.map((r, i, s) => {
            let childs = r.children;
            if (r.children) {
                let ci = 0;
                while (ci < childs.length) {
                    if (childs[ci].children.length) {
                        childs.push(...childs[ci].children);
                    }
                    ci++;
                }
                childs = childs.filter((c, i, s) => s.map(sc => sc.unique).indexOf(c.unique) === i)
            }
            if (i > 0 && s[i - 1].depth > r.depth && s[i - 1].position >= r.position) {
                let lag = (parseInt(s[i - 1].position) - r.position) + 1;
                let j = i;
                while (j < s.length) {
                    if (s[j].depth < s[i - 1].depth) {
                        s[j].position += lag
                    }
                    j++;
                }
            }
            let j = 0;
            if (childs.some(c => c.position < r.position)) {
                while (j < childs.length) {
                    let subchilds = childs.filter(c => c.depth === childs[j].depth);
                    s[s.map(rc => rc.unique).indexOf(childs[j].unique)].position = r.position + subchilds.map(sc => sc.unique).indexOf(childs[j].unique)
                    j++;
                }
            }
            return r
        })
        // Put parent at the middle of their children
        result = result.map(r => {
            let childs = r.children;
            if (r.children && r.children.length) {
                let ci = 0;
                while (ci < childs.length) {
                    if (childs[ci].children.length) {
                        childs.push(...childs[ci].children);
                    }
                    ci++;
                }
                childs = childs.filter((c, i, s) => s.map(sc => sc.unique).indexOf(c.unique) === i)
                r.position += ((Math.max(...childs.map(rc => rc.position)) - Math.min(...childs.map(rc => rc.position))) / 2)
            }
            return r;
        })
        return result;
    }

    /**
     * Exploration behavior
     * @param element
     * @param core
     * @returns {*|{filter, circleXY(*, *): {x, y}, __isRowMatchPath(*, *): (boolean), __getRowDepthFromPath(*, *): number, __makeWaterfallPath(*, boolean=): *[], __getRowsByPath(*, null=): *}}
     */
    explore(element, core) {
        if (!element.Type) {
            element = core.bars.get(element.unique).properties
        }
        if (element.disabled) return false;
        if (element.Type !== 'net') {
            let bar = core.bars.get(element.unique)
            if (!bar) bar = core.__comparison.bars.get(element.unique)
            if (bar && bar.properties.Spliced) {
                this.parent.__configuration.bars.remain += bar.properties.Spliced
                this.parent.update();
            } else {
                /**
                 * Make path of selected element
                 * @type {[]}
                 */
                let path = core.__makeWaterfallPath(element, this.parent.__configuration.cards.exploration === 'hierarchy' || (this.parent.__drill_down === 'Dimensions then Steps'));
                let pathNoDefaultFilter = core.__makeWaterfallPath(element, false);
                let childs = core.__getRowsByPath(pathNoDefaultFilter, core.source).filter(r => r.Value !== 0 && r.Type !== 'net' && r.unique !== element.unique);
                childs.sort((a, b) => parseInt(a.Filter_Rank) - parseInt(b.Filter_Rank))
                if (!this.__filterExist(path) && !this.__filterExist(pathNoDefaultFilter, false)) {
                    if (childs.length > 0 && !core.data.some(r => childs.map(c => c.unique).indexOf(r.unique) !== -1)) {
                        /**
                         * Add new filter
                         */
                        this.filters.push(path);
                        if (this.parent.__callback.exploreIn) {
                            this.parent.__callback.exploreIn(childs[0])
                        }
                    } else {
                        /**
                         * Here we must delete parent filter
                         * @type {number}
                         */
                        let parentPathIndex = -1;
                        let parent = core.bars.get(element.unique).parent
                        if (!parent) parent = core.bars.get(element.unique).properties.parent
                        while (parentPathIndex === -1) {
                            let parentPath  = core.__makeWaterfallPath(parent, false)
                            let parentObj = core.bars.get(parent.unique)
                            parentPathIndex = this.__filterIndex(parentPath, false)
                            if (parentPathIndex === -1) {
                                if (parentObj.parent == null) {
                                    parentPathIndex = false
                                } else {
                                    parent = parentObj.parent;
                                }
                            }
                        }
                        if (parentPathIndex !== false) {
                            this.filters.splice(parentPathIndex, 1)
                            if (this.parent.__callback.exploreOut) {
                                this.parent.__callback.exploreOut(element)
                            }
                        }
                    }
                } else {
                    this.__removeFilter(path)
                    if (this.parent.__callback.exploreOut) {
                        this.parent.__callback.exploreOut(element)
                    }
                }
            }
        } else {
            /**
             * Click on net bar, remove filters
             * @type {*[]}
             */
            this.filters = []
            if (this.parent.__callback.exploreOut) {
                this.parent.__callback.exploreOut('all')
            }
        }
        core = this.getCore(
            {
                source: this.core.source,
                comparison: this.core.__comparison ? this.core.__comparison.source : false,
                current: this.core.data,
                parents: this.core.parents
            },
            this.core.frame,
            this.core.frame.comparison
        )
        this.addOverlay(this.core)
        if (this.parent.__comparison && this.parent.__configuration.coc) {
            this.addOverlay(this.core.__comparison)
        }
        this.addTraces(true);
        return core;
    }

    addTraces(update=false) {
        this.getPlotData(this.core)
        this.__addBarsTraces(update, this.core, this.core.frame)
        this.__addFiguresTraces(update, this.core, this.core.frame)
        this.__addLinksTraces(update, this.core, this.core.frame)
        this.__addAnnotationsTraces(update, this.core, this.core.frame)
        this.__addTextsTraces(update, this.core, this.core.frame)
        if (this.parent.__comparison && this.parent.__configuration.coc) {
            this.__addBarsTraces(update, this.core.__comparison, this.core.frame.comparison)
            this.__addFiguresTraces(update, this.core.__comparison, this.core.frame.comparison)
            this.__addLinksTraces(update, this.core.__comparison, this.core.frame.comparison)
            this.__addAnnotationsTraces(update, this.core.__comparison, this.core.frame.comparison)
            this.__addTextsTraces(update, this.core.__comparison, this.core.frame.comparison)
        }
        this.__listenZoom()
        this.addPosition(this.core, update)
    }

    __addFiguresTraces(update, core, frame) {
        frame.__figures = frame.plot
            .selectAll('rect.datama-waterfall-bar-figure')
            .data([...core.data, ...core.parents].sort((a, b) => a.Row - b.Row), d => d.unique + '-figure')
        if (update) {
            frame.figures = frame.__figures
                .enter()
                .append('rect')
                .attr('class', 'datama-waterfall-bar-figure no-click')
                .merge(frame.__figures)
            frame.__figures.exit().remove()
        } else {
            frame.figures = frame.__figures
                .enter()
                .append('rect')
                .attr('class', 'datama-waterfall-bar-figure no-click')
        }
    }

    getCore({source, comparison, filter, parents=[], current=false}, frame={}, comparisonFrame={}) {
        let core = {
            ...this.__core,
            frame
        }
        core.source = source
        core.d3 = this.parent.__d3
        // let prevTexts, prevAnnotations;
        // let prevData = this.core && this.core.data && this.core.data
        // let prevDataLength;
        // if (prevData) {
        //     prevDataLength = prevData.length
        // }
        // if (prevDataLength && prevDataLength > 0) {
        //     prevTexts = this.core.texts;
        //     prevAnnotations = this.core.annotations;
        // }
        this.core = core;
        // core.data = this.prepareData(this.filteredRows(core));
        core.data = this.prepareData(this.filteredRows(core), core);
        core.parents = [];
        core.scale = this.getScales(core)
        core.axes = this.getAxes(core)
        core.texts = this.prepareTextData(core)
        core.annotations = this.prepareAnnotationData(core)
        // if (!prevDataLength || (core.data.length !== prevDataLength || core.data.map(r => r.unique).join(',') !== prevData.map(r => r.unique).join(',')) || !prevTexts || !prevAnnotations) {
        //     core.texts = this.prepareTextData(core)
        //     core.annotations = this.prepareAnnotationData(core.data)
        // } else {
        //     core.texts = prevTexts
        //     core.annotations = prevAnnotations
        // }
        if (this.parent.__configuration.coc && comparison) {
            core.__comparison = {
                d3: core.d3,
                ...this.__core,
                parents: [],
                isComparison: true,
                frame: comparisonFrame,
                annotations: [],
                source: comparison
            }
            core.__comparison.data = this.prepareData(this.filteredRows(core.__comparison), core.__comparison)
            // let prevTexts, prevAnnotations;
            // let prevData = this.core && this.core.__comparison && this.core.__comparison.data
            // let prevDataLength;
            // if (prevData) {
            //     prevDataLength = prevData.length
            // }
            core.__comparison.annotations = this.prepareAnnotationData(core.__comparison)
            // if (!prevDataLength || (core.__comparison.data.length !== prevDataLength || core.__comparison.data.map(r => r.unique).join(',') !== prevData.map(r => r.unique).join(',')) || !prevAnnotations) {
            //     core.__comparison.annotations = this.prepareAnnotationData(core.__comparison.data)
            // } else {
            //     core.__comparison.annotations = this.core.__comparison.texts
            // }
            core.__comparison.scale = this.getScales(core.__comparison);
            core.__comparison.axes = this.getAxes(core.__comparison);
            core.__comparison.texts =  this.prepareTextData(core.__comparison);
            // if (!prevDataLength || (core.__comparison.data.length !== prevDataLength || core.__comparison.data.map(r => r.unique).join(',') !== prevData.map(r => r.unique).join(',')) || !prevTexts) {
            //     core.__comparison.texts =  this.prepareTextData(core.__comparison);
            // } else {
            //     core.__comparison.texts = this.core.__comparison.annotations
            // }

        }
        this.core = core;
        return this.core;
    }

    prepareAnnotationData(core) {
        let result = [];
        let topLabels = [];
        if (!this.parent.__configuration.display.secondary[0].hidden) {
            let label = this.parent.__configuration.display.secondary[0];
            core.data.map(r => {
                let maxWidth = !this.parent.__configuration.axis.reverse ? (core.scale.x.part * 0.9) - this.depthPadding : ((core.scale.x.part * 0.9) / 3) - this.depthPadding;
                let text;
                if (['RatioStart_disp', 'RatioEnd_disp'].indexOf(label.column) !== -1) {
                    if (r.Split_Mix_and_Perf && r.Kind_Number === 1) {
                        if (label.column === 'RatioStart_disp') {
                            text = 'From ' + (r.MixStart >= 0 ? '+' : '') + (r.MixStart * 100).toFixed(0) + '%'
                        } else {
                            text = 'To ' + (r.MixEnd >= 0 ? '+' : '') + (r.MixEnd * 100).toFixed(0) + '%'
                        }
                    } else {
                        text = r[label.column]
                    }
                } else {
                    text = r[label.column]
                }
                text += (label.formatting.arrows ? (r.Type === 'out' ? ' ()' : (r.Type === 'in' ? ' ()' : (r.Impact < 0 ? ' ()' : ' ()'))) : '')
                topLabels.push(
                    ...DataMaUtils.makeText(text,
                        {
                            width: maxWidth,
                            font: {
                                ...this.parent.__configuration.fonts,
                                size: this.parent.__configuration.fonts.size * 1.5
                            },
                            allowOverflowRatio: 1.2,
                            breakingChars: {space: ' '},
                            maxLines: 1,
                            verticalAlign: 'start'
                        }
                    ).map((t, i, s) => ({
                        ...r,
                        ...t,
                        full_text: t.text,
                        id: r.unique,
                        type: 'top',
                        column: label.column,
                        font: {
                            ...t.font,
                            size: Math.min(...s.map(e => e.font.size))
                        }
                    })))
            })
        }
        let labels = [];
        core.data
            .map(r => {
                let texts = []
                let columns = []
                let i = 1;
                // Impact_disp
                while (i < this.parent.__configuration.display.secondary.length) {
                    if (!this.parent.__configuration.display.secondary[i].hidden) {
                        if (r[this.parent.__configuration.display.secondary[i].column] && r[this.parent.__configuration.display.secondary[i].column].length) {
                            columns.push(this.parent.__configuration.display.secondary[i].column)
                            let text;
                            if (['RatioStart_disp', 'RatioEnd_disp'].indexOf(this.parent.__configuration.display.secondary[i].column) !== -1) {
                                if (r.Split_Mix_and_Perf && r.Kind_Number === 1) {
                                    if (this.parent.__configuration.display.secondary[i].column === 'RatioStart_disp') {
                                        text = 'From ' + (r.MixStart * 100).toFixed(0) + '%'
                                    } else {
                                        text = 'To ' + (r.MixEnd * 100).toFixed(0) + '%'
                                    }
                                } else {
                                    text = r[this.parent.__configuration.display.secondary[i].column]
                                    if (this.parent.__configuration.display.secondary[i].column === 'RatioStart_disp') {
                                        text = "From " + text;
                                    }
                                    if (this.parent.__configuration.display.secondary[i].column === 'RatioEnd_disp') {
                                        text = "To " + text;
                                    }
                                }
                            } else {
                                text = r[this.parent.__configuration.display.secondary[i].column]
                            }
                            if (this.parent.__configuration.display.secondary[i].formatting.arrows) {
                                text += (r.Type === 'out' ? ' ()' : (r.Type === 'in' ? ' ()' : (r.Impact < 0 ? ' ()' : ' ()')))
                            }
                            texts.push(text)
                        }
                    }
                    i++;
                }
                if (this.parent.__configuration.axis.reverse) {
                    labels.push(
                        ...DataMaUtils.makeText(
                            texts.join(' | '),
                            {
                                width: core.scale.x.part - (this.parent.__configuration.bars.depthPadding * 2),
                                font: this.parent.__configuration.fonts,
                                allowOverflowRatio: 1.2,
                                breakingChars: {space: ' ', comma: ','},
                                maxLines: 1,
                                verticalAlign: 'start'
                            }
                        ).map((t, ind, s) => ({
                            ...r,
                            ...t,
                            full_text: texts.join(' | '),
                            id: r.unique,
                            type: 'label',
                            column: columns.reverse(),
                            font: {
                                ...t.font,
                                size: Math.min(...s.map(e => e.font.size))
                            }
                        }))
                    )
                } else {
                    let i = 0;
                    texts = texts.reverse()
                    while (i < texts.length) {
                        labels.push(
                            ...DataMaUtils.makeText(
                                texts[i],
                                {
                                    width: core.scale.x.part - (this.parent.__configuration.bars.depthPadding * 2),
                                    font: this.parent.__configuration.fonts,
                                    allowOverflowRatio: 1.2,
                                    breakingChars: {space: ' ', comma: ','},
                                    verticalAlign: 'end',
                                    maxLines: 1
                                }
                            ).map((t, ind, s) => ({
                                ...r,
                                ...t,
                                full_text: texts[i],
                                id: r.unique,
                                index: i,
                                type: 'label',
                                column: columns[i],
                                font: {
                                    ...t.font,
                                    size: Math.min(...s.map(e => e.font.size))
                                }
                            })))
                        i++;
                    }
                }
            })
        result.push(...topLabels)
        result.push(...labels)
        return result;
    }



    /**
     * Toggle opacity of hoverOnly texts
     * @param event
     * @param element
     * @param core
     * @param state
     * @returns {*}
     * @private
     */
    __hoveringBarDisplayHoverOnlyAnnotation(event, element, core, state) {
        return new Promise((resolve) => {
            let bar = core.bars.get(element.unique);
            if (bar) {
                let labels = document.getElementsByClassName(element.unique + '-annotations-label')
                let tops = document.getElementsByClassName(element.unique + '-annotations-top')
                let i = 0;
                let j = 0;
                while (i < labels.length) {
                    let label = labels[i]
                    if (state) {
                        if (label && label.attributes['data-column'].value !== '') {
                            let item = this.parent.__configuration.display.secondary.filter(s => label.attributes['data-column'].value.indexOf(s.column) !== -1)[0];
                            if (!label.attributes['data-hidden'] || label.attributes['data-hidden'].value.toString() === 'false') {
                                if (item.hoverOnly) {
                                    // Show bar labels
                                    label.style.fillOpacity = 1
                                } else {
                                    label.style.fillOpacity = 1
                                }
                            }
                        }
                    } else {
                        if (label && label.attributes['data-column'].value !== '') {
                            let item = this.parent.__configuration.display.secondary.filter(s => label.attributes['data-column'].value.indexOf(s.column) !== -1)[0];
                            if (!label.attributes['data-hidden'] || label.attributes['data-hidden'].value.toString() === 'false') {
                                if (item.hoverOnly) {
                                    label.style.fillOpacity = 0
                                } else {
                                    label.style.fillOpacity = 1
                                }
                            }
                        }
                    }
                    i++;
                }
                while (j < tops.length) {
                    let top = tops[j]
                    if (state) {
                        if (top && this.parent.__configuration.display.secondary[0].hoverOnly) {
                            // Show top labels
                            top.style.fillOpacity = 1
                        }
                    } else {
                        if (top && this.parent.__configuration.display.secondary[0].hoverOnly) {
                            top.style.fillOpacity = 0
                        }
                    }
                    j++;
                }
            }
            resolve()
        })
    }


    /**
     * Axes part
     */
    /**
     * Return d3 x & y axes
     * @param d3
     * @param scale
     * @param data
     */
    getAxes({d3, scale, data}) {
        return {
            x: d3.axisBottom().scale(scale.x.for).tickFormat((i) => {
                return this.parent.__configuration.debug ? i : ''
            }),
            y: d3.axisLeft(scale.y.for).tickFormat(d => {
                if (d < 1) {
                    return d
                }
                return d3.format(".3s")(d)
            }).ticks(5)
        }
    }

    /**
     * Make X Scale
     */
    /**
     * Return waterfall X scale
     * @param data
     * @param d3
     * @param this.parent.__configuration
     * @returns {{domain: *}}
     */
    getScaleX({data, d3}) {
        let scale;
        if (this.parent.__configuration.axis.reverse) {
            scale = {
                domain: [
                    0,
                    (Math.max(...data.map(r => r.depth)) + 1)
                ],
                range: [
                    0,
                    (this.parent.__configuration.width - (this.parent.__configuration.padding.l + this.parent.__configuration.padding.r) - 60)
                ]
            }
        } else {
            scale = {
                range: [
                    this.parent.__configuration.padding.l,
                    (this.parent.__configuration.width - (this.parent.__configuration.padding.l + this.parent.__configuration.padding.r))
                ],
                domain: [
                    -.35,
                    Math.max(...data.map(r => r.position + 1.5))
                ]
            }
        }
        scale.part = scale.range[1] / scale.domain[1]
        scale.for = d3.scaleLinear().range(scale.range).domain(scale.domain)
        return scale;
    }

    /**
     * Make Y Scale
     */
    /**
     * Return waterfall Y scale
     * @param data
     * @param source
     * @param comparison
     * @param d3
     * @param this.parent.__configuration
     * @returns {{range: number[]}}
     */
    getScaleY({data, source, comparison, d3}) {
        let scale;
        let lagY = this.parent.__configuration.fonts.size * 1.25;
        if (this.parent.__comparison && this.parent.__configuration.coc && this.parent.__configuration.comparison.side === 'overlay') {
            lagY += (this.parent.__configuration.fonts.size * 1.25) + 5;
        }
        if (this.parent.__configuration.axis.reverse) {
            scale = {
                range: [
                    0,
                    this.parent.__configuration.height
                ],
                domain: [
                    Math.min(...data.map(r => r.position)) - 1,
                    Math.max(...data.map(r => r.position)) + 1
                ]
            }
            scale.part = (scale.range[1] / (scale.domain[1] * 1.5))
            scale.for = d3.scaleLinear().range(scale.range).domain(scale.domain)
        } else {
            lagY *= 1.5
            // In case of reversed axis, we should split the width instead of height
            scale = {
                range: [
                    (lagY * 1.5),
                    this.parent.__configuration.height - (this.parent.__configuration.fonts.size * 1.25 * 1.5),
                ],
                domain: [
                    0,
                    (Math.max(...data.map(r => r.depth)) + 1) * 1.5
                ]
            }
            scale.part = (scale.range[1] / scale.domain[1])
            scale.for = d3.scaleLinear().range(scale.range).domain(scale.domain)
            let cardHeaderSize = (this.parent.__configuration.fonts.size * 1.5 * 2 * 1.5) + (this.parent.__configuration.fonts.size / 2);
            scale.numberOfLabelDisplayed = (scale.part - cardHeaderSize) / this.parent.__configuration.fonts.size
        }
        return scale;
    }

    prepareTextData(core) {
        let texts = []
        core.data.forEach(r => {
            let path = core.__makeWaterfallPath(r, false)
            let pathDepth = path.filter(p => p[Object.keys(p)[0]]).length - 1;
            let maxWidth = !this.parent.__configuration.axis.reverse ? (core.scale.x.part * 0.9) - this.depthPadding : (((core.scale.x.part * 0.9) / 3) * 2) - this.depthPadding;
            let text = r[this.parent.__configuration.explore.levels[pathDepth]]
            if (text) {
                let full_text = r[this.parent.__configuration.explore.levels[pathDepth]];
                if (r.Type === 'net') {
                    text = this.parent.__configuration.cards.root || ''
                }
                texts.push(
                    ...DataMaUtils.makeText(text,
                        {
                            width: maxWidth,
                            font: {
                                ...this.parent.__configuration.fonts,
                                size: this.parent.__configuration.fonts.size * 1.4
                            },
                            allowOverflowRatio: 1,
                            breakingChars: {space: ' ', comma: ','},
                            verticalAlign: 'start',
                            maxLines: 1
                        }
                    ).map((t,i) => ({...r, ...t, full_text: t?.full_text || full_text, id: r.unique + '-' + i})))
            }
        });
        return texts;
    }
    __addAnnotationsTraces(update, core, frame) {
        frame.__annotations = frame.plot
            .selectAll('text.datama-waterfall-bar-annotations')
            .data(core.annotations, d => d.unique)
        if (update) {
            frame.annotations = frame.__annotations
                .enter()
                .append('text')
                .attr('id', d => d.unique + '-annotations-' + d.type + '-' + (d?.index || 0))
                .attr('data-unique', d => d.unique)
                .attr('class', d => 'datama-waterfall-bar-annotations ' + d.unique + '-annotations-' + d.type + '-' + (d?.index || 0))
                .attr('data-column', d => Array.isArray(d.column) ? d.column.join(' ') : d.column)
                .merge(frame.__annotations)
                .on('click', (e, d) => this.parent.__layers[this.parent.__configuration.plot].explore(d.unique ? d : core.bars.get((e.target || d3.event.target).attributes['data-unique'].value).properties, core))
                .on('contextmenu', (event, d) => this.__listenContextMenu(event, d, core))
                .on("mouseenter", (event, d) => this.__listenHover(event, d, core, true))
                .on("mouseout", (event, d) => this.__listenHover(event, d, core, false))
            frame.__annotations.exit().remove()
        } else {
            frame.annotations = frame.__annotations.enter()
                .append('text')
                .attr('id', d => d.unique + '-annotations-' + d.type + '-' + (d?.index || 0))
                .attr('data-unique', d => d.unique)
                .attr('data-column', d => Array.isArray(d.column) ? d.column.join(' ') : d.column)
                .attr('class', d => 'datama-waterfall-bar-annotations ' + d.unique + '-annotations-' + d.type + '-' + (d?.index || 0))
                .on('click', (e, d) => this.parent.__layers[this.parent.__configuration.plot].explore(d.unique ? d : core.bars.get((e.target || d3.event.target).attributes['data-unique'].value).properties, core))
                .on('contextmenu', (event, d) => this.__listenContextMenu(event, d, core))
                .on("mouseenter", (event, d) => this.__listenHover(event, d, core, true))
                .on("mouseout", (event, d) => this.__listenHover(event, d, core, false))
        }
    }

    __addTextsTraces(update, core, frame) {
        frame.__texts = frame.plot
            .selectAll('text.datama-waterfall-bar-texts')
            .data(core.texts, d => d.id)
        if (update) {
            frame.texts = frame.__texts
                .enter()
                .append('text')
                .attr('id', d => d.id)
                .attr('data-unique', d => d.unique)
                .attr('class', 'datama-waterfall-bar-texts')
                .merge(frame.__texts)
                .on('click', (e, d) => this.parent.__layers[this.parent.__configuration.plot].explore(d.unique ? d : core.bars.get((e.target || d3.event.target).attributes['data-unique'].value).properties, core))
                .on('contextmenu', (event, d) => this.__listenContextMenu(event, d, core))
                .on("mouseenter", (event, d) => this.__listenHover(event, d, core, true))
                .on("mouseout", (event, d) => this.__listenHover(event, d, core, false))
            frame.__texts.exit().remove()

        } else {
            frame.texts = frame.__texts.enter()
                .append('text')
                .attr('id', d => d.id)
                .attr('data-unique', d => d.unique)
                .attr('class', 'datama-waterfall-bar-texts')
                .on('click', (e, d) => this.parent.__layers[this.parent.__configuration.plot].explore(d.unique ? d : core.bars.get((e.target || d3.event.target).attributes['data-unique'].value).properties, core))
                .on('contextmenu', (event, d) => this.__listenContextMenu(event, d, core))
                .on("mouseenter", (event, d) => this.__listenHover(event, d, core, true))
                .on("mouseout", (event, d) => this.__listenHover(event, d, core, false))
        }
    }

    __addLinksTraces(update, core, frame) {
        frame.__links = frame.plot
            .selectAll('path.datama-waterfall-bar-links')
            .data([...core.data, ...core.parents].sort((a, b) => a.Row - b.Row), d => d.unique)
        if (update) {
            frame.links = frame.__links
                .enter()
                .append('path')
                .attr('data-unique', d => d.unique)
                .attr('class', d => 'datama-waterfall-bar-links ' + (core.data.map(r => r.unique).indexOf(d.unique) !== -1 && !d.disabled ? '' : 'no-click'))
                .merge(frame.__links)
                .on('click', (e, d) => this.parent.__layers[this.parent.__configuration.plot].explore(d.unique ? d : core.bars.get((e.target || d3.event.target).attributes['data-unique'].value).properties, core))
                .on('contextmenu', (event, d) => this.__listenContextMenu(event, d, core))
                .on("mouseenter", (event, d) => this.__listenHover(event, d, core, true))
                .on("mouseout", (event, d) => this.__listenHover(event, d, core, false))
            frame.__links.exit().remove()
        } else {
            frame.links = frame.__links
                .enter()
                .append('path')
                .attr('data-unique', d => d.unique)
                .attr('class', d => 'datama-waterfall-bar-links ' + (core.data.map(r => r.unique).indexOf(d.unique) !== -1 && !d.disabled ? '' : 'no-click'))
                .on('click', (e, d) => this.parent.__layers[this.parent.__configuration.plot].explore(d.unique ? d : core.bars.get((e.target || d3.event.target).attributes['data-unique'].value).properties, core))
                .on('contextmenu', (event, d) => this.__listenContextMenu(event, d, core))
                .on("mouseenter", (event, d) => this.__listenHover(event, d, core, true))
                .on("mouseout", (event, d) => this.__listenHover(event, d, core, false))
        }
    }

    /**
     * Handler of hover event
     * @returns {boolean}
     */
    __listenHover(event, element, core, state) {
        if (typeof element === 'number') {
            element = event;
            event = d3.event
        }
        this.__hoveringBarDisplayCroppedTextFully(event, {...element}, core, state)
        if (!element.Type) {
            element = core.bars.get(element.unique).properties
        }
        this.__hoveringBarDisplayHoverOnlyAnnotation(event, element, core, state)
        return new Promise((resolve) => {
            if (state) {
                let bar = core.bars.get(element.unique);
                if (bar) {
                    new Promise((resolve) => {
                        bar.el.classList.add('hover')
                        resolve()
                    })
                    let fromTop;
                    if (bar.y > this.parent.__configuration.baseHeight / 2) {
                        fromTop = (this.parent.__configuration.baseHeight - (bar.y + (this.parent.__configuration.padding.t + this.parent.__configuration.padding.b + (((this.parent.__configuration.fonts.size * 1.75) + (this.parent.__configuration.fonts.size * 1.25)) * 1.5)))) * -1
                    } else {
                        fromTop = bar.y - (bar.height / 2) + ((this.parent.__configuration.padding.t + this.parent.__configuration.padding.b + (((this.parent.__configuration.fonts.size * 1.75) + (this.parent.__configuration.fonts.size * 1.25)) * 1.5)))
                    }
                    let fromLeft = bar.x + bar.width + this.parent.__configuration.padding.l
                    if (fromLeft > this.parent.__configuration.baseWidth / 2) {
                        fromLeft = (this.parent.__configuration.baseWidth - bar.x - this.parent.__configuration.padding.r) * -1
                        if (core.isComparison && this.parent.__configuration.comparison.side === 'overlay') {
                            fromLeft += this.parent.__configuration.comparison.translate.x
                        }
                    } else {
                        if (core.isComparison && this.parent.__configuration.comparison.side === 'overlay') {
                            fromLeft += this.parent.__configuration.comparison.translate.x
                        }
                    }
                    if (core.isComparison && this.parent.__configuration.comparison.side !== 'overlay') {
                        if (this.parent.__configuration.comparison.side === 'horizontal') {
                            fromLeft = this.parent.__configuration.width + (this.depthPadding * 2) + bar.x + bar.width + this.parent.__configuration.padding.l
                            if (fromLeft > this.parent.__configuration.width * 1.5) {
                                fromLeft = (this.parent.__configuration.baseWidth - (this.parent.__configuration.width + (this.depthPadding * 2)) - bar.x - this.parent.__configuration.padding.r) * -1
                                if (core.isComparison && this.parent.__configuration.comparison.side === 'overlay') {
                                    fromLeft += this.parent.__configuration.comparison.translate.x
                                }
                            } else {
                                if (core.isComparison && this.parent.__configuration.comparison.side === 'overlay') {
                                    fromLeft += this.parent.__configuration.comparison.translate.x
                                }
                            }
                        } else {
                            if (bar.y > this.parent.__configuration.height / 2) {
                                fromTop = this.parent.__configuration.height + (this.depthPadding * 2) + (this.parent.__configuration.baseHeight - (bar.y + (this.parent.__configuration.padding.t + this.parent.__configuration.padding.b + (((this.parent.__configuration.fonts.size * 1.75) + (this.parent.__configuration.fonts.size * 1.25)) * 1.5)))) * -1
                            } else {
                                fromTop = this.parent.__configuration.height + (this.depthPadding * 2) + bar.y + ((this.parent.__configuration.padding.t + this.parent.__configuration.padding.b + (((this.parent.__configuration.fonts.size * 1.75) + (this.parent.__configuration.fonts.size * 1.25)) * 1.5)))
                            }
                        }
                    }
                    let position = {x: fromLeft, y: fromTop};
                    this.parent.__hover.show(position, element, {})
                }
            } else {
                let bar = core.bars.get(element.unique);
                if (bar) {
                    new Promise((resolve) => {
                        bar.el.classList.remove('hover')
                        resolve()
                    })
                    this.parent.__hover.hide()
                }
            }
            resolve()
        })
    }

    /**
     * Unmount Tree specific traces
     * @returns {any}
     */
    unmount() {
        if (this.core.frame.__figures) {
            if (this.core.frame.figures) {
                this.core.frame.figures.remove()
                delete this.core.frame.figures
            }
            if (this.core.frame.__figures) {
                this.core.frame.__figures.remove()
                delete this.core.frame.__figures
            }
            if (this.core.frame.comparison) {
                if (this.core.frame.comparison.figures) {
                    this.core.frame.comparison.figures.remove()
                    delete this.core.frame.comparison.figures
                }
                if (this.core.frame.comparison.__figures) {
                    this.core.frame.comparison.__figures.remove()
                    delete this.core.frame.comparison.__figures
                }
            }
        }
        return super.unmount();
    }
}

DATAMA_CURRENT_EXTENSION = 'PowerBI';
const DATAMA_DEBUG = false;

var globalPowerbi = powerbi;
var DataMaLightCompareWaterfall;(()=>{var t={63952:(t,n,e)=>{"use strict";e.d(n,{M:()=>u});var r=e(87674),i=r.z.Zp,o=r.z.Kx;class a extends i{constructor(){super(...arguments),this.configuration=new r.z.ks({name:"configuration",displayName:"Config JSON",value:"",placeholder:""}),this.edition=new r.z.jF({name:"edition",displayName:"Edit mode",value:!0}),this.name="DataMaLightSettings",this.displayName="Datama settings",this.slices=[this.configuration,this.edition]}}class u extends o{constructor(){super(...arguments),this.DataMaLightSettings=new a,this.cards=[this.DataMaLightSettings]}}},6569:(t,n,e)=>{"use strict";e.d(n,{b:()=>a});var r=e(63952),i=e(87674),o=(e(9090),e(30327));class a{constructor(t){this.hasViewerPlans=!1,this.hasBuilderPlans=!1,this.currentVersion="APP_VERSION",this.latestVersion="",this.bucketPath="BUCKET_PATH",this.bucketFolder="BUCKET_FOLDER",this.license="",console.info("%c|\n|\n|\n|\n|\n","background: #222; color: #bada55"),console.info("%cEXTENSION INIT","background: #222; color: #bada55");try{this.formattingSettingsService=new i.O,this.host=t.host,this.licenseManager=t.host.licenseManager,this.colorPalette=t.host.colorPalette,this.selectionManager=t.host.createSelectionManager(),DATAMA_CURRENT_EXTENSION="powerbi",this.container=document.getElementById("sandbox-host"),this.container.id="datama-light",document.body.id="app",o.open=t=>{this.host.launchUrl(t)},this.licenseManager.getAvailableServicePlans().then((t=>{if(this.notificationType=t.isLicenseUnsupportedEnv?1:0,(null==t?void 0:t.plans.length)>0)for(let n of t.plans)if(1==n.state||2==n.state)switch(n.spIdentifier){case"datama1591255760056.datama-light-compare.datama_compare_builder":this.hasBuilderPlans=!0,this.license=DataMaLicense.encode("user",!1,["compare.waterfall"]);break;case"datama1591255760056.datama-light-compare.datama_compare_viewer":this.hasViewerPlans=!0,this.license=DataMaLicense.encode("user",!1,["compare.waterfall"])}this.hasBuilderPlans||this.hasViewerPlans||this.licenseManager.notifyLicenseRequired(this.notificationType).then((t=>{})).catch((t=>{console.error("ERROR",t)}))})).catch((t=>{console.error(t)}))}catch(t){console.error(t)}this.handleContextMenu(),document.body.addEventListener("click",(function(t){if(t.target instanceof HTMLAnchorElement){let n=t.target;(null==n?void 0:n.href.length)>0&&"#"!==(null==n?void 0:n.href)&&(o.open(n.href),t.preventDefault(),t.stopPropagation())}}))}update(t){console.info("%cExtension update","background: #222; color: #bada55");try{this.visualSettings=this.formattingSettingsService.populateFormattingSettingsModel(r.M,t.dataViews);let n=JSON.parse(JSON.stringify(t.dataViews[0])).table,e=(null==n?void 0:n.columns)||[];e.forEach((t=>{var n;return t.name=(null!==(n=t.expr.ref)&&void 0!==n?n:t.expr.arg.ref)||t.displayName}));let i=e.filter((t=>t.roles.dimension)).sort(((t,n)=>t.rolesIndex.dimension[0]-n.rolesIndex.dimension[0])),a=e.filter((t=>t.roles.metric)).sort(((t,n)=>t.rolesIndex.metric[0]-n.rolesIndex.metric[0])),u=[];(null==n?void 0:n.rows)&&(u=n.rows.map((t=>{let n={};return i.forEach((e=>{if(e.type.dateTime)try{let r=new Date(t[e.index]);const i=r.getTimezoneOffset();r=new Date(r.getTime()-60*i*1e3),n[e.name]=r.toISOString().split("T")[0]}catch(r){n[e.name]=t[e.index].replace(/(\d{4})(\d{2})(\d{2})/g,"$1-$2-$3").replace(/(\d{4})-(\d{2})-(\d{2})T.*(Z$)/gm,"$1-$2-$3")}else n[e.name]=t[e.index]})),a.forEach((e=>n[e.name]=t[e.index])),n})));let c=this.loadTheme(this.colorPalette),s={default:!0};DataMaLog.info("DataMa Light - data",u),this.visualSettings.DataMaLightSettings.configuration.value&&"string"==typeof this.visualSettings.DataMaLightSettings.configuration.value&&this.visualSettings.DataMaLightSettings.configuration.value.length&&(s=JSON.parse(this.visualSettings.DataMaLightSettings.configuration.value)),s.metrics=a.map((t=>t.name)),s.dimensions=i.map((t=>t.name));let f=this.visualSettings.DataMaLightSettings.edition.value,l=new DataMaNotifications({silent:!f}),h=SettingsMutator.getSettingsFromSource({notification:l,theme:c,configuration:s,source:u,configurable:f,viewer:this.hasViewerPlans,subscribe:"https://appsource.microsoft.com/en-us/product/power-bi-visuals/datama1591255760056.datama-light-compare?tab=PlansAndPrice",license:this.license});this.instance&&(this.instance.unmount(),h.configuration=this.instance.__core__.__settings__.configuration),l.dismiss(),this.instance=new DataMaLight(h,{target:"datama-light",solutions:["compare"]}),this.instance.get(["compare.waterfall"]).then((()=>{(null==h?void 0:h.debug)&&this.instance.debug()})),o.DataMaLightInstance=this.instance}catch(t){console.error(t)}}loadTheme(t){let n=a(t.backgroundDark.value),e=a(t.background.value),r=a(t.foregroundDark.value),i=t.positive.value!=t.backgroundLight.value?t.positive.value:t.foreground.value,o=t.negative.value!=t.backgroundLight.value?t.negative.value:t.foreground.value;function a(t){let n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null}return{application:{"bg-light-rgb":e.r+", "+e.g+", "+e.b,"bg-dark-rgb":n.r+", "+n.g+", "+n.b,"dark-rgb":r.r+", "+r.g+", "+r.b,"font-family":"Montserrat, Roboto, Arial, sans-serif"},waterfall:{out:o+"88",in:i+"88",net:"#4682B4",Up:i,Down:o},plots:t.colors.map((t=>t.value))}}getFormattingModel(){return this.formattingSettingsService.buildFormattingModel(this.visualSettings)}handleContextMenu(){document.body.addEventListener("contextmenu",(t=>{["datama-waterfall-bar","datama-waterfall-bar-annotations","datama-waterfall-bar-texts"].every((n=>!t.target.classList.contains(n)))&&(this.selectionManager.showContextMenu({},{x:t.clientX,y:t.clientY}),t.preventDefault())}))}}},9090:function(t,n,e){var r=e(30327);e(49313),function(t){"use strict";function n(t,n){return null==t||null==n?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function e(t){let e=t,r=t,i=t;function o(t,n,e=0,o=t.length){if(e<o){if(0!==r(n,n))return o;do{const r=e+o>>>1;i(t[r],n)<0?e=r+1:o=r}while(e<o)}return e}return 2!==t.length&&(e=(n,e)=>t(n)-e,r=n,i=(e,r)=>n(t(e),r)),{left:o,center:function(t,n,r=0,i=t.length){const a=o(t,n,r,i-1);return a>r&&e(t[a-1],n)>-e(t[a],n)?a-1:a},right:function(t,n,e=0,o=t.length){if(e<o){if(0!==r(n,n))return o;do{const r=e+o>>>1;i(t[r],n)<=0?e=r+1:o=r}while(e<o)}return e}}}function i(t){return null===t?NaN:+t}const o=e(n),a=o.right,u=o.left,c=e(i).center;var s=a;function f(t,n){let e=0;if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&++e;else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(i=+i)>=i&&++e}return e}function l(t){return 0|t.length}function h(t){return!(t>0)}function d(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function p(t,n){let e,r=0,i=0,o=0;if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&(e=n-i,i+=e/++r,o+=e*(n-i));else{let a=-1;for(let u of t)null!=(u=n(u,++a,t))&&(u=+u)>=u&&(e=u-i,i+=e/++r,o+=e*(u-i))}if(r>1)return o/(r-1)}function g(t,n){const e=p(t,n);return e?Math.sqrt(e):e}function y(t,n){let e,r;if(void 0===n)for(const n of t)null!=n&&(void 0===e?n>=n&&(e=r=n):(e>n&&(e=n),r<n&&(r=n)));else{let i=-1;for(let o of t)null!=(o=n(o,++i,t))&&(void 0===e?o>=o&&(e=r=o):(e>o&&(e=o),r<o&&(r=o)))}return[e,r]}class v{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const i=n[r],o=t+i,a=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);a&&(n[e++]=a),t=o}return n[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let n,e,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(n=o,e=t[--i],o=n+e,r=e-(o-n),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(e=2*r,n=o+e,e==n-o&&(o=n))}return o}}class _ extends Map{constructor(t,n=w){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=t)for(const[n,e]of t)this.set(n,e)}get(t){return super.get(b(this,t))}has(t){return super.has(b(this,t))}set(t,n){return super.set(A(this,t),n)}delete(t){return super.delete(x(this,t))}}class m extends Set{constructor(t,n=w){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=t)for(const n of t)this.add(n)}has(t){return super.has(b(this,t))}add(t){return super.add(A(this,t))}delete(t){return super.delete(x(this,t))}}function b({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):e}function A({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):(t.set(r,e),e)}function x({_intern:t,_key:n},e){const r=n(e);return t.has(r)&&(e=t.get(r),t.delete(r)),e}function w(t){return null!==t&&"object"==typeof t?t.valueOf():t}function M(t){return t}function T(t,...n){return D(t,M,M,n)}function N(t,...n){return D(t,Array.from,M,n)}function S(t,n){for(let e=1,r=n.length;e<r;++e)t=t.flatMap((t=>t.pop().map((([n,e])=>[...t,n,e]))));return t}function k(t,n,...e){return D(t,M,n,e)}function E(t,n,...e){return D(t,Array.from,n,e)}function C(t){if(1!==t.length)throw new Error("duplicate key");return t[0]}function D(t,n,e,r){return function t(i,o){if(o>=r.length)return e(i);const a=new _,u=r[o++];let c=-1;for(const t of i){const n=u(t,++c,i),e=a.get(n);e?e.push(t):a.set(n,[t])}for(const[n,e]of a)a.set(n,t(e,o));return n(a)}(t,0)}function F(t,n){return Array.from(n,(n=>t[n]))}function P(t,...n){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);let[e]=n;if(e&&2!==e.length||n.length>1){const r=Uint32Array.from(t,((t,n)=>n));return n.length>1?(n=n.map((n=>t.map(n))),r.sort(((t,e)=>{for(const r of n){const n=I(r[t],r[e]);if(n)return n}}))):(e=t.map(e),r.sort(((t,n)=>I(e[t],e[n])))),F(t,r)}return t.sort(z(e))}function z(t=n){if(t===n)return I;if("function"!=typeof t)throw new TypeError("compare is not a function");return(n,e)=>{const r=t(n,e);return r||0===r?r:(0===t(e,e))-(0===t(n,n))}}function I(t,n){return(null==t||!(t>=t))-(null==n||!(n>=n))||(t<n?-1:t>n?1:0)}var U=Array.prototype.slice;function R(t){return()=>t}var j=Math.sqrt(50),L=Math.sqrt(10),O=Math.sqrt(2);function Y(t,n,e){var r,i,o,a,u=-1;if(e=+e,(t=+t)==(n=+n)&&e>0)return[t];if((r=n<t)&&(i=t,t=n,n=i),0===(a=q(t,n,e))||!isFinite(a))return[];if(a>0){let e=Math.round(t/a),r=Math.round(n/a);for(e*a<t&&++e,r*a>n&&--r,o=new Array(i=r-e+1);++u<i;)o[u]=(e+u)*a}else{a=-a;let e=Math.round(t*a),r=Math.round(n*a);for(e/a<t&&++e,r/a>n&&--r,o=new Array(i=r-e+1);++u<i;)o[u]=(e+u)/a}return r&&o.reverse(),o}function q(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=j?10:o>=L?5:o>=O?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=j?10:o>=L?5:o>=O?2:1)}function B(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=j?i*=10:o>=L?i*=5:o>=O&&(i*=2),n<t?-i:i}function G(t,n,e){let r;for(;;){const i=q(t,n,e);if(i===r||0===i||!isFinite(i))return[t,n];i>0?(t=Math.floor(t/i)*i,n=Math.ceil(n/i)*i):i<0&&(t=Math.ceil(t*i)/i,n=Math.floor(n*i)/i),r=i}}function H(t){return Math.ceil(Math.log(f(t))/Math.LN2)+1}function Z(){var t=M,n=y,e=H;function r(r){Array.isArray(r)||(r=Array.from(r));var i,o,a=r.length,u=new Array(a);for(i=0;i<a;++i)u[i]=t(r[i],i,r);var c=n(u),f=c[0],l=c[1],h=e(u,f,l);if(!Array.isArray(h)){const t=l,e=+h;if(n===y&&([f,l]=G(f,l,e)),(h=Y(f,l,e))[h.length-1]>=l)if(t>=l&&n===y){const t=q(f,l,e);isFinite(t)&&(t>0?l=(Math.floor(l/t)+1)*t:t<0&&(l=(Math.ceil(l*-t)+1)/-t))}else h.pop()}for(var d=h.length;h[0]<=f;)h.shift(),--d;for(;h[d-1]>l;)h.pop(),--d;var p,g=new Array(d+1);for(i=0;i<=d;++i)(p=g[i]=[]).x0=i>0?h[i-1]:f,p.x1=i<d?h[i]:l;for(i=0;i<a;++i)null!=(o=u[i])&&f<=o&&o<=l&&g[s(h,o,0,d)].push(r[i]);return g}return r.value=function(n){return arguments.length?(t="function"==typeof n?n:R(n),r):t},r.domain=function(t){return arguments.length?(n="function"==typeof t?t:R([t[0],t[1]]),r):n},r.thresholds=function(t){return arguments.length?(e="function"==typeof t?t:Array.isArray(t)?R(U.call(t)):R(t),r):e},r}function W(t,n){let e;if(void 0===n)for(const n of t)null!=n&&(e<n||void 0===e&&n>=n)&&(e=n);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(e<i||void 0===e&&i>=i)&&(e=i)}return e}function V(t,n){let e;if(void 0===n)for(const n of t)null!=n&&(e>n||void 0===e&&n>=n)&&(e=n);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(e>i||void 0===e&&i>=i)&&(e=i)}return e}function $(t,n,e=0,r=t.length-1,i){for(i=void 0===i?I:z(i);r>e;){if(r-e>600){const o=r-e+1,a=n-e+1,u=Math.log(o),c=.5*Math.exp(2*u/3),s=.5*Math.sqrt(u*c*(o-c)/o)*(a-o/2<0?-1:1);$(t,n,Math.max(e,Math.floor(n-a*c/o+s)),Math.min(r,Math.floor(n+(o-a)*c/o+s)),i)}const o=t[n];let a=e,u=r;for(K(t,e,n),i(t[r],o)>0&&K(t,e,r);a<u;){for(K(t,a,u),++a,--u;i(t[a],o)<0;)++a;for(;i(t[u],o)>0;)--u}0===i(t[e],o)?K(t,e,u):(++u,K(t,u,r)),u<=n&&(e=u+1),n<=u&&(r=u-1)}return t}function K(t,n,e){const r=t[n];t[n]=t[e],t[e]=r}function Q(t,n,e){if(t=Float64Array.from(function*(t,n){if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&(yield n);else{let e=-1;for(let r of t)null!=(r=n(r,++e,t))&&(r=+r)>=r&&(yield r)}}(t,e)),r=t.length){if((n=+n)<=0||r<2)return V(t);if(n>=1)return W(t);var r,i=(r-1)*n,o=Math.floor(i),a=W($(t,o).subarray(0,o+1));return a+(V(t.subarray(o+1))-a)*(i-o)}}function X(t,n,e=i){if(r=t.length){if((n=+n)<=0||r<2)return+e(t[0],0,t);if(n>=1)return+e(t[r-1],r-1,t);var r,o=(r-1)*n,a=Math.floor(o),u=+e(t[a],a,t);return u+(+e(t[a+1],a+1,t)-u)*(o-a)}}function J(t,n){let e,r=-1,i=-1;if(void 0===n)for(const n of t)++i,null!=n&&(e<n||void 0===e&&n>=n)&&(e=n,r=i);else for(let o of t)null!=(o=n(o,++i,t))&&(e<o||void 0===e&&o>=o)&&(e=o,r=i);return r}function tt(t){return Array.from(function*(t){for(const n of t)yield*n}(t))}function nt(t,n){let e,r=-1,i=-1;if(void 0===n)for(const n of t)++i,null!=n&&(e>n||void 0===e&&n>=n)&&(e=n,r=i);else for(let o of t)null!=(o=n(o,++i,t))&&(e>o||void 0===e&&o>=o)&&(e=o,r=i);return r}function et(t,n){return[t,n]}function rt(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o}function it(t,e=n){if(1===e.length)return nt(t,e);let r,i=-1,o=-1;for(const n of t)++o,(i<0?0===e(n,n):e(n,r)<0)&&(r=n,i=o);return i}var ot=at(Math.random);function at(t){return function(n,e=0,r=n.length){let i=r-(e=+e);for(;i;){const r=t()*i--|0,o=n[i+e];n[i+e]=n[r+e],n[r+e]=o}return n}}function ut(t){if(!(i=t.length))return[];for(var n=-1,e=V(t,ct),r=new Array(e);++n<e;)for(var i,o=-1,a=r[n]=new Array(i);++o<i;)a[o]=t[o][n];return r}function ct(t){return t.length}function st(t){return t instanceof m?t:new m(t)}function ft(t,n){const e=t[Symbol.iterator](),r=new Set;for(const t of n){const n=lt(t);if(r.has(n))continue;let i,o;for(;({value:i,done:o}=e.next());){if(o)return!1;const t=lt(i);if(r.add(t),Object.is(n,t))break}}return!0}function lt(t){return null!==t&&"object"==typeof t?t.valueOf():t}function ht(t){return t}var dt=1e-6;function pt(t){return"translate("+t+",0)"}function gt(t){return"translate(0,"+t+")"}function yt(t){return n=>+t(n)}function vt(t,n){return n=Math.max(0,t.bandwidth()-2*n)/2,t.round()&&(n=Math.round(n)),e=>+t(e)+n}function _t(){return!this.__axis}function mt(t,n){var e=[],i=null,o=null,a=6,u=6,c=3,s=void 0!==r&&r.devicePixelRatio>1?0:.5,f=1===t||4===t?-1:1,l=4===t||2===t?"x":"y",h=1===t||3===t?pt:gt;function d(r){var d=null==i?n.ticks?n.ticks.apply(n,e):n.domain():i,p=null==o?n.tickFormat?n.tickFormat.apply(n,e):ht:o,g=Math.max(a,0)+c,y=n.range(),v=+y[0]+s,_=+y[y.length-1]+s,m=(n.bandwidth?vt:yt)(n.copy(),s),b=r.selection?r.selection():r,A=b.selectAll(".domain").data([null]),x=b.selectAll(".tick").data(d,n).order(),w=x.exit(),M=x.enter().append("g").attr("class","tick"),T=x.select("line"),N=x.select("text");A=A.merge(A.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(M),T=T.merge(M.append("line").attr("stroke","currentColor").attr(l+"2",f*a)),N=N.merge(M.append("text").attr("fill","currentColor").attr(l,f*g).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),r!==b&&(A=A.transition(r),x=x.transition(r),T=T.transition(r),N=N.transition(r),w=w.transition(r).attr("opacity",dt).attr("transform",(function(t){return isFinite(t=m(t))?h(t+s):this.getAttribute("transform")})),M.attr("opacity",dt).attr("transform",(function(t){var n=this.parentNode.__axis;return h((n&&isFinite(n=n(t))?n:m(t))+s)}))),w.remove(),A.attr("d",4===t||2===t?u?"M"+f*u+","+v+"H"+s+"V"+_+"H"+f*u:"M"+s+","+v+"V"+_:u?"M"+v+","+f*u+"V"+s+"H"+_+"V"+f*u:"M"+v+","+s+"H"+_),x.attr("opacity",1).attr("transform",(function(t){return h(m(t)+s)})),T.attr(l+"2",f*a),N.attr(l,f*g).text(p),b.filter(_t).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),b.each((function(){this.__axis=m}))}return d.scale=function(t){return arguments.length?(n=t,d):n},d.ticks=function(){return e=Array.from(arguments),d},d.tickArguments=function(t){return arguments.length?(e=null==t?[]:Array.from(t),d):e.slice()},d.tickValues=function(t){return arguments.length?(i=null==t?null:Array.from(t),d):i&&i.slice()},d.tickFormat=function(t){return arguments.length?(o=t,d):o},d.tickSize=function(t){return arguments.length?(a=u=+t,d):a},d.tickSizeInner=function(t){return arguments.length?(a=+t,d):a},d.tickSizeOuter=function(t){return arguments.length?(u=+t,d):u},d.tickPadding=function(t){return arguments.length?(c=+t,d):c},d.offset=function(t){return arguments.length?(s=+t,d):s},d}var bt={value:()=>{}};function At(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new xt(r)}function xt(t){this._=t}function wt(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function Mt(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=bt,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}xt.prototype=At.prototype={constructor:xt,on:function(t,n){var e,r=this._,i=function(t,n){return t.trim().split(/^|\s+/).map((function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))}(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++o<a;)if(e=(t=i[o]).type)r[e]=Mt(r[e],t.name,n);else if(null==n)for(e in r)r[e]=Mt(r[e],t.name,null);return this}for(;++o<a;)if((e=(t=i[o]).type)&&(e=wt(r[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new xt(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var Tt="http://www.w3.org/1999/xhtml",Nt={svg:"http://www.w3.org/2000/svg",xhtml:Tt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function St(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Nt.hasOwnProperty(n)?{space:Nt[n],local:t}:t}function kt(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===Tt&&n.documentElement.namespaceURI===Tt?n.createElement(t):n.createElementNS(e,t)}}function Et(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ct(t){var n=St(t);return(n.local?Et:kt)(n)}function Dt(){}function Ft(t){return null==t?Dt:function(){return this.querySelector(t)}}function Pt(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function zt(){return[]}function It(t){return null==t?zt:function(){return this.querySelectorAll(t)}}function Ut(t){return function(){return this.matches(t)}}function Rt(t){return function(n){return n.matches(t)}}var jt=Array.prototype.find;function Lt(){return this.firstElementChild}var Ot=Array.prototype.filter;function Yt(){return Array.from(this.children)}function qt(t){return new Array(t.length)}function Bt(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function Gt(t,n,e,r,i,o){for(var a,u=0,c=n.length,s=o.length;u<s;++u)(a=n[u])?(a.__data__=o[u],r[u]=a):e[u]=new Bt(t,o[u]);for(;u<c;++u)(a=n[u])&&(i[u]=a)}function Ht(t,n,e,r,i,o,a){var u,c,s,f=new Map,l=n.length,h=o.length,d=new Array(l);for(u=0;u<l;++u)(c=n[u])&&(d[u]=s=a.call(c,c.__data__,u,n)+"",f.has(s)?i[u]=c:f.set(s,c));for(u=0;u<h;++u)s=a.call(t,o[u],u,o)+"",(c=f.get(s))?(r[u]=c,c.__data__=o[u],f.delete(s)):e[u]=new Bt(t,o[u]);for(u=0;u<l;++u)(c=n[u])&&f.get(d[u])===c&&(i[u]=c)}function Zt(t){return t.__data__}function Wt(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Vt(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function $t(t){return function(){this.removeAttribute(t)}}function Kt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Qt(t,n){return function(){this.setAttribute(t,n)}}function Xt(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function Jt(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function tn(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function nn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function en(t){return function(){this.style.removeProperty(t)}}function rn(t,n,e){return function(){this.style.setProperty(t,n,e)}}function on(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function an(t,n){return t.style.getPropertyValue(n)||nn(t).getComputedStyle(t,null).getPropertyValue(n)}function un(t){return function(){delete this[t]}}function cn(t,n){return function(){this[t]=n}}function sn(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function fn(t){return t.trim().split(/^|\s+/)}function ln(t){return t.classList||new hn(t)}function hn(t){this._node=t,this._names=fn(t.getAttribute("class")||"")}function dn(t,n){for(var e=ln(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function pn(t,n){for(var e=ln(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function gn(t){return function(){dn(this,t)}}function yn(t){return function(){pn(this,t)}}function vn(t,n){return function(){(n.apply(this,arguments)?dn:pn)(this,t)}}function _n(){this.textContent=""}function mn(t){return function(){this.textContent=t}}function bn(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function An(){this.innerHTML=""}function xn(t){return function(){this.innerHTML=t}}function wn(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}function Mn(){this.nextSibling&&this.parentNode.appendChild(this)}function Tn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Nn(){return null}function Sn(){var t=this.parentNode;t&&t.removeChild(this)}function kn(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function En(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Cn(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.options);++i?n.length=i:delete this.__on}}}function Dn(t,n,e){return function(){var r,i=this.__on,o=function(t){return function(n){t.call(this,n,this.__data__)}}(n);if(i)for(var a=0,u=i.length;a<u;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=e),void(r.value=n);this.addEventListener(t.type,o,e),r={type:t.type,name:t.name,value:n,listener:o,options:e},i?i.push(r):this.__on=[r]}}function Fn(t,n,e){var r=nn(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function Pn(t,n){return function(){return Fn(this,t,n)}}function zn(t,n){return function(){return Fn(this,t,n.apply(this,arguments))}}Bt.prototype={constructor:Bt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},hn.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var In=[null];function Un(t,n){this._groups=t,this._parents=n}function Rn(){return new Un([[document.documentElement]],In)}function jn(t){return"string"==typeof t?new Un([[document.querySelector(t)]],[document.documentElement]):new Un([[t]],In)}Un.prototype=Rn.prototype={constructor:Un,select:function(t){"function"!=typeof t&&(t=Ft(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a,u=n[i],c=u.length,s=r[i]=new Array(c),f=0;f<c;++f)(o=u[f])&&(a=t.call(o,o.__data__,f,u))&&("__data__"in o&&(a.__data__=o.__data__),s[f]=a);return new Un(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return Pt(t.apply(this,arguments))}}(t):It(t);for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var a,u=n[o],c=u.length,s=0;s<c;++s)(a=u[s])&&(r.push(t.call(a,a.__data__,s,u)),i.push(a));return new Un(r,i)},selectChild:function(t){return this.select(null==t?Lt:function(t){return function(){return jt.call(this.children,t)}}("function"==typeof t?t:Rt(t)))},selectChildren:function(t){return this.selectAll(null==t?Yt:function(t){return function(){return Ot.call(this.children,t)}}("function"==typeof t?t:Rt(t)))},filter:function(t){"function"!=typeof t&&(t=Ut(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],u=a.length,c=r[i]=[],s=0;s<u;++s)(o=a[s])&&t.call(o,o.__data__,s,a)&&c.push(o);return new Un(r,this._parents)},data:function(t,n){if(!arguments.length)return Array.from(this,Zt);var e=n?Ht:Gt,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=i.length,a=new Array(o),u=new Array(o),c=new Array(o),s=0;s<o;++s){var f=r[s],l=i[s],h=l.length,d=Wt(t.call(f,f&&f.__data__,s,r)),p=d.length,g=u[s]=new Array(p),y=a[s]=new Array(p);e(f,l,g,y,c[s]=new Array(h),d,n);for(var v,_,m=0,b=0;m<p;++m)if(v=g[m]){for(m>=b&&(b=m+1);!(_=y[b])&&++b<p;);v._next=_||null}}return(a=new Un(a,r))._enter=u,a._exit=c,a},enter:function(){return new Un(this._enter||this._groups.map(qt),this._parents)},exit:function(){return new Un(this._exit||this._groups.map(qt),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=n&&(i=n(i))&&(i=i.selection()),null==e?o.remove():e(o),r&&i?r.merge(i).order():i},merge:function(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,o=r.length,a=Math.min(i,o),u=new Array(i),c=0;c<a;++c)for(var s,f=e[c],l=r[c],h=f.length,d=u[c]=new Array(h),p=0;p<h;++p)(s=f[p]||l[p])&&(d[p]=s);for(;c<i;++c)u[c]=e[c];return new Un(u,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=Vt);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a,u=e[o],c=u.length,s=i[o]=new Array(c),f=0;f<c;++f)(a=u[f])&&(s[f]=a);s.sort(n)}return new Un(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let t=0;for(const n of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,n){var e=St(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?Kt:$t:"function"==typeof n?e.local?tn:Jt:e.local?Xt:Qt)(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?en:"function"==typeof n?on:rn)(t,n,null==e?"":e)):an(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?un:"function"==typeof n?sn:cn)(t,n)):this.node()[t]},classed:function(t,n){var e=fn(t+"");if(arguments.length<2){for(var r=ln(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?vn:n?gn:yn)(e,n))},text:function(t){return arguments.length?this.each(null==t?_n:("function"==typeof t?bn:mn)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?An:("function"==typeof t?wn:xn)(t)):this.node().innerHTML},raise:function(){return this.each(Mn)},lower:function(){return this.each(Tn)},append:function(t){var n="function"==typeof t?t:Ct(t);return this.select((function(){return this.appendChild(n.apply(this,arguments))}))},insert:function(t,n){var e="function"==typeof t?t:Ct(t),r=null==n?Nn:"function"==typeof n?n:Ft(n);return this.select((function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Sn)},clone:function(t){return this.select(t?En:kn)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}))}(t+""),a=o.length;if(!(arguments.length<2)){for(u=n?Dn:Cn,r=0;r<a;++r)this.each(u(o[r],n,e));return this}var u=this.node().__on;if(u)for(var c,s=0,f=u.length;s<f;++s)for(r=0,c=u[s];r<a;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(t,n){return this.each(("function"==typeof n?zn:Pn)(t,n))},[Symbol.iterator]:function*(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r,i=t[n],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};var Ln=0;function On(){return new Yn}function Yn(){this._="@"+(++Ln).toString(36)}function qn(t){let n;for(;n=t.sourceEvent;)t=n;return t}function Bn(t,n){if(t=qn(t),void 0===n&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(n.getScreenCTM().inverse())).x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]}Yn.prototype=On.prototype={constructor:Yn,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};const Gn={passive:!1},Hn={capture:!0,passive:!1};function Zn(t){t.stopImmediatePropagation()}function Wn(t){t.preventDefault(),t.stopImmediatePropagation()}function Vn(t){var n=t.document.documentElement,e=jn(t).on("dragstart.drag",Wn,Hn);"onselectstart"in n?e.on("selectstart.drag",Wn,Hn):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function $n(t,n){var e=t.document.documentElement,r=jn(t).on("dragstart.drag",null);n&&(r.on("click.drag",Wn,Hn),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}var Kn=t=>()=>t;function Qn(t,{sourceEvent:n,subject:e,target:r,identifier:i,active:o,x:a,y:u,dx:c,dy:s,dispatch:f}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:s,enumerable:!0,configurable:!0},_:{value:f}})}function Xn(t){return!t.ctrlKey&&!t.button}function Jn(){return this.parentNode}function te(t,n){return null==n?{x:t.x,y:t.y}:n}function ne(){return navigator.maxTouchPoints||"ontouchstart"in this}function ee(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function re(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function ie(){}Qn.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var oe=.7,ae=1/oe,ue="\\s*([+-]?\\d+)\\s*",ce="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",se="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fe=/^#([0-9a-f]{3,8})$/,le=new RegExp("^rgb\\("+[ue,ue,ue]+"\\)$"),he=new RegExp("^rgb\\("+[se,se,se]+"\\)$"),de=new RegExp("^rgba\\("+[ue,ue,ue,ce]+"\\)$"),pe=new RegExp("^rgba\\("+[se,se,se,ce]+"\\)$"),ge=new RegExp("^hsl\\("+[ce,se,se]+"\\)$"),ye=new RegExp("^hsla\\("+[ce,se,se,ce]+"\\)$"),ve={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function _e(){return this.rgb().formatHex()}function me(){return this.rgb().formatRgb()}function be(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=fe.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?Ae(n):3===e?new Te(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?xe(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?xe(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=le.exec(t))?new Te(n[1],n[2],n[3],1):(n=he.exec(t))?new Te(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=de.exec(t))?xe(n[1],n[2],n[3],n[4]):(n=pe.exec(t))?xe(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=ge.exec(t))?Ee(n[1],n[2]/100,n[3]/100,1):(n=ye.exec(t))?Ee(n[1],n[2]/100,n[3]/100,n[4]):ve.hasOwnProperty(t)?Ae(ve[t]):"transparent"===t?new Te(NaN,NaN,NaN,0):null}function Ae(t){return new Te(t>>16&255,t>>8&255,255&t,1)}function xe(t,n,e,r){return r<=0&&(t=n=e=NaN),new Te(t,n,e,r)}function we(t){return t instanceof ie||(t=be(t)),t?new Te((t=t.rgb()).r,t.g,t.b,t.opacity):new Te}function Me(t,n,e,r){return 1===arguments.length?we(t):new Te(t,n,e,null==r?1:r)}function Te(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function Ne(){return"#"+ke(this.r)+ke(this.g)+ke(this.b)}function Se(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function ke(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Ee(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new Fe(t,n,e,r)}function Ce(t){if(t instanceof Fe)return new Fe(t.h,t.s,t.l,t.opacity);if(t instanceof ie||(t=be(t)),!t)return new Fe;if(t instanceof Fe)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),a=NaN,u=o-i,c=(o+i)/2;return u?(a=n===o?(e-r)/u+6*(e<r):e===o?(r-n)/u+2:(n-e)/u+4,u/=c<.5?o+i:2-o-i,a*=60):u=c>0&&c<1?0:a,new Fe(a,u,c,t.opacity)}function De(t,n,e,r){return 1===arguments.length?Ce(t):new Fe(t,n,e,null==r?1:r)}function Fe(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Pe(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}ee(ie,be,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:_e,formatHex:_e,formatHsl:function(){return Ce(this).formatHsl()},formatRgb:me,toString:me}),ee(Te,Me,re(ie,{brighter:function(t){return t=null==t?ae:Math.pow(ae,t),new Te(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?oe:Math.pow(oe,t),new Te(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ne,formatHex:Ne,formatRgb:Se,toString:Se})),ee(Fe,De,re(ie,{brighter:function(t){return t=null==t?ae:Math.pow(ae,t),new Fe(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?oe:Math.pow(oe,t),new Fe(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new Te(Pe(t>=240?t-240:t+120,i,r),Pe(t,i,r),Pe(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const ze=Math.PI/180,Ie=180/Math.PI,Ue=.96422,Re=.82521,je=4/29,Le=6/29,Oe=3*Le*Le;function Ye(t){if(t instanceof Be)return new Be(t.l,t.a,t.b,t.opacity);if(t instanceof Ke)return Qe(t);t instanceof Te||(t=we(t));var n,e,r=We(t.r),i=We(t.g),o=We(t.b),a=Ge((.2225045*r+.7168786*i+.0606169*o)/1);return r===i&&i===o?n=e=a:(n=Ge((.4360747*r+.3850649*i+.1430804*o)/Ue),e=Ge((.0139322*r+.0971045*i+.7141733*o)/Re)),new Be(116*a-16,500*(n-a),200*(a-e),t.opacity)}function qe(t,n,e,r){return 1===arguments.length?Ye(t):new Be(t,n,e,null==r?1:r)}function Be(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function Ge(t){return t>.008856451679035631?Math.pow(t,1/3):t/Oe+je}function He(t){return t>Le?t*t*t:Oe*(t-je)}function Ze(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function We(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ve(t){if(t instanceof Ke)return new Ke(t.h,t.c,t.l,t.opacity);if(t instanceof Be||(t=Ye(t)),0===t.a&&0===t.b)return new Ke(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*Ie;return new Ke(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function $e(t,n,e,r){return 1===arguments.length?Ve(t):new Ke(t,n,e,null==r?1:r)}function Ke(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function Qe(t){if(isNaN(t.h))return new Be(t.l,0,0,t.opacity);var n=t.h*ze;return new Be(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}ee(Be,qe,re(ie,{brighter:function(t){return new Be(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Be(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return new Te(Ze(3.1338561*(n=Ue*He(n))-1.6168667*(t=1*He(t))-.4906146*(e=Re*He(e))),Ze(-.9787684*n+1.9161415*t+.033454*e),Ze(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}})),ee(Ke,$e,re(ie,{brighter:function(t){return new Ke(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Ke(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Qe(this).rgb()}}));var Xe=-.14861,Je=1.78277,tr=-.29227,nr=-.90649,er=1.97294,rr=er*nr,ir=er*Je,or=Je*tr-nr*Xe;function ar(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof ur)return new ur(t.h,t.s,t.l,t.opacity);t instanceof Te||(t=we(t));var n=t.r/255,e=t.g/255,r=t.b/255,i=(or*r+rr*n-ir*e)/(or+rr-ir),o=r-i,a=(er*(e-i)-tr*o)/nr,u=Math.sqrt(a*a+o*o)/(er*i*(1-i)),c=u?Math.atan2(a,o)*Ie-120:NaN;return new ur(c<0?c+360:c,u,i,t.opacity)}(t):new ur(t,n,e,null==r?1:r)}function ur(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function cr(t,n,e,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*n+(4-6*o+3*a)*e+(1+3*t+3*o-3*a)*r+a*i)/6}function sr(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,u=r<n-1?t[r+2]:2*o-i;return cr((e-r/n)*n,a,i,o,u)}}function fr(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n),i=t[(r+n-1)%n],o=t[r%n],a=t[(r+1)%n],u=t[(r+2)%n];return cr((e-r/n)*n,i,o,a,u)}}ee(ur,ar,re(ie,{brighter:function(t){return t=null==t?ae:Math.pow(ae,t),new ur(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?oe:Math.pow(oe,t),new ur(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*ze,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new Te(255*(n+e*(Xe*r+Je*i)),255*(n+e*(tr*r+nr*i)),255*(n+e*(er*r)),this.opacity)}}));var lr=t=>()=>t;function hr(t,n){return function(e){return t+e*n}}function dr(t,n){var e=n-t;return e?hr(t,e>180||e<-180?e-360*Math.round(e/360):e):lr(isNaN(t)?n:t)}function pr(t,n){var e=n-t;return e?hr(t,e):lr(isNaN(t)?n:t)}var gr=function t(n){var e=function(t){return 1==(t=+t)?pr:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):lr(isNaN(n)?e:n)}}(n);function r(t,n){var r=e((t=Me(t)).r,(n=Me(n)).r),i=e(t.g,n.g),o=e(t.b,n.b),a=pr(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=i(n),t.b=o(n),t.opacity=a(n),t+""}}return r.gamma=t,r}(1);function yr(t){return function(n){var e,r,i=n.length,o=new Array(i),a=new Array(i),u=new Array(i);for(e=0;e<i;++e)r=Me(n[e]),o[e]=r.r||0,a[e]=r.g||0,u[e]=r.b||0;return o=t(o),a=t(a),u=t(u),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=u(t),r+""}}}var vr=yr(sr),_r=yr(fr);function mr(t,n){n||(n=[]);var e,r=t?Math.min(n.length,t.length):0,i=n.slice();return function(o){for(e=0;e<r;++e)i[e]=t[e]*(1-o)+n[e]*o;return i}}function br(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ar(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(e=0;e<i;++e)o[e]=kr(t[e],n[e]);for(;e<r;++e)a[e]=n[e];return function(t){for(e=0;e<i;++e)a[e]=o[e](t);return a}}function xr(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function wr(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function Mr(t,n){var e,r={},i={};for(e in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)e in t?r[e]=kr(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}var Tr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Nr=new RegExp(Tr.source,"g");function Sr(t,n){var e,r,i,o=Tr.lastIndex=Nr.lastIndex=0,a=-1,u=[],c=[];for(t+="",n+="";(e=Tr.exec(t))&&(r=Nr.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(e=e[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,c.push({i:a,x:wr(e,r)})),o=Nr.lastIndex;return o<n.length&&(i=n.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?c[0]?function(t){return function(n){return t(n)+""}}(c[0].x):function(t){return function(){return t}}(n):(n=c.length,function(t){for(var e,r=0;r<n;++r)u[(e=c[r]).i]=e.x(t);return u.join("")})}function kr(t,n){var e,r=typeof n;return null==n||"boolean"===r?lr(n):("number"===r?wr:"string"===r?(e=be(n))?(n=e,gr):Sr:n instanceof be?gr:n instanceof Date?xr:br(n)?mr:Array.isArray(n)?Ar:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?Mr:wr)(t,n)}function Er(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}var Cr,Dr=180/Math.PI,Fr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Pr(t,n,e,r,i,o){var a,u,c;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(c=t*e+n*r)&&(e-=t*c,r-=n*c),(u=Math.sqrt(e*e+r*r))&&(e/=u,r/=u,c/=u),t*r<n*e&&(t=-t,n=-n,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*Dr,skewX:Math.atan(c)*Dr,scaleX:a,scaleY:u}}function zr(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var u=[],c=[];return o=t(o),a=t(a),function(t,r,i,o,a,u){if(t!==i||r!==o){var c=a.push("translate(",null,n,null,e);u.push({i:c-4,x:wr(t,i)},{i:c-2,x:wr(r,o)})}else(i||o)&&a.push("translate("+i+n+o+e)}(o.translateX,o.translateY,a.translateX,a.translateY,u,c),function(t,n,e,o){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),o.push({i:e.push(i(e)+"rotate(",null,r)-2,x:wr(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}(o.rotate,a.rotate,u,c),function(t,n,e,o){t!==n?o.push({i:e.push(i(e)+"skewX(",null,r)-2,x:wr(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}(o.skewX,a.skewX,u,c),function(t,n,e,r,o,a){if(t!==e||n!==r){var u=o.push(i(o)+"scale(",null,",",null,")");a.push({i:u-4,x:wr(t,e)},{i:u-2,x:wr(n,r)})}else 1===e&&1===r||o.push(i(o)+"scale("+e+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,u,c),o=a=null,function(t){for(var n,e=-1,r=c.length;++e<r;)u[(n=c[e]).i]=n.x(t);return u.join("")}}}var Ir=zr((function(t){const n=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?Fr:Pr(n.a,n.b,n.c,n.d,n.e,n.f)}),"px, ","px)","deg)"),Ur=zr((function(t){return null==t?Fr:(Cr||(Cr=document.createElementNS("http://www.w3.org/2000/svg","g")),Cr.setAttribute("transform",t),(t=Cr.transform.baseVal.consolidate())?Pr((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Fr)}),", ",")",")");function Rr(t){return((t=Math.exp(t))+1/t)/2}var jr=function t(n,e,r){function i(t,i){var o,a,u=t[0],c=t[1],s=t[2],f=i[0],l=i[1],h=i[2],d=f-u,p=l-c,g=d*d+p*p;if(g<1e-12)a=Math.log(h/s)/n,o=function(t){return[u+t*d,c+t*p,s*Math.exp(n*t*a)]};else{var y=Math.sqrt(g),v=(h*h-s*s+r*g)/(2*s*e*y),_=(h*h-s*s-r*g)/(2*h*e*y),m=Math.log(Math.sqrt(v*v+1)-v),b=Math.log(Math.sqrt(_*_+1)-_);a=(b-m)/n,o=function(t){var r=t*a,i=Rr(m),o=s/(e*y)*(i*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(n*r+m)-function(t){return((t=Math.exp(t))-1/t)/2}(m));return[u+o*d,c+o*p,s*i/Rr(n*r+m)]}}return o.duration=1e3*a*n/Math.SQRT2,o}return i.rho=function(n){var e=Math.max(.001,+n),r=e*e;return t(e,r,r*r)},i}(Math.SQRT2,2,4);function Lr(t){return function(n,e){var r=t((n=De(n)).h,(e=De(e)).h),i=pr(n.s,e.s),o=pr(n.l,e.l),a=pr(n.opacity,e.opacity);return function(t){return n.h=r(t),n.s=i(t),n.l=o(t),n.opacity=a(t),n+""}}}var Or=Lr(dr),Yr=Lr(pr);function qr(t){return function(n,e){var r=t((n=$e(n)).h,(e=$e(e)).h),i=pr(n.c,e.c),o=pr(n.l,e.l),a=pr(n.opacity,e.opacity);return function(t){return n.h=r(t),n.c=i(t),n.l=o(t),n.opacity=a(t),n+""}}}var Br=qr(dr),Gr=qr(pr);function Hr(t){return function n(e){function r(n,r){var i=t((n=ar(n)).h,(r=ar(r)).h),o=pr(n.s,r.s),a=pr(n.l,r.l),u=pr(n.opacity,r.opacity);return function(t){return n.h=i(t),n.s=o(t),n.l=a(Math.pow(t,e)),n.opacity=u(t),n+""}}return e=+e,r.gamma=n,r}(1)}var Zr=Hr(dr),Wr=Hr(pr);function Vr(t,n){void 0===n&&(n=t,t=kr);for(var e=0,r=n.length-1,i=n[0],o=new Array(r<0?0:r);e<r;)o[e]=t(i,i=n[++e]);return function(t){var n=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[n](t-n)}}var $r,Kr,Qr=0,Xr=0,Jr=0,ti=0,ni=0,ei=0,ri="object"==typeof performance&&performance.now?performance:Date,ii="object"==typeof r&&r.requestAnimationFrame?r.requestAnimationFrame.bind(r):function(t){setTimeout(t,17)};function oi(){return ni||(ii(ai),ni=ri.now()+ei)}function ai(){ni=0}function ui(){this._call=this._time=this._next=null}function ci(t,n,e){var r=new ui;return r.restart(t,n,e),r}function si(){oi(),++Qr;for(var t,n=$r;n;)(t=ni-n._time)>=0&&n._call.call(void 0,t),n=n._next;--Qr}function fi(){ni=(ti=ri.now())+ei,Qr=Xr=0;try{si()}finally{Qr=0,function(){for(var t,n,e=$r,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:$r=n);Kr=t,hi(r)}(),ni=0}}function li(){var t=ri.now(),n=t-ti;n>1e3&&(ei-=n,ti=t)}function hi(t){Qr||(Xr&&(Xr=clearTimeout(Xr)),t-ni>24?(t<1/0&&(Xr=setTimeout(fi,t-ri.now()-ei)),Jr&&(Jr=clearInterval(Jr))):(Jr||(ti=ri.now(),Jr=setInterval(li,1e3)),Qr=1,ii(fi)))}function di(t,n,e){var r=new ui;return n=null==n?0:+n,r.restart((e=>{r.stop(),t(e+n)}),n,e),r}ui.prototype=ci.prototype={constructor:ui,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?oi():+e)+(null==n?0:+n),this._next||Kr===this||(Kr?Kr._next=this:$r=this,Kr=this),this._call=t,this._time=e,hi()},stop:function(){this._call&&(this._call=null,this._time=1/0,hi())}};var pi=At("start","end","cancel","interrupt"),gi=[];function yi(t,n,e,r,i,o){var a=t.__transition;if(a){if(e in a)return}else t.__transition={};!function(t,n,e){var r,i=t.__transition;function o(c){var s,f,l,h;if(1!==e.state)return u();for(s in i)if((h=i[s]).name===e.name){if(3===h.state)return di(o);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[s]):+s<n&&(h.state=6,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[s])}if(di((function(){3===e.state&&(e.state=4,e.timer.restart(a,e.delay,e.time),a(c))})),e.state=2,e.on.call("start",t,t.__data__,e.index,e.group),2===e.state){for(e.state=3,r=new Array(l=e.tween.length),s=0,f=-1;s<l;++s)(h=e.tween[s].value.call(t,t.__data__,e.index,e.group))&&(r[++f]=h);r.length=f+1}}function a(n){for(var i=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(u),e.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);5===e.state&&(e.on.call("end",t,t.__data__,e.index,e.group),u())}function u(){for(var r in e.state=6,e.timer.stop(),delete i[n],i)return;delete t.__transition}i[n]=e,e.timer=ci((function(t){e.state=1,e.timer.restart(o,e.delay,e.time),e.delay<=t&&o(t-e.delay)}),0,e.time)}(t,e,{name:n,index:r,group:i,on:pi,tween:gi,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function vi(t,n){var e=mi(t,n);if(e.state>0)throw new Error("too late; already scheduled");return e}function _i(t,n){var e=mi(t,n);if(e.state>3)throw new Error("too late; already running");return e}function mi(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function bi(t,n){var e,r,i,o=t.__transition,a=!0;if(o){for(i in n=null==n?null:n+"",o)(e=o[i]).name===n?(r=e.state>2&&e.state<5,e.state=6,e.timer.stop(),e.on.call(r?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete o[i]):a=!1;a&&delete t.__transition}}function Ai(t,n){var e,r;return function(){var i=_i(this,t),o=i.tween;if(o!==e)for(var a=0,u=(r=e=o).length;a<u;++a)if(r[a].name===n){(r=r.slice()).splice(a,1);break}i.tween=r}}function xi(t,n,e){var r,i;if("function"!=typeof e)throw new Error;return function(){var o=_i(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:n,value:e},c=0,s=i.length;c<s;++c)if(i[c].name===n){i[c]=u;break}c===s&&i.push(u)}o.tween=i}}function wi(t,n,e){var r=t._id;return t.each((function(){var t=_i(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)})),function(t){return mi(t,r).value[n]}}function Mi(t,n){var e;return("number"==typeof n?wr:n instanceof be?gr:(e=be(n))?(n=e,gr):Sr)(t,n)}function Ti(t){return function(){this.removeAttribute(t)}}function Ni(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Si(t,n,e){var r,i,o=e+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=n(r=a,e)}}function ki(t,n,e){var r,i,o=e+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=n(r=a,e)}}function Ei(t,n,e){var r,i,o;return function(){var a,u,c=e(this);if(null!=c)return(a=this.getAttribute(t))===(u=c+"")?null:a===r&&u===i?o:(i=u,o=n(r=a,c));this.removeAttribute(t)}}function Ci(t,n,e){var r,i,o;return function(){var a,u,c=e(this);if(null!=c)return(a=this.getAttributeNS(t.space,t.local))===(u=c+"")?null:a===r&&u===i?o:(i=u,o=n(r=a,c));this.removeAttributeNS(t.space,t.local)}}function Di(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&function(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}(t,i)),e}return i._value=n,i}function Fi(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&function(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}(t,i)),e}return i._value=n,i}function Pi(t,n){return function(){vi(this,t).delay=+n.apply(this,arguments)}}function zi(t,n){return n=+n,function(){vi(this,t).delay=n}}function Ii(t,n){return function(){_i(this,t).duration=+n.apply(this,arguments)}}function Ui(t,n){return n=+n,function(){_i(this,t).duration=n}}var Ri=Rn.prototype.constructor;function ji(t){return function(){this.style.removeProperty(t)}}var Li=0;function Oi(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function Yi(t){return Rn().transition(t)}function qi(){return++Li}var Bi=Rn.prototype;function Gi(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function Hi(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Oi.prototype=Yi.prototype={constructor:Oi,select:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=Ft(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var u,c,s=r[a],f=s.length,l=o[a]=new Array(f),h=0;h<f;++h)(u=s[h])&&(c=t.call(u,u.__data__,h,s))&&("__data__"in u&&(c.__data__=u.__data__),l[h]=c,yi(l[h],n,e,h,l,mi(u,e)));return new Oi(o,this._parents,n,e)},selectAll:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=It(t));for(var r=this._groups,i=r.length,o=[],a=[],u=0;u<i;++u)for(var c,s=r[u],f=s.length,l=0;l<f;++l)if(c=s[l]){for(var h,d=t.call(c,c.__data__,l,s),p=mi(c,e),g=0,y=d.length;g<y;++g)(h=d[g])&&yi(h,n,e,g,d,p);o.push(d),a.push(c)}return new Oi(o,a,n,e)},selectChild:Bi.selectChild,selectChildren:Bi.selectChildren,filter:function(t){"function"!=typeof t&&(t=Ut(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],u=a.length,c=r[i]=[],s=0;s<u;++s)(o=a[s])&&t.call(o,o.__data__,s,a)&&c.push(o);return new Oi(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var c,s=n[u],f=e[u],l=s.length,h=a[u]=new Array(l),d=0;d<l;++d)(c=s[d]||f[d])&&(h[d]=c);for(;u<r;++u)a[u]=n[u];return new Oi(a,this._parents,this._name,this._id)},selection:function(){return new Ri(this._groups,this._parents)},transition:function(){for(var t=this._name,n=this._id,e=qi(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],c=u.length,s=0;s<c;++s)if(a=u[s]){var f=mi(a,n);yi(a,t,e,s,u,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Oi(r,this._parents,t,e)},call:Bi.call,nodes:Bi.nodes,node:Bi.node,size:Bi.size,empty:Bi.empty,each:Bi.each,on:function(t,n){var e=this._id;return arguments.length<2?mi(this.node(),e).on.on(t):this.each(function(t,n,e){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t}))}(n)?vi:_i;return function(){var a=o(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(n,e),a.on=i}}(e,t,n))},attr:function(t,n){var e=St(t),r="transform"===e?Ur:Mi;return this.attrTween(t,"function"==typeof n?(e.local?Ci:Ei)(e,r,wi(this,"attr."+t,n)):null==n?(e.local?Ni:Ti)(e):(e.local?ki:Si)(e,r,n))},attrTween:function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=St(t);return this.tween(e,(r.local?Di:Fi)(r,n))},style:function(t,n,e){var r="transform"==(t+="")?Ir:Mi;return null==n?this.styleTween(t,function(t,n){var e,r,i;return function(){var o=an(this,t),a=(this.style.removeProperty(t),an(this,t));return o===a?null:o===e&&a===r?i:i=n(e=o,r=a)}}(t,r)).on("end.style."+t,ji(t)):"function"==typeof n?this.styleTween(t,function(t,n,e){var r,i,o;return function(){var a=an(this,t),u=e(this),c=u+"";return null==u&&(this.style.removeProperty(t),c=u=an(this,t)),a===c?null:a===r&&c===i?o:(i=c,o=n(r=a,u))}}(t,r,wi(this,"style."+t,n))).each(function(t,n){var e,r,i,o,a="style."+n,u="end."+a;return function(){var c=_i(this,t),s=c.on,f=null==c.value[a]?o||(o=ji(n)):void 0;s===e&&i===f||(r=(e=s).copy()).on(u,i=f),c.on=r}}(this._id,t)):this.styleTween(t,function(t,n,e){var r,i,o=e+"";return function(){var a=an(this,t);return a===o?null:a===r?i:i=n(r=a,e)}}(t,r,n),e).on("end.style."+t,null)},styleTween:function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,function(t,n,e){var r,i;function o(){var o=n.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}(t,o,e)),r}return o._value=n,o}(t,n,null==e?"":e))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var n=t(this);this.textContent=null==n?"":n}}(wi(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;return this.tween(n,function(t){var n,e;function r(){var r=t.apply(this,arguments);return r!==e&&(n=(e=r)&&function(t){return function(n){this.textContent=t.call(this,n)}}(r)),n}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}(this._id))},tween:function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=mi(this.node(),e).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==n?Ai:xi)(e,t,n))},delay:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?Pi:zi)(n,t)):mi(this.node(),n).delay},duration:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?Ii:Ui)(n,t)):mi(this.node(),n).duration},ease:function(t){var n=this._id;return arguments.length?this.each(function(t,n){if("function"!=typeof n)throw new Error;return function(){_i(this,t).ease=n}}(n,t)):mi(this.node(),n).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,n){return function(){var e=n.apply(this,arguments);if("function"!=typeof e)throw new Error;_i(this,t).ease=e}}(this._id,t))},end:function(){var t,n,e=this,r=e._id,i=e.size();return new Promise((function(o,a){var u={value:a},c={value:function(){0==--i&&o()}};e.each((function(){var e=_i(this,r),i=e.on;i!==t&&((n=(t=i).copy())._.cancel.push(u),n._.interrupt.push(u),n._.end.push(c)),e.on=n})),0===i&&o()}))},[Symbol.iterator]:Bi[Symbol.iterator]};var Zi=function t(n){function e(t){return Math.pow(t,n)}return n=+n,e.exponent=t,e}(3),Wi=function t(n){function e(t){return 1-Math.pow(1-t,n)}return n=+n,e.exponent=t,e}(3),Vi=function t(n){function e(t){return((t*=2)<=1?Math.pow(t,n):2-Math.pow(2-t,n))/2}return n=+n,e.exponent=t,e}(3),$i=Math.PI,Ki=$i/2;function Qi(t){return(1-Math.cos($i*t))/2}function Xi(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function Ji(t){return((t*=2)<=1?Xi(1-t):2-Xi(t-1))/2}function to(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var no=4/11,eo=7.5625;function ro(t){return(t=+t)<no?eo*t*t:t<.7272727272727273?eo*(t-=.5454545454545454)*t+.75:t<.9090909090909091?eo*(t-=.8181818181818182)*t+.9375:eo*(t-=.9545454545454546)*t+.984375}var io=1.70158,oo=function t(n){function e(t){return(t=+t)*t*(n*(t-1)+t)}return n=+n,e.overshoot=t,e}(io),ao=function t(n){function e(t){return--t*t*((t+1)*n+t)+1}return n=+n,e.overshoot=t,e}(io),uo=function t(n){function e(t){return((t*=2)<1?t*t*((n+1)*t-n):(t-=2)*t*((n+1)*t+n)+2)/2}return n=+n,e.overshoot=t,e}(io),co=2*Math.PI,so=function t(n,e){var r=Math.asin(1/(n=Math.max(1,n)))*(e/=co);function i(t){return n*Xi(- --t)*Math.sin((r-t)/e)}return i.amplitude=function(n){return t(n,e*co)},i.period=function(e){return t(n,e)},i}(1,.3),fo=function t(n,e){var r=Math.asin(1/(n=Math.max(1,n)))*(e/=co);function i(t){return 1-n*Xi(t=+t)*Math.sin((t+r)/e)}return i.amplitude=function(n){return t(n,e*co)},i.period=function(e){return t(n,e)},i}(1,.3),lo=function t(n,e){var r=Math.asin(1/(n=Math.max(1,n)))*(e/=co);function i(t){return((t=2*t-1)<0?n*Xi(-t)*Math.sin((r-t)/e):2-n*Xi(t)*Math.sin((r+t)/e))/2}return i.amplitude=function(n){return t(n,e*co)},i.period=function(e){return t(n,e)},i}(1,.3),ho={time:null,delay:0,duration:250,ease:Hi};function po(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}Rn.prototype.interrupt=function(t){return this.each((function(){bi(this,t)}))},Rn.prototype.transition=function(t){var n,e;t instanceof Oi?(n=t._id,t=t._name):(n=qi(),(e=ho).time=oi(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],c=u.length,s=0;s<c;++s)(a=u[s])&&yi(a,t,n,s,u,e||po(a,n));return new Oi(r,this._parents,t,n)};var go=[null],yo=t=>()=>t;function vo(t,{sourceEvent:n,target:e,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function _o(t){t.preventDefault(),t.stopImmediatePropagation()}var mo={name:"drag"},bo={name:"space"},Ao={name:"handle"},xo={name:"center"};const{abs:wo,max:Mo,min:To}=Math;function No(t){return[+t[0],+t[1]]}function So(t){return[No(t[0]),No(t[1])]}var ko={name:"x",handles:["w","e"].map(Uo),input:function(t,n){return null==t?null:[[+t[0],n[0][1]],[+t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Eo={name:"y",handles:["n","s"].map(Uo),input:function(t,n){return null==t?null:[[n[0][0],+t[0]],[n[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Co={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Uo),input:function(t){return null==t?null:So(t)},output:function(t){return t}},Do={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Fo={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Po={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},zo={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Io={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Uo(t){return{type:t}}function Ro(t){return!t.ctrlKey&&!t.button}function jo(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Lo(){return navigator.maxTouchPoints||"ontouchstart"in this}function Oo(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Yo(t){var n,e=jo,r=Ro,i=Lo,o=!0,a=At("start","brush","end"),u=6;function c(n){var e=n.property("__brush",g).selectAll(".overlay").data([Uo("overlay")]);e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Do.overlay).merge(e).each((function(){var t=Oo(this).extent;jn(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),n.selectAll(".selection").data([Uo("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Do.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=n.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return Do[t.type]})),n.each(s).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(i).on("touchstart.brush",h).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function s(){var t=jn(this),n=Oo(this).selection;n?(t.selectAll(".selection").style("display",null).attr("x",n[0][0]).attr("y",n[0][1]).attr("width",n[1][0]-n[0][0]).attr("height",n[1][1]-n[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?n[1][0]-u/2:n[0][0]-u/2})).attr("y",(function(t){return"s"===t.type[0]?n[1][1]-u/2:n[0][1]-u/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?n[1][0]-n[0][0]+u:u})).attr("height",(function(t){return"e"===t.type||"w"===t.type?n[1][1]-n[0][1]+u:u}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(t,n,e){var r=t.__brush.emitter;return!r||e&&r.clean?new l(t,n,e):r}function l(t,n,e){this.that=t,this.args=n,this.state=t.__brush,this.active=0,this.clean=e}function h(e){if((!n||e.touches)&&r.apply(this,arguments)){var i,a,u,c,l,h,d,p,g,y,v,_=this,m=e.target.__data__.type,b="selection"===(o&&e.metaKey?m="overlay":m)?mo:o&&e.altKey?xo:Ao,A=t===Eo?null:zo[m],x=t===ko?null:Io[m],w=Oo(_),M=w.extent,T=w.selection,N=M[0][0],S=M[0][1],k=M[1][0],E=M[1][1],C=0,D=0,F=A&&x&&o&&e.shiftKey,P=Array.from(e.touches||[e],(t=>{const n=t.identifier;return(t=Bn(t,_)).point0=t.slice(),t.identifier=n,t}));bi(_);var z=f(_,arguments,!0).beforestart();if("overlay"===m){T&&(g=!0);const n=[P[0],P[1]||P[0]];w.selection=T=[[i=t===Eo?N:To(n[0][0],n[1][0]),u=t===ko?S:To(n[0][1],n[1][1])],[l=t===Eo?k:Mo(n[0][0],n[1][0]),d=t===ko?E:Mo(n[0][1],n[1][1])]],P.length>1&&L(e)}else i=T[0][0],u=T[0][1],l=T[1][0],d=T[1][1];a=i,c=u,h=l,p=d;var I=jn(_).attr("pointer-events","none"),U=I.selectAll(".overlay").attr("cursor",Do[m]);if(e.touches)z.moved=j,z.ended=O;else{var R=jn(e.view).on("mousemove.brush",j,!0).on("mouseup.brush",O,!0);o&&R.on("keydown.brush",(function(t){switch(t.keyCode){case 16:F=A&&x;break;case 18:b===Ao&&(A&&(l=h-C*A,i=a+C*A),x&&(d=p-D*x,u=c+D*x),b=xo,L(t));break;case 32:b!==Ao&&b!==xo||(A<0?l=h-C:A>0&&(i=a-C),x<0?d=p-D:x>0&&(u=c-D),b=bo,U.attr("cursor",Do.selection),L(t));break;default:return}_o(t)}),!0).on("keyup.brush",(function(t){switch(t.keyCode){case 16:F&&(y=v=F=!1,L(t));break;case 18:b===xo&&(A<0?l=h:A>0&&(i=a),x<0?d=p:x>0&&(u=c),b=Ao,L(t));break;case 32:b===bo&&(t.altKey?(A&&(l=h-C*A,i=a+C*A),x&&(d=p-D*x,u=c+D*x),b=xo):(A<0?l=h:A>0&&(i=a),x<0?d=p:x>0&&(u=c),b=Ao),U.attr("cursor",Do[m]),L(t));break;default:return}_o(t)}),!0),Vn(e.view)}s.call(_),z.start(e,b.name)}function j(t){for(const n of t.changedTouches||[t])for(const t of P)t.identifier===n.identifier&&(t.cur=Bn(n,_));if(F&&!y&&!v&&1===P.length){const t=P[0];wo(t.cur[0]-t[0])>wo(t.cur[1]-t[1])?v=!0:y=!0}for(const t of P)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);g=!0,_o(t),L(t)}function L(t){const n=P[0],e=n.point0;var r;switch(C=n[0]-e[0],D=n[1]-e[1],b){case bo:case mo:A&&(C=Mo(N-i,To(k-l,C)),a=i+C,h=l+C),x&&(D=Mo(S-u,To(E-d,D)),c=u+D,p=d+D);break;case Ao:P[1]?(A&&(a=Mo(N,To(k,P[0][0])),h=Mo(N,To(k,P[1][0])),A=1),x&&(c=Mo(S,To(E,P[0][1])),p=Mo(S,To(E,P[1][1])),x=1)):(A<0?(C=Mo(N-i,To(k-i,C)),a=i+C,h=l):A>0&&(C=Mo(N-l,To(k-l,C)),a=i,h=l+C),x<0?(D=Mo(S-u,To(E-u,D)),c=u+D,p=d):x>0&&(D=Mo(S-d,To(E-d,D)),c=u,p=d+D));break;case xo:A&&(a=Mo(N,To(k,i-C*A)),h=Mo(N,To(k,l+C*A))),x&&(c=Mo(S,To(E,u-D*x)),p=Mo(S,To(E,d+D*x)))}h<a&&(A*=-1,r=i,i=l,l=r,r=a,a=h,h=r,m in Fo&&U.attr("cursor",Do[m=Fo[m]])),p<c&&(x*=-1,r=u,u=d,d=r,r=c,c=p,p=r,m in Po&&U.attr("cursor",Do[m=Po[m]])),w.selection&&(T=w.selection),y&&(a=T[0][0],h=T[1][0]),v&&(c=T[0][1],p=T[1][1]),T[0][0]===a&&T[0][1]===c&&T[1][0]===h&&T[1][1]===p||(w.selection=[[a,c],[h,p]],s.call(_),z.brush(t,b.name))}function O(t){if(function(t){t.stopImmediatePropagation()}(t),t.touches){if(t.touches.length)return;n&&clearTimeout(n),n=setTimeout((function(){n=null}),500)}else $n(t.view,g),R.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);I.attr("pointer-events","all"),U.attr("cursor",Do.overlay),w.selection&&(T=w.selection),function(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}(T)&&(w.selection=null,s.call(_)),z.end(t,b.name)}}function d(t){f(this,arguments).moved(t)}function p(t){f(this,arguments).ended(t)}function g(){var n=this.__brush||{selection:null};return n.extent=So(e.apply(this,arguments)),n.dim=t,n}return c.move=function(n,e,r){n.tween?n.on("start.brush",(function(t){f(this,arguments).beforestart().start(t)})).on("interrupt.brush end.brush",(function(t){f(this,arguments).end(t)})).tween("brush",(function(){var n=this,r=n.__brush,i=f(n,arguments),o=r.selection,a=t.input("function"==typeof e?e.apply(this,arguments):e,r.extent),u=kr(o,a);function c(t){r.selection=1===t&&null===a?null:u(t),s.call(n),i.brush()}return null!==o&&null!==a?c:c(1)})):n.each((function(){var n=this,i=arguments,o=n.__brush,a=t.input("function"==typeof e?e.apply(n,i):e,o.extent),u=f(n,i).beforestart();bi(n),o.selection=null===a?null:a,s.call(n),u.start(r).brush(r).end(r)}))},c.clear=function(t,n){c.move(t,null,n)},l.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,n){return this.starting?(this.starting=!1,this.emit("start",t,n)):this.emit("brush",t),this},brush:function(t,n){return this.emit("brush",t,n),this},end:function(t,n){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,n)),this},emit:function(n,e,r){var i=jn(this.that).datum();a.call(n,this.that,new vo(n,{sourceEvent:e,target:c,selection:t.output(this.state.selection),mode:r,dispatch:a}),i)}},c.extent=function(t){return arguments.length?(e="function"==typeof t?t:yo(So(t)),c):e},c.filter=function(t){return arguments.length?(r="function"==typeof t?t:yo(!!t),c):r},c.touchable=function(t){return arguments.length?(i="function"==typeof t?t:yo(!!t),c):i},c.handleSize=function(t){return arguments.length?(u=+t,c):u},c.keyModifiers=function(t){return arguments.length?(o=!!t,c):o},c.on=function(){var t=a.on.apply(a,arguments);return t===a?c:t},c}var qo=Math.abs,Bo=Math.cos,Go=Math.sin,Ho=Math.PI,Zo=Ho/2,Wo=2*Ho,Vo=Math.max,$o=1e-12;function Ko(t,n){return Array.from({length:n-t},((n,e)=>t+e))}function Qo(t,n){var e=0,r=null,i=null,o=null;function a(a){var u,c=a.length,s=new Array(c),f=Ko(0,c),l=new Array(c*c),h=new Array(c),d=0;a=Float64Array.from({length:c*c},n?(t,n)=>a[n%c][n/c|0]:(t,n)=>a[n/c|0][n%c]);for(let n=0;n<c;++n){let e=0;for(let r=0;r<c;++r)e+=a[n*c+r]+t*a[r*c+n];d+=s[n]=e}u=(d=Vo(0,Wo-e*c)/d)?e:Wo/c;{let n=0;r&&f.sort(((t,n)=>r(s[t],s[n])));for(const e of f){const r=n;if(t){const t=Ko(1+~c,c).filter((t=>t<0?a[~t*c+e]:a[e*c+t]));i&&t.sort(((t,n)=>i(t<0?-a[~t*c+e]:a[e*c+t],n<0?-a[~n*c+e]:a[e*c+n])));for(const r of t)r<0?(l[~r*c+e]||(l[~r*c+e]={source:null,target:null})).target={index:e,startAngle:n,endAngle:n+=a[~r*c+e]*d,value:a[~r*c+e]}:(l[e*c+r]||(l[e*c+r]={source:null,target:null})).source={index:e,startAngle:n,endAngle:n+=a[e*c+r]*d,value:a[e*c+r]};h[e]={index:e,startAngle:r,endAngle:n,value:s[e]}}else{const t=Ko(0,c).filter((t=>a[e*c+t]||a[t*c+e]));i&&t.sort(((t,n)=>i(a[e*c+t],a[e*c+n])));for(const r of t){let t;if(e<r?(t=l[e*c+r]||(l[e*c+r]={source:null,target:null}),t.source={index:e,startAngle:n,endAngle:n+=a[e*c+r]*d,value:a[e*c+r]}):(t=l[r*c+e]||(l[r*c+e]={source:null,target:null}),t.target={index:e,startAngle:n,endAngle:n+=a[e*c+r]*d,value:a[e*c+r]},e===r&&(t.source=t.target)),t.source&&t.target&&t.source.value<t.target.value){const n=t.source;t.source=t.target,t.target=n}}h[e]={index:e,startAngle:r,endAngle:n,value:s[e]}}n+=u}}return(l=Object.values(l)).groups=h,o?l.sort(o):l}return a.padAngle=function(t){return arguments.length?(e=Vo(0,t),a):e},a.sortGroups=function(t){return arguments.length?(r=t,a):r},a.sortSubgroups=function(t){return arguments.length?(i=t,a):i},a.sortChords=function(t){return arguments.length?(null==t?o=null:(o=function(t){return function(n,e){return t(n.source.value+n.target.value,e.source.value+e.target.value)}}(t))._=t,a):o&&o._},a}const Xo=Math.PI,Jo=2*Xo,ta=1e-6,na=Jo-ta;function ea(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function ra(){return new ea}ea.prototype=ra.prototype={constructor:ea,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,o){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var o=this._x1,a=this._y1,u=e-t,c=r-n,s=o-t,f=a-n,l=s*s+f*f;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(l>ta)if(Math.abs(f*u-c*s)>ta&&i){var h=e-o,d=r-a,p=u*u+c*c,g=h*h+d*d,y=Math.sqrt(p),v=Math.sqrt(l),_=i*Math.tan((Xo-Math.acos((p+l-g)/(2*y*v)))/2),m=_/v,b=_/y;Math.abs(m-1)>ta&&(this._+="L"+(t+m*s)+","+(n+m*f)),this._+="A"+i+","+i+",0,0,"+ +(f*h>s*d)+","+(this._x1=t+b*u)+","+(this._y1=n+b*c)}else this._+="L"+(this._x1=t)+","+(this._y1=n)},arc:function(t,n,e,r,i,o){t=+t,n=+n,o=!!o;var a=(e=+e)*Math.cos(r),u=e*Math.sin(r),c=t+a,s=n+u,f=1^o,l=o?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+c+","+s:(Math.abs(this._x1-c)>ta||Math.abs(this._y1-s)>ta)&&(this._+="L"+c+","+s),e&&(l<0&&(l=l%Jo+Jo),l>na?this._+="A"+e+","+e+",0,1,"+f+","+(t-a)+","+(n-u)+"A"+e+","+e+",0,1,"+f+","+(this._x1=c)+","+(this._y1=s):l>ta&&(this._+="A"+e+","+e+",0,"+ +(l>=Xo)+","+f+","+(this._x1=t+e*Math.cos(i))+","+(this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};var ia=Array.prototype.slice;function oa(t){return function(){return t}}function aa(t){return t.source}function ua(t){return t.target}function ca(t){return t.radius}function sa(t){return t.startAngle}function fa(t){return t.endAngle}function la(){return 0}function ha(){return 10}function da(t){var n=aa,e=ua,r=ca,i=ca,o=sa,a=fa,u=la,c=null;function s(){var s,f=n.apply(this,arguments),l=e.apply(this,arguments),h=u.apply(this,arguments)/2,d=ia.call(arguments),p=+r.apply(this,(d[0]=f,d)),g=o.apply(this,d)-Zo,y=a.apply(this,d)-Zo,v=+i.apply(this,(d[0]=l,d)),_=o.apply(this,d)-Zo,m=a.apply(this,d)-Zo;if(c||(c=s=ra()),h>$o&&(qo(y-g)>2*h+$o?y>g?(g+=h,y-=h):(g-=h,y+=h):g=y=(g+y)/2,qo(m-_)>2*h+$o?m>_?(_+=h,m-=h):(_-=h,m+=h):_=m=(_+m)/2),c.moveTo(p*Bo(g),p*Go(g)),c.arc(0,0,p,g,y),g!==_||y!==m)if(t){var b=v-+t.apply(this,arguments),A=(_+m)/2;c.quadraticCurveTo(0,0,b*Bo(_),b*Go(_)),c.lineTo(v*Bo(A),v*Go(A)),c.lineTo(b*Bo(m),b*Go(m))}else c.quadraticCurveTo(0,0,v*Bo(_),v*Go(_)),c.arc(0,0,v,_,m);if(c.quadraticCurveTo(0,0,p*Bo(g),p*Go(g)),c.closePath(),s)return c=null,s+""||null}return t&&(s.headRadius=function(n){return arguments.length?(t="function"==typeof n?n:oa(+n),s):t}),s.radius=function(t){return arguments.length?(r=i="function"==typeof t?t:oa(+t),s):r},s.sourceRadius=function(t){return arguments.length?(r="function"==typeof t?t:oa(+t),s):r},s.targetRadius=function(t){return arguments.length?(i="function"==typeof t?t:oa(+t),s):i},s.startAngle=function(t){return arguments.length?(o="function"==typeof t?t:oa(+t),s):o},s.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:oa(+t),s):a},s.padAngle=function(t){return arguments.length?(u="function"==typeof t?t:oa(+t),s):u},s.source=function(t){return arguments.length?(n=t,s):n},s.target=function(t){return arguments.length?(e=t,s):e},s.context=function(t){return arguments.length?(c=null==t?null:t,s):c},s}var pa=Array.prototype.slice;function ga(t,n){return t-n}var ya=t=>()=>t;function va(t,n){for(var e,r=-1,i=n.length;++r<i;)if(e=_a(t,n[r]))return e;return 0}function _a(t,n){for(var e=n[0],r=n[1],i=-1,o=0,a=t.length,u=a-1;o<a;u=o++){var c=t[o],s=c[0],f=c[1],l=t[u],h=l[0],d=l[1];if(ma(c,l,n))return 0;f>r!=d>r&&e<(h-s)*(r-f)/(d-f)+s&&(i=-i)}return i}function ma(t,n,e){var r,i,o,a;return function(t,n,e){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])}(t,n,e)&&(i=t[r=+(t[0]===n[0])],o=e[r],a=n[r],i<=o&&o<=a||a<=o&&o<=i)}function ba(){}var Aa=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function xa(){var t=1,n=1,e=H,r=u;function i(t){var n=e(t);if(Array.isArray(n))n=n.slice().sort(ga);else{const e=y(t),r=B(e[0],e[1],n);n=Y(Math.floor(e[0]/r)*r,Math.floor(e[1]/r-1)*r,n)}return n.map((n=>o(t,n)))}function o(e,i){var o=[],u=[];return function(e,r,i){var o,u,c,s,f,l,h=new Array,d=new Array;for(o=u=-1,s=e[0]>=r,Aa[s<<1].forEach(p);++o<t-1;)c=s,s=e[o+1]>=r,Aa[c|s<<1].forEach(p);for(Aa[0|s].forEach(p);++u<n-1;){for(o=-1,s=e[u*t+t]>=r,f=e[u*t]>=r,Aa[s<<1|f<<2].forEach(p);++o<t-1;)c=s,s=e[u*t+t+o+1]>=r,l=f,f=e[u*t+o+1]>=r,Aa[c|s<<1|f<<2|l<<3].forEach(p);Aa[s|f<<3].forEach(p)}for(o=-1,f=e[u*t]>=r,Aa[f<<2].forEach(p);++o<t-1;)l=f,f=e[u*t+o+1]>=r,Aa[f<<2|l<<3].forEach(p);function p(t){var n,e,r=[t[0][0]+o,t[0][1]+u],c=[t[1][0]+o,t[1][1]+u],s=a(r),f=a(c);(n=d[s])?(e=h[f])?(delete d[n.end],delete h[e.start],n===e?(n.ring.push(c),i(n.ring)):h[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete d[n.end],n.ring.push(c),d[n.end=f]=n):(n=h[f])?(e=d[s])?(delete h[n.start],delete d[e.end],n===e?(n.ring.push(c),i(n.ring)):h[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete h[n.start],n.ring.unshift(r),h[n.start=s]=n):h[s]=d[f]={start:s,end:f,ring:[r,c]}}Aa[f<<3].forEach(p)}(e,i,(function(t){r(t,e,i),function(t){for(var n=0,e=t.length,r=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];++n<e;)r+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return r}(t)>0?o.push([t]):u.push(t)})),u.forEach((function(t){for(var n,e=0,r=o.length;e<r;++e)if(-1!==va((n=o[e])[0],t))return void n.push(t)})),{type:"MultiPolygon",value:i,coordinates:o}}function a(n){return 2*n[0]+n[1]*(t+1)*4}function u(e,r,i){e.forEach((function(e){var o,a=e[0],u=e[1],c=0|a,s=0|u,f=r[s*t+c];a>0&&a<t&&c===a&&(o=r[s*t+c-1],e[0]=a+(i-o)/(f-o)-.5),u>0&&u<n&&s===u&&(o=r[(s-1)*t+c],e[1]=u+(i-o)/(f-o)-.5)}))}return i.contour=o,i.size=function(e){if(!arguments.length)return[t,n];var r=Math.floor(e[0]),o=Math.floor(e[1]);if(!(r>=0&&o>=0))throw new Error("invalid size");return t=r,n=o,i},i.thresholds=function(t){return arguments.length?(e="function"==typeof t?t:Array.isArray(t)?ya(pa.call(t)):ya(t),i):e},i.smooth=function(t){return arguments.length?(r=t?u:ba,i):r===u},i}function wa(t,n,e){for(var r=t.width,i=t.height,o=1+(e<<1),a=0;a<i;++a)for(var u=0,c=0;u<r+e;++u)u<r&&(c+=t.data[u+a*r]),u>=e&&(u>=o&&(c-=t.data[u-o+a*r]),n.data[u-e+a*r]=c/Math.min(u+1,r-1+o-u,o))}function Ma(t,n,e){for(var r=t.width,i=t.height,o=1+(e<<1),a=0;a<r;++a)for(var u=0,c=0;u<i+e;++u)u<i&&(c+=t.data[a+u*r]),u>=e&&(u>=o&&(c-=t.data[a+(u-o)*r]),n.data[a+(u-e)*r]=c/Math.min(u+1,i-1+o-u,o))}function Ta(t){return t[0]}function Na(t){return t[1]}function Sa(){return 1}const ka=134217729;function Ea(t,n,e,r,i){let o,a,u,c,s=n[0],f=r[0],l=0,h=0;f>s==f>-s?(o=s,s=n[++l]):(o=f,f=r[++h]);let d=0;if(l<t&&h<e)for(f>s==f>-s?(a=s+o,u=o-(a-s),s=n[++l]):(a=f+o,u=o-(a-f),f=r[++h]),o=a,0!==u&&(i[d++]=u);l<t&&h<e;)f>s==f>-s?(a=o+s,c=a-o,u=o-(a-c)+(s-c),s=n[++l]):(a=o+f,c=a-o,u=o-(a-c)+(f-c),f=r[++h]),o=a,0!==u&&(i[d++]=u);for(;l<t;)a=o+s,c=a-o,u=o-(a-c)+(s-c),s=n[++l],o=a,0!==u&&(i[d++]=u);for(;h<e;)a=o+f,c=a-o,u=o-(a-c)+(f-c),f=r[++h],o=a,0!==u&&(i[d++]=u);return 0===o&&0!==d||(i[d++]=o),d}function Ca(t){return new Float64Array(t)}const Da=Ca(4),Fa=Ca(8),Pa=Ca(12),za=Ca(16),Ia=Ca(4);function Ua(t,n,e,r,i,o){const a=(n-o)*(e-i),u=(t-i)*(r-o),c=a-u;if(0===a||0===u||a>0!=u>0)return c;const s=Math.abs(a+u);return Math.abs(c)>=33306690738754716e-32*s?c:-function(t,n,e,r,i,o,a){let u,c,s,f,l,h,d,p,g,y,v,_,m,b,A,x,w,M;const T=t-i,N=e-i,S=n-o,k=r-o;b=T*k,h=ka*T,d=h-(h-T),p=T-d,h=ka*k,g=h-(h-k),y=k-g,A=p*y-(b-d*g-p*g-d*y),x=S*N,h=ka*S,d=h-(h-S),p=S-d,h=ka*N,g=h-(h-N),y=N-g,w=p*y-(x-d*g-p*g-d*y),v=A-w,l=A-v,Da[0]=A-(v+l)+(l-w),_=b+v,l=_-b,m=b-(_-l)+(v-l),v=m-x,l=m-v,Da[1]=m-(v+l)+(l-x),M=_+v,l=M-_,Da[2]=_-(M-l)+(v-l),Da[3]=M;let E=function(t,n){let e=n[0];for(let t=1;t<4;t++)e+=n[t];return e}(0,Da),C=22204460492503146e-32*a;if(E>=C||-E>=C)return E;if(l=t-T,u=t-(T+l)+(l-i),l=e-N,s=e-(N+l)+(l-i),l=n-S,c=n-(S+l)+(l-o),l=r-k,f=r-(k+l)+(l-o),0===u&&0===c&&0===s&&0===f)return E;if(C=11093356479670487e-47*a+33306690738754706e-32*Math.abs(E),E+=T*f+k*u-(S*s+N*c),E>=C||-E>=C)return E;b=u*k,h=ka*u,d=h-(h-u),p=u-d,h=ka*k,g=h-(h-k),y=k-g,A=p*y-(b-d*g-p*g-d*y),x=c*N,h=ka*c,d=h-(h-c),p=c-d,h=ka*N,g=h-(h-N),y=N-g,w=p*y-(x-d*g-p*g-d*y),v=A-w,l=A-v,Ia[0]=A-(v+l)+(l-w),_=b+v,l=_-b,m=b-(_-l)+(v-l),v=m-x,l=m-v,Ia[1]=m-(v+l)+(l-x),M=_+v,l=M-_,Ia[2]=_-(M-l)+(v-l),Ia[3]=M;const D=Ea(4,Da,4,Ia,Fa);b=T*f,h=ka*T,d=h-(h-T),p=T-d,h=ka*f,g=h-(h-f),y=f-g,A=p*y-(b-d*g-p*g-d*y),x=S*s,h=ka*S,d=h-(h-S),p=S-d,h=ka*s,g=h-(h-s),y=s-g,w=p*y-(x-d*g-p*g-d*y),v=A-w,l=A-v,Ia[0]=A-(v+l)+(l-w),_=b+v,l=_-b,m=b-(_-l)+(v-l),v=m-x,l=m-v,Ia[1]=m-(v+l)+(l-x),M=_+v,l=M-_,Ia[2]=_-(M-l)+(v-l),Ia[3]=M;const F=Ea(D,Fa,4,Ia,Pa);b=u*f,h=ka*u,d=h-(h-u),p=u-d,h=ka*f,g=h-(h-f),y=f-g,A=p*y-(b-d*g-p*g-d*y),x=c*s,h=ka*c,d=h-(h-c),p=c-d,h=ka*s,g=h-(h-s),y=s-g,w=p*y-(x-d*g-p*g-d*y),v=A-w,l=A-v,Ia[0]=A-(v+l)+(l-w),_=b+v,l=_-b,m=b-(_-l)+(v-l),v=m-x,l=m-v,Ia[1]=m-(v+l)+(l-x),M=_+v,l=M-_,Ia[2]=_-(M-l)+(v-l),Ia[3]=M;const P=Ea(F,Pa,4,Ia,za);return za[P-1]}(t,n,e,r,i,o,s)}const Ra=Math.pow(2,-52),ja=new Uint32Array(512);class La{static from(t,n=Ha,e=Za){const r=t.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=t[o];i[2*o]=n(r),i[2*o+1]=e(r)}return new La(i)}constructor(t){const n=t.length>>1;if(n>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const e=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*e),this._halfedges=new Int32Array(3*e),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:e,_hullTri:r,_hullHash:i}=this,o=t.length>>1;let a=1/0,u=1/0,c=-1/0,s=-1/0;for(let n=0;n<o;n++){const e=t[2*n],r=t[2*n+1];e<a&&(a=e),r<u&&(u=r),e>c&&(c=e),r>s&&(s=r),this._ids[n]=n}const f=(a+c)/2,l=(u+s)/2;let h,d,p,g=1/0;for(let n=0;n<o;n++){const e=Oa(f,l,t[2*n],t[2*n+1]);e<g&&(h=n,g=e)}const y=t[2*h],v=t[2*h+1];g=1/0;for(let n=0;n<o;n++){if(n===h)continue;const e=Oa(y,v,t[2*n],t[2*n+1]);e<g&&e>0&&(d=n,g=e)}let _=t[2*d],m=t[2*d+1],b=1/0;for(let n=0;n<o;n++){if(n===h||n===d)continue;const e=qa(y,v,_,m,t[2*n],t[2*n+1]);e<b&&(p=n,b=e)}let A=t[2*p],x=t[2*p+1];if(b===1/0){for(let n=0;n<o;n++)this._dists[n]=t[2*n]-t[0]||t[2*n+1]-t[1];Ba(this._ids,this._dists,0,o-1);const n=new Uint32Array(o);let e=0;for(let t=0,r=-1/0;t<o;t++){const i=this._ids[t];this._dists[i]>r&&(n[e++]=i,r=this._dists[i])}return this.hull=n.subarray(0,e),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(Ua(y,v,_,m,A,x)<0){const t=d,n=_,e=m;d=p,_=A,m=x,p=t,A=n,x=e}const w=function(t,n,e,r,i,o){const a=e-t,u=r-n,c=i-t,s=o-n,f=a*a+u*u,l=c*c+s*s,h=.5/(a*s-u*c);return{x:t+(s*f-u*l)*h,y:n+(a*l-c*f)*h}}(y,v,_,m,A,x);this._cx=w.x,this._cy=w.y;for(let n=0;n<o;n++)this._dists[n]=Oa(t[2*n],t[2*n+1],w.x,w.y);Ba(this._ids,this._dists,0,o-1),this._hullStart=h;let M=3;e[h]=n[p]=d,e[d]=n[h]=p,e[p]=n[d]=h,r[h]=0,r[d]=1,r[p]=2,i.fill(-1),i[this._hashKey(y,v)]=h,i[this._hashKey(_,m)]=d,i[this._hashKey(A,x)]=p,this.trianglesLen=0,this._addTriangle(h,d,p,-1,-1,-1);for(let o,a,u=0;u<this._ids.length;u++){const c=this._ids[u],s=t[2*c],f=t[2*c+1];if(u>0&&Math.abs(s-o)<=Ra&&Math.abs(f-a)<=Ra)continue;if(o=s,a=f,c===h||c===d||c===p)continue;let l=0;for(let t=0,n=this._hashKey(s,f);t<this._hashSize&&(l=i[(n+t)%this._hashSize],-1===l||l===e[l]);t++);l=n[l];let g,y=l;for(;g=e[y],Ua(s,f,t[2*y],t[2*y+1],t[2*g],t[2*g+1])>=0;)if(y=g,y===l){y=-1;break}if(-1===y)continue;let v=this._addTriangle(y,c,e[y],-1,-1,r[y]);r[c]=this._legalize(v+2),r[y]=v,M++;let _=e[y];for(;g=e[_],Ua(s,f,t[2*_],t[2*_+1],t[2*g],t[2*g+1])<0;)v=this._addTriangle(_,c,g,r[c],-1,r[_]),r[c]=this._legalize(v+2),e[_]=_,M--,_=g;if(y===l)for(;g=n[y],Ua(s,f,t[2*g],t[2*g+1],t[2*y],t[2*y+1])<0;)v=this._addTriangle(g,c,y,-1,r[y],r[g]),this._legalize(v+2),r[g]=v,e[y]=y,M--,y=g;this._hullStart=n[c]=y,e[y]=n[_]=c,e[c]=_,i[this._hashKey(s,f)]=c,i[this._hashKey(t[2*y],t[2*y+1])]=y}this.hull=new Uint32Array(M);for(let t=0,n=this._hullStart;t<M;t++)this.hull[t]=n,n=e[n];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(function(t,n){const e=t/(Math.abs(t)+Math.abs(n));return(n>0?3-e:1+e)/4}(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:e,coords:r}=this;let i=0,o=0;for(;;){const a=e[t],u=t-t%3;if(o=u+(t+2)%3,-1===a){if(0===i)break;t=ja[--i];continue}const c=a-a%3,s=u+(t+1)%3,f=c+(a+2)%3,l=n[o],h=n[t],d=n[s],p=n[f];if(Ya(r[2*l],r[2*l+1],r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*p],r[2*p+1])){n[t]=p,n[a]=l;const r=e[f];if(-1===r){let n=this._hullStart;do{if(this._hullTri[n]===f){this._hullTri[n]=t;break}n=this._hullPrev[n]}while(n!==this._hullStart)}this._link(t,r),this._link(a,e[o]),this._link(o,f);const u=c+(a+1)%3;i<ja.length&&(ja[i++]=u)}else{if(0===i)break;t=ja[--i]}}return o}_link(t,n){this._halfedges[t]=n,-1!==n&&(this._halfedges[n]=t)}_addTriangle(t,n,e,r,i,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=e,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function Oa(t,n,e,r){const i=t-e,o=n-r;return i*i+o*o}function Ya(t,n,e,r,i,o,a,u){const c=t-a,s=n-u,f=e-a,l=r-u,h=i-a,d=o-u,p=f*f+l*l,g=h*h+d*d;return c*(l*g-p*d)-s*(f*g-p*h)+(c*c+s*s)*(f*d-l*h)<0}function qa(t,n,e,r,i,o){const a=e-t,u=r-n,c=i-t,s=o-n,f=a*a+u*u,l=c*c+s*s,h=.5/(a*s-u*c),d=(s*f-u*l)*h,p=(a*l-c*f)*h;return d*d+p*p}function Ba(t,n,e,r){if(r-e<=20)for(let i=e+1;i<=r;i++){const r=t[i],o=n[r];let a=i-1;for(;a>=e&&n[t[a]]>o;)t[a+1]=t[a--];t[a+1]=r}else{let i=e+1,o=r;Ga(t,e+r>>1,i),n[t[e]]>n[t[r]]&&Ga(t,e,r),n[t[i]]>n[t[r]]&&Ga(t,i,r),n[t[e]]>n[t[i]]&&Ga(t,e,i);const a=t[i],u=n[a];for(;;){do{i++}while(n[t[i]]<u);do{o--}while(n[t[o]]>u);if(o<i)break;Ga(t,i,o)}t[e+1]=t[o],t[o]=a,r-i+1>=o-e?(Ba(t,n,i,r),Ba(t,n,e,o-1)):(Ba(t,n,e,o-1),Ba(t,n,i,r))}}function Ga(t,n,e){const r=t[n];t[n]=t[e],t[e]=r}function Ha(t){return t[0]}function Za(t){return t[1]}const Wa=1e-6;class Va{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,e){const r=(t=+t)+(e=+e),i=n=+n;if(e<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>Wa||Math.abs(this._y1-i)>Wa)&&(this._+="L"+r+","+i),e&&(this._+=`A${e},${e},0,1,1,${t-e},${n}A${e},${e},0,1,1,${this._x1=r},${this._y1=i}`)}rect(t,n,e,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+e}v${+r}h${-e}Z`}value(){return this._||null}}class $a{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}class Ka{constructor(t,[n,e,r,i]=[0,0,960,500]){if(!((r=+r)>=(n=+n)&&(i=+i)>=(e=+e)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=n,this.ymax=i,this.ymin=e,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:e},vectors:r}=this,i=this.circumcenters=this._circumcenters.subarray(0,e.length/3*2);for(let n,r,o=0,a=0,u=e.length;o<u;o+=3,a+=2){const u=2*e[o],c=2*e[o+1],s=2*e[o+2],f=t[u],l=t[u+1],h=t[c],d=t[c+1],p=t[s],g=t[s+1],y=h-f,v=d-l,_=p-f,m=g-l,b=2*(y*m-v*_);if(Math.abs(b)<1e-9){let i=1e9;const o=2*e[0];i*=Math.sign((t[o]-f)*m-(t[o+1]-l)*_),n=(f+p)/2-i*m,r=(l+g)/2+i*_}else{const t=1/b,e=y*y+v*v,i=_*_+m*m;n=f+(m*e-v*i)*t,r=l+(y*i-_*e)*t}i[a]=n,i[a+1]=r}let o,a,u,c=n[n.length-1],s=4*c,f=t[2*c],l=t[2*c+1];r.fill(0);for(let e=0;e<n.length;++e)c=n[e],o=s,a=f,u=l,s=4*c,f=t[2*c],l=t[2*c+1],r[o+2]=r[s]=u-l,r[o+3]=r[s+1]=f-a}render(t){const n=null==t?t=new Va:void 0,{delaunay:{halfedges:e,inedges:r,hull:i},circumcenters:o,vectors:a}=this;if(i.length<=1)return null;for(let n=0,r=e.length;n<r;++n){const r=e[n];if(r<n)continue;const i=2*Math.floor(n/3),a=2*Math.floor(r/3),u=o[i],c=o[i+1],s=o[a],f=o[a+1];this._renderSegment(u,c,s,f,t)}let u,c=i[i.length-1];for(let n=0;n<i.length;++n){u=c,c=i[n];const e=2*Math.floor(r[c]/3),s=o[e],f=o[e+1],l=4*u,h=this._project(s,f,a[l+2],a[l+3]);h&&this._renderSegment(s,f,h[0],h[1],t)}return n&&n.value()}renderBounds(t){const n=null==t?t=new Va:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const e=null==n?n=new Va:void 0,r=this._clip(t);if(null===r||!r.length)return;n.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let t=2;t<i;t+=2)r[t]===r[t-2]&&r[t+1]===r[t-1]||n.lineTo(r[t],r[t+1]);return n.closePath(),e&&e.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,e=t.length/2;n<e;++n){const t=this.cellPolygon(n);t&&(t.index=n,yield t)}}cellPolygon(t){const n=new $a;return this.renderCell(t,n),n.value()}_renderSegment(t,n,e,r,i){let o;const a=this._regioncode(t,n),u=this._regioncode(e,r);0===a&&0===u?(i.moveTo(t,n),i.lineTo(e,r)):(o=this._clipSegment(t,n,e,r,a,u))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(t,n,e){return(n=+n)==n&&(e=+e)==e&&this.delaunay._step(t,n,e)===t}*neighbors(t){const n=this._clip(t);if(n)for(const e of this.delaunay.neighbors(t)){const t=this._clip(e);if(t)t:for(let r=0,i=n.length;r<i;r+=2)for(let o=0,a=t.length;o<a;o+=2)if(n[r]==t[o]&&n[r+1]==t[o+1]&&n[(r+2)%i]==t[(o+a-2)%a]&&n[(r+3)%i]==t[(o+a-1)%a]){yield e;break t}}}_cell(t){const{circumcenters:n,delaunay:{inedges:e,halfedges:r,triangles:i}}=this,o=e[t];if(-1===o)return null;const a=[];let u=o;do{const e=Math.floor(u/3);if(a.push(n[2*e],n[2*e+1]),u=u%3==2?u-2:u+1,i[u]!==t)break;u=r[u]}while(u!==o&&-1!==u);return a}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(null===n)return null;const{vectors:e}=this,r=4*t;return e[r]||e[r+1]?this._clipInfinite(t,n,e[r],e[r+1],e[r+2],e[r+3]):this._clipFinite(t,n)}_clipFinite(t,n){const e=n.length;let r,i,o,a,u=null,c=n[e-2],s=n[e-1],f=this._regioncode(c,s),l=0;for(let h=0;h<e;h+=2)if(r=c,i=s,c=n[h],s=n[h+1],o=f,f=this._regioncode(c,s),0===o&&0===f)a=l,l=0,u?u.push(c,s):u=[c,s];else{let n,e,h,d,p;if(0===o){if(null===(n=this._clipSegment(r,i,c,s,o,f)))continue;[e,h,d,p]=n}else{if(null===(n=this._clipSegment(c,s,r,i,f,o)))continue;[d,p,e,h]=n,a=l,l=this._edgecode(e,h),a&&l&&this._edge(t,a,l,u,u.length),u?u.push(e,h):u=[e,h]}a=l,l=this._edgecode(d,p),a&&l&&this._edge(t,a,l,u,u.length),u?u.push(d,p):u=[d,p]}if(u)a=l,l=this._edgecode(u[0],u[1]),a&&l&&this._edge(t,a,l,u,u.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}_clipSegment(t,n,e,r,i,o){for(;;){if(0===i&&0===o)return[t,n,e,r];if(i&o)return null;let a,u,c=i||o;8&c?(a=t+(e-t)*(this.ymax-n)/(r-n),u=this.ymax):4&c?(a=t+(e-t)*(this.ymin-n)/(r-n),u=this.ymin):2&c?(u=n+(r-n)*(this.xmax-t)/(e-t),a=this.xmax):(u=n+(r-n)*(this.xmin-t)/(e-t),a=this.xmin),i?(t=a,n=u,i=this._regioncode(t,n)):(e=a,r=u,o=this._regioncode(e,r))}}_clipInfinite(t,n,e,r,i,o){let a,u=Array.from(n);if((a=this._project(u[0],u[1],e,r))&&u.unshift(a[0],a[1]),(a=this._project(u[u.length-2],u[u.length-1],i,o))&&u.push(a[0],a[1]),u=this._clipFinite(t,u))for(let n,e=0,r=u.length,i=this._edgecode(u[r-2],u[r-1]);e<r;e+=2)n=i,i=this._edgecode(u[e],u[e+1]),n&&i&&(e=this._edge(t,n,i,u,e),r=u.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(u=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return u}_edge(t,n,e,r,i){for(;n!==e;){let e,o;switch(n){case 5:n=4;continue;case 4:n=6,e=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,e=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,e=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,e=this.xmin,o=this.ymin}r[i]===e&&r[i+1]===o||!this.contains(t,e,o)||(r.splice(i,0,e,o),i+=2)}if(r.length>4)for(let t=0;t<r.length;t+=2){const n=(t+2)%r.length,e=(t+4)%r.length;(r[t]===r[n]&&r[n]===r[e]||r[t+1]===r[n+1]&&r[n+1]===r[e+1])&&(r.splice(n,2),t-=2)}return i}_project(t,n,e,r){let i,o,a,u=1/0;if(r<0){if(n<=this.ymin)return null;(i=(this.ymin-n)/r)<u&&(a=this.ymin,o=t+(u=i)*e)}else if(r>0){if(n>=this.ymax)return null;(i=(this.ymax-n)/r)<u&&(a=this.ymax,o=t+(u=i)*e)}if(e>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/e)<u&&(o=this.xmax,a=n+(u=i)*r)}else if(e<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/e)<u&&(o=this.xmin,a=n+(u=i)*r)}return[o,a]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}const Qa=2*Math.PI,Xa=Math.pow;function Ja(t){return t[0]}function tu(t){return t[1]}function nu(t,n,e){return[t+Math.sin(t+n)*e,n+Math.cos(t-n)*e]}class eu{static from(t,n=Ja,e=tu,r){return new eu("length"in t?function(t,n,e,r){const i=t.length,o=new Float64Array(2*i);for(let a=0;a<i;++a){const i=t[a];o[2*a]=n.call(r,i,a,t),o[2*a+1]=e.call(r,i,a,t)}return o}(t,n,e,r):Float64Array.from(function*(t,n,e,r){let i=0;for(const o of t)yield n.call(r,o,i,t),yield e.call(r,o,i,t),++i}(t,n,e,r)))}constructor(t){this._delaunator=new La(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&function(t){const{triangles:n,coords:e}=t;for(let t=0;t<n.length;t+=3){const r=2*n[t],i=2*n[t+1],o=2*n[t+2];if((e[o]-e[r])*(e[i+1]-e[r+1])-(e[i]-e[r])*(e[o+1]-e[r+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:n.length/2},((t,n)=>n)).sort(((t,e)=>n[2*t]-n[2*e]||n[2*t+1]-n[2*e+1]));const t=this.collinear[0],e=this.collinear[this.collinear.length-1],r=[n[2*t],n[2*t+1],n[2*e],n[2*e+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let t=0,e=n.length/2;t<e;++t){const e=nu(n[2*t],n[2*t+1],i);n[2*t]=e[0],n[2*t+1]=e[1]}this._delaunator=new La(n)}else delete this.collinear;const e=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let t=0,n=e.length;t<n;++t){const n=i[t%3==2?t-2:t+1];-1!==e[t]&&-1!==o[n]||(o[n]=t)}for(let t=0,n=r.length;t<n;++t)a[r[t]]=t;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,2===r.length&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new Ka(this,t)}*neighbors(t){const{inedges:n,hull:e,_hullIndex:r,halfedges:i,triangles:o,collinear:a}=this;if(a){const n=a.indexOf(t);return n>0&&(yield a[n-1]),void(n<a.length-1&&(yield a[n+1]))}const u=n[t];if(-1===u)return;let c=u,s=-1;do{if(yield s=o[c],c=c%3==2?c-2:c+1,o[c]!==t)return;if(c=i[c],-1===c){const n=e[(r[t]+1)%e.length];return void(n!==s&&(yield n))}}while(c!==u)}find(t,n,e=0){if((t=+t)!=t||(n=+n)!=n)return-1;const r=e;let i;for(;(i=this._step(e,t,n))>=0&&i!==e&&i!==r;)e=i;return i}_step(t,n,e){const{inedges:r,hull:i,_hullIndex:o,halfedges:a,triangles:u,points:c}=this;if(-1===r[t]||!c.length)return(t+1)%(c.length>>1);let s=t,f=Xa(n-c[2*t],2)+Xa(e-c[2*t+1],2);const l=r[t];let h=l;do{let r=u[h];const l=Xa(n-c[2*r],2)+Xa(e-c[2*r+1],2);if(l<f&&(f=l,s=r),h=h%3==2?h-2:h+1,u[h]!==t)break;if(h=a[h],-1===h){if(h=i[(o[t]+1)%i.length],h!==r&&Xa(n-c[2*h],2)+Xa(e-c[2*h+1],2)<f)return h;break}}while(h!==l);return s}render(t){const n=null==t?t=new Va:void 0,{points:e,halfedges:r,triangles:i}=this;for(let n=0,o=r.length;n<o;++n){const o=r[n];if(o<n)continue;const a=2*i[n],u=2*i[o];t.moveTo(e[a],e[a+1]),t.lineTo(e[u],e[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){void 0!==n||t&&"function"==typeof t.moveTo||(n=t,t=null),n=null==n?2:+n;const e=null==t?t=new Va:void 0,{points:r}=this;for(let e=0,i=r.length;e<i;e+=2){const i=r[e],o=r[e+1];t.moveTo(i+n,o),t.arc(i,o,n,0,Qa)}return e&&e.value()}renderHull(t){const n=null==t?t=new Va:void 0,{hull:e,points:r}=this,i=2*e[0],o=e.length;t.moveTo(r[i],r[i+1]);for(let n=1;n<o;++n){const i=2*e[n];t.lineTo(r[i],r[i+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new $a;return this.renderHull(t),t.value()}renderTriangle(t,n){const e=null==n?n=new Va:void 0,{points:r,triangles:i}=this,o=2*i[t*=3],a=2*i[t+1],u=2*i[t+2];return n.moveTo(r[o],r[o+1]),n.lineTo(r[a],r[a+1]),n.lineTo(r[u],r[u+1]),n.closePath(),e&&e.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,e=t.length/3;n<e;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new $a;return this.renderTriangle(t,n),n.value()}}var ru={},iu={};function ou(t){return new Function("d","return {"+t.map((function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'})).join(",")+"}")}function au(t){var n=Object.create(null),e=[];return t.forEach((function(t){for(var r in t)r in n||e.push(n[r]=r)})),e}function uu(t,n){var e=t+"",r=e.length;return r<n?new Array(n-r+1).join(0)+e:e}function cu(t){var n=new RegExp('["'+t+"\n\r]"),e=t.charCodeAt(0);function r(t,n){var r,i=[],o=t.length,a=0,u=0,c=o<=0,s=!1;function f(){if(c)return iu;if(s)return s=!1,ru;var n,r,i=a;if(34===t.charCodeAt(i)){for(;a++<o&&34!==t.charCodeAt(a)||34===t.charCodeAt(++a););return(n=a)>=o?c=!0:10===(r=t.charCodeAt(a++))?s=!0:13===r&&(s=!0,10===t.charCodeAt(a)&&++a),t.slice(i+1,n-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=t.charCodeAt(n=a++)))s=!0;else if(13===r)s=!0,10===t.charCodeAt(a)&&++a;else if(r!==e)continue;return t.slice(i,n)}return c=!0,t.slice(i,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=f())!==iu;){for(var l=[];r!==ru&&r!==iu;)l.push(r),r=f();n&&null==(l=n(l,u++))||i.push(l)}return i}function i(n,e){return n.map((function(n){return e.map((function(t){return a(n[t])})).join(t)}))}function o(n){return n.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?function(t){var n=t.getUTCHours(),e=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+uu(-t,6):t>9999?"+"+uu(t,6):uu(t,4)}(t.getUTCFullYear())+"-"+uu(t.getUTCMonth()+1,2)+"-"+uu(t.getUTCDate(),2)+(i?"T"+uu(n,2)+":"+uu(e,2)+":"+uu(r,2)+"."+uu(i,3)+"Z":r?"T"+uu(n,2)+":"+uu(e,2)+":"+uu(r,2)+"Z":e||n?"T"+uu(n,2)+":"+uu(e,2)+"Z":"")}(t):n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,n){var e,i,o=r(t,(function(t,r){if(e)return e(t,r-1);i=t,e=n?function(t,n){var e=ou(t);return function(r,i){return n(e(r),i,t)}}(t,n):ou(t)}));return o.columns=i||[],o},parseRows:r,format:function(n,e){return null==e&&(e=au(n)),[e.map(a).join(t)].concat(i(n,e)).join("\n")},formatBody:function(t,n){return null==n&&(n=au(t)),i(t,n).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}}var su=cu(","),fu=su.parse,lu=su.parseRows,hu=su.format,du=su.formatBody,pu=su.formatRows,gu=su.formatRow,yu=su.formatValue,vu=cu("\t"),_u=vu.parse,mu=vu.parseRows,bu=vu.format,Au=vu.formatBody,xu=vu.formatRows,wu=vu.formatRow,Mu=vu.formatValue;const Tu=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Nu(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function Su(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function ku(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Eu(t,n){return fetch(t,n).then(ku)}function Cu(t){return function(n,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=void 0),Eu(n,e).then((function(n){return t(n,r)}))}}var Du=Cu(fu),Fu=Cu(_u);function Pu(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function zu(t){return(n,e)=>Eu(n,e).then((n=>(new DOMParser).parseFromString(n,t)))}var Iu=zu("application/xml"),Uu=zu("text/html"),Ru=zu("image/svg+xml");function ju(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,o,a,u,c,s,f,l,h,d=t._root,p={data:r},g=t._x0,y=t._y0,v=t._x1,_=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((s=n>=(o=(g+v)/2))?g=o:v=o,(f=e>=(a=(y+_)/2))?y=a:_=a,i=d,!(d=d[l=f<<1|s]))return i[l]=p,t;if(u=+t._x.call(null,d.data),c=+t._y.call(null,d.data),n===u&&e===c)return p.next=d,i?i[l]=p:t._root=p,t;do{i=i?i[l]=new Array(4):t._root=new Array(4),(s=n>=(o=(g+v)/2))?g=o:v=o,(f=e>=(a=(y+_)/2))?y=a:_=a}while((l=f<<1|s)==(h=(c>=a)<<1|u>=o));return i[h]=d,i[l]=p,t}function Lu(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i}function Ou(t){return t[0]}function Yu(t){return t[1]}function qu(t,n,e){var r=new Bu(null==n?Ou:n,null==e?Yu:e,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Bu(t,n,e,r,i,o){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Gu(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var Hu=qu.prototype=Bu.prototype;function Zu(t){return function(){return t}}function Wu(t){return 1e-6*(t()-.5)}function Vu(t){return t.x+t.vx}function $u(t){return t.y+t.vy}function Ku(t){return t.index}function Qu(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}Hu.copy=function(){var t,n,e=new Bu(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return e;if(!r.length)return e._root=Gu(r),e;for(t=[{source:r,target:e._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(n=r.source[i])&&(n.length?t.push({source:n,target:r.target[i]=new Array(4)}):r.target[i]=Gu(n));return e},Hu.add=function(t){const n=+this._x.call(null,t),e=+this._y.call(null,t);return ju(this.cover(n,e),n,e,t)},Hu.addAll=function(t){var n,e,r,i,o=t.length,a=new Array(o),u=new Array(o),c=1/0,s=1/0,f=-1/0,l=-1/0;for(e=0;e<o;++e)isNaN(r=+this._x.call(null,n=t[e]))||isNaN(i=+this._y.call(null,n))||(a[e]=r,u[e]=i,r<c&&(c=r),r>f&&(f=r),i<s&&(s=i),i>l&&(l=i));if(c>f||s>l)return this;for(this.cover(c,s).cover(f,l),e=0;e<o;++e)ju(this,a[e],u[e],t[e]);return this},Hu.cover=function(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,o=(r=Math.floor(n))+1;else{for(var a,u,c=i-e||1,s=this._root;e>t||t>=i||r>n||n>=o;)switch(u=(n<r)<<1|t<e,(a=new Array(4))[u]=s,s=a,c*=2,u){case 0:i=e+c,o=r+c;break;case 1:e=i-c,o=r+c;break;case 2:i=e+c,r=o-c;break;case 3:e=i-c,r=o-c}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._y0=r,this._x1=i,this._y1=o,this},Hu.data=function(){var t=[];return this.visit((function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)})),t},Hu.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Hu.find=function(t,n,e){var r,i,o,a,u,c,s,f=this._x0,l=this._y0,h=this._x1,d=this._y1,p=[],g=this._root;for(g&&p.push(new Lu(g,f,l,h,d)),null==e?e=1/0:(f=t-e,l=n-e,h=t+e,d=n+e,e*=e);c=p.pop();)if(!(!(g=c.node)||(i=c.x0)>h||(o=c.y0)>d||(a=c.x1)<f||(u=c.y1)<l))if(g.length){var y=(i+a)/2,v=(o+u)/2;p.push(new Lu(g[3],y,v,a,u),new Lu(g[2],i,v,y,u),new Lu(g[1],y,o,a,v),new Lu(g[0],i,o,y,v)),(s=(n>=v)<<1|t>=y)&&(c=p[p.length-1],p[p.length-1]=p[p.length-1-s],p[p.length-1-s]=c)}else{var _=t-+this._x.call(null,g.data),m=n-+this._y.call(null,g.data),b=_*_+m*m;if(b<e){var A=Math.sqrt(e=b);f=t-A,l=n-A,h=t+A,d=n+A,r=g.data}}return r},Hu.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var n,e,r,i,o,a,u,c,s,f,l,h,d=this._root,p=this._x0,g=this._y0,y=this._x1,v=this._y1;if(!d)return this;if(d.length)for(;;){if((s=o>=(u=(p+y)/2))?p=u:y=u,(f=a>=(c=(g+v)/2))?g=c:v=c,n=d,!(d=d[l=f<<1|s]))return this;if(!d.length)break;(n[l+1&3]||n[l+2&3]||n[l+3&3])&&(e=n,h=l)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):n?(i?n[l]=i:delete n[l],(d=n[0]||n[1]||n[2]||n[3])&&d===(n[3]||n[2]||n[1]||n[0])&&!d.length&&(e?e[h]=d:this._root=d),this):(this._root=i,this)},Hu.removeAll=function(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this},Hu.root=function(){return this._root},Hu.size=function(){var t=0;return this.visit((function(n){if(!n.length)do{++t}while(n=n.next)})),t},Hu.visit=function(t){var n,e,r,i,o,a,u=[],c=this._root;for(c&&u.push(new Lu(c,this._x0,this._y0,this._x1,this._y1));n=u.pop();)if(!t(c=n.node,r=n.x0,i=n.y0,o=n.x1,a=n.y1)&&c.length){var s=(r+o)/2,f=(i+a)/2;(e=c[3])&&u.push(new Lu(e,s,f,o,a)),(e=c[2])&&u.push(new Lu(e,r,f,s,a)),(e=c[1])&&u.push(new Lu(e,s,i,o,f)),(e=c[0])&&u.push(new Lu(e,r,i,s,f))}return this},Hu.visitAfter=function(t){var n,e=[],r=[];for(this._root&&e.push(new Lu(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var o,a=n.x0,u=n.y0,c=n.x1,s=n.y1,f=(a+c)/2,l=(u+s)/2;(o=i[0])&&e.push(new Lu(o,a,u,f,l)),(o=i[1])&&e.push(new Lu(o,f,u,c,l)),(o=i[2])&&e.push(new Lu(o,a,l,f,s)),(o=i[3])&&e.push(new Lu(o,f,l,c,s))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this},Hu.x=function(t){return arguments.length?(this._x=t,this):this._x},Hu.y=function(t){return arguments.length?(this._y=t,this):this._y};const Xu=4294967296;function Ju(t){return t.x}function tc(t){return t.y}var nc=Math.PI*(3-Math.sqrt(5));function ec(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function rc(t){return(t=ec(Math.abs(t)))?t[1]:NaN}var ic,oc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ac(t){if(!(n=oc.exec(t)))throw new Error("invalid format: "+t);var n;return new uc({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function uc(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function cc(t,n){var e=ec(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}ac.prototype=uc.prototype,uc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var sc={"%":(t,n)=>(100*t).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>cc(100*t,n),r:cc,s:function(t,n){var e=ec(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(ic=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+ec(t,Math.max(0,n+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function fc(t){return t}var lc,hc=Array.prototype.map,dc=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function pc(t){var n,e,r=void 0===t.grouping||void 0===t.thousands?fc:(n=hc.call(t.grouping,Number),e=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,u=n[0],c=0;i>0&&u>0&&(c+u+1>r&&(u=Math.max(1,r-c)),o.push(t.substring(i-=u,i+u)),!((c+=u+1)>r));)u=n[a=(a+1)%n.length];return o.reverse().join(e)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",u=void 0===t.numerals?fc:function(t){return function(n){return n.replace(/[0-9]/g,(function(n){return t[+n]}))}}(hc.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",s=void 0===t.minus?"":t.minus+"",f=void 0===t.nan?"NaN":t.nan+"";function l(t){var n=(t=ac(t)).fill,e=t.align,l=t.sign,h=t.symbol,d=t.zero,p=t.width,g=t.comma,y=t.precision,v=t.trim,_=t.type;"n"===_?(g=!0,_="g"):sc[_]||(void 0===y&&(y=12),v=!0,_="g"),(d||"0"===n&&"="===e)&&(d=!0,n="0",e="=");var m="$"===h?i:"#"===h&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",b="$"===h?o:/[%p]/.test(_)?c:"",A=sc[_],x=/[defgprs%]/.test(_);function w(t){var i,o,c,h=m,w=b;if("c"===_)w=A(t)+w,t="";else{var M=(t=+t)<0||1/t<0;if(t=isNaN(t)?f:A(Math.abs(t),y),v&&(t=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(n+1):t}(t)),M&&0==+t&&"+"!==l&&(M=!1),h=(M?"("===l?l:s:"-"===l||"("===l?"":l)+h,w=("s"===_?dc[8+ic/3]:"")+w+(M&&"("===l?")":""),x)for(i=-1,o=t.length;++i<o;)if(48>(c=t.charCodeAt(i))||c>57){w=(46===c?a+t.slice(i+1):t.slice(i))+w,t=t.slice(0,i);break}}g&&!d&&(t=r(t,1/0));var T=h.length+t.length+w.length,N=T<p?new Array(p-T+1).join(n):"";switch(g&&d&&(t=r(N+t,N.length?p-w.length:1/0),N=""),e){case"<":t=h+t+w+N;break;case"=":t=h+N+t+w;break;case"^":t=N.slice(0,T=N.length>>1)+h+t+w+N.slice(T);break;default:t=N+h+t+w}return u(t)}return y=void 0===y?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),w.toString=function(){return t+""},w}return{format:l,formatPrefix:function(t,n){var e=l(((t=ac(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(rc(n)/3))),i=Math.pow(10,-r),o=dc[8+r/3];return function(t){return e(i*t)+o}}}}function gc(n){return lc=pc(n),t.format=lc.format,t.formatPrefix=lc.formatPrefix,lc}function yc(t){return Math.max(0,-rc(Math.abs(t)))}function vc(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(rc(n)/3)))-rc(Math.abs(t)))}function _c(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,rc(n)-rc(t))+1}t.format=void 0,t.formatPrefix=void 0,gc({thousands:",",grouping:[3],currency:["$",""]});var mc=1e-6,bc=1e-12,Ac=Math.PI,xc=Ac/2,wc=Ac/4,Mc=2*Ac,Tc=180/Ac,Nc=Ac/180,Sc=Math.abs,kc=Math.atan,Ec=Math.atan2,Cc=Math.cos,Dc=Math.ceil,Fc=Math.exp,Pc=Math.hypot,zc=Math.log,Ic=Math.pow,Uc=Math.sin,Rc=Math.sign||function(t){return t>0?1:t<0?-1:0},jc=Math.sqrt,Lc=Math.tan;function Oc(t){return t>1?0:t<-1?Ac:Math.acos(t)}function Yc(t){return t>1?xc:t<-1?-xc:Math.asin(t)}function qc(t){return(t=Uc(t/2))*t}function Bc(){}function Gc(t,n){t&&Zc.hasOwnProperty(t.type)&&Zc[t.type](t,n)}var Hc={Feature:function(t,n){Gc(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)Gc(e[r].geometry,n)}},Zc={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){Wc(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Wc(e[r],n,0)},Polygon:function(t,n){Vc(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Vc(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)Gc(e[r],n)}};function Wc(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function Vc(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)Wc(t[e],n,1);n.polygonEnd()}function $c(t,n){t&&Hc.hasOwnProperty(t.type)?Hc[t.type](t,n):Gc(t,n)}var Kc,Qc,Xc,Jc,ts,ns,es,rs,is,os,as,us,cs,ss,fs,ls,hs=new v,ds=new v,ps={point:Bc,lineStart:Bc,lineEnd:Bc,polygonStart:function(){hs=new v,ps.lineStart=gs,ps.lineEnd=ys},polygonEnd:function(){var t=+hs;ds.add(t<0?Mc+t:t),this.lineStart=this.lineEnd=this.point=Bc},sphere:function(){ds.add(Mc)}};function gs(){ps.point=vs}function ys(){_s(Kc,Qc)}function vs(t,n){ps.point=_s,Kc=t,Qc=n,Xc=t*=Nc,Jc=Cc(n=(n*=Nc)/2+wc),ts=Uc(n)}function _s(t,n){var e=(t*=Nc)-Xc,r=e>=0?1:-1,i=r*e,o=Cc(n=(n*=Nc)/2+wc),a=Uc(n),u=ts*a,c=Jc*o+u*Cc(i),s=u*r*Uc(i);hs.add(Ec(s,c)),Xc=t,Jc=o,ts=a}function ms(t){return[Ec(t[1],t[0]),Yc(t[2])]}function bs(t){var n=t[0],e=t[1],r=Cc(e);return[r*Cc(n),r*Uc(n),Uc(e)]}function As(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function xs(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function ws(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Ms(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Ts(t){var n=jc(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}var Ns,Ss,ks,Es,Cs,Ds,Fs,Ps,zs,Is,Us,Rs,js,Ls,Os,Ys,qs={point:Bs,lineStart:Hs,lineEnd:Zs,polygonStart:function(){qs.point=Ws,qs.lineStart=Vs,qs.lineEnd=$s,ss=new v,ps.polygonStart()},polygonEnd:function(){ps.polygonEnd(),qs.point=Bs,qs.lineStart=Hs,qs.lineEnd=Zs,hs<0?(ns=-(rs=180),es=-(is=90)):ss>mc?is=90:ss<-1e-6&&(es=-90),ls[0]=ns,ls[1]=rs},sphere:function(){ns=-(rs=180),es=-(is=90)}};function Bs(t,n){fs.push(ls=[ns=t,rs=t]),n<es&&(es=n),n>is&&(is=n)}function Gs(t,n){var e=bs([t*Nc,n*Nc]);if(cs){var r=xs(cs,e),i=xs([r[1],-r[0],0],r);Ts(i),i=ms(i);var o,a=t-os,u=a>0?1:-1,c=i[0]*Tc*u,s=Sc(a)>180;s^(u*os<c&&c<u*t)?(o=i[1]*Tc)>is&&(is=o):s^(u*os<(c=(c+360)%360-180)&&c<u*t)?(o=-i[1]*Tc)<es&&(es=o):(n<es&&(es=n),n>is&&(is=n)),s?t<os?Ks(ns,t)>Ks(ns,rs)&&(rs=t):Ks(t,rs)>Ks(ns,rs)&&(ns=t):rs>=ns?(t<ns&&(ns=t),t>rs&&(rs=t)):t>os?Ks(ns,t)>Ks(ns,rs)&&(rs=t):Ks(t,rs)>Ks(ns,rs)&&(ns=t)}else fs.push(ls=[ns=t,rs=t]);n<es&&(es=n),n>is&&(is=n),cs=e,os=t}function Hs(){qs.point=Gs}function Zs(){ls[0]=ns,ls[1]=rs,qs.point=Bs,cs=null}function Ws(t,n){if(cs){var e=t-os;ss.add(Sc(e)>180?e+(e>0?360:-360):e)}else as=t,us=n;ps.point(t,n),Gs(t,n)}function Vs(){ps.lineStart()}function $s(){Ws(as,us),ps.lineEnd(),Sc(ss)>mc&&(ns=-(rs=180)),ls[0]=ns,ls[1]=rs,cs=null}function Ks(t,n){return(n-=t)<0?n+360:n}function Qs(t,n){return t[0]-n[0]}function Xs(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var Js={sphere:Bc,point:tf,lineStart:ef,lineEnd:af,polygonStart:function(){Js.lineStart=uf,Js.lineEnd=cf},polygonEnd:function(){Js.lineStart=ef,Js.lineEnd=af}};function tf(t,n){t*=Nc;var e=Cc(n*=Nc);nf(e*Cc(t),e*Uc(t),Uc(n))}function nf(t,n,e){++Ns,ks+=(t-ks)/Ns,Es+=(n-Es)/Ns,Cs+=(e-Cs)/Ns}function ef(){Js.point=rf}function rf(t,n){t*=Nc;var e=Cc(n*=Nc);Ls=e*Cc(t),Os=e*Uc(t),Ys=Uc(n),Js.point=of,nf(Ls,Os,Ys)}function of(t,n){t*=Nc;var e=Cc(n*=Nc),r=e*Cc(t),i=e*Uc(t),o=Uc(n),a=Ec(jc((a=Os*o-Ys*i)*a+(a=Ys*r-Ls*o)*a+(a=Ls*i-Os*r)*a),Ls*r+Os*i+Ys*o);Ss+=a,Ds+=a*(Ls+(Ls=r)),Fs+=a*(Os+(Os=i)),Ps+=a*(Ys+(Ys=o)),nf(Ls,Os,Ys)}function af(){Js.point=tf}function uf(){Js.point=sf}function cf(){ff(Rs,js),Js.point=tf}function sf(t,n){Rs=t,js=n,t*=Nc,n*=Nc,Js.point=ff;var e=Cc(n);Ls=e*Cc(t),Os=e*Uc(t),Ys=Uc(n),nf(Ls,Os,Ys)}function ff(t,n){t*=Nc;var e=Cc(n*=Nc),r=e*Cc(t),i=e*Uc(t),o=Uc(n),a=Os*o-Ys*i,u=Ys*r-Ls*o,c=Ls*i-Os*r,s=Pc(a,u,c),f=Yc(s),l=s&&-f/s;zs.add(l*a),Is.add(l*u),Us.add(l*c),Ss+=f,Ds+=f*(Ls+(Ls=r)),Fs+=f*(Os+(Os=i)),Ps+=f*(Ys+(Ys=o)),nf(Ls,Os,Ys)}function lf(t){return function(){return t}}function hf(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function df(t,n){return[Sc(t)>Ac?t+Math.round(-t/Mc)*Mc:t,n]}function pf(t,n,e){return(t%=Mc)?n||e?hf(yf(t),vf(n,e)):yf(t):n||e?vf(n,e):df}function gf(t){return function(n,e){return[(n+=t)>Ac?n-Mc:n<-Ac?n+Mc:n,e]}}function yf(t){var n=gf(t);return n.invert=gf(-t),n}function vf(t,n){var e=Cc(t),r=Uc(t),i=Cc(n),o=Uc(n);function a(t,n){var a=Cc(n),u=Cc(t)*a,c=Uc(t)*a,s=Uc(n),f=s*e+u*r;return[Ec(c*i-f*o,u*e-s*r),Yc(f*i+c*o)]}return a.invert=function(t,n){var a=Cc(n),u=Cc(t)*a,c=Uc(t)*a,s=Uc(n),f=s*i-c*o;return[Ec(c*i+s*o,u*e+f*r),Yc(f*e-u*r)]},a}function _f(t){function n(n){return(n=t(n[0]*Nc,n[1]*Nc))[0]*=Tc,n[1]*=Tc,n}return t=pf(t[0]*Nc,t[1]*Nc,t.length>2?t[2]*Nc:0),n.invert=function(n){return(n=t.invert(n[0]*Nc,n[1]*Nc))[0]*=Tc,n[1]*=Tc,n},n}function mf(t,n,e,r,i,o){if(e){var a=Cc(n),u=Uc(n),c=r*e;null==i?(i=n+r*Mc,o=n-c/2):(i=bf(a,i),o=bf(a,o),(r>0?i<o:i>o)&&(i+=r*Mc));for(var s,f=i;r>0?f>o:f<o;f-=c)s=ms([a,-u*Cc(f),-u*Uc(f)]),t.point(s[0],s[1])}}function bf(t,n){(n=bs(n))[0]-=t,Ts(n);var e=Oc(-n[1]);return((-n[2]<0?-e:e)+Mc-mc)%Mc}function Af(){var t,n=[];return{point:function(n,e,r){t.push([n,e,r])},lineStart:function(){n.push(t=[])},lineEnd:Bc,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function xf(t,n){return Sc(t[0]-n[0])<mc&&Sc(t[1]-n[1])<mc}function wf(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Mf(t,n,e,r,i){var o,a,u=[],c=[];if(t.forEach((function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],a=t[n];if(xf(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<n;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2e-6}u.push(e=new wf(r,t,null,!0)),c.push(e.o=new wf(r,null,e,!1)),u.push(e=new wf(a,t,null,!1)),c.push(e.o=new wf(a,null,e,!0))}})),u.length){for(c.sort(n),Tf(u),Tf(c),o=0,a=c.length;o<a;++o)c[o].e=e=!e;for(var s,f,l=u[0];;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;s=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,a=s.length;o<a;++o)i.point((f=s[o])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(s=h.p.z,o=s.length-1;o>=0;--o)i.point((f=s[o])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}s=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}}function Tf(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}function Nf(t){return Sc(t[0])<=Ac?t[0]:Rc(t[0])*((Sc(t[0])+Ac)%Mc-Ac)}function Sf(t,n){var e=Nf(n),r=n[1],i=Uc(r),o=[Uc(e),-Cc(e),0],a=0,u=0,c=new v;1===i?r=xc+mc:-1===i&&(r=-xc-mc);for(var s=0,f=t.length;s<f;++s)if(h=(l=t[s]).length)for(var l,h,d=l[h-1],p=Nf(d),g=d[1]/2+wc,y=Uc(g),_=Cc(g),m=0;m<h;++m,p=A,y=w,_=M,d=b){var b=l[m],A=Nf(b),x=b[1]/2+wc,w=Uc(x),M=Cc(x),T=A-p,N=T>=0?1:-1,S=N*T,k=S>Ac,E=y*w;if(c.add(Ec(E*N*Uc(S),_*M+E*Cc(S))),a+=k?T+N*Mc:T,k^p>=e^A>=e){var C=xs(bs(d),bs(b));Ts(C);var D=xs(o,C);Ts(D);var F=(k^T>=0?-1:1)*Yc(D[2]);(r>F||r===F&&(C[0]||C[1]))&&(u+=k^T>=0?1:-1)}}return(a<-1e-6||a<mc&&c<-1e-12)^1&u}function kf(t,n,e,r){return function(i){var o,a,u,c=n(i),s=Af(),f=n(s),l=!1,h={point:d,lineStart:g,lineEnd:y,polygonStart:function(){h.point=v,h.lineStart=_,h.lineEnd=m,a=[],o=[]},polygonEnd:function(){h.point=d,h.lineStart=g,h.lineEnd=y,a=tt(a);var t=Sf(o,r);a.length?(l||(i.polygonStart(),l=!0),Mf(a,Cf,t,e,i)):t&&(l||(i.polygonStart(),l=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(n,e){t(n,e)&&i.point(n,e)}function p(t,n){c.point(t,n)}function g(){h.point=p,c.lineStart()}function y(){h.point=d,c.lineEnd()}function v(t,n){u.push([t,n]),f.point(t,n)}function _(){f.lineStart(),u=[]}function m(){v(u[0][0],u[0][1]),f.lineEnd();var t,n,e,r,c=f.clean(),h=s.result(),d=h.length;if(u.pop(),o.push(u),u=null,d)if(1&c){if((n=(e=h[0]).length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),t=0;t<n;++t)i.point((r=e[t])[0],r[1]);i.lineEnd()}}else d>1&&2&c&&h.push(h.pop().concat(h.shift())),a.push(h.filter(Ef))}return h}}function Ef(t){return t.length>1}function Cf(t,n){return((t=t.x)[0]<0?t[1]-xc-mc:xc-t[1])-((n=n.x)[0]<0?n[1]-xc-mc:xc-n[1])}df.invert=df;var Df=kf((function(){return!0}),(function(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,a){var u=o>0?Ac:-Ac,c=Sc(o-e);Sc(c-Ac)<mc?(t.point(e,r=(r+a)/2>0?xc:-xc),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),n=0):i!==u&&c>=Ac&&(Sc(e-i)<mc&&(e-=i*mc),Sc(o-u)<mc&&(o-=u*mc),r=function(t,n,e,r){var i,o,a=Uc(t-e);return Sc(a)>mc?kc((Uc(n)*(o=Cc(r))*Uc(e)-Uc(r)*(i=Cc(n))*Uc(t))/(i*o*a)):(n+r)/2}(e,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),n=0),t.point(e=o,r=a),i=u},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}),(function(t,n,e,r){var i;if(null==t)i=e*xc,r.point(-Ac,i),r.point(0,i),r.point(Ac,i),r.point(Ac,0),r.point(Ac,-i),r.point(0,-i),r.point(-Ac,-i),r.point(-Ac,0),r.point(-Ac,i);else if(Sc(t[0]-n[0])>mc){var o=t[0]<n[0]?Ac:-Ac;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])}),[-Ac,-xc]);function Ff(t){var n=Cc(t),e=6*Nc,r=n>0,i=Sc(n)>mc;function o(t,e){return Cc(t)*Cc(e)>n}function a(t,e,r){var i=[1,0,0],o=xs(bs(t),bs(e)),a=As(o,o),u=o[0],c=a-u*u;if(!c)return!r&&t;var s=n*a/c,f=-n*u/c,l=xs(i,o),h=Ms(i,s);ws(h,Ms(o,f));var d=l,p=As(h,d),g=As(d,d),y=p*p-g*(As(h,h)-1);if(!(y<0)){var v=jc(y),_=Ms(d,(-p-v)/g);if(ws(_,h),_=ms(_),!r)return _;var m,b=t[0],A=e[0],x=t[1],w=e[1];A<b&&(m=b,b=A,A=m);var M=A-b,T=Sc(M-Ac)<mc;if(!T&&w<x&&(m=x,x=w,w=m),T||M<mc?T?x+w>0^_[1]<(Sc(_[0]-b)<mc?x:w):x<=_[1]&&_[1]<=w:M>Ac^(b<=_[0]&&_[0]<=A)){var N=Ms(d,(-p+v)/g);return ws(N,h),[_,ms(N)]}}}function u(n,e){var i=r?t:Ac-t,o=0;return n<-i?o|=1:n>i&&(o|=2),e<-i?o|=4:e>i&&(o|=8),o}return kf(o,(function(t){var n,e,c,s,f;return{lineStart:function(){s=c=!1,f=1},point:function(l,h){var d,p=[l,h],g=o(l,h),y=r?g?0:u(l,h):g?u(l+(l<0?Ac:-Ac),h):0;if(!n&&(s=c=g)&&t.lineStart(),g!==c&&(!(d=a(n,p))||xf(n,d)||xf(p,d))&&(p[2]=1),g!==c)f=0,g?(t.lineStart(),d=a(p,n),t.point(d[0],d[1])):(d=a(n,p),t.point(d[0],d[1],2),t.lineEnd()),n=d;else if(i&&n&&r^g){var v;y&e||!(v=a(p,n,!0))||(f=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1],3)))}!g||n&&xf(n,p)||t.point(p[0],p[1]),n=p,c=g,e=y},lineEnd:function(){c&&t.lineEnd(),n=null},clean:function(){return f|(s&&c)<<1}}}),(function(n,r,i,o){mf(o,t,e,i,n,r)}),r?[0,-t]:[-Ac,t-Ac])}var Pf,zf,If,Uf,Rf=1e9,jf=-Rf;function Lf(t,n,e,r){function i(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function o(i,o,u,s){var f=0,l=0;if(null==i||(f=a(i,u))!==(l=a(o,u))||c(i,o)<0^u>0)do{s.point(0===f||3===f?t:e,f>1?r:n)}while((f=(f+u+4)%4)!==l);else s.point(o[0],o[1])}function a(r,i){return Sc(r[0]-t)<mc?i>0?0:3:Sc(r[0]-e)<mc?i>0?2:1:Sc(r[1]-n)<mc?i>0?1:0:i>0?3:2}function u(t,n){return c(t.x,n.x)}function c(t,n){var e=a(t,1),r=a(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(a){var c,s,f,l,h,d,p,g,y,v,_,m=a,b=Af(),A={point:x,lineStart:function(){A.point=w,s&&s.push(f=[]),v=!0,y=!1,p=g=NaN},lineEnd:function(){c&&(w(l,h),d&&y&&b.rejoin(),c.push(b.result())),A.point=x,y&&m.lineEnd()},polygonStart:function(){m=b,c=[],s=[],_=!0},polygonEnd:function(){var n=function(){for(var n=0,e=0,i=s.length;e<i;++e)for(var o,a,u=s[e],c=1,f=u.length,l=u[0],h=l[0],d=l[1];c<f;++c)o=h,a=d,h=(l=u[c])[0],d=l[1],a<=r?d>r&&(h-o)*(r-a)>(d-a)*(t-o)&&++n:d<=r&&(h-o)*(r-a)<(d-a)*(t-o)&&--n;return n}(),e=_&&n,i=(c=tt(c)).length;(e||i)&&(a.polygonStart(),e&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Mf(c,u,n,o,a),a.polygonEnd()),m=a,c=s=f=null}};function x(t,n){i(t,n)&&m.point(t,n)}function w(o,a){var u=i(o,a);if(s&&f.push([o,a]),v)l=o,h=a,d=u,v=!1,u&&(m.lineStart(),m.point(o,a));else if(u&&y)m.point(o,a);else{var c=[p=Math.max(jf,Math.min(Rf,p)),g=Math.max(jf,Math.min(Rf,g))],b=[o=Math.max(jf,Math.min(Rf,o)),a=Math.max(jf,Math.min(Rf,a))];!function(t,n,e,r,i,o){var a,u=t[0],c=t[1],s=0,f=1,l=n[0]-u,h=n[1]-c;if(a=e-u,l||!(a>0)){if(a/=l,l<0){if(a<s)return;a<f&&(f=a)}else if(l>0){if(a>f)return;a>s&&(s=a)}if(a=i-u,l||!(a<0)){if(a/=l,l<0){if(a>f)return;a>s&&(s=a)}else if(l>0){if(a<s)return;a<f&&(f=a)}if(a=r-c,h||!(a>0)){if(a/=h,h<0){if(a<s)return;a<f&&(f=a)}else if(h>0){if(a>f)return;a>s&&(s=a)}if(a=o-c,h||!(a<0)){if(a/=h,h<0){if(a>f)return;a>s&&(s=a)}else if(h>0){if(a<s)return;a<f&&(f=a)}return s>0&&(t[0]=u+s*l,t[1]=c+s*h),f<1&&(n[0]=u+f*l,n[1]=c+f*h),!0}}}}}(c,b,t,n,e,r)?u&&(m.lineStart(),m.point(o,a),_=!1):(y||(m.lineStart(),m.point(c[0],c[1])),m.point(b[0],b[1]),u||m.lineEnd(),_=!1)}p=o,g=a,y=u}return A}}var Of={sphere:Bc,point:Bc,lineStart:function(){Of.point=qf,Of.lineEnd=Yf},lineEnd:Bc,polygonStart:Bc,polygonEnd:Bc};function Yf(){Of.point=Of.lineEnd=Bc}function qf(t,n){zf=t*=Nc,If=Uc(n*=Nc),Uf=Cc(n),Of.point=Bf}function Bf(t,n){t*=Nc;var e=Uc(n*=Nc),r=Cc(n),i=Sc(t-zf),o=Cc(i),a=r*Uc(i),u=Uf*e-If*r*o,c=If*e+Uf*r*o;Pf.add(Ec(jc(a*a+u*u),c)),zf=t,If=e,Uf=r}function Gf(t){return Pf=new v,$c(t,Of),+Pf}var Hf=[null,null],Zf={type:"LineString",coordinates:Hf};function Wf(t,n){return Hf[0]=t,Hf[1]=n,Gf(Zf)}var Vf={Feature:function(t,n){return Kf(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)if(Kf(e[r].geometry,n))return!0;return!1}},$f={Sphere:function(){return!0},Point:function(t,n){return Qf(t.coordinates,n)},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(Qf(e[r],n))return!0;return!1},LineString:function(t,n){return Xf(t.coordinates,n)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(Xf(e[r],n))return!0;return!1},Polygon:function(t,n){return Jf(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(Jf(e[r],n))return!0;return!1},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)if(Kf(e[r],n))return!0;return!1}};function Kf(t,n){return!(!t||!$f.hasOwnProperty(t.type))&&$f[t.type](t,n)}function Qf(t,n){return 0===Wf(t,n)}function Xf(t,n){for(var e,r,i,o=0,a=t.length;o<a;o++){if(0===(r=Wf(t[o],n)))return!0;if(o>0&&(i=Wf(t[o],t[o-1]))>0&&e<=i&&r<=i&&(e+r-i)*(1-Math.pow((e-r)/i,2))<bc*i)return!0;e=r}return!1}function Jf(t,n){return!!Sf(t.map(tl),nl(n))}function tl(t){return(t=t.map(nl)).pop(),t}function nl(t){return[t[0]*Nc,t[1]*Nc]}function el(t,n,e){var r=rt(t,n-mc,e).concat(n);return function(t){return r.map((function(n){return[t,n]}))}}function rl(t,n,e){var r=rt(t,n-mc,e).concat(n);return function(t){return r.map((function(n){return[n,t]}))}}function il(){var t,n,e,r,i,o,a,u,c,s,f,l,h=10,d=h,p=90,g=360,y=2.5;function v(){return{type:"MultiLineString",coordinates:_()}}function _(){return rt(Dc(r/p)*p,e,p).map(f).concat(rt(Dc(u/g)*g,a,g).map(l)).concat(rt(Dc(n/h)*h,t,h).filter((function(t){return Sc(t%p)>mc})).map(c)).concat(rt(Dc(o/d)*d,i,d).filter((function(t){return Sc(t%g)>mc})).map(s))}return v.lines=function(){return _().map((function(t){return{type:"LineString",coordinates:t}}))},v.outline=function(){return{type:"Polygon",coordinates:[f(r).concat(l(a).slice(1),f(e).reverse().slice(1),l(u).reverse().slice(1))]}},v.extent=function(t){return arguments.length?v.extentMajor(t).extentMinor(t):v.extentMinor()},v.extentMajor=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],u=+t[0][1],a=+t[1][1],r>e&&(t=r,r=e,e=t),u>a&&(t=u,u=a,a=t),v.precision(y)):[[r,u],[e,a]]},v.extentMinor=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],o=+e[0][1],i=+e[1][1],n>t&&(e=n,n=t,t=e),o>i&&(e=o,o=i,i=e),v.precision(y)):[[n,o],[t,i]]},v.step=function(t){return arguments.length?v.stepMajor(t).stepMinor(t):v.stepMinor()},v.stepMajor=function(t){return arguments.length?(p=+t[0],g=+t[1],v):[p,g]},v.stepMinor=function(t){return arguments.length?(h=+t[0],d=+t[1],v):[h,d]},v.precision=function(h){return arguments.length?(y=+h,c=el(o,i,90),s=rl(n,t,y),f=el(u,a,90),l=rl(r,e,y),v):y},v.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}var ol,al,ul,cl,sl=t=>t,fl=new v,ll=new v,hl={point:Bc,lineStart:Bc,lineEnd:Bc,polygonStart:function(){hl.lineStart=dl,hl.lineEnd=yl},polygonEnd:function(){hl.lineStart=hl.lineEnd=hl.point=Bc,fl.add(Sc(ll)),ll=new v},result:function(){var t=fl/2;return fl=new v,t}};function dl(){hl.point=pl}function pl(t,n){hl.point=gl,ol=ul=t,al=cl=n}function gl(t,n){ll.add(cl*t-ul*n),ul=t,cl=n}function yl(){gl(ol,al)}var vl,_l,ml,bl,Al=hl,xl=1/0,wl=xl,Ml=-xl,Tl=Ml,Nl={point:function(t,n){t<xl&&(xl=t),t>Ml&&(Ml=t),n<wl&&(wl=n),n>Tl&&(Tl=n)},lineStart:Bc,lineEnd:Bc,polygonStart:Bc,polygonEnd:Bc,result:function(){var t=[[xl,wl],[Ml,Tl]];return Ml=Tl=-(wl=xl=1/0),t}},Sl=Nl,kl=0,El=0,Cl=0,Dl=0,Fl=0,Pl=0,zl=0,Il=0,Ul=0,Rl={point:jl,lineStart:Ll,lineEnd:ql,polygonStart:function(){Rl.lineStart=Bl,Rl.lineEnd=Gl},polygonEnd:function(){Rl.point=jl,Rl.lineStart=Ll,Rl.lineEnd=ql},result:function(){var t=Ul?[zl/Ul,Il/Ul]:Pl?[Dl/Pl,Fl/Pl]:Cl?[kl/Cl,El/Cl]:[NaN,NaN];return kl=El=Cl=Dl=Fl=Pl=zl=Il=Ul=0,t}};function jl(t,n){kl+=t,El+=n,++Cl}function Ll(){Rl.point=Ol}function Ol(t,n){Rl.point=Yl,jl(ml=t,bl=n)}function Yl(t,n){var e=t-ml,r=n-bl,i=jc(e*e+r*r);Dl+=i*(ml+t)/2,Fl+=i*(bl+n)/2,Pl+=i,jl(ml=t,bl=n)}function ql(){Rl.point=jl}function Bl(){Rl.point=Hl}function Gl(){Zl(vl,_l)}function Hl(t,n){Rl.point=Zl,jl(vl=ml=t,_l=bl=n)}function Zl(t,n){var e=t-ml,r=n-bl,i=jc(e*e+r*r);Dl+=i*(ml+t)/2,Fl+=i*(bl+n)/2,Pl+=i,zl+=(i=bl*t-ml*n)*(ml+t),Il+=i*(bl+n),Ul+=3*i,jl(ml=t,bl=n)}var Wl=Rl;function Vl(t){this._context=t}Vl.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,Mc)}},result:Bc};var $l,Kl,Ql,Xl,Jl,th=new v,nh={point:Bc,lineStart:function(){nh.point=eh},lineEnd:function(){$l&&rh(Kl,Ql),nh.point=Bc},polygonStart:function(){$l=!0},polygonEnd:function(){$l=null},result:function(){var t=+th;return th=new v,t}};function eh(t,n){nh.point=rh,Kl=Xl=t,Ql=Jl=n}function rh(t,n){Xl-=t,Jl-=n,th.add(jc(Xl*Xl+Jl*Jl)),Xl=t,Jl=n}var ih=nh;function oh(){this._string=[]}function ah(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function uh(t){return function(n){var e=new ch;for(var r in t)e[r]=t[r];return e.stream=n,e}}function ch(){}function sh(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),$c(e,t.stream(Sl)),n(Sl.result()),null!=r&&t.clipExtent(r),t}function fh(t,n,e){return sh(t,(function(e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),a=+n[0][0]+(r-o*(e[1][0]+e[0][0]))/2,u=+n[0][1]+(i-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([a,u])}),e)}function lh(t,n,e){return fh(t,[[0,0],n],e)}function hh(t,n,e){return sh(t,(function(e){var r=+n,i=r/(e[1][0]-e[0][0]),o=(r-i*(e[1][0]+e[0][0]))/2,a=-i*e[0][1];t.scale(150*i).translate([o,a])}),e)}function dh(t,n,e){return sh(t,(function(e){var r=+n,i=r/(e[1][1]-e[0][1]),o=-i*e[0][0],a=(r-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([o,a])}),e)}oh.prototype={_radius:4.5,_circle:ah(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push("M",t,",",n),this._point=1;break;case 1:this._string.push("L",t,",",n);break;default:null==this._circle&&(this._circle=ah(this._radius)),this._string.push("M",t,",",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},ch.prototype={constructor:ch,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ph=Cc(30*Nc);function gh(t,n){return+n?function(t,n){function e(r,i,o,a,u,c,s,f,l,h,d,p,g,y){var v=s-r,_=f-i,m=v*v+_*_;if(m>4*n&&g--){var b=a+h,A=u+d,x=c+p,w=jc(b*b+A*A+x*x),M=Yc(x/=w),T=Sc(Sc(x)-1)<mc||Sc(o-l)<mc?(o+l)/2:Ec(A,b),N=t(T,M),S=N[0],k=N[1],E=S-r,C=k-i,D=_*E-v*C;(D*D/m>n||Sc((v*E+_*C)/m-.5)>.3||a*h+u*d+c*p<ph)&&(e(r,i,o,a,u,c,S,k,T,b/=w,A/=w,x,g,y),y.point(S,k),e(S,k,T,b,A,x,s,f,l,h,d,p,g,y))}}return function(n){var r,i,o,a,u,c,s,f,l,h,d,p,g={point:y,lineStart:v,lineEnd:m,polygonStart:function(){n.polygonStart(),g.lineStart=b},polygonEnd:function(){n.polygonEnd(),g.lineStart=v}};function y(e,r){e=t(e,r),n.point(e[0],e[1])}function v(){f=NaN,g.point=_,n.lineStart()}function _(r,i){var o=bs([r,i]),a=t(r,i);e(f,l,s,h,d,p,f=a[0],l=a[1],s=r,h=o[0],d=o[1],p=o[2],16,n),n.point(f,l)}function m(){g.point=y,n.lineEnd()}function b(){v(),g.point=A,g.lineEnd=x}function A(t,n){_(r=t,n),i=f,o=l,a=h,u=d,c=p,g.point=_}function x(){e(f,l,s,h,d,p,i,o,r,a,u,c,16,n),g.lineEnd=m,m()}return g}}(t,n):function(t){return uh({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)}var yh=uh({point:function(t,n){this.stream.point(t*Nc,n*Nc)}});function vh(t,n,e,r,i,o){if(!o)return function(t,n,e,r,i){function o(o,a){return[n+t*(o*=r),e-t*(a*=i)]}return o.invert=function(o,a){return[(o-n)/t*r,(e-a)/t*i]},o}(t,n,e,r,i);var a=Cc(o),u=Uc(o),c=a*t,s=u*t,f=a/t,l=u/t,h=(u*e-a*n)/t,d=(u*n+a*e)/t;function p(t,o){return[c*(t*=r)-s*(o*=i)+n,e-s*t-c*o]}return p.invert=function(t,n){return[r*(f*t-l*n+h),i*(d-l*t-f*n)]},p}function _h(t){return mh((function(){return t}))()}function mh(t){var n,e,r,i,o,a,u,c,s,f,l=150,h=480,d=250,p=0,g=0,y=0,v=0,_=0,m=0,b=1,A=1,x=null,w=Df,M=null,T=sl,N=.5;function S(t){return c(t[0]*Nc,t[1]*Nc)}function k(t){return(t=c.invert(t[0],t[1]))&&[t[0]*Tc,t[1]*Tc]}function E(){var t=vh(l,0,0,b,A,m).apply(null,n(p,g)),r=vh(l,h-t[0],d-t[1],b,A,m);return e=pf(y,v,_),u=hf(n,r),c=hf(e,u),a=gh(u,N),C()}function C(){return s=f=null,S}return S.stream=function(t){return s&&f===t?s:s=yh(function(t){return uh({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}(e)(w(a(T(f=t)))))},S.preclip=function(t){return arguments.length?(w=t,x=void 0,C()):w},S.postclip=function(t){return arguments.length?(T=t,M=r=i=o=null,C()):T},S.clipAngle=function(t){return arguments.length?(w=+t?Ff(x=t*Nc):(x=null,Df),C()):x*Tc},S.clipExtent=function(t){return arguments.length?(T=null==t?(M=r=i=o=null,sl):Lf(M=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),C()):null==M?null:[[M,r],[i,o]]},S.scale=function(t){return arguments.length?(l=+t,E()):l},S.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],E()):[h,d]},S.center=function(t){return arguments.length?(p=t[0]%360*Nc,g=t[1]%360*Nc,E()):[p*Tc,g*Tc]},S.rotate=function(t){return arguments.length?(y=t[0]%360*Nc,v=t[1]%360*Nc,_=t.length>2?t[2]%360*Nc:0,E()):[y*Tc,v*Tc,_*Tc]},S.angle=function(t){return arguments.length?(m=t%360*Nc,E()):m*Tc},S.reflectX=function(t){return arguments.length?(b=t?-1:1,E()):b<0},S.reflectY=function(t){return arguments.length?(A=t?-1:1,E()):A<0},S.precision=function(t){return arguments.length?(a=gh(u,N=t*t),C()):jc(N)},S.fitExtent=function(t,n){return fh(S,t,n)},S.fitSize=function(t,n){return lh(S,t,n)},S.fitWidth=function(t,n){return hh(S,t,n)},S.fitHeight=function(t,n){return dh(S,t,n)},function(){return n=t.apply(this,arguments),S.invert=n.invert&&k,E()}}function bh(t){var n=0,e=Ac/3,r=mh(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*Nc,e=t[1]*Nc):[n*Tc,e*Tc]},i}function Ah(t,n){var e=Uc(t),r=(e+Uc(n))/2;if(Sc(r)<mc)return function(t){var n=Cc(t);function e(t,e){return[t*n,Uc(e)/n]}return e.invert=function(t,e){return[t/n,Yc(e*n)]},e}(t);var i=1+e*(2*r-e),o=jc(i)/r;function a(t,n){var e=jc(i-2*r*Uc(n))/r;return[e*Uc(t*=r),o-e*Cc(t)]}return a.invert=function(t,n){var e=o-n,a=Ec(t,Sc(e))*Rc(e);return e*r<0&&(a-=Ac*Rc(t)*Rc(e)),[a/r,Yc((i-(t*t+e*e)*r*r)/(2*r))]},a}function xh(){return bh(Ah).scale(155.424).center([0,33.6442])}function wh(){return xh().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Mh(t){return function(n,e){var r=Cc(n),i=Cc(e),o=t(r*i);return o===1/0?[2,0]:[o*i*Uc(n),o*Uc(e)]}}function Th(t){return function(n,e){var r=jc(n*n+e*e),i=t(r),o=Uc(i),a=Cc(i);return[Ec(n*o,r*a),Yc(r&&e*o/r)]}}var Nh=Mh((function(t){return jc(2/(1+t))}));Nh.invert=Th((function(t){return 2*Yc(t/2)}));var Sh=Mh((function(t){return(t=Oc(t))&&t/Uc(t)}));function kh(t,n){return[t,zc(Lc((xc+n)/2))]}function Eh(t){var n,e,r,i=_h(t),o=i.center,a=i.scale,u=i.translate,c=i.clipExtent,s=null;function f(){var o=Ac*a(),u=i(_f(i.rotate()).invert([0,0]));return c(null==s?[[u[0]-o,u[1]-o],[u[0]+o,u[1]+o]]:t===kh?[[Math.max(u[0]-o,s),n],[Math.min(u[0]+o,e),r]]:[[s,Math.max(u[1]-o,n)],[e,Math.min(u[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),f()):a()},i.translate=function(t){return arguments.length?(u(t),f()):u()},i.center=function(t){return arguments.length?(o(t),f()):o()},i.clipExtent=function(t){return arguments.length?(null==t?s=n=e=r=null:(s=+t[0][0],n=+t[0][1],e=+t[1][0],r=+t[1][1]),f()):null==s?null:[[s,n],[e,r]]},f()}function Ch(t){return Lc((xc+t)/2)}function Dh(t,n){var e=Cc(t),r=t===n?Uc(t):zc(e/Cc(n))/zc(Ch(n)/Ch(t)),i=e*Ic(Ch(t),r)/r;if(!r)return kh;function o(t,n){i>0?n<-xc+mc&&(n=-xc+mc):n>xc-mc&&(n=xc-mc);var e=i/Ic(Ch(n),r);return[e*Uc(r*t),i-e*Cc(r*t)]}return o.invert=function(t,n){var e=i-n,o=Rc(r)*jc(t*t+e*e),a=Ec(t,Sc(e))*Rc(e);return e*r<0&&(a-=Ac*Rc(t)*Rc(e)),[a/r,2*kc(Ic(i/o,1/r))-xc]},o}function Fh(t,n){return[t,n]}function Ph(t,n){var e=Cc(t),r=t===n?Uc(t):(e-Cc(n))/(n-t),i=e/r+t;if(Sc(r)<mc)return Fh;function o(t,n){var e=i-n,o=r*t;return[e*Uc(o),i-e*Cc(o)]}return o.invert=function(t,n){var e=i-n,o=Ec(t,Sc(e))*Rc(e);return e*r<0&&(o-=Ac*Rc(t)*Rc(e)),[o/r,i-Rc(r)*jc(t*t+e*e)]},o}Sh.invert=Th((function(t){return t})),kh.invert=function(t,n){return[t,2*kc(Fc(n))-xc]},Fh.invert=Fh;var zh=1.340264,Ih=-.081106,Uh=893e-6,Rh=.003796,jh=jc(3)/2;function Lh(t,n){var e=Yc(jh*Uc(n)),r=e*e,i=r*r*r;return[t*Cc(e)/(jh*(zh+3*Ih*r+i*(7*Uh+9*Rh*r))),e*(zh+Ih*r+i*(Uh+Rh*r))]}function Oh(t,n){var e=Cc(n),r=Cc(t)*e;return[e*Uc(t)/r,Uc(n)/r]}function Yh(t,n){var e=n*n,r=e*e;return[t*(.8707-.131979*e+r*(r*(.003971*e-.001529*r)-.013791)),n*(1.007226+e*(.015085+r*(.028874*e-.044475-.005916*r)))]}function qh(t,n){return[Cc(n)*Uc(t),Uc(n)]}function Bh(t,n){var e=Cc(n),r=1+Cc(t)*e;return[e*Uc(t)/r,Uc(n)/r]}function Gh(t,n){return[zc(Lc((xc+n)/2)),-t]}function Hh(t,n){return t.parent===n.parent?1:2}function Zh(t,n){return t+n.x}function Wh(t,n){return Math.max(t,n.y)}function Vh(t){var n=0,e=t.children,r=e&&e.length;if(r)for(;--r>=0;)n+=e[r].value;else n=1;t.value=n}function $h(t,n){t instanceof Map?(t=[void 0,t],void 0===n&&(n=Qh)):void 0===n&&(n=Kh);for(var e,r,i,o,a,u=new td(t),c=[u];e=c.pop();)if((i=n(e.data))&&(a=(i=Array.from(i)).length))for(e.children=i,o=a-1;o>=0;--o)c.push(r=i[o]=new td(i[o])),r.parent=e,r.depth=e.depth+1;return u.eachBefore(Jh)}function Kh(t){return t.children}function Qh(t){return Array.isArray(t)?t[1]:null}function Xh(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function Jh(t){var n=0;do{t.height=n}while((t=t.parent)&&t.height<++n)}function td(t){this.data=t,this.depth=this.height=0,this.parent=null}function nd(t){for(var n,e,r=0,i=(t=function(t){for(var n,e,r=t.length;r;)e=Math.random()*r--|0,n=t[r],t[r]=t[e],t[e]=n;return t}(Array.from(t))).length,o=[];r<i;)n=t[r],e&&id(e,n)?++r:(e=ad(o=ed(o,n)),r=0);return e}function ed(t,n){var e,r;if(od(n,t))return[n];for(e=0;e<t.length;++e)if(rd(n,t[e])&&od(ud(t[e],n),t))return[t[e],n];for(e=0;e<t.length-1;++e)for(r=e+1;r<t.length;++r)if(rd(ud(t[e],t[r]),n)&&rd(ud(t[e],n),t[r])&&rd(ud(t[r],n),t[e])&&od(cd(t[e],t[r],n),t))return[t[e],t[r],n];throw new Error}function rd(t,n){var e=t.r-n.r,r=n.x-t.x,i=n.y-t.y;return e<0||e*e<r*r+i*i}function id(t,n){var e=t.r-n.r+1e-9*Math.max(t.r,n.r,1),r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function od(t,n){for(var e=0;e<n.length;++e)if(!id(t,n[e]))return!1;return!0}function ad(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return ud(t[0],t[1]);case 3:return cd(t[0],t[1],t[2])}}function ud(t,n){var e=t.x,r=t.y,i=t.r,o=n.x,a=n.y,u=n.r,c=o-e,s=a-r,f=u-i,l=Math.sqrt(c*c+s*s);return{x:(e+o+c/l*f)/2,y:(r+a+s/l*f)/2,r:(l+i+u)/2}}function cd(t,n,e){var r=t.x,i=t.y,o=t.r,a=n.x,u=n.y,c=n.r,s=e.x,f=e.y,l=e.r,h=r-a,d=r-s,p=i-u,g=i-f,y=c-o,v=l-o,_=r*r+i*i-o*o,m=_-a*a-u*u+c*c,b=_-s*s-f*f+l*l,A=d*p-h*g,x=(p*b-g*m)/(2*A)-r,w=(g*y-p*v)/A,M=(d*m-h*b)/(2*A)-i,T=(h*v-d*y)/A,N=w*w+T*T-1,S=2*(o+x*w+M*T),k=x*x+M*M-o*o,E=-(N?(S+Math.sqrt(S*S-4*N*k))/(2*N):k/S);return{x:r+x+w*E,y:i+M+T*E,r:E}}function sd(t,n,e){var r,i,o,a,u=t.x-n.x,c=t.y-n.y,s=u*u+c*c;s?(i=n.r+e.r,i*=i,a=t.r+e.r,i>(a*=a)?(r=(s+a-i)/(2*s),o=Math.sqrt(Math.max(0,a/s-r*r)),e.x=t.x-r*u-o*c,e.y=t.y-r*c+o*u):(r=(s+i-a)/(2*s),o=Math.sqrt(Math.max(0,i/s-r*r)),e.x=n.x+r*u-o*c,e.y=n.y+r*c+o*u)):(e.x=n.x+e.r,e.y=n.y)}function fd(t,n){var e=t.r+n.r-1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function ld(t){var n=t._,e=t.next._,r=n.r+e.r,i=(n.x*e.r+e.x*n.r)/r,o=(n.y*e.r+e.y*n.r)/r;return i*i+o*o}function hd(t){this._=t,this.next=null,this.previous=null}function dd(t){if(!(i=(t=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(t)).length))return 0;var n,e,r,i,o,a,u,c,s,f,l;if((n=t[0]).x=0,n.y=0,!(i>1))return n.r;if(e=t[1],n.x=-e.r,e.x=n.r,e.y=0,!(i>2))return n.r+e.r;sd(e,n,r=t[2]),n=new hd(n),e=new hd(e),r=new hd(r),n.next=r.previous=e,e.next=n.previous=r,r.next=e.previous=n;t:for(u=3;u<i;++u){sd(n._,e._,r=t[u]),r=new hd(r),c=e.next,s=n.previous,f=e._.r,l=n._.r;do{if(f<=l){if(fd(c._,r._)){e=c,n.next=e,e.previous=n,--u;continue t}f+=c._.r,c=c.next}else{if(fd(s._,r._)){(n=s).next=e,e.previous=n,--u;continue t}l+=s._.r,s=s.previous}}while(c!==s.next);for(r.previous=n,r.next=e,n.next=e.previous=e=r,o=ld(n);(r=r.next)!==e;)(a=ld(r))<o&&(n=r,o=a);e=n.next}for(n=[e._],r=e;(r=r.next)!==e;)n.push(r._);for(r=nd(n),u=0;u<i;++u)(n=t[u]).x-=r.x,n.y-=r.y;return r.r}function pd(t){return null==t?null:gd(t)}function gd(t){if("function"!=typeof t)throw new Error;return t}function yd(){return 0}function vd(t){return function(){return t}}function _d(t){return Math.sqrt(t.value)}function md(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function bd(t,n){return function(e){if(r=e.children){var r,i,o,a=r.length,u=t(e)*n||0;if(u)for(i=0;i<a;++i)r[i].r+=u;if(o=dd(r),u)for(i=0;i<a;++i)r[i].r-=u;e.r=o+u}}}function Ad(t){return function(n){var e=n.parent;n.r*=t,e&&(n.x=e.x+t*n.x,n.y=e.y+t*n.y)}}function xd(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function wd(t,n,e,r,i){for(var o,a=t.children,u=-1,c=a.length,s=t.value&&(r-n)/t.value;++u<c;)(o=a[u]).y0=e,o.y1=i,o.x0=n,o.x1=n+=o.value*s}Lh.invert=function(t,n){for(var e,r=n,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=e=(r*(zh+Ih*i+o*(Uh+Rh*i))-n)/(zh+3*Ih*i+o*(7*Uh+9*Rh*i)))*r)*i*i,!(Sc(e)<bc));++a);return[jh*t*(zh+3*Ih*i+o*(7*Uh+9*Rh*i))/Cc(r),Yc(Uc(r)/jh)]},Oh.invert=Th(kc),Yh.invert=function(t,n){var e,r=n,i=25;do{var o=r*r,a=o*o;r-=e=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-n)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(Sc(e)>mc&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},qh.invert=Th(Yc),Bh.invert=Th((function(t){return 2*kc(t)})),Gh.invert=function(t,n){return[-n,2*kc(Fc(t))-xc]},td.prototype=$h.prototype={constructor:td,count:function(){return this.eachAfter(Vh)},each:function(t,n){let e=-1;for(const r of this)t.call(n,r,++e,this);return this},eachAfter:function(t,n){for(var e,r,i,o=this,a=[o],u=[],c=-1;o=a.pop();)if(u.push(o),e=o.children)for(r=0,i=e.length;r<i;++r)a.push(e[r]);for(;o=u.pop();)t.call(n,o,++c,this);return this},eachBefore:function(t,n){for(var e,r,i=this,o=[i],a=-1;i=o.pop();)if(t.call(n,i,++a,this),e=i.children)for(r=e.length-1;r>=0;--r)o.push(e[r]);return this},find:function(t,n){let e=-1;for(const r of this)if(t.call(n,r,++e,this))return r},sum:function(t){return this.eachAfter((function(n){for(var e=+t(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)e+=r[i].value;n.value=e}))},sort:function(t){return this.eachBefore((function(n){n.children&&n.children.sort(t)}))},path:function(t){for(var n=this,e=function(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;for(t=e.pop(),n=r.pop();t===n;)i=t,t=e.pop(),n=r.pop();return i}(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var i=r.length;t!==e;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(n){n.children||t.push(n)})),t},links:function(){var t=this,n=[];return t.each((function(e){e!==t&&n.push({source:e.parent,target:e})})),n},copy:function(){return $h(this).eachBefore(Xh)},[Symbol.iterator]:function*(){var t,n,e,r,i=this,o=[i];do{for(t=o.reverse(),o=[];i=t.pop();)if(yield i,n=i.children)for(e=0,r=n.length;e<r;++e)o.push(n[e])}while(o.length)}};var Md={depth:-1},Td={},Nd={};function Sd(t){return t.id}function kd(t){return t.parentId}function Ed(t){let n=t.length;if(n<2)return"";for(;--n>1&&!Cd(t,n););return t.slice(0,n)}function Cd(t,n){if("/"===t[n]){let e=0;for(;n>0&&"\\"===t[--n];)++e;if(!(1&e))return!0}return!1}function Dd(t,n){return t.parent===n.parent?1:2}function Fd(t){var n=t.children;return n?n[0]:t.t}function Pd(t){var n=t.children;return n?n[n.length-1]:t.t}function zd(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function Id(t,n,e){return t.a.parent===n.parent?t.a:e}function Ud(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}function Rd(t,n,e,r,i){for(var o,a=t.children,u=-1,c=a.length,s=t.value&&(i-e)/t.value;++u<c;)(o=a[u]).x0=n,o.x1=r,o.y0=e,o.y1=e+=o.value*s}Ud.prototype=Object.create(td.prototype);var jd=(1+Math.sqrt(5))/2;function Ld(t,n,e,r,i,o){for(var a,u,c,s,f,l,h,d,p,g,y,v=[],_=n.children,m=0,b=0,A=_.length,x=n.value;m<A;){c=i-e,s=o-r;do{f=_[b++].value}while(!f&&b<A);for(l=h=f,y=f*f*(g=Math.max(s/c,c/s)/(x*t)),p=Math.max(h/y,y/l);b<A;++b){if(f+=u=_[b].value,u<l&&(l=u),u>h&&(h=u),y=f*f*g,(d=Math.max(h/y,y/l))>p){f-=u;break}p=d}v.push(a={value:f,dice:c<s,children:_.slice(m,b)}),a.dice?wd(a,e,r,i,x?r+=s*f/x:o):Rd(a,e,r,x?e+=c*f/x:i,o),x-=f,m=b}return v}var Od=function t(n){function e(t,e,r,i,o){Ld(n,t,e,r,i,o)}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}(jd),Yd=function t(n){function e(t,e,r,i,o){if((a=t._squarify)&&a.ratio===n)for(var a,u,c,s,f,l=-1,h=a.length,d=t.value;++l<h;){for(c=(u=a[l]).children,s=u.value=0,f=c.length;s<f;++s)u.value+=c[s].value;u.dice?wd(u,e,r,i,d?r+=(o-r)*u.value/d:o):Rd(u,e,r,d?e+=(i-e)*u.value/d:i,o),d-=u.value}else t._squarify=a=Ld(n,t,e,r,i,o),a.ratio=n}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}(jd);function qd(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])}function Bd(t,n){return t[0]-n[0]||t[1]-n[1]}function Gd(t){const n=t.length,e=[0,1];let r,i=2;for(r=2;r<n;++r){for(;i>1&&qd(t[e[i-2]],t[e[i-1]],t[r])<=0;)--i;e[i++]=r}return e.slice(0,i)}var Hd=Math.random,Zd=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return n()*e+t}}return e.source=t,e}(Hd),Wd=function t(n){function e(t,e){return arguments.length<2&&(e=t,t=0),t=Math.floor(t),e=Math.floor(e)-t,function(){return Math.floor(n()*e+t)}}return e.source=t,e}(Hd),Vd=function t(n){function e(t,e){var r,i;return t=null==t?0:+t,e=null==e?1:+e,function(){var o;if(null!=r)o=r,r=null;else do{r=2*n()-1,o=2*n()-1,i=r*r+o*o}while(!i||i>1);return t+e*o*Math.sqrt(-2*Math.log(i)/i)}}return e.source=t,e}(Hd),$d=function t(n){var e=Vd.source(n);function r(){var t=e.apply(this,arguments);return function(){return Math.exp(t())}}return r.source=t,r}(Hd),Kd=function t(n){function e(t){return(t=+t)<=0?()=>0:function(){for(var e=0,r=t;r>1;--r)e+=n();return e+r*n()}}return e.source=t,e}(Hd),Qd=function t(n){var e=Kd.source(n);function r(t){if(0==(t=+t))return n;var r=e(t);return function(){return r()/t}}return r.source=t,r}(Hd),Xd=function t(n){function e(t){return function(){return-Math.log1p(-n())/t}}return e.source=t,e}(Hd),Jd=function t(n){function e(t){if((t=+t)<0)throw new RangeError("invalid alpha");return t=1/-t,function(){return Math.pow(1-n(),t)}}return e.source=t,e}(Hd),tp=function t(n){function e(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return function(){return Math.floor(n()+t)}}return e.source=t,e}(Hd),np=function t(n){function e(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return 0===t?()=>1/0:1===t?()=>1:(t=Math.log1p(-t),function(){return 1+Math.floor(Math.log1p(-n())/t)})}return e.source=t,e}(Hd),ep=function t(n){var e=Vd.source(n)();function r(t,r){if((t=+t)<0)throw new RangeError("invalid k");if(0===t)return()=>0;if(r=null==r?1:+r,1===t)return()=>-Math.log1p(-n())*r;var i=(t<1?t+1:t)-1/3,o=1/(3*Math.sqrt(i)),a=t<1?()=>Math.pow(n(),1/t):()=>1;return function(){do{do{var t=e(),u=1+o*t}while(u<=0);u*=u*u;var c=1-n()}while(c>=1-.0331*t*t*t*t&&Math.log(c)>=.5*t*t+i*(1-u+Math.log(u)));return i*u*a()*r}}return r.source=t,r}(Hd),rp=function t(n){var e=ep.source(n);function r(t,n){var r=e(t),i=e(n);return function(){var t=r();return 0===t?0:t/(t+i())}}return r.source=t,r}(Hd),ip=function t(n){var e=np.source(n),r=rp.source(n);function i(t,n){return t=+t,(n=+n)>=1?()=>t:n<=0?()=>0:function(){for(var i=0,o=t,a=n;o*a>16&&o*(1-a)>16;){var u=Math.floor((o+1)*a),c=r(u,o-u+1)();c<=a?(i+=u,o-=u,a=(a-c)/(1-c)):(o=u-1,a/=c)}for(var s=a<.5,f=e(s?a:1-a),l=f(),h=0;l<=o;++h)l+=f();return i+(s?h:o-h)}}return i.source=t,i}(Hd),op=function t(n){function e(t,e,r){var i;return 0==(t=+t)?i=t=>-Math.log(t):(t=1/t,i=n=>Math.pow(n,t)),e=null==e?0:+e,r=null==r?1:+r,function(){return e+r*i(-Math.log1p(-n()))}}return e.source=t,e}(Hd),ap=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,function(){return t+e*Math.tan(Math.PI*n())}}return e.source=t,e}(Hd),up=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,function(){var r=n();return t+e*Math.log(r/(1-r))}}return e.source=t,e}(Hd),cp=function t(n){var e=ep.source(n),r=ip.source(n);function i(t){return function(){for(var i=0,o=t;o>16;){var a=Math.floor(.875*o),u=e(a)();if(u>o)return i+r(a-1,o/u)();i+=a,o-=u}for(var c=-Math.log1p(-n()),s=0;c<=o;++s)c-=Math.log1p(-n());return i+s}}return i.source=t,i}(Hd);const sp=1/4294967296;function fp(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}function lp(t,n){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof n?this.interpolator(n):this.range(n)}return this}const hp=Symbol("implicit");function dp(){var t=new _,n=[],e=[],r=hp;function i(i){let o=t.get(i);if(void 0===o){if(r!==hp)return r;t.set(i,o=n.push(i)-1)}return e[o%e.length]}return i.domain=function(e){if(!arguments.length)return n.slice();n=[],t=new _;for(const r of e)t.has(r)||t.set(r,n.push(r)-1);return i},i.range=function(t){return arguments.length?(e=Array.from(t),i):e.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return dp(n,e).unknown(r)},fp.apply(i,arguments),i}function pp(){var t,n,e=dp().unknown(void 0),r=e.domain,i=e.range,o=0,a=1,u=!1,c=0,s=0,f=.5;function l(){var e=r().length,l=a<o,h=l?a:o,d=l?o:a;t=(d-h)/Math.max(1,e-c+2*s),u&&(t=Math.floor(t)),h+=(d-h-t*(e-c))*f,n=t*(1-c),u&&(h=Math.round(h),n=Math.round(n));var p=rt(e).map((function(n){return h+t*n}));return i(l?p.reverse():p)}return delete e.unknown,e.domain=function(t){return arguments.length?(r(t),l()):r()},e.range=function(t){return arguments.length?([o,a]=t,o=+o,a=+a,l()):[o,a]},e.rangeRound=function(t){return[o,a]=t,o=+o,a=+a,u=!0,l()},e.bandwidth=function(){return n},e.step=function(){return t},e.round=function(t){return arguments.length?(u=!!t,l()):u},e.padding=function(t){return arguments.length?(c=Math.min(1,s=+t),l()):c},e.paddingInner=function(t){return arguments.length?(c=Math.min(1,t),l()):c},e.paddingOuter=function(t){return arguments.length?(s=+t,l()):s},e.align=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),l()):f},e.copy=function(){return pp(r(),[o,a]).round(u).paddingInner(c).paddingOuter(s).align(f)},fp.apply(l(),arguments)}function gp(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return gp(n())},t}function yp(t){return+t}var vp=[0,1];function _p(t){return t}function mp(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:function(t){return function(){return t}}(isNaN(n)?NaN:.5)}function bp(t,n,e){var r=t[0],i=t[1],o=n[0],a=n[1];return i<r?(r=mp(i,r),o=e(a,o)):(r=mp(r,i),o=e(o,a)),function(t){return o(r(t))}}function Ap(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<r;)i[a]=mp(t[a],t[a+1]),o[a]=e(n[a],n[a+1]);return function(n){var e=s(t,n,1,r)-1;return o[e](i[e](n))}}function xp(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function wp(){var t,n,e,r,i,o,a=vp,u=vp,c=kr,s=_p;function f(){var t=Math.min(a.length,u.length);return s!==_p&&(s=function(t,n){var e;return t>n&&(e=t,t=n,n=e),function(e){return Math.max(t,Math.min(n,e))}}(a[0],a[t-1])),r=t>2?Ap:bp,i=o=null,l}function l(n){return null==n||isNaN(n=+n)?e:(i||(i=r(a.map(t),u,c)))(t(s(n)))}return l.invert=function(e){return s(n((o||(o=r(u,a.map(t),wr)))(e)))},l.domain=function(t){return arguments.length?(a=Array.from(t,yp),f()):a.slice()},l.range=function(t){return arguments.length?(u=Array.from(t),f()):u.slice()},l.rangeRound=function(t){return u=Array.from(t),c=Er,f()},l.clamp=function(t){return arguments.length?(s=!!t||_p,f()):s!==_p},l.interpolate=function(t){return arguments.length?(c=t,f()):c},l.unknown=function(t){return arguments.length?(e=t,l):e},function(e,r){return t=e,n=r,f()}}function Mp(){return wp()(_p,_p)}function Tp(n,e,r,i){var o,a=B(n,e,r);switch((i=ac(null==i?",f":i)).type){case"s":var u=Math.max(Math.abs(n),Math.abs(e));return null!=i.precision||isNaN(o=vc(a,u))||(i.precision=o),t.formatPrefix(i,u);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(o=_c(a,Math.max(Math.abs(n),Math.abs(e))))||(i.precision=o-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(o=yc(a))||(i.precision=o-2*("%"===i.type))}return t.format(i)}function Np(t){var n=t.domain;return t.ticks=function(t){var e=n();return Y(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var r=n();return Tp(r[0],r[r.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var r,i,o=n(),a=0,u=o.length-1,c=o[a],s=o[u],f=10;for(s<c&&(i=c,c=s,s=i,i=a,a=u,u=i);f-- >0;){if((i=q(c,s,e))===r)return o[a]=c,o[u]=s,n(o);if(i>0)c=Math.floor(c/i)*i,s=Math.ceil(s/i)*i;else{if(!(i<0))break;c=Math.ceil(c*i)/i,s=Math.floor(s*i)/i}r=i}return t},t}function Sp(t,n){var e,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(e=r,r=i,i=e,e=o,o=a,a=e),t[r]=n.floor(o),t[i]=n.ceil(a),t}function kp(t){return Math.log(t)}function Ep(t){return Math.exp(t)}function Cp(t){return-Math.log(-t)}function Dp(t){return-Math.exp(-t)}function Fp(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Pp(t){return(n,e)=>-t(-n,e)}function zp(n){const e=n(kp,Ep),r=e.domain;let i,o,a=10;function u(){return i=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),n=>Math.log(n)/t)}(a),o=function(t){return 10===t?Fp:t===Math.E?Math.exp:n=>Math.pow(t,n)}(a),r()[0]<0?(i=Pp(i),o=Pp(o),n(Cp,Dp)):n(kp,Ep),e}return e.base=function(t){return arguments.length?(a=+t,u()):a},e.domain=function(t){return arguments.length?(r(t),u()):r()},e.ticks=t=>{const n=r();let e=n[0],u=n[n.length-1];const c=u<e;c&&([e,u]=[u,e]);let s,f,l=i(e),h=i(u);const d=null==t?10:+t;let p=[];if(!(a%1)&&h-l<d){if(l=Math.floor(l),h=Math.ceil(h),e>0){for(;l<=h;++l)for(s=1;s<a;++s)if(f=l<0?s/o(-l):s*o(l),!(f<e)){if(f>u)break;p.push(f)}}else for(;l<=h;++l)for(s=a-1;s>=1;--s)if(f=l>0?s/o(-l):s*o(l),!(f<e)){if(f>u)break;p.push(f)}2*p.length<d&&(p=Y(e,u,d))}else p=Y(l,h,Math.min(h-l,d)).map(o);return c?p.reverse():p},e.tickFormat=(n,r)=>{if(null==n&&(n=10),null==r&&(r=10===a?"s":","),"function"!=typeof r&&(a%1||null!=(r=ac(r)).precision||(r.trim=!0),r=t.format(r)),n===1/0)return r;const u=Math.max(1,a*n/e.ticks().length);return t=>{let n=t/o(Math.round(i(t)));return n*a<a-.5&&(n*=a),n<=u?r(t):""}},e.nice=()=>r(Sp(r(),{floor:t=>o(Math.floor(i(t))),ceil:t=>o(Math.ceil(i(t)))})),e}function Ip(t){return function(n){return Math.sign(n)*Math.log1p(Math.abs(n/t))}}function Up(t){return function(n){return Math.sign(n)*Math.expm1(Math.abs(n))*t}}function Rp(t){var n=1,e=t(Ip(n),Up(n));return e.constant=function(e){return arguments.length?t(Ip(n=+e),Up(n)):n},Np(e)}function jp(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function Lp(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Op(t){return t<0?-t*t:t*t}function Yp(t){var n=t(_p,_p),e=1;function r(){return 1===e?t(_p,_p):.5===e?t(Lp,Op):t(jp(e),jp(1/e))}return n.exponent=function(t){return arguments.length?(e=+t,r()):e},Np(n)}function qp(){var t=Yp(wp());return t.copy=function(){return xp(t,qp()).exponent(t.exponent())},fp.apply(t,arguments),t}function Bp(t){return Math.sign(t)*t*t}var Gp=new Date,Hp=new Date;function Zp(t,n,e,r){function i(n){return t(n=0===arguments.length?new Date:new Date(+n)),n}return i.floor=function(n){return t(n=new Date(+n)),n},i.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},i.round=function(t){var n=i(t),e=i.ceil(t);return t-n<e-t?n:e},i.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},i.range=function(e,r,o){var a,u=[];if(e=i.ceil(e),o=null==o?1:Math.floor(o),!(e<r&&o>0))return u;do{u.push(a=new Date(+e)),n(e,o),t(e)}while(a<e&&e<r);return u},i.filter=function(e){return Zp((function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;n(t,-1),!e(t););else for(;--r>=0;)for(;n(t,1),!e(t););}))},e&&(i.count=function(n,r){return Gp.setTime(+n),Hp.setTime(+r),t(Gp),t(Hp),Math.floor(e(Gp,Hp))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(n){return r(n)%t==0}:function(n){return i.count(0,n)%t==0}):i:null}),i}var Wp=Zp((function(){}),(function(t,n){t.setTime(+t+n)}),(function(t,n){return n-t}));Wp.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Zp((function(n){n.setTime(Math.floor(n/t)*t)}),(function(n,e){n.setTime(+n+e*t)}),(function(n,e){return(e-n)/t})):Wp:null};var Vp=Wp,$p=Wp.range;const Kp=1e3,Qp=6e4,Xp=36e5,Jp=864e5,tg=6048e5,ng=31536e6;var eg=Zp((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,n){t.setTime(+t+n*Kp)}),(function(t,n){return(n-t)/Kp}),(function(t){return t.getUTCSeconds()})),rg=eg,ig=eg.range,og=Zp((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Kp)}),(function(t,n){t.setTime(+t+n*Qp)}),(function(t,n){return(n-t)/Qp}),(function(t){return t.getMinutes()})),ag=og,ug=og.range,cg=Zp((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Kp-t.getMinutes()*Qp)}),(function(t,n){t.setTime(+t+n*Xp)}),(function(t,n){return(n-t)/Xp}),(function(t){return t.getHours()})),sg=cg,fg=cg.range,lg=Zp((t=>t.setHours(0,0,0,0)),((t,n)=>t.setDate(t.getDate()+n)),((t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Qp)/Jp),(t=>t.getDate()-1)),hg=lg,dg=lg.range;function pg(t){return Zp((function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)}),(function(t,n){t.setDate(t.getDate()+7*n)}),(function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Qp)/tg}))}var gg=pg(0),yg=pg(1),vg=pg(2),_g=pg(3),mg=pg(4),bg=pg(5),Ag=pg(6),xg=gg.range,wg=yg.range,Mg=vg.range,Tg=_g.range,Ng=mg.range,Sg=bg.range,kg=Ag.range,Eg=Zp((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,n){t.setMonth(t.getMonth()+n)}),(function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),Cg=Eg,Dg=Eg.range,Fg=Zp((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n)}),(function(t,n){return n.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Fg.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Zp((function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)}),(function(n,e){n.setFullYear(n.getFullYear()+e*t)})):null};var Pg=Fg,zg=Fg.range,Ig=Zp((function(t){t.setUTCSeconds(0,0)}),(function(t,n){t.setTime(+t+n*Qp)}),(function(t,n){return(n-t)/Qp}),(function(t){return t.getUTCMinutes()})),Ug=Ig,Rg=Ig.range,jg=Zp((function(t){t.setUTCMinutes(0,0,0)}),(function(t,n){t.setTime(+t+n*Xp)}),(function(t,n){return(n-t)/Xp}),(function(t){return t.getUTCHours()})),Lg=jg,Og=jg.range,Yg=Zp((function(t){t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+n)}),(function(t,n){return(n-t)/Jp}),(function(t){return t.getUTCDate()-1})),qg=Yg,Bg=Yg.range;function Gg(t){return Zp((function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+7*n)}),(function(t,n){return(n-t)/tg}))}var Hg=Gg(0),Zg=Gg(1),Wg=Gg(2),Vg=Gg(3),$g=Gg(4),Kg=Gg(5),Qg=Gg(6),Xg=Hg.range,Jg=Zg.range,ty=Wg.range,ny=Vg.range,ey=$g.range,ry=Kg.range,iy=Qg.range,oy=Zp((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCMonth(t.getUTCMonth()+n)}),(function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),ay=oy,uy=oy.range,cy=Zp((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)}),(function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));cy.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Zp((function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)}),(function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)})):null};var sy=cy,fy=cy.range;function ly(t,n,r,i,o,a){const u=[[rg,1,Kp],[rg,5,5e3],[rg,15,15e3],[rg,30,3e4],[a,1,Qp],[a,5,3e5],[a,15,9e5],[a,30,18e5],[o,1,Xp],[o,3,108e5],[o,6,216e5],[o,12,432e5],[i,1,Jp],[i,2,1728e5],[r,1,tg],[n,1,2592e6],[n,3,7776e6],[t,1,ng]];function c(n,r,i){const o=Math.abs(r-n)/i,a=e((([,,t])=>t)).right(u,o);if(a===u.length)return t.every(B(n/ng,r/ng,i));if(0===a)return Vp.every(Math.max(B(n,r,i),1));const[c,s]=u[o/u[a-1][2]<u[a][2]/o?a-1:a];return c.every(s)}return[function(t,n,e){const r=n<t;r&&([t,n]=[n,t]);const i=e&&"function"==typeof e.range?e:c(t,n,e),o=i?i.range(t,+n+1):[];return r?o.reverse():o},c]}const[hy,dy]=ly(sy,ay,Hg,qg,Lg,Ug),[py,gy]=ly(Pg,Cg,gg,hg,sg,ag);function yy(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function vy(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function _y(t,n,e){return{y:t,m:n,d:e,H:0,M:0,S:0,L:0}}function my(t){var n=t.dateTime,e=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,u=t.months,c=t.shortMonths,s=Sy(i),f=ky(i),l=Sy(o),h=ky(o),d=Sy(a),p=ky(a),g=Sy(u),y=ky(u),v=Sy(c),_=ky(c),m={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:null,d:$y,e:$y,f:tv,g:lv,G:dv,H:Ky,I:Qy,j:Xy,L:Jy,m:nv,M:ev,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Uv,s:Rv,S:rv,u:iv,U:ov,V:uv,w:cv,W:sv,x:null,X:null,y:fv,Y:hv,Z:pv,"%":Iv},b={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return u[t.getUTCMonth()]},c:null,d:gv,e:gv,f:bv,g:Dv,G:Pv,H:yv,I:vv,j:_v,L:mv,m:Av,M:xv,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Uv,s:Rv,S:wv,u:Mv,U:Tv,V:Sv,w:kv,W:Ev,x:null,X:null,y:Cv,Y:Fv,Z:zv,"%":Iv},A={a:function(t,n,e){var r=d.exec(n.slice(e));return r?(t.w=p.get(r[0].toLowerCase()),e+r[0].length):-1},A:function(t,n,e){var r=l.exec(n.slice(e));return r?(t.w=h.get(r[0].toLowerCase()),e+r[0].length):-1},b:function(t,n,e){var r=v.exec(n.slice(e));return r?(t.m=_.get(r[0].toLowerCase()),e+r[0].length):-1},B:function(t,n,e){var r=g.exec(n.slice(e));return r?(t.m=y.get(r[0].toLowerCase()),e+r[0].length):-1},c:function(t,e,r){return M(t,n,e,r)},d:Ly,e:Ly,f:Hy,g:Iy,G:zy,H:Yy,I:Yy,j:Oy,L:Gy,m:jy,M:qy,p:function(t,n,e){var r=s.exec(n.slice(e));return r?(t.p=f.get(r[0].toLowerCase()),e+r[0].length):-1},q:Ry,Q:Wy,s:Vy,S:By,u:Cy,U:Dy,V:Fy,w:Ey,W:Py,x:function(t,n,r){return M(t,e,n,r)},X:function(t,n,e){return M(t,r,n,e)},y:Iy,Y:zy,Z:Uy,"%":Zy};function x(t,n){return function(e){var r,i,o,a=[],u=-1,c=0,s=t.length;for(e instanceof Date||(e=new Date(+e));++u<s;)37===t.charCodeAt(u)&&(a.push(t.slice(c,u)),null!=(i=Ay[r=t.charAt(++u)])?r=t.charAt(++u):i="e"===r?" ":"0",(o=n[r])&&(r=o(e,i)),a.push(r),c=u+1);return a.push(t.slice(c,u)),a.join("")}}function w(t,n){return function(e){var r,i,o=_y(1900,void 0,1);if(M(o,t,e+="",0)!=e.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(n&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=vy(_y(o.y,0,1))).getUTCDay(),r=i>4||0===i?Zg.ceil(r):Zg(r),r=qg.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=yy(_y(o.y,0,1))).getDay(),r=i>4||0===i?yg.ceil(r):yg(r),r=hg.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?vy(_y(o.y,0,1)).getUTCDay():yy(_y(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,vy(o)):yy(o)}}function M(t,n,e,r){for(var i,o,a=0,u=n.length,c=e.length;a<u;){if(r>=c)return-1;if(37===(i=n.charCodeAt(a++))){if(i=n.charAt(a++),!(o=A[i in Ay?n.charAt(a++):i])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}return m.x=x(e,m),m.X=x(r,m),m.c=x(n,m),b.x=x(e,b),b.X=x(r,b),b.c=x(n,b),{format:function(t){var n=x(t+="",m);return n.toString=function(){return t},n},parse:function(t){var n=w(t+="",!1);return n.toString=function(){return t},n},utcFormat:function(t){var n=x(t+="",b);return n.toString=function(){return t},n},utcParse:function(t){var n=w(t+="",!0);return n.toString=function(){return t},n}}}var by,Ay={"-":"",_:" ",0:"0"},xy=/^\s*\d+/,wy=/^%/,My=/[\\^$*+?|[\]().{}]/g;function Ty(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function Ny(t){return t.replace(My,"\\$&")}function Sy(t){return new RegExp("^(?:"+t.map(Ny).join("|")+")","i")}function ky(t){return new Map(t.map(((t,n)=>[t.toLowerCase(),n])))}function Ey(t,n,e){var r=xy.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function Cy(t,n,e){var r=xy.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function Dy(t,n,e){var r=xy.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function Fy(t,n,e){var r=xy.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function Py(t,n,e){var r=xy.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function zy(t,n,e){var r=xy.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function Iy(t,n,e){var r=xy.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function Uy(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function Ry(t,n,e){var r=xy.exec(n.slice(e,e+1));return r?(t.q=3*r[0]-3,e+r[0].length):-1}function jy(t,n,e){var r=xy.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function Ly(t,n,e){var r=xy.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function Oy(t,n,e){var r=xy.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function Yy(t,n,e){var r=xy.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function qy(t,n,e){var r=xy.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function By(t,n,e){var r=xy.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function Gy(t,n,e){var r=xy.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function Hy(t,n,e){var r=xy.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function Zy(t,n,e){var r=wy.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function Wy(t,n,e){var r=xy.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function Vy(t,n,e){var r=xy.exec(n.slice(e));return r?(t.s=+r[0],e+r[0].length):-1}function $y(t,n){return Ty(t.getDate(),n,2)}function Ky(t,n){return Ty(t.getHours(),n,2)}function Qy(t,n){return Ty(t.getHours()%12||12,n,2)}function Xy(t,n){return Ty(1+hg.count(Pg(t),t),n,3)}function Jy(t,n){return Ty(t.getMilliseconds(),n,3)}function tv(t,n){return Jy(t,n)+"000"}function nv(t,n){return Ty(t.getMonth()+1,n,2)}function ev(t,n){return Ty(t.getMinutes(),n,2)}function rv(t,n){return Ty(t.getSeconds(),n,2)}function iv(t){var n=t.getDay();return 0===n?7:n}function ov(t,n){return Ty(gg.count(Pg(t)-1,t),n,2)}function av(t){var n=t.getDay();return n>=4||0===n?mg(t):mg.ceil(t)}function uv(t,n){return t=av(t),Ty(mg.count(Pg(t),t)+(4===Pg(t).getDay()),n,2)}function cv(t){return t.getDay()}function sv(t,n){return Ty(yg.count(Pg(t)-1,t),n,2)}function fv(t,n){return Ty(t.getFullYear()%100,n,2)}function lv(t,n){return Ty((t=av(t)).getFullYear()%100,n,2)}function hv(t,n){return Ty(t.getFullYear()%1e4,n,4)}function dv(t,n){var e=t.getDay();return Ty((t=e>=4||0===e?mg(t):mg.ceil(t)).getFullYear()%1e4,n,4)}function pv(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+Ty(n/60|0,"0",2)+Ty(n%60,"0",2)}function gv(t,n){return Ty(t.getUTCDate(),n,2)}function yv(t,n){return Ty(t.getUTCHours(),n,2)}function vv(t,n){return Ty(t.getUTCHours()%12||12,n,2)}function _v(t,n){return Ty(1+qg.count(sy(t),t),n,3)}function mv(t,n){return Ty(t.getUTCMilliseconds(),n,3)}function bv(t,n){return mv(t,n)+"000"}function Av(t,n){return Ty(t.getUTCMonth()+1,n,2)}function xv(t,n){return Ty(t.getUTCMinutes(),n,2)}function wv(t,n){return Ty(t.getUTCSeconds(),n,2)}function Mv(t){var n=t.getUTCDay();return 0===n?7:n}function Tv(t,n){return Ty(Hg.count(sy(t)-1,t),n,2)}function Nv(t){var n=t.getUTCDay();return n>=4||0===n?$g(t):$g.ceil(t)}function Sv(t,n){return t=Nv(t),Ty($g.count(sy(t),t)+(4===sy(t).getUTCDay()),n,2)}function kv(t){return t.getUTCDay()}function Ev(t,n){return Ty(Zg.count(sy(t)-1,t),n,2)}function Cv(t,n){return Ty(t.getUTCFullYear()%100,n,2)}function Dv(t,n){return Ty((t=Nv(t)).getUTCFullYear()%100,n,2)}function Fv(t,n){return Ty(t.getUTCFullYear()%1e4,n,4)}function Pv(t,n){var e=t.getUTCDay();return Ty((t=e>=4||0===e?$g(t):$g.ceil(t)).getUTCFullYear()%1e4,n,4)}function zv(){return"+0000"}function Iv(){return"%"}function Uv(t){return+t}function Rv(t){return Math.floor(+t/1e3)}function jv(n){return by=my(n),t.timeFormat=by.format,t.timeParse=by.parse,t.utcFormat=by.utcFormat,t.utcParse=by.utcParse,by}t.timeFormat=void 0,t.timeParse=void 0,t.utcFormat=void 0,t.utcParse=void 0,jv({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Lv="%Y-%m-%dT%H:%M:%S.%LZ",Ov=Date.prototype.toISOString?function(t){return t.toISOString()}:t.utcFormat(Lv),Yv=Ov,qv=+new Date("2000-01-01T00:00:00.000Z")?function(t){var n=new Date(t);return isNaN(n)?null:n}:t.utcParse(Lv),Bv=qv;function Gv(t){return new Date(t)}function Hv(t){return t instanceof Date?+t:+new Date(+t)}function Zv(t,n,e,r,i,o,a,u,c,s){var f=Mp(),l=f.invert,h=f.domain,d=s(".%L"),p=s(":%S"),g=s("%I:%M"),y=s("%I %p"),v=s("%a %d"),_=s("%b %d"),m=s("%B"),b=s("%Y");function A(t){return(c(t)<t?d:u(t)<t?p:a(t)<t?g:o(t)<t?y:r(t)<t?i(t)<t?v:_:e(t)<t?m:b)(t)}return f.invert=function(t){return new Date(l(t))},f.domain=function(t){return arguments.length?h(Array.from(t,Hv)):h().map(Gv)},f.ticks=function(n){var e=h();return t(e[0],e[e.length-1],null==n?10:n)},f.tickFormat=function(t,n){return null==n?A:s(n)},f.nice=function(t){var e=h();return t&&"function"==typeof t.range||(t=n(e[0],e[e.length-1],null==t?10:t)),t?h(Sp(e,t)):f},f.copy=function(){return xp(f,Zv(t,n,e,r,i,o,a,u,c,s))},f}function Wv(){var t,n,e,r,i,o=0,a=1,u=_p,c=!1;function s(n){return null==n||isNaN(n=+n)?i:u(0===e?.5:(n=(r(n)-t)*e,c?Math.max(0,Math.min(1,n)):n))}function f(t){return function(n){var e,r;return arguments.length?([e,r]=n,u=t(e,r),s):[u(0),u(1)]}}return s.domain=function(i){return arguments.length?([o,a]=i,t=r(o=+o),n=r(a=+a),e=t===n?0:1/(n-t),s):[o,a]},s.clamp=function(t){return arguments.length?(c=!!t,s):c},s.interpolator=function(t){return arguments.length?(u=t,s):u},s.range=f(kr),s.rangeRound=f(Er),s.unknown=function(t){return arguments.length?(i=t,s):i},function(i){return r=i,t=i(o),n=i(a),e=t===n?0:1/(n-t),s}}function Vv(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function $v(){var t=Yp(Wv());return t.copy=function(){return Vv(t,$v()).exponent(t.exponent())},lp.apply(t,arguments)}function Kv(){var t,n,e,r,i,o,a,u=0,c=.5,s=1,f=1,l=_p,h=!1;function d(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-n)*(f*t<f*n?r:i),l(h?Math.max(0,Math.min(1,t)):t))}function p(t){return function(n){var e,r,i;return arguments.length?([e,r,i]=n,l=Vr(t,[e,r,i]),d):[l(0),l(.5),l(1)]}}return d.domain=function(a){return arguments.length?([u,c,s]=a,t=o(u=+u),n=o(c=+c),e=o(s=+s),r=t===n?0:.5/(n-t),i=n===e?0:.5/(e-n),f=n<t?-1:1,d):[u,c,s]},d.clamp=function(t){return arguments.length?(h=!!t,d):h},d.interpolator=function(t){return arguments.length?(l=t,d):l},d.range=p(kr),d.rangeRound=p(Er),d.unknown=function(t){return arguments.length?(a=t,d):a},function(a){return o=a,t=a(u),n=a(c),e=a(s),r=t===n?0:.5/(n-t),i=n===e?0:.5/(e-n),f=n<t?-1:1,d}}function Qv(){var t=Yp(Kv());return t.copy=function(){return Vv(t,Qv()).exponent(t.exponent())},lp.apply(t,arguments)}function Xv(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(6*r,6*++r);return e}var Jv=Xv("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),t_=Xv("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),n_=Xv("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),e_=Xv("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),r_=Xv("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),i_=Xv("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),o_=Xv("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),a_=Xv("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),u_=Xv("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),c_=Xv("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),s_=t=>vr(t[t.length-1]),f_=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Xv),l_=s_(f_),h_=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Xv),d_=s_(h_),p_=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Xv),g_=s_(p_),y_=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Xv),v_=s_(y_),__=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Xv),m_=s_(__),b_=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Xv),A_=s_(b_),x_=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Xv),w_=s_(x_),M_=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Xv),T_=s_(M_),N_=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Xv),S_=s_(N_),k_=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Xv),E_=s_(k_),C_=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Xv),D_=s_(C_),F_=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Xv),P_=s_(F_),z_=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Xv),I_=s_(z_),U_=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Xv),R_=s_(U_),j_=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Xv),L_=s_(j_),O_=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Xv),Y_=s_(O_),q_=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Xv),B_=s_(q_),G_=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Xv),H_=s_(G_),Z_=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Xv),W_=s_(Z_),V_=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Xv),$_=s_(V_),K_=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Xv),Q_=s_(K_),X_=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Xv),J_=s_(X_),tm=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Xv),nm=s_(tm),em=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Xv),rm=s_(em),im=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Xv),om=s_(im),am=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Xv),um=s_(am),cm=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Xv),sm=s_(cm),fm=Wr(ar(300,.5,0),ar(-240,.5,1)),lm=Wr(ar(-100,.75,.35),ar(80,1.5,.8)),hm=Wr(ar(260,.75,.35),ar(80,1.5,.8)),dm=ar(),pm=Me(),gm=Math.PI/3,ym=2*Math.PI/3;function vm(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}}var _m=vm(Xv("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),mm=vm(Xv("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),bm=vm(Xv("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Am=vm(Xv("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function xm(t){return function(){return t}}const wm=Math.abs,Mm=Math.atan2,Tm=Math.cos,Nm=Math.max,Sm=Math.min,km=Math.sin,Em=Math.sqrt,Cm=1e-12,Dm=Math.PI,Fm=Dm/2,Pm=2*Dm;function zm(t){return t>=1?Fm:t<=-1?-Fm:Math.asin(t)}function Im(t){return t.innerRadius}function Um(t){return t.outerRadius}function Rm(t){return t.startAngle}function jm(t){return t.endAngle}function Lm(t){return t&&t.padAngle}function Om(t,n,e,r,i,o,a){var u=t-e,c=n-r,s=(a?o:-o)/Em(u*u+c*c),f=s*c,l=-s*u,h=t+f,d=n+l,p=e+f,g=r+l,y=(h+p)/2,v=(d+g)/2,_=p-h,m=g-d,b=_*_+m*m,A=i-o,x=h*g-p*d,w=(m<0?-1:1)*Em(Nm(0,A*A*b-x*x)),M=(x*m-_*w)/b,T=(-x*_-m*w)/b,N=(x*m+_*w)/b,S=(-x*_+m*w)/b,k=M-y,E=T-v,C=N-y,D=S-v;return k*k+E*E>C*C+D*D&&(M=N,T=S),{cx:M,cy:T,x01:-f,y01:-l,x11:M*(i/A-1),y11:T*(i/A-1)}}var Ym=Array.prototype.slice;function qm(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Bm(t){this._context=t}function Gm(t){return new Bm(t)}function Hm(t){return t[0]}function Zm(t){return t[1]}function Wm(t,n){var e=xm(!0),r=null,i=Gm,o=null;function a(a){var u,c,s,f=(a=qm(a)).length,l=!1;for(null==r&&(o=i(s=ra())),u=0;u<=f;++u)!(u<f&&e(c=a[u],u,a))===l&&((l=!l)?o.lineStart():o.lineEnd()),l&&o.point(+t(c,u,a),+n(c,u,a));if(s)return o=null,s+""||null}return t="function"==typeof t?t:void 0===t?Hm:xm(t),n="function"==typeof n?n:void 0===n?Zm:xm(n),a.x=function(n){return arguments.length?(t="function"==typeof n?n:xm(+n),a):t},a.y=function(t){return arguments.length?(n="function"==typeof t?t:xm(+t),a):n},a.defined=function(t){return arguments.length?(e="function"==typeof t?t:xm(!!t),a):e},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a}function Vm(t,n,e){var r=null,i=xm(!0),o=null,a=Gm,u=null;function c(c){var s,f,l,h,d,p=(c=qm(c)).length,g=!1,y=new Array(p),v=new Array(p);for(null==o&&(u=a(d=ra())),s=0;s<=p;++s){if(!(s<p&&i(h=c[s],s,c))===g)if(g=!g)f=s,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),l=s-1;l>=f;--l)u.point(y[l],v[l]);u.lineEnd(),u.areaEnd()}g&&(y[s]=+t(h,s,c),v[s]=+n(h,s,c),u.point(r?+r(h,s,c):y[s],e?+e(h,s,c):v[s]))}if(d)return u=null,d+""||null}function s(){return Wm().defined(i).curve(a).context(o)}return t="function"==typeof t?t:void 0===t?Hm:xm(+t),n="function"==typeof n?n:xm(void 0===n?0:+n),e="function"==typeof e?e:void 0===e?Zm:xm(+e),c.x=function(n){return arguments.length?(t="function"==typeof n?n:xm(+n),r=null,c):t},c.x0=function(n){return arguments.length?(t="function"==typeof n?n:xm(+n),c):t},c.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:xm(+t),c):r},c.y=function(t){return arguments.length?(n="function"==typeof t?t:xm(+t),e=null,c):n},c.y0=function(t){return arguments.length?(n="function"==typeof t?t:xm(+t),c):n},c.y1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:xm(+t),c):e},c.lineX0=c.lineY0=function(){return s().x(t).y(n)},c.lineY1=function(){return s().x(t).y(e)},c.lineX1=function(){return s().x(r).y(n)},c.defined=function(t){return arguments.length?(i="function"==typeof t?t:xm(!!t),c):i},c.curve=function(t){return arguments.length?(a=t,null!=o&&(u=a(o)),c):a},c.context=function(t){return arguments.length?(null==t?o=u=null:u=a(o=t),c):o},c}function $m(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function Km(t){return t}Bm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}};var Qm=Jm(Gm);function Xm(t){this._curve=t}function Jm(t){function n(n){return new Xm(t(n))}return n._curve=t,n}function tb(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?n(Jm(t)):n()._curve},t}function nb(){return tb(Wm().curve(Qm))}function eb(){var t=Vm().curve(Qm),n=t.curve,e=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return tb(e())},delete t.lineX0,t.lineEndAngle=function(){return tb(r())},delete t.lineX1,t.lineInnerRadius=function(){return tb(i())},delete t.lineY0,t.lineOuterRadius=function(){return tb(o())},delete t.lineY1,t.curve=function(t){return arguments.length?n(Jm(t)):n()._curve},t}function rb(t,n){return[(n=+n)*Math.cos(t-=Math.PI/2),n*Math.sin(t)]}Xm.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};class ib{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n)}this._x0=t,this._y0=n}}class ob{constructor(t){this._context=t}lineStart(){this._point=0}lineEnd(){}point(t,n){if(t=+t,n=+n,0==this._point++)this._x0=t,this._y0=n;else{const e=rb(this._x0,this._y0),r=rb(this._x0,this._y0=(this._y0+n)/2),i=rb(t,this._y0),o=rb(t,n);this._context.moveTo(...e),this._context.bezierCurveTo(...r,...i,...o)}}}function ab(t){return new ib(t,!0)}function ub(t){return new ib(t,!1)}function cb(t){return new ob(t)}function sb(t){return t.source}function fb(t){return t.target}function lb(t){let n=sb,e=fb,r=Hm,i=Zm,o=null,a=null;function u(){let u;const c=Ym.call(arguments),s=n.apply(this,c),f=e.apply(this,c);if(null==o&&(a=t(u=ra())),a.lineStart(),c[0]=s,a.point(+r.apply(this,c),+i.apply(this,c)),c[0]=f,a.point(+r.apply(this,c),+i.apply(this,c)),a.lineEnd(),u)return a=null,u+""||null}return u.source=function(t){return arguments.length?(n=t,u):n},u.target=function(t){return arguments.length?(e=t,u):e},u.x=function(t){return arguments.length?(r="function"==typeof t?t:xm(+t),u):r},u.y=function(t){return arguments.length?(i="function"==typeof t?t:xm(+t),u):i},u.context=function(n){return arguments.length?(null==n?o=a=null:a=t(o=n),u):o},u}const hb=Em(3);var db={draw(t,n){const e=.59436*Em(n+Sm(n/28,.75)),r=e/2,i=r*hb;t.moveTo(0,e),t.lineTo(0,-e),t.moveTo(-i,-r),t.lineTo(i,r),t.moveTo(-i,r),t.lineTo(i,-r)}},pb={draw(t,n){const e=Em(n/Dm);t.moveTo(e,0),t.arc(0,0,e,0,Pm)}},gb={draw(t,n){const e=Em(n/5)/2;t.moveTo(-3*e,-e),t.lineTo(-e,-e),t.lineTo(-e,-3*e),t.lineTo(e,-3*e),t.lineTo(e,-e),t.lineTo(3*e,-e),t.lineTo(3*e,e),t.lineTo(e,e),t.lineTo(e,3*e),t.lineTo(-e,3*e),t.lineTo(-e,e),t.lineTo(-3*e,e),t.closePath()}};const yb=Em(1/3),vb=2*yb;var _b={draw(t,n){const e=Em(n/vb),r=e*yb;t.moveTo(0,-e),t.lineTo(r,0),t.lineTo(0,e),t.lineTo(-r,0),t.closePath()}},mb={draw(t,n){const e=.62625*Em(n);t.moveTo(0,-e),t.lineTo(e,0),t.lineTo(0,e),t.lineTo(-e,0),t.closePath()}},bb={draw(t,n){const e=.87559*Em(n-Sm(n/7,2));t.moveTo(-e,0),t.lineTo(e,0),t.moveTo(0,e),t.lineTo(0,-e)}},Ab={draw(t,n){const e=Em(n),r=-e/2;t.rect(r,r,e,e)}},xb={draw(t,n){const e=.4431*Em(n);t.moveTo(e,e),t.lineTo(e,-e),t.lineTo(-e,-e),t.lineTo(-e,e),t.closePath()}};const wb=km(Dm/10)/km(7*Dm/10),Mb=km(Pm/10)*wb,Tb=-Tm(Pm/10)*wb;var Nb={draw(t,n){const e=Em(.8908130915292852*n),r=Mb*e,i=Tb*e;t.moveTo(0,-e),t.lineTo(r,i);for(let n=1;n<5;++n){const o=Pm*n/5,a=Tm(o),u=km(o);t.lineTo(u*e,-a*e),t.lineTo(a*r-u*i,u*r+a*i)}t.closePath()}};const Sb=Em(3);var kb={draw(t,n){const e=-Em(n/(3*Sb));t.moveTo(0,2*e),t.lineTo(-Sb*e,-e),t.lineTo(Sb*e,-e),t.closePath()}};const Eb=Em(3);var Cb={draw(t,n){const e=.6824*Em(n),r=e/2,i=e*Eb/2;t.moveTo(0,-e),t.lineTo(i,r),t.lineTo(-i,r),t.closePath()}};const Db=-.5,Fb=Em(3)/2,Pb=1/Em(12),zb=3*(Pb/2+1);var Ib={draw(t,n){const e=Em(n/zb),r=e/2,i=e*Pb,o=r,a=e*Pb+e,u=-o,c=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(u,c),t.lineTo(Db*r-Fb*i,Fb*r+Db*i),t.lineTo(Db*o-Fb*a,Fb*o+Db*a),t.lineTo(Db*u-Fb*c,Fb*u+Db*c),t.lineTo(Db*r+Fb*i,Db*i-Fb*r),t.lineTo(Db*o+Fb*a,Db*a-Fb*o),t.lineTo(Db*u+Fb*c,Db*c-Fb*u),t.closePath()}},Ub={draw(t,n){const e=.6189*Em(n-Sm(n/6,1.7));t.moveTo(-e,-e),t.lineTo(e,e),t.moveTo(-e,e),t.lineTo(e,-e)}};const Rb=[pb,gb,_b,Ab,Nb,kb,Ib],jb=[pb,bb,Ub,Cb,db,xb,mb];function Lb(){}function Ob(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function Yb(t){this._context=t}function qb(t){this._context=t}function Bb(t){this._context=t}function Gb(t,n){this._basis=new Yb(t),this._beta=n}Yb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ob(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ob(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},qb.prototype={areaStart:Lb,areaEnd:Lb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:Ob(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},Bb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 3:this._point=4;default:Ob(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},Gb.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0)for(var r,i=t[0],o=n[0],a=t[e]-i,u=n[e]-o,c=-1;++c<=e;)r=c/e,this._basis.point(this._beta*t[c]+(1-this._beta)*(i+r*a),this._beta*n[c]+(1-this._beta)*(o+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};var Hb=function t(n){function e(t){return 1===n?new Yb(t):new Gb(t,n)}return e.beta=function(n){return t(+n)},e}(.85);function Zb(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function Wb(t,n){this._context=t,this._k=(1-n)/6}Wb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Zb(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:Zb(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Vb=function t(n){function e(t){return new Wb(t,n)}return e.tension=function(n){return t(+n)},e}(0);function $b(t,n){this._context=t,this._k=(1-n)/6}$b.prototype={areaStart:Lb,areaEnd:Lb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Zb(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Kb=function t(n){function e(t){return new $b(t,n)}return e.tension=function(n){return t(+n)},e}(0);function Qb(t,n){this._context=t,this._k=(1-n)/6}Qb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Zb(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Xb=function t(n){function e(t){return new Qb(t,n)}return e.tension=function(n){return t(+n)},e}(0);function Jb(t,n,e){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>Cm){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>Cm){var s=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*s+t._x1*t._l23_2a-n*t._l12_2a)/f,a=(a*s+t._y1*t._l23_2a-e*t._l12_2a)/f}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function tA(t,n){this._context=t,this._alpha=n}tA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:Jb(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var nA=function t(n){function e(t){return n?new tA(t,n):new Wb(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function eA(t,n){this._context=t,this._alpha=n}eA.prototype={areaStart:Lb,areaEnd:Lb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Jb(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var rA=function t(n){function e(t){return n?new eA(t,n):new $b(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function iA(t,n){this._context=t,this._alpha=n}iA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Jb(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var oA=function t(n){function e(t){return n?new iA(t,n):new Qb(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function aA(t){this._context=t}function uA(t){return t<0?-1:1}function cA(t,n,e){var r=t._x1-t._x0,i=n-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(e-t._y1)/(i||r<0&&-0),u=(o*i+a*r)/(r+i);return(uA(o)+uA(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(u))||0}function sA(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function fA(t,n,e){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,u=(o-r)/3;t._context.bezierCurveTo(r+u,i+u*n,o-u,a-u*e,o,a)}function lA(t){this._context=t}function hA(t){this._context=new dA(t)}function dA(t){this._context=t}function pA(t){this._context=t}function gA(t){var n,e,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],n=1;n<r-1;++n)i[n]=1,o[n]=4,a[n]=4*t[n]+2*t[n+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],n=1;n<r;++n)e=i[n]/o[n-1],o[n]-=e,a[n]-=e*a[n-1];for(i[r-1]=a[r-1]/o[r-1],n=r-2;n>=0;--n)i[n]=(a[n]-i[n+1])/o[n];for(o[r-1]=(t[r]+i[r-1])/2,n=0;n<r-1;++n)o[n]=2*t[n+1]-i[n+1];return[i,o]}function yA(t,n){this._context=t,this._t=n}function vA(t,n){if((i=t.length)>1)for(var e,r,i,o=1,a=t[n[0]],u=a.length;o<i;++o)for(r=a,a=t[n[o]],e=0;e<u;++e)a[e][1]+=a[e][0]=isNaN(r[e][1])?r[e][0]:r[e][1]}function _A(t){for(var n=t.length,e=new Array(n);--n>=0;)e[n]=n;return e}function mA(t,n){return t[n]}function bA(t){const n=[];return n.key=t,n}function AA(t){var n=t.map(xA);return _A(t).sort((function(t,e){return n[t]-n[e]}))}function xA(t){for(var n,e=-1,r=0,i=t.length,o=-1/0;++e<i;)(n=+t[e][1])>o&&(o=n,r=e);return r}function wA(t){var n=t.map(MA);return _A(t).sort((function(t,e){return n[t]-n[e]}))}function MA(t){for(var n,e=0,r=-1,i=t.length;++r<i;)(n=+t[r][1])&&(e+=n);return e}aA.prototype={areaStart:Lb,areaEnd:Lb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}},lA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fA(this,this._t0,sA(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(n=+n,(t=+t)!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,fA(this,sA(this,e=cA(this,t,n)),e);break;default:fA(this,this._t0,e=cA(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(hA.prototype=Object.create(lA.prototype)).point=function(t,n){lA.prototype.point.call(this,n,t)},dA.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,o){this._context.bezierCurveTo(n,t,r,e,o,i)}},pA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,e=t.length;if(e)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),2===e)this._context.lineTo(t[1],n[1]);else for(var r=gA(t),i=gA(n),o=0,a=1;a<e;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],n[a]);(this._line||0!==this._line&&1===e)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}},yA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,n)}}this._x=t,this._y=n}};var TA=t=>()=>t;function NA(t,{sourceEvent:n,target:e,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function SA(t,n,e){this.k=t,this.x=n,this.y=e}SA.prototype={constructor:SA,scale:function(t){return 1===t?this:new SA(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new SA(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var kA=new SA(1,0,0);function EA(t){for(;!t.__zoom;)if(!(t=t.parentNode))return kA;return t.__zoom}function CA(t){t.stopImmediatePropagation()}function DA(t){t.preventDefault(),t.stopImmediatePropagation()}function FA(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function PA(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function zA(){return this.__zoom||kA}function IA(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function UA(){return navigator.maxTouchPoints||"ontouchstart"in this}function RA(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],a=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}EA.prototype=SA.prototype,t.Adder=v,t.Delaunay=eu,t.FormatSpecifier=uc,t.InternMap=_,t.InternSet=m,t.Node=td,t.Voronoi=Ka,t.ZoomTransform=SA,t.active=function(t,n){var e,r,i=t.__transition;if(i)for(r in n=null==n?null:n+"",i)if((e=i[r]).state>1&&e.name===n)return new Oi([[t]],go,n,+r);return null},t.arc=function(){var t=Im,n=Um,e=xm(0),r=null,i=Rm,o=jm,a=Lm,u=null;function c(){var c,s,f=+t.apply(this,arguments),l=+n.apply(this,arguments),h=i.apply(this,arguments)-Fm,d=o.apply(this,arguments)-Fm,p=wm(d-h),g=d>h;if(u||(u=c=ra()),l<f&&(s=l,l=f,f=s),l>Cm)if(p>Pm-Cm)u.moveTo(l*Tm(h),l*km(h)),u.arc(0,0,l,h,d,!g),f>Cm&&(u.moveTo(f*Tm(d),f*km(d)),u.arc(0,0,f,d,h,g));else{var y,v,_=h,m=d,b=h,A=d,x=p,w=p,M=a.apply(this,arguments)/2,T=M>Cm&&(r?+r.apply(this,arguments):Em(f*f+l*l)),N=Sm(wm(l-f)/2,+e.apply(this,arguments)),S=N,k=N;if(T>Cm){var E=zm(T/f*km(M)),C=zm(T/l*km(M));(x-=2*E)>Cm?(b+=E*=g?1:-1,A-=E):(x=0,b=A=(h+d)/2),(w-=2*C)>Cm?(_+=C*=g?1:-1,m-=C):(w=0,_=m=(h+d)/2)}var D=l*Tm(_),F=l*km(_),P=f*Tm(A),z=f*km(A);if(N>Cm){var I,U=l*Tm(m),R=l*km(m),j=f*Tm(b),L=f*km(b);if(p<Dm&&(I=function(t,n,e,r,i,o,a,u){var c=e-t,s=r-n,f=a-i,l=u-o,h=l*c-f*s;if(!(h*h<Cm))return[t+(h=(f*(n-o)-l*(t-i))/h)*c,n+h*s]}(D,F,j,L,U,R,P,z))){var O=D-I[0],Y=F-I[1],q=U-I[0],B=R-I[1],G=1/km(function(t){return t>1?0:t<-1?Dm:Math.acos(t)}((O*q+Y*B)/(Em(O*O+Y*Y)*Em(q*q+B*B)))/2),H=Em(I[0]*I[0]+I[1]*I[1]);S=Sm(N,(f-H)/(G-1)),k=Sm(N,(l-H)/(G+1))}}w>Cm?k>Cm?(y=Om(j,L,D,F,l,k,g),v=Om(U,R,P,z,l,k,g),u.moveTo(y.cx+y.x01,y.cy+y.y01),k<N?u.arc(y.cx,y.cy,k,Mm(y.y01,y.x01),Mm(v.y01,v.x01),!g):(u.arc(y.cx,y.cy,k,Mm(y.y01,y.x01),Mm(y.y11,y.x11),!g),u.arc(0,0,l,Mm(y.cy+y.y11,y.cx+y.x11),Mm(v.cy+v.y11,v.cx+v.x11),!g),u.arc(v.cx,v.cy,k,Mm(v.y11,v.x11),Mm(v.y01,v.x01),!g))):(u.moveTo(D,F),u.arc(0,0,l,_,m,!g)):u.moveTo(D,F),f>Cm&&x>Cm?S>Cm?(y=Om(P,z,U,R,f,-S,g),v=Om(D,F,j,L,f,-S,g),u.lineTo(y.cx+y.x01,y.cy+y.y01),S<N?u.arc(y.cx,y.cy,S,Mm(y.y01,y.x01),Mm(v.y01,v.x01),!g):(u.arc(y.cx,y.cy,S,Mm(y.y01,y.x01),Mm(y.y11,y.x11),!g),u.arc(0,0,f,Mm(y.cy+y.y11,y.cx+y.x11),Mm(v.cy+v.y11,v.cx+v.x11),g),u.arc(v.cx,v.cy,S,Mm(v.y11,v.x11),Mm(v.y01,v.x01),!g))):u.arc(0,0,f,A,b,g):u.lineTo(P,z)}else u.moveTo(0,0);if(u.closePath(),c)return u=null,c+""||null}return c.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Dm/2;return[Tm(r)*e,km(r)*e]},c.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:xm(+n),c):t},c.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:xm(+t),c):n},c.cornerRadius=function(t){return arguments.length?(e="function"==typeof t?t:xm(+t),c):e},c.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:xm(+t),c):r},c.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:xm(+t),c):i},c.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:xm(+t),c):o},c.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:xm(+t),c):a},c.context=function(t){return arguments.length?(u=null==t?null:t,c):u},c},t.area=Vm,t.areaRadial=eb,t.ascending=n,t.autoType=function(t){for(var n in t){var e,r,i=t[n].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(e=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Tu&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=e;else i=null;t[n]=i}return t},t.axisBottom=function(t){return mt(3,t)},t.axisLeft=function(t){return mt(4,t)},t.axisRight=function(t){return mt(2,t)},t.axisTop=function(t){return mt(1,t)},t.bin=Z,t.bisect=s,t.bisectCenter=c,t.bisectLeft=u,t.bisectRight=a,t.bisector=e,t.blob=function(t,n){return fetch(t,n).then(Nu)},t.brush=function(){return Yo(Co)},t.brushSelection=function(t){var n=t.__brush;return n?n.dim.output(n.selection):null},t.brushX=function(){return Yo(ko)},t.brushY=function(){return Yo(Eo)},t.buffer=function(t,n){return fetch(t,n).then(Su)},t.chord=function(){return Qo(!1,!1)},t.chordDirected=function(){return Qo(!0,!1)},t.chordTranspose=function(){return Qo(!1,!0)},t.cluster=function(){var t=Hh,n=1,e=1,r=!1;function i(i){var o,a=0;i.eachAfter((function(n){var e=n.children;e?(n.x=function(t){return t.reduce(Zh,0)/t.length}(e),n.y=function(t){return 1+t.reduce(Wh,0)}(e)):(n.x=o?a+=t(n,o):0,n.y=0,o=n)}));var u=function(t){for(var n;n=t.children;)t=n[0];return t}(i),c=function(t){for(var n;n=t.children;)t=n[n.length-1];return t}(i),s=u.x-t(u,c)/2,f=c.x+t(c,u)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*n,t.y=(i.y-t.y)*e}:function(t){t.x=(t.x-s)/(f-s)*n,t.y=(1-(i.y?t.y/i.y:1))*e})}return i.separation=function(n){return arguments.length?(t=n,i):t},i.size=function(t){return arguments.length?(r=!1,n=+t[0],e=+t[1],i):r?null:[n,e]},i.nodeSize=function(t){return arguments.length?(r=!0,n=+t[0],e=+t[1],i):r?[n,e]:null},i},t.color=be,t.contourDensity=function(){var t=Ta,n=Na,e=Sa,r=960,i=500,o=20,a=2,u=3*o,c=r+2*u>>a,s=i+2*u>>a,f=ya(20);function l(r){var i=new Float32Array(c*s),l=new Float32Array(c*s),d=Math.pow(2,-a);r.forEach((function(r,o,a){var f=(t(r,o,a)+u)*d,l=(n(r,o,a)+u)*d,h=+e(r,o,a);if(f>=0&&f<c&&l>=0&&l<s){var p=Math.floor(f),g=Math.floor(l),y=f-p-.5,v=l-g-.5;i[p+g*c]+=(1-y)*(1-v)*h,i[p+1+g*c]+=y*(1-v)*h,i[p+1+(g+1)*c]+=y*v*h,i[p+(g+1)*c]+=(1-y)*v*h}})),wa({width:c,height:s,data:i},{width:c,height:s,data:l},o>>a),Ma({width:c,height:s,data:l},{width:c,height:s,data:i},o>>a),wa({width:c,height:s,data:i},{width:c,height:s,data:l},o>>a),Ma({width:c,height:s,data:l},{width:c,height:s,data:i},o>>a),wa({width:c,height:s,data:i},{width:c,height:s,data:l},o>>a),Ma({width:c,height:s,data:l},{width:c,height:s,data:i},o>>a);var p=f(i);if(!Array.isArray(p)){var g=W(i);p=B(0,g,p),(p=rt(0,Math.floor(g/p)*p,p)).shift()}return xa().thresholds(p).size([c,s])(i).map(h)}function h(t){return t.value*=Math.pow(2,-2*a),t.coordinates.forEach(d),t}function d(t){t.forEach(p)}function p(t){t.forEach(g)}function g(t){t[0]=t[0]*Math.pow(2,a)-u,t[1]=t[1]*Math.pow(2,a)-u}function y(){return c=r+2*(u=3*o)>>a,s=i+2*u>>a,l}return l.x=function(n){return arguments.length?(t="function"==typeof n?n:ya(+n),l):t},l.y=function(t){return arguments.length?(n="function"==typeof t?t:ya(+t),l):n},l.weight=function(t){return arguments.length?(e="function"==typeof t?t:ya(+t),l):e},l.size=function(t){if(!arguments.length)return[r,i];var n=+t[0],e=+t[1];if(!(n>=0&&e>=0))throw new Error("invalid size");return r=n,i=e,y()},l.cellSize=function(t){if(!arguments.length)return 1<<a;if(!((t=+t)>=1))throw new Error("invalid cell size");return a=Math.floor(Math.log(t)/Math.LN2),y()},l.thresholds=function(t){return arguments.length?(f="function"==typeof t?t:Array.isArray(t)?ya(pa.call(t)):ya(t),l):f},l.bandwidth=function(t){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return o=Math.round((Math.sqrt(4*t*t+1)-1)/2),y()},l},t.contours=xa,t.count=f,t.create=function(t){return jn(Ct(t).call(document.documentElement))},t.creator=Ct,t.cross=function(...t){const n="function"==typeof t[t.length-1]&&function(t){return n=>t(...n)}(t.pop()),e=(t=t.map(d)).map(l),r=t.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||e.some(h))return o;for(;;){o.push(i.map(((n,e)=>t[e][n])));let a=r;for(;++i[a]===e[a];){if(0===a)return n?o.map(n):o;i[a--]=0}}},t.csv=Du,t.csvFormat=hu,t.csvFormatBody=du,t.csvFormatRow=gu,t.csvFormatRows=pu,t.csvFormatValue=yu,t.csvParse=fu,t.csvParseRows=lu,t.cubehelix=ar,t.cumsum=function(t,n){var e=0,r=0;return Float64Array.from(t,void 0===n?t=>e+=+t||0:i=>e+=+n(i,r++,t)||0)},t.curveBasis=function(t){return new Yb(t)},t.curveBasisClosed=function(t){return new qb(t)},t.curveBasisOpen=function(t){return new Bb(t)},t.curveBumpX=ab,t.curveBumpY=ub,t.curveBundle=Hb,t.curveCardinal=Vb,t.curveCardinalClosed=Kb,t.curveCardinalOpen=Xb,t.curveCatmullRom=nA,t.curveCatmullRomClosed=rA,t.curveCatmullRomOpen=oA,t.curveLinear=Gm,t.curveLinearClosed=function(t){return new aA(t)},t.curveMonotoneX=function(t){return new lA(t)},t.curveMonotoneY=function(t){return new hA(t)},t.curveNatural=function(t){return new pA(t)},t.curveStep=function(t){return new yA(t,.5)},t.curveStepAfter=function(t){return new yA(t,1)},t.curveStepBefore=function(t){return new yA(t,0)},t.descending=function(t,n){return null==t||null==n?NaN:n<t?-1:n>t?1:n>=t?0:NaN},t.deviation=g,t.difference=function(t,...n){t=new m(t);for(const e of n)for(const n of e)t.delete(n);return t},t.disjoint=function(t,n){const e=n[Symbol.iterator](),r=new m;for(const n of t){if(r.has(n))return!1;let t,i;for(;({value:t,done:i}=e.next())&&!i;){if(Object.is(n,t))return!1;r.add(t)}}return!0},t.dispatch=At,t.drag=function(){var t,n,e,r,i=Xn,o=Jn,a=te,u=ne,c={},s=At("start","drag","end"),f=0,l=0;function h(t){t.on("mousedown.drag",d).filter(u).on("touchstart.drag",y).on("touchmove.drag",v,Gn).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(a,u){if(!r&&i.call(this,a,u)){var c=m(this,o.call(this,a,u),a,u,"mouse");c&&(jn(a.view).on("mousemove.drag",p,Hn).on("mouseup.drag",g,Hn),Vn(a.view),Zn(a),e=!1,t=a.clientX,n=a.clientY,c("start",a))}}function p(r){if(Wn(r),!e){var i=r.clientX-t,o=r.clientY-n;e=i*i+o*o>l}c.mouse("drag",r)}function g(t){jn(t.view).on("mousemove.drag mouseup.drag",null),$n(t.view,e),Wn(t),c.mouse("end",t)}function y(t,n){if(i.call(this,t,n)){var e,r,a=t.changedTouches,u=o.call(this,t,n),c=a.length;for(e=0;e<c;++e)(r=m(this,u,t,n,a[e].identifier,a[e]))&&(Zn(t),r("start",t,a[e]))}}function v(t){var n,e,r=t.changedTouches,i=r.length;for(n=0;n<i;++n)(e=c[r[n].identifier])&&(Wn(t),e("drag",t,r[n]))}function _(t){var n,e,i=t.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),n=0;n<o;++n)(e=c[i[n].identifier])&&(Zn(t),e("end",t,i[n]))}function m(t,n,e,r,i,o){var u,l,d,p=s.copy(),g=Bn(o||e,n);if(null!=(d=a.call(t,new Qn("beforestart",{sourceEvent:e,target:h,identifier:i,active:f,x:g[0],y:g[1],dx:0,dy:0,dispatch:p}),r)))return u=d.x-g[0]||0,l=d.y-g[1]||0,function e(o,a,s){var y,v=g;switch(o){case"start":c[i]=e,y=f++;break;case"end":delete c[i],--f;case"drag":g=Bn(s||a,n),y=f}p.call(o,t,new Qn(o,{sourceEvent:a,subject:d,target:h,identifier:i,active:y,x:g[0]+u,y:g[1]+l,dx:g[0]-v[0],dy:g[1]-v[1],dispatch:p}),r)}}return h.filter=function(t){return arguments.length?(i="function"==typeof t?t:Kn(!!t),h):i},h.container=function(t){return arguments.length?(o="function"==typeof t?t:Kn(t),h):o},h.subject=function(t){return arguments.length?(a="function"==typeof t?t:Kn(t),h):a},h.touchable=function(t){return arguments.length?(u="function"==typeof t?t:Kn(!!t),h):u},h.on=function(){var t=s.on.apply(s,arguments);return t===s?h:t},h.clickDistance=function(t){return arguments.length?(l=(t=+t)*t,h):Math.sqrt(l)},h},t.dragDisable=Vn,t.dragEnable=$n,t.dsv=function(t,n,e,r){3===arguments.length&&"function"==typeof e&&(r=e,e=void 0);var i=cu(t);return Eu(n,e).then((function(t){return i.parse(t,r)}))},t.dsvFormat=cu,t.easeBack=uo,t.easeBackIn=oo,t.easeBackInOut=uo,t.easeBackOut=ao,t.easeBounce=ro,t.easeBounceIn=function(t){return 1-ro(1-t)},t.easeBounceInOut=function(t){return((t*=2)<=1?1-ro(1-t):ro(t-1)+1)/2},t.easeBounceOut=ro,t.easeCircle=to,t.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},t.easeCircleInOut=to,t.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},t.easeCubic=Hi,t.easeCubicIn=function(t){return t*t*t},t.easeCubicInOut=Hi,t.easeCubicOut=function(t){return--t*t*t+1},t.easeElastic=fo,t.easeElasticIn=so,t.easeElasticInOut=lo,t.easeElasticOut=fo,t.easeExp=Ji,t.easeExpIn=function(t){return Xi(1-+t)},t.easeExpInOut=Ji,t.easeExpOut=function(t){return 1-Xi(t)},t.easeLinear=t=>+t,t.easePoly=Vi,t.easePolyIn=Zi,t.easePolyInOut=Vi,t.easePolyOut=Wi,t.easeQuad=Gi,t.easeQuadIn=function(t){return t*t},t.easeQuadInOut=Gi,t.easeQuadOut=function(t){return t*(2-t)},t.easeSin=Qi,t.easeSinIn=function(t){return 1==+t?1:1-Math.cos(t*Ki)},t.easeSinInOut=Qi,t.easeSinOut=function(t){return Math.sin(t*Ki)},t.every=function(t,n){if("function"!=typeof n)throw new TypeError("test is not a function");let e=-1;for(const r of t)if(!n(r,++e,t))return!1;return!0},t.extent=y,t.fcumsum=function(t,n){const e=new v;let r=-1;return Float64Array.from(t,void 0===n?t=>e.add(+t||0):i=>e.add(+n(i,++r,t)||0))},t.filter=function(t,n){if("function"!=typeof n)throw new TypeError("test is not a function");const e=[];let r=-1;for(const i of t)n(i,++r,t)&&e.push(i);return e},t.flatGroup=function(t,...n){return S(N(t,...n),n)},t.flatRollup=function(t,n,...e){return S(E(t,n,...e),e)},t.forceCenter=function(t,n){var e,r=1;function i(){var i,o,a=e.length,u=0,c=0;for(i=0;i<a;++i)u+=(o=e[i]).x,c+=o.y;for(u=(u/a-t)*r,c=(c/a-n)*r,i=0;i<a;++i)(o=e[i]).x-=u,o.y-=c}return null==t&&(t=0),null==n&&(n=0),i.initialize=function(t){e=t},i.x=function(n){return arguments.length?(t=+n,i):t},i.y=function(t){return arguments.length?(n=+t,i):n},i.strength=function(t){return arguments.length?(r=+t,i):r},i},t.forceCollide=function(t){var n,e,r,i=1,o=1;function a(){for(var t,a,c,s,f,l,h,d=n.length,p=0;p<o;++p)for(a=qu(n,Vu,$u).visitAfter(u),t=0;t<d;++t)c=n[t],l=e[c.index],h=l*l,s=c.x+c.vx,f=c.y+c.vy,a.visit(g);function g(t,n,e,o,a){var u=t.data,d=t.r,p=l+d;if(!u)return n>s+p||o<s-p||e>f+p||a<f-p;if(u.index>c.index){var g=s-u.x-u.vx,y=f-u.y-u.vy,v=g*g+y*y;v<p*p&&(0===g&&(v+=(g=Wu(r))*g),0===y&&(v+=(y=Wu(r))*y),v=(p-(v=Math.sqrt(v)))/v*i,c.vx+=(g*=v)*(p=(d*=d)/(h+d)),c.vy+=(y*=v)*p,u.vx-=g*(p=1-p),u.vy-=y*p)}}}function u(t){if(t.data)return t.r=e[t.data.index];for(var n=t.r=0;n<4;++n)t[n]&&t[n].r>t.r&&(t.r=t[n].r)}function c(){if(n){var r,i,o=n.length;for(e=new Array(o),r=0;r<o;++r)i=n[r],e[i.index]=+t(i,r,n)}}return"function"!=typeof t&&(t=Zu(null==t?1:+t)),a.initialize=function(t,e){n=t,r=e,c()},a.iterations=function(t){return arguments.length?(o=+t,a):o},a.strength=function(t){return arguments.length?(i=+t,a):i},a.radius=function(n){return arguments.length?(t="function"==typeof n?n:Zu(+n),c(),a):t},a},t.forceLink=function(t){var n,e,r,i,o,a,u=Ku,c=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},s=Zu(30),f=1;function l(r){for(var i=0,u=t.length;i<f;++i)for(var c,s,l,h,d,p,g,y=0;y<u;++y)s=(c=t[y]).source,h=(l=c.target).x+l.vx-s.x-s.vx||Wu(a),d=l.y+l.vy-s.y-s.vy||Wu(a),h*=p=((p=Math.sqrt(h*h+d*d))-e[y])/p*r*n[y],d*=p,l.vx-=h*(g=o[y]),l.vy-=d*g,s.vx+=h*(g=1-g),s.vy+=d*g}function h(){if(r){var a,c,s=r.length,f=t.length,l=new Map(r.map(((t,n)=>[u(t,n,r),t])));for(a=0,i=new Array(s);a<f;++a)(c=t[a]).index=a,"object"!=typeof c.source&&(c.source=Qu(l,c.source)),"object"!=typeof c.target&&(c.target=Qu(l,c.target)),i[c.source.index]=(i[c.source.index]||0)+1,i[c.target.index]=(i[c.target.index]||0)+1;for(a=0,o=new Array(f);a<f;++a)c=t[a],o[a]=i[c.source.index]/(i[c.source.index]+i[c.target.index]);n=new Array(f),d(),e=new Array(f),p()}}function d(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+c(t[e],e,t)}function p(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+s(t[n],n,t)}return null==t&&(t=[]),l.initialize=function(t,n){r=t,a=n,h()},l.links=function(n){return arguments.length?(t=n,h(),l):t},l.id=function(t){return arguments.length?(u=t,l):u},l.iterations=function(t){return arguments.length?(f=+t,l):f},l.strength=function(t){return arguments.length?(c="function"==typeof t?t:Zu(+t),d(),l):c},l.distance=function(t){return arguments.length?(s="function"==typeof t?t:Zu(+t),p(),l):s},l},t.forceManyBody=function(){var t,n,e,r,i,o=Zu(-30),a=1,u=1/0,c=.81;function s(e){var i,o=t.length,a=qu(t,Ju,tc).visitAfter(l);for(r=e,i=0;i<o;++i)n=t[i],a.visit(h)}function f(){if(t){var n,e,r=t.length;for(i=new Array(r),n=0;n<r;++n)e=t[n],i[e.index]=+o(e,n,t)}}function l(t){var n,e,r,o,a,u=0,c=0;if(t.length){for(r=o=a=0;a<4;++a)(n=t[a])&&(e=Math.abs(n.value))&&(u+=n.value,c+=e,r+=e*n.x,o+=e*n.y);t.x=r/c,t.y=o/c}else{(n=t).x=n.data.x,n.y=n.data.y;do{u+=i[n.data.index]}while(n=n.next)}t.value=u}function h(t,o,s,f){if(!t.value)return!0;var l=t.x-n.x,h=t.y-n.y,d=f-o,p=l*l+h*h;if(d*d/c<p)return p<u&&(0===l&&(p+=(l=Wu(e))*l),0===h&&(p+=(h=Wu(e))*h),p<a&&(p=Math.sqrt(a*p)),n.vx+=l*t.value*r/p,n.vy+=h*t.value*r/p),!0;if(!(t.length||p>=u)){(t.data!==n||t.next)&&(0===l&&(p+=(l=Wu(e))*l),0===h&&(p+=(h=Wu(e))*h),p<a&&(p=Math.sqrt(a*p)));do{t.data!==n&&(d=i[t.data.index]*r/p,n.vx+=l*d,n.vy+=h*d)}while(t=t.next)}}return s.initialize=function(n,r){t=n,e=r,f()},s.strength=function(t){return arguments.length?(o="function"==typeof t?t:Zu(+t),f(),s):o},s.distanceMin=function(t){return arguments.length?(a=t*t,s):Math.sqrt(a)},s.distanceMax=function(t){return arguments.length?(u=t*t,s):Math.sqrt(u)},s.theta=function(t){return arguments.length?(c=t*t,s):Math.sqrt(c)},s},t.forceRadial=function(t,n,e){var r,i,o,a=Zu(.1);function u(t){for(var a=0,u=r.length;a<u;++a){var c=r[a],s=c.x-n||1e-6,f=c.y-e||1e-6,l=Math.sqrt(s*s+f*f),h=(o[a]-l)*i[a]*t/l;c.vx+=s*h,c.vy+=f*h}}function c(){if(r){var n,e=r.length;for(i=new Array(e),o=new Array(e),n=0;n<e;++n)o[n]=+t(r[n],n,r),i[n]=isNaN(o[n])?0:+a(r[n],n,r)}}return"function"!=typeof t&&(t=Zu(+t)),null==n&&(n=0),null==e&&(e=0),u.initialize=function(t){r=t,c()},u.strength=function(t){return arguments.length?(a="function"==typeof t?t:Zu(+t),c(),u):a},u.radius=function(n){return arguments.length?(t="function"==typeof n?n:Zu(+n),c(),u):t},u.x=function(t){return arguments.length?(n=+t,u):n},u.y=function(t){return arguments.length?(e=+t,u):e},u},t.forceSimulation=function(t){var n,e=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,u=new Map,c=ci(l),s=At("tick","end"),f=function(){let t=1;return()=>(t=(1664525*t+1013904223)%Xu)/Xu}();function l(){h(),s.call("tick",n),e<r&&(c.stop(),s.call("end",n))}function h(r){var c,s,f=t.length;void 0===r&&(r=1);for(var l=0;l<r;++l)for(e+=(o-e)*i,u.forEach((function(t){t(e)})),c=0;c<f;++c)null==(s=t[c]).fx?s.x+=s.vx*=a:(s.x=s.fx,s.vx=0),null==s.fy?s.y+=s.vy*=a:(s.y=s.fy,s.vy=0);return n}function d(){for(var n,e=0,r=t.length;e<r;++e){if((n=t[e]).index=e,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),isNaN(n.x)||isNaN(n.y)){var i=10*Math.sqrt(.5+e),o=e*nc;n.x=i*Math.cos(o),n.y=i*Math.sin(o)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function p(n){return n.initialize&&n.initialize(t,f),n}return null==t&&(t=[]),d(),n={tick:h,restart:function(){return c.restart(l),n},stop:function(){return c.stop(),n},nodes:function(e){return arguments.length?(t=e,d(),u.forEach(p),n):t},alpha:function(t){return arguments.length?(e=+t,n):e},alphaMin:function(t){return arguments.length?(r=+t,n):r},alphaDecay:function(t){return arguments.length?(i=+t,n):+i},alphaTarget:function(t){return arguments.length?(o=+t,n):o},velocityDecay:function(t){return arguments.length?(a=1-t,n):1-a},randomSource:function(t){return arguments.length?(f=t,u.forEach(p),n):f},force:function(t,e){return arguments.length>1?(null==e?u.delete(t):u.set(t,p(e)),n):u.get(t)},find:function(n,e,r){var i,o,a,u,c,s=0,f=t.length;for(null==r?r=1/0:r*=r,s=0;s<f;++s)(a=(i=n-(u=t[s]).x)*i+(o=e-u.y)*o)<r&&(c=u,r=a);return c},on:function(t,e){return arguments.length>1?(s.on(t,e),n):s.on(t)}}},t.forceX=function(t){var n,e,r,i=Zu(.1);function o(t){for(var i,o=0,a=n.length;o<a;++o)(i=n[o]).vx+=(r[o]-i.x)*e[o]*t}function a(){if(n){var o,a=n.length;for(e=new Array(a),r=new Array(a),o=0;o<a;++o)e[o]=isNaN(r[o]=+t(n[o],o,n))?0:+i(n[o],o,n)}}return"function"!=typeof t&&(t=Zu(null==t?0:+t)),o.initialize=function(t){n=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:Zu(+t),a(),o):i},o.x=function(n){return arguments.length?(t="function"==typeof n?n:Zu(+n),a(),o):t},o},t.forceY=function(t){var n,e,r,i=Zu(.1);function o(t){for(var i,o=0,a=n.length;o<a;++o)(i=n[o]).vy+=(r[o]-i.y)*e[o]*t}function a(){if(n){var o,a=n.length;for(e=new Array(a),r=new Array(a),o=0;o<a;++o)e[o]=isNaN(r[o]=+t(n[o],o,n))?0:+i(n[o],o,n)}}return"function"!=typeof t&&(t=Zu(null==t?0:+t)),o.initialize=function(t){n=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:Zu(+t),a(),o):i},o.y=function(n){return arguments.length?(t="function"==typeof n?n:Zu(+n),a(),o):t},o},t.formatDefaultLocale=gc,t.formatLocale=pc,t.formatSpecifier=ac,t.fsum=function(t,n){const e=new v;if(void 0===n)for(let n of t)(n=+n)&&e.add(n);else{let r=-1;for(let i of t)(i=+n(i,++r,t))&&e.add(i)}return+e},t.geoAlbers=wh,t.geoAlbersUsa=function(){var t,n,e,r,i,o,a=wh(),u=xh().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=xh().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(t,n){o=[t,n]}};function f(t){var n=t[0],a=t[1];return o=null,e.point(n,a),o||(r.point(n,a),o)||(i.point(n,a),o)}function l(){return t=n=null,f}return f.invert=function(t){var n=a.scale(),e=a.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?u:i>=.166&&i<.234&&r>=-.214&&r<-.115?c:a).invert(t)},f.stream=function(e){return t&&n===e?t:(r=[a.stream(n=e),u.stream(e),c.stream(e)],i=r.length,t={point:function(t,n){for(var e=-1;++e<i;)r[e].point(t,n)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},f.precision=function(t){return arguments.length?(a.precision(t),u.precision(t),c.precision(t),l()):a.precision()},f.scale=function(t){return arguments.length?(a.scale(t),u.scale(.35*t),c.scale(t),f.translate(a.translate())):a.scale()},f.translate=function(t){if(!arguments.length)return a.translate();var n=a.scale(),o=+t[0],f=+t[1];return e=a.translate(t).clipExtent([[o-.455*n,f-.238*n],[o+.455*n,f+.238*n]]).stream(s),r=u.translate([o-.307*n,f+.201*n]).clipExtent([[o-.425*n+mc,f+.12*n+mc],[o-.214*n-mc,f+.234*n-mc]]).stream(s),i=c.translate([o-.205*n,f+.212*n]).clipExtent([[o-.214*n+mc,f+.166*n+mc],[o-.115*n-mc,f+.234*n-mc]]).stream(s),l()},f.fitExtent=function(t,n){return fh(f,t,n)},f.fitSize=function(t,n){return lh(f,t,n)},f.fitWidth=function(t,n){return hh(f,t,n)},f.fitHeight=function(t,n){return dh(f,t,n)},f.scale(1070)},t.geoArea=function(t){return ds=new v,$c(t,ps),2*ds},t.geoAzimuthalEqualArea=function(){return _h(Nh).scale(124.75).clipAngle(179.999)},t.geoAzimuthalEqualAreaRaw=Nh,t.geoAzimuthalEquidistant=function(){return _h(Sh).scale(79.4188).clipAngle(179.999)},t.geoAzimuthalEquidistantRaw=Sh,t.geoBounds=function(t){var n,e,r,i,o,a,u;if(is=rs=-(ns=es=1/0),fs=[],$c(t,qs),e=fs.length){for(fs.sort(Qs),n=1,o=[r=fs[0]];n<e;++n)Xs(r,(i=fs[n])[0])||Xs(r,i[1])?(Ks(r[0],i[1])>Ks(r[0],r[1])&&(r[1]=i[1]),Ks(i[0],r[1])>Ks(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=0,r=o[e=o.length-1];n<=e;r=i,++n)i=o[n],(u=Ks(r[1],i[0]))>a&&(a=u,ns=i[0],rs=r[1])}return fs=ls=null,ns===1/0||es===1/0?[[NaN,NaN],[NaN,NaN]]:[[ns,es],[rs,is]]},t.geoCentroid=function(t){Ns=Ss=ks=Es=Cs=Ds=Fs=Ps=0,zs=new v,Is=new v,Us=new v,$c(t,Js);var n=+zs,e=+Is,r=+Us,i=Pc(n,e,r);return i<bc&&(n=Ds,e=Fs,r=Ps,Ss<mc&&(n=ks,e=Es,r=Cs),(i=Pc(n,e,r))<bc)?[NaN,NaN]:[Ec(e,n)*Tc,Yc(r/i)*Tc]},t.geoCircle=function(){var t,n,e=lf([0,0]),r=lf(90),i=lf(6),o={point:function(e,r){t.push(e=n(e,r)),e[0]*=Tc,e[1]*=Tc}};function a(){var a=e.apply(this,arguments),u=r.apply(this,arguments)*Nc,c=i.apply(this,arguments)*Nc;return t=[],n=pf(-a[0]*Nc,-a[1]*Nc,0).invert,mf(o,u,c,1),a={type:"Polygon",coordinates:[t]},t=n=null,a}return a.center=function(t){return arguments.length?(e="function"==typeof t?t:lf([+t[0],+t[1]]),a):e},a.radius=function(t){return arguments.length?(r="function"==typeof t?t:lf(+t),a):r},a.precision=function(t){return arguments.length?(i="function"==typeof t?t:lf(+t),a):i},a},t.geoClipAntimeridian=Df,t.geoClipCircle=Ff,t.geoClipExtent=function(){var t,n,e,r=0,i=0,o=960,a=500;return e={stream:function(e){return t&&n===e?t:t=Lf(r,i,o,a)(n=e)},extent:function(u){return arguments.length?(r=+u[0][0],i=+u[0][1],o=+u[1][0],a=+u[1][1],t=n=null,e):[[r,i],[o,a]]}}},t.geoClipRectangle=Lf,t.geoConicConformal=function(){return bh(Dh).scale(109.5).parallels([30,30])},t.geoConicConformalRaw=Dh,t.geoConicEqualArea=xh,t.geoConicEqualAreaRaw=Ah,t.geoConicEquidistant=function(){return bh(Ph).scale(131.154).center([0,13.9389])},t.geoConicEquidistantRaw=Ph,t.geoContains=function(t,n){return(t&&Vf.hasOwnProperty(t.type)?Vf[t.type]:Kf)(t,n)},t.geoDistance=Wf,t.geoEqualEarth=function(){return _h(Lh).scale(177.158)},t.geoEqualEarthRaw=Lh,t.geoEquirectangular=function(){return _h(Fh).scale(152.63)},t.geoEquirectangularRaw=Fh,t.geoGnomonic=function(){return _h(Oh).scale(144.049).clipAngle(60)},t.geoGnomonicRaw=Oh,t.geoGraticule=il,t.geoGraticule10=function(){return il()()},t.geoIdentity=function(){var t,n,e,r,i,o,a,u=1,c=0,s=0,f=1,l=1,h=0,d=null,p=1,g=1,y=uh({point:function(t,n){var e=m([t,n]);this.stream.point(e[0],e[1])}}),v=sl;function _(){return p=u*f,g=u*l,o=a=null,m}function m(e){var r=e[0]*p,i=e[1]*g;if(h){var o=i*t-r*n;r=r*t+i*n,i=o}return[r+c,i+s]}return m.invert=function(e){var r=e[0]-c,i=e[1]-s;if(h){var o=i*t+r*n;r=r*t-i*n,i=o}return[r/p,i/g]},m.stream=function(t){return o&&a===t?o:o=y(v(a=t))},m.postclip=function(t){return arguments.length?(v=t,d=e=r=i=null,_()):v},m.clipExtent=function(t){return arguments.length?(v=null==t?(d=e=r=i=null,sl):Lf(d=+t[0][0],e=+t[0][1],r=+t[1][0],i=+t[1][1]),_()):null==d?null:[[d,e],[r,i]]},m.scale=function(t){return arguments.length?(u=+t,_()):u},m.translate=function(t){return arguments.length?(c=+t[0],s=+t[1],_()):[c,s]},m.angle=function(e){return arguments.length?(n=Uc(h=e%360*Nc),t=Cc(h),_()):h*Tc},m.reflectX=function(t){return arguments.length?(f=t?-1:1,_()):f<0},m.reflectY=function(t){return arguments.length?(l=t?-1:1,_()):l<0},m.fitExtent=function(t,n){return fh(m,t,n)},m.fitSize=function(t,n){return lh(m,t,n)},m.fitWidth=function(t,n){return hh(m,t,n)},m.fitHeight=function(t,n){return dh(m,t,n)},m},t.geoInterpolate=function(t,n){var e=t[0]*Nc,r=t[1]*Nc,i=n[0]*Nc,o=n[1]*Nc,a=Cc(r),u=Uc(r),c=Cc(o),s=Uc(o),f=a*Cc(e),l=a*Uc(e),h=c*Cc(i),d=c*Uc(i),p=2*Yc(jc(qc(o-r)+a*c*qc(i-e))),g=Uc(p),y=p?function(t){var n=Uc(t*=p)/g,e=Uc(p-t)/g,r=e*f+n*h,i=e*l+n*d,o=e*u+n*s;return[Ec(i,r)*Tc,Ec(o,jc(r*r+i*i))*Tc]}:function(){return[e*Tc,r*Tc]};return y.distance=p,y},t.geoLength=Gf,t.geoMercator=function(){return Eh(kh).scale(961/Mc)},t.geoMercatorRaw=kh,t.geoNaturalEarth1=function(){return _h(Yh).scale(175.295)},t.geoNaturalEarth1Raw=Yh,t.geoOrthographic=function(){return _h(qh).scale(249.5).clipAngle(90.000001)},t.geoOrthographicRaw=qh,t.geoPath=function(t,n){var e,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),$c(t,e(r))),r.result()}return o.area=function(t){return $c(t,e(Al)),Al.result()},o.measure=function(t){return $c(t,e(ih)),ih.result()},o.bounds=function(t){return $c(t,e(Sl)),Sl.result()},o.centroid=function(t){return $c(t,e(Wl)),Wl.result()},o.projection=function(n){return arguments.length?(e=null==n?(t=null,sl):(t=n).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(n=null,new oh):new Vl(n=t),"function"!=typeof i&&r.pointRadius(i),o):n},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(n)},t.geoProjection=_h,t.geoProjectionMutator=mh,t.geoRotation=_f,t.geoStereographic=function(){return _h(Bh).scale(250).clipAngle(142)},t.geoStereographicRaw=Bh,t.geoStream=$c,t.geoTransform=function(t){return{stream:uh(t)}},t.geoTransverseMercator=function(){var t=Eh(Gh),n=t.center,e=t.rotate;return t.center=function(t){return arguments.length?n([-t[1],t[0]]):[(t=n())[1],-t[0]]},t.rotate=function(t){return arguments.length?e([t[0],t[1],t.length>2?t[2]+90:90]):[(t=e())[0],t[1],t[2]-90]},e([0,0,90]).scale(159.155)},t.geoTransverseMercatorRaw=Gh,t.gray=function(t,n){return new Be(t,0,0,null==n?1:n)},t.greatest=function(t,e=n){let r,i=!1;if(1===e.length){let o;for(const a of t){const t=e(a);(i?n(t,o)>0:0===n(t,t))&&(r=a,o=t,i=!0)}}else for(const n of t)(i?e(n,r)>0:0===e(n,n))&&(r=n,i=!0);return r},t.greatestIndex=function(t,e=n){if(1===e.length)return J(t,e);let r,i=-1,o=-1;for(const n of t)++o,(i<0?0===e(n,n):e(n,r)>0)&&(r=n,i=o);return i},t.group=T,t.groupSort=function(t,e,r){return(2!==e.length?P(k(t,e,r),(([t,e],[r,i])=>n(e,i)||n(t,r))):P(T(t,r),(([t,r],[i,o])=>e(r,o)||n(t,i)))).map((([t])=>t))},t.groups=N,t.hcl=$e,t.hierarchy=$h,t.histogram=Z,t.hsl=De,t.html=Uu,t.image=function(t,n){return new Promise((function(e,r){var i=new Image;for(var o in n)i[o]=n[o];i.onerror=r,i.onload=function(){e(i)},i.src=t}))},t.index=function(t,...n){return D(t,M,C,n)},t.indexes=function(t,...n){return D(t,Array.from,C,n)},t.interpolate=kr,t.interpolateArray=function(t,n){return(br(n)?mr:Ar)(t,n)},t.interpolateBasis=sr,t.interpolateBasisClosed=fr,t.interpolateBlues=J_,t.interpolateBrBG=l_,t.interpolateBuGn=E_,t.interpolateBuPu=D_,t.interpolateCividis=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},t.interpolateCool=hm,t.interpolateCubehelix=Zr,t.interpolateCubehelixDefault=fm,t.interpolateCubehelixLong=Wr,t.interpolateDate=xr,t.interpolateDiscrete=function(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}},t.interpolateGnBu=P_,t.interpolateGreens=nm,t.interpolateGreys=rm,t.interpolateHcl=Br,t.interpolateHclLong=Gr,t.interpolateHsl=Or,t.interpolateHslLong=Yr,t.interpolateHue=function(t,n){var e=dr(+t,+n);return function(t){var n=e(t);return n-360*Math.floor(n/360)}},t.interpolateInferno=bm,t.interpolateLab=function(t,n){var e=pr((t=qe(t)).l,(n=qe(n)).l),r=pr(t.a,n.a),i=pr(t.b,n.b),o=pr(t.opacity,n.opacity);return function(n){return t.l=e(n),t.a=r(n),t.b=i(n),t.opacity=o(n),t+""}},t.interpolateMagma=mm,t.interpolateNumber=wr,t.interpolateNumberArray=mr,t.interpolateObject=Mr,t.interpolateOrRd=I_,t.interpolateOranges=sm,t.interpolatePRGn=d_,t.interpolatePiYG=g_,t.interpolatePlasma=Am,t.interpolatePuBu=L_,t.interpolatePuBuGn=R_,t.interpolatePuOr=v_,t.interpolatePuRd=Y_,t.interpolatePurples=om,t.interpolateRainbow=function(t){(t<0||t>1)&&(t-=Math.floor(t));var n=Math.abs(t-.5);return dm.h=360*t-100,dm.s=1.5-1.5*n,dm.l=.8-.9*n,dm+""},t.interpolateRdBu=m_,t.interpolateRdGy=A_,t.interpolateRdPu=B_,t.interpolateRdYlBu=w_,t.interpolateRdYlGn=T_,t.interpolateReds=um,t.interpolateRgb=gr,t.interpolateRgbBasis=vr,t.interpolateRgbBasisClosed=_r,t.interpolateRound=Er,t.interpolateSinebow=function(t){var n;return t=(.5-t)*Math.PI,pm.r=255*(n=Math.sin(t))*n,pm.g=255*(n=Math.sin(t+gm))*n,pm.b=255*(n=Math.sin(t+ym))*n,pm+""},t.interpolateSpectral=S_,t.interpolateString=Sr,t.interpolateTransformCss=Ir,t.interpolateTransformSvg=Ur,t.interpolateTurbo=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"},t.interpolateViridis=_m,t.interpolateWarm=lm,t.interpolateYlGn=W_,t.interpolateYlGnBu=H_,t.interpolateYlOrBr=$_,t.interpolateYlOrRd=Q_,t.interpolateZoom=jr,t.interrupt=bi,t.intersection=function(t,...n){t=new m(t),n=n.map(st);t:for(const e of t)for(const r of n)if(!r.has(e)){t.delete(e);continue t}return t},t.interval=function(t,n,e){var r=new ui,i=n;return null==n?(r.restart(t,n,e),r):(r._restart=r.restart,r.restart=function(t,n,e){n=+n,e=null==e?oi():+e,r._restart((function o(a){a+=i,r._restart(o,i+=n,e),t(a)}),n,e)},r.restart(t,n,e),r)},t.isoFormat=Yv,t.isoParse=Bv,t.json=function(t,n){return fetch(t,n).then(Pu)},t.lab=qe,t.lch=function(t,n,e,r){return 1===arguments.length?Ve(t):new Ke(e,n,t,null==r?1:r)},t.least=function(t,e=n){let r,i=!1;if(1===e.length){let o;for(const a of t){const t=e(a);(i?n(t,o)<0:0===n(t,t))&&(r=a,o=t,i=!0)}}else for(const n of t)(i?e(n,r)<0:0===e(n,n))&&(r=n,i=!0);return r},t.leastIndex=it,t.line=Wm,t.lineRadial=nb,t.link=lb,t.linkHorizontal=function(){return lb(ab)},t.linkRadial=function(){const t=lb(cb);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},t.linkVertical=function(){return lb(ub)},t.local=On,t.map=function(t,n){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof n)throw new TypeError("mapper is not a function");return Array.from(t,((e,r)=>n(e,r,t)))},t.matcher=Ut,t.max=W,t.maxIndex=J,t.mean=function(t,n){let e=0,r=0;if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&(++e,r+=n);else{let i=-1;for(let o of t)null!=(o=n(o,++i,t))&&(o=+o)>=o&&(++e,r+=o)}if(e)return r/e},t.median=function(t,n){return Q(t,.5,n)},t.merge=tt,t.min=V,t.minIndex=nt,t.mode=function(t,n){const e=new _;if(void 0===n)for(let n of t)null!=n&&n>=n&&e.set(n,(e.get(n)||0)+1);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&i>=i&&e.set(i,(e.get(i)||0)+1)}let r,i=0;for(const[t,n]of e)n>i&&(i=n,r=t);return r},t.namespace=St,t.namespaces=Nt,t.nice=G,t.now=oi,t.pack=function(){var t=null,n=1,e=1,r=yd;function i(i){return i.x=n/2,i.y=e/2,t?i.eachBefore(md(t)).eachAfter(bd(r,.5)).eachBefore(Ad(1)):i.eachBefore(md(_d)).eachAfter(bd(yd,1)).eachAfter(bd(r,i.r/Math.min(n,e))).eachBefore(Ad(Math.min(n,e)/(2*i.r))),i}return i.radius=function(n){return arguments.length?(t=pd(n),i):t},i.size=function(t){return arguments.length?(n=+t[0],e=+t[1],i):[n,e]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:vd(+t),i):r},i},t.packEnclose=nd,t.packSiblings=function(t){return dd(t),t},t.pairs=function(t,n=et){const e=[];let r,i=!1;for(const o of t)i&&e.push(n(r,o)),r=o,i=!0;return e},t.partition=function(){var t=1,n=1,e=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=e,i.x1=t,i.y1=n/o,i.eachBefore(function(t,n){return function(r){r.children&&wd(r,r.x0,t*(r.depth+1)/n,r.x1,t*(r.depth+2)/n);var i=r.x0,o=r.y0,a=r.x1-e,u=r.y1-e;a<i&&(i=a=(i+a)/2),u<o&&(o=u=(o+u)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=u}}(n,o)),r&&i.eachBefore(xd),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(t){return arguments.length?(e=+t,i):e},i},t.path=ra,t.permute=F,t.pie=function(){var t=Km,n=$m,e=null,r=xm(0),i=xm(Pm),o=xm(0);function a(a){var u,c,s,f,l,h=(a=qm(a)).length,d=0,p=new Array(h),g=new Array(h),y=+r.apply(this,arguments),v=Math.min(Pm,Math.max(-Pm,i.apply(this,arguments)-y)),_=Math.min(Math.abs(v)/h,o.apply(this,arguments)),m=_*(v<0?-1:1);for(u=0;u<h;++u)(l=g[p[u]=u]=+t(a[u],u,a))>0&&(d+=l);for(null!=n?p.sort((function(t,e){return n(g[t],g[e])})):null!=e&&p.sort((function(t,n){return e(a[t],a[n])})),u=0,s=d?(v-h*m)/d:0;u<h;++u,y=f)c=p[u],f=y+((l=g[c])>0?l*s:0)+m,g[c]={data:a[c],index:u,value:l,startAngle:y,endAngle:f,padAngle:_};return g}return a.value=function(n){return arguments.length?(t="function"==typeof n?n:xm(+n),a):t},a.sortValues=function(t){return arguments.length?(n=t,e=null,a):n},a.sort=function(t){return arguments.length?(e=t,n=null,a):e},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:xm(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:xm(+t),a):i},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:xm(+t),a):o},a},t.piecewise=Vr,t.pointRadial=rb,t.pointer=Bn,t.pointers=function(t,n){return t.target&&(t=qn(t),void 0===n&&(n=t.currentTarget),t=t.touches||[t]),Array.from(t,(t=>Bn(t,n)))},t.polygonArea=function(t){for(var n,e=-1,r=t.length,i=t[r-1],o=0;++e<r;)n=i,i=t[e],o+=n[1]*i[0]-n[0]*i[1];return o/2},t.polygonCentroid=function(t){for(var n,e,r=-1,i=t.length,o=0,a=0,u=t[i-1],c=0;++r<i;)n=u,u=t[r],c+=e=n[0]*u[1]-u[0]*n[1],o+=(n[0]+u[0])*e,a+=(n[1]+u[1])*e;return[o/(c*=3),a/c]},t.polygonContains=function(t,n){for(var e,r,i=t.length,o=t[i-1],a=n[0],u=n[1],c=o[0],s=o[1],f=!1,l=0;l<i;++l)e=(o=t[l])[0],(r=o[1])>u!=s>u&&a<(c-e)*(u-r)/(s-r)+e&&(f=!f),c=e,s=r;return f},t.polygonHull=function(t){if((e=t.length)<3)return null;var n,e,r=new Array(e),i=new Array(e);for(n=0;n<e;++n)r[n]=[+t[n][0],+t[n][1],n];for(r.sort(Bd),n=0;n<e;++n)i[n]=[r[n][0],-r[n][1]];var o=Gd(r),a=Gd(i),u=a[0]===o[0],c=a[a.length-1]===o[o.length-1],s=[];for(n=o.length-1;n>=0;--n)s.push(t[r[o[n]][2]]);for(n=+u;n<a.length-c;++n)s.push(t[r[a[n]][2]]);return s},t.polygonLength=function(t){for(var n,e,r=-1,i=t.length,o=t[i-1],a=o[0],u=o[1],c=0;++r<i;)n=a,e=u,n-=a=(o=t[r])[0],e-=u=o[1],c+=Math.hypot(n,e);return c},t.precisionFixed=yc,t.precisionPrefix=vc,t.precisionRound=_c,t.quadtree=qu,t.quantile=Q,t.quantileSorted=X,t.quantize=function(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t(r/(n-1));return e},t.quickselect=$,t.radialArea=eb,t.radialLine=nb,t.randomBates=Qd,t.randomBernoulli=tp,t.randomBeta=rp,t.randomBinomial=ip,t.randomCauchy=ap,t.randomExponential=Xd,t.randomGamma=ep,t.randomGeometric=np,t.randomInt=Wd,t.randomIrwinHall=Kd,t.randomLcg=function(t=Math.random()){let n=0|(0<=t&&t<1?t/sp:Math.abs(t));return()=>(n=1664525*n+1013904223|0,sp*(n>>>0))},t.randomLogNormal=$d,t.randomLogistic=up,t.randomNormal=Vd,t.randomPareto=Jd,t.randomPoisson=cp,t.randomUniform=Zd,t.randomWeibull=op,t.range=rt,t.rank=function(t,e=n){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");let r=Array.from(t);const i=new Float64Array(r.length);2!==e.length&&(r=r.map(e),e=n);const o=(t,n)=>e(r[t],r[n]);let a,u;return Uint32Array.from(r,((t,n)=>n)).sort(e===n?(t,n)=>I(r[t],r[n]):z(o)).forEach(((t,n)=>{const e=o(t,void 0===a?t:a);e>=0?((void 0===a||e>0)&&(a=t,u=n),i[t]=u):i[t]=NaN})),i},t.reduce=function(t,n,e){if("function"!=typeof n)throw new TypeError("reducer is not a function");const r=t[Symbol.iterator]();let i,o,a=-1;if(arguments.length<3){if(({done:i,value:e}=r.next()),i)return;++a}for(;({done:i,value:o}=r.next()),!i;)e=n(e,o,++a,t);return e},t.reverse=function(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()},t.rgb=Me,t.ribbon=function(){return da()},t.ribbonArrow=function(){return da(ha)},t.rollup=k,t.rollups=E,t.scaleBand=pp,t.scaleDiverging=function t(){var n=Np(Kv()(_p));return n.copy=function(){return Vv(n,t())},lp.apply(n,arguments)},t.scaleDivergingLog=function t(){var n=zp(Kv()).domain([.1,1,10]);return n.copy=function(){return Vv(n,t()).base(n.base())},lp.apply(n,arguments)},t.scaleDivergingPow=Qv,t.scaleDivergingSqrt=function(){return Qv.apply(null,arguments).exponent(.5)},t.scaleDivergingSymlog=function t(){var n=Rp(Kv());return n.copy=function(){return Vv(n,t()).constant(n.constant())},lp.apply(n,arguments)},t.scaleIdentity=function t(n){var e;function r(t){return null==t||isNaN(t=+t)?e:t}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(n=Array.from(t,yp),r):n.slice()},r.unknown=function(t){return arguments.length?(e=t,r):e},r.copy=function(){return t(n).unknown(e)},n=arguments.length?Array.from(n,yp):[0,1],Np(r)},t.scaleImplicit=hp,t.scaleLinear=function t(){var n=Mp();return n.copy=function(){return xp(n,t())},fp.apply(n,arguments),Np(n)},t.scaleLog=function t(){const n=zp(wp()).domain([1,10]);return n.copy=()=>xp(n,t()).base(n.base()),fp.apply(n,arguments),n},t.scaleOrdinal=dp,t.scalePoint=function(){return gp(pp.apply(null,arguments).paddingInner(1))},t.scalePow=qp,t.scaleQuantile=function t(){var e,r=[],i=[],o=[];function a(){var t=0,n=Math.max(1,i.length);for(o=new Array(n-1);++t<n;)o[t-1]=X(r,t/n);return u}function u(t){return null==t||isNaN(t=+t)?e:i[s(o,t)]}return u.invertExtent=function(t){var n=i.indexOf(t);return n<0?[NaN,NaN]:[n>0?o[n-1]:r[0],n<o.length?o[n]:r[r.length-1]]},u.domain=function(t){if(!arguments.length)return r.slice();r=[];for(let n of t)null==n||isNaN(n=+n)||r.push(n);return r.sort(n),a()},u.range=function(t){return arguments.length?(i=Array.from(t),a()):i.slice()},u.unknown=function(t){return arguments.length?(e=t,u):e},u.quantiles=function(){return o.slice()},u.copy=function(){return t().domain(r).range(i).unknown(e)},fp.apply(u,arguments)},t.scaleQuantize=function t(){var n,e=0,r=1,i=1,o=[.5],a=[0,1];function u(t){return null!=t&&t<=t?a[s(o,t,0,i)]:n}function c(){var t=-1;for(o=new Array(i);++t<i;)o[t]=((t+1)*r-(t-i)*e)/(i+1);return u}return u.domain=function(t){return arguments.length?([e,r]=t,e=+e,r=+r,c()):[e,r]},u.range=function(t){return arguments.length?(i=(a=Array.from(t)).length-1,c()):a.slice()},u.invertExtent=function(t){var n=a.indexOf(t);return n<0?[NaN,NaN]:n<1?[e,o[0]]:n>=i?[o[i-1],r]:[o[n-1],o[n]]},u.unknown=function(t){return arguments.length?(n=t,u):u},u.thresholds=function(){return o.slice()},u.copy=function(){return t().domain([e,r]).range(a).unknown(n)},fp.apply(Np(u),arguments)},t.scaleRadial=function t(){var n,e=Mp(),r=[0,1],i=!1;function o(t){var r=function(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}(e(t));return isNaN(r)?n:i?Math.round(r):r}return o.invert=function(t){return e.invert(Bp(t))},o.domain=function(t){return arguments.length?(e.domain(t),o):e.domain()},o.range=function(t){return arguments.length?(e.range((r=Array.from(t,yp)).map(Bp)),o):r.slice()},o.rangeRound=function(t){return o.range(t).round(!0)},o.round=function(t){return arguments.length?(i=!!t,o):i},o.clamp=function(t){return arguments.length?(e.clamp(t),o):e.clamp()},o.unknown=function(t){return arguments.length?(n=t,o):n},o.copy=function(){return t(e.domain(),r).round(i).clamp(e.clamp()).unknown(n)},fp.apply(o,arguments),Np(o)},t.scaleSequential=function t(){var n=Np(Wv()(_p));return n.copy=function(){return Vv(n,t())},lp.apply(n,arguments)},t.scaleSequentialLog=function t(){var n=zp(Wv()).domain([1,10]);return n.copy=function(){return Vv(n,t()).base(n.base())},lp.apply(n,arguments)},t.scaleSequentialPow=$v,t.scaleSequentialQuantile=function t(){var e=[],r=_p;function i(t){if(null!=t&&!isNaN(t=+t))return r((s(e,t,1)-1)/(e.length-1))}return i.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(n),i},i.interpolator=function(t){return arguments.length?(r=t,i):r},i.range=function(){return e.map(((t,n)=>r(n/(e.length-1))))},i.quantiles=function(t){return Array.from({length:t+1},((n,r)=>Q(e,r/t)))},i.copy=function(){return t(r).domain(e)},lp.apply(i,arguments)},t.scaleSequentialSqrt=function(){return $v.apply(null,arguments).exponent(.5)},t.scaleSequentialSymlog=function t(){var n=Rp(Wv());return n.copy=function(){return Vv(n,t()).constant(n.constant())},lp.apply(n,arguments)},t.scaleSqrt=function(){return qp.apply(null,arguments).exponent(.5)},t.scaleSymlog=function t(){var n=Rp(wp());return n.copy=function(){return xp(n,t()).constant(n.constant())},fp.apply(n,arguments)},t.scaleThreshold=function t(){var n,e=[.5],r=[0,1],i=1;function o(t){return null!=t&&t<=t?r[s(e,t,0,i)]:n}return o.domain=function(t){return arguments.length?(e=Array.from(t),i=Math.min(e.length,r.length-1),o):e.slice()},o.range=function(t){return arguments.length?(r=Array.from(t),i=Math.min(e.length,r.length-1),o):r.slice()},o.invertExtent=function(t){var n=r.indexOf(t);return[e[n-1],e[n]]},o.unknown=function(t){return arguments.length?(n=t,o):n},o.copy=function(){return t().domain(e).range(r).unknown(n)},fp.apply(o,arguments)},t.scaleTime=function(){return fp.apply(Zv(py,gy,Pg,Cg,gg,hg,sg,ag,rg,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},t.scaleUtc=function(){return fp.apply(Zv(hy,dy,sy,ay,Hg,qg,Lg,Ug,rg,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},t.scan=function(t,n){const e=it(t,n);return e<0?void 0:e},t.schemeAccent=t_,t.schemeBlues=X_,t.schemeBrBG=f_,t.schemeBuGn=k_,t.schemeBuPu=C_,t.schemeCategory10=Jv,t.schemeDark2=n_,t.schemeGnBu=F_,t.schemeGreens=tm,t.schemeGreys=em,t.schemeOrRd=z_,t.schemeOranges=cm,t.schemePRGn=h_,t.schemePaired=e_,t.schemePastel1=r_,t.schemePastel2=i_,t.schemePiYG=p_,t.schemePuBu=j_,t.schemePuBuGn=U_,t.schemePuOr=y_,t.schemePuRd=O_,t.schemePurples=im,t.schemeRdBu=__,t.schemeRdGy=b_,t.schemeRdPu=q_,t.schemeRdYlBu=x_,t.schemeRdYlGn=M_,t.schemeReds=am,t.schemeSet1=o_,t.schemeSet2=a_,t.schemeSet3=u_,t.schemeSpectral=N_,t.schemeTableau10=c_,t.schemeYlGn=Z_,t.schemeYlGnBu=G_,t.schemeYlOrBr=V_,t.schemeYlOrRd=K_,t.select=jn,t.selectAll=function(t){return"string"==typeof t?new Un([document.querySelectorAll(t)],[document.documentElement]):new Un([Pt(t)],In)},t.selection=Rn,t.selector=Ft,t.selectorAll=It,t.shuffle=ot,t.shuffler=at,t.some=function(t,n){if("function"!=typeof n)throw new TypeError("test is not a function");let e=-1;for(const r of t)if(n(r,++e,t))return!0;return!1},t.sort=P,t.stack=function(){var t=xm([]),n=_A,e=vA,r=mA;function i(i){var o,a,u=Array.from(t.apply(this,arguments),bA),c=u.length,s=-1;for(const t of i)for(o=0,++s;o<c;++o)(u[o][s]=[0,+r(t,u[o].key,s,i)]).data=t;for(o=0,a=qm(n(u));o<c;++o)u[a[o]].index=o;return e(u,a),u}return i.keys=function(n){return arguments.length?(t="function"==typeof n?n:xm(Array.from(n)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:xm(+t),i):r},i.order=function(t){return arguments.length?(n=null==t?_A:"function"==typeof t?t:xm(Array.from(t)),i):n},i.offset=function(t){return arguments.length?(e=null==t?vA:t,i):e},i},t.stackOffsetDiverging=function(t,n){if((u=t.length)>0)for(var e,r,i,o,a,u,c=0,s=t[n[0]].length;c<s;++c)for(o=a=0,e=0;e<u;++e)(i=(r=t[n[e]][c])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):(r[0]=0,r[1]=i)},t.stackOffsetExpand=function(t,n){if((r=t.length)>0){for(var e,r,i,o=0,a=t[0].length;o<a;++o){for(i=e=0;e<r;++e)i+=t[e][o][1]||0;if(i)for(e=0;e<r;++e)t[e][o][1]/=i}vA(t,n)}},t.stackOffsetNone=vA,t.stackOffsetSilhouette=function(t,n){if((e=t.length)>0){for(var e,r=0,i=t[n[0]],o=i.length;r<o;++r){for(var a=0,u=0;a<e;++a)u+=t[a][r][1]||0;i[r][1]+=i[r][0]=-u/2}vA(t,n)}},t.stackOffsetWiggle=function(t,n){if((i=t.length)>0&&(r=(e=t[n[0]]).length)>0){for(var e,r,i,o=0,a=1;a<r;++a){for(var u=0,c=0,s=0;u<i;++u){for(var f=t[n[u]],l=f[a][1]||0,h=(l-(f[a-1][1]||0))/2,d=0;d<u;++d){var p=t[n[d]];h+=(p[a][1]||0)-(p[a-1][1]||0)}c+=l,s+=h*l}e[a-1][1]+=e[a-1][0]=o,c&&(o-=s/c)}e[a-1][1]+=e[a-1][0]=o,vA(t,n)}},t.stackOrderAppearance=AA,t.stackOrderAscending=wA,t.stackOrderDescending=function(t){return wA(t).reverse()},t.stackOrderInsideOut=function(t){var n,e,r=t.length,i=t.map(MA),o=AA(t),a=0,u=0,c=[],s=[];for(n=0;n<r;++n)e=o[n],a<u?(a+=i[e],c.push(e)):(u+=i[e],s.push(e));return s.reverse().concat(c)},t.stackOrderNone=_A,t.stackOrderReverse=function(t){return _A(t).reverse()},t.stratify=function(){var t,n=Sd,e=kd;function r(r){var i,o,a,u,c,s,f,l,h=Array.from(r),d=n,p=e,g=new Map;if(null!=t){const n=h.map(((n,e)=>function(t){let n=(t=`${t}`).length;return Cd(t,n-1)&&!Cd(t,n-2)&&(t=t.slice(0,-1)),"/"===t[0]?t:`/${t}`}(t(n,e,r)))),e=n.map(Ed),i=new Set(n).add("");for(const t of e)i.has(t)||(i.add(t),n.push(t),e.push(Ed(t)),h.push(Nd));d=(t,e)=>n[e],p=(t,n)=>e[n]}for(a=0,i=h.length;a<i;++a)o=h[a],s=h[a]=new td(o),null!=(f=d(o,a,r))&&(f+="")&&(l=s.id=f,g.set(l,g.has(l)?Td:s)),null!=(f=p(o,a,r))&&(f+="")&&(s.parent=f);for(a=0;a<i;++a)if(f=(s=h[a]).parent){if(!(c=g.get(f)))throw new Error("missing: "+f);if(c===Td)throw new Error("ambiguous: "+f);c.children?c.children.push(s):c.children=[s],s.parent=c}else{if(u)throw new Error("multiple roots");u=s}if(!u)throw new Error("no root");if(null!=t){for(;u.data===Nd&&1===u.children.length;)u=u.children[0],--i;for(let t=h.length-1;t>=0&&(s=h[t]).data===Nd;--t)s.data=null}if(u.parent=Md,u.eachBefore((function(t){t.depth=t.parent.depth+1,--i})).eachBefore(Jh),u.parent=null,i>0)throw new Error("cycle");return u}return r.id=function(t){return arguments.length?(n=pd(t),r):n},r.parentId=function(t){return arguments.length?(e=pd(t),r):e},r.path=function(n){return arguments.length?(t=pd(n),r):t},r},t.style=an,t.subset=function(t,n){return ft(n,t)},t.sum=function(t,n){let e=0;if(void 0===n)for(let n of t)(n=+n)&&(e+=n);else{let r=-1;for(let i of t)(i=+n(i,++r,t))&&(e+=i)}return e},t.superset=ft,t.svg=Ru,t.symbol=function(t,n){let e=null;function r(){let r;if(e||(e=r=ra()),t.apply(this,arguments).draw(e,+n.apply(this,arguments)),r)return e=null,r+""||null}return t="function"==typeof t?t:xm(t||pb),n="function"==typeof n?n:xm(void 0===n?64:+n),r.type=function(n){return arguments.length?(t="function"==typeof n?n:xm(n),r):t},r.size=function(t){return arguments.length?(n="function"==typeof t?t:xm(+t),r):n},r.context=function(t){return arguments.length?(e=null==t?null:t,r):e},r},t.symbolAsterisk=db,t.symbolCircle=pb,t.symbolCross=gb,t.symbolDiamond=_b,t.symbolDiamond2=mb,t.symbolPlus=bb,t.symbolSquare=Ab,t.symbolSquare2=xb,t.symbolStar=Nb,t.symbolTriangle=kb,t.symbolTriangle2=Cb,t.symbolWye=Ib,t.symbolX=Ub,t.symbols=Rb,t.symbolsFill=Rb,t.symbolsStroke=jb,t.text=Eu,t.thresholdFreedmanDiaconis=function(t,n,e){return Math.ceil((e-n)/(2*(Q(t,.75)-Q(t,.25))*Math.pow(f(t),-1/3)))},t.thresholdScott=function(t,n,e){return Math.ceil((e-n)/(3.5*g(t)*Math.pow(f(t),-1/3)))},t.thresholdSturges=H,t.tickFormat=Tp,t.tickIncrement=q,t.tickStep=B,t.ticks=Y,t.timeDay=hg,t.timeDays=dg,t.timeFormatDefaultLocale=jv,t.timeFormatLocale=my,t.timeFriday=bg,t.timeFridays=Sg,t.timeHour=sg,t.timeHours=fg,t.timeInterval=Zp,t.timeMillisecond=Vp,t.timeMilliseconds=$p,t.timeMinute=ag,t.timeMinutes=ug,t.timeMonday=yg,t.timeMondays=wg,t.timeMonth=Cg,t.timeMonths=Dg,t.timeSaturday=Ag,t.timeSaturdays=kg,t.timeSecond=rg,t.timeSeconds=ig,t.timeSunday=gg,t.timeSundays=xg,t.timeThursday=mg,t.timeThursdays=Ng,t.timeTickInterval=gy,t.timeTicks=py,t.timeTuesday=vg,t.timeTuesdays=Mg,t.timeWednesday=_g,t.timeWednesdays=Tg,t.timeWeek=gg,t.timeWeeks=xg,t.timeYear=Pg,t.timeYears=zg,t.timeout=di,t.timer=ci,t.timerFlush=si,t.transition=Yi,t.transpose=ut,t.tree=function(){var t=Dd,n=1,e=1,r=null;function i(i){var c=function(t){for(var n,e,r,i,o,a=new Ud(t,0),u=[a];n=u.pop();)if(r=n._.children)for(n.children=new Array(o=r.length),i=o-1;i>=0;--i)u.push(e=n.children[i]=new Ud(r[i],i)),e.parent=n;return(a.parent=new Ud(null,0)).children=[a],a}(i);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(a),r)i.eachBefore(u);else{var s=i,f=i,l=i;i.eachBefore((function(t){t.x<s.x&&(s=t),t.x>f.x&&(f=t),t.depth>l.depth&&(l=t)}));var h=s===f?1:t(s,f)/2,d=h-s.x,p=n/(f.x+h+d),g=e/(l.depth||1);i.eachBefore((function(t){t.x=(t.x+d)*p,t.y=t.depth*g}))}return i}function o(n){var e=n.children,r=n.parent.children,i=n.i?r[n.i-1]:null;if(e){!function(t){for(var n,e=0,r=0,i=t.children,o=i.length;--o>=0;)(n=i[o]).z+=e,n.m+=e,e+=n.s+(r+=n.c)}(n);var o=(e[0].z+e[e.length-1].z)/2;i?(n.z=i.z+t(n._,i._),n.m=n.z-o):n.z=o}else i&&(n.z=i.z+t(n._,i._));n.parent.A=function(n,e,r){if(e){for(var i,o=n,a=n,u=e,c=o.parent.children[0],s=o.m,f=a.m,l=u.m,h=c.m;u=Pd(u),o=Fd(o),u&&o;)c=Fd(c),(a=Pd(a)).a=n,(i=u.z+l-o.z-s+t(u._,o._))>0&&(zd(Id(u,n,r),n,i),s+=i,f+=i),l+=u.m,s+=o.m,h+=c.m,f+=a.m;u&&!Pd(a)&&(a.t=u,a.m+=l-f),o&&!Fd(c)&&(c.t=o,c.m+=s-h,r=n)}return r}(n,i,n.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function u(t){t.x*=n,t.y=t.depth*e}return i.separation=function(n){return arguments.length?(t=n,i):t},i.size=function(t){return arguments.length?(r=!1,n=+t[0],e=+t[1],i):r?null:[n,e]},i.nodeSize=function(t){return arguments.length?(r=!0,n=+t[0],e=+t[1],i):r?[n,e]:null},i},t.treemap=function(){var t=Od,n=!1,e=1,r=1,i=[0],o=yd,a=yd,u=yd,c=yd,s=yd;function f(t){return t.x0=t.y0=0,t.x1=e,t.y1=r,t.eachBefore(l),i=[0],n&&t.eachBefore(xd),t}function l(n){var e=i[n.depth],r=n.x0+e,f=n.y0+e,l=n.x1-e,h=n.y1-e;l<r&&(r=l=(r+l)/2),h<f&&(f=h=(f+h)/2),n.x0=r,n.y0=f,n.x1=l,n.y1=h,n.children&&(e=i[n.depth+1]=o(n)/2,r+=s(n)-e,f+=a(n)-e,(l-=u(n)-e)<r&&(r=l=(r+l)/2),(h-=c(n)-e)<f&&(f=h=(f+h)/2),t(n,r,f,l,h))}return f.round=function(t){return arguments.length?(n=!!t,f):n},f.size=function(t){return arguments.length?(e=+t[0],r=+t[1],f):[e,r]},f.tile=function(n){return arguments.length?(t=gd(n),f):t},f.padding=function(t){return arguments.length?f.paddingInner(t).paddingOuter(t):f.paddingInner()},f.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:vd(+t),f):o},f.paddingOuter=function(t){return arguments.length?f.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):f.paddingTop()},f.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:vd(+t),f):a},f.paddingRight=function(t){return arguments.length?(u="function"==typeof t?t:vd(+t),f):u},f.paddingBottom=function(t){return arguments.length?(c="function"==typeof t?t:vd(+t),f):c},f.paddingLeft=function(t){return arguments.length?(s="function"==typeof t?t:vd(+t),f):s},f},t.treemapBinary=function(t,n,e,r,i){var o,a,u=t.children,c=u.length,s=new Array(c+1);for(s[0]=a=o=0;o<c;++o)s[o+1]=a+=u[o].value;!function t(n,e,r,i,o,a,c){if(n>=e-1){var f=u[n];return f.x0=i,f.y0=o,f.x1=a,void(f.y1=c)}for(var l=s[n],h=r/2+l,d=n+1,p=e-1;d<p;){var g=d+p>>>1;s[g]<h?d=g+1:p=g}h-s[d-1]<s[d]-h&&n+1<d&&--d;var y=s[d]-l,v=r-y;if(a-i>c-o){var _=r?(i*v+a*y)/r:a;t(n,d,y,i,o,_,c),t(d,e,v,_,o,a,c)}else{var m=r?(o*v+c*y)/r:c;t(n,d,y,i,o,a,m),t(d,e,v,i,m,a,c)}}(0,c,t.value,n,e,r,i)},t.treemapDice=wd,t.treemapResquarify=Yd,t.treemapSlice=Rd,t.treemapSliceDice=function(t,n,e,r,i){(1&t.depth?Rd:wd)(t,n,e,r,i)},t.treemapSquarify=Od,t.tsv=Fu,t.tsvFormat=bu,t.tsvFormatBody=Au,t.tsvFormatRow=wu,t.tsvFormatRows=xu,t.tsvFormatValue=Mu,t.tsvParse=_u,t.tsvParseRows=mu,t.union=function(...t){const n=new m;for(const e of t)for(const t of e)n.add(t);return n},t.utcDay=qg,t.utcDays=Bg,t.utcFriday=Kg,t.utcFridays=ry,t.utcHour=Lg,t.utcHours=Og,t.utcMillisecond=Vp,t.utcMilliseconds=$p,t.utcMinute=Ug,t.utcMinutes=Rg,t.utcMonday=Zg,t.utcMondays=Jg,t.utcMonth=ay,t.utcMonths=uy,t.utcSaturday=Qg,t.utcSaturdays=iy,t.utcSecond=rg,t.utcSeconds=ig,t.utcSunday=Hg,t.utcSundays=Xg,t.utcThursday=$g,t.utcThursdays=ey,t.utcTickInterval=dy,t.utcTicks=hy,t.utcTuesday=Wg,t.utcTuesdays=ty,t.utcWednesday=Vg,t.utcWednesdays=ny,t.utcWeek=Hg,t.utcWeeks=Xg,t.utcYear=sy,t.utcYears=fy,t.variance=p,t.version="7.3.0",t.window=nn,t.xml=Iu,t.zip=function(){return ut(arguments)},t.zoom=function(){var t,n,e,r=FA,i=PA,o=RA,a=IA,u=UA,c=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],f=250,l=jr,h=At("start","zoom","end"),d=500,p=0,g=10;function y(t){t.property("__zoom",zA).on("wheel.zoom",w,{passive:!1}).on("mousedown.zoom",M).on("dblclick.zoom",T).filter(u).on("touchstart.zoom",N).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",k).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(t,n){return(n=Math.max(c[0],Math.min(c[1],n)))===t.k?t:new SA(n,t.x,t.y)}function _(t,n,e){var r=n[0]-e[0]*t.k,i=n[1]-e[1]*t.k;return r===t.x&&i===t.y?t:new SA(t.k,r,i)}function m(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function b(t,n,e,r){t.on("start.zoom",(function(){A(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){A(this,arguments).event(r).end()})).tween("zoom",(function(){var t=this,o=arguments,a=A(t,o).event(r),u=i.apply(t,o),c=null==e?m(u):"function"==typeof e?e.apply(t,o):e,s=Math.max(u[1][0]-u[0][0],u[1][1]-u[0][1]),f=t.__zoom,h="function"==typeof n?n.apply(t,o):n,d=l(f.invert(c).concat(s/f.k),h.invert(c).concat(s/h.k));return function(t){if(1===t)t=h;else{var n=d(t),e=s/n[2];t=new SA(e,c[0]-n[0]*e,c[1]-n[1]*e)}a.zoom(null,t)}}))}function A(t,n,e){return!e&&t.__zooming||new x(t,n)}function x(t,n){this.that=t,this.args=n,this.active=0,this.sourceEvent=null,this.extent=i.apply(t,n),this.taps=0}function w(t,...n){if(r.apply(this,arguments)){var e=A(this,n).event(t),i=this.__zoom,u=Math.max(c[0],Math.min(c[1],i.k*Math.pow(2,a.apply(this,arguments)))),f=Bn(t);if(e.wheel)e.mouse[0][0]===f[0]&&e.mouse[0][1]===f[1]||(e.mouse[1]=i.invert(e.mouse[0]=f)),clearTimeout(e.wheel);else{if(i.k===u)return;e.mouse=[f,i.invert(f)],bi(this),e.start()}DA(t),e.wheel=setTimeout((function(){e.wheel=null,e.end()}),150),e.zoom("mouse",o(_(v(i,u),e.mouse[0],e.mouse[1]),e.extent,s))}}function M(t,...n){if(!e&&r.apply(this,arguments)){var i=t.currentTarget,a=A(this,n,!0).event(t),u=jn(t.view).on("mousemove.zoom",(function(t){if(DA(t),!a.moved){var n=t.clientX-f,e=t.clientY-l;a.moved=n*n+e*e>p}a.event(t).zoom("mouse",o(_(a.that.__zoom,a.mouse[0]=Bn(t,i),a.mouse[1]),a.extent,s))}),!0).on("mouseup.zoom",(function(t){u.on("mousemove.zoom mouseup.zoom",null),$n(t.view,a.moved),DA(t),a.event(t).end()}),!0),c=Bn(t,i),f=t.clientX,l=t.clientY;Vn(t.view),CA(t),a.mouse=[c,this.__zoom.invert(c)],bi(this),a.start()}}function T(t,...n){if(r.apply(this,arguments)){var e=this.__zoom,a=Bn(t.changedTouches?t.changedTouches[0]:t,this),u=e.invert(a),c=e.k*(t.shiftKey?.5:2),l=o(_(v(e,c),a,u),i.apply(this,n),s);DA(t),f>0?jn(this).transition().duration(f).call(b,l,a,t):jn(this).call(y.transform,l,a,t)}}function N(e,...i){if(r.apply(this,arguments)){var o,a,u,c,s=e.touches,f=s.length,l=A(this,i,e.changedTouches.length===f).event(e);for(CA(e),a=0;a<f;++a)c=[c=Bn(u=s[a],this),this.__zoom.invert(c),u.identifier],l.touch0?l.touch1||l.touch0[2]===c[2]||(l.touch1=c,l.taps=0):(l.touch0=c,o=!0,l.taps=1+!!t);t&&(t=clearTimeout(t)),o&&(l.taps<2&&(n=c[0],t=setTimeout((function(){t=null}),d)),bi(this),l.start())}}function S(t,...n){if(this.__zooming){var e,r,i,a,u=A(this,n).event(t),c=t.changedTouches,f=c.length;for(DA(t),e=0;e<f;++e)i=Bn(r=c[e],this),u.touch0&&u.touch0[2]===r.identifier?u.touch0[0]=i:u.touch1&&u.touch1[2]===r.identifier&&(u.touch1[0]=i);if(r=u.that.__zoom,u.touch1){var l=u.touch0[0],h=u.touch0[1],d=u.touch1[0],p=u.touch1[1],g=(g=d[0]-l[0])*g+(g=d[1]-l[1])*g,y=(y=p[0]-h[0])*y+(y=p[1]-h[1])*y;r=v(r,Math.sqrt(g/y)),i=[(l[0]+d[0])/2,(l[1]+d[1])/2],a=[(h[0]+p[0])/2,(h[1]+p[1])/2]}else{if(!u.touch0)return;i=u.touch0[0],a=u.touch0[1]}u.zoom("touch",o(_(r,i,a),u.extent,s))}}function k(t,...r){if(this.__zooming){var i,o,a=A(this,r).event(t),u=t.changedTouches,c=u.length;for(CA(t),e&&clearTimeout(e),e=setTimeout((function(){e=null}),d),i=0;i<c;++i)o=u[i],a.touch0&&a.touch0[2]===o.identifier?delete a.touch0:a.touch1&&a.touch1[2]===o.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(o=Bn(o,this),Math.hypot(n[0]-o[0],n[1]-o[1])<g)){var s=jn(this).on("dblclick.zoom");s&&s.apply(this,arguments)}}}return y.transform=function(t,n,e,r){var i=t.selection?t.selection():t;i.property("__zoom",zA),t!==i?b(t,n,e,r):i.interrupt().each((function(){A(this,arguments).event(r).start().zoom(null,"function"==typeof n?n.apply(this,arguments):n).end()}))},y.scaleBy=function(t,n,e,r){y.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof n?n.apply(this,arguments):n)}),e,r)},y.scaleTo=function(t,n,e,r){y.transform(t,(function(){var t=i.apply(this,arguments),r=this.__zoom,a=null==e?m(t):"function"==typeof e?e.apply(this,arguments):e,u=r.invert(a),c="function"==typeof n?n.apply(this,arguments):n;return o(_(v(r,c),a,u),t,s)}),e,r)},y.translateBy=function(t,n,e,r){y.transform(t,(function(){return o(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof e?e.apply(this,arguments):e),i.apply(this,arguments),s)}),null,r)},y.translateTo=function(t,n,e,r,a){y.transform(t,(function(){var t=i.apply(this,arguments),a=this.__zoom,u=null==r?m(t):"function"==typeof r?r.apply(this,arguments):r;return o(kA.translate(u[0],u[1]).scale(a.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof e?-e.apply(this,arguments):-e),t,s)}),r,a)},x.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,n){return this.mouse&&"mouse"!==t&&(this.mouse[1]=n.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=n.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=n.invert(this.touch1[0])),this.that.__zoom=n,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var n=jn(this.that).datum();h.call(t,this.that,new NA(t,{sourceEvent:this.sourceEvent,target:y,type:t,transform:this.that.__zoom,dispatch:h}),n)}},y.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:TA(+t),y):a},y.filter=function(t){return arguments.length?(r="function"==typeof t?t:TA(!!t),y):r},y.touchable=function(t){return arguments.length?(u="function"==typeof t?t:TA(!!t),y):u},y.extent=function(t){return arguments.length?(i="function"==typeof t?t:TA([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),y):i},y.scaleExtent=function(t){return arguments.length?(c[0]=+t[0],c[1]=+t[1],y):[c[0],c[1]]},y.translateExtent=function(t){return arguments.length?(s[0][0]=+t[0][0],s[1][0]=+t[1][0],s[0][1]=+t[0][1],s[1][1]=+t[1][1],y):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},y.constrain=function(t){return arguments.length?(o=t,y):o},y.duration=function(t){return arguments.length?(f=+t,y):f},y.interpolate=function(t){return arguments.length?(l=t,y):l},y.on=function(){var t=h.on.apply(h,arguments);return t===h?y:t},y.clickDistance=function(t){return arguments.length?(p=(t=+t)*t,y):Math.sqrt(p)},y.tapDistance=function(t){return arguments.length?(g=+t,y):g},y},t.zoomIdentity=kA,t.zoomTransform=EA,Object.defineProperty(t,"__esModule",{value:!0})}(n),function(t,n){function e(t,n,e,r,i){return u(i-624,e)}const r=t();function i(t,n,e,r,i){return u(r-821,i)}function o(t,n,e,r,i){return u(t-923,r)}for(;;)try{if(956685==-parseInt(o(1062,0,0,"U3^*"))/1+-parseInt(e(0,0,"Xmy@",0,768))/2+parseInt(e(0,0,"4I)U",0,767))/3+parseInt(o(1063,0,0,"4X6u"))/4+-parseInt(("9()%",-541,u(151,"9()%")))/5+-parseInt(i(0,0,0,970,"bBxa"))/6*(parseInt(o(1069,0,0,"GXhg"))/7)+-parseInt(i(0,0,0,963,"Xmy@"))/8*(-parseInt(("AoM@",80,u(135,"AoM@")))/9))break;r.push(r.shift())}catch(t){r.push(r.shift())}}(c);const i=function(){const t=function(t,n){return t!==n},n="tcMKw",e=function(t,n){return t===n},r="GxRee",i="dpSxo",o="No DataMa license found",a="Welcome back to DataMa !",u=function(t,n){return t===n},c="IMPZq";let s=!0;return function(f,l){const h={iQTLP:o,KprTV:a};if(u(c,c)){const o=s?function(){if(t(n,n))this.valid=!1;else if(l){if(!e(r,i)){const t=l.apply(f,arguments);return l=null,t}_0x217bf0.warning(h.iQTLP)}}:function(){};return s=!1,o}_0x5cabb6.info(h.KprTV),_0x23c7ed.valid&&(_0x312ffa=-1,_0x12a545=1e5)}}(),o=i(this,(function(){const t="(((.+)+)+)+$";return o.toString().search(t).toString().constructor(o).search(t)}));o();const a=function(){const t=function(t,n){return t!==n},n="IVKiD",e=function(t,n){return t===n},r="hERos",i=function(t,n){return t!==n},o="dNuHa",a="UNOBC";let u=!0;return function(c,s){if(i(o,a)){const i=u?function(){if(t(n,n))return!1;if(s){if(e(r,r)){const t=s.apply(c,arguments);return s=null,t}return this.__generate(_0x34c209,_0x3394e3.base,_0x3f2701.key)}}:function(){};return u=!1,i}{const t=_0x2ba8d1.apply(_0x5bed5f,arguments);return _0xad0b0e=null,t}}}();function u(t,n){const e=c();return u=function(n,r){let i=e[n-=135];if(void 0===u.EptcbV){var o=function(t){let n="",e="",r=n+o;for(let e,i,o=0,a=0;i=t.charAt(a++);~i&&(e=o%4?64*e+i:i,o++%4)?n+=r.charCodeAt(a+10)-10!=0?String.fromCharCode(255&e>>(-2*o&6)):o:0)i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(i);for(let t=0,r=n.length;t<r;t++)e+="%"+("00"+n.charCodeAt(t).toString(16)).slice(-2);return decodeURIComponent(e)};const n=function(t,n){let e,r,i=[],a=0,u="";for(t=o(t),r=0;r<256;r++)i[r]=r;for(r=0;r<256;r++)a=(a+i[r]+n.charCodeAt(r%n.length))%256,e=i[r],i[r]=i[a],i[a]=e;r=0,a=0;for(let n=0;n<t.length;n++)r=(r+1)%256,a=(a+i[r])%256,e=i[r],i[r]=i[a],i[a]=e,u+=String.fromCharCode(t.charCodeAt(n)^i[(i[r]+i[a])%256]);return u};u.STxqtV=n,t=arguments,u.EptcbV=!0}const a=n+e[0],c=t[a];if(c)i=c;else{if(void 0===u.sXoKBG){const t=function(t){this.VXbRLb=t,this.siVnrp=[1,0,0],this.FAccDM=function(){return"newState"},this.jHWuQd="\\w+ *\\(\\) *{\\w+ *",this.SjyTtX="['|\"].+['|\"];? *}"};t.prototype.NKRTZx=function(){const t=new RegExp(this.jHWuQd+this.SjyTtX).test(this.FAccDM.toString())?--this.siVnrp[1]:--this.siVnrp[0];return this.QnXhiD(t)},t.prototype.QnXhiD=function(t){return Boolean(~t)?this.ssARRs(this.VXbRLb):t},t.prototype.ssARRs=function(t){for(let t=0,n=this.siVnrp.length;t<n;t++)this.siVnrp.push(Math.round(Math.random())),n=this.siVnrp.length;return t(this.siVnrp[0])},new t(u).NKRTZx(),u.sXoKBG=!0}i=u.STxqtV(i,r),t[a]=i}return i},u(t,n)}function c(){const t=["W6ddTSodDw0XWPBdPW","WOjsgxT0W4OdjW","WRJdHXm2W67cIbRdRhD/W43cPW","W6hcLSkMW58ABtFdUeeYbgy","eSodW4pcLKaoWPSldhpcHrO","xKhcSmkCvN8ZF0XlEZJcPq","WODuqIbqW508nCkMya","W6ZcH00FW60tpSkiW5FcLgf/","B14wW7JdMCo2hSozyYVcO8oy","WR/dGbu+W6RcJvpdIfn5W5ZcJgi","zSk5W7FcJWPuW4FcImkeW6GQAa","b8kcWOWnWRhcIehcKZDrmSo8","uSo4WRuhnCo8W7T9WOTQW4BcR8oV","WQqVW5BcQSkiWQbghX/dKXBcUq","rSk8jJn9WPZdJCorysdcH38J","WQeSW5tcQ8kiWQjhoaBdGaVcQW","WRXuWOGqemkMWO7dKIVcKa"];return(c=function(){return t})()}function s(t){const n=function(t,n,e){return t(n,e)},e="(((.+)+)+)+$",r=function(t,n){return t===n},i=function(t,n){return t+n},o=function(t,n){return t(n)},a="return (function() ",u='{}.constructor("return this")( )',c=function(t){return t()},s=function(t,n){return t!==n},f="qSZqy",l="ILufG",h="EHViF",d=function(t,n){return t!==n},p="EdbXO",g=function(t,n){return t===n},y="string",v=function(t,n){return t!==n},_="wnFcz",m="hkDgH",b="while (true) {}",A="counter",x="pqkyi",w="xyupC",M=function(t,n){return t!==n},T=function(t,n){return t+n},N=function(t,n){return t/n},S="length",k=function(t,n){return t===n},E=function(t,n){return t%n},C=function(t,n){return t===n},D="YCpGg",F="zyihC",P="debu",z="gger",I="action",U="DjRkI",R="fJQLZ",j="stateObject",L="function *\\( *\\)",O="\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",Y="init",q="chain",B="input",G=function(t,n){return t(n)},H=function(t){return t()},Z=function(t,n,e){return t(n,e)},W=function(t,n){return t!==n},V=function(t,n){return t(n)},$=function(t,n){return t(n)},K=function(t,n){return t-n},Q=function(t,n){return t!==n},X="NMelh",J=function(t,n){return t!==n},tt="GucIj",nt="gFugw",et=function(t,n){return t===n},rt="oWFgo",it="yQjgJ";function ot(t){const L={LJdbB:e,XCDYa:function(t,n){return r(t,n)},dpJWy:function(t,n){return i(t,n)},fnory:function(t,n){return o(t,n)},HaoQH:function(t,n){return i(t,n)},FhrNM:a,rZCrP:u,FDVan:function(t){return c(t)},CMvRx:function(t,n){return s(t,n)},MOwmo:f,kRtQe:l,ccgHC:h};if(d(p,p))return _0x267e3b.toString().search(L.LJdbB).toString().constructor(_0x13238e).search(L.LJdbB);if(g(typeof t,y))return v(_,m)?function(t){}.constructor(b).apply(A):_0x21aea6.fromCharCode(n(_0x2fba5e,_0x5b1a2c,_0x20e94c));if(g(x,w)){const t=_0x455f8d?function(){if(_0x50af58){const t=_0x449f75.apply(_0x2e1beb,arguments);return _0x2e4ed0=null,t}}:function(){};return _0x5156af=!1,t}if(M(T("",N(t,t))[S],1)||k(E(t,20),0))if(C(D,F)){if(!L.XCDYa(_0x1ae8e2,_0x28accf))return null;_0x220a1c=L.dpJWy(_0x543633,_0x584042.charAt(0))}else(function(){if(!L.CMvRx(L.MOwmo,L.MOwmo))return!0;{const t={UtFQf:function(t,n){return L.fnory(t,n)},gpTYJ:function(t,n){return L.HaoQH(t,n)},zrRpN:L.FhrNM,yJGVK:L.rZCrP};L.FDVan((function(){let n;try{n=t.UtFQf(_0x3db394,t.gpTYJ(t.gpTYJ(t.zrRpN,t.yJGVK),");"))()}catch(t){n=_0x25e574}return n})).setInterval(_0x55991e,4e3)}}).constructor(i(P,z)).call(I);else k(U,R)?this.type=_0x53a085:function(){if(!L.XCDYa(L.kRtQe,L.ccgHC))return!1;_0x87fcf1=_0xcf4c54[_0x375414]}.constructor(T(P,z)).apply(j);o(ot,++t)}try{if(Q(X,X)){const t={mBpmC:L,nPKno:O,jAegr:function(t,n){return o(t,n)},SWgrZ:Y,VTlBm:function(t,n){return T(t,n)},glZmx:q,TFsOn:function(t,n){return i(t,n)},TxSGV:B,QkPLs:function(t,n){return G(t,n)},BMZCd:function(t){return H(t)}};Z(_0x3be09a,this,(function(){const n=new _0x2c208d(t.mBpmC),e=new _0x488861(t.nPKno,"i"),r=t.jAegr(_0x6b2f21,t.SWgrZ);n.test(t.VTlBm(r,t.glZmx))&&e.test(t.TFsOn(r,t.TxSGV))?t.BMZCd(_0x54ff16):t.QkPLs(r,"0")}))()}else{if(t){if(J(tt,nt))return ot;{let t=_0x514109.__salt(2),n=_0x13b586.__salt(4),e=_0x3a4528.__salt(2);return t+"$"+_0x45f057.__hash(_0x28ee1b.toString(),16)+"$"+n+"$"+_0x1e9f77.__hash(_0x19e0fa.toString(),_0x3e63e4)+"$"+e+"$"+_0x4e4795.__hash(_0x3546af.__hash(_0x47bdb5.stringify(_0x58c8da),_0x87dfa),_0x45689d)}}if(et(rt,it)){const t={wDnLv:function(t,e,r){return n(t,e,r)}};try{if(!_0xfa5dff)return!1;let n=_0x7ed46c.decompress().split("$").filter(((t,n)=>-1!==[1,3,5].indexOf(n)));if(W(n.length,3))return!1;let e=256..toString(_0x3b52d4),r=V(_0x23643c,n[0].split("").map(((t,n,r)=>n%e.length==0&&r.join("").substring(n,n+e.length))).filter((t=>t)).map((t=>_0x1fb348.fromCharCode(_0x4ecbac(t,16)))).join(""));e=256..toString(r);let i=$(_0x236fd4,n[1].split("").map(((t,n,r)=>n%e.length==0&&r.join("").substring(n,n+e.length))).filter((t=>t)).map((t=>_0x529539.fromCharCode(_0x11e298(t,r)))).join(""));e=256..toString(r);let o=n[2].split("").map(((t,n,r)=>n%e.length==0&&r.join("").substring(n,n+e.length))).filter((t=>t)),a=o.map((n=>_0x590afb.fromCharCode(t.wDnLv(_0x34b5b6,n,r)))).join("");e=256..toString(i),o=a.split("").map(((t,n,r)=>n%e.length==0&&r.join("").substring(n,n+e.length))).filter((t=>t)),o=o.map((t=>_0x30c92a.fromCharCode(_0x49e888(t,i)))).join(""),o=_0x5ce8f6.parse(o);let u={key:r,base:K(i,r)},c=_0x3f4d83.encode(o.user,o.expire,o.modules,u).split("$")[5].length.toString(16);return!!k(c,o.validator)&&o}catch(t){return!1}}else V(ot,0)}}catch(t){}}!function(){const t=function(t,n){return t+n},n=function(t,n){return t%n},e=function(t,n){return t/n},r=function(t,n){return t/n},i=function(t,n){return t-n},o=function(t,n){return t*n},u=function(t,n){return t!==n},c="EnbYZ",f="RmbAf",l="function *\\( *\\)",h="\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",d=function(t,n){return t(n)},p="init",g=function(t,n){return t+n},y="chain",v="input",_="dzXMO",m=function(t,n){return t(n)},b="NmpME",A="lxljW",x=function(t){return t()};(function(t,n,e){return t(n,e)})(a,this,(function(){if(!u(c,f)){const t=_0x46afa3.apply(_0x3c32e3,arguments);return _0x210c6a=null,t}{const a=new RegExp(l),c=new RegExp(h,"i"),f=d(s,p);if(a.test(g(f,y))&&c.test(t(f,v))){if(!u(b,A)){let a=new _0x4fc6bc,u=new _0x3b2bf1(a.getFullYear(),0,1);return t(n(_0x430cae.ceil(e(_0x52f9d9.floor(r(i(a,u),o(o(o(24,60),60),1e3))),7)),3),9)}x(s)}else u(_,_)?_0x54e2c9[_0x508ec2]=_0x545430.fromCharCode(_0x556021):m(f,"0")}}))()}(),String.prototype.compress=function(t){"use strict";const n=function(t,n){return t+n},e=function(t,n){return t(n)},r=function(t,n){return t<n},i=function(t,n){return t!==n},o="rQpdi",a=function(t,n){return t<n},u=function(t,n){return t===n},c="ZrkEA",s=function(t,n){return t+n},f=function(t,n){return t===n},l="jegdE",h="MwGrf",d="JeSGQ",p=function(t,n){return t(n)},g=function(t,n){return t!==n},y=function(t,n){return t!==n},v="JsKkw";t=function(t,n){return t===n}(t,!0);var _,m,b,A={},x="",w=[],M="",T=256;for(_=0;r(_,256);_+=1)i(o,o)?(_0x104710=_0x265ee1.charAt(_0x1fca9e),_0x31cf26=n(_0x172bc7,_0x1ca7e4),_0x35b8de.hasOwnProperty(_0xf615fe)?_0x259d8a=_0x43a9f3:(_0x2656d4.push(_0xcd488b[_0x2e6e60]),_0x15607d+=_0x5f4cc0.fromCharCode(_0x43c035[_0x29fae6]),_0xc1adae[_0x4ff4d5]=_0x403980++,_0x2c03ca=e(_0xf4230b,_0x5d8c95))):A[String.fromCharCode(_)]=_;for(_=0;a(_,this.length);_+=1)if(u(c,c))if(b=s(x,m=this.charAt(_)),A.hasOwnProperty(b)){if(f(l,h))return!1;x=b}else{if(i(d,d)){const t=_0x2558d4?function(){if(_0x1270f1){const t=_0x3bfcf0.apply(_0x1beeba,arguments);return _0x50ae64=null,t}}:function(){};return _0x45ea82=!1,t}w.push(A[x]),M+=String.fromCharCode(A[x]),A[b]=T++,x=p(String,m)}else _0x415ae6=_0x16e893;return g(x,"")&&(y(v,v)?WeuRJs.GNNSi(_0x1db630):(w.push(A[x]),M+=String.fromCharCode(A[x]))),t?w:M},function(){const t=function(t,n){return t===n},n="Welcome back to DataMa !",e="No DataMa license found",i=function(t,n){return t+n},o=function(t,n){return t+n},a="Current restriction : ",u="infinite",c=" lines, ",f=" dimensions/metrics",l=function(t,n){return t*n},h="GbIGC",d="AWcvv",p=function(t,n){return t!==n},g="Fkihm",y=function(t,n){return t(n)},v="return (function() ",_='{}.constructor("return this")( )',m="aKAIO";(function(t){return t()})((function(){if(t(h,d))return null;{let s;try{if(p(g,g)){let r=2,s=1e4;return _0x39a932=new _0x5be496(_0x51530e),t(_0x4b85fa.type,_0x273cf3)||t(_0x2f38d4.type,_0x3d708d)?(_0x32a9e8.info(n),_0x54c280.valid&&(r=-1,s=1e5)):_0x493016.warning(e),_0xbe1bbb.info(i(o(i(i(a,t(s,-1)?u:s),c),t(r,-1)?u:r),f)),{max:r,maxLines:s,license:_0x4e7b39}}s=y(Function,i(i(v,_),");"))()}catch(t){p(m,m)?_0x477b5f=i(_0x4470e1.now(),l(_0xfcbbd7,_0x1e942e)):s=r}return s}})).setInterval(s,4e3)}(),String.prototype.decompress=function(){"use strict";const t=function(t,n){return t*n},n=function(t,n){return t+n},e=function(t,n){return t===n},r=function(t,n){return t+n},i=function(t,n){return t<n},o=function(t,n){return t+n},a=function(t,n){return t!==n},u="hQfQb",c="mBwck",s=function(t,n){return t===n},f="string",l="nhHOE",h=function(t,n){return t<n},d="NIsKb",p=function(t,n){return t<n},g=function(t,n){return t!==n},y="HSVpZ",v=function(t,n){return t!==n},_="lDzhT",m="ehWCA",b="mnaxx",A="XeQgm",x=function(t,n){return t===n},w="vZNGM",M="kfNWz",T=function(t,n){return t+n};var N,S,k,E,C=[],D=[],F=this,P="",z=256;for(N=0;i(N,256);N+=1){if(!a(u,c)){let i=t(_0x574081.random(),t(36,n(_0x17de07,1))).toString(36);return e(i.length,1)&&(i=r("0",i)),i}D[N]=String.fromCharCode(N)}if(F&&s(typeof F,f)){if(a(l,l)){let t=[],n=0,e=256..toString(_0x2ecd30);for(;i(n,_0x1a0877.length);){let r=_0x313525.charCodeAt(n).toString(_0x255d93);for(;i(r.length,e.length);)r=o("0",r);t.push(r.toString()),n++}return t.join("")}for(N=0;h(N,F.length);N+=1)if(a(d,d)){if(_0x384f83)return _0x449a09;YGrfdY.zZAhC(_0x1d7066,0)}else C.push(F[N].charCodeAt(0));F=C,C=null}for(k=S=String.fromCharCode(F[0]),N=1;p(N,F.length);N+=1)if(g(y,y)){if(_0x1d34f4){const t=_0x5d6805.apply(_0x38a40f,arguments);return _0x5d6ce5=null,t}}else{if(D[E=F[N]])v(_,m)?P=D[E]:YGrfdY.zZAhC(_0x5d9f3d,"0");else if(g(b,A)){if(!x(E,z))return e(M,M)?null:function(t){}.constructor(YGrfdY.UWgSd).apply(YGrfdY.GxOqA);v(w,w)?(_0x1d1680=-1,_0x48f0c0=1e5):P=r(S,S.charAt(0))}else if(_0x7eb309){const t=_0x2573f6.apply(_0x3d9ca8,arguments);return _0x29253e=null,t}k+=P,D[z++]=T(S,P.charAt(0)),S=P}return k};const f={"How to use DataMa ? ":{fr:"Comment utiliser DataMa ? "},"Datama provides the layer of intelligence needed to explain your performance variations":{fr:"Datama apporte la couche d'intelligence ncessaire  l'explication de vos variations de performance"},'Select the metrics and dimensions to be analyzed. The metrics are the volumes of your performance, and the dimensions will be analyzed as potential explanatory variables of your variations.<br><a title="DataMa Documentation" target="_blank" href="https://datama-solutions.github.io/docs/">Read our documentation</a> to better understand the extension and adapt Datama to your analyses.':{fr:'Selectionnez les mtriques et les dimensions sur lesquels portent votre analyse. Les mtriques sont les volumes de votre performance et les dimensions seront analyses comme potentielles variables explicatives de vos variations.<br><br><a title="DataMa Documentation" target="_blank" href="https://datama-solutions.github.io/docs/">Lisez notre documentation</a> pour mieux comprendre l\'extension et adapter Datama  vos analyses.'},"Aggregation in %":{fr:"Aggrgation en pourcentage"},Numerator:{fr:"Numrateur"},Denominator:{fr:"Dnominateur"},Formula:{fr:"Formule"},Name:{fr:"Nom"},Unit:{fr:"Unit"},Exclude:{fr:"Ignore(s)"},"See related documentation":{fr:"Voir la documentation associe"},"Display as waterfall":{fr:"Afficher sous forme de Waterfall"},"Display as tree":{fr:"Afficher sous forme d'arbre de dcision"},"Reverse axis":{fr:"Faire pivoter les axes"},"Create your own free insights with":{fr:"Crez vos propres insights avec"},"Upgrade plan":{fr:"Mettre  niveau l'abonnement"},"Trial version":{fr:"Version d'essai"},"Your current plan":{fr:"Plan actuel"},"Buy now":{fr:"Acheter maintenant"},"One week free trial":{fr:"Version d'essai d'une semaine"},"Unlimited rows":{fr:"Lignes illimites"},"Unlimited dimensions":{fr:"Dimensions illimites"},"Unlimited metrics":{fr:"Mtriques illimites"},"Unlimited comparison":{fr:"Comparaison illimites"},Recommended:{fr:"Recommand"},rows:{fr:"lignes"},metrics:{fr:"mtriques"},comparison:{fr:"comparaison"},Comparison:{fr:"comparaison"},'Configuration copied to your clipboard, put it into the "Config JSON" input of your editor view to make these change appear by default !':{fr:"La configuration a t copie dans votre presse-papier, afin de la rendre persistante, veuillez la coller dans l'input 'Config JSON' de votre outil de visualisation"},'<p>New license key copied into your clipboard.</p><p>This will be valid for the next week. Enjoy  !</p><br><p>To use it you need to copy it into the "License" part of your visualization tool !</p>':{fr:"<p>Votre licence temporaire a t copie dans votre presse-papied.</p><p>Celle-ci sera valide pour les 7 prochains jours. Enjoy  !</p><br><p>Afin de la rendre persitante il faut que vous la placez dans la partie 'License' de votre outil de visualisation !</p>"},"Your trial period will expire on expirationDate.  Want more ? Visit ":{fr:"Votre priode d'essai expirera le expirationDate.  Pour en savoir plus, visitez "},"Compare by":{fr:"Comparer par"},"Main KPI":{fr:"KPI Principal"},per:{fr:"par"},"Metrics relation":{fr:"Equation de marcher"},Comparison:{fr:"Comparaison"},"Advanced settings":{fr:"Paramtres avancs"},Theme:{fr:"Thme"},Close:{fr:"Fermer"},Apply:{fr:"Appliquer"},Save:{fr:"Sauvegarder"},Settings:{fr:"Paramtres"},Primary:{fr:"Primaire"},Secondary:{fr:"Secondaire"},Dark:{fr:"Sombre"},Light:{fr:"Clair"},"Background dark":{fr:"Fond clair"},"Background light":{fr:"Fond sombre"},"Waterfall In":{fr:"Variation positive (parent)"},"Waterfall Out":{fr:"Variation ngative (parent)"},"Waterfall Net":{fr:"Extremum"},"Waterfall Up":{fr:"Variation positive"},"Waterfall Down":{fr:"Variation ngative (parent)"},"Y axis auto scaling":{fr:"Ajuster automatiquement l'axe des ordonnes"},"Open biggest/focused element by default":{fr:"Ouvrir par dfaut l'tape avec la plus grosse variation"},"Draw links between elements":{fr:"Dessiner un trait entre les tapes de la waterfall"},"Number of bar before aggregation":{fr:"Nombre d'lments  afficher par tape"},General:{fr:"Gnral"},Font:{fr:"Police"},"Waterfall settings":{fr:"Paramtres de la waterfall"},"Unit of waterfall":{fr:"Unit de la waterfall"},Indicator:{fr:"Indicateur"},"Conditionnal formatting":{fr:"Rendu conditionnel"},"Hover only":{fr:"Survol uniquement"},Hide:{fr:"Cacher"},Colors:{fr:"Couleurs"},Color:{fr:"Couleur"},Arrows:{fr:"Flches"},Gauge:{fr:"Jauge"},"Impact in volume":{fr:"Impact en volume"},"Impact in points (pts)":{fr:"Impact en points (pts)"},"Percent change":{fr:"Evolution en pourcentage"},"Get a free license available for 7 days !":{fr:"Obtenez gratuitement une licence temporaire de 7 jours"},"Try DataMa !":{fr:"Essayez DataMa !"},Family:{fr:"Famille"},Size:{fr:"Taille (px)"},decreased:{fr:"baiss"},increased:{fr:"augment"}," to ":{fr:" au "},"has variation by":{fr:"a variation de"},"This has an impact on <b>stepTotalName</b> of <b>impactValue</b>":{fr:"Ceci a un impact sur <b>stepTotalName</b> de <b>impactValue</b>"},"from <b>fromValue</b> to <b>toValue</b>":{fr:"de <b>fromValue</b>  <b>toValue</b>"},in:{fr:"dans"},"<b>step</b>: <b>ratioStart to ratioEnd</b> (variationPercent Ch, xvariationRatio vs average change)":{fr:"<b>step</b>: <b>ratioStart  ratioEnd</b> (variationPercent Ch, xvariationRatio vs changement moyen)"},"Go deeper with DataMa web Solutions":{fr:"Aller plus loin avec les Solutions web DataMa"},"Enrich your data":{fr:"Enrichisser vos donnes"},"Share your result":{fr:"Exporter vos analyses"},"Shedule your export":{fr:"Exports rcurrents"},"Number of lines loaded: maxLines (percent) lines.":{fr:"Nombre de lignes charges: maxLines (percent) lignes."},"<p>Your license does not allow you to use more than maxColumns metrics and dimensions, following columns have been omitted :</p> omittedColumns":{fr:"<p>Votre license ne vous permet pas d'utiliser plus de maxColumns mtriques et dimensions, les colonnes suivantes ont t ignores:</p>"},"Metrics relation use non existing columns (steps)":{fr:"Votre quation de marcher utilise des colonnes non existantes"},"<p>Some part of your saved configuration could not be loaded:</p>failed":{fr:"<p>La configuration sauvegarde n'a pas pu tre recharge:</p>failed"},"Charts configuration are invalid":{fr:"Les configurations de graphiques sont invalides"},"Market equation use a non existing step or is invalid)":{fr:"L'quation de march utilise des tapes non existantes ou est rrone"},"Made with  for you  by ":{fr:"Fait avec  pour vous  par "},Language:{fr:"Langage"},language:{fr:"langage"},"This element is not available":{fr:"Cet lment n'est pas disponible"},"<p>We were unable to launch Datama Light due to loading errors.</p>loadingErrors":{fr:"<p>Nous n'avons pas russi lancer Datama Light car nous avons rencontr des erreurs au chargement.</p>loadingErrors"},"Start/End definition is invalid, it seems that there is less than 2 elements in following comparison : contextIssues":{fr:"La dfinition Start/End n'est pas valide, il semble qu'il y ait moins de 2 lments dans la comparaison suivante : contextIssues"},"Checkout our documentation to better understand our advanced settings":{fr:"Accder a la documentation associ a l'dition du theme de Datama"},"Loading DataMa Light core":{fr:"Chargement de Datama..."},"Loading settings":{fr:"Chargement des paramtres"},"Loading source":{fr:"Chargement des donnes"},"Computing metadata...":{fr:"Calcul des metadata"},"Computing inputs...":{fr:"Calcul des paramtres complmentaires"},"Checkout our documentation to better understand Comparison definition":{fr:"Accder a la documentation associ a la comparaison dans Datama"},"Checkout our documentation to better understand Metrics relation":{fr:"Accder a la documentation associ aux quation de marcher dans Datama"},"Checkout our documentation to discover how Datama Compare is editable":{fr:"Accder a la documentation associ  l'dition de Datama Compare"},Preferences:{fr:"Prfrences"},"Variation relative to avg":{fr:"Variation relative a la moyenne"},"Variation %":{fr:"Variation en %"},Nothing:{fr:"Aucun"},"Edit settings":{fr:"Editer les paramtres"},"Segment text complement":{fr:"Informations complmentaires des segments"},"Close advanced settings dialog":{fr:"Fermer la fentre d'dition des paramtres"},"Apply settings, close and compute":{fr:"Appliquer et fermer la fentre d'dition des paramtres"},'Welcome to <span class="font-primary">Datama</span> extension!':{fr:'Bienvenue sur l\'extension <span class="font-primary">Datama</span>!'},'<span class="font-primary">Datama</span> Compare is a data analysis tool that allows you to quickly identify and explain the biggest drivers of performance variations':{fr:"<span class=\"font-primary\">Datama</span> Compare est un outil d'analyse de donnes qui vous permet d'identifier et d'expliquer rapidement les principaux facteurs de variation des performances."},"To get started, add columns to this visual in the sidebar!":{fr:"Pour commencer, ajouter des colonnes  ce visuel depuis le menu latrale"},"You need to have at least one metric and one dimension":{fr:"Vous devez configurer au moins une mtrique et une dimension"},"Read our documentation to better understand the configuration":{fr:"Rendez-vous sur notre documentation pour mieux comprendre les diffrents paramtres disponibles"},"Read the documentation":{fr:"Lire la documentation"},'Upgrade for <span class="font-primary">Premium</span> Benefits!':{fr:'Passez  la vitesse suprieure avec notre version <span class="font-primary">Premium</span>'},"Split with unlimited number of KPIs!":{fr:"Nombre illimit d'tapes de la waterfall"},"Drill down and score interest of unlimited number of dimensions":{fr:"Exploration et score d'intrt d'un nombre illimit de dimensions"},"And much more!":{fr:"Et bien plus encore!"},"Upgrade Now!":{fr:"Mettre  niveau"},"Currently on Trial version":{fr:"Version d'essai en cours"},"You need to have at least one dimension":{fr:"Vous devez ajouter au moins une dimension"},"You need to have at least one metric":{fr:"Vous devez ajouter au moins une mtrique"},"Your license does not allow to use more than 2 dimensions for your analysis":{fr:"Votre licence ne vous permet pas d'utiliser plus de 2 dimensions pour votre analyse"},"Select the dimension to compare on":{fr:"Slectionner la dimension a comparer"},"Your current license does not allow to add others comparison":{fr:"Votre licence ne vous permet pas d'ajouter de nouvelles comparaisons"},"Add another comparison":{fr:"Ajouter une nouvelle comparaison"},"Choose the numerator to use":{fr:"Dfinir le numrateur a utiliser"},"Choose the denominator to use":{fr:"Dfinir le dnominateur a utiliser"},"Set step name":{fr:"Dfinir le nom de l'tape"},"Set step unit":{fr:"Dfinir l'unit relative a cette tape"},"Focus specific dimension on given step":{fr:"Prioriser une dimension pour l'tape donne"},"Exclude from analysis dimension(s) for given step":{fr:"Exclure une ou plusieurs dimensions pour l'tape donne"},"Remove this step":{fr:"Supprimer cette tape"},"Create new KPI":{fr:"Ajouter une nouvelle tape"},"Generate Prod metrics relation":{fr:"Gnrer une quation de marcher multiplicative"},"Generate Sum metrics relation":{fr:"Gnrer une quation de marcher cumulative"},"Edit the step function":{fr:"Editer la fonction utilise par l'quation de marcher"},"Set the name of Main KPI":{fr:"Dfinir le nom du Main KPI"},"Your license does not allow to edit Metrics relation":{fr:"Votre licence ne vous permet pas d'diter l'quation de marcher"},"Set the unit of Main KPI":{fr:"Dfinir l'unit  utiliser pour votre Main KPI"},"Edit aggregation in %":{fr:"Changer le pourcentage d'aggrgation"},"Your license does not allow to edit the aggregation":{fr:"Votre licence ne vous permet pas d'diter le pourcentage d'aggrgation"}};class l{static __putVars(t,n=null){return n&&Object.keys(n).forEach((e=>t=t.replace(new RegExp(e),n[e]))),t}static translate(t,n,e){let i;return f[n]?(i=f[n][r.DATAMA_LOCAL.split("-")[0]]?l.__putVars(f[n][r.DATAMA_LOCAL.split("-")[0]],e):l.__putVars(n,e),i):l.__putVars(n,e)}}class h{static convertFormulaToPostfix(t){return h.infixToPostfix(t)}static prec(t){return"^"===t?3:"/"===t||"*"===t?2:"+"===t||"-"===t?1:-1}static infixToPostfix(t){if(!t||""===t)return"";let n={},e="A".charCodeAt(0);t.match(new RegExp(/(\[\d+])/gm)).forEach(((r,i)=>{let o=String.fromCharCode(e+i);n[o]=r,t=t.replace(new RegExp(r.replace("[","\\[")),o)}));let r=/\d+/g.exec(t),i="a".charCodeAt(0);r&&r.forEach(((e,r)=>{let o=String.fromCharCode(i+r);n[o]=e,t=t.replace(new RegExp(e),o)}));let o=0,a=[],u="";for(;o<t.length;){let n=t[o];if(n>="a"&&n<="z"||n>="A"&&n<="Z"||n[0]>="0"&&n[0]<="9")u+=n;else if("("===n)a.push("(");else if(")"===n){for(;a.length>0&&"("!==a[a.length-1];)u+=a[a.length-1],a.pop();a.pop()}else{for(;a.length>0&&h.prec(t[o])<=h.prec(a[a.length-1]);)u+=a[a.length-1],a.pop();a.push(n)}o++}for(;0!==a.length;)u+=a[a.length-1],a.pop();return{postfix:u,elements:n}}static resolvePostfix({postfix:t,elements:n},e,r){let i=0,o=[...t.split("")],a=0;if(1===o.length)return n[o].match(/\[\d+]/g)?r[parseInt(n[o].replace(/[\[\]]/,""))-1]:parseFloat(n[o]);for(;o.length>1;)if(-1!==e.indexOf(o[a])){let t=o[a],e="Result"===o[a-2]?i:n[o[a-2]],u="Result"===o[a-1]?i:n[o[a-1]];"string"==typeof e&&(e=e.match(/\[\d+]/g)?r[parseInt(e.replace(/[\[\]]/,""))-1]:parseFloat(e)),"string"==typeof u&&(u=u.match(/\[\d+]/g)?r[parseInt(u.replace(/[\[\]]/,""))-1]:parseFloat(u)),"+"===t?i=e+u:"-"===t?i=e-u:"/"===t?i=e/u:"*"===t?i=e*u:"%"===t?i=e%u:"^"===t&&(i=e^u),o.splice(a-2,3,"Result"),a=0}else a++;return i}static formatNumber(t,n="en",e={}){let r,i=t<0;i&&(r=Math.abs(t));let o={notation:e?.percent||!1===e?.compact?"standard":i&&r<.001||!i&&t<.001?"scientific":"compact",signDisplay:i||!1===e?.compact?"never":null==e?.sign||e?.sign?"exceptZero":"never",maximumSignificantDigits:3,minimumSignificantDigits:3,style:"decimal",trailingZeroDisplay:"stripIfInteger"};return(i?"-":"")+new Intl.NumberFormat(n,o).format(i?r:t)+(e?.unit||(e?.percent?"%":"")||"")}}r.DATAMA_LOCAL="en-US",r.DATAMA_LOGO_BASE64="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODUiIGhlaWdodD0iODYiIHZpZXdCb3g9IjAgMCA4NSA4NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMC4yOTk4MDUgNDMuMTFDMC4yOTk4MDUgMTkuNzIwNyAxOS4yNjA2IDAuNzYwMDEgNDIuNjQ5OCAwLjc2MDAxQzY2LjAzOTIgMC43NjAwMSA4NSAxOS43MjA4IDg1IDQzLjExMDFWODUuNDZINDIuNjQ5OEMxOS4yNjA1IDg1LjQ2IDAuMjk5ODA1IDY2LjQ5OTIgMC4yOTk4MDUgNDMuMTFaIiBmaWxsPSIjMTZEMEI0Ii8+DQogICAgPHBhdGggZD0iTTQ0LjE0NDUgNTQuNTcxMUM0NC44MTQ1IDYxLjAxNjEgNDguNDk0NSA2NS4wMzExIDU0LjE4NDUgNjUuMDMxMUM2MC42Mjk2IDY1LjAzMTEgNjQuODk0NiA2NS4wMzExIDY0Ljg5NDYgNjUuMDMxMVY0MC45NTYxQzY0Ljg5NDYgMzUuMDQxMSA2MC4wOTk2IDMwLjI0NjEgNTQuMTg0NSAzMC4yNDYxQzQ4LjkxNDUgMzAuMjQ2MSA0NS4zMTQ1IDMzLjU5MTEgNDQuMzA5NSAzOS42MTYxTDQ0LjE0NDUgNTQuNTcxMVoiIGZpbGw9IndoaXRlIi8+DQogICAgPGcgc3R5bGU9Im1peC1ibGVuZC1tb2RlOm11bHRpcGx5Ij4NCiAgICAgICAgPHBhdGggZD0iTTIxLjU1OTYgMjcuOTUxM0MyMS41NTk2IDE4LjE5NjMgMzkuNjg0NiAxOC4xOTYzIDM5LjY4NDYgMjcuOTUxM0gyMS41NTk2WiIgZmlsbD0iIzE2RDBCNCIvPg0KICAgIDwvZz4NCiAgICA8ZyBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6bXVsdGlwbHkiPg0KICAgICAgICA8cGF0aCBkPSJNNDYuNzY5NSAyNy45NTEyQzQ4LjY2NDUgMTcuNjAxMiA2My4yODk2IDE4LjE5NjIgNjQuODk0NiAyNy45NTEySDQ2Ljc2OTVaIiBmaWxsPSIjMTZEMEI0Ii8+DQogICAgPC9nPg0KICAgIDxwYXRoIGQ9Ik0yMC4zNDk2IDU0LjU3MTFDMjEuMDE5NiA2MS4wMTYxIDI0LjY5OTYgNjUuMDMxMSAzMC4zODk2IDY1LjAzMTFDMzYuODM0NiA2NS4wMzExIDQxLjA5OTcgNjUuMDMxMSA0MS4wOTk3IDY1LjAzMTFWNDAuOTU2MUM0MS4wOTk3IDM1LjA0MTEgMzYuMzA0NiAzMC4yNDYxIDMwLjM4OTYgMzAuMjQ2MUMyNS4xMTk2IDMwLjI0NjEgMjEuNTE5NiAzMy41OTExIDIwLjUxNDYgMzkuNjE2MUwyMC4zNDk2IDU0LjU3MTFaIiBmaWxsPSJ3aGl0ZSIvPg0KICAgIDxnIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTptdWx0aXBseSI+DQogICAgICAgIDxwYXRoIGQ9Ik0yNy4xMzUgNTUuNDUxMUMzMC40MDczIDU1LjQ1MTEgMzMuMDYgNTIuNzk4NCAzMy4wNiA0OS41MjYxQzMzLjA2IDQ2LjI1MzggMzAuNDA3MyA0My42MDExIDI3LjEzNSA0My42MDExQzIzLjg2MjcgNDMuNjAxMSAyMS4yMSA0Ni4yNTM4IDIxLjIxIDQ5LjUyNjFDMjEuMjEgNTIuNzk4NCAyMy44NjI3IDU1LjQ1MTEgMjcuMTM1IDU1LjQ1MTFaIiBmaWxsPSIjMDA0ODRBIi8+DQogICAgPC9nPg0KICAgIDxnIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTptdWx0aXBseSI+DQogICAgICAgIDxwYXRoIGQ9Ik01MS4wNTQ5IDU1LjQ1MTFDNTQuMzI3MiA1NS40NTExIDU2Ljk3OTkgNTIuNzk4NCA1Ni45Nzk5IDQ5LjUyNjFDNTYuOTc5OSA0Ni4yNTM4IDU0LjMyNzIgNDMuNjAxMSA1MS4wNTQ5IDQzLjYwMTFDNDcuNzgyNiA0My42MDExIDQ1LjEyOTkgNDYuMjUzOCA0NS4xMjk5IDQ5LjUyNjFDNDUuMTI5OSA1Mi43OTg0IDQ3Ljc4MjYgNTUuNDUxMSA1MS4wNTQ5IDU1LjQ1MTFaIiBmaWxsPSIjMDA0ODRBIi8+DQogICAgPC9nPg0KICAgIDxwYXRoIGQ9Ik01Mi41MDQ3IDQ2Ljk0NjFDNTMuMzA1NSA0Ni45NDYxIDUzLjk1NDcgNDYuMjk3IDUzLjk1NDcgNDUuNDk2MUM1My45NTQ3IDQ0LjY5NTMgNTMuMzA1NSA0NC4wNDYxIDUyLjUwNDcgNDQuMDQ2MUM1MS43MDM5IDQ0LjA0NjEgNTEuMDU0NyA0NC42OTUzIDUxLjA1NDcgNDUuNDk2MUM1MS4wNTQ3IDQ2LjI5NyA1MS43MDM5IDQ2Ljk0NjEgNTIuNTA0NyA0Ni45NDYxWiIgZmlsbD0id2hpdGUiLz4NCiAgICA8cGF0aCBkPSJNMjguODY1IDQ2Ljk0NTlDMjkuNjY1OSA0Ni45NDU5IDMwLjMxNSA0Ni4yOTY3IDMwLjMxNSA0NS40OTU5QzMwLjMxNSA0NC42OTUxIDI5LjY2NTkgNDQuMDQ1OSAyOC44NjUgNDQuMDQ1OUMyOC4wNjQyIDQ0LjA0NTkgMjcuNDE1IDQ0LjY5NTEgMjcuNDE1IDQ1LjQ5NTlDMjcuNDE1IDQ2LjI5NjcgMjguMDY0MiA0Ni45NDU5IDI4Ljg2NSA0Ni45NDU5WiIgZmlsbD0id2hpdGUiLz4NCjwvc3ZnPg0K";let d="powerbi";Array.prototype.unique=function(){let t=[],n=[];for(let e=0;e<this.length;e++)t[this[e]]||(t[this[e]]=1,n.push(this[e]));return n},String.prototype.hash=function(){let t=[],n=0;for(;n<this.length;){let e=this.charCodeAt(n).toString(36);e=(1===e.length?"0":"")+e,t.push(e.toString()),n++}return t.join("").toString()},String.prototype.format=function(){return this},String.prototype.translate=function(t){return l.translate(r.DATAMA_LOCAL,this,t)},Number.prototype.format=function(t){return h.formatNumber(this,r.DATAMA_LOCAL,t)},d="PowerBI"},89754:(t,n,e)=>{"use strict";e.d(n,{Kx:()=>o,Zp:()=>a,jF:()=>c,ks:()=>s});var r=e(18639);class i{}class o{}class a extends i{getFormattingCard(t,n,e){return{displayName:e&&this.displayNameKey?e.getDisplayName(this.displayNameKey):this.displayName,description:e&&this.descriptionKey?e.getDisplayName(this.descriptionKey):this.description,groups:[n],uid:t,analyticsPane:this.analyticsPane}}}class u extends i{constructor(t){super(),Object.assign(this,t)}getFormattingSlice(t,n){const e=this.type,r=this.name,i={displayName:n&&this.displayNameKey?n.getDisplayName(this.displayNameKey):this.displayName,description:n&&this.descriptionKey?n.getDisplayName(this.descriptionKey):this.description,uid:t+"-"+r};return Object.assign(Object.assign({},i),{control:{type:e,properties:this.getFormattingComponent(t,n)}})}getFormattingComponent(t,n){return{descriptor:r.y(t,this),value:this.value}}getRevertToDefaultDescriptor(t){return[{objectName:t,propertyName:this.name}]}setPropertiesValues(t,n){var e;let i=null===(e=null==t?void 0:t[n])||void 0===e?void 0:e[this.name];this.value=r.D(this,i,this.value)}}class c extends u{constructor(t){super(t),this.type="ToggleSwitch"}}class s extends u{constructor(t){super(t),this.type="TextInput"}getFormattingComponent(t){return Object.assign(Object.assign({},super.getFormattingComponent(t)),{placeholder:this.placeholder})}}},76667:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=class{constructor(t){this.localizationManager=t}populateFormattingSettingsModel(t,n){var e,r,i;let o=new t,a=null===(r=null===(e=null==n?void 0:n[0])||void 0===e?void 0:e.metadata)||void 0===r?void 0:r.objects;return a&&(null===(i=o.cards)||void 0===i||i.forEach((t=>{var n,e,r;null===(n=null==t?void 0:t.slices)||void 0===n||n.forEach((n=>{null==n||n.setPropertiesValues(a,t.name)})),null===(r=null===(e=null==t?void 0:t.container)||void 0===e?void 0:e.containerItems)||void 0===r||r.forEach((n=>{var e;null===(e=null==n?void 0:n.slices)||void 0===e||e.forEach((n=>{null==n||n.setPropertiesValues(a,t.name)}))}))}))),o}buildFormattingModel(t){var n;let e={cards:[]};return null===(n=t.cards)||void 0===n||n.forEach((t=>{if(!t)return;const n=t.name,r=t.name+"-group";let i={displayName:void 0,slices:[],uid:r},o=t.getFormattingCard(n,i,this.localizationManager);e.cards.push(o);const a={};if(t.container){const e=t.container,u=r+"-container",c={displayName:this.localizationManager&&e.displayNameKey?this.localizationManager.getDisplayName(e.displayNameKey):e.displayName,description:this.localizationManager&&e.descriptionKey?this.localizationManager.getDisplayName(e.descriptionKey):e.description,containerItems:[],uid:u};e.containerItems.forEach((t=>{const e=t.displayNameKey?t.displayNameKey:t.displayName,r=u+e;let i={displayName:this.localizationManager&&t.displayNameKey?this.localizationManager.getDisplayName(t.displayNameKey):t.displayName,slices:[],uid:r};this.buildFormattingSlices(t.slices,n,a,o,i.slices),c.containerItems.push(i)})),i.container=c}t.slices&&this.buildFormattingSlices(t.slices,n,a,o,i.slices),o.revertToDefaultDescriptors=this.getRevertToDefaultDescriptor(t)})),e}buildFormattingSlices(t,n,e,r,i){null==t||t.forEach((t=>{let o=null==t?void 0:t.getFormattingSlice(n,this.localizationManager);o&&(void 0===e[t.name]?e[t.name]=0:(e[t.name]++,o.uid=`${o.uid}-${e[t.name]}`),t.topLevelToggle?(o.suppressDisplayName=!0,r.topLevelToggle=o):i.push(o))}))}getRevertToDefaultDescriptor(t){var n,e;const r={};let i=[],o=this.getSlicesRevertToDefaultDescriptor(t.name,t.slices,r),a=[];return null===(e=null===(n=t.container)||void 0===n?void 0:n.containerItems)||void 0===e||e.forEach((n=>{a=a.concat(this.getSlicesRevertToDefaultDescriptor(t.name,n.slices,r))})),i=o.concat(a),i}getSlicesRevertToDefaultDescriptor(t,n,e){let r=[];return null==n||n.forEach((n=>{n&&!e[n.name]&&(e[n.name]=!0,r=r.concat(n.getRevertToDefaultDescriptor(t)))})),r}}},87674:(t,n,e)=>{"use strict";e.d(n,{O:()=>i.A,z:()=>r});var r=e(89754),i=e(76667)},18639:(t,n,e)=>{"use strict";function r(t,n){return{objectName:t,propertyName:n.name,selector:n.selector,altConstantValueSelector:n.altConstantSelector,instanceKind:n.instanceKind}}function i(t,n,e){return null==n||"object"==typeof n&&!n.solid?e:n.solid?{value:null==n?void 0:n.solid.color}:(null==t?void 0:t.items)?t.items.find((t=>t.value==n)):n}e.d(n,{D:()=>i,y:()=>r})},80853:(t,n,e)=>{"use strict";e.d(n,{A:()=>c});var r={value:function(){}};function i(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new o(r)}function o(t){this._=t}function a(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function u(t,n,e){for(var i=0,o=t.length;i<o;++i)if(t[i].name===n){t[i]=r,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=e&&t.push({name:n,value:e}),t}o.prototype=i.prototype={constructor:o,on:function(t,n){var e,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");if(e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))),c=-1,s=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++c<s;)if(e=(t=o[c]).type)i[e]=u(i[e],t.name,n);else if(null==n)for(e in i)i[e]=u(i[e],t.name,null);return this}for(;++c<s;)if((e=(t=o[c]).type)&&(e=a(i[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new o(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};const c=i},23111:(t,n,e)=>{"use strict";e.d(n,{A:()=>s});var r=Math.PI,i=2*r,o=1e-6,a=i-o;function u(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function c(){return new u}u.prototype=c.prototype={constructor:u,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,o){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,n,e,i,a){t=+t,n=+n,e=+e,i=+i,a=+a;var u=this._x1,c=this._y1,s=e-t,f=i-n,l=u-t,h=c-n,d=l*l+h*h;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(d>o)if(Math.abs(h*s-f*l)>o&&a){var p=e-u,g=i-c,y=s*s+f*f,v=p*p+g*g,_=Math.sqrt(y),m=Math.sqrt(d),b=a*Math.tan((r-Math.acos((y+d-v)/(2*_*m)))/2),A=b/m,x=b/_;Math.abs(A-1)>o&&(this._+="L"+(t+A*l)+","+(n+A*h)),this._+="A"+a+","+a+",0,0,"+ +(h*p>l*g)+","+(this._x1=t+x*s)+","+(this._y1=n+x*f)}else this._+="L"+(this._x1=t)+","+(this._y1=n)},arc:function(t,n,e,u,c,s){t=+t,n=+n,s=!!s;var f=(e=+e)*Math.cos(u),l=e*Math.sin(u),h=t+f,d=n+l,p=1^s,g=s?u-c:c-u;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+h+","+d:(Math.abs(this._x1-h)>o||Math.abs(this._y1-d)>o)&&(this._+="L"+h+","+d),e&&(g<0&&(g=g%i+i),g>a?this._+="A"+e+","+e+",0,1,"+p+","+(t-f)+","+(n-l)+"A"+e+","+e+",0,1,"+p+","+(this._x1=h)+","+(this._y1=d):g>o&&(this._+="A"+e+","+e+",0,"+ +(g>=r)+","+p+","+(this._x1=t+e*Math.cos(c))+","+(this._y1=n+e*Math.sin(c))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};const s=c},15869:(t,n,e)=>{"use strict";var r,i,o,a;e.d(n,{DC:()=>i,aL:()=>o}),a={dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},r=(0,e(99354).A)(a),i=r.format,r.parse,o=r.utcFormat,r.utcParse},99354:(t,n,e)=>{"use strict";e.d(n,{A:()=>h});var r=e(31658),i=e(71498),o=e(62642),a=e(16834),u=e(15415),c=e(20591);function s(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function f(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function l(t,n,e){return{y:t,m:n,d:e,H:0,M:0,S:0,L:0}}function h(t){var n=t.dateTime,e=t.date,u=t.time,c=t.periods,h=t.days,p=t.shortDays,g=t.months,y=t.shortMonths,v=m(c),_=b(c),X=m(h),_t=b(h),Ct=m(p),Dt=b(p),Ft=m(g),Pt=b(g),zt=m(y),It=b(y),Ut={a:function(t){return p[t.getDay()]},A:function(t){return h[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return g[t.getMonth()]},c:null,d:Y,e:Y,f:Z,g:rt,G:ot,H:q,I:B,j:G,L:H,m:W,M:V,p:function(t){return c[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:kt,s:Et,S:$,u:K,U:Q,V:J,w:tt,W:nt,x:null,X:null,y:et,Y:it,Z:at,"%":St},Rt={a:function(t){return p[t.getUTCDay()]},A:function(t){return h[t.getUTCDay()]},b:function(t){return y[t.getUTCMonth()]},B:function(t){return g[t.getUTCMonth()]},c:null,d:ut,e:ut,f:ht,g:wt,G:Tt,H:ct,I:st,j:ft,L:lt,m:dt,M:pt,p:function(t){return c[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:kt,s:Et,S:gt,u:yt,U:vt,V:mt,w:bt,W:At,x:null,X:null,y:xt,Y:Mt,Z:Nt,"%":St},jt={a:function(t,n,e){var r=Ct.exec(n.slice(e));return r?(t.w=Dt[r[0].toLowerCase()],e+r[0].length):-1},A:function(t,n,e){var r=X.exec(n.slice(e));return r?(t.w=_t[r[0].toLowerCase()],e+r[0].length):-1},b:function(t,n,e){var r=zt.exec(n.slice(e));return r?(t.m=It[r[0].toLowerCase()],e+r[0].length):-1},B:function(t,n,e){var r=Ft.exec(n.slice(e));return r?(t.m=Pt[r[0].toLowerCase()],e+r[0].length):-1},c:function(t,e,r){return Yt(t,n,e,r)},d:D,e:D,f:R,g:S,G:N,H:P,I:P,j:F,L:U,m:C,M:z,p:function(t,n,e){var r=v.exec(n.slice(e));return r?(t.p=_[r[0].toLowerCase()],e+r[0].length):-1},q:E,Q:L,s:O,S:I,u:x,U:w,V:M,w:A,W:T,x:function(t,n,r){return Yt(t,e,n,r)},X:function(t,n,e){return Yt(t,u,n,e)},y:S,Y:N,Z:k,"%":j};function Lt(t,n){return function(e){var r,i,o,a=[],u=-1,c=0,s=t.length;for(e instanceof Date||(e=new Date(+e));++u<s;)37===t.charCodeAt(u)&&(a.push(t.slice(c,u)),null!=(i=d[r=t.charAt(++u)])?r=t.charAt(++u):i="e"===r?" ":"0",(o=n[r])&&(r=o(e,i)),a.push(r),c=u+1);return a.push(t.slice(c,u)),a.join("")}}function Ot(t,n){return function(e){var u,c,h=l(1900,void 0,1);if(Yt(h,t,e+="",0)!=e.length)return null;if("Q"in h)return new Date(h.Q);if("s"in h)return new Date(1e3*h.s+("L"in h?h.L:0));if(n&&!("Z"in h)&&(h.Z=0),"p"in h&&(h.H=h.H%12+12*h.p),void 0===h.m&&(h.m="q"in h?h.q:0),"V"in h){if(h.V<1||h.V>53)return null;"w"in h||(h.w=1),"Z"in h?(c=(u=f(l(h.y,0,1))).getUTCDay(),u=c>4||0===c?r.rt.ceil(u):(0,r.rt)(u),u=i.A.offset(u,7*(h.V-1)),h.y=u.getUTCFullYear(),h.m=u.getUTCMonth(),h.d=u.getUTCDate()+(h.w+6)%7):(c=(u=s(l(h.y,0,1))).getDay(),u=c>4||0===c?o.By.ceil(u):(0,o.By)(u),u=a.A.offset(u,7*(h.V-1)),h.y=u.getFullYear(),h.m=u.getMonth(),h.d=u.getDate()+(h.w+6)%7)}else("W"in h||"U"in h)&&("w"in h||(h.w="u"in h?h.u%7:"W"in h?1:0),c="Z"in h?f(l(h.y,0,1)).getUTCDay():s(l(h.y,0,1)).getDay(),h.m=0,h.d="W"in h?(h.w+6)%7+7*h.W-(c+5)%7:h.w+7*h.U-(c+6)%7);return"Z"in h?(h.H+=h.Z/100|0,h.M+=h.Z%100,f(h)):s(h)}}function Yt(t,n,e,r){for(var i,o,a=0,u=n.length,c=e.length;a<u;){if(r>=c)return-1;if(37===(i=n.charCodeAt(a++))){if(i=n.charAt(a++),!(o=jt[i in d?n.charAt(a++):i])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}return Ut.x=Lt(e,Ut),Ut.X=Lt(u,Ut),Ut.c=Lt(n,Ut),Rt.x=Lt(e,Rt),Rt.X=Lt(u,Rt),Rt.c=Lt(n,Rt),{format:function(t){var n=Lt(t+="",Ut);return n.toString=function(){return t},n},parse:function(t){var n=Ot(t+="",!1);return n.toString=function(){return t},n},utcFormat:function(t){var n=Lt(t+="",Rt);return n.toString=function(){return t},n},utcParse:function(t){var n=Ot(t+="",!0);return n.toString=function(){return t},n}}}var d={"-":"",_:" ",0:"0"},p=/^\s*\d+/,g=/^%/,y=/[\\^$*+?|[\]().{}]/g;function v(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function _(t){return t.replace(y,"\\$&")}function m(t){return new RegExp("^(?:"+t.map(_).join("|")+")","i")}function b(t){for(var n={},e=-1,r=t.length;++e<r;)n[t[e].toLowerCase()]=e;return n}function A(t,n,e){var r=p.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function x(t,n,e){var r=p.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function w(t,n,e){var r=p.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function M(t,n,e){var r=p.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function T(t,n,e){var r=p.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function N(t,n,e){var r=p.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function S(t,n,e){var r=p.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function k(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function E(t,n,e){var r=p.exec(n.slice(e,e+1));return r?(t.q=3*r[0]-3,e+r[0].length):-1}function C(t,n,e){var r=p.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function D(t,n,e){var r=p.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function F(t,n,e){var r=p.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function P(t,n,e){var r=p.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function z(t,n,e){var r=p.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function I(t,n,e){var r=p.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function U(t,n,e){var r=p.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function R(t,n,e){var r=p.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function j(t,n,e){var r=g.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function L(t,n,e){var r=p.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function O(t,n,e){var r=p.exec(n.slice(e));return r?(t.s=+r[0],e+r[0].length):-1}function Y(t,n){return v(t.getDate(),n,2)}function q(t,n){return v(t.getHours(),n,2)}function B(t,n){return v(t.getHours()%12||12,n,2)}function G(t,n){return v(1+a.A.count((0,u.A)(t),t),n,3)}function H(t,n){return v(t.getMilliseconds(),n,3)}function Z(t,n){return H(t,n)+"000"}function W(t,n){return v(t.getMonth()+1,n,2)}function V(t,n){return v(t.getMinutes(),n,2)}function $(t,n){return v(t.getSeconds(),n,2)}function K(t){var n=t.getDay();return 0===n?7:n}function Q(t,n){return v(o.fz.count((0,u.A)(t)-1,t),n,2)}function X(t){var n=t.getDay();return n>=4||0===n?(0,o.dt)(t):o.dt.ceil(t)}function J(t,n){return t=X(t),v(o.dt.count((0,u.A)(t),t)+(4===(0,u.A)(t).getDay()),n,2)}function tt(t){return t.getDay()}function nt(t,n){return v(o.By.count((0,u.A)(t)-1,t),n,2)}function et(t,n){return v(t.getFullYear()%100,n,2)}function rt(t,n){return v((t=X(t)).getFullYear()%100,n,2)}function it(t,n){return v(t.getFullYear()%1e4,n,4)}function ot(t,n){var e=t.getDay();return v((t=e>=4||0===e?(0,o.dt)(t):o.dt.ceil(t)).getFullYear()%1e4,n,4)}function at(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+v(n/60|0,"0",2)+v(n%60,"0",2)}function ut(t,n){return v(t.getUTCDate(),n,2)}function ct(t,n){return v(t.getUTCHours(),n,2)}function st(t,n){return v(t.getUTCHours()%12||12,n,2)}function ft(t,n){return v(1+i.A.count((0,c.A)(t),t),n,3)}function lt(t,n){return v(t.getUTCMilliseconds(),n,3)}function ht(t,n){return lt(t,n)+"000"}function dt(t,n){return v(t.getUTCMonth()+1,n,2)}function pt(t,n){return v(t.getUTCMinutes(),n,2)}function gt(t,n){return v(t.getUTCSeconds(),n,2)}function yt(t){var n=t.getUTCDay();return 0===n?7:n}function vt(t,n){return v(r.Hl.count((0,c.A)(t)-1,t),n,2)}function _t(t){var n=t.getUTCDay();return n>=4||0===n?(0,r.pT)(t):r.pT.ceil(t)}function mt(t,n){return t=_t(t),v(r.pT.count((0,c.A)(t),t)+(4===(0,c.A)(t).getUTCDay()),n,2)}function bt(t){return t.getUTCDay()}function At(t,n){return v(r.rt.count((0,c.A)(t)-1,t),n,2)}function xt(t,n){return v(t.getUTCFullYear()%100,n,2)}function wt(t,n){return v((t=_t(t)).getUTCFullYear()%100,n,2)}function Mt(t,n){return v(t.getUTCFullYear()%1e4,n,4)}function Tt(t,n){var e=t.getUTCDay();return v((t=e>=4||0===e?(0,r.pT)(t):r.pT.ceil(t)).getUTCFullYear()%1e4,n,4)}function Nt(){return"+0000"}function St(){return"%"}function kt(t){return+t}function Et(t){return Math.floor(+t/1e3)}},16834:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(88475),i=e(38658),o=(0,r.A)((function(t){t.setHours(0,0,0,0)}),(function(t,n){t.setDate(t.getDate()+n)}),(function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*i.rR)/i.Nm}),(function(t){return t.getDate()-1}));const a=o;o.range},38658:(t,n,e)=>{"use strict";e.d(n,{Fq:()=>o,Nm:()=>i,rR:()=>r});var r=6e4,i=864e5,o=6048e5},88475:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=new Date,i=new Date;function o(t,n,e,a){function u(n){return t(n=0===arguments.length?new Date:new Date(+n)),n}return u.floor=function(n){return t(n=new Date(+n)),n},u.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},u.round=function(t){var n=u(t),e=u.ceil(t);return t-n<e-t?n:e},u.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},u.range=function(e,r,i){var o,a=[];if(e=u.ceil(e),i=null==i?1:Math.floor(i),!(e<r&&i>0))return a;do{a.push(o=new Date(+e)),n(e,i),t(e)}while(o<e&&e<r);return a},u.filter=function(e){return o((function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;n(t,-1),!e(t););else for(;--r>=0;)for(;n(t,1),!e(t););}))},e&&(u.count=function(n,o){return r.setTime(+n),i.setTime(+o),t(r),t(i),Math.floor(e(r,i))},u.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?u.filter(a?function(n){return a(n)%t==0}:function(n){return u.count(0,n)%t==0}):u:null}),u}},71498:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(88475),i=e(38658),o=(0,r.A)((function(t){t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+n)}),(function(t,n){return(n-t)/i.Nm}),(function(t){return t.getUTCDate()-1}));const a=o;o.range},31658:(t,n,e)=>{"use strict";e.d(n,{Hl:()=>a,pT:()=>f,rt:()=>u});var r=e(88475),i=e(38658);function o(t){return(0,r.A)((function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+7*n)}),(function(t,n){return(n-t)/i.Fq}))}var a=o(0),u=o(1),c=o(2),s=o(3),f=o(4),l=o(5),h=o(6);a.range,u.range,c.range,s.range,f.range,l.range,h.range},20591:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(88475),i=(0,r.A)((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)}),(function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));i.every=function(t){return isFinite(t=Math.floor(t))&&t>0?(0,r.A)((function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)}),(function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)})):null};const o=i;i.range},62642:(t,n,e)=>{"use strict";e.d(n,{By:()=>u,dt:()=>f,fz:()=>a});var r=e(88475),i=e(38658);function o(t){return(0,r.A)((function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)}),(function(t,n){t.setDate(t.getDate()+7*n)}),(function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*i.rR)/i.Fq}))}var a=o(0),u=o(1),c=o(2),s=o(3),f=o(4),l=o(5),h=o(6);a.range,u.range,c.range,s.range,f.range,l.range,h.range},15415:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(88475),i=(0,r.A)((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n)}),(function(t,n){return n.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));i.every=function(t){return isFinite(t=Math.floor(t))&&t>0?(0,r.A)((function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)}),(function(n,e){n.setFullYear(n.getFullYear()+e*t)})):null};const o=i;i.range},41443:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(76529);function i(t,n,e){var i=new r.M4;return n=null==n?0:+n,i.restart((function(e){i.stop(),t(e+n)}),n,e),i}},76529:(t,n,e)=>{"use strict";e.d(n,{M4:()=>v,O1:()=>_,tB:()=>g});var r,i,o=e(30327),a=0,u=0,c=0,s=1e3,f=0,l=0,h=0,d="object"==typeof performance&&performance.now?performance:Date,p="object"==typeof o&&o.requestAnimationFrame?o.requestAnimationFrame.bind(o):function(t){setTimeout(t,17)};function g(){return l||(p(y),l=d.now()+h)}function y(){l=0}function v(){this._call=this._time=this._next=null}function _(t,n,e){var r=new v;return r.restart(t,n,e),r}function m(){l=(f=d.now())+h,a=u=0;try{!function(){g(),++a;for(var t,n=r;n;)(t=l-n._time)>=0&&n._call.call(null,t),n=n._next;--a}()}finally{a=0,function(){for(var t,n,e=r,o=1/0;e;)e._call?(o>e._time&&(o=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:r=n);i=t,A(o)}(),l=0}}function b(){var t=d.now(),n=t-f;n>s&&(h-=n,f=t)}function A(t){a||(u&&(u=clearTimeout(u)),t-l>24?(t<1/0&&(u=setTimeout(m,t-d.now()-h)),c&&(c=clearInterval(c))):(c||(f=d.now(),c=setInterval(b,s)),a=1,p(m)))}v.prototype=_.prototype={constructor:v,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?g():+e)+(null==n?0:+n),this._next||i===this||(i?i._next=this:r=this,i=this),this._call=t,this._time=e,A()},stop:function(){this._call&&(this._call=null,this._time=1/0,A())}}},30327:t=>{"use strict";t.exports=Function("return this")()},9862:(t,n,e)=>{"use strict";e.d(n,{V4:()=>m,eH:()=>v,l7:()=>_,tl:()=>y});var r=e(33649),i=e(30327),o=1,a=2,u=3,c=4,s=1e-6;function f(t){return"translate("+t+",0)"}function l(t){return"translate(0,"+t+")"}function h(t){return n=>+t(n)}function d(t,n){return n=Math.max(0,t.bandwidth()-2*n)/2,t.round()&&(n=Math.round(n)),e=>+t(e)+n}function p(){return!this.__axis}function g(t,n){var e=[],g=null,y=null,v=6,_=6,m=3,b=void 0!==i&&i.devicePixelRatio>1?0:.5,A=t===o||t===c?-1:1,x=t===c||t===a?"x":"y",w=t===o||t===u?f:l;function M(i){var f=null==g?n.ticks?n.ticks.apply(n,e):n.domain():g,l=null==y?n.tickFormat?n.tickFormat.apply(n,e):r.A:y,M=Math.max(v,0)+m,T=n.range(),N=+T[0]+b,S=+T[T.length-1]+b,k=(n.bandwidth?d:h)(n.copy(),b),E=i.selection?i.selection():i,C=E.selectAll(".domain").data([null]),D=E.selectAll(".tick").data(f,n).order(),F=D.exit(),P=D.enter().append("g").attr("class","tick"),z=D.select("line"),I=D.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),D=D.merge(P),z=z.merge(P.append("line").attr("stroke","currentColor").attr(x+"2",A*v)),I=I.merge(P.append("text").attr("fill","currentColor").attr(x,A*M).attr("dy",t===o?"0em":t===u?"0.71em":"0.32em")),i!==E&&(C=C.transition(i),D=D.transition(i),z=z.transition(i),I=I.transition(i),F=F.transition(i).attr("opacity",s).attr("transform",(function(t){return isFinite(t=k(t))?w(t+b):this.getAttribute("transform")})),P.attr("opacity",s).attr("transform",(function(t){var n=this.parentNode.__axis;return w((n&&isFinite(n=n(t))?n:k(t))+b)}))),F.remove(),C.attr("d",t===c||t===a?_?"M"+A*_+","+N+"H"+b+"V"+S+"H"+A*_:"M"+b+","+N+"V"+S:_?"M"+N+","+A*_+"V"+b+"H"+S+"V"+A*_:"M"+N+","+b+"H"+S),D.attr("opacity",1).attr("transform",(function(t){return w(k(t)+b)})),z.attr(x+"2",A*v),I.attr(x,A*M).text(l),E.filter(p).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===a?"start":t===c?"end":"middle"),E.each((function(){this.__axis=k}))}return M.scale=function(t){return arguments.length?(n=t,M):n},M.ticks=function(){return e=Array.from(arguments),M},M.tickArguments=function(t){return arguments.length?(e=null==t?[]:Array.from(t),M):e.slice()},M.tickValues=function(t){return arguments.length?(g=null==t?null:Array.from(t),M):g&&g.slice()},M.tickFormat=function(t){return arguments.length?(y=t,M):y},M.tickSize=function(t){return arguments.length?(v=_=+t,M):v},M.tickSizeInner=function(t){return arguments.length?(v=+t,M):v},M.tickSizeOuter=function(t){return arguments.length?(_=+t,M):_},M.tickPadding=function(t){return arguments.length?(m=+t,M):m},M.offset=function(t){return arguments.length?(b=+t,M):b},M}function y(t){return g(o,t)}function v(t){return g(a,t)}function _(t){return g(u,t)}function m(t){return g(c,t)}},33649:(t,n,e)=>{"use strict";function r(t){return t}e.d(n,{A:()=>r})},54575:(t,n,e)=>{"use strict";e.d(n,{V4:()=>r.V4,eH:()=>r.eH,l7:()=>r.l7,tl:()=>r.tl});var r=e(9862)},46532:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>R,ZR:()=>z,g2:()=>U,n5:()=>I});var r=e(80853),i=e(97655),o=e(39630),a=e(95556),u=e(62675),c=e(13969),s=e(34),f=e(35224),l=e(3069),h={name:"drag"},d={name:"space"},p={name:"handle"},g={name:"center"};const{abs:y,max:v,min:_}=Math;function m(t){return[+t[0],+t[1]]}function b(t){return[m(t[0]),m(t[1])]}var A={name:"x",handles:["w","e"].map(E),input:function(t,n){return null==t?null:[[+t[0],n[0][1]],[+t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},x={name:"y",handles:["n","s"].map(E),input:function(t,n){return null==t?null:[[n[0][0],+t[0]],[n[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},w={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(E),input:function(t){return null==t?null:b(t)},output:function(t){return t}},M={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},T={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},N={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},S={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},k={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function E(t){return{type:t}}function C(t){return!t.ctrlKey&&!t.button}function D(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function F(){return navigator.maxTouchPoints||"ontouchstart"in this}function P(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function z(t){var n=t.__brush;return n?n.dim.output(n.selection):null}function I(){return j(A)}function U(){return j(x)}function R(){return j(w)}function j(t){var n,e=D,m=C,w=F,z=!0,I=(0,r.A)("start","brush","end"),U=6;function R(n){var e=n.property("__brush",G).selectAll(".overlay").data([E("overlay")]);e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",M.overlay).merge(e).each((function(){var t=P(this).extent;(0,a.A)(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),n.selectAll(".selection").data([E("selection")]).enter().append("rect").attr("class","selection").attr("cursor",M.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=n.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return M[t.type]})),n.each(j).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",Y).filter(w).on("touchstart.brush",Y).on("touchmove.brush",q).on("touchend.brush touchcancel.brush",B).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function j(){var t=(0,a.A)(this),n=P(this).selection;n?(t.selectAll(".selection").style("display",null).attr("x",n[0][0]).attr("y",n[0][1]).attr("width",n[1][0]-n[0][0]).attr("height",n[1][1]-n[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?n[1][0]-U/2:n[0][0]-U/2})).attr("y",(function(t){return"s"===t.type[0]?n[1][1]-U/2:n[0][1]-U/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?n[1][0]-n[0][0]+U:U})).attr("height",(function(t){return"e"===t.type||"w"===t.type?n[1][1]-n[0][1]+U:U}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function L(t,n,e){var r=t.__brush.emitter;return!r||e&&r.clean?new O(t,n,e):r}function O(t,n,e){this.that=t,this.args=n,this.state=t.__brush,this.active=0,this.clean=e}function Y(e){if((!n||e.touches)&&m.apply(this,arguments)){var r,o,s,f,b,w,E,C,D,F,I,U=this,R=e.target.__data__.type,O="selection"===(z&&e.metaKey?R="overlay":R)?h:z&&e.altKey?g:p,Y=t===x?null:S[R],q=t===A?null:k[R],B=P(U),G=B.extent,H=B.selection,Z=G[0][0],W=G[0][1],V=G[1][0],$=G[1][1],K=0,Q=0,X=Y&&q&&z&&e.shiftKey,J=Array.from(e.touches||[e],(t=>{const n=t.identifier;return(t=(0,u.A)(t,U)).point0=t.slice(),t.identifier=n,t}));(0,c.G)(U);var tt=L(U,arguments,!0).beforestart();if("overlay"===R){H&&(D=!0);const n=[J[0],J[1]||J[0]];B.selection=H=[[r=t===x?Z:_(n[0][0],n[1][0]),s=t===A?W:_(n[0][1],n[1][1])],[b=t===x?V:v(n[0][0],n[1][0]),E=t===A?$:v(n[0][1],n[1][1])]],J.length>1&&ot(e)}else r=H[0][0],s=H[0][1],b=H[1][0],E=H[1][1];o=r,f=s,w=b,C=E;var nt=(0,a.A)(U).attr("pointer-events","none"),et=nt.selectAll(".overlay").attr("cursor",M[R]);if(e.touches)tt.moved=it,tt.ended=at;else{var rt=(0,a.A)(e.view).on("mousemove.brush",it,!0).on("mouseup.brush",at,!0);z&&rt.on("keydown.brush",(function(t){switch(t.keyCode){case 16:X=Y&&q;break;case 18:O===p&&(Y&&(b=w-K*Y,r=o+K*Y),q&&(E=C-Q*q,s=f+Q*q),O=g,ot(t));break;case 32:O!==p&&O!==g||(Y<0?b=w-K:Y>0&&(r=o-K),q<0?E=C-Q:q>0&&(s=f-Q),O=d,et.attr("cursor",M.selection),ot(t));break;default:return}(0,l.A)(t)}),!0).on("keyup.brush",(function(t){switch(t.keyCode){case 16:X&&(F=I=X=!1,ot(t));break;case 18:O===g&&(Y<0?b=w:Y>0&&(r=o),q<0?E=C:q>0&&(s=f),O=p,ot(t));break;case 32:O===d&&(t.altKey?(Y&&(b=w-K*Y,r=o+K*Y),q&&(E=C-Q*q,s=f+Q*q),O=g):(Y<0?b=w:Y>0&&(r=o),q<0?E=C:q>0&&(s=f),O=p),et.attr("cursor",M[R]),ot(t));break;default:return}(0,l.A)(t)}),!0),(0,i.A)(e.view)}j.call(U),tt.start(e,O.name)}function it(t){for(const n of t.changedTouches||[t])for(const t of J)t.identifier===n.identifier&&(t.cur=(0,u.A)(n,U));if(X&&!F&&!I&&1===J.length){const t=J[0];y(t.cur[0]-t[0])>y(t.cur[1]-t[1])?I=!0:F=!0}for(const t of J)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);D=!0,(0,l.A)(t),ot(t)}function ot(t){const n=J[0],e=n.point0;var i;switch(K=n[0]-e[0],Q=n[1]-e[1],O){case d:case h:Y&&(K=v(Z-r,_(V-b,K)),o=r+K,w=b+K),q&&(Q=v(W-s,_($-E,Q)),f=s+Q,C=E+Q);break;case p:J[1]?(Y&&(o=v(Z,_(V,J[0][0])),w=v(Z,_(V,J[1][0])),Y=1),q&&(f=v(W,_($,J[0][1])),C=v(W,_($,J[1][1])),q=1)):(Y<0?(K=v(Z-r,_(V-r,K)),o=r+K,w=b):Y>0&&(K=v(Z-b,_(V-b,K)),o=r,w=b+K),q<0?(Q=v(W-s,_($-s,Q)),f=s+Q,C=E):q>0&&(Q=v(W-E,_($-E,Q)),f=s,C=E+Q));break;case g:Y&&(o=v(Z,_(V,r-K*Y)),w=v(Z,_(V,b+K*Y))),q&&(f=v(W,_($,s-Q*q)),C=v(W,_($,E+Q*q)))}w<o&&(Y*=-1,i=r,r=b,b=i,i=o,o=w,w=i,R in T&&et.attr("cursor",M[R=T[R]])),C<f&&(q*=-1,i=s,s=E,E=i,i=f,f=C,C=i,R in N&&et.attr("cursor",M[R=N[R]])),B.selection&&(H=B.selection),F&&(o=H[0][0],w=H[1][0]),I&&(f=H[0][1],C=H[1][1]),H[0][0]===o&&H[0][1]===f&&H[1][0]===w&&H[1][1]===C||(B.selection=[[o,f],[w,C]],j.call(U),tt.brush(t,O.name))}function at(t){if((0,l.G)(t),t.touches){if(t.touches.length)return;n&&clearTimeout(n),n=setTimeout((function(){n=null}),500)}else(0,i.y)(t.view,D),rt.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);nt.attr("pointer-events","all"),et.attr("cursor",M.overlay),B.selection&&(H=B.selection),function(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}(H)&&(B.selection=null,j.call(U)),tt.end(t,O.name)}}function q(t){L(this,arguments).moved(t)}function B(t){L(this,arguments).ended(t)}function G(){var n=this.__brush||{selection:null};return n.extent=b(e.apply(this,arguments)),n.dim=t,n}return R.move=function(n,e,r){n.tween?n.on("start.brush",(function(t){L(this,arguments).beforestart().start(t)})).on("interrupt.brush end.brush",(function(t){L(this,arguments).end(t)})).tween("brush",(function(){var n=this,r=n.__brush,i=L(n,arguments),a=r.selection,u=t.input("function"==typeof e?e.apply(this,arguments):e,r.extent),c=(0,o.A)(a,u);function s(t){r.selection=1===t&&null===u?null:c(t),j.call(n),i.brush()}return null!==a&&null!==u?s:s(1)})):n.each((function(){var n=this,i=arguments,o=n.__brush,a=t.input("function"==typeof e?e.apply(n,i):e,o.extent),u=L(n,i).beforestart();(0,c.G)(n),o.selection=null===a?null:a,j.call(n),u.start(r).brush(r).end(r)}))},R.clear=function(t,n){R.move(t,null,n)},O.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,n){return this.starting?(this.starting=!1,this.emit("start",t,n)):this.emit("brush",t),this},brush:function(t,n){return this.emit("brush",t,n),this},end:function(t,n){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,n)),this},emit:function(n,e,r){var i=(0,a.A)(this.that).datum();I.call(n,this.that,new f.A(n,{sourceEvent:e,target:R,selection:t.output(this.state.selection),mode:r,dispatch:I}),i)}},R.extent=function(t){return arguments.length?(e="function"==typeof t?t:(0,s.A)(b(t)),R):e},R.filter=function(t){return arguments.length?(m="function"==typeof t?t:(0,s.A)(!!t),R):m},R.touchable=function(t){return arguments.length?(w="function"==typeof t?t:(0,s.A)(!!t),R):w},R.handleSize=function(t){return arguments.length?(U=+t,R):U},R.keyModifiers=function(t){return arguments.length?(z=!!t,R):z},R.on=function(){var t=I.on.apply(I,arguments);return t===I?R:t},R}},34:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=t=>()=>t},35224:(t,n,e)=>{"use strict";function r(t,{sourceEvent:n,target:e,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}e.d(n,{A:()=>r})},91164:(t,n,e)=>{"use strict";e.d(n,{V$:()=>r.Ay,ZR:()=>r.ZR,g2:()=>r.g2,n5:()=>r.n5});var r=e(46532)},3069:(t,n,e)=>{"use strict";function r(t){t.stopImmediatePropagation()}function i(t){t.preventDefault(),t.stopImmediatePropagation()}e.d(n,{A:()=>i,G:()=>r})},6759:(t,n,e)=>{"use strict";e.d(n,{d:()=>r});var r=Array.prototype.slice},85416:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>o,BQ:()=>u,kb:()=>a});var r=e(75134);function i(t,n){return Array.from({length:n-t},((n,e)=>t+e))}function o(){return c(!1,!1)}function a(){return c(!1,!0)}function u(){return c(!0,!1)}function c(t,n){var e=0,o=null,a=null,u=null;function c(c){var s,f=c.length,l=new Array(f),h=i(0,f),d=new Array(f*f),p=new Array(f),g=0;c=Float64Array.from({length:f*f},n?(t,n)=>c[n%f][n/f|0]:(t,n)=>c[n/f|0][n%f]);for(let n=0;n<f;++n){let e=0;for(let r=0;r<f;++r)e+=c[n*f+r]+t*c[r*f+n];g+=l[n]=e}s=(g=(0,r.T9)(0,r.FA-e*f)/g)?e:r.FA/f;{let n=0;o&&h.sort(((t,n)=>o(l[t],l[n])));for(const e of h){const r=n;if(t){const t=i(1+~f,f).filter((t=>t<0?c[~t*f+e]:c[e*f+t]));a&&t.sort(((t,n)=>a(t<0?-c[~t*f+e]:c[e*f+t],n<0?-c[~n*f+e]:c[e*f+n])));for(const r of t)r<0?(d[~r*f+e]||(d[~r*f+e]={source:null,target:null})).target={index:e,startAngle:n,endAngle:n+=c[~r*f+e]*g,value:c[~r*f+e]}:(d[e*f+r]||(d[e*f+r]={source:null,target:null})).source={index:e,startAngle:n,endAngle:n+=c[e*f+r]*g,value:c[e*f+r]};p[e]={index:e,startAngle:r,endAngle:n,value:l[e]}}else{const t=i(0,f).filter((t=>c[e*f+t]||c[t*f+e]));a&&t.sort(((t,n)=>a(c[e*f+t],c[e*f+n])));for(const r of t){let t;if(e<r?(t=d[e*f+r]||(d[e*f+r]={source:null,target:null}),t.source={index:e,startAngle:n,endAngle:n+=c[e*f+r]*g,value:c[e*f+r]}):(t=d[r*f+e]||(d[r*f+e]={source:null,target:null}),t.target={index:e,startAngle:n,endAngle:n+=c[e*f+r]*g,value:c[e*f+r]},e===r&&(t.source=t.target)),t.source&&t.target&&t.source.value<t.target.value){const n=t.source;t.source=t.target,t.target=n}}p[e]={index:e,startAngle:r,endAngle:n,value:l[e]}}n+=s}}return(d=Object.values(d)).groups=p,u?d.sort(u):d}return c.padAngle=function(t){return arguments.length?(e=(0,r.T9)(0,t),c):e},c.sortGroups=function(t){return arguments.length?(o=t,c):o},c.sortSubgroups=function(t){return arguments.length?(a=t,c):a},c.sortChords=function(t){return arguments.length?(null==t?u=null:(n=t,u=function(t,e){return n(t.source.value+t.target.value,e.source.value+e.target.value)})._=t,c):u&&u._;var n},c}},84948:(t,n,e)=>{"use strict";function r(t){return function(){return t}}e.d(n,{A:()=>r})},69930:(t,n,e)=>{"use strict";e.d(n,{BQ:()=>r.BQ,F6:()=>i.A,JQ:()=>r.Ay,Y_:()=>i.Y,kb:()=>r.kb});var r=e(85416),i=e(14760)},75134:(t,n,e)=>{"use strict";e.d(n,{F8:()=>o,FA:()=>c,Ni:()=>f,T9:()=>s,TW:()=>u,gn:()=>i,tn:()=>r});var r=Math.abs,i=Math.cos,o=Math.sin,a=Math.PI,u=a/2,c=2*a,s=Math.max,f=1e-12},14760:(t,n,e)=>{"use strict";e.d(n,{A:()=>g,Y:()=>y});var r=e(23111),i=e(6759),o=e(84948),a=e(75134);function u(t){return t.source}function c(t){return t.target}function s(t){return t.radius}function f(t){return t.startAngle}function l(t){return t.endAngle}function h(){return 0}function d(){return 10}function p(t){var n=u,e=c,d=s,p=s,g=f,y=l,v=h,_=null;function m(){var o,u=n.apply(this,arguments),c=e.apply(this,arguments),s=v.apply(this,arguments)/2,f=i.d.call(arguments),l=+d.apply(this,(f[0]=u,f)),h=g.apply(this,f)-a.TW,m=y.apply(this,f)-a.TW,b=+p.apply(this,(f[0]=c,f)),A=g.apply(this,f)-a.TW,x=y.apply(this,f)-a.TW;if(_||(_=o=(0,r.A)()),s>a.Ni&&((0,a.tn)(m-h)>2*s+a.Ni?m>h?(h+=s,m-=s):(h-=s,m+=s):h=m=(h+m)/2,(0,a.tn)(x-A)>2*s+a.Ni?x>A?(A+=s,x-=s):(A-=s,x+=s):A=x=(A+x)/2),_.moveTo(l*(0,a.gn)(h),l*(0,a.F8)(h)),_.arc(0,0,l,h,m),h!==A||m!==x)if(t){var w=b-+t.apply(this,arguments),M=(A+x)/2;_.quadraticCurveTo(0,0,w*(0,a.gn)(A),w*(0,a.F8)(A)),_.lineTo(b*(0,a.gn)(M),b*(0,a.F8)(M)),_.lineTo(w*(0,a.gn)(x),w*(0,a.F8)(x))}else _.quadraticCurveTo(0,0,b*(0,a.gn)(A),b*(0,a.F8)(A)),_.arc(0,0,b,A,x);if(_.quadraticCurveTo(0,0,l*(0,a.gn)(h),l*(0,a.F8)(h)),_.closePath(),o)return _=null,o+""||null}return t&&(m.headRadius=function(n){return arguments.length?(t="function"==typeof n?n:(0,o.A)(+n),m):t}),m.radius=function(t){return arguments.length?(d=p="function"==typeof t?t:(0,o.A)(+t),m):d},m.sourceRadius=function(t){return arguments.length?(d="function"==typeof t?t:(0,o.A)(+t),m):d},m.targetRadius=function(t){return arguments.length?(p="function"==typeof t?t:(0,o.A)(+t),m):p},m.startAngle=function(t){return arguments.length?(g="function"==typeof t?t:(0,o.A)(+t),m):g},m.endAngle=function(t){return arguments.length?(y="function"==typeof t?t:(0,o.A)(+t),m):y},m.padAngle=function(t){return arguments.length?(v="function"==typeof t?t:(0,o.A)(+t),m):v},m.source=function(t){return arguments.length?(n=t,m):n},m.target=function(t){return arguments.length?(e=t,m):e},m.context=function(t){return arguments.length?(_=null==t?null:t,m):_},m}function g(){return p()}function y(){return p(d)}},13316:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>b,Gw:()=>T,Q1:()=>i,Qh:()=>M,Uw:()=>a,b:()=>w,ef:()=>o});var r=e(40696);function i(){}var o=.7,a=1/o,u="\\s*([+-]?\\d+)\\s*",c="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",f=/^#([0-9a-f]{3,8})$/,l=new RegExp(`^rgb\\(${u},${u},${u}\\)$`),h=new RegExp(`^rgb\\(${s},${s},${s}\\)$`),d=new RegExp(`^rgba\\(${u},${u},${u},${c}\\)$`),p=new RegExp(`^rgba\\(${s},${s},${s},${c}\\)$`),g=new RegExp(`^hsl\\(${c},${s},${s}\\)$`),y=new RegExp(`^hsla\\(${c},${s},${s},${c}\\)$`),v={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function _(){return this.rgb().formatHex()}function m(){return this.rgb().formatRgb()}function b(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=f.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?A(n):3===e?new T(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?x(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?x(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=l.exec(t))?new T(n[1],n[2],n[3],1):(n=h.exec(t))?new T(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=d.exec(t))?x(n[1],n[2],n[3],n[4]):(n=p.exec(t))?x(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=g.exec(t))?D(n[1],n[2]/100,n[3]/100,1):(n=y.exec(t))?D(n[1],n[2]/100,n[3]/100,n[4]):v.hasOwnProperty(t)?A(v[t]):"transparent"===t?new T(NaN,NaN,NaN,0):null}function A(t){return new T(t>>16&255,t>>8&255,255&t,1)}function x(t,n,e,r){return r<=0&&(t=n=e=NaN),new T(t,n,e,r)}function w(t){return t instanceof i||(t=b(t)),t?new T((t=t.rgb()).r,t.g,t.b,t.opacity):new T}function M(t,n,e,r){return 1===arguments.length?w(t):new T(t,n,e,null==r?1:r)}function T(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function N(){return`#${C(this.r)}${C(this.g)}${C(this.b)}`}function S(){const t=k(this.opacity);return`${1===t?"rgb(":"rgba("}${E(this.r)}, ${E(this.g)}, ${E(this.b)}${1===t?")":`, ${t})`}`}function k(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function E(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function C(t){return((t=E(t))<16?"0":"")+t.toString(16)}function D(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new P(t,n,e,r)}function F(t){if(t instanceof P)return new P(t.h,t.s,t.l,t.opacity);if(t instanceof i||(t=b(t)),!t)return new P;if(t instanceof P)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,o=Math.min(n,e,r),a=Math.max(n,e,r),u=NaN,c=a-o,s=(a+o)/2;return c?(u=n===a?(e-r)/c+6*(e<r):e===a?(r-n)/c+2:(n-e)/c+4,c/=s<.5?a+o:2-a-o,u*=60):c=s>0&&s<1?0:u,new P(u,c,s,t.opacity)}function P(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function z(t){return(t=(t||0)%360)<0?t+360:t}function I(t){return Math.max(0,Math.min(1,t||0))}function U(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}(0,r.A)(i,b,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:_,formatHex:_,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return F(this).formatHsl()},formatRgb:m,toString:m}),(0,r.A)(T,M,(0,r.X)(i,{brighter(t){return t=null==t?a:Math.pow(a,t),new T(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?o:Math.pow(o,t),new T(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new T(E(this.r),E(this.g),E(this.b),k(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:N,formatHex:N,formatHex8:function(){return`#${C(this.r)}${C(this.g)}${C(this.b)}${C(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:S,toString:S})),(0,r.A)(P,(function(t,n,e,r){return 1===arguments.length?F(t):new P(t,n,e,null==r?1:r)}),(0,r.X)(i,{brighter(t){return t=null==t?a:Math.pow(a,t),new P(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?o:Math.pow(o,t),new P(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new T(U(t>=240?t-240:t+120,i,r),U(t,i,r),U(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new P(z(this.h),I(this.s),I(this.l),k(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=k(this.opacity);return`${1===t?"hsl(":"hsla("}${z(this.h)}, ${100*I(this.s)}%, ${100*I(this.l)}%${1===t?")":`, ${t})`}`}}))},8732:(t,n,e)=>{"use strict";e.d(n,{A:()=>p});var r=e(40696),i=e(13316),o=e(62377),a=-.14861,u=1.78277,c=-.29227,s=-.90649,f=1.97294,l=f*s,h=f*u,d=u*c-s*a;function p(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof g)return new g(t.h,t.s,t.l,t.opacity);t instanceof i.Gw||(t=(0,i.b)(t));var n=t.r/255,e=t.g/255,r=t.b/255,a=(d*r+l*n-h*e)/(d+l-h),u=r-a,p=(f*(e-a)-c*u)/s,y=Math.sqrt(p*p+u*u)/(f*a*(1-a)),v=y?Math.atan2(p,u)*o.u-120:NaN;return new g(v<0?v+360:v,y,a,t.opacity)}(t):new g(t,n,e,null==r?1:r)}function g(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}(0,r.A)(g,p,(0,r.X)(i.Q1,{brighter(t){return t=null==t?i.Uw:Math.pow(i.Uw,t),new g(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?i.ef:Math.pow(i.ef,t),new g(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*o.F,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),l=Math.sin(t);return new i.Gw(255*(n+e*(a*r+u*l)),255*(n+e*(c*r+s*l)),255*(n+e*(f*r)),this.opacity)}}))},40696:(t,n,e)=>{"use strict";function r(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function i(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}e.d(n,{A:()=>r,X:()=>i})},62377:(t,n,e)=>{"use strict";e.d(n,{F:()=>r,u:()=>i});const r=Math.PI/180,i=180/Math.PI},71104:(t,n,e)=>{"use strict";function r(t,n){let e=0;if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&++e;else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(i=+i)>=i&&++e}return e}e.d(n,{A:()=>r})},74035:(t,n,e)=>{"use strict";function r(t,n){let e,r;if(void 0===n)for(const n of t)null!=n&&(void 0===e?n>=n&&(e=r=n):(e>n&&(e=n),r<n&&(r=n)));else{let i=-1;for(let o of t)null!=(o=n(o,++i,t))&&(void 0===e?o>=o&&(e=r=o):(e>o&&(e=o),r<o&&(r=o)))}return[e,r]}e.d(n,{A:()=>r})},61517:(t,n,e)=>{"use strict";function r(t,n){let e;if(void 0===n)for(const n of t)null!=n&&(e<n||void 0===e&&n>=n)&&(e=n);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(e<i||void 0===e&&i>=i)&&(e=i)}return e}e.d(n,{A:()=>r})},35674:(t,n,e)=>{"use strict";function r(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o}e.d(n,{A:()=>r})},85046:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(71104);function i(t){return Math.ceil(Math.log((0,r.A)(t))/Math.LN2)+1}},12801:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>a,sG:()=>u});var r=Math.sqrt(50),i=Math.sqrt(10),o=Math.sqrt(2);function a(t,n,e){var a,u,c,s,f=-1;if(e=+e,(t=+t)==(n=+n)&&e>0)return[t];if((a=n<t)&&(u=t,t=n,n=u),0===(s=function(t,n,e){var a=(n-t)/Math.max(0,e),u=Math.floor(Math.log(a)/Math.LN10),c=a/Math.pow(10,u);return u>=0?(c>=r?10:c>=i?5:c>=o?2:1)*Math.pow(10,u):-Math.pow(10,-u)/(c>=r?10:c>=i?5:c>=o?2:1)}(t,n,e))||!isFinite(s))return[];if(s>0){let e=Math.round(t/s),r=Math.round(n/s);for(e*s<t&&++e,r*s>n&&--r,c=new Array(u=r-e+1);++f<u;)c[f]=(e+f)*s}else{s=-s;let e=Math.round(t*s),r=Math.round(n*s);for(e/s<t&&++e,r/s>n&&--r,c=new Array(u=r-e+1);++f<u;)c[f]=(e+f)/s}return a&&c.reverse(),c}function u(t,n,e){var a=Math.abs(n-t)/Math.max(0,e),u=Math.pow(10,Math.floor(Math.log(a)/Math.LN10)),c=a/u;return c>=r?u*=10:c>=i?u*=5:c>=o&&(u*=2),n<t?-u:u}},23549:(t,n,e)=>{"use strict";function r(t){for(var n=0,e=t.length,r=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];++n<e;)r+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return r}e.d(n,{A:()=>r})},89867:(t,n,e)=>{"use strict";e.d(n,{d:()=>r});var r=Array.prototype.slice},90792:(t,n,e)=>{"use strict";function r(t,n){return t-n}e.d(n,{A:()=>r})},75213:(t,n,e)=>{"use strict";function r(t,n,e){for(var r=t.width,i=t.height,o=1+(e<<1),a=0;a<i;++a)for(var u=0,c=0;u<r+e;++u)u<r&&(c+=t.data[u+a*r]),u>=e&&(u>=o&&(c-=t.data[u-o+a*r]),n.data[u-e+a*r]=c/Math.min(u+1,r-1+o-u,o))}function i(t,n,e){for(var r=t.width,i=t.height,o=1+(e<<1),a=0;a<r;++a)for(var u=0,c=0;u<i+e;++u)u<i&&(c+=t.data[a+u*r]),u>=e&&(u>=o&&(c-=t.data[a+(u-o)*r]),n.data[a+(u-e)*r]=c/Math.min(u+1,i-1+o-u,o))}e.d(n,{b:()=>i,i:()=>r})},77400:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=t=>()=>t},18129:(t,n,e)=>{"use strict";function r(t,n){for(var e,r=-1,o=n.length;++r<o;)if(e=i(t,n[r]))return e;return 0}function i(t,n){for(var e=n[0],r=n[1],i=-1,a=0,u=t.length,c=u-1;a<u;c=a++){var s=t[a],f=s[0],l=s[1],h=t[c],d=h[0],p=h[1];if(o(s,h,n))return 0;l>r!=p>r&&e<(d-f)*(r-l)/(p-l)+f&&(i=-i)}return i}function o(t,n,e){var r,i,o,a;return function(t,n,e){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])}(t,n,e)&&(i=t[r=+(t[0]===n[0])],o=e[r],a=n[r],i<=o&&o<=a||a<=o&&o<=i)}e.d(n,{A:()=>r})},74431:(t,n,e)=>{"use strict";e.d(n,{A:()=>d});var r=e(85046),i=e(74035),o=e(12801),a=e(89867),u=e(90792),c=e(23549),s=e(77400),f=e(18129),l=e(2208),h=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function d(){var t=1,n=1,e=r.A,d=v;function p(t){var n=e(t);if(Array.isArray(n))n=n.slice().sort(u.A);else{const e=(0,i.A)(t),r=(0,o.sG)(e[0],e[1],n);n=(0,o.Ay)(Math.floor(e[0]/r)*r,Math.floor(e[1]/r-1)*r,n)}return n.map((n=>g(t,n)))}function g(e,r){var i=[],o=[];return function(e,r,i){var o,a,u,c,s,f,l=new Array,d=new Array;for(o=a=-1,c=e[0]>=r,h[c<<1].forEach(p);++o<t-1;)u=c,c=e[o+1]>=r,h[u|c<<1].forEach(p);for(h[0|c].forEach(p);++a<n-1;){for(o=-1,c=e[a*t+t]>=r,s=e[a*t]>=r,h[c<<1|s<<2].forEach(p);++o<t-1;)u=c,c=e[a*t+t+o+1]>=r,f=s,s=e[a*t+o+1]>=r,h[u|c<<1|s<<2|f<<3].forEach(p);h[c|s<<3].forEach(p)}for(o=-1,s=e[a*t]>=r,h[s<<2].forEach(p);++o<t-1;)f=s,s=e[a*t+o+1]>=r,h[s<<2|f<<3].forEach(p);function p(t){var n,e,r=[t[0][0]+o,t[0][1]+a],u=[t[1][0]+o,t[1][1]+a],c=y(r),s=y(u);(n=d[c])?(e=l[s])?(delete d[n.end],delete l[e.start],n===e?(n.ring.push(u),i(n.ring)):l[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete d[n.end],n.ring.push(u),d[n.end=s]=n):(n=l[s])?(e=d[c])?(delete l[n.start],delete d[e.end],n===e?(n.ring.push(u),i(n.ring)):l[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete l[n.start],n.ring.unshift(r),l[n.start=c]=n):l[c]=d[s]={start:c,end:s,ring:[r,u]}}h[s<<3].forEach(p)}(e,r,(function(t){d(t,e,r),(0,c.A)(t)>0?i.push([t]):o.push(t)})),o.forEach((function(t){for(var n,e=0,r=i.length;e<r;++e)if(-1!==(0,f.A)((n=i[e])[0],t))return void n.push(t)})),{type:"MultiPolygon",value:r,coordinates:i}}function y(n){return 2*n[0]+n[1]*(t+1)*4}function v(e,r,i){e.forEach((function(e){var o,a=e[0],u=e[1],c=0|a,s=0|u,f=r[s*t+c];a>0&&a<t&&c===a&&(o=r[s*t+c-1],e[0]=a+(i-o)/(f-o)-.5),u>0&&u<n&&s===u&&(o=r[(s-1)*t+c],e[1]=u+(i-o)/(f-o)-.5)}))}return p.contour=g,p.size=function(e){if(!arguments.length)return[t,n];var r=Math.floor(e[0]),i=Math.floor(e[1]);if(!(r>=0&&i>=0))throw new Error("invalid size");return t=r,n=i,p},p.thresholds=function(t){return arguments.length?(e="function"==typeof t?t:Array.isArray(t)?(0,s.A)(a.d.call(t)):(0,s.A)(t),p):e},p.smooth=function(t){return arguments.length?(d=t?v:l.A,p):d===v},p}},95826:(t,n,e)=>{"use strict";e.d(n,{A:()=>d});var r=e(61517),i=e(12801),o=e(35674),a=e(89867),u=e(75213),c=e(77400),s=e(74431);function f(t){return t[0]}function l(t){return t[1]}function h(){return 1}function d(){var t=f,n=l,e=h,d=960,p=500,g=20,y=2,v=3*g,_=d+2*v>>y,m=p+2*v>>y,b=(0,c.A)(20);function A(a){var c=new Float32Array(_*m),f=new Float32Array(_*m),l=Math.pow(2,-y);a.forEach((function(r,i,o){var a=(t(r,i,o)+v)*l,u=(n(r,i,o)+v)*l,s=+e(r,i,o);if(a>=0&&a<_&&u>=0&&u<m){var f=Math.floor(a),h=Math.floor(u),d=a-f-.5,p=u-h-.5;c[f+h*_]+=(1-d)*(1-p)*s,c[f+1+h*_]+=d*(1-p)*s,c[f+1+(h+1)*_]+=d*p*s,c[f+(h+1)*_]+=(1-d)*p*s}})),(0,u.i)({width:_,height:m,data:c},{width:_,height:m,data:f},g>>y),(0,u.b)({width:_,height:m,data:f},{width:_,height:m,data:c},g>>y),(0,u.i)({width:_,height:m,data:c},{width:_,height:m,data:f},g>>y),(0,u.b)({width:_,height:m,data:f},{width:_,height:m,data:c},g>>y),(0,u.i)({width:_,height:m,data:c},{width:_,height:m,data:f},g>>y),(0,u.b)({width:_,height:m,data:f},{width:_,height:m,data:c},g>>y);var h=b(c);if(!Array.isArray(h)){var d=(0,r.A)(c);h=(0,i.sG)(0,d,h),(h=(0,o.A)(0,Math.floor(d/h)*h,h)).shift()}return(0,s.A)().thresholds(h).size([_,m])(c).map(x)}function x(t){return t.value*=Math.pow(2,-2*y),t.coordinates.forEach(w),t}function w(t){t.forEach(M)}function M(t){t.forEach(T)}function T(t){t[0]=t[0]*Math.pow(2,y)-v,t[1]=t[1]*Math.pow(2,y)-v}function N(){return _=d+2*(v=3*g)>>y,m=p+2*v>>y,A}return A.x=function(n){return arguments.length?(t="function"==typeof n?n:(0,c.A)(+n),A):t},A.y=function(t){return arguments.length?(n="function"==typeof t?t:(0,c.A)(+t),A):n},A.weight=function(t){return arguments.length?(e="function"==typeof t?t:(0,c.A)(+t),A):e},A.size=function(t){if(!arguments.length)return[d,p];var n=+t[0],e=+t[1];if(!(n>=0&&e>=0))throw new Error("invalid size");return d=n,p=e,N()},A.cellSize=function(t){if(!arguments.length)return 1<<y;if(!((t=+t)>=1))throw new Error("invalid cell size");return y=Math.floor(Math.log(t)/Math.LN2),N()},A.thresholds=function(t){return arguments.length?(b="function"==typeof t?t:Array.isArray(t)?(0,c.A)(a.d.call(t)):(0,c.A)(t),A):b},A.bandwidth=function(t){if(!arguments.length)return Math.sqrt(g*(g+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return g=Math.round((Math.sqrt(4*t*t+1)-1)/2),N()},A}},87830:(t,n,e)=>{"use strict";e.d(n,{f:()=>i.A,m:()=>r.A});var r=e(74431),i=e(95826)},2208:(t,n,e)=>{"use strict";function r(){}e.d(n,{A:()=>r})},27918:(t,n,e)=>{"use strict";e.d(n,{A:()=>h});var r=e(68510),i=e(80368),o=e(41997),a=e(32193);const u=2*Math.PI,c=Math.pow;function s(t){return t[0]}function f(t){return t[1]}function l(t,n,e){return[t+Math.sin(t+n)*e,n+Math.cos(t-n)*e]}class h{static from(t,n=s,e=f,r){return new h("length"in t?function(t,n,e,r){const i=t.length,o=new Float64Array(2*i);for(let a=0;a<i;++a){const i=t[a];o[2*a]=n.call(r,i,a,t),o[2*a+1]=e.call(r,i,a,t)}return o}(t,n,e,r):Float64Array.from(function*(t,n,e,r){let i=0;for(const o of t)yield n.call(r,o,i,t),yield e.call(r,o,i,t),++i}(t,n,e,r)))}constructor(t){this._delaunator=new r.A(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&function(t){const{triangles:n,coords:e}=t;for(let t=0;t<n.length;t+=3){const r=2*n[t],i=2*n[t+1],o=2*n[t+2];if((e[o]-e[r])*(e[i+1]-e[r+1])-(e[i]-e[r])*(e[o+1]-e[r+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:n.length/2},((t,n)=>n)).sort(((t,e)=>n[2*t]-n[2*e]||n[2*t+1]-n[2*e+1]));const t=this.collinear[0],e=this.collinear[this.collinear.length-1],i=[n[2*t],n[2*t+1],n[2*e],n[2*e+1]],o=1e-8*Math.hypot(i[3]-i[1],i[2]-i[0]);for(let t=0,e=n.length/2;t<e;++t){const e=l(n[2*t],n[2*t+1],o);n[2*t]=e[0],n[2*t+1]=e[1]}this._delaunator=new r.A(n)}else delete this.collinear;const e=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),u=this._hullIndex.fill(-1);for(let t=0,n=e.length;t<n;++t){const n=o[t%3==2?t-2:t+1];-1!==e[t]&&-1!==a[n]||(a[n]=t)}for(let t=0,n=i.length;t<n;++t)u[i[t]]=t;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],a[i[0]]=1,2===i.length&&(a[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new a.A(this,t)}*neighbors(t){const{inedges:n,hull:e,_hullIndex:r,halfedges:i,triangles:o,collinear:a}=this;if(a){const n=a.indexOf(t);return n>0&&(yield a[n-1]),void(n<a.length-1&&(yield a[n+1]))}const u=n[t];if(-1===u)return;let c=u,s=-1;do{if(yield s=o[c],c=c%3==2?c-2:c+1,o[c]!==t)return;if(c=i[c],-1===c){const n=e[(r[t]+1)%e.length];return void(n!==s&&(yield n))}}while(c!==u)}find(t,n,e=0){if((t=+t)!=t||(n=+n)!=n)return-1;const r=e;let i;for(;(i=this._step(e,t,n))>=0&&i!==e&&i!==r;)e=i;return i}_step(t,n,e){const{inedges:r,hull:i,_hullIndex:o,halfedges:a,triangles:u,points:s}=this;if(-1===r[t]||!s.length)return(t+1)%(s.length>>1);let f=t,l=c(n-s[2*t],2)+c(e-s[2*t+1],2);const h=r[t];let d=h;do{let r=u[d];const h=c(n-s[2*r],2)+c(e-s[2*r+1],2);if(h<l&&(l=h,f=r),d=d%3==2?d-2:d+1,u[d]!==t)break;if(d=a[d],-1===d){if(d=i[(o[t]+1)%i.length],d!==r&&c(n-s[2*d],2)+c(e-s[2*d+1],2)<l)return d;break}}while(d!==h);return f}render(t){const n=null==t?t=new i.A:void 0,{points:e,halfedges:r,triangles:o}=this;for(let n=0,i=r.length;n<i;++n){const i=r[n];if(i<n)continue;const a=2*o[n],u=2*o[i];t.moveTo(e[a],e[a+1]),t.lineTo(e[u],e[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){void 0!==n||t&&"function"==typeof t.moveTo||(n=t,t=null),n=null==n?2:+n;const e=null==t?t=new i.A:void 0,{points:r}=this;for(let e=0,i=r.length;e<i;e+=2){const i=r[e],o=r[e+1];t.moveTo(i+n,o),t.arc(i,o,n,0,u)}return e&&e.value()}renderHull(t){const n=null==t?t=new i.A:void 0,{hull:e,points:r}=this,o=2*e[0],a=e.length;t.moveTo(r[o],r[o+1]);for(let n=1;n<a;++n){const i=2*e[n];t.lineTo(r[i],r[i+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new o.A;return this.renderHull(t),t.value()}renderTriangle(t,n){const e=null==n?n=new i.A:void 0,{points:r,triangles:o}=this,a=2*o[t*=3],u=2*o[t+1],c=2*o[t+2];return n.moveTo(r[a],r[a+1]),n.lineTo(r[u],r[u+1]),n.lineTo(r[c],r[c+1]),n.closePath(),e&&e.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,e=t.length/3;n<e;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new o.A;return this.renderTriangle(t,n),n.value()}}},72751:(t,n,e)=>{"use strict";e.d(n,{l:()=>i.A,w:()=>r.A});var r=e(27918),i=e(32193)},80368:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});const r=1e-6;class i{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,e){const i=(t=+t)+(e=+e),o=n=+n;if(e<0)throw new Error("negative radius");null===this._x1?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>r||Math.abs(this._y1-o)>r)&&(this._+="L"+i+","+o),e&&(this._+=`A${e},${e},0,1,1,${t-e},${n}A${e},${e},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,e,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+e}v${+r}h${-e}Z`}value(){return this._||null}}},41997:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});class r{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}},32193:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(80368),i=e(41997);class o{constructor(t,[n,e,r,i]=[0,0,960,500]){if(!((r=+r)>=(n=+n)&&(i=+i)>=(e=+e)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=n,this.ymax=i,this.ymin=e,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:e},vectors:r}=this,i=this.circumcenters=this._circumcenters.subarray(0,e.length/3*2);for(let n,r,o=0,a=0,u=e.length;o<u;o+=3,a+=2){const u=2*e[o],c=2*e[o+1],s=2*e[o+2],f=t[u],l=t[u+1],h=t[c],d=t[c+1],p=t[s],g=t[s+1],y=h-f,v=d-l,_=p-f,m=g-l,b=2*(y*m-v*_);if(Math.abs(b)<1e-9){let i=1e9;const o=2*e[0];i*=Math.sign((t[o]-f)*m-(t[o+1]-l)*_),n=(f+p)/2-i*m,r=(l+g)/2+i*_}else{const t=1/b,e=y*y+v*v,i=_*_+m*m;n=f+(m*e-v*i)*t,r=l+(y*i-_*e)*t}i[a]=n,i[a+1]=r}let o,a,u,c=n[n.length-1],s=4*c,f=t[2*c],l=t[2*c+1];r.fill(0);for(let e=0;e<n.length;++e)c=n[e],o=s,a=f,u=l,s=4*c,f=t[2*c],l=t[2*c+1],r[o+2]=r[s]=u-l,r[o+3]=r[s+1]=f-a}render(t){const n=null==t?t=new r.A:void 0,{delaunay:{halfedges:e,inedges:i,hull:o},circumcenters:a,vectors:u}=this;if(o.length<=1)return null;for(let n=0,r=e.length;n<r;++n){const r=e[n];if(r<n)continue;const i=2*Math.floor(n/3),o=2*Math.floor(r/3),u=a[i],c=a[i+1],s=a[o],f=a[o+1];this._renderSegment(u,c,s,f,t)}let c,s=o[o.length-1];for(let n=0;n<o.length;++n){c=s,s=o[n];const e=2*Math.floor(i[s]/3),r=a[e],f=a[e+1],l=4*c,h=this._project(r,f,u[l+2],u[l+3]);h&&this._renderSegment(r,f,h[0],h[1],t)}return n&&n.value()}renderBounds(t){const n=null==t?t=new r.A:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const e=null==n?n=new r.A:void 0,i=this._clip(t);if(null===i||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let t=2;t<o;t+=2)i[t]===i[t-2]&&i[t+1]===i[t-1]||n.lineTo(i[t],i[t+1]);return n.closePath(),e&&e.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,e=t.length/2;n<e;++n){const t=this.cellPolygon(n);t&&(t.index=n,yield t)}}cellPolygon(t){const n=new i.A;return this.renderCell(t,n),n.value()}_renderSegment(t,n,e,r,i){let o;const a=this._regioncode(t,n),u=this._regioncode(e,r);0===a&&0===u?(i.moveTo(t,n),i.lineTo(e,r)):(o=this._clipSegment(t,n,e,r,a,u))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(t,n,e){return(n=+n)==n&&(e=+e)==e&&this.delaunay._step(t,n,e)===t}*neighbors(t){const n=this._clip(t);if(n)for(const e of this.delaunay.neighbors(t)){const t=this._clip(e);if(t)t:for(let r=0,i=n.length;r<i;r+=2)for(let o=0,a=t.length;o<a;o+=2)if(n[r]==t[o]&&n[r+1]==t[o+1]&&n[(r+2)%i]==t[(o+a-2)%a]&&n[(r+3)%i]==t[(o+a-1)%a]){yield e;break t}}}_cell(t){const{circumcenters:n,delaunay:{inedges:e,halfedges:r,triangles:i}}=this,o=e[t];if(-1===o)return null;const a=[];let u=o;do{const e=Math.floor(u/3);if(a.push(n[2*e],n[2*e+1]),u=u%3==2?u-2:u+1,i[u]!==t)break;u=r[u]}while(u!==o&&-1!==u);return a}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(null===n)return null;const{vectors:e}=this,r=4*t;return e[r]||e[r+1]?this._clipInfinite(t,n,e[r],e[r+1],e[r+2],e[r+3]):this._clipFinite(t,n)}_clipFinite(t,n){const e=n.length;let r,i,o,a,u=null,c=n[e-2],s=n[e-1],f=this._regioncode(c,s),l=0;for(let h=0;h<e;h+=2)if(r=c,i=s,c=n[h],s=n[h+1],o=f,f=this._regioncode(c,s),0===o&&0===f)a=l,l=0,u?u.push(c,s):u=[c,s];else{let n,e,h,d,p;if(0===o){if(null===(n=this._clipSegment(r,i,c,s,o,f)))continue;[e,h,d,p]=n}else{if(null===(n=this._clipSegment(c,s,r,i,f,o)))continue;[d,p,e,h]=n,a=l,l=this._edgecode(e,h),a&&l&&this._edge(t,a,l,u,u.length),u?u.push(e,h):u=[e,h]}a=l,l=this._edgecode(d,p),a&&l&&this._edge(t,a,l,u,u.length),u?u.push(d,p):u=[d,p]}if(u)a=l,l=this._edgecode(u[0],u[1]),a&&l&&this._edge(t,a,l,u,u.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}_clipSegment(t,n,e,r,i,o){for(;;){if(0===i&&0===o)return[t,n,e,r];if(i&o)return null;let a,u,c=i||o;8&c?(a=t+(e-t)*(this.ymax-n)/(r-n),u=this.ymax):4&c?(a=t+(e-t)*(this.ymin-n)/(r-n),u=this.ymin):2&c?(u=n+(r-n)*(this.xmax-t)/(e-t),a=this.xmax):(u=n+(r-n)*(this.xmin-t)/(e-t),a=this.xmin),i?(t=a,n=u,i=this._regioncode(t,n)):(e=a,r=u,o=this._regioncode(e,r))}}_clipInfinite(t,n,e,r,i,o){let a,u=Array.from(n);if((a=this._project(u[0],u[1],e,r))&&u.unshift(a[0],a[1]),(a=this._project(u[u.length-2],u[u.length-1],i,o))&&u.push(a[0],a[1]),u=this._clipFinite(t,u))for(let n,e=0,r=u.length,i=this._edgecode(u[r-2],u[r-1]);e<r;e+=2)n=i,i=this._edgecode(u[e],u[e+1]),n&&i&&(e=this._edge(t,n,i,u,e),r=u.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(u=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return u}_edge(t,n,e,r,i){for(;n!==e;){let e,o;switch(n){case 5:n=4;continue;case 4:n=6,e=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,e=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,e=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,e=this.xmin,o=this.ymin}r[i]===e&&r[i+1]===o||!this.contains(t,e,o)||(r.splice(i,0,e,o),i+=2)}if(r.length>4)for(let t=0;t<r.length;t+=2){const n=(t+2)%r.length,e=(t+4)%r.length;(r[t]===r[n]&&r[n]===r[e]||r[t+1]===r[n+1]&&r[n+1]===r[e+1])&&(r.splice(n,2),t-=2)}return i}_project(t,n,e,r){let i,o,a,u=1/0;if(r<0){if(n<=this.ymin)return null;(i=(this.ymin-n)/r)<u&&(a=this.ymin,o=t+(u=i)*e)}else if(r>0){if(n>=this.ymax)return null;(i=(this.ymax-n)/r)<u&&(a=this.ymax,o=t+(u=i)*e)}if(e>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/e)<u&&(o=this.xmax,a=n+(u=i)*r)}else if(e<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/e)<u&&(o=this.xmin,a=n+(u=i)*r)}return[o,a]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}},65698:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=t=>()=>t},4404:(t,n,e)=>{"use strict";e.d(n,{A:()=>p});var r=e(80853),i=e(95556),o=e(62675),a=e(97655),u=e(40509),c=e(65698),s=e(53240);function f(t){return!t.ctrlKey&&!t.button}function l(){return this.parentNode}function h(t,n){return null==n?{x:t.x,y:t.y}:n}function d(){return navigator.maxTouchPoints||"ontouchstart"in this}function p(){var t,n,e,p,g=f,y=l,v=h,_=d,m={},b=(0,r.A)("start","drag","end"),A=0,x=0;function w(t){t.on("mousedown.drag",M).filter(_).on("touchstart.drag",S).on("touchmove.drag",k,u.vr).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function M(r,o){if(!p&&g.call(this,r,o)){var c=C(this,y.call(this,r,o),r,o,"mouse");c&&((0,i.A)(r.view).on("mousemove.drag",T,u.Rw).on("mouseup.drag",N,u.Rw),(0,a.A)(r.view),(0,u.GK)(r),e=!1,t=r.clientX,n=r.clientY,c("start",r))}}function T(r){if((0,u.Ay)(r),!e){var i=r.clientX-t,o=r.clientY-n;e=i*i+o*o>x}m.mouse("drag",r)}function N(t){(0,i.A)(t.view).on("mousemove.drag mouseup.drag",null),(0,a.y)(t.view,e),(0,u.Ay)(t),m.mouse("end",t)}function S(t,n){if(g.call(this,t,n)){var e,r,i=t.changedTouches,o=y.call(this,t,n),a=i.length;for(e=0;e<a;++e)(r=C(this,o,t,n,i[e].identifier,i[e]))&&((0,u.GK)(t),r("start",t,i[e]))}}function k(t){var n,e,r=t.changedTouches,i=r.length;for(n=0;n<i;++n)(e=m[r[n].identifier])&&((0,u.Ay)(t),e("drag",t,r[n]))}function E(t){var n,e,r=t.changedTouches,i=r.length;for(p&&clearTimeout(p),p=setTimeout((function(){p=null}),500),n=0;n<i;++n)(e=m[r[n].identifier])&&((0,u.GK)(t),e("end",t,r[n]))}function C(t,n,e,r,i,a){var u,c,f,l=b.copy(),h=(0,o.A)(a||e,n);if(null!=(f=v.call(t,new s.A("beforestart",{sourceEvent:e,target:w,identifier:i,active:A,x:h[0],y:h[1],dx:0,dy:0,dispatch:l}),r)))return u=f.x-h[0]||0,c=f.y-h[1]||0,function e(a,d,p){var g,y=h;switch(a){case"start":m[i]=e,g=A++;break;case"end":delete m[i],--A;case"drag":h=(0,o.A)(p||d,n),g=A}l.call(a,t,new s.A(a,{sourceEvent:d,subject:f,target:w,identifier:i,active:g,x:h[0]+u,y:h[1]+c,dx:h[0]-y[0],dy:h[1]-y[1],dispatch:l}),r)}}return w.filter=function(t){return arguments.length?(g="function"==typeof t?t:(0,c.A)(!!t),w):g},w.container=function(t){return arguments.length?(y="function"==typeof t?t:(0,c.A)(t),w):y},w.subject=function(t){return arguments.length?(v="function"==typeof t?t:(0,c.A)(t),w):v},w.touchable=function(t){return arguments.length?(_="function"==typeof t?t:(0,c.A)(!!t),w):_},w.on=function(){var t=b.on.apply(b,arguments);return t===b?w:t},w.clickDistance=function(t){return arguments.length?(x=(t=+t)*t,w):Math.sqrt(x)},w}},53240:(t,n,e)=>{"use strict";function r(t,{sourceEvent:n,subject:e,target:r,identifier:i,active:o,x:a,y:u,dx:c,dy:s,dispatch:f}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:s,enumerable:!0,configurable:!0},_:{value:f}})}e.d(n,{A:()=>r}),r.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t}},9180:(t,n,e)=>{"use strict";e.d(n,{$E:()=>r.A,EH:()=>i.y,XD:()=>i.A});var r=e(4404),i=e(97655)},97655:(t,n,e)=>{"use strict";e.d(n,{A:()=>o,y:()=>a});var r=e(95556),i=e(40509);function o(t){var n=t.document.documentElement,e=(0,r.A)(t).on("dragstart.drag",i.Ay,i.Rw);"onselectstart"in n?e.on("selectstart.drag",i.Ay,i.Rw):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function a(t,n){var e=t.document.documentElement,o=(0,r.A)(t).on("dragstart.drag",null);n&&(o.on("click.drag",i.Ay,i.Rw),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in e?o.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}},40509:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>a,GK:()=>o,Rw:()=>i,vr:()=>r});const r={passive:!1},i={capture:!0,passive:!1};function o(t){t.stopImmediatePropagation()}function a(t){t.preventDefault(),t.stopImmediatePropagation()}},17630:(t,n,e)=>{"use strict";function r(t){for(var n in t){var e,r,o=t[n].trim();if(o)if("true"===o)o=!0;else if("false"===o)o=!1;else if("NaN"===o)o=NaN;else if(isNaN(e=+o)){if(!(r=o.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;i&&r[4]&&!r[7]&&(o=o.replace(/-/g,"/").replace(/T/," ")),o=new Date(o)}else o=e;else o=null;t[n]=o}return t}e.d(n,{A:()=>r});const i=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours()},56709:(t,n,e)=>{"use strict";e.d(n,{Un:()=>u,e2:()=>a,fy:()=>o,hG:()=>c,oz:()=>s,sw:()=>i,zB:()=>f});var r=(0,e(52788).A)(","),i=r.parse,o=r.parseRows,a=r.format,u=r.formatBody,c=r.formatRows,s=r.formatRow,f=r.formatValue},52788:(t,n,e)=>{"use strict";e.d(n,{A:()=>l});var r={},i={},o=34,a=10,u=13;function c(t){return new Function("d","return {"+t.map((function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'})).join(",")+"}")}function s(t){var n=Object.create(null),e=[];return t.forEach((function(t){for(var r in t)r in n||e.push(n[r]=r)})),e}function f(t,n){var e=t+"",r=e.length;return r<n?new Array(n-r+1).join(0)+e:e}function l(t){var n=new RegExp('["'+t+"\n\r]"),e=t.charCodeAt(0);function l(t,n){var c,s=[],f=t.length,l=0,h=0,d=f<=0,p=!1;function g(){if(d)return i;if(p)return p=!1,r;var n,c,s=l;if(t.charCodeAt(s)===o){for(;l++<f&&t.charCodeAt(l)!==o||t.charCodeAt(++l)===o;);return(n=l)>=f?d=!0:(c=t.charCodeAt(l++))===a?p=!0:c===u&&(p=!0,t.charCodeAt(l)===a&&++l),t.slice(s+1,n-1).replace(/""/g,'"')}for(;l<f;){if((c=t.charCodeAt(n=l++))===a)p=!0;else if(c===u)p=!0,t.charCodeAt(l)===a&&++l;else if(c!==e)continue;return t.slice(s,n)}return d=!0,t.slice(s,f)}for(t.charCodeAt(f-1)===a&&--f,t.charCodeAt(f-1)===u&&--f;(c=g())!==i;){for(var y=[];c!==r&&c!==i;)y.push(c),c=g();n&&null==(y=n(y,h++))||s.push(y)}return s}function h(n,e){return n.map((function(n){return e.map((function(t){return p(n[t])})).join(t)}))}function d(n){return n.map(p).join(t)}function p(t){return null==t?"":t instanceof Date?(i=(e=t).getUTCHours(),o=e.getUTCMinutes(),a=e.getUTCSeconds(),u=e.getUTCMilliseconds(),isNaN(e)?"Invalid Date":((r=e.getUTCFullYear())<0?"-"+f(-r,6):r>9999?"+"+f(r,6):f(r,4))+"-"+f(e.getUTCMonth()+1,2)+"-"+f(e.getUTCDate(),2)+(u?"T"+f(i,2)+":"+f(o,2)+":"+f(a,2)+"."+f(u,3)+"Z":a?"T"+f(i,2)+":"+f(o,2)+":"+f(a,2)+"Z":o||i?"T"+f(i,2)+":"+f(o,2)+"Z":"")):n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t;var e,r,i,o,a,u}return{parse:function(t,n){var e,r,i=l(t,(function(t,i){if(e)return e(t,i-1);r=t,e=n?function(t,n){var e=c(t);return function(r,i){return n(e(r),i,t)}}(t,n):c(t)}));return i.columns=r||[],i},parseRows:l,format:function(n,e){return null==e&&(e=s(n)),[e.map(p).join(t)].concat(h(n,e)).join("\n")},formatBody:function(t,n){return null==n&&(n=s(t)),h(t,n).join("\n")},formatRows:function(t){return t.map(d).join("\n")},formatRow:d,formatValue:p}}},35329:(t,n,e)=>{"use strict";e.d(n,{CL:()=>o.CL,F2:()=>o.F2,Fg:()=>r.A,KS:()=>o.KS,Nc:()=>o.Nc,Nu:()=>o.Nu,Un:()=>i.Un,cG:()=>a.A,cP:()=>o.cP,e2:()=>i.e2,fy:()=>i.fy,hG:()=>i.hG,oz:()=>i.oz,pn:()=>o.pn,sw:()=>i.sw,zB:()=>i.zB});var r=e(52788),i=e(56709),o=e(97252),a=e(17630)},97252:(t,n,e)=>{"use strict";e.d(n,{CL:()=>f,F2:()=>u,KS:()=>c,Nc:()=>a,Nu:()=>i,cP:()=>o,pn:()=>s});var r=(0,e(52788).A)("\t"),i=r.parse,o=r.parseRows,a=r.format,u=r.formatBody,c=r.formatRows,s=r.formatRow,f=r.formatValue},14577:(t,n,e)=>{"use strict";e.d(n,{Sz:()=>o,ZZ:()=>a,dg:()=>i});var r=1.70158,i=function t(n){function e(t){return(t=+t)*t*(n*(t-1)+t)}return n=+n,e.overshoot=t,e}(r),o=function t(n){function e(t){return--t*t*((t+1)*n+t)+1}return n=+n,e.overshoot=t,e}(r),a=function t(n){function e(t){return((t*=2)<1?t*t*((n+1)*t-n):(t-=2)*t*((n+1)*t+n)+2)/2}return n=+n,e.overshoot=t,e}(r)},34282:(t,n,e)=>{"use strict";e.d(n,{Te:()=>p,ip:()=>d,wm:()=>g});var r=4/11,i=6/11,o=8/11,a=3/4,u=9/11,c=10/11,s=15/16,f=21/22,l=63/64,h=1/r/r;function d(t){return 1-p(1-t)}function p(t){return(t=+t)<r?h*t*t:t<o?h*(t-=i)*t+a:t<c?h*(t-=u)*t+s:h*(t-=f)*t+l}function g(t){return((t*=2)<=1?1-p(1-t):p(t-1)+1)/2}},13806:(t,n,e)=>{"use strict";function r(t){return 1-Math.sqrt(1-t*t)}function i(t){return Math.sqrt(1- --t*t)}function o(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}e.d(n,{NZ:()=>i,OJ:()=>o,St:()=>r})},70194:(t,n,e)=>{"use strict";function r(t){return t*t*t}function i(t){return--t*t*t+1}function o(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}e.d(n,{EY:()=>r,Jx:()=>i,wq:()=>o})},37091:(t,n,e)=>{"use strict";e.d(n,{Hp:()=>u,I7:()=>a,Rp:()=>o});var r=e(36920),i=2*Math.PI,o=function t(n,e){var o=Math.asin(1/(n=Math.max(1,n)))*(e/=i);function a(t){return n*(0,r.E)(- --t)*Math.sin((o-t)/e)}return a.amplitude=function(n){return t(n,e*i)},a.period=function(e){return t(n,e)},a}(1,.3),a=function t(n,e){var o=Math.asin(1/(n=Math.max(1,n)))*(e/=i);function a(t){return 1-n*(0,r.E)(t=+t)*Math.sin((t+o)/e)}return a.amplitude=function(n){return t(n,e*i)},a.period=function(e){return t(n,e)},a}(1,.3),u=function t(n,e){var o=Math.asin(1/(n=Math.max(1,n)))*(e/=i);function a(t){return((t=2*t-1)<0?n*(0,r.E)(-t)*Math.sin((o-t)/e):2-n*(0,r.E)(t)*Math.sin((o+t)/e))/2}return a.amplitude=function(n){return t(n,e*i)},a.period=function(e){return t(n,e)},a}(1,.3)},20483:(t,n,e)=>{"use strict";e.d(n,{bp:()=>a,qw:()=>o,x9:()=>i});var r=e(36920);function i(t){return(0,r.E)(1-+t)}function o(t){return 1-(0,r.E)(t)}function a(t){return((t*=2)<=1?(0,r.E)(1-t):2-(0,r.E)(t-1))/2}},1580:(t,n,e)=>{"use strict";e.d(n,{$S:()=>i.bl,Ce:()=>u.i5,Cg:()=>s.OJ,D6:()=>h.Hp,GD:()=>c.qw,I1:()=>i.T_,IO:()=>c.bp,Ib:()=>l.ZZ,JK:()=>f.Te,LO:()=>s.OJ,M1:()=>o.EY,Ol:()=>a.Yd,Su:()=>f.ip,TD:()=>o.Jx,W2:()=>s.St,Xv:()=>a.U7,YX:()=>u.yV,Z8:()=>l.ZZ,_9:()=>h.I7,g$:()=>f.wm,g9:()=>l.Sz,gH:()=>i.yv,gu:()=>h.I7,jt:()=>s.NZ,mx:()=>a.U7,nW:()=>a.jZ,oR:()=>o.wq,pd:()=>u.i5,rS:()=>c.bp,r_:()=>f.Te,rh:()=>h.Rp,ro:()=>l.dg,tU:()=>u.vq,vH:()=>c.x9,xA:()=>i.T_,yf:()=>r.s,z6:()=>o.wq});var r=e(21467),i=e(1861),o=e(70194),a=e(65776),u=e(71642),c=e(20483),s=e(13806),f=e(34282),l=e(14577),h=e(37091)},21467:(t,n,e)=>{"use strict";e.d(n,{s:()=>r});const r=t=>+t},36920:(t,n,e)=>{"use strict";function r(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}e.d(n,{E:()=>r})},65776:(t,n,e)=>{"use strict";e.d(n,{U7:()=>o,Yd:()=>r,jZ:()=>i});var r=function t(n){function e(t){return Math.pow(t,n)}return n=+n,e.exponent=t,e}(3),i=function t(n){function e(t){return 1-Math.pow(1-t,n)}return n=+n,e.exponent=t,e}(3),o=function t(n){function e(t){return((t*=2)<=1?Math.pow(t,n):2-Math.pow(2-t,n))/2}return n=+n,e.exponent=t,e}(3)},1861:(t,n,e)=>{"use strict";function r(t){return t*t}function i(t){return t*(2-t)}function o(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}e.d(n,{T_:()=>o,bl:()=>r,yv:()=>i})},71642:(t,n,e)=>{"use strict";e.d(n,{i5:()=>u,vq:()=>a,yV:()=>o});var r=Math.PI,i=r/2;function o(t){return 1==+t?1:1-Math.cos(t*i)}function a(t){return Math.sin(t*i)}function u(t){return(1-Math.cos(r*t))/2}},4309:(t,n,e)=>{"use strict";function r(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function i(t,n){return fetch(t,n).then(r)}e.d(n,{A:()=>i})},86936:(t,n,e)=>{"use strict";function r(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function i(t,n){return fetch(t,n).then(r)}e.d(n,{A:()=>i})},12245:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>c,KZ:()=>f,fu:()=>s});var r=e(52788),i=e(56709),o=e(97252),a=e(85961);function u(t){return function(n,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=void 0),(0,a.A)(n,e).then((function(n){return t(n,r)}))}}function c(t,n,e,i){3===arguments.length&&"function"==typeof e&&(i=e,e=void 0);var o=(0,r.A)(t);return(0,a.A)(n,e).then((function(t){return o.parse(t,i)}))}var s=u(i.sw),f=u(o.Nu)},13237:(t,n,e)=>{"use strict";function r(t,n){return new Promise((function(e,r){var i=new Image;for(var o in n)i[o]=n[o];i.onerror=r,i.onload=function(){e(i)},i.src=t}))}e.d(n,{A:()=>r})},4728:(t,n,e)=>{"use strict";e.d(n,{JW:()=>s.JW,KZ:()=>o.KZ,Pq:()=>u.A,Qq:()=>c.A,S$:()=>o.Ay,Sl:()=>a.A,_n:()=>s.Ay,av:()=>r.A,fu:()=>o.fu,qy:()=>s.qy,r:()=>i.A});var r=e(4309),i=e(86936),o=e(12245),a=e(13237),u=e(23856),c=e(85961),s=e(90001)},23856:(t,n,e)=>{"use strict";function r(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function i(t,n){return fetch(t,n).then(r)}e.d(n,{A:()=>i})},85961:(t,n,e)=>{"use strict";function r(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function i(t,n){return fetch(t,n).then(r)}e.d(n,{A:()=>i})},90001:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>o,JW:()=>u,qy:()=>a});var r=e(85961);function i(t){return(n,e)=>(0,r.A)(n,e).then((n=>(new DOMParser).parseFromString(n,t)))}const o=i("application/xml");var a=i("text/html"),u=i("image/svg+xml")},28354:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>u,GP:()=>i,s:()=>o});var r,i,o,a=e(85947);function u(t){return r=(0,a.A)(t),i=r.format,o=r.formatPrefix,r}u({thousands:",",grouping:[3],currency:["$",""]})},63046:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(36391);function i(t){return(t=(0,r.f)(Math.abs(t)))?t[1]:NaN}},36391:(t,n,e)=>{"use strict";function r(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function i(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}e.d(n,{A:()=>r,f:()=>i})},38567:(t,n,e)=>{"use strict";function r(t,n){return function(e,r){for(var i=e.length,o=[],a=0,u=t[0],c=0;i>0&&u>0&&(c+u+1>r&&(u=Math.max(1,r-c)),o.push(e.substring(i-=u,i+u)),!((c+=u+1)>r));)u=t[a=(a+1)%t.length];return o.reverse().join(n)}}e.d(n,{A:()=>r})},90449:(t,n,e)=>{"use strict";function r(t){return function(n){return n.replace(/[0-9]/g,(function(n){return t[+n]}))}}e.d(n,{A:()=>r})},28713:(t,n,e)=>{"use strict";e.d(n,{A:()=>o,u:()=>r});var r,i=e(36391);function o(t,n){var e=(0,i.f)(t,n);if(!e)return t+"";var o=e[0],a=e[1],u=a-(r=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,c=o.length;return u===c?o:u>c?o+new Array(u-c+1).join("0"):u>0?o.slice(0,u)+"."+o.slice(u):"0."+new Array(1-u).join("0")+(0,i.f)(t,Math.max(0,n+u-1))[0]}},95905:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(36391);function i(t,n){var e=(0,r.f)(t,n);if(!e)return t+"";var i=e[0],o=e[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")}},44888:(t,n,e)=>{"use strict";e.d(n,{A:()=>i,S:()=>o});var r=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function i(t){if(!(n=r.exec(t)))throw new Error("invalid format: "+t);var n;return new o({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function o(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}i.prototype=o.prototype,o.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},18966:(t,n,e)=>{"use strict";function r(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(n+1):t}e.d(n,{A:()=>r})},66737:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(36391),i=e(28713),o=e(95905);const a={"%":(t,n)=>(100*t).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:r.A,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>(0,o.A)(100*t,n),r:o.A,s:i.A,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)}},35823:(t,n,e)=>{"use strict";function r(t){return t}e.d(n,{A:()=>r})},28881:(t,n,e)=>{"use strict";e.d(n,{GP:()=>r.GP,Gp:()=>o.A,OE:()=>i.A,Pj:()=>c.A,RT:()=>a.A,ST:()=>o.S,dT:()=>u.A,hQ:()=>r.Ay,s:()=>r.s});var r=e(28354),i=e(85947),o=e(44888),a=e(97279),u=e(7421),c=e(10129)},85947:(t,n,e)=>{"use strict";e.d(n,{A:()=>d});var r=e(63046),i=e(38567),o=e(90449),a=e(44888),u=e(18966),c=e(66737),s=e(28713),f=e(35823),l=Array.prototype.map,h=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function d(t){var n=void 0===t.grouping||void 0===t.thousands?f.A:(0,i.A)(l.call(t.grouping,Number),t.thousands+""),e=void 0===t.currency?"":t.currency[0]+"",d=void 0===t.currency?"":t.currency[1]+"",p=void 0===t.decimal?".":t.decimal+"",g=void 0===t.numerals?f.A:(0,o.A)(l.call(t.numerals,String)),y=void 0===t.percent?"%":t.percent+"",v=void 0===t.minus?"":t.minus+"",_=void 0===t.nan?"NaN":t.nan+"";function m(t){var r=(t=(0,a.A)(t)).fill,i=t.align,o=t.sign,f=t.symbol,l=t.zero,m=t.width,b=t.comma,A=t.precision,x=t.trim,w=t.type;"n"===w?(b=!0,w="g"):c.A[w]||(void 0===A&&(A=12),x=!0,w="g"),(l||"0"===r&&"="===i)&&(l=!0,r="0",i="=");var M="$"===f?e:"#"===f&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",T="$"===f?d:/[%p]/.test(w)?y:"",N=c.A[w],S=/[defgprs%]/.test(w);function k(t){var e,a,c,f=M,d=T;if("c"===w)d=N(t)+d,t="";else{var y=(t=+t)<0||1/t<0;if(t=isNaN(t)?_:N(Math.abs(t),A),x&&(t=(0,u.A)(t)),y&&0==+t&&"+"!==o&&(y=!1),f=(y?"("===o?o:v:"-"===o||"("===o?"":o)+f,d=("s"===w?h[8+s.u/3]:"")+d+(y&&"("===o?")":""),S)for(e=-1,a=t.length;++e<a;)if(48>(c=t.charCodeAt(e))||c>57){d=(46===c?p+t.slice(e+1):t.slice(e))+d,t=t.slice(0,e);break}}b&&!l&&(t=n(t,1/0));var k=f.length+t.length+d.length,E=k<m?new Array(m-k+1).join(r):"";switch(b&&l&&(t=n(E+t,E.length?m-d.length:1/0),E=""),i){case"<":t=f+t+d+E;break;case"=":t=f+E+t+d;break;case"^":t=E.slice(0,k=E.length>>1)+f+t+d+E.slice(k);break;default:t=E+f+t+d}return g(t)}return A=void 0===A?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A)),k.toString=function(){return t+""},k}return{format:m,formatPrefix:function(t,n){var e=m(((t=(0,a.A)(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor((0,r.A)(n)/3))),o=Math.pow(10,-i),u=h[8+i/3];return function(t){return e(o*t)+u}}}}},97279:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(63046);function i(t){return Math.max(0,-(0,r.A)(Math.abs(t)))}},7421:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(63046);function i(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,r.A)(n)/3)))-(0,r.A)(Math.abs(t)))}},10129:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(63046);function i(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,(0,r.A)(n)-(0,r.A)(t))+1}},70587:(t,n,e)=>{"use strict";e.d(n,{ph:()=>r});class r{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const i=n[r],o=t+i,a=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);a&&(n[e++]=a),t=o}return n[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let n,e,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(n=o,e=t[--i],o=n+e,r=e-(o-n),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(e=2*r,n=o+e,e==n-o&&(o=n))}return o}}},4356:(t,n,e)=>{"use strict";function r(t){return Array.from(function*(t){for(const n of t)yield*n}(t))}e.d(n,{A:()=>r})},88525:(t,n,e)=>{"use strict";function r(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o}e.d(n,{A:()=>r})},49756:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>m,B0:()=>h,Y7:()=>p});var r,i,o,a,u,c=e(70587),s=e(51479),f=e(25809),l=e(44373),h=new c.ph,d=new c.ph,p={point:f.A,lineStart:f.A,lineEnd:f.A,polygonStart:function(){h=new c.ph,p.lineStart=g,p.lineEnd=y},polygonEnd:function(){var t=+h;d.add(t<0?s.FA+t:t),this.lineStart=this.lineEnd=this.point=f.A},sphere:function(){d.add(s.FA)}};function g(){p.point=v}function y(){_(r,i)}function v(t,n){p.point=_,r=t,i=n,t*=s.F2,n*=s.F2,o=t,a=(0,s.gn)(n=n/2+s.gz),u=(0,s.F8)(n)}function _(t,n){t*=s.F2,n=(n*=s.F2)/2+s.gz;var e=t-o,r=e>=0?1:-1,i=r*e,c=(0,s.gn)(n),f=(0,s.F8)(n),l=u*f,d=a*c+l*(0,s.gn)(i),p=l*r*(0,s.F8)(i);h.add((0,s.FP)(p,d)),o=t,a=c,u=f}function m(t){return d=new c.ph,(0,l.A)(t,p),2*d}},13032:(t,n,e)=>{"use strict";e.d(n,{A:()=>C});var r,i,o,a,u,c,s,f,l,h,d,p=e(70587),g=e(49756),y=e(40211),v=e(51479),_=e(44373),m={point:b,lineStart:x,lineEnd:w,polygonStart:function(){m.point=M,m.lineStart=T,m.lineEnd=N,l=new p.ph,g.Y7.polygonStart()},polygonEnd:function(){g.Y7.polygonEnd(),m.point=b,m.lineStart=x,m.lineEnd=w,g.B0<0?(r=-(o=180),i=-(a=90)):l>v.Ni?a=90:l<-v.Ni&&(i=-90),d[0]=r,d[1]=o},sphere:function(){r=-(o=180),i=-(a=90)}};function b(t,n){h.push(d=[r=t,o=t]),n<i&&(i=n),n>a&&(a=n)}function A(t,n){var e=(0,y.jf)([t*v.F2,n*v.F2]);if(f){var c=(0,y.r8)(f,e),s=[c[1],-c[0],0],l=(0,y.r8)(s,c);(0,y.Cx)(l),l=(0,y.EV)(l);var p,g=t-u,_=g>0?1:-1,m=l[0]*v.uj*_,b=(0,v.tn)(g)>180;b^(_*u<m&&m<_*t)?(p=l[1]*v.uj)>a&&(a=p):b^(_*u<(m=(m+360)%360-180)&&m<_*t)?(p=-l[1]*v.uj)<i&&(i=p):(n<i&&(i=n),n>a&&(a=n)),b?t<u?S(r,t)>S(r,o)&&(o=t):S(t,o)>S(r,o)&&(r=t):o>=r?(t<r&&(r=t),t>o&&(o=t)):t>u?S(r,t)>S(r,o)&&(o=t):S(t,o)>S(r,o)&&(r=t)}else h.push(d=[r=t,o=t]);n<i&&(i=n),n>a&&(a=n),f=e,u=t}function x(){m.point=A}function w(){d[0]=r,d[1]=o,m.point=b,f=null}function M(t,n){if(f){var e=t-u;l.add((0,v.tn)(e)>180?e+(e>0?360:-360):e)}else c=t,s=n;g.Y7.point(t,n),A(t,n)}function T(){g.Y7.lineStart()}function N(){M(c,s),g.Y7.lineEnd(),(0,v.tn)(l)>v.Ni&&(r=-(o=180)),d[0]=r,d[1]=o,f=null}function S(t,n){return(n-=t)<0?n+360:n}function k(t,n){return t[0]-n[0]}function E(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}function C(t){var n,e,u,c,s,f,l;if(a=o=-(r=i=1/0),h=[],(0,_.A)(t,m),e=h.length){for(h.sort(k),n=1,s=[u=h[0]];n<e;++n)E(u,(c=h[n])[0])||E(u,c[1])?(S(u[0],c[1])>S(u[0],u[1])&&(u[1]=c[1]),S(c[0],u[1])>S(u[0],u[1])&&(u[0]=c[0])):s.push(u=c);for(f=-1/0,n=0,u=s[e=s.length-1];n<=e;u=c,++n)c=s[n],(l=S(u[1],c[0]))>f&&(f=l,r=c[0],o=u[1])}return h=d=null,r===1/0||i===1/0?[[NaN,NaN],[NaN,NaN]]:[[r,i],[o,a]]}},40211:(t,n,e)=>{"use strict";e.d(n,{Cx:()=>f,EV:()=>i,W8:()=>a,ep:()=>c,jf:()=>o,ly:()=>s,r8:()=>u});var r=e(51479);function i(t){return[(0,r.FP)(t[1],t[0]),(0,r.qR)(t[2])]}function o(t){var n=t[0],e=t[1],i=(0,r.gn)(e);return[i*(0,r.gn)(n),i*(0,r.F8)(n),(0,r.F8)(e)]}function a(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function u(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function c(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function s(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function f(t){var n=(0,r.RZ)(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}},67593:(t,n,e)=>{"use strict";e.d(n,{A:()=>z});var r,i,o,a,u,c,s,f,l,h,d,p,g,y,v,_,m=e(70587),b=e(51479),A=e(25809),x=e(44373),w={sphere:A.A,point:M,lineStart:N,lineEnd:E,polygonStart:function(){w.lineStart=C,w.lineEnd=D},polygonEnd:function(){w.lineStart=N,w.lineEnd=E}};function M(t,n){t*=b.F2,n*=b.F2;var e=(0,b.gn)(n);T(e*(0,b.gn)(t),e*(0,b.F8)(t),(0,b.F8)(n))}function T(t,n,e){++r,o+=(t-o)/r,a+=(n-a)/r,u+=(e-u)/r}function N(){w.point=S}function S(t,n){t*=b.F2,n*=b.F2;var e=(0,b.gn)(n);y=e*(0,b.gn)(t),v=e*(0,b.F8)(t),_=(0,b.F8)(n),w.point=k,T(y,v,_)}function k(t,n){t*=b.F2,n*=b.F2;var e=(0,b.gn)(n),r=e*(0,b.gn)(t),o=e*(0,b.F8)(t),a=(0,b.F8)(n),u=(0,b.FP)((0,b.RZ)((u=v*a-_*o)*u+(u=_*r-y*a)*u+(u=y*o-v*r)*u),y*r+v*o+_*a);i+=u,c+=u*(y+(y=r)),s+=u*(v+(v=o)),f+=u*(_+(_=a)),T(y,v,_)}function E(){w.point=M}function C(){w.point=F}function D(){P(p,g),w.point=M}function F(t,n){p=t,g=n,t*=b.F2,n*=b.F2,w.point=P;var e=(0,b.gn)(n);y=e*(0,b.gn)(t),v=e*(0,b.F8)(t),_=(0,b.F8)(n),T(y,v,_)}function P(t,n){t*=b.F2,n*=b.F2;var e=(0,b.gn)(n),r=e*(0,b.gn)(t),o=e*(0,b.F8)(t),a=(0,b.F8)(n),u=v*a-_*o,p=_*r-y*a,g=y*o-v*r,m=(0,b.dY)(u,p,g),A=(0,b.qR)(m),x=m&&-A/m;l.add(x*u),h.add(x*p),d.add(x*g),i+=A,c+=A*(y+(y=r)),s+=A*(v+(v=o)),f+=A*(_+(_=a)),T(y,v,_)}function z(t){r=i=o=a=u=c=s=f=0,l=new m.ph,h=new m.ph,d=new m.ph,(0,x.A)(t,w);var n=+l,e=+h,p=+d,g=(0,b.dY)(n,e,p);return g<b.$t&&(n=c,e=s,p=f,i<b.Ni&&(n=o,e=a,p=u),(g=(0,b.dY)(n,e,p))<b.$t)?[NaN,NaN]:[(0,b.FP)(e,n)*b.uj,(0,b.qR)(p/g)*b.uj]}},62141:(t,n,e)=>{"use strict";e.d(n,{A:()=>s,J:()=>u});var r=e(40211),i=e(96765),o=e(51479),a=e(5399);function u(t,n,e,i,a,u){if(e){var s=(0,o.gn)(n),f=(0,o.F8)(n),l=i*e;null==a?(a=n+i*o.FA,u=n-l/2):(a=c(s,a),u=c(s,u),(i>0?a<u:a>u)&&(a+=i*o.FA));for(var h,d=a;i>0?d>u:d<u;d-=l)h=(0,r.EV)([s,-f*(0,o.gn)(d),-f*(0,o.F8)(d)]),t.point(h[0],h[1])}}function c(t,n){(n=(0,r.jf)(n))[0]-=t,(0,r.Cx)(n);var e=(0,o.HQ)(-n[1]);return((-n[2]<0?-e:e)+o.FA-o.Ni)%o.FA}function s(){var t,n,e=(0,i.A)([0,0]),r=(0,i.A)(90),c=(0,i.A)(6),s={point:function(e,r){t.push(e=n(e,r)),e[0]*=o.uj,e[1]*=o.uj}};function f(){var i=e.apply(this,arguments),f=r.apply(this,arguments)*o.F2,l=c.apply(this,arguments)*o.F2;return t=[],n=(0,a.y)(-i[0]*o.F2,-i[1]*o.F2,0).invert,u(s,f,l,1),i={type:"Polygon",coordinates:[t]},t=n=null,i}return f.center=function(t){return arguments.length?(e="function"==typeof t?t:(0,i.A)([+t[0],+t[1]]),f):e},f.radius=function(t){return arguments.length?(r="function"==typeof t?t:(0,i.A)(+t),f):r},f.precision=function(t){return arguments.length?(c="function"==typeof t?t:(0,i.A)(+t),f):c},f}},51633:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(48524),i=e(51479);const o=(0,r.A)((function(){return!0}),(function(t){var n,e=NaN,r=NaN,o=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(a,u){var c=a>0?i.pi:-i.pi,s=(0,i.tn)(a-e);(0,i.tn)(s-i.pi)<i.Ni?(t.point(e,r=(r+u)/2>0?i.TW:-i.TW),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(c,r),t.point(a,r),n=0):o!==c&&s>=i.pi&&((0,i.tn)(e-o)<i.Ni&&(e-=o*i.Ni),(0,i.tn)(a-c)<i.Ni&&(a-=c*i.Ni),r=function(t,n,e,r){var o,a,u=(0,i.F8)(t-e);return(0,i.tn)(u)>i.Ni?(0,i.rY)(((0,i.F8)(n)*(a=(0,i.gn)(r))*(0,i.F8)(e)-(0,i.F8)(r)*(o=(0,i.gn)(n))*(0,i.F8)(t))/(o*a*u)):(n+r)/2}(e,r,a,u),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(c,r),n=0),t.point(e=a,r=u),o=c},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}),(function(t,n,e,r){var o;if(null==t)o=e*i.TW,r.point(-i.pi,o),r.point(0,o),r.point(i.pi,o),r.point(i.pi,0),r.point(i.pi,-o),r.point(0,-o),r.point(-i.pi,-o),r.point(-i.pi,0),r.point(-i.pi,o);else if((0,i.tn)(t[0]-n[0])>i.Ni){var a=t[0]<n[0]?i.pi:-i.pi;o=e*a/2,r.point(-a,o),r.point(0,o),r.point(a,o)}else r.point(n[0],n[1])}),[-i.pi,-i.TW])},2940:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(25809);function i(){var t,n=[];return{point:function(n,e,r){t.push([n,e,r])},lineStart:function(){n.push(t=[])},lineEnd:r.A,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}},64366:(t,n,e)=>{"use strict";e.d(n,{A:()=>c});var r=e(40211),i=e(62141),o=e(51479),a=e(38083),u=e(48524);function c(t){var n=(0,o.gn)(t),e=6*o.F2,c=n>0,s=(0,o.tn)(n)>o.Ni;function f(t,e){return(0,o.gn)(t)*(0,o.gn)(e)>n}function l(t,e,i){var a=(0,r.jf)(t),u=(0,r.jf)(e),c=[1,0,0],s=(0,r.r8)(a,u),f=(0,r.W8)(s,s),l=s[0],h=f-l*l;if(!h)return!i&&t;var d=n*f/h,p=-n*l/h,g=(0,r.r8)(c,s),y=(0,r.ly)(c,d),v=(0,r.ly)(s,p);(0,r.ep)(y,v);var _=g,m=(0,r.W8)(y,_),b=(0,r.W8)(_,_),A=m*m-b*((0,r.W8)(y,y)-1);if(!(A<0)){var x=(0,o.RZ)(A),w=(0,r.ly)(_,(-m-x)/b);if((0,r.ep)(w,y),w=(0,r.EV)(w),!i)return w;var M,T=t[0],N=e[0],S=t[1],k=e[1];N<T&&(M=T,T=N,N=M);var E=N-T,C=(0,o.tn)(E-o.pi)<o.Ni;if(!C&&k<S&&(M=S,S=k,k=M),C||E<o.Ni?C?S+k>0^w[1]<((0,o.tn)(w[0]-T)<o.Ni?S:k):S<=w[1]&&w[1]<=k:E>o.pi^(T<=w[0]&&w[0]<=N)){var D=(0,r.ly)(_,(-m+x)/b);return(0,r.ep)(D,y),[w,(0,r.EV)(D)]}}}function h(n,e){var r=c?t:o.pi-t,i=0;return n<-r?i|=1:n>r&&(i|=2),e<-r?i|=4:e>r&&(i|=8),i}return(0,u.A)(f,(function(t){var n,e,r,i,u;return{lineStart:function(){i=r=!1,u=1},point:function(d,p){var g,y=[d,p],v=f(d,p),_=c?v?0:h(d,p):v?h(d+(d<0?o.pi:-o.pi),p):0;if(!n&&(i=r=v)&&t.lineStart(),v!==r&&(!(g=l(n,y))||(0,a.A)(n,g)||(0,a.A)(y,g))&&(y[2]=1),v!==r)u=0,v?(t.lineStart(),g=l(y,n),t.point(g[0],g[1])):(g=l(n,y),t.point(g[0],g[1],2),t.lineEnd()),n=g;else if(s&&n&&c^v){var m;_&e||!(m=l(y,n,!0))||(u=0,c?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1],3)))}!v||n&&(0,a.A)(n,y)||t.point(y[0],y[1]),n=y,r=v,e=_},lineEnd:function(){r&&t.lineEnd(),n=null},clean:function(){return u|(i&&r)<<1}}}),(function(n,r,o,a){(0,i.J)(a,t,e,o,n,r)}),c?[0,-t]:[-o.pi,t-o.pi])}},76766:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(17157);function i(){var t,n,e,i=0,o=0,a=960,u=500;return e={stream:function(e){return t&&n===e?t:t=(0,r.A)(i,o,a,u)(n=e)},extent:function(r){return arguments.length?(i=+r[0][0],o=+r[0][1],a=+r[1][0],u=+r[1][1],t=n=null,e):[[i,o],[a,u]]}}}},48524:(t,n,e)=>{"use strict";e.d(n,{A:()=>c});var r=e(2940),i=e(92827),o=e(51479),a=e(65726),u=e(4356);function c(t,n,e,o){return function(c){var l,h,d,p=n(c),g=(0,r.A)(),y=n(g),v=!1,_={point:m,lineStart:A,lineEnd:x,polygonStart:function(){_.point=w,_.lineStart=M,_.lineEnd=T,h=[],l=[]},polygonEnd:function(){_.point=m,_.lineStart=A,_.lineEnd=x,h=(0,u.A)(h);var t=(0,a.A)(l,o);h.length?(v||(c.polygonStart(),v=!0),(0,i.A)(h,f,t,e,c)):t&&(v||(c.polygonStart(),v=!0),c.lineStart(),e(null,null,1,c),c.lineEnd()),v&&(c.polygonEnd(),v=!1),h=l=null},sphere:function(){c.polygonStart(),c.lineStart(),e(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function m(n,e){t(n,e)&&c.point(n,e)}function b(t,n){p.point(t,n)}function A(){_.point=b,p.lineStart()}function x(){_.point=m,p.lineEnd()}function w(t,n){d.push([t,n]),y.point(t,n)}function M(){y.lineStart(),d=[]}function T(){w(d[0][0],d[0][1]),y.lineEnd();var t,n,e,r,i=y.clean(),o=g.result(),a=o.length;if(d.pop(),l.push(d),d=null,a)if(1&i){if((n=(e=o[0]).length-1)>0){for(v||(c.polygonStart(),v=!0),c.lineStart(),t=0;t<n;++t)c.point((r=e[t])[0],r[1]);c.lineEnd()}}else a>1&&2&i&&o.push(o.pop().concat(o.shift())),h.push(o.filter(s))}return _}}function s(t){return t.length>1}function f(t,n){return((t=t.x)[0]<0?t[1]-o.TW-o.Ni:o.TW-t[1])-((n=n.x)[0]<0?n[1]-o.TW-o.Ni:o.TW-n[1])}},83920:(t,n,e)=>{"use strict";function r(t,n,e,r,i,o){var a,u=t[0],c=t[1],s=0,f=1,l=n[0]-u,h=n[1]-c;if(a=e-u,l||!(a>0)){if(a/=l,l<0){if(a<s)return;a<f&&(f=a)}else if(l>0){if(a>f)return;a>s&&(s=a)}if(a=i-u,l||!(a<0)){if(a/=l,l<0){if(a>f)return;a>s&&(s=a)}else if(l>0){if(a<s)return;a<f&&(f=a)}if(a=r-c,h||!(a>0)){if(a/=h,h<0){if(a<s)return;a<f&&(f=a)}else if(h>0){if(a>f)return;a>s&&(s=a)}if(a=o-c,h||!(a<0)){if(a/=h,h<0){if(a>f)return;a>s&&(s=a)}else if(h>0){if(a<s)return;a<f&&(f=a)}return s>0&&(t[0]=u+s*l,t[1]=c+s*h),f<1&&(n[0]=u+f*l,n[1]=c+f*h),!0}}}}}e.d(n,{A:()=>r})},17157:(t,n,e)=>{"use strict";e.d(n,{A:()=>f});var r=e(51479),i=e(2940),o=e(83920),a=e(92827),u=e(4356),c=1e9,s=-c;function f(t,n,e,f){function l(r,i){return t<=r&&r<=e&&n<=i&&i<=f}function h(r,i,o,a){var u=0,c=0;if(null==r||(u=d(r,o))!==(c=d(i,o))||g(r,i)<0^o>0)do{a.point(0===u||3===u?t:e,u>1?f:n)}while((u=(u+o+4)%4)!==c);else a.point(i[0],i[1])}function d(i,o){return(0,r.tn)(i[0]-t)<r.Ni?o>0?0:3:(0,r.tn)(i[0]-e)<r.Ni?o>0?2:1:(0,r.tn)(i[1]-n)<r.Ni?o>0?1:0:o>0?3:2}function p(t,n){return g(t.x,n.x)}function g(t,n){var e=d(t,1),r=d(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(r){var d,g,y,v,_,m,b,A,x,w,M,T=r,N=(0,i.A)(),S={point:k,lineStart:function(){S.point=E,g&&g.push(y=[]),w=!0,x=!1,b=A=NaN},lineEnd:function(){d&&(E(v,_),m&&x&&N.rejoin(),d.push(N.result())),S.point=k,x&&T.lineEnd()},polygonStart:function(){T=N,d=[],g=[],M=!0},polygonEnd:function(){var n=function(){for(var n=0,e=0,r=g.length;e<r;++e)for(var i,o,a=g[e],u=1,c=a.length,s=a[0],l=s[0],h=s[1];u<c;++u)i=l,o=h,l=(s=a[u])[0],h=s[1],o<=f?h>f&&(l-i)*(f-o)>(h-o)*(t-i)&&++n:h<=f&&(l-i)*(f-o)<(h-o)*(t-i)&&--n;return n}(),e=M&&n,i=(d=(0,u.A)(d)).length;(e||i)&&(r.polygonStart(),e&&(r.lineStart(),h(null,null,1,r),r.lineEnd()),i&&(0,a.A)(d,p,n,h,r),r.polygonEnd()),T=r,d=g=y=null}};function k(t,n){l(t,n)&&T.point(t,n)}function E(r,i){var a=l(r,i);if(g&&y.push([r,i]),w)v=r,_=i,m=a,w=!1,a&&(T.lineStart(),T.point(r,i));else if(a&&x)T.point(r,i);else{var u=[b=Math.max(s,Math.min(c,b)),A=Math.max(s,Math.min(c,A))],h=[r=Math.max(s,Math.min(c,r)),i=Math.max(s,Math.min(c,i))];(0,o.A)(u,h,t,n,e,f)?(x||(T.lineStart(),T.point(u[0],u[1])),T.point(h[0],h[1]),a||T.lineEnd(),M=!1):a&&(T.lineStart(),T.point(r,i),M=!1)}b=r,A=i,x=a}return S}}},92827:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(38083),i=e(51479);function o(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function a(t,n,e,a,c){var s,f,l=[],h=[];if(t.forEach((function(t){if(!((n=t.length-1)<=0)){var n,e,a=t[0],u=t[n];if((0,r.A)(a,u)){if(!a[2]&&!u[2]){for(c.lineStart(),s=0;s<n;++s)c.point((a=t[s])[0],a[1]);return void c.lineEnd()}u[0]+=2*i.Ni}l.push(e=new o(a,t,null,!0)),h.push(e.o=new o(a,null,e,!1)),l.push(e=new o(u,t,null,!1)),h.push(e.o=new o(u,null,e,!0))}})),l.length){for(h.sort(n),u(l),u(h),s=0,f=h.length;s<f;++s)h[s].e=e=!e;for(var d,p,g=l[0];;){for(var y=g,v=!0;y.v;)if((y=y.n)===g)return;d=y.z,c.lineStart();do{if(y.v=y.o.v=!0,y.e){if(v)for(s=0,f=d.length;s<f;++s)c.point((p=d[s])[0],p[1]);else a(y.x,y.n.x,1,c);y=y.n}else{if(v)for(d=y.p.z,s=d.length-1;s>=0;--s)c.point((p=d[s])[0],p[1]);else a(y.x,y.p.x,-1,c);y=y.p}d=(y=y.o).z,v=!v}while(!y.v);c.lineEnd()}}}function u(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}},85589:(t,n,e)=>{"use strict";function r(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}e.d(n,{A:()=>r})},96765:(t,n,e)=>{"use strict";function r(t){return function(){return t}}e.d(n,{A:()=>r})},76812:(t,n,e)=>{"use strict";e.d(n,{A:()=>p});var r=e(65726),i=e(40466),o=e(51479),a={Feature:function(t,n){return c(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)if(c(e[r].geometry,n))return!0;return!1}},u={Sphere:function(){return!0},Point:function(t,n){return s(t.coordinates,n)},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(s(e[r],n))return!0;return!1},LineString:function(t,n){return f(t.coordinates,n)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(f(e[r],n))return!0;return!1},Polygon:function(t,n){return l(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(l(e[r],n))return!0;return!1},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)if(c(e[r],n))return!0;return!1}};function c(t,n){return!(!t||!u.hasOwnProperty(t.type))&&u[t.type](t,n)}function s(t,n){return 0===(0,i.A)(t,n)}function f(t,n){for(var e,r,a,u=0,c=t.length;u<c;u++){if(0===(r=(0,i.A)(t[u],n)))return!0;if(u>0&&(a=(0,i.A)(t[u],t[u-1]))>0&&e<=a&&r<=a&&(e+r-a)*(1-Math.pow((e-r)/a,2))<o.$t*a)return!0;e=r}return!1}function l(t,n){return!!(0,r.A)(t.map(h),d(n))}function h(t){return(t=t.map(d)).pop(),t}function d(t){return[t[0]*o.F2,t[1]*o.F2]}function p(t,n){return(t&&a.hasOwnProperty(t.type)?a[t.type]:c)(t,n)}},40466:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(7881),i=[null,null],o={type:"LineString",coordinates:i};function a(t,n){return i[0]=t,i[1]=n,(0,r.A)(o)}},29609:(t,n,e)=>{"use strict";e.d(n,{A:()=>u,q:()=>c});var r=e(88525),i=e(51479);function o(t,n,e){var o=(0,r.A)(t,n-i.Ni,e).concat(n);return function(t){return o.map((function(n){return[t,n]}))}}function a(t,n,e){var o=(0,r.A)(t,n-i.Ni,e).concat(n);return function(t){return o.map((function(n){return[n,t]}))}}function u(){var t,n,e,u,c,s,f,l,h,d,p,g,y=10,v=y,_=90,m=360,b=2.5;function A(){return{type:"MultiLineString",coordinates:x()}}function x(){return(0,r.A)((0,i.mk)(u/_)*_,e,_).map(p).concat((0,r.A)((0,i.mk)(l/m)*m,f,m).map(g)).concat((0,r.A)((0,i.mk)(n/y)*y,t,y).filter((function(t){return(0,i.tn)(t%_)>i.Ni})).map(h)).concat((0,r.A)((0,i.mk)(s/v)*v,c,v).filter((function(t){return(0,i.tn)(t%m)>i.Ni})).map(d))}return A.lines=function(){return x().map((function(t){return{type:"LineString",coordinates:t}}))},A.outline=function(){return{type:"Polygon",coordinates:[p(u).concat(g(f).slice(1),p(e).reverse().slice(1),g(l).reverse().slice(1))]}},A.extent=function(t){return arguments.length?A.extentMajor(t).extentMinor(t):A.extentMinor()},A.extentMajor=function(t){return arguments.length?(u=+t[0][0],e=+t[1][0],l=+t[0][1],f=+t[1][1],u>e&&(t=u,u=e,e=t),l>f&&(t=l,l=f,f=t),A.precision(b)):[[u,l],[e,f]]},A.extentMinor=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],s=+e[0][1],c=+e[1][1],n>t&&(e=n,n=t,t=e),s>c&&(e=s,s=c,c=e),A.precision(b)):[[n,s],[t,c]]},A.step=function(t){return arguments.length?A.stepMajor(t).stepMinor(t):A.stepMinor()},A.stepMajor=function(t){return arguments.length?(_=+t[0],m=+t[1],A):[_,m]},A.stepMinor=function(t){return arguments.length?(y=+t[0],v=+t[1],A):[y,v]},A.precision=function(r){return arguments.length?(b=+r,h=o(s,c,90),d=a(n,t,b),p=o(l,f,90),g=a(u,e,b),A):b},A.extentMajor([[-180,-90+i.Ni],[180,90-i.Ni]]).extentMinor([[-180,-80-i.Ni],[180,80+i.Ni]])}function c(){return u()()}},9391:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=t=>t},6833:(t,n,e)=>{"use strict";e.d(n,{AN:()=>b.A,DS:()=>d.q,Ew:()=>o.A,GA:()=>T.f,IN:()=>N.T,Je:()=>h.A,Kx:()=>P.b,M5:()=>P.A,MA:()=>C.P,Nl:()=>u.A,Ob:()=>a.A,Oc:()=>m.A,PS:()=>w.A,Pq:()=>x.A,S0:()=>M.f,SV:()=>b.j,Ut:()=>_.A,Vf:()=>l.A,Vj:()=>r.Ay,WK:()=>D.A,Xo:()=>k.A,bA:()=>E.Ay,c6:()=>N.A,c8:()=>F.A,cX:()=>F.F,cj:()=>c.A,dO:()=>A.C,fo:()=>i.A,jw:()=>E.Gx,kG:()=>d.A,mn:()=>D.x,om:()=>M.A,p7:()=>w.G,pK:()=>v.A,qS:()=>S.A,qz:()=>m.n,r2:()=>k.U,tq:()=>f.A,u9:()=>g.A,uV:()=>T.A,uY:()=>z.A,vD:()=>p.A,w9:()=>s.A,wC:()=>I.A,wu:()=>U.A,wx:()=>C.A,xK:()=>A.A,zF:()=>y.A,zy:()=>x.y});var r=e(49756),i=e(13032),o=e(67593),a=e(62141),u=e(51633),c=e(64366),s=e(76766),f=e(17157),l=e(76812),h=e(40466),d=e(29609),p=e(9162),g=e(7881),y=e(24321),v=e(63716),_=e(13981),m=e(4669),b=e(42057),A=e(37912),x=e(1974),w=e(20042),M=e(55435),T=e(15367),N=e(4135),S=e(56621),k=e(9587),E=e(42030),C=e(85113),D=e(11977),F=e(53127),P=e(30445),z=e(5399),I=e(44373),U=e(27373)},9162:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(51479);function i(t,n){var e=t[0]*r.F2,i=t[1]*r.F2,o=n[0]*r.F2,a=n[1]*r.F2,u=(0,r.gn)(i),c=(0,r.F8)(i),s=(0,r.gn)(a),f=(0,r.F8)(a),l=u*(0,r.gn)(e),h=u*(0,r.F8)(e),d=s*(0,r.gn)(o),p=s*(0,r.F8)(o),g=2*(0,r.qR)((0,r.RZ)((0,r.bo)(a-i)+u*s*(0,r.bo)(o-e))),y=(0,r.F8)(g),v=g?function(t){var n=(0,r.F8)(t*=g)/y,e=(0,r.F8)(g-t)/y,i=e*l+n*d,o=e*h+n*p,a=e*c+n*f;return[(0,r.FP)(o,i)*r.uj,(0,r.FP)(a,(0,r.RZ)(i*i+o*o))*r.uj]}:function(){return[e*r.uj,i*r.uj]};return v.distance=g,v}},7881:(t,n,e)=>{"use strict";e.d(n,{A:()=>g});var r,i,o,a,u=e(70587),c=e(51479),s=e(25809),f=e(44373),l={sphere:s.A,point:s.A,lineStart:function(){l.point=d,l.lineEnd=h},lineEnd:s.A,polygonStart:s.A,polygonEnd:s.A};function h(){l.point=l.lineEnd=s.A}function d(t,n){t*=c.F2,n*=c.F2,i=t,o=(0,c.F8)(n),a=(0,c.gn)(n),l.point=p}function p(t,n){t*=c.F2,n*=c.F2;var e=(0,c.F8)(n),u=(0,c.gn)(n),s=(0,c.tn)(t-i),f=(0,c.gn)(s),l=u*(0,c.F8)(s),h=a*e-o*u*f,d=o*e+a*u*f;r.add((0,c.FP)((0,c.RZ)(l*l+h*h),d)),i=t,o=e,a=u}function g(t){return r=new u.ph,(0,f.A)(t,l),+r}},51479:(t,n,e)=>{"use strict";e.d(n,{$t:()=>i,F2:()=>f,F8:()=>b,FA:()=>c,FP:()=>d,HQ:()=>M,Ml:()=>w,Ni:()=>r,RZ:()=>x,Rm:()=>_,TW:()=>a,_S:()=>A,bo:()=>N,dY:()=>v,gn:()=>p,gz:()=>u,mk:()=>g,n7:()=>m,oN:()=>y,pi:()=>o,qR:()=>T,rY:()=>h,tn:()=>l,uj:()=>s});var r=1e-6,i=1e-12,o=Math.PI,a=o/2,u=o/4,c=2*o,s=180/o,f=o/180,l=Math.abs,h=Math.atan,d=Math.atan2,p=Math.cos,g=Math.ceil,y=Math.exp,v=(Math.floor,Math.hypot),_=Math.log,m=Math.pow,b=Math.sin,A=Math.sign||function(t){return t>0?1:t<0?-1:0},x=Math.sqrt,w=Math.tan;function M(t){return t>1?0:t<-1?o:Math.acos(t)}function T(t){return t>1?a:t<-1?-a:Math.asin(t)}function N(t){return(t=b(t/2))*t}},25809:(t,n,e)=>{"use strict";function r(){}e.d(n,{A:()=>r})},85580:(t,n,e)=>{"use strict";e.d(n,{A:()=>v});var r,i,o,a,u=e(70587),c=e(51479),s=e(25809),f=new u.ph,l=new u.ph,h={point:s.A,lineStart:s.A,lineEnd:s.A,polygonStart:function(){h.lineStart=d,h.lineEnd=y},polygonEnd:function(){h.lineStart=h.lineEnd=h.point=s.A,f.add((0,c.tn)(l)),l=new u.ph},result:function(){var t=f/2;return f=new u.ph,t}};function d(){h.point=p}function p(t,n){h.point=g,r=o=t,i=a=n}function g(t,n){l.add(a*t-o*n),o=t,a=n}function y(){g(r,i)}const v=h},18552:(t,n,e)=>{"use strict";e.d(n,{A:()=>c});var r=e(25809),i=1/0,o=i,a=-i,u=a;const c={point:function(t,n){t<i&&(i=t),t>a&&(a=t),n<o&&(o=n),n>u&&(u=n)},lineStart:r.A,lineEnd:r.A,polygonStart:r.A,polygonEnd:r.A,result:function(){var t=[[i,o],[a,u]];return a=u=-(o=i=1/0),t}}},7481:(t,n,e)=>{"use strict";e.d(n,{A:()=>S});var r,i,o,a,u=e(51479),c=0,s=0,f=0,l=0,h=0,d=0,p=0,g=0,y=0,v={point:_,lineStart:m,lineEnd:x,polygonStart:function(){v.lineStart=w,v.lineEnd=M},polygonEnd:function(){v.point=_,v.lineStart=m,v.lineEnd=x},result:function(){var t=y?[p/y,g/y]:d?[l/d,h/d]:f?[c/f,s/f]:[NaN,NaN];return c=s=f=l=h=d=p=g=y=0,t}};function _(t,n){c+=t,s+=n,++f}function m(){v.point=b}function b(t,n){v.point=A,_(o=t,a=n)}function A(t,n){var e=t-o,r=n-a,i=(0,u.RZ)(e*e+r*r);l+=i*(o+t)/2,h+=i*(a+n)/2,d+=i,_(o=t,a=n)}function x(){v.point=_}function w(){v.point=T}function M(){N(r,i)}function T(t,n){v.point=N,_(r=o=t,i=a=n)}function N(t,n){var e=t-o,r=n-a,i=(0,u.RZ)(e*e+r*r);l+=i*(o+t)/2,h+=i*(a+n)/2,d+=i,p+=(i=a*t-o*n)*(o+t),g+=i*(a+n),y+=3*i,_(o=t,a=n)}const S=v},89630:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(51479),i=e(25809);function o(t){this._context=t}o.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,r.FA)}},result:i.A}},24321:(t,n,e)=>{"use strict";e.d(n,{A:()=>l});var r=e(9391),i=e(44373),o=e(85580),a=e(18552),u=e(7481),c=e(89630),s=e(57457),f=e(25736);function l(t,n){var e,l,h=4.5;function d(t){return t&&("function"==typeof h&&l.pointRadius(+h.apply(this,arguments)),(0,i.A)(t,e(l))),l.result()}return d.area=function(t){return(0,i.A)(t,e(o.A)),o.A.result()},d.measure=function(t){return(0,i.A)(t,e(s.A)),s.A.result()},d.bounds=function(t){return(0,i.A)(t,e(a.A)),a.A.result()},d.centroid=function(t){return(0,i.A)(t,e(u.A)),u.A.result()},d.projection=function(n){return arguments.length?(e=null==n?(t=null,r.A):(t=n).stream,d):t},d.context=function(t){return arguments.length?(l=null==t?(n=null,new f.A):new c.A(n=t),"function"!=typeof h&&l.pointRadius(h),d):n},d.pointRadius=function(t){return arguments.length?(h="function"==typeof t?t:(l.pointRadius(+t),+t),d):h},d.projection(t).context(n)}},57457:(t,n,e)=>{"use strict";e.d(n,{A:()=>g});var r,i,o,a,u,c=e(70587),s=e(51479),f=e(25809),l=new c.ph,h={point:f.A,lineStart:function(){h.point=d},lineEnd:function(){r&&p(i,o),h.point=f.A},polygonStart:function(){r=!0},polygonEnd:function(){r=null},result:function(){var t=+l;return l=new c.ph,t}};function d(t,n){h.point=p,i=a=t,o=u=n}function p(t,n){a-=t,u-=n,l.add((0,s.RZ)(a*a+u*u)),a=t,u=n}const g=h},25736:(t,n,e)=>{"use strict";function r(){this._string=[]}function i(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}e.d(n,{A:()=>r}),r.prototype={_radius:4.5,_circle:i(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push("M",t,",",n),this._point=1;break;case 1:this._string.push("L",t,",",n);break;default:null==this._circle&&(this._circle=i(this._radius)),this._string.push("M",t,",",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}}},38083:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(51479);function i(t,n){return(0,r.tn)(t[0]-n[0])<r.Ni&&(0,r.tn)(t[1]-n[1])<r.Ni}},65726:(t,n,e)=>{"use strict";e.d(n,{A:()=>u});var r=e(70587),i=e(40211),o=e(51479);function a(t){return(0,o.tn)(t[0])<=o.pi?t[0]:(0,o._S)(t[0])*(((0,o.tn)(t[0])+o.pi)%o.FA-o.pi)}function u(t,n){var e=a(n),u=n[1],c=(0,o.F8)(u),s=[(0,o.F8)(e),-(0,o.gn)(e),0],f=0,l=0,h=new r.ph;1===c?u=o.TW+o.Ni:-1===c&&(u=-o.TW-o.Ni);for(var d=0,p=t.length;d<p;++d)if(y=(g=t[d]).length)for(var g,y,v=g[y-1],_=a(v),m=v[1]/2+o.gz,b=(0,o.F8)(m),A=(0,o.gn)(m),x=0;x<y;++x,_=M,b=N,A=S,v=w){var w=g[x],M=a(w),T=w[1]/2+o.gz,N=(0,o.F8)(T),S=(0,o.gn)(T),k=M-_,E=k>=0?1:-1,C=E*k,D=C>o.pi,F=b*N;if(h.add((0,o.FP)(F*E*(0,o.F8)(C),A*S+F*(0,o.gn)(C))),f+=D?k+E*o.FA:k,D^_>=e^M>=e){var P=(0,i.r8)((0,i.jf)(v),(0,i.jf)(w));(0,i.Cx)(P);var z=(0,i.r8)(s,P);(0,i.Cx)(z);var I=(D^k>=0?-1:1)*(0,o.qR)(z[2]);(u>I||u===I&&(P[0]||P[1]))&&(l+=D^k>=0?1:-1)}}return(f<-o.Ni||f<o.Ni&&h<-o.$t)^1&l}},63716:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(1974);function i(){return(0,r.A)().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}},13981:(t,n,e)=>{"use strict";e.d(n,{A:()=>u});var r=e(51479),i=e(63716),o=e(1974),a=e(21988);function u(){var t,n,e,u,c,s,f=(0,i.A)(),l=(0,o.A)().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=(0,o.A)().rotate([157,0]).center([-3,19.9]).parallels([8,18]),d={point:function(t,n){s=[t,n]}};function p(t){var n=t[0],r=t[1];return s=null,e.point(n,r),s||(u.point(n,r),s)||(c.point(n,r),s)}function g(){return t=n=null,p}return p.invert=function(t){var n=f.scale(),e=f.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?l:i>=.166&&i<.234&&r>=-.214&&r<-.115?h:f).invert(t)},p.stream=function(e){return t&&n===e?t:(r=[f.stream(n=e),l.stream(e),h.stream(e)],i=r.length,t={point:function(t,n){for(var e=-1;++e<i;)r[e].point(t,n)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},p.precision=function(t){return arguments.length?(f.precision(t),l.precision(t),h.precision(t),g()):f.precision()},p.scale=function(t){return arguments.length?(f.scale(t),l.scale(.35*t),h.scale(t),p.translate(f.translate())):f.scale()},p.translate=function(t){if(!arguments.length)return f.translate();var n=f.scale(),i=+t[0],o=+t[1];return e=f.translate(t).clipExtent([[i-.455*n,o-.238*n],[i+.455*n,o+.238*n]]).stream(d),u=l.translate([i-.307*n,o+.201*n]).clipExtent([[i-.425*n+r.Ni,o+.12*n+r.Ni],[i-.214*n-r.Ni,o+.234*n-r.Ni]]).stream(d),c=h.translate([i-.205*n,o+.212*n]).clipExtent([[i-.214*n+r.Ni,o+.166*n+r.Ni],[i-.115*n-r.Ni,o+.234*n-r.Ni]]).stream(d),g()},p.fitExtent=function(t,n){return(0,a.sp)(p,t,n)},p.fitSize=function(t,n){return(0,a.Hv)(p,t,n)},p.fitWidth=function(t,n){return(0,a.G0)(p,t,n)},p.fitHeight=function(t,n){return(0,a.FL)(p,t,n)},p.scale(1070)}},69830:(t,n,e)=>{"use strict";e.d(n,{I:()=>o,c:()=>i});var r=e(51479);function i(t){return function(n,e){var i=(0,r.gn)(n),o=(0,r.gn)(e),a=t(i*o);return a===1/0?[2,0]:[a*o*(0,r.F8)(n),a*(0,r.F8)(e)]}}function o(t){return function(n,e){var i=(0,r.RZ)(n*n+e*e),o=t(i),a=(0,r.F8)(o),u=(0,r.gn)(o);return[(0,r.FP)(n*a,i*u),(0,r.qR)(i&&e*a/i)]}}},4669:(t,n,e)=>{"use strict";e.d(n,{A:()=>u,n:()=>a});var r=e(51479),i=e(69830),o=e(9587),a=(0,i.c)((function(t){return(0,r.RZ)(2/(1+t))}));function u(){return(0,o.A)(a).scale(124.75).clipAngle(179.999)}a.invert=(0,i.I)((function(t){return 2*(0,r.qR)(t/2)}))},42057:(t,n,e)=>{"use strict";e.d(n,{A:()=>u,j:()=>a});var r=e(51479),i=e(69830),o=e(9587),a=(0,i.c)((function(t){return(t=(0,r.HQ)(t))&&t/(0,r.F8)(t)}));function u(){return(0,o.A)(a).scale(79.4188).clipAngle(179.999)}a.invert=(0,i.I)((function(t){return t}))},59931:(t,n,e)=>{"use strict";e.d(n,{S:()=>o});var r=e(51479),i=e(9587);function o(t){var n=0,e=r.pi/3,o=(0,i.U)(t),a=o(n,e);return a.parallels=function(t){return arguments.length?o(n=t[0]*r.F2,e=t[1]*r.F2):[n*r.uj,e*r.uj]},a}},37912:(t,n,e)=>{"use strict";e.d(n,{A:()=>c,C:()=>u});var r=e(51479),i=e(59931),o=e(42030);function a(t){return(0,r.Ml)((r.TW+t)/2)}function u(t,n){var e=(0,r.gn)(t),i=t===n?(0,r.F8)(t):(0,r.Rm)(e/(0,r.gn)(n))/(0,r.Rm)(a(n)/a(t)),u=e*(0,r.n7)(a(t),i)/i;if(!i)return o.Gx;function c(t,n){u>0?n<-r.TW+r.Ni&&(n=-r.TW+r.Ni):n>r.TW-r.Ni&&(n=r.TW-r.Ni);var e=u/(0,r.n7)(a(n),i);return[e*(0,r.F8)(i*t),u-e*(0,r.gn)(i*t)]}return c.invert=function(t,n){var e=u-n,o=(0,r._S)(i)*(0,r.RZ)(t*t+e*e),a=(0,r.FP)(t,(0,r.tn)(e))*(0,r._S)(e);return e*i<0&&(a-=r.pi*(0,r._S)(t)*(0,r._S)(e)),[a/i,2*(0,r.rY)((0,r.n7)(u/o,1/i))-r.TW]},c}function c(){return(0,i.S)(u).scale(109.5).parallels([30,30])}},1974:(t,n,e)=>{"use strict";e.d(n,{A:()=>u,y:()=>a});var r=e(51479),i=e(59931),o=e(92274);function a(t,n){var e=(0,r.F8)(t),i=(e+(0,r.F8)(n))/2;if((0,r.tn)(i)<r.Ni)return(0,o.Y)(t);var a=1+e*(2*i-e),u=(0,r.RZ)(a)/i;function c(t,n){var e=(0,r.RZ)(a-2*i*(0,r.F8)(n))/i;return[e*(0,r.F8)(t*=i),u-e*(0,r.gn)(t)]}return c.invert=function(t,n){var e=u-n,o=(0,r.FP)(t,(0,r.tn)(e))*(0,r._S)(e);return e*i<0&&(o-=r.pi*(0,r._S)(t)*(0,r._S)(e)),[o/i,(0,r.qR)((a-(t*t+e*e)*i*i)/(2*i))]},c}function u(){return(0,i.S)(a).scale(155.424).center([0,33.6442])}},20042:(t,n,e)=>{"use strict";e.d(n,{A:()=>u,G:()=>a});var r=e(51479),i=e(59931),o=e(15367);function a(t,n){var e=(0,r.gn)(t),i=t===n?(0,r.F8)(t):(e-(0,r.gn)(n))/(n-t),a=e/i+t;if((0,r.tn)(i)<r.Ni)return o.f;function u(t,n){var e=a-n,o=i*t;return[e*(0,r.F8)(o),a-e*(0,r.gn)(o)]}return u.invert=function(t,n){var e=a-n,o=(0,r.FP)(t,(0,r.tn)(e))*(0,r._S)(e);return e*i<0&&(o-=r.pi*(0,r._S)(t)*(0,r._S)(e)),[o/i,a-(0,r._S)(i)*(0,r.RZ)(t*t+e*e)]},u}function u(){return(0,i.S)(a).scale(131.154).center([0,13.9389])}},92274:(t,n,e)=>{"use strict";e.d(n,{Y:()=>i});var r=e(51479);function i(t){var n=(0,r.gn)(t);function e(t,e){return[t*n,(0,r.F8)(e)/n]}return e.invert=function(t,e){return[t/n,(0,r.qR)(e*n)]},e}},55435:(t,n,e)=>{"use strict";e.d(n,{A:()=>l,f:()=>f});var r=e(9587),i=e(51479),o=1.340264,a=-.081106,u=893e-6,c=.003796,s=(0,i.RZ)(3)/2;function f(t,n){var e=(0,i.qR)(s*(0,i.F8)(n)),r=e*e,f=r*r*r;return[t*(0,i.gn)(e)/(s*(o+3*a*r+f*(7*u+9*c*r))),e*(o+a*r+f*(u+c*r))]}function l(){return(0,r.A)(f).scale(177.158)}f.invert=function(t,n){for(var e,r=n,f=r*r,l=f*f*f,h=0;h<12&&(l=(f=(r-=e=(r*(o+a*f+l*(u+c*f))-n)/(o+3*a*f+l*(7*u+9*c*f)))*r)*f*f,!((0,i.tn)(e)<i.$t));++h);return[s*t*(o+3*a*f+l*(7*u+9*c*f))/(0,i.gn)(r),(0,i.qR)((0,i.F8)(r)/s)]}},15367:(t,n,e)=>{"use strict";e.d(n,{A:()=>o,f:()=>i});var r=e(9587);function i(t,n){return[t,n]}function o(){return(0,r.A)(i).scale(152.63)}i.invert=i},21988:(t,n,e)=>{"use strict";e.d(n,{FL:()=>s,G0:()=>c,Hv:()=>u,sp:()=>a});var r=e(44373),i=e(18552);function o(t,n,e){var o=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),(0,r.A)(e,t.stream(i.A)),n(i.A.result()),null!=o&&t.clipExtent(o),t}function a(t,n,e){return o(t,(function(e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),a=+n[0][0]+(r-o*(e[1][0]+e[0][0]))/2,u=+n[0][1]+(i-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([a,u])}),e)}function u(t,n,e){return a(t,[[0,0],n],e)}function c(t,n,e){return o(t,(function(e){var r=+n,i=r/(e[1][0]-e[0][0]),o=(r-i*(e[1][0]+e[0][0]))/2,a=-i*e[0][1];t.scale(150*i).translate([o,a])}),e)}function s(t,n,e){return o(t,(function(e){var r=+n,i=r/(e[1][1]-e[0][1]),o=-i*e[0][0],a=(r-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([o,a])}),e)}},4135:(t,n,e)=>{"use strict";e.d(n,{A:()=>u,T:()=>a});var r=e(51479),i=e(69830),o=e(9587);function a(t,n){var e=(0,r.gn)(n),i=(0,r.gn)(t)*e;return[e*(0,r.F8)(t)/i,(0,r.F8)(n)/i]}function u(){return(0,o.A)(a).scale(144.049).clipAngle(60)}a.invert=(0,i.I)(r.rY)},56621:(t,n,e)=>{"use strict";e.d(n,{A:()=>c});var r=e(17157),i=e(9391),o=e(27373),a=e(21988),u=e(51479);function c(){var t,n,e,c,s,f,l,h=1,d=0,p=0,g=1,y=1,v=0,_=null,m=1,b=1,A=(0,o.G)({point:function(t,n){var e=M([t,n]);this.stream.point(e[0],e[1])}}),x=i.A;function w(){return m=h*g,b=h*y,f=l=null,M}function M(e){var r=e[0]*m,i=e[1]*b;if(v){var o=i*t-r*n;r=r*t+i*n,i=o}return[r+d,i+p]}return M.invert=function(e){var r=e[0]-d,i=e[1]-p;if(v){var o=i*t+r*n;r=r*t-i*n,i=o}return[r/m,i/b]},M.stream=function(t){return f&&l===t?f:f=A(x(l=t))},M.postclip=function(t){return arguments.length?(x=t,_=e=c=s=null,w()):x},M.clipExtent=function(t){return arguments.length?(x=null==t?(_=e=c=s=null,i.A):(0,r.A)(_=+t[0][0],e=+t[0][1],c=+t[1][0],s=+t[1][1]),w()):null==_?null:[[_,e],[c,s]]},M.scale=function(t){return arguments.length?(h=+t,w()):h},M.translate=function(t){return arguments.length?(d=+t[0],p=+t[1],w()):[d,p]},M.angle=function(e){return arguments.length?(v=e%360*u.F2,n=(0,u.F8)(v),t=(0,u.gn)(v),w()):v*u.uj},M.reflectX=function(t){return arguments.length?(g=t?-1:1,w()):g<0},M.reflectY=function(t){return arguments.length?(y=t?-1:1,w()):y<0},M.fitExtent=function(t,n){return(0,a.sp)(M,t,n)},M.fitSize=function(t,n){return(0,a.Hv)(M,t,n)},M.fitWidth=function(t,n){return(0,a.G0)(M,t,n)},M.fitHeight=function(t,n){return(0,a.FL)(M,t,n)},M}},9587:(t,n,e)=>{"use strict";e.d(n,{A:()=>g,U:()=>y});var r=e(51633),i=e(64366),o=e(17157),a=e(85589),u=e(9391),c=e(51479),s=e(5399),f=e(27373),l=e(21988),h=e(49192),d=(0,f.G)({point:function(t,n){this.stream.point(t*c.F2,n*c.F2)}});function p(t,n,e,r,i,o){if(!o)return function(t,n,e,r,i){function o(o,a){return[n+t*(o*=r),e-t*(a*=i)]}return o.invert=function(o,a){return[(o-n)/t*r,(e-a)/t*i]},o}(t,n,e,r,i);var a=(0,c.gn)(o),u=(0,c.F8)(o),s=a*t,f=u*t,l=a/t,h=u/t,d=(u*e-a*n)/t,p=(u*n+a*e)/t;function g(t,o){return[s*(t*=r)-f*(o*=i)+n,e-f*t-s*o]}return g.invert=function(t,n){return[r*(l*t-h*n+d),i*(p-h*t-l*n)]},g}function g(t){return y((function(){return t}))()}function y(t){var n,e,g,y,v,_,m,b,A,x,w=150,M=480,T=250,N=0,S=0,k=0,E=0,C=0,D=0,F=1,P=1,z=null,I=r.A,U=null,R=u.A,j=.5;function L(t){return b(t[0]*c.F2,t[1]*c.F2)}function O(t){return(t=b.invert(t[0],t[1]))&&[t[0]*c.uj,t[1]*c.uj]}function Y(){var t=p(w,0,0,F,P,D).apply(null,n(N,S)),r=p(w,M-t[0],T-t[1],F,P,D);return e=(0,s.y)(k,E,C),m=(0,a.A)(n,r),b=(0,a.A)(e,m),_=(0,h.A)(m,j),q()}function q(){return A=x=null,L}return L.stream=function(t){return A&&x===t?A:A=d(function(t){return(0,f.G)({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}(e)(I(_(R(x=t)))))},L.preclip=function(t){return arguments.length?(I=t,z=void 0,q()):I},L.postclip=function(t){return arguments.length?(R=t,U=g=y=v=null,q()):R},L.clipAngle=function(t){return arguments.length?(I=+t?(0,i.A)(z=t*c.F2):(z=null,r.A),q()):z*c.uj},L.clipExtent=function(t){return arguments.length?(R=null==t?(U=g=y=v=null,u.A):(0,o.A)(U=+t[0][0],g=+t[0][1],y=+t[1][0],v=+t[1][1]),q()):null==U?null:[[U,g],[y,v]]},L.scale=function(t){return arguments.length?(w=+t,Y()):w},L.translate=function(t){return arguments.length?(M=+t[0],T=+t[1],Y()):[M,T]},L.center=function(t){return arguments.length?(N=t[0]%360*c.F2,S=t[1]%360*c.F2,Y()):[N*c.uj,S*c.uj]},L.rotate=function(t){return arguments.length?(k=t[0]%360*c.F2,E=t[1]%360*c.F2,C=t.length>2?t[2]%360*c.F2:0,Y()):[k*c.uj,E*c.uj,C*c.uj]},L.angle=function(t){return arguments.length?(D=t%360*c.F2,Y()):D*c.uj},L.reflectX=function(t){return arguments.length?(F=t?-1:1,Y()):F<0},L.reflectY=function(t){return arguments.length?(P=t?-1:1,Y()):P<0},L.precision=function(t){return arguments.length?(_=(0,h.A)(m,j=t*t),q()):(0,c.RZ)(j)},L.fitExtent=function(t,n){return(0,l.sp)(L,t,n)},L.fitSize=function(t,n){return(0,l.Hv)(L,t,n)},L.fitWidth=function(t,n){return(0,l.G0)(L,t,n)},L.fitHeight=function(t,n){return(0,l.FL)(L,t,n)},function(){return n=t.apply(this,arguments),L.invert=n.invert&&O,Y()}}},42030:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>u,Gx:()=>a,T7:()=>c});var r=e(51479),i=e(5399),o=e(9587);function a(t,n){return[t,(0,r.Rm)((0,r.Ml)((r.TW+n)/2))]}function u(){return c(a).scale(961/r.FA)}function c(t){var n,e,u,c=(0,o.A)(t),s=c.center,f=c.scale,l=c.translate,h=c.clipExtent,d=null;function p(){var o=r.pi*f(),s=c((0,i.A)(c.rotate()).invert([0,0]));return h(null==d?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:t===a?[[Math.max(s[0]-o,d),n],[Math.min(s[0]+o,e),u]]:[[d,Math.max(s[1]-o,n)],[e,Math.min(s[1]+o,u)]])}return c.scale=function(t){return arguments.length?(f(t),p()):f()},c.translate=function(t){return arguments.length?(l(t),p()):l()},c.center=function(t){return arguments.length?(s(t),p()):s()},c.clipExtent=function(t){return arguments.length?(null==t?d=n=e=u=null:(d=+t[0][0],n=+t[0][1],e=+t[1][0],u=+t[1][1]),p()):null==d?null:[[d,n],[e,u]]},p()}a.invert=function(t,n){return[t,2*(0,r.rY)((0,r.oN)(n))-r.TW]}},85113:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,P:()=>o});var r=e(9587),i=e(51479);function o(t,n){var e=n*n,r=e*e;return[t*(.8707-.131979*e+r*(r*(.003971*e-.001529*r)-.013791)),n*(1.007226+e*(.015085+r*(.028874*e-.044475-.005916*r)))]}function a(){return(0,r.A)(o).scale(175.295)}o.invert=function(t,n){var e,r=n,o=25;do{var a=r*r,u=a*a;r-=e=(r*(1.007226+a*(.015085+u*(.028874*a-.044475-.005916*u)))-n)/(1.007226+a*(.045255+u*(.259866*a-.311325-.005916*11*u)))}while((0,i.tn)(e)>i.Ni&&--o>0);return[t/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),r]}},11977:(t,n,e)=>{"use strict";e.d(n,{A:()=>u,x:()=>a});var r=e(51479),i=e(69830),o=e(9587);function a(t,n){return[(0,r.gn)(n)*(0,r.F8)(t),(0,r.F8)(n)]}function u(){return(0,o.A)(a).scale(249.5).clipAngle(90+r.Ni)}a.invert=(0,i.I)(r.qR)},49192:(t,n,e)=>{"use strict";e.d(n,{A:()=>c});var r=e(40211),i=e(51479),o=e(27373),a=16,u=(0,i.gn)(30*i.F2);function c(t,n){return+n?function(t,n){function e(r,o,a,c,s,f,l,h,d,p,g,y,v,_){var m=l-r,b=h-o,A=m*m+b*b;if(A>4*n&&v--){var x=c+p,w=s+g,M=f+y,T=(0,i.RZ)(x*x+w*w+M*M),N=(0,i.qR)(M/=T),S=(0,i.tn)((0,i.tn)(M)-1)<i.Ni||(0,i.tn)(a-d)<i.Ni?(a+d)/2:(0,i.FP)(w,x),k=t(S,N),E=k[0],C=k[1],D=E-r,F=C-o,P=b*D-m*F;(P*P/A>n||(0,i.tn)((m*D+b*F)/A-.5)>.3||c*p+s*g+f*y<u)&&(e(r,o,a,c,s,f,E,C,S,x/=T,w/=T,M,v,_),_.point(E,C),e(E,C,S,x,w,M,l,h,d,p,g,y,v,_))}}return function(n){var i,o,u,c,s,f,l,h,d,p,g,y,v={point:_,lineStart:m,lineEnd:A,polygonStart:function(){n.polygonStart(),v.lineStart=x},polygonEnd:function(){n.polygonEnd(),v.lineStart=m}};function _(e,r){e=t(e,r),n.point(e[0],e[1])}function m(){h=NaN,v.point=b,n.lineStart()}function b(i,o){var u=(0,r.jf)([i,o]),c=t(i,o);e(h,d,l,p,g,y,h=c[0],d=c[1],l=i,p=u[0],g=u[1],y=u[2],a,n),n.point(h,d)}function A(){v.point=_,n.lineEnd()}function x(){m(),v.point=w,v.lineEnd=M}function w(t,n){b(i=t,n),o=h,u=d,c=p,s=g,f=y,v.point=b}function M(){e(h,d,l,p,g,y,o,u,i,c,s,f,a,n),v.lineEnd=A,A()}return v}}(t,n):function(t){return(0,o.G)({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)}},53127:(t,n,e)=>{"use strict";e.d(n,{A:()=>u,F:()=>a});var r=e(51479),i=e(69830),o=e(9587);function a(t,n){var e=(0,r.gn)(n),i=1+(0,r.gn)(t)*e;return[e*(0,r.F8)(t)/i,(0,r.F8)(n)/i]}function u(){return(0,o.A)(a).scale(250).clipAngle(142)}a.invert=(0,i.I)((function(t){return 2*(0,r.rY)(t)}))},30445:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,b:()=>o});var r=e(51479),i=e(42030);function o(t,n){return[(0,r.Rm)((0,r.Ml)((r.TW+n)/2)),-t]}function a(){var t=(0,i.T7)(o),n=t.center,e=t.rotate;return t.center=function(t){return arguments.length?n([-t[1],t[0]]):[(t=n())[1],-t[0]]},t.rotate=function(t){return arguments.length?e([t[0],t[1],t.length>2?t[2]+90:90]):[(t=e())[0],t[1],t[2]-90]},e([0,0,90]).scale(159.155)}o.invert=function(t,n){return[-n,2*(0,r.rY)((0,r.oN)(t))-r.TW]}},5399:(t,n,e)=>{"use strict";e.d(n,{A:()=>f,y:()=>a});var r=e(85589),i=e(51479);function o(t,n){return[(0,i.tn)(t)>i.pi?t+Math.round(-t/i.FA)*i.FA:t,n]}function a(t,n,e){return(t%=i.FA)?n||e?(0,r.A)(c(t),s(n,e)):c(t):n||e?s(n,e):o}function u(t){return function(n,e){return[(n+=t)>i.pi?n-i.FA:n<-i.pi?n+i.FA:n,e]}}function c(t){var n=u(t);return n.invert=u(-t),n}function s(t,n){var e=(0,i.gn)(t),r=(0,i.F8)(t),o=(0,i.gn)(n),a=(0,i.F8)(n);function u(t,n){var u=(0,i.gn)(n),c=(0,i.gn)(t)*u,s=(0,i.F8)(t)*u,f=(0,i.F8)(n),l=f*e+c*r;return[(0,i.FP)(s*o-l*a,c*e-f*r),(0,i.qR)(l*o+s*a)]}return u.invert=function(t,n){var u=(0,i.gn)(n),c=(0,i.gn)(t)*u,s=(0,i.F8)(t)*u,f=(0,i.F8)(n),l=f*o-s*a;return[(0,i.FP)(s*o+f*a,c*e+l*r),(0,i.qR)(l*e-c*r)]},u}function f(t){function n(n){return(n=t(n[0]*i.F2,n[1]*i.F2))[0]*=i.uj,n[1]*=i.uj,n}return t=a(t[0]*i.F2,t[1]*i.F2,t.length>2?t[2]*i.F2:0),n.invert=function(n){return(n=t.invert(n[0]*i.F2,n[1]*i.F2))[0]*=i.uj,n[1]*=i.uj,n},n}o.invert=o},44373:(t,n,e)=>{"use strict";function r(t,n){t&&o.hasOwnProperty(t.type)&&o[t.type](t,n)}e.d(n,{A:()=>c});var i={Feature:function(t,n){r(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,i=-1,o=e.length;++i<o;)r(e[i].geometry,n)}},o={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){a(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)a(e[r],n,0)},Polygon:function(t,n){u(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)u(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,i=-1,o=e.length;++i<o;)r(e[i],n)}};function a(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function u(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)a(t[e],n,1);n.polygonEnd()}function c(t,n){t&&i.hasOwnProperty(t.type)?i[t.type](t,n):r(t,n)}},27373:(t,n,e)=>{"use strict";function r(t){return{stream:i(t)}}function i(t){return function(n){var e=new o;for(var r in t)e[r]=t[r];return e.stream=n,e}}function o(){}e.d(n,{A:()=>r,G:()=>i}),o.prototype={constructor:o,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},4482:(t,n,e)=>{"use strict";e.d(n,{$:()=>i});var r=e(39630);function i(t,n){var e,i=n?n.length:0,o=t?Math.min(i,t.length):0,a=new Array(o),u=new Array(i);for(e=0;e<o;++e)a[e]=(0,r.A)(t[e],n[e]);for(;e<i;++e)u[e]=n[e];return function(t){for(e=0;e<o;++e)u[e]=a[e](t);return u}}},12373:(t,n,e)=>{"use strict";function r(t,n,e,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*n+(4-6*o+3*a)*e+(1+3*t+3*o-3*a)*r+a*i)/6}function i(t){var n=t.length-1;return function(e){var i=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),o=t[i],a=t[i+1],u=i>0?t[i-1]:2*o-a,c=i<n-1?t[i+2]:2*a-o;return r((e-i/n)*n,u,o,a,c)}}e.d(n,{A:()=>i,H:()=>r})},71321:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(12373);function i(t){var n=t.length;return function(e){var i=Math.floor(((e%=1)<0?++e:e)*n),o=t[(i+n-1)%n],a=t[i%n],u=t[(i+1)%n],c=t[(i+2)%n];return(0,r.H)((e-i/n)*n,o,a,u,c)}}},45816:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>u,lG:()=>o,uN:()=>a});var r=e(57519);function i(t,n){return function(e){return t+e*n}}function o(t,n){var e=n-t;return e?i(t,e>180||e<-180?e-360*Math.round(e/360):e):(0,r.A)(isNaN(t)?n:t)}function a(t){return 1==(t=+t)?u:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):(0,r.A)(isNaN(n)?e:n)}}function u(t,n){var e=n-t;return e?i(t,e):(0,r.A)(isNaN(t)?n:t)}},57519:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=t=>()=>t},96328:(t,n,e)=>{"use strict";e.d(n,{w:()=>a});var r=e(8732),i=e(45816);function o(t){return function n(e){function o(n,o){var a=t((n=(0,r.A)(n)).h,(o=(0,r.A)(o)).h),u=(0,i.Ay)(n.s,o.s),c=(0,i.Ay)(n.l,o.l),s=(0,i.Ay)(n.opacity,o.opacity);return function(t){return n.h=a(t),n.s=u(t),n.l=c(Math.pow(t,e)),n.opacity=s(t),n+""}}return e=+e,o.gamma=n,o}(1)}o(i.lG);var a=o(i.Ay)},14367:(t,n,e)=>{"use strict";function r(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}e.d(n,{A:()=>r})},94830:(t,n,e)=>{"use strict";function r(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}e.d(n,{A:()=>r})},3937:(t,n,e)=>{"use strict";function r(t,n){n||(n=[]);var e,r=t?Math.min(n.length,t.length):0,i=n.slice();return function(o){for(e=0;e<r;++e)i[e]=t[e]*(1-o)+n[e]*o;return i}}function i(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}e.d(n,{A:()=>r,p:()=>i})},3768:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(39630);function i(t,n){var e,i={},o={};for(e in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)e in t?i[e]=(0,r.A)(t[e],n[e]):o[e]=n[e];return function(t){for(e in i)o[e]=i[e](t);return o}}},32321:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(39630);function i(t,n){void 0===n&&(n=t,t=r.A);for(var e=0,i=n.length-1,o=n[0],a=new Array(i<0?0:i);e<i;)a[e]=t(o,o=n[++e]);return function(t){var n=Math.max(0,Math.min(i-1,Math.floor(t*=i)));return a[n](t-n)}}},88604:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>u,Ik:()=>s});var r=e(13316),i=e(12373),o=e(71321),a=e(45816);const u=function t(n){var e=(0,a.uN)(n);function i(t,n){var i=e((t=(0,r.Qh)(t)).r,(n=(0,r.Qh)(n)).r),o=e(t.g,n.g),u=e(t.b,n.b),c=(0,a.Ay)(t.opacity,n.opacity);return function(n){return t.r=i(n),t.g=o(n),t.b=u(n),t.opacity=c(n),t+""}}return i.gamma=t,i}(1);function c(t){return function(n){var e,i,o=n.length,a=new Array(o),u=new Array(o),c=new Array(o);for(e=0;e<o;++e)i=(0,r.Qh)(n[e]),a[e]=i.r||0,u[e]=i.g||0,c[e]=i.b||0;return a=t(a),u=t(u),c=t(c),i.opacity=1,function(t){return i.r=a(t),i.g=u(t),i.b=c(t),i+""}}}var s=c(i.A);c(o.A)},65211:(t,n,e)=>{"use strict";function r(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}e.d(n,{A:()=>r})},8678:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(94830),i=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,o=new RegExp(i.source,"g");function a(t,n){var e,a,u,c=i.lastIndex=o.lastIndex=0,s=-1,f=[],l=[];for(t+="",n+="";(e=i.exec(t))&&(a=o.exec(n));)(u=a.index)>c&&(u=n.slice(c,u),f[s]?f[s]+=u:f[++s]=u),(e=e[0])===(a=a[0])?f[s]?f[s]+=a:f[++s]=a:(f[++s]=null,l.push({i:s,x:(0,r.A)(e,a)})),c=o.lastIndex;return c<n.length&&(u=n.slice(c),f[s]?f[s]+=u:f[++s]=u),f.length<2?l[0]?function(t){return function(n){return t(n)+""}}(l[0].x):function(t){return function(){return t}}(n):(n=l.length,function(t){for(var e,r=0;r<n;++r)f[(e=l[r]).i]=e.x(t);return f.join("")})}},3061:(t,n,e)=>{"use strict";e.d(n,{A:()=>o,D:()=>i});var r=180/Math.PI,i={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function o(t,n,e,i,o,a){var u,c,s;return(u=Math.sqrt(t*t+n*n))&&(t/=u,n/=u),(s=t*e+n*i)&&(e-=t*s,i-=n*s),(c=Math.sqrt(e*e+i*i))&&(e/=c,i/=c,s/=c),t*i<n*e&&(t=-t,n=-n,s=-s,u=-u),{translateX:o,translateY:a,rotate:Math.atan2(n,t)*r,skewX:Math.atan(s)*r,scaleX:u,scaleY:c}}},97936:(t,n,e)=>{"use strict";e.d(n,{I:()=>u,T:()=>a});var r=e(94830),i=e(86803);function o(t,n,e,i){function o(t){return t.length?t.pop()+" ":""}return function(a,u){var c=[],s=[];return a=t(a),u=t(u),function(t,i,o,a,u,c){if(t!==o||i!==a){var s=u.push("translate(",null,n,null,e);c.push({i:s-4,x:(0,r.A)(t,o)},{i:s-2,x:(0,r.A)(i,a)})}else(o||a)&&u.push("translate("+o+n+a+e)}(a.translateX,a.translateY,u.translateX,u.translateY,c,s),function(t,n,e,a){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),a.push({i:e.push(o(e)+"rotate(",null,i)-2,x:(0,r.A)(t,n)})):n&&e.push(o(e)+"rotate("+n+i)}(a.rotate,u.rotate,c,s),function(t,n,e,a){t!==n?a.push({i:e.push(o(e)+"skewX(",null,i)-2,x:(0,r.A)(t,n)}):n&&e.push(o(e)+"skewX("+n+i)}(a.skewX,u.skewX,c,s),function(t,n,e,i,a,u){if(t!==e||n!==i){var c=a.push(o(a)+"scale(",null,",",null,")");u.push({i:c-4,x:(0,r.A)(t,e)},{i:c-2,x:(0,r.A)(n,i)})}else 1===e&&1===i||a.push(o(a)+"scale("+e+","+i+")")}(a.scaleX,a.scaleY,u.scaleX,u.scaleY,c,s),a=u=null,function(t){for(var n,e=-1,r=s.length;++e<r;)c[(n=s[e]).i]=n.x(t);return c.join("")}}}var a=o(i.P,"px, ","px)","deg)"),u=o(i.i,", ",")",")")},86803:(t,n,e)=>{"use strict";e.d(n,{P:()=>o,i:()=>a});var r,i=e(3061);function o(t){const n=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?i.D:(0,i.A)(n.a,n.b,n.c,n.d,n.e,n.f)}function a(t){return null==t?i.D:(r||(r=document.createElementNS("http://www.w3.org/2000/svg","g")),r.setAttribute("transform",t),(t=r.transform.baseVal.consolidate())?(t=t.matrix,(0,i.A)(t.a,t.b,t.c,t.d,t.e,t.f)):i.D)}},39630:(t,n,e)=>{"use strict";e.d(n,{A:()=>h});var r=e(13316),i=e(88604),o=e(4482),a=e(14367),u=e(94830),c=e(3768),s=e(8678),f=e(57519),l=e(3937);function h(t,n){var e,h=typeof n;return null==n||"boolean"===h?(0,f.A)(n):("number"===h?u.A:"string"===h?(e=(0,r.Ay)(n))?(n=e,i.Ay):s.A:n instanceof r.Ay?i.Ay:n instanceof Date?a.A:(0,l.p)(n)?l.A:Array.isArray(n)?o.$:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?c.A:u.A)(t,n)}},51508:(t,n,e)=>{"use strict";function r(t){return((t=Math.exp(t))+1/t)/2}e.d(n,{A:()=>i});const i=function t(n,e,i){function o(t,o){var a,u,c=t[0],s=t[1],f=t[2],l=o[0],h=o[1],d=o[2],p=l-c,g=h-s,y=p*p+g*g;if(y<1e-12)u=Math.log(d/f)/n,a=function(t){return[c+t*p,s+t*g,f*Math.exp(n*t*u)]};else{var v=Math.sqrt(y),_=(d*d-f*f+i*y)/(2*f*e*v),m=(d*d-f*f-i*y)/(2*d*e*v),b=Math.log(Math.sqrt(_*_+1)-_),A=Math.log(Math.sqrt(m*m+1)-m);u=(A-b)/n,a=function(t){var i,o=t*u,a=r(b),l=f/(e*v)*(a*(i=n*o+b,((i=Math.exp(2*i))-1)/(i+1))-function(t){return((t=Math.exp(t))-1/t)/2}(b));return[c+l*p,s+l*g,f*a/r(n*o+b)]}}return a.duration=1e3*u*n/Math.SQRT2,a}return o.rho=function(n){var e=Math.max(.001,+n),r=e*e;return t(e,r,r*r)},o}(Math.SQRT2,2,4)},21465:(t,n,e)=>{"use strict";function r(t){for(var n,e=-1,r=t.length,i=t[r-1],o=0;++e<r;)n=i,i=t[e],o+=n[1]*i[0]-n[0]*i[1];return o/2}e.d(n,{A:()=>r})},36936:(t,n,e)=>{"use strict";function r(t){for(var n,e,r=-1,i=t.length,o=0,a=0,u=t[i-1],c=0;++r<i;)n=u,u=t[r],c+=e=n[0]*u[1]-u[0]*n[1],o+=(n[0]+u[0])*e,a+=(n[1]+u[1])*e;return[o/(c*=3),a/c]}e.d(n,{A:()=>r})},42981:(t,n,e)=>{"use strict";function r(t,n){for(var e,r,i=t.length,o=t[i-1],a=n[0],u=n[1],c=o[0],s=o[1],f=!1,l=0;l<i;++l)e=(o=t[l])[0],(r=o[1])>u!=s>u&&a<(c-e)*(u-r)/(s-r)+e&&(f=!f),c=e,s=r;return f}e.d(n,{A:()=>r})},7778:(t,n,e)=>{"use strict";function r(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])}e.d(n,{A:()=>r})},68219:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(7778);function i(t,n){return t[0]-n[0]||t[1]-n[1]}function o(t){const n=t.length,e=[0,1];let i,o=2;for(i=2;i<n;++i){for(;o>1&&(0,r.A)(t[e[o-2]],t[e[o-1]],t[i])<=0;)--o;e[o++]=i}return e.slice(0,o)}function a(t){if((e=t.length)<3)return null;var n,e,r=new Array(e),a=new Array(e);for(n=0;n<e;++n)r[n]=[+t[n][0],+t[n][1],n];for(r.sort(i),n=0;n<e;++n)a[n]=[r[n][0],-r[n][1]];var u=o(r),c=o(a),s=c[0]===u[0],f=c[c.length-1]===u[u.length-1],l=[];for(n=u.length-1;n>=0;--n)l.push(t[r[u[n]][2]]);for(n=+s;n<c.length-f;++n)l.push(t[r[c[n]][2]]);return l}},84490:(t,n,e)=>{"use strict";e.d(n,{Ab:()=>r.A,Cx:()=>o.A,G2:()=>a.A,J4:()=>u.A,l8:()=>i.A});var r=e(21465),i=e(36936),o=e(68219),a=e(42981),u=e(76416)},76416:(t,n,e)=>{"use strict";function r(t){for(var n,e,r=-1,i=t.length,o=t[i-1],a=o[0],u=o[1],c=0;++r<i;)n=a,e=u,n-=a=(o=t[r])[0],e-=u=o[1],c+=Math.hypot(n,e);return c}e.d(n,{A:()=>r})},30194:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(57573),i=e(12965);const o=function t(n){var e=i.A.source(n);function r(t){if(0==(t=+t))return n;var r=e(t);return function(){return r()/t}}return r.source=t,r}(r.A)},29441:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=function t(n){function e(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return function(){return Math.floor(n()+t)}}return e.source=t,e}(e(57573).A)},58551:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(57573),i=e(18760);const o=function t(n){var e=i.A.source(n);function r(t,n){var r=e(t),i=e(n);return function(){var t=r();return 0===t?0:t/(t+i())}}return r.source=t,r}(r.A)},12396:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(57573),i=e(58551),o=e(10300);const a=function t(n){var e=o.A.source(n),r=i.A.source(n);function a(t,n){return t=+t,(n=+n)>=1?()=>t:n<=0?()=>0:function(){for(var i=0,o=t,a=n;o*a>16&&o*(1-a)>16;){var u=Math.floor((o+1)*a),c=r(u,o-u+1)();c<=a?(i+=u,o-=u,a=(a-c)/(1-c)):(o=u-1,a/=c)}for(var s=a<.5,f=e(s?a:1-a),l=f(),h=0;l<=o;++h)l+=f();return i+(s?h:o-h)}}return a.source=t,a}(r.A)},50090:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,function(){return t+e*Math.tan(Math.PI*n())}}return e.source=t,e}(e(57573).A)},57573:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=Math.random},78458:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=function t(n){function e(t){return function(){return-Math.log1p(-n())/t}}return e.source=t,e}(e(57573).A)},18760:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(57573),i=e(57858);const o=function t(n){var e=i.A.source(n)();function r(t,r){if((t=+t)<0)throw new RangeError("invalid k");if(0===t)return()=>0;if(r=null==r?1:+r,1===t)return()=>-Math.log1p(-n())*r;var i=(t<1?t+1:t)-1/3,o=1/(3*Math.sqrt(i)),a=t<1?()=>Math.pow(n(),1/t):()=>1;return function(){do{do{var t=e(),u=1+o*t}while(u<=0);u*=u*u;var c=1-n()}while(c>=1-.0331*t*t*t*t&&Math.log(c)>=.5*t*t+i*(1-u+Math.log(u)));return i*u*a()*r}}return r.source=t,r}(r.A)},10300:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=function t(n){function e(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return 0===t?()=>1/0:1===t?()=>1:(t=Math.log1p(-t),function(){return 1+Math.floor(Math.log1p(-n())/t)})}return e.source=t,e}(e(57573).A)},3961:(t,n,e)=>{"use strict";e.d(n,{BO:()=>s.A,En:()=>_.A,FE:()=>o.A,FQ:()=>u.A,FU:()=>v.A,HO:()=>i.A,Ix:()=>b.A,R7:()=>h.A,Rb:()=>a.A,UE:()=>l.A,Ye:()=>r.A,kL:()=>y.A,lA:()=>m.A,pR:()=>p.A,qi:()=>g.A,yT:()=>c.A,z6:()=>d.A,zZ:()=>f.A});var r=e(80785),i=e(21360),o=e(57858),a=e(31160),u=e(30194),c=e(12965),s=e(78458),f=e(29762),l=e(29441),h=e(10300),d=e(12396),p=e(18760),g=e(58551),y=e(31663),v=e(50090),_=e(13059),m=e(3606),b=e(42587)},21360:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=function t(n){function e(t,e){return arguments.length<2&&(e=t,t=0),t=Math.floor(t),e=Math.floor(e)-t,function(){return Math.floor(n()*e+t)}}return e.source=t,e}(e(57573).A)},12965:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=function t(n){function e(t){return(t=+t)<=0?()=>0:function(){for(var e=0,r=t;r>1;--r)e+=n();return e+r*n()}}return e.source=t,e}(e(57573).A)},42587:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});const r=1664525,i=1013904223,o=1/4294967296;function a(t=Math.random()){let n=0|(0<=t&&t<1?t/o:Math.abs(t));return()=>(n=r*n+i|0,o*(n>>>0))}},31160:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(57573),i=e(57858);const o=function t(n){var e=i.A.source(n);function r(){var t=e.apply(this,arguments);return function(){return Math.exp(t())}}return r.source=t,r}(r.A)},13059:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,function(){var r=n();return t+e*Math.log(r/(1-r))}}return e.source=t,e}(e(57573).A)},57858:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=function t(n){function e(t,e){var r,i;return t=null==t?0:+t,e=null==e?1:+e,function(){var o;if(null!=r)o=r,r=null;else do{r=2*n()-1,o=2*n()-1,i=r*r+o*o}while(!i||i>1);return t+e*o*Math.sqrt(-2*Math.log(i)/i)}}return e.source=t,e}(e(57573).A)},29762:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=function t(n){function e(t){if((t=+t)<0)throw new RangeError("invalid alpha");return t=1/-t,function(){return Math.pow(1-n(),t)}}return e.source=t,e}(e(57573).A)},3606:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(57573),i=e(12396),o=e(18760);const a=function t(n){var e=o.A.source(n),r=i.A.source(n);function a(t){return function(){for(var i=0,o=t;o>16;){var a=Math.floor(.875*o),u=e(a)();if(u>o)return i+r(a-1,o/u)();i+=a,o-=u}for(var c=-Math.log1p(-n()),s=0;c<=o;++s)c-=Math.log1p(-n());return i+s}}return a.source=t,a}(r.A)},80785:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return n()*e+t}}return e.source=t,e}(e(57573).A)},31663:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=function t(n){function e(t,e,r){var i;return 0==(t=+t)?i=t=>-Math.log(t):(t=1/t,i=n=>Math.pow(n,t)),e=null==e?0:+e,r=null==r?1:+r,function(){return e+r*i(-Math.log1p(-n()))}}return e.source=t,e}(e(57573).A)},62038:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=(0,e(81553).A)("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666")},72780:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=(0,e(81553).A)("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666")},59145:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=(0,e(81553).A)("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928")},32554:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=(0,e(81553).A)("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2")},75127:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=(0,e(81553).A)("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc")},83603:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=(0,e(81553).A)("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999")},47606:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=(0,e(81553).A)("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3")},82197:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=(0,e(81553).A)("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f")},21793:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=(0,e(81553).A)("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab")},55989:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=(0,e(81553).A)("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf")},81553:(t,n,e)=>{"use strict";function r(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(6*r,6*++r);return e}e.d(n,{A:()=>r})},89618:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(r.A);const a=(0,i.A)(o)},66142:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(r.A);const a=(0,i.A)(o)},68898:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(r.A);const a=(0,i.A)(o)},15391:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(r.A);const a=(0,i.A)(o)},96030:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(r.A);const a=(0,i.A)(o)},64663:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(r.A);const a=(0,i.A)(o)},41931:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(r.A);const a=(0,i.A)(o)},46611:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(r.A);const a=(0,i.A)(o)},56193:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(r.A);const a=(0,i.A)(o)},87645:(t,n,e)=>{"use strict";e.d(n,{Cx:()=>I.K,DK:()=>N.A,DQ:()=>l.A,Dv:()=>s.A,Eg:()=>S.A,Fb:()=>H.e0,GA:()=>H.Ay,Gw:()=>S.K,HS:()=>E.K,HZ:()=>d.K,Hf:()=>o.A,Hu:()=>z.K,Ks:()=>f.A,L9:()=>C.A,Lx:()=>q.Ko,MS:()=>U.K,Mh:()=>P.K,ND:()=>d.A,NM:()=>k.A,OK:()=>y.K,OY:()=>m.K,Pi:()=>O.A,Q3:()=>j.A,QE:()=>D.K,QL:()=>A.A,QS:()=>y.A,QU:()=>w.A,SU:()=>Y.A,SV:()=>q.Ay,TE:()=>L.A,Tw:()=>v.A,UA:()=>H.pv,Uo:()=>j.K,V7:()=>T.A,Vm:()=>N.K,Wb:()=>M.K,Wu:()=>_.K,Ww:()=>G.A,Yv:()=>I.A,ZO:()=>g.K,_C:()=>M.A,_Q:()=>F.A,_u:()=>i.A,bD:()=>E.A,c_:()=>m.A,dM:()=>z.A,dn:()=>R.A,dw:()=>L.K,g4:()=>x.K,iW:()=>w.K,iZ:()=>A.K,j9:()=>p.K,jl:()=>T.K,jq:()=>g.A,jy:()=>B.A,kG:()=>u.A,lt:()=>k.K,mC:()=>b.K,mu:()=>x.A,nJ:()=>H.uz,o$:()=>D.A,oK:()=>P.A,pC:()=>v.K,q8:()=>U.A,qJ:()=>b.A,r2:()=>C.K,ri:()=>c.A,t5:()=>r.A,tB:()=>p.A,tG:()=>q.Ub,vU:()=>a.A,xA:()=>R.K,yR:()=>_.A,yn:()=>F.K,zt:()=>h.A});var r=e(55989),i=e(62038),o=e(72780),a=e(59145),u=e(32554),c=e(75127),s=e(83603),f=e(47606),l=e(82197),h=e(21793),d=e(89618),p=e(66142),g=e(68898),y=e(15391),v=e(96030),_=e(64663),m=e(41931),b=e(46611),A=e(56193),x=e(65677),w=e(59863),M=e(8413),T=e(66450),N=e(32766),S=e(47347),k=e(36844),E=e(55432),C=e(85684),D=e(27541),F=e(19461),P=e(70247),z=e(62085),I=e(94118),U=e(90332),R=e(89251),j=e(13622),L=e(37751),O=e(84990),Y=e(77030),q=e(5355),B=e(37302),G=e(28313),H=e(28689)},37205:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(88604);const i=t=>(0,r.Ik)(t[t.length-1])},65677:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(r.A);const a=(0,i.A)(o)},59863:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(r.A);const a=(0,i.A)(o)},8413:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(r.A);const a=(0,i.A)(o)},66450:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(r.A);const a=(0,i.A)(o)},47347:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(r.A);const a=(0,i.A)(o)},32766:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(r.A);const a=(0,i.A)(o)},36844:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(r.A);const a=(0,i.A)(o)},55432:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(r.A);const a=(0,i.A)(o)},27541:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(r.A);const a=(0,i.A)(o)},85684:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(r.A);const a=(0,i.A)(o)},19461:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(r.A);const a=(0,i.A)(o)},70247:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(r.A);const a=(0,i.A)(o)},84990:(t,n,e)=>{"use strict";function r(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"}e.d(n,{A:()=>r})},77030:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(8732);const i=(0,e(96328).w)((0,r.A)(300,.5,0),(0,r.A)(-240,.5,1))},5355:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>c,Ko:()=>o,Ub:()=>a});var r=e(8732),i=e(96328),o=(0,i.w)((0,r.A)(-100,.75,.35),(0,r.A)(80,1.5,.8)),a=(0,i.w)((0,r.A)(260,.75,.35),(0,r.A)(80,1.5,.8)),u=(0,r.A)();function c(t){(t<0||t>1)&&(t-=Math.floor(t));var n=Math.abs(t-.5);return u.h=360*t-100,u.s=1.5-1.5*n,u.l=.8-.9*n,u+""}},37302:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=(0,e(13316).Qh)(),i=Math.PI/3,o=2*Math.PI/3;function a(t){var n;return t=(.5-t)*Math.PI,r.r=255*(n=Math.sin(t))*n,r.g=255*(n=Math.sin(t+i))*n,r.b=255*(n=Math.sin(t+o))*n,r+""}},28313:(t,n,e)=>{"use strict";function r(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"}e.d(n,{A:()=>r})},28689:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>o,e0:()=>u,pv:()=>c,uz:()=>a});var r=e(81553);function i(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}}const o=i((0,r.A)("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var a=i((0,r.A)("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),u=i((0,r.A)("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),c=i((0,r.A)("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"))},62085:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(r.A);const a=(0,i.A)(o)},94118:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(r.A);const a=(0,i.A)(o)},90332:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(r.A);const a=(0,i.A)(o)},37751:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(r.A);const a=(0,i.A)(o)},89251:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(r.A);const a=(0,i.A)(o)},13622:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,K:()=>o});var r=e(81553),i=e(37205),o=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(r.A);const a=(0,i.A)(o)},989:(t,n,e)=>{"use strict";function r(t,n){return null==t||null==n?NaN:t<n?-1:t>n?1:t>=n?0:NaN}e.d(n,{A:()=>r})},14501:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>c});var r=e(989),i=e(26260),o=e(51634);const a=(0,i.A)(r.A),u=a.right,c=(a.left,(0,i.A)(o.A).center,u)},26260:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(989);function i(t){let n=t,e=t,i=t;function o(t,n,r=0,o=t.length){if(r<o){if(0!==e(n,n))return o;do{const e=r+o>>>1;i(t[e],n)<0?r=e+1:o=e}while(r<o)}return r}return 2!==t.length&&(n=(n,e)=>t(n)-e,e=r.A,i=(n,e)=>(0,r.A)(t(n),e)),{left:o,center:function(t,e,r=0,i=t.length){const a=o(t,e,r,i-1);return a>r&&n(t[a-1],e)>-n(t[a],e)?a-1:a},right:function(t,n,r=0,o=t.length){if(r<o){if(0!==e(n,n))return o;do{const e=r+o>>>1;i(t[e],n)<=0?r=e+1:o=e}while(r<o)}return r}}}},88273:(t,n,e)=>{"use strict";function r(t,n){let e;if(void 0===n)for(const n of t)null!=n&&(e<n||void 0===e&&n>=n)&&(e=n);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(e<i||void 0===e&&i>=i)&&(e=i)}return e}e.d(n,{A:()=>r})},31715:(t,n,e)=>{"use strict";function r(t,n){let e;if(void 0===n)for(const n of t)null!=n&&(e>n||void 0===e&&n>=n)&&(e=n);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(e>i||void 0===e&&i>=i)&&(e=i)}return e}e.d(n,{A:()=>r})},51634:(t,n,e)=>{"use strict";function r(t){return null===t?NaN:+t}function*i(t,n){if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&(yield n);else{let e=-1;for(let r of t)null!=(r=n(r,++e,t))&&(r=+r)>=r&&(yield r)}}e.d(n,{A:()=>r,n:()=>i})},78034:(t,n,e)=>{"use strict";e.d(n,{A:()=>u,Z:()=>c});var r=e(88273),i=e(31715),o=e(95340),a=e(51634);function u(t,n,e){if(u=(t=Float64Array.from((0,a.n)(t,e))).length){if((n=+n)<=0||u<2)return(0,i.A)(t);if(n>=1)return(0,r.A)(t);var u,c=(u-1)*n,s=Math.floor(c),f=(0,r.A)((0,o.A)(t,s).subarray(0,s+1));return f+((0,i.A)(t.subarray(s+1))-f)*(c-s)}}function c(t,n,e=a.A){if(r=t.length){if((n=+n)<=0||r<2)return+e(t[0],0,t);if(n>=1)return+e(t[r-1],r-1,t);var r,i=(r-1)*n,o=Math.floor(i),u=+e(t[o],o,t);return u+(+e(t[o+1],o+1,t)-u)*(i-o)}}},95340:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(65963);function i(t,n,e=0,a=t.length-1,u){for(u=void 0===u?r.o2:(0,r.JC)(u);a>e;){if(a-e>600){const r=a-e+1,o=n-e+1,c=Math.log(r),s=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*s*(r-s)/r)*(o-r/2<0?-1:1);i(t,n,Math.max(e,Math.floor(n-o*s/r+f)),Math.min(a,Math.floor(n+(r-o)*s/r+f)),u)}const r=t[n];let c=e,s=a;for(o(t,e,n),u(t[a],r)>0&&o(t,e,a);c<s;){for(o(t,c,s),++c,--s;u(t[c],r)<0;)++c;for(;u(t[s],r)>0;)--s}0===u(t[e],r)?o(t,e,s):(++s,o(t,s,a)),s<=n&&(e=s+1),n<=s&&(a=s-1)}return t}function o(t,n,e){const r=t[n];t[n]=t[e],t[e]=r}},65086:(t,n,e)=>{"use strict";function r(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o}e.d(n,{A:()=>r})},65963:(t,n,e)=>{"use strict";e.d(n,{JC:()=>i,o2:()=>o});var r=e(989);function i(t=r.A){if(t===r.A)return o;if("function"!=typeof t)throw new TypeError("compare is not a function");return(n,e)=>{const r=t(n,e);return r||0===r?r:(0===t(e,e))-(0===t(n,n))}}function o(t,n){return(null==t||!(t>=t))-(null==n||!(n>=n))||(t<n?-1:t>n?1:0)}},31045:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>a,lq:()=>u,sG:()=>c});var r=Math.sqrt(50),i=Math.sqrt(10),o=Math.sqrt(2);function a(t,n,e){var r,i,o,a,c=-1;if(e=+e,(t=+t)==(n=+n)&&e>0)return[t];if((r=n<t)&&(i=t,t=n,n=i),0===(a=u(t,n,e))||!isFinite(a))return[];if(a>0){let e=Math.round(t/a),r=Math.round(n/a);for(e*a<t&&++e,r*a>n&&--r,o=new Array(i=r-e+1);++c<i;)o[c]=(e+c)*a}else{a=-a;let e=Math.round(t*a),r=Math.round(n*a);for(e/a<t&&++e,r/a>n&&--r,o=new Array(i=r-e+1);++c<i;)o[c]=(e+c)/a}return r&&o.reverse(),o}function u(t,n,e){var a=(n-t)/Math.max(0,e),u=Math.floor(Math.log(a)/Math.LN10),c=a/Math.pow(10,u);return u>=0?(c>=r?10:c>=i?5:c>=o?2:1)*Math.pow(10,u):-Math.pow(10,-u)/(c>=r?10:c>=i?5:c>=o?2:1)}function c(t,n,e){var a=Math.abs(n-t)/Math.max(0,e),u=Math.pow(10,Math.floor(Math.log(a)/Math.LN10)),c=a/u;return c>=r?u*=10:c>=i?u*=5:c>=o&&(u*=2),n<t?-u:u}},77483:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(52656),i=e(45173),o=(0,r.A)((t=>t.setHours(0,0,0,0)),((t,n)=>t.setDate(t.getDate()+n)),((t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*i.rR)/i.Nm),(t=>t.getDate()-1));const a=o;o.range},45173:(t,n,e)=>{"use strict";e.d(n,{Fq:()=>u,JJ:()=>o,MP:()=>s,Nm:()=>a,Pv:()=>c,Tt:()=>r,rR:()=>i});const r=1e3,i=60*r,o=60*i,a=24*o,u=7*a,c=30*a,s=365*a},99435:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(52656),i=e(45173),o=(0,r.A)((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*i.Tt-t.getMinutes()*i.rR)}),(function(t,n){t.setTime(+t+n*i.JJ)}),(function(t,n){return(n-t)/i.JJ}),(function(t){return t.getHours()}));const a=o;o.range},52656:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=new Date,i=new Date;function o(t,n,e,a){function u(n){return t(n=0===arguments.length?new Date:new Date(+n)),n}return u.floor=function(n){return t(n=new Date(+n)),n},u.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},u.round=function(t){var n=u(t),e=u.ceil(t);return t-n<e-t?n:e},u.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},u.range=function(e,r,i){var o,a=[];if(e=u.ceil(e),i=null==i?1:Math.floor(i),!(e<r&&i>0))return a;do{a.push(o=new Date(+e)),n(e,i),t(e)}while(o<e&&e<r);return a},u.filter=function(e){return o((function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;n(t,-1),!e(t););else for(;--r>=0;)for(;n(t,1),!e(t););}))},e&&(u.count=function(n,o){return r.setTime(+n),i.setTime(+o),t(r),t(i),Math.floor(e(r,i))},u.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?u.filter(a?function(n){return a(n)%t==0}:function(n){return u.count(0,n)%t==0}):u:null}),u}},25752:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(52656),i=(0,r.A)((function(){}),(function(t,n){t.setTime(+t+n)}),(function(t,n){return n-t}));i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?(0,r.A)((function(n){n.setTime(Math.floor(n/t)*t)}),(function(n,e){n.setTime(+n+e*t)}),(function(n,e){return(e-n)/t})):i:null};const o=i;i.range},41325:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(52656),i=e(45173),o=(0,r.A)((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*i.Tt)}),(function(t,n){t.setTime(+t+n*i.rR)}),(function(t,n){return(n-t)/i.rR}),(function(t){return t.getMinutes()}));const a=o;o.range},36423:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=(0,e(52656).A)((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,n){t.setMonth(t.getMonth()+n)}),(function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}));const i=r;r.range},709:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(52656),i=e(45173),o=(0,r.A)((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,n){t.setTime(+t+n*i.Tt)}),(function(t,n){return(n-t)/i.Tt}),(function(t){return t.getUTCSeconds()}));const a=o;o.range},65903:(t,n,e)=>{"use strict";e.d(n,{$Z:()=>A,Cf:()=>w,lk:()=>x,yE:()=>M});var r=e(26260),i=e(31045),o=e(45173),a=e(25752),u=e(709),c=e(41325),s=e(99435),f=e(77483),l=e(38037),h=e(36423),d=e(87720),p=e(10563),g=e(7101),y=e(69737),v=e(44047),_=e(14069),m=e(53406);function b(t,n,e,c,s,f){const l=[[u.A,1,o.Tt],[u.A,5,5*o.Tt],[u.A,15,15*o.Tt],[u.A,30,30*o.Tt],[f,1,o.rR],[f,5,5*o.rR],[f,15,15*o.rR],[f,30,30*o.rR],[s,1,o.JJ],[s,3,3*o.JJ],[s,6,6*o.JJ],[s,12,12*o.JJ],[c,1,o.Nm],[c,2,2*o.Nm],[e,1,o.Fq],[n,1,o.Pv],[n,3,3*o.Pv],[t,1,o.MP]];function h(n,e,u){const c=Math.abs(e-n)/u,s=(0,r.A)((([,,t])=>t)).right(l,c);if(s===l.length)return t.every((0,i.sG)(n/o.MP,e/o.MP,u));if(0===s)return a.A.every(Math.max((0,i.sG)(n,e,u),1));const[f,h]=l[c/l[s-1][2]<l[s][2]/c?s-1:s];return f.every(h)}return[function(t,n,e){const r=n<t;r&&([t,n]=[n,t]);const i=e&&"function"==typeof e.range?e:h(t,n,e),o=i?i.range(t,+n+1):[];return r?o.reverse():o},h]}const[A,x]=b(m.A,_.A,v.Hl,y.A,g.A,p.A),[w,M]=b(d.A,h.A,l.fz,f.A,s.A,c.A)},69737:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(52656),i=e(45173),o=(0,r.A)((function(t){t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+n)}),(function(t,n){return(n-t)/i.Nm}),(function(t){return t.getUTCDate()-1}));const a=o;o.range},7101:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(52656),i=e(45173),o=(0,r.A)((function(t){t.setUTCMinutes(0,0,0)}),(function(t,n){t.setTime(+t+n*i.JJ)}),(function(t,n){return(n-t)/i.JJ}),(function(t){return t.getUTCHours()}));const a=o;o.range},10563:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(52656),i=e(45173),o=(0,r.A)((function(t){t.setUTCSeconds(0,0)}),(function(t,n){t.setTime(+t+n*i.rR)}),(function(t,n){return(n-t)/i.rR}),(function(t){return t.getUTCMinutes()}));const a=o;o.range},14069:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=(0,e(52656).A)((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCMonth(t.getUTCMonth()+n)}),(function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}));const i=r;r.range},44047:(t,n,e)=>{"use strict";e.d(n,{Hl:()=>a});var r=e(52656),i=e(45173);function o(t){return(0,r.A)((function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+7*n)}),(function(t,n){return(n-t)/i.Fq}))}var a=o(0),u=o(1),c=o(2),s=o(3),f=o(4),l=o(5),h=o(6);a.range,u.range,c.range,s.range,f.range,l.range,h.range},53406:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(52656),i=(0,r.A)((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)}),(function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));i.every=function(t){return isFinite(t=Math.floor(t))&&t>0?(0,r.A)((function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)}),(function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)})):null};const o=i;i.range},38037:(t,n,e)=>{"use strict";e.d(n,{fz:()=>a});var r=e(52656),i=e(45173);function o(t){return(0,r.A)((function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)}),(function(t,n){t.setDate(t.getDate()+7*n)}),(function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*i.rR)/i.Fq}))}var a=o(0),u=o(1),c=o(2),s=o(3),f=o(4),l=o(5),h=o(6);a.range,u.range,c.range,s.range,f.range,l.range,h.range},87720:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(52656),i=(0,r.A)((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n)}),(function(t,n){return n.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));i.every=function(t){return isFinite(t=Math.floor(t))&&t>0?(0,r.A)((function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)}),(function(n,e){n.setFullYear(n.getFullYear()+e*t)})):null};const o=i;i.range},58171:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,z:()=>c});var r=e(65086),i=e(72046),o=e(14655);function a(){var t,n,e=(0,o.A)().unknown(void 0),u=e.domain,c=e.range,s=0,f=1,l=!1,h=0,d=0,p=.5;function g(){var e=u().length,i=f<s,o=i?f:s,a=i?s:f;t=(a-o)/Math.max(1,e-h+2*d),l&&(t=Math.floor(t)),o+=(a-o-t*(e-h))*p,n=t*(1-h),l&&(o=Math.round(o),n=Math.round(n));var g=(0,r.A)(e).map((function(n){return o+t*n}));return c(i?g.reverse():g)}return delete e.unknown,e.domain=function(t){return arguments.length?(u(t),g()):u()},e.range=function(t){return arguments.length?([s,f]=t,s=+s,f=+f,g()):[s,f]},e.rangeRound=function(t){return[s,f]=t,s=+s,f=+f,l=!0,g()},e.bandwidth=function(){return n},e.step=function(){return t},e.round=function(t){return arguments.length?(l=!!t,g()):l},e.padding=function(t){return arguments.length?(h=Math.min(1,d=+t),g()):h},e.paddingInner=function(t){return arguments.length?(h=Math.min(1,t),g()):h},e.paddingOuter=function(t){return arguments.length?(d=+t,g()):d},e.align=function(t){return arguments.length?(p=Math.max(0,Math.min(1,t)),g()):p},e.copy=function(){return a(u(),[s,f]).round(l).paddingInner(h).paddingOuter(d).align(p)},i.C.apply(g(),arguments)}function u(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return u(n())},t}function c(){return u(a.apply(null,arguments).paddingInner(1))}},58076:(t,n,e)=>{"use strict";function r(t){return function(){return t}}e.d(n,{A:()=>r})},84671:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>y,C:()=>p,D_:()=>f,Gu:()=>g});var r=e(14501),i=e(39630),o=e(94830),a=e(65211),u=e(58076),c=e(29701),s=[0,1];function f(t){return t}function l(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:(0,u.A)(isNaN(n)?NaN:.5)}function h(t,n,e){var r=t[0],i=t[1],o=n[0],a=n[1];return i<r?(r=l(i,r),o=e(a,o)):(r=l(r,i),o=e(o,a)),function(t){return o(r(t))}}function d(t,n,e){var i=Math.min(t.length,n.length)-1,o=new Array(i),a=new Array(i),u=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++u<i;)o[u]=l(t[u],t[u+1]),a[u]=e(n[u],n[u+1]);return function(n){var e=(0,r.Ay)(t,n,1,i)-1;return a[e](o[e](n))}}function p(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function g(){var t,n,e,r,u,l,p=s,g=s,y=i.A,v=f;function _(){var t,n,e,i=Math.min(p.length,g.length);return v!==f&&(t=p[0],n=p[i-1],t>n&&(e=t,t=n,n=e),v=function(e){return Math.max(t,Math.min(n,e))}),r=i>2?d:h,u=l=null,m}function m(n){return null==n||isNaN(n=+n)?e:(u||(u=r(p.map(t),g,y)))(t(v(n)))}return m.invert=function(e){return v(n((l||(l=r(g,p.map(t),o.A)))(e)))},m.domain=function(t){return arguments.length?(p=Array.from(t,c.A),_()):p.slice()},m.range=function(t){return arguments.length?(g=Array.from(t),_()):g.slice()},m.rangeRound=function(t){return g=Array.from(t),y=a.A,_()},m.clamp=function(t){return arguments.length?(v=!!t||f,_()):v!==f},m.interpolate=function(t){return arguments.length?(y=t,_()):y},m.unknown=function(t){return arguments.length?(e=t,m):e},function(e,r){return t=e,n=r,_()}}function y(){return g()(f,f)}},83201:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>p,Ee:()=>g,Iu:()=>v,QO:()=>_,fy:()=>y});var r=e(32321),i=e(39630),o=e(65211),a=e(84671),u=e(72046),c=e(35345),s=e(63784),f=e(96155),l=e(22871),h=e(8196);function d(){var t,n,e,u,c,s,f,l=0,h=.5,d=1,p=1,g=a.D_,y=!1;function v(t){return isNaN(t=+t)?f:(t=.5+((t=+s(t))-n)*(p*t<p*n?u:c),g(y?Math.max(0,Math.min(1,t)):t))}function _(t){return function(n){var e,i,o;return arguments.length?([e,i,o]=n,g=(0,r.A)(t,[e,i,o]),v):[g(0),g(.5),g(1)]}}return v.domain=function(r){return arguments.length?([l,h,d]=r,t=s(l=+l),n=s(h=+h),e=s(d=+d),u=t===n?0:.5/(n-t),c=n===e?0:.5/(e-n),p=n<t?-1:1,v):[l,h,d]},v.clamp=function(t){return arguments.length?(y=!!t,v):y},v.interpolator=function(t){return arguments.length?(g=t,v):g},v.range=_(i.A),v.rangeRound=_(o.A),v.unknown=function(t){return arguments.length?(f=t,v):f},function(r){return s=r,t=r(l),n=r(h),e=r(d),u=t===n?0:.5/(n-t),c=n===e?0:.5/(e-n),p=n<t?-1:1,v}}function p(){var t=(0,c.C)(d()(a.D_));return t.copy=function(){return(0,f.C)(t,p())},u.K.apply(t,arguments)}function g(){var t=(0,s.g)(d()).domain([.1,1,10]);return t.copy=function(){return(0,f.C)(t,g()).base(t.base())},u.K.apply(t,arguments)}function y(){var t=(0,l.s)(d());return t.copy=function(){return(0,f.C)(t,y()).constant(t.constant())},u.K.apply(t,arguments)}function v(){var t=(0,h.DS)(d());return t.copy=function(){return(0,f.C)(t,v()).exponent(t.exponent())},u.K.apply(t,arguments)}function _(){return v.apply(null,arguments).exponent(.5)}},24902:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(35345),i=e(29701);function o(t){var n;function e(t){return null==t||isNaN(t=+t)?n:t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=Array.from(n,i.A),e):t.slice()},e.unknown=function(t){return arguments.length?(n=t,e):n},e.copy=function(){return o(t).unknown(n)},t=arguments.length?Array.from(t,i.A):[0,1],(0,r.C)(e)}},32098:(t,n,e)=>{"use strict";e.d(n,{Bv:()=>s.RZ,Cr:()=>_.Ee,M3:()=>y.a6,Mb:()=>_.Ay,Pp:()=>g.A,QL:()=>l.A,RW:()=>s.Ay,T:()=>v.A,U4:()=>c.h,UM:()=>c.A,Vr:()=>m.A,WH:()=>r.A,WT:()=>h.A,ZE:()=>a.A,aX:()=>u.A,af:()=>f.A,c3:()=>d.A,ex:()=>y.Ay,hq:()=>r.z,jo:()=>i.A,m4:()=>o.A,nV:()=>y.bZ,q9:()=>_.QO,ui:()=>y.iG,w7:()=>p.A,xh:()=>_.fy,ye:()=>y.ao,yj:()=>_.Iu});var r=e(58171),i=e(24902),o=e(35345),a=e(63784),u=e(22871),c=e(14655),s=e(8196),f=e(70503),l=e(8377),h=e(4947),d=e(59865),p=e(73909),g=e(40349),y=e(96155),v=e(32030),_=e(83201),m=e(62458)},72046:(t,n,e)=>{"use strict";function r(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}function i(t,n){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof n?this.interpolator(n):this.range(n)}return this}e.d(n,{C:()=>r,K:()=>i})},35345:(t,n,e)=>{"use strict";e.d(n,{A:()=>c,C:()=>u});var r=e(31045),i=e(84671),o=e(72046),a=e(62458);function u(t){var n=t.domain;return t.ticks=function(t){var e=n();return(0,r.Ay)(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var r=n();return(0,a.A)(r[0],r[r.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var i,o,a=n(),u=0,c=a.length-1,s=a[u],f=a[c],l=10;for(f<s&&(o=s,s=f,f=o,o=u,u=c,c=o);l-- >0;){if((o=(0,r.lq)(s,f,e))===i)return a[u]=s,a[c]=f,n(a);if(o>0)s=Math.floor(s/o)*o,f=Math.ceil(f/o)*o;else{if(!(o<0))break;s=Math.ceil(s*o)/o,f=Math.floor(f*o)/o}i=o}return t},t}function c(){var t=(0,i.Ay)();return t.copy=function(){return(0,i.C)(t,c())},o.C.apply(t,arguments),u(t)}},63784:(t,n,e)=>{"use strict";e.d(n,{A:()=>y,g:()=>g});var r=e(31045),i=e(44888),o=e(28354),a=e(1357),u=e(84671),c=e(72046);function s(t){return Math.log(t)}function f(t){return Math.exp(t)}function l(t){return-Math.log(-t)}function h(t){return-Math.exp(-t)}function d(t){return isFinite(t)?+("1e"+t):t<0?0:t}function p(t){return(n,e)=>-t(-n,e)}function g(t){const n=t(s,f),e=n.domain;let u,c,g=10;function y(){return u=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),n=>Math.log(n)/t)}(g),c=function(t){return 10===t?d:t===Math.E?Math.exp:n=>Math.pow(t,n)}(g),e()[0]<0?(u=p(u),c=p(c),t(l,h)):t(s,f),n}return n.base=function(t){return arguments.length?(g=+t,y()):g},n.domain=function(t){return arguments.length?(e(t),y()):e()},n.ticks=t=>{const n=e();let i=n[0],o=n[n.length-1];const a=o<i;a&&([i,o]=[o,i]);let s,f,l=u(i),h=u(o);const d=null==t?10:+t;let p=[];if(!(g%1)&&h-l<d){if(l=Math.floor(l),h=Math.ceil(h),i>0){for(;l<=h;++l)for(s=1;s<g;++s)if(f=l<0?s/c(-l):s*c(l),!(f<i)){if(f>o)break;p.push(f)}}else for(;l<=h;++l)for(s=g-1;s>=1;--s)if(f=l>0?s/c(-l):s*c(l),!(f<i)){if(f>o)break;p.push(f)}2*p.length<d&&(p=(0,r.Ay)(i,o,d))}else p=(0,r.Ay)(l,h,Math.min(h-l,d)).map(c);return a?p.reverse():p},n.tickFormat=(t,e)=>{if(null==t&&(t=10),null==e&&(e=10===g?"s":","),"function"!=typeof e&&(g%1||null!=(e=(0,i.A)(e)).precision||(e.trim=!0),e=(0,o.GP)(e)),t===1/0)return e;const r=Math.max(1,g*t/n.ticks().length);return t=>{let n=t/c(Math.round(u(t)));return n*g<g-.5&&(n*=g),n<=r?e(t):""}},n.nice=()=>e((0,a.A)(e(),{floor:t=>c(Math.floor(u(t))),ceil:t=>c(Math.ceil(u(t)))})),n}function y(){const t=g((0,u.Gu)()).domain([1,10]);return t.copy=()=>(0,u.C)(t,y()).base(t.base()),c.C.apply(t,arguments),t}},1357:(t,n,e)=>{"use strict";function r(t,n){var e,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(e=r,r=i,i=e,e=o,o=a,a=e),t[r]=n.floor(o),t[i]=n.ceil(a),t}e.d(n,{A:()=>r})},29701:(t,n,e)=>{"use strict";function r(t){return+t}e.d(n,{A:()=>r})},14655:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,h:()=>o});var r=e(34080),i=e(72046);const o=Symbol("implicit");function a(){var t=new r.B,n=[],e=[],u=o;function c(r){let i=t.get(r);if(void 0===i){if(u!==o)return u;t.set(r,i=n.push(r)-1)}return e[i%e.length]}return c.domain=function(e){if(!arguments.length)return n.slice();n=[],t=new r.B;for(const r of e)t.has(r)||t.set(r,n.push(r)-1);return c},c.range=function(t){return arguments.length?(e=Array.from(t),c):e.slice()},c.unknown=function(t){return arguments.length?(u=t,c):u},c.copy=function(){return a(n,e).unknown(u)},i.C.apply(c,arguments),c}},8196:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>f,DS:()=>s,RZ:()=>l});var r=e(35345),i=e(84671),o=e(72046);function a(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function u(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function c(t){return t<0?-t*t:t*t}function s(t){var n=t(i.D_,i.D_),e=1;return n.exponent=function(n){return arguments.length?1==(e=+n)?t(i.D_,i.D_):.5===e?t(u,c):t(a(e),a(1/e)):e},(0,r.C)(n)}function f(){var t=s((0,i.Gu)());return t.copy=function(){return(0,i.C)(t,f()).exponent(t.exponent())},o.C.apply(t,arguments),t}function l(){return f.apply(null,arguments).exponent(.5)}},8377:(t,n,e)=>{"use strict";e.d(n,{A:()=>u});var r=e(78034),i=e(14501),o=e(989),a=e(72046);function u(){var t,n=[],e=[],c=[];function s(){var t=0,i=Math.max(1,e.length);for(c=new Array(i-1);++t<i;)c[t-1]=(0,r.Z)(n,t/i);return f}function f(n){return null==n||isNaN(n=+n)?t:e[(0,i.Ay)(c,n)]}return f.invertExtent=function(t){var r=e.indexOf(t);return r<0?[NaN,NaN]:[r>0?c[r-1]:n[0],r<c.length?c[r]:n[n.length-1]]},f.domain=function(t){if(!arguments.length)return n.slice();n=[];for(let e of t)null==e||isNaN(e=+e)||n.push(e);return n.sort(o.A),s()},f.range=function(t){return arguments.length?(e=Array.from(t),s()):e.slice()},f.unknown=function(n){return arguments.length?(t=n,f):t},f.quantiles=function(){return c.slice()},f.copy=function(){return u().domain(n).range(e).unknown(t)},a.C.apply(f,arguments)}},4947:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(14501),i=e(35345),o=e(72046);function a(){var t,n=0,e=1,u=1,c=[.5],s=[0,1];function f(n){return null!=n&&n<=n?s[(0,r.Ay)(c,n,0,u)]:t}function l(){var t=-1;for(c=new Array(u);++t<u;)c[t]=((t+1)*e-(t-u)*n)/(u+1);return f}return f.domain=function(t){return arguments.length?([n,e]=t,n=+n,e=+e,l()):[n,e]},f.range=function(t){return arguments.length?(u=(s=Array.from(t)).length-1,l()):s.slice()},f.invertExtent=function(t){var r=s.indexOf(t);return r<0?[NaN,NaN]:r<1?[n,c[0]]:r>=u?[c[u-1],e]:[c[r-1],c[r]]},f.unknown=function(n){return arguments.length?(t=n,f):f},f.thresholds=function(){return c.slice()},f.copy=function(){return a().domain([n,e]).range(s).unknown(t)},o.C.apply((0,i.C)(f),arguments)}},70503:(t,n,e)=>{"use strict";e.d(n,{A:()=>c});var r=e(84671),i=e(72046),o=e(35345),a=e(29701);function u(t){return Math.sign(t)*t*t}function c(){var t,n=(0,r.Ay)(),e=[0,1],s=!1;function f(e){var r=function(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}(n(e));return isNaN(r)?t:s?Math.round(r):r}return f.invert=function(t){return n.invert(u(t))},f.domain=function(t){return arguments.length?(n.domain(t),f):n.domain()},f.range=function(t){return arguments.length?(n.range((e=Array.from(t,a.A)).map(u)),f):e.slice()},f.rangeRound=function(t){return f.range(t).round(!0)},f.round=function(t){return arguments.length?(s=!!t,f):s},f.clamp=function(t){return arguments.length?(n.clamp(t),f):n.clamp()},f.unknown=function(n){return arguments.length?(t=n,f):t},f.copy=function(){return c(n.domain(),e).round(s).clamp(n.clamp()).unknown(t)},i.C.apply(f,arguments),(0,o.C)(f)}},96155:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>d,C:()=>h,a6:()=>p,ao:()=>v,bZ:()=>g,iG:()=>y});var r=e(39630),i=e(65211),o=e(84671),a=e(72046),u=e(35345),c=e(63784),s=e(22871),f=e(8196);function l(){var t,n,e,a,u,c=0,s=1,f=o.D_,l=!1;function h(n){return null==n||isNaN(n=+n)?u:f(0===e?.5:(n=(a(n)-t)*e,l?Math.max(0,Math.min(1,n)):n))}function d(t){return function(n){var e,r;return arguments.length?([e,r]=n,f=t(e,r),h):[f(0),f(1)]}}return h.domain=function(r){return arguments.length?([c,s]=r,t=a(c=+c),n=a(s=+s),e=t===n?0:1/(n-t),h):[c,s]},h.clamp=function(t){return arguments.length?(l=!!t,h):l},h.interpolator=function(t){return arguments.length?(f=t,h):f},h.range=d(r.A),h.rangeRound=d(i.A),h.unknown=function(t){return arguments.length?(u=t,h):u},function(r){return a=r,t=r(c),n=r(s),e=t===n?0:1/(n-t),h}}function h(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function d(){var t=(0,u.C)(l()(o.D_));return t.copy=function(){return h(t,d())},a.K.apply(t,arguments)}function p(){var t=(0,c.g)(l()).domain([1,10]);return t.copy=function(){return h(t,p()).base(t.base())},a.K.apply(t,arguments)}function g(){var t=(0,s.s)(l());return t.copy=function(){return h(t,g()).constant(t.constant())},a.K.apply(t,arguments)}function y(){var t=(0,f.DS)(l());return t.copy=function(){return h(t,y()).exponent(t.exponent())},a.K.apply(t,arguments)}function v(){return y.apply(null,arguments).exponent(.5)}},32030:(t,n,e)=>{"use strict";e.d(n,{A:()=>c});var r=e(14501),i=e(989),o=e(78034),a=e(84671),u=e(72046);function c(){var t=[],n=a.D_;function e(e){if(null!=e&&!isNaN(e=+e))return n(((0,r.Ay)(t,e,1)-1)/(t.length-1))}return e.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let e of n)null==e||isNaN(e=+e)||t.push(e);return t.sort(i.A),e},e.interpolator=function(t){return arguments.length?(n=t,e):n},e.range=function(){return t.map(((e,r)=>n(r/(t.length-1))))},e.quantiles=function(n){return Array.from({length:n+1},((e,r)=>(0,o.A)(t,r/n)))},e.copy=function(){return c(n).domain(t)},u.K.apply(e,arguments)}},22871:(t,n,e)=>{"use strict";e.d(n,{A:()=>s,s:()=>c});var r=e(35345),i=e(84671),o=e(72046);function a(t){return function(n){return Math.sign(n)*Math.log1p(Math.abs(n/t))}}function u(t){return function(n){return Math.sign(n)*Math.expm1(Math.abs(n))*t}}function c(t){var n=1,e=t(a(n),u(n));return e.constant=function(e){return arguments.length?t(a(n=+e),u(n)):n},(0,r.C)(e)}function s(){var t=c((0,i.Gu)());return t.copy=function(){return(0,i.C)(t,s()).constant(t.constant())},o.C.apply(t,arguments)}},59865:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(14501),i=e(72046);function o(){var t,n=[.5],e=[0,1],a=1;function u(i){return null!=i&&i<=i?e[(0,r.Ay)(n,i,0,a)]:t}return u.domain=function(t){return arguments.length?(n=Array.from(t),a=Math.min(n.length,e.length-1),u):n.slice()},u.range=function(t){return arguments.length?(e=Array.from(t),a=Math.min(n.length,e.length-1),u):e.slice()},u.invertExtent=function(t){var r=e.indexOf(t);return[n[r-1],n[r]]},u.unknown=function(n){return arguments.length?(t=n,u):t},u.copy=function(){return o().domain(n).range(e).unknown(t)},i.C.apply(u,arguments)}},62458:(t,n,e)=>{"use strict";e.d(n,{A:()=>s});var r=e(31045),i=e(44888),o=e(7421),a=e(28354),u=e(10129),c=e(97279);function s(t,n,e,s){var f,l=(0,r.sG)(t,n,e);switch((s=(0,i.A)(null==s?",f":s)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(n));return null!=s.precision||isNaN(f=(0,o.A)(l,h))||(s.precision=f),(0,a.s)(s,h);case"":case"e":case"g":case"p":case"r":null!=s.precision||isNaN(f=(0,u.A)(l,Math.max(Math.abs(t),Math.abs(n))))||(s.precision=f-("e"===s.type));break;case"f":case"%":null!=s.precision||isNaN(f=(0,c.A)(l))||(s.precision=f-2*("%"===s.type))}return(0,a.GP)(s)}},73909:(t,n,e)=>{"use strict";e.d(n,{A:()=>_,B:()=>v});var r=e(65903),i=e(87720),o=e(36423),a=e(38037),u=e(77483),c=e(99435),s=e(41325),f=e(709),l=e(15869),h=e(84671),d=e(72046),p=e(1357);function g(t){return new Date(t)}function y(t){return t instanceof Date?+t:+new Date(+t)}function v(t,n,e,r,i,o,a,u,c,s){var f=(0,h.Ay)(),l=f.invert,d=f.domain,_=s(".%L"),m=s(":%S"),b=s("%I:%M"),A=s("%I %p"),x=s("%a %d"),w=s("%b %d"),M=s("%B"),T=s("%Y");function N(t){return(c(t)<t?_:u(t)<t?m:a(t)<t?b:o(t)<t?A:r(t)<t?i(t)<t?x:w:e(t)<t?M:T)(t)}return f.invert=function(t){return new Date(l(t))},f.domain=function(t){return arguments.length?d(Array.from(t,y)):d().map(g)},f.ticks=function(n){var e=d();return t(e[0],e[e.length-1],null==n?10:n)},f.tickFormat=function(t,n){return null==n?N:s(n)},f.nice=function(t){var e=d();return t&&"function"==typeof t.range||(t=n(e[0],e[e.length-1],null==t?10:t)),t?d((0,p.A)(e,t)):f},f.copy=function(){return(0,h.C)(f,v(t,n,e,r,i,o,a,u,c,s))},f}function _(){return d.C.apply(v(r.Cf,r.yE,i.A,o.A,a.fz,u.A,c.A,s.A,f.A,l.DC).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}},40349:(t,n,e)=>{"use strict";e.d(n,{A:()=>p});var r=e(65903),i=e(53406),o=e(14069),a=e(44047),u=e(69737),c=e(7101),s=e(10563),f=e(709),l=e(15869),h=e(73909),d=e(72046);function p(){return d.C.apply((0,h.B)(r.$Z,r.lk,i.A,o.A,a.Hl,u.A,c.A,s.A,f.A,l.aL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}},3491:(t,n,e)=>{"use strict";function r(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}e.d(n,{A:()=>r})},99936:(t,n,e)=>{"use strict";function r(t){return function(){return t}}e.d(n,{A:()=>r})},92100:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(8206),i=e(95556);function o(t){return(0,i.A)((0,r.A)(t).call(document.documentElement))}},8206:(t,n,e)=>{"use strict";e.d(n,{A:()=>u});var r=e(62773),i=e(23456);function o(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===i.g&&n.documentElement.namespaceURI===i.g?n.createElement(t):n.createElementNS(e,t)}}function a(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function u(t){var n=(0,r.A)(t);return(n.local?a:o)(n)}},58094:(t,n,e)=>{"use strict";e.d(n,{D_:()=>f.A,Lt:()=>l.A,MF:()=>u.A,Ub:()=>h.A,Wn:()=>s.A,XM:()=>g.A,gD:()=>p.A,iF:()=>y.j,jN:()=>a.A,r$:()=>c.A,r1:()=>d.Ay,sr:()=>o.A,vt:()=>r.A,x:()=>v.A,xL:()=>i.A});var r=e(92100),i=e(8206),o=e(50001),a=e(14644),u=e(62773),c=e(23456),s=e(62675),f=e(87574),l=e(95556),h=e(13613),d=e(11895),p=e(81137),g=e(98974),y=e(39274),v=e(99980)},50001:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=0;function i(){return new o}function o(){this._="@"+(++r).toString(36)}o.prototype=i.prototype={constructor:o,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}}},14644:(t,n,e)=>{"use strict";function r(t){return function(){return this.matches(t)}}function i(t){return function(n){return n.matches(t)}}e.d(n,{A:()=>r,j:()=>i})},62773:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(23456);function i(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),r.A.hasOwnProperty(n)?{space:r.A[n],local:t}:t}},23456:(t,n,e)=>{"use strict";e.d(n,{A:()=>i,g:()=>r});var r="http://www.w3.org/1999/xhtml";const i={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},62675:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(55777);function i(t,n){if(t=(0,r.A)(t),void 0===n&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(n.getScreenCTM().inverse())).x,i.y]}if(n.getBoundingClientRect){var o=n.getBoundingClientRect();return[t.clientX-o.left-n.clientLeft,t.clientY-o.top-n.clientTop]}}return[t.pageX,t.pageY]}},87574:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(62675),i=e(55777);function o(t,n){return t.target&&(t=(0,i.A)(t),void 0===n&&(n=t.currentTarget),t=t.touches||[t]),Array.from(t,(t=>(0,r.A)(t,n)))}},95556:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(11895);function i(t){return"string"==typeof t?new r.LN([[document.querySelector(t)]],[document.documentElement]):new r.LN([[t]],r.zr)}},13613:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(3491),i=e(11895);function o(t){return"string"==typeof t?new i.LN([document.querySelectorAll(t)],[document.documentElement]):new i.LN([(0,r.A)(t)],i.zr)}},82123:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(8206);function i(t){var n="function"==typeof t?t:(0,r.A)(t);return this.select((function(){return this.appendChild(n.apply(this,arguments))}))}},7660:(t,n,e)=>{"use strict";e.d(n,{A:()=>f});var r=e(62773);function i(t){return function(){this.removeAttribute(t)}}function o(t){return function(){this.removeAttributeNS(t.space,t.local)}}function a(t,n){return function(){this.setAttribute(t,n)}}function u(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function c(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function s(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function f(t,n){var e=(0,r.A)(t);if(arguments.length<2){var f=this.node();return e.local?f.getAttributeNS(e.space,e.local):f.getAttribute(e)}return this.each((null==n?e.local?o:i:"function"==typeof n?e.local?s:c:e.local?u:a)(e,n))}},78915:(t,n,e)=>{"use strict";function r(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}e.d(n,{A:()=>r})},51142:(t,n,e)=>{"use strict";function r(t){return t.trim().split(/^|\s+/)}function i(t){return t.classList||new o(t)}function o(t){this._node=t,this._names=r(t.getAttribute("class")||"")}function a(t,n){for(var e=i(t),r=-1,o=n.length;++r<o;)e.add(n[r])}function u(t,n){for(var e=i(t),r=-1,o=n.length;++r<o;)e.remove(n[r])}function c(t){return function(){a(this,t)}}function s(t){return function(){u(this,t)}}function f(t,n){return function(){(n.apply(this,arguments)?a:u)(this,t)}}function l(t,n){var e=r(t+"");if(arguments.length<2){for(var o=i(this.node()),a=-1,u=e.length;++a<u;)if(!o.contains(e[a]))return!1;return!0}return this.each(("function"==typeof n?f:n?c:s)(e,n))}e.d(n,{A:()=>l}),o.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}}},402:(t,n,e)=>{"use strict";function r(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function i(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function o(t){return this.select(t?i:r)}e.d(n,{A:()=>o})},44939:(t,n,e)=>{"use strict";e.d(n,{A:()=>s});var r=e(11895),i=e(55781),o=e(99936);function a(t,n,e,r,o,a){for(var u,c=0,s=n.length,f=a.length;c<f;++c)(u=n[c])?(u.__data__=a[c],r[c]=u):e[c]=new i.L(t,a[c]);for(;c<s;++c)(u=n[c])&&(o[c]=u)}function u(t,n,e,r,o,a,u){var c,s,f,l=new Map,h=n.length,d=a.length,p=new Array(h);for(c=0;c<h;++c)(s=n[c])&&(p[c]=f=u.call(s,s.__data__,c,n)+"",l.has(f)?o[c]=s:l.set(f,s));for(c=0;c<d;++c)f=u.call(t,a[c],c,a)+"",(s=l.get(f))?(r[c]=s,s.__data__=a[c],l.delete(f)):e[c]=new i.L(t,a[c]);for(c=0;c<h;++c)(s=n[c])&&l.get(p[c])===s&&(o[c]=s)}function c(t){return t.__data__}function s(t,n){if(!arguments.length)return Array.from(this,c);var e=n?u:a,i=this._parents,s=this._groups;"function"!=typeof t&&(t=(0,o.A)(t));for(var l=s.length,h=new Array(l),d=new Array(l),p=new Array(l),g=0;g<l;++g){var y=i[g],v=s[g],_=v.length,m=f(t.call(y,y&&y.__data__,g,i)),b=m.length,A=d[g]=new Array(b),x=h[g]=new Array(b);e(y,v,A,x,p[g]=new Array(_),m,n);for(var w,M,T=0,N=0;T<b;++T)if(w=A[T]){for(T>=N&&(N=T+1);!(M=x[N])&&++N<b;);w._next=M||null}}return(h=new r.LN(h,i))._enter=d,h._exit=p,h}function f(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}},20948:(t,n,e)=>{"use strict";function r(t){return arguments.length?this.property("__data__",t):this.node().__data__}e.d(n,{A:()=>r})},82841:(t,n,e)=>{"use strict";e.d(n,{A:()=>u});var r=e(99980);function i(t,n,e){var i=(0,r.A)(t),o=i.CustomEvent;"function"==typeof o?o=new o(n,e):(o=i.document.createEvent("Event"),e?(o.initEvent(n,e.bubbles,e.cancelable),o.detail=e.detail):o.initEvent(n,!1,!1)),t.dispatchEvent(o)}function o(t,n){return function(){return i(this,t,n)}}function a(t,n){return function(){return i(this,t,n.apply(this,arguments))}}function u(t,n){return this.each(("function"==typeof n?a:o)(t,n))}},53094:(t,n,e)=>{"use strict";function r(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this}e.d(n,{A:()=>r})},73582:(t,n,e)=>{"use strict";function r(){return!this.node()}e.d(n,{A:()=>r})},55781:(t,n,e)=>{"use strict";e.d(n,{A:()=>o,L:()=>a});var r=e(60707),i=e(11895);function o(){return new i.LN(this._enter||this._groups.map(r.A),this._parents)}function a(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}a.prototype={constructor:a,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}}},76115:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(60707),i=e(11895);function o(){return new i.LN(this._exit||this._groups.map(r.A),this._parents)}},32297:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(11895),i=e(14644);function o(t){"function"!=typeof t&&(t=(0,i.A)(t));for(var n=this._groups,e=n.length,o=new Array(e),a=0;a<e;++a)for(var u,c=n[a],s=c.length,f=o[a]=[],l=0;l<s;++l)(u=c[l])&&t.call(u,u.__data__,l,c)&&f.push(u);return new r.LN(o,this._parents)}},56874:(t,n,e)=>{"use strict";function r(){this.innerHTML=""}function i(t){return function(){this.innerHTML=t}}function o(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}function a(t){return arguments.length?this.each(null==t?r:("function"==typeof t?o:i)(t)):this.node().innerHTML}e.d(n,{A:()=>a})},11895:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>O,LN:()=>j,zr:()=>R});var r=e(17339),i=e(53876),o=e(7629),a=e(31720),u=e(32297),c=e(44939),s=e(55781),f=e(76115),l=e(84851),h=e(52279),d=e(7483),p=e(90055),g=e(78915),y=e(74802),v=e(22407),_=e(74174),m=e(73582),b=e(53094),A=e(7660),x=e(39274),w=e(45334),M=e(51142),T=e(15608),N=e(56874),S=e(40515),k=e(83082),E=e(82123),C=e(40538),D=e(48971),F=e(402),P=e(20948),z=e(98838),I=e(82841),U=e(8897),R=[null];function j(t,n){this._groups=t,this._parents=n}function L(){return new j([[document.documentElement]],R)}j.prototype=L.prototype={constructor:j,select:r.A,selectAll:i.A,selectChild:o.A,selectChildren:a.A,filter:u.A,data:c.A,enter:s.A,exit:f.A,join:l.A,merge:h.A,selection:function(){return this},order:d.A,sort:p.A,call:g.A,nodes:y.A,node:v.A,size:_.A,empty:m.A,each:b.A,attr:A.A,style:x.A,property:w.A,classed:M.A,text:T.A,html:N.A,raise:S.A,lower:k.A,append:E.A,insert:C.A,remove:D.A,clone:F.A,datum:P.A,on:z.A,dispatch:I.A,[Symbol.iterator]:U.A};const O=L},40538:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(8206),i=e(81137);function o(){return null}function a(t,n){var e="function"==typeof t?t:(0,r.A)(t),a=null==n?o:"function"==typeof n?n:(0,i.A)(n);return this.select((function(){return this.insertBefore(e.apply(this,arguments),a.apply(this,arguments)||null)}))}},8897:(t,n,e)=>{"use strict";function*r(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r,i=t[n],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}e.d(n,{A:()=>r})},84851:(t,n,e)=>{"use strict";function r(t,n,e){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=n&&(i=n(i))&&(i=i.selection()),null==e?o.remove():e(o),r&&i?r.merge(i).order():i}e.d(n,{A:()=>r})},83082:(t,n,e)=>{"use strict";function r(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function i(){return this.each(r)}e.d(n,{A:()=>i})},52279:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(11895);function i(t){for(var n=t.selection?t.selection():t,e=this._groups,i=n._groups,o=e.length,a=i.length,u=Math.min(o,a),c=new Array(o),s=0;s<u;++s)for(var f,l=e[s],h=i[s],d=l.length,p=c[s]=new Array(d),g=0;g<d;++g)(f=l[g]||h[g])&&(p[g]=f);for(;s<o;++s)c[s]=e[s];return new r.LN(c,this._parents)}},22407:(t,n,e)=>{"use strict";function r(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}e.d(n,{A:()=>r})},74802:(t,n,e)=>{"use strict";function r(){return Array.from(this)}e.d(n,{A:()=>r})},98838:(t,n,e)=>{"use strict";function r(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.options);++i?n.length=i:delete this.__on}}}function i(t,n,e){return function(){var r,i=this.__on,o=function(t){return function(n){t.call(this,n,this.__data__)}}(n);if(i)for(var a=0,u=i.length;a<u;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=e),void(r.value=n);this.addEventListener(t.type,o,e),r={type:t.type,name:t.name,value:n,listener:o,options:e},i?i.push(r):this.__on=[r]}}function o(t,n,e){var o,a,u=function(t){return t.trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}))}(t+""),c=u.length;if(!(arguments.length<2)){for(s=n?i:r,o=0;o<c;++o)this.each(s(u[o],n,e));return this}var s=this.node().__on;if(s)for(var f,l=0,h=s.length;l<h;++l)for(o=0,f=s[l];o<c;++o)if((a=u[o]).type===f.type&&a.name===f.name)return f.value}e.d(n,{A:()=>o})},7483:(t,n,e)=>{"use strict";function r(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this}e.d(n,{A:()=>r})},45334:(t,n,e)=>{"use strict";function r(t){return function(){delete this[t]}}function i(t,n){return function(){this[t]=n}}function o(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function a(t,n){return arguments.length>1?this.each((null==n?r:"function"==typeof n?o:i)(t,n)):this.node()[t]}e.d(n,{A:()=>a})},40515:(t,n,e)=>{"use strict";function r(){this.nextSibling&&this.parentNode.appendChild(this)}function i(){return this.each(r)}e.d(n,{A:()=>i})},48971:(t,n,e)=>{"use strict";function r(){var t=this.parentNode;t&&t.removeChild(this)}function i(){return this.each(r)}e.d(n,{A:()=>i})},17339:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(11895),i=e(81137);function o(t){"function"!=typeof t&&(t=(0,i.A)(t));for(var n=this._groups,e=n.length,o=new Array(e),a=0;a<e;++a)for(var u,c,s=n[a],f=s.length,l=o[a]=new Array(f),h=0;h<f;++h)(u=s[h])&&(c=t.call(u,u.__data__,h,s))&&("__data__"in u&&(c.__data__=u.__data__),l[h]=c);return new r.LN(o,this._parents)}},53876:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(11895),i=e(3491),o=e(98974);function a(t){t="function"==typeof t?function(t){return function(){return(0,i.A)(t.apply(this,arguments))}}(t):(0,o.A)(t);for(var n=this._groups,e=n.length,a=[],u=[],c=0;c<e;++c)for(var s,f=n[c],l=f.length,h=0;h<l;++h)(s=f[h])&&(a.push(t.call(s,s.__data__,h,f)),u.push(s));return new r.LN(a,u)}},7629:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(14644),i=Array.prototype.find;function o(){return this.firstElementChild}function a(t){return this.select(null==t?o:function(t){return function(){return i.call(this.children,t)}}("function"==typeof t?t:(0,r.j)(t)))}},31720:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(14644),i=Array.prototype.filter;function o(){return Array.from(this.children)}function a(t){return this.selectAll(null==t?o:function(t){return function(){return i.call(this.children,t)}}("function"==typeof t?t:(0,r.j)(t)))}},74174:(t,n,e)=>{"use strict";function r(){let t=0;for(const n of this)++t;return t}e.d(n,{A:()=>r})},90055:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(11895);function i(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=o);for(var e=this._groups,i=e.length,a=new Array(i),u=0;u<i;++u){for(var c,s=e[u],f=s.length,l=a[u]=new Array(f),h=0;h<f;++h)(c=s[h])&&(l[h]=c);l.sort(n)}return new r.LN(a,this._parents).order()}function o(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}},60707:(t,n,e)=>{"use strict";function r(t){return new Array(t.length)}e.d(n,{A:()=>r})},39274:(t,n,e)=>{"use strict";e.d(n,{A:()=>u,j:()=>c});var r=e(99980);function i(t){return function(){this.style.removeProperty(t)}}function o(t,n,e){return function(){this.style.setProperty(t,n,e)}}function a(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function u(t,n,e){return arguments.length>1?this.each((null==n?i:"function"==typeof n?a:o)(t,n,null==e?"":e)):c(this.node(),t)}function c(t,n){return t.style.getPropertyValue(n)||(0,r.A)(t).getComputedStyle(t,null).getPropertyValue(n)}},15608:(t,n,e)=>{"use strict";function r(){this.textContent=""}function i(t){return function(){this.textContent=t}}function o(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function a(t){return arguments.length?this.each(null==t?r:("function"==typeof t?o:i)(t)):this.node().textContent}e.d(n,{A:()=>a})},81137:(t,n,e)=>{"use strict";function r(){}function i(t){return null==t?r:function(){return this.querySelector(t)}}e.d(n,{A:()=>i})},98974:(t,n,e)=>{"use strict";function r(){return[]}function i(t){return null==t?r:function(){return this.querySelectorAll(t)}}e.d(n,{A:()=>i})},55777:(t,n,e)=>{"use strict";function r(t){let n;for(;n=t.sourceEvent;)t=n;return t}e.d(n,{A:()=>r})},99980:(t,n,e)=>{"use strict";function r(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}e.d(n,{A:()=>r})},67219:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(30577),i=e(56588),o=[null];function a(t,n){var e,a,u=t.__transition;if(u)for(a in n=null==n?null:n+"",u)if((e=u[a]).state>i.Oy&&e.name===n)return new r.eB([[t]],o,n,+a);return null}},13969:(t,n,e)=>{"use strict";e.d(n,{G:()=>o.A,kY:()=>r.Ay,vu:()=>i.A}),e(46956);var r=e(30577),i=e(67219),o=e(1558)},1558:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(56588);function i(t,n){var e,i,o,a=t.__transition,u=!0;if(a){for(o in n=null==n?null:n+"",a)(e=a[o]).name===n?(i=e.state>r.xo&&e.state<r.Op,e.state=r.hV,e.timer.stop(),e.on.call(i?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete a[o]):u=!1;u&&delete t.__transition}}},46956:(t,n,e)=>{"use strict";var r=e(11895),i=e(4651),o=e(58129);r.Ay.prototype.interrupt=i.A,r.Ay.prototype.transition=o.A},4651:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(1558);function i(t){return this.each((function(){(0,r.A)(this,t)}))}},58129:(t,n,e)=>{"use strict";e.d(n,{A:()=>s});var r=e(30577),i=e(56588),o=e(70194),a=e(76529),u={time:null,delay:0,duration:250,ease:o.wq};function c(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function s(t){var n,e;t instanceof r.eB?(n=t._id,t=t._name):(n=(0,r.Si)(),(e=u).time=(0,a.tB)(),t=null==t?null:t+"");for(var o=this._groups,s=o.length,f=0;f<s;++f)for(var l,h=o[f],d=h.length,p=0;p<d;++p)(l=h[p])&&(0,i.Ay)(l,t,n,p,h,e||c(l,n));return new r.eB(o,this._parents,t,n)}},43978:(t,n,e)=>{"use strict";e.d(n,{A:()=>d});var r=e(97936),i=e(62773),o=e(17134),a=e(26442);function u(t){return function(){this.removeAttribute(t)}}function c(t){return function(){this.removeAttributeNS(t.space,t.local)}}function s(t,n,e){var r,i,o=e+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=n(r=a,e)}}function f(t,n,e){var r,i,o=e+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=n(r=a,e)}}function l(t,n,e){var r,i,o;return function(){var a,u,c=e(this);if(null!=c)return(a=this.getAttribute(t))===(u=c+"")?null:a===r&&u===i?o:(i=u,o=n(r=a,c));this.removeAttribute(t)}}function h(t,n,e){var r,i,o;return function(){var a,u,c=e(this);if(null!=c)return(a=this.getAttributeNS(t.space,t.local))===(u=c+"")?null:a===r&&u===i?o:(i=u,o=n(r=a,c));this.removeAttributeNS(t.space,t.local)}}function d(t,n){var e=(0,i.A)(t),d="transform"===e?r.I:a.A;return this.attrTween(t,"function"==typeof n?(e.local?h:l)(e,d,(0,o.J)(this,"attr."+t,n)):null==n?(e.local?c:u)(e):(e.local?f:s)(e,d,n))}},91751:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(62773);function i(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&function(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}(t,i)),e}return i._value=n,i}function o(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&function(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}(t,i)),e}return i._value=n,i}function a(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var a=(0,r.A)(t);return this.tween(e,(a.local?i:o)(a,n))}},33942:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(56588);function i(t,n){return function(){(0,r.Ts)(this,t).delay=+n.apply(this,arguments)}}function o(t,n){return n=+n,function(){(0,r.Ts)(this,t).delay=n}}function a(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?i:o)(n,t)):(0,r.Jt)(this.node(),n).delay}},1025:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(56588);function i(t,n){return function(){(0,r.hZ)(this,t).duration=+n.apply(this,arguments)}}function o(t,n){return n=+n,function(){(0,r.hZ)(this,t).duration=n}}function a(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?i:o)(n,t)):(0,r.Jt)(this.node(),n).duration}},2743:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(56588);function i(t){var n=this._id;return arguments.length?this.each(function(t,n){if("function"!=typeof n)throw new Error;return function(){(0,r.hZ)(this,t).ease=n}}(n,t)):(0,r.Jt)(this.node(),n).ease}},8439:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(56588);function i(t){if("function"!=typeof t)throw new Error;return this.each(function(t,n){return function(){var e=n.apply(this,arguments);if("function"!=typeof e)throw new Error;(0,r.hZ)(this,t).ease=e}}(this._id,t))}},39836:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(56588);function i(){var t,n,e=this,i=e._id,o=e.size();return new Promise((function(a,u){var c={value:u},s={value:function(){0==--o&&a()}};e.each((function(){var e=(0,r.hZ)(this,i),o=e.on;o!==t&&((n=(t=o).copy())._.cancel.push(c),n._.interrupt.push(c),n._.end.push(s)),e.on=n})),0===o&&a()}))}},81875:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(14644),i=e(30577);function o(t){"function"!=typeof t&&(t=(0,r.A)(t));for(var n=this._groups,e=n.length,o=new Array(e),a=0;a<e;++a)for(var u,c=n[a],s=c.length,f=o[a]=[],l=0;l<s;++l)(u=c[l])&&t.call(u,u.__data__,l,c)&&f.push(u);return new i.eB(o,this._parents,this._name,this._id)}},30577:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>N,Si:()=>S,eB:()=>T});var r=e(11895),i=e(43978),o=e(91751),a=e(33942),u=e(1025),c=e(2743),s=e(8439),f=e(81875),l=e(98981),h=e(68544),d=e(50857),p=e(46237),g=e(46834),y=e(6467),v=e(44660),_=e(6485),m=e(1898),b=e(88487),A=e(90674),x=e(17134),w=e(39836),M=0;function T(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function N(t){return(0,r.Ay)().transition(t)}function S(){return++M}var k=r.Ay.prototype;T.prototype=N.prototype={constructor:T,select:p.A,selectAll:g.A,selectChild:k.selectChild,selectChildren:k.selectChildren,filter:f.A,merge:l.A,selection:y.A,transition:A.A,call:k.call,nodes:k.nodes,node:k.node,size:k.size,empty:k.empty,each:k.each,on:h.A,attr:i.A,attrTween:o.A,style:v.A,styleTween:_.A,text:m.A,textTween:b.A,remove:d.A,tween:x.A,delay:a.A,duration:u.A,ease:c.A,easeVarying:s.A,end:w.A,[Symbol.iterator]:k[Symbol.iterator]}},26442:(t,n,e)=>{"use strict";e.d(n,{A:()=>u});var r=e(13316),i=e(94830),o=e(88604),a=e(8678);function u(t,n){var e;return("number"==typeof n?i.A:n instanceof r.Ay?o.Ay:(e=(0,r.Ay)(n))?(n=e,o.Ay):a.A)(t,n)}},98981:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(30577);function i(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,i=n.length,o=e.length,a=Math.min(i,o),u=new Array(i),c=0;c<a;++c)for(var s,f=n[c],l=e[c],h=f.length,d=u[c]=new Array(h),p=0;p<h;++p)(s=f[p]||l[p])&&(d[p]=s);for(;c<i;++c)u[c]=n[c];return new r.eB(u,this._parents,this._name,this._id)}},68544:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(56588);function i(t,n){var e=this._id;return arguments.length<2?(0,r.Jt)(this.node(),e).on.on(t):this.each(function(t,n,e){var i,o,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t}))}(n)?r.Ts:r.hZ;return function(){var r=a(this,t),u=r.on;u!==i&&(o=(i=u).copy()).on(n,e),r.on=o}}(e,t,n))}},50857:(t,n,e)=>{"use strict";function r(){return this.on("end.remove",(t=this._id,function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}));var t}e.d(n,{A:()=>r})},56588:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>g,Jt:()=>_,Op:()=>d,Oy:()=>s,Ts:()=>y,hV:()=>p,hZ:()=>v,xo:()=>f});var r=e(80853),i=e(76529),o=e(41443),a=(0,r.A)("start","end","cancel","interrupt"),u=[],c=0,s=1,f=2,l=3,h=4,d=5,p=6;function g(t,n,e,r,g,y){var v=t.__transition;if(v){if(e in v)return}else t.__transition={};!function(t,n,e){var r,a=t.__transition;function u(i){var d,y,v,_;if(e.state!==s)return g();for(d in a)if((_=a[d]).name===e.name){if(_.state===l)return(0,o.A)(u);_.state===h?(_.state=p,_.timer.stop(),_.on.call("interrupt",t,t.__data__,_.index,_.group),delete a[d]):+d<n&&(_.state=p,_.timer.stop(),_.on.call("cancel",t,t.__data__,_.index,_.group),delete a[d])}if((0,o.A)((function(){e.state===l&&(e.state=h,e.timer.restart(c,e.delay,e.time),c(i))})),e.state=f,e.on.call("start",t,t.__data__,e.index,e.group),e.state===f){for(e.state=l,r=new Array(v=e.tween.length),d=0,y=-1;d<v;++d)(_=e.tween[d].value.call(t,t.__data__,e.index,e.group))&&(r[++y]=_);r.length=y+1}}function c(n){for(var i=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(g),e.state=d,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);e.state===d&&(e.on.call("end",t,t.__data__,e.index,e.group),g())}function g(){for(var r in e.state=p,e.timer.stop(),delete a[n],a)return;delete t.__transition}a[n]=e,e.timer=(0,i.O1)((function(t){e.state=s,e.timer.restart(u,e.delay,e.time),e.delay<=t&&u(t-e.delay)}),0,e.time)}(t,e,{name:n,index:r,group:g,on:a,tween:u,time:y.time,delay:y.delay,duration:y.duration,ease:y.ease,timer:null,state:c})}function y(t,n){var e=_(t,n);if(e.state>c)throw new Error("too late; already scheduled");return e}function v(t,n){var e=_(t,n);if(e.state>l)throw new Error("too late; already running");return e}function _(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}},46237:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(81137),i=e(30577),o=e(56588);function a(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=(0,r.A)(t));for(var a=this._groups,u=a.length,c=new Array(u),s=0;s<u;++s)for(var f,l,h=a[s],d=h.length,p=c[s]=new Array(d),g=0;g<d;++g)(f=h[g])&&(l=t.call(f,f.__data__,g,h))&&("__data__"in f&&(l.__data__=f.__data__),p[g]=l,(0,o.Ay)(p[g],n,e,g,p,(0,o.Jt)(f,e)));return new i.eB(c,this._parents,n,e)}},46834:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(98974),i=e(30577),o=e(56588);function a(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=(0,r.A)(t));for(var a=this._groups,u=a.length,c=[],s=[],f=0;f<u;++f)for(var l,h=a[f],d=h.length,p=0;p<d;++p)if(l=h[p]){for(var g,y=t.call(l,l.__data__,p,h),v=(0,o.Jt)(l,e),_=0,m=y.length;_<m;++_)(g=y[_])&&(0,o.Ay)(g,n,e,_,y,v);c.push(y),s.push(l)}return new i.eB(c,s,n,e)}},6467:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(11895).Ay.prototype.constructor;function i(){return new r(this._groups,this._parents)}},44660:(t,n,e)=>{"use strict";e.d(n,{A:()=>s});var r=e(97936),i=e(39274),o=e(56588),a=e(17134),u=e(26442);function c(t){return function(){this.style.removeProperty(t)}}function s(t,n,e){var s="transform"==(t+="")?r.T:u.A;return null==n?this.styleTween(t,function(t,n){var e,r,o;return function(){var a=(0,i.j)(this,t),u=(this.style.removeProperty(t),(0,i.j)(this,t));return a===u?null:a===e&&u===r?o:o=n(e=a,r=u)}}(t,s)).on("end.style."+t,c(t)):"function"==typeof n?this.styleTween(t,function(t,n,e){var r,o,a;return function(){var u=(0,i.j)(this,t),c=e(this),s=c+"";return null==c&&(this.style.removeProperty(t),s=c=(0,i.j)(this,t)),u===s?null:u===r&&s===o?a:(o=s,a=n(r=u,c))}}(t,s,(0,a.J)(this,"style."+t,n))).each(function(t,n){var e,r,i,a,u="style."+n,s="end."+u;return function(){var f=(0,o.hZ)(this,t),l=f.on,h=null==f.value[u]?a||(a=c(n)):void 0;l===e&&i===h||(r=(e=l).copy()).on(s,i=h),f.on=r}}(this._id,t)):this.styleTween(t,function(t,n,e){var r,o,a=e+"";return function(){var u=(0,i.j)(this,t);return u===a?null:u===r?o:o=n(r=u,e)}}(t,s,n),e).on("end.style."+t,null)}},6485:(t,n,e)=>{"use strict";function r(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,function(t,n,e){var r,i;function o(){var o=n.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}(t,o,e)),r}return o._value=n,o}(t,n,null==e?"":e))}e.d(n,{A:()=>r})},1898:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(17134);function i(t){return this.tween("text","function"==typeof t?function(t){return function(){var n=t(this);this.textContent=null==n?"":n}}((0,r.J)(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))}},88487:(t,n,e)=>{"use strict";function r(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;return this.tween(n,function(t){var n,e;function r(){var r=t.apply(this,arguments);return r!==e&&(n=(e=r)&&function(t){return function(n){this.textContent=t.call(this,n)}}(r)),n}return r._value=t,r}(t))}e.d(n,{A:()=>r})},90674:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(30577),i=e(56588);function o(){for(var t=this._name,n=this._id,e=(0,r.Si)(),o=this._groups,a=o.length,u=0;u<a;++u)for(var c,s=o[u],f=s.length,l=0;l<f;++l)if(c=s[l]){var h=(0,i.Jt)(c,n);(0,i.Ay)(c,t,e,l,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new r.eB(o,this._parents,t,e)}},17134:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,J:()=>u});var r=e(56588);function i(t,n){var e,i;return function(){var o=(0,r.hZ)(this,t),a=o.tween;if(a!==e)for(var u=0,c=(i=e=a).length;u<c;++u)if(i[u].name===n){(i=i.slice()).splice(u,1);break}o.tween=i}}function o(t,n,e){var i,o;if("function"!=typeof e)throw new Error;return function(){var a=(0,r.hZ)(this,t),u=a.tween;if(u!==i){o=(i=u).slice();for(var c={name:n,value:e},s=0,f=o.length;s<f;++s)if(o[s].name===n){o[s]=c;break}s===f&&o.push(c)}a.tween=o}}function a(t,n){var e=this._id;if(t+="",arguments.length<2){for(var a,u=(0,r.Jt)(this.node(),e).tween,c=0,s=u.length;c<s;++c)if((a=u[c]).name===t)return a.value;return null}return this.each((null==n?i:o)(e,t,n))}function u(t,n,e){var i=t._id;return t.each((function(){var t=(0,r.hZ)(this,i);(t.value||(t.value={}))[n]=e.apply(this,arguments)})),function(t){return(0,r.Jt)(t,i).value[n]}}},62973:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=t=>()=>t},61433:(t,n,e)=>{"use strict";function r(t,{sourceEvent:n,target:e,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}e.d(n,{A:()=>r})},51505:(t,n,e)=>{"use strict";e.d(n,{GS:()=>i.D_,_V:()=>i.Ay,s_:()=>r.A,uV:()=>i.dL});var r=e(55722),i=e(67949)},48:(t,n,e)=>{"use strict";function r(t){t.stopImmediatePropagation()}function i(t){t.preventDefault(),t.stopImmediatePropagation()}e.d(n,{A:()=>i,G:()=>r})},67949:(t,n,e)=>{"use strict";function r(t,n,e){this.k=t,this.x=n,this.y=e}e.d(n,{Ay:()=>o,D_:()=>i,dL:()=>r}),r.prototype={constructor:r,scale:function(t){return 1===t?this:new r(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new r(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var i=new r(1,0,0);function o(t){for(;!t.__zoom;)if(!(t=t.parentNode))return i;return t.__zoom}o.prototype=r.prototype},55722:(t,n,e)=>{"use strict";e.d(n,{A:()=>m});var r=e(80853),i=e(97655),o=e(51508),a=e(95556),u=e(62675),c=e(13969),s=e(62973),f=e(61433),l=e(67949),h=e(48);function d(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function p(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function g(){return this.__zoom||l.D_}function y(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function v(){return navigator.maxTouchPoints||"ontouchstart"in this}function _(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],a=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function m(){var t,n,e,m=d,b=p,A=_,x=y,w=v,M=[0,1/0],T=[[-1/0,-1/0],[1/0,1/0]],N=250,S=o.A,k=(0,r.A)("start","zoom","end"),E=500,C=150,D=0,F=10;function P(t){t.property("__zoom",g).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",Y).on("dblclick.zoom",q).filter(w).on("touchstart.zoom",B).on("touchmove.zoom",G).on("touchend.zoom touchcancel.zoom",H).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function z(t,n){return(n=Math.max(M[0],Math.min(M[1],n)))===t.k?t:new l.dL(n,t.x,t.y)}function I(t,n,e){var r=n[0]-e[0]*t.k,i=n[1]-e[1]*t.k;return r===t.x&&i===t.y?t:new l.dL(t.k,r,i)}function U(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function R(t,n,e,r){t.on("start.zoom",(function(){j(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){j(this,arguments).event(r).end()})).tween("zoom",(function(){var t=this,i=arguments,o=j(t,i).event(r),a=b.apply(t,i),u=null==e?U(a):"function"==typeof e?e.apply(t,i):e,c=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),s=t.__zoom,f="function"==typeof n?n.apply(t,i):n,h=S(s.invert(u).concat(c/s.k),f.invert(u).concat(c/f.k));return function(t){if(1===t)t=f;else{var n=h(t),e=c/n[2];t=new l.dL(e,u[0]-n[0]*e,u[1]-n[1]*e)}o.zoom(null,t)}}))}function j(t,n,e){return!e&&t.__zooming||new L(t,n)}function L(t,n){this.that=t,this.args=n,this.active=0,this.sourceEvent=null,this.extent=b.apply(t,n),this.taps=0}function O(t,...n){if(m.apply(this,arguments)){var e=j(this,n).event(t),r=this.__zoom,i=Math.max(M[0],Math.min(M[1],r.k*Math.pow(2,x.apply(this,arguments)))),o=(0,u.A)(t);if(e.wheel)e.mouse[0][0]===o[0]&&e.mouse[0][1]===o[1]||(e.mouse[1]=r.invert(e.mouse[0]=o)),clearTimeout(e.wheel);else{if(r.k===i)return;e.mouse=[o,r.invert(o)],(0,c.G)(this),e.start()}(0,h.A)(t),e.wheel=setTimeout((function(){e.wheel=null,e.end()}),C),e.zoom("mouse",A(I(z(r,i),e.mouse[0],e.mouse[1]),e.extent,T))}}function Y(t,...n){if(!e&&m.apply(this,arguments)){var r=t.currentTarget,o=j(this,n,!0).event(t),s=(0,a.A)(t.view).on("mousemove.zoom",(function(t){if((0,h.A)(t),!o.moved){var n=t.clientX-l,e=t.clientY-d;o.moved=n*n+e*e>D}o.event(t).zoom("mouse",A(I(o.that.__zoom,o.mouse[0]=(0,u.A)(t,r),o.mouse[1]),o.extent,T))}),!0).on("mouseup.zoom",(function(t){s.on("mousemove.zoom mouseup.zoom",null),(0,i.y)(t.view,o.moved),(0,h.A)(t),o.event(t).end()}),!0),f=(0,u.A)(t,r),l=t.clientX,d=t.clientY;(0,i.A)(t.view),(0,h.G)(t),o.mouse=[f,this.__zoom.invert(f)],(0,c.G)(this),o.start()}}function q(t,...n){if(m.apply(this,arguments)){var e=this.__zoom,r=(0,u.A)(t.changedTouches?t.changedTouches[0]:t,this),i=e.invert(r),o=e.k*(t.shiftKey?.5:2),c=A(I(z(e,o),r,i),b.apply(this,n),T);(0,h.A)(t),N>0?(0,a.A)(this).transition().duration(N).call(R,c,r,t):(0,a.A)(this).call(P.transform,c,r,t)}}function B(e,...r){if(m.apply(this,arguments)){var i,o,a,s,f=e.touches,l=f.length,d=j(this,r,e.changedTouches.length===l).event(e);for((0,h.G)(e),o=0;o<l;++o)a=f[o],s=[s=(0,u.A)(a,this),this.__zoom.invert(s),a.identifier],d.touch0?d.touch1||d.touch0[2]===s[2]||(d.touch1=s,d.taps=0):(d.touch0=s,i=!0,d.taps=1+!!t);t&&(t=clearTimeout(t)),i&&(d.taps<2&&(n=s[0],t=setTimeout((function(){t=null}),E)),(0,c.G)(this),d.start())}}function G(t,...n){if(this.__zooming){var e,r,i,o,a=j(this,n).event(t),c=t.changedTouches,s=c.length;for((0,h.A)(t),e=0;e<s;++e)r=c[e],i=(0,u.A)(r,this),a.touch0&&a.touch0[2]===r.identifier?a.touch0[0]=i:a.touch1&&a.touch1[2]===r.identifier&&(a.touch1[0]=i);if(r=a.that.__zoom,a.touch1){var f=a.touch0[0],l=a.touch0[1],d=a.touch1[0],p=a.touch1[1],g=(g=d[0]-f[0])*g+(g=d[1]-f[1])*g,y=(y=p[0]-l[0])*y+(y=p[1]-l[1])*y;r=z(r,Math.sqrt(g/y)),i=[(f[0]+d[0])/2,(f[1]+d[1])/2],o=[(l[0]+p[0])/2,(l[1]+p[1])/2]}else{if(!a.touch0)return;i=a.touch0[0],o=a.touch0[1]}a.zoom("touch",A(I(r,i,o),a.extent,T))}}function H(t,...r){if(this.__zooming){var i,o,c=j(this,r).event(t),s=t.changedTouches,f=s.length;for((0,h.G)(t),e&&clearTimeout(e),e=setTimeout((function(){e=null}),E),i=0;i<f;++i)o=s[i],c.touch0&&c.touch0[2]===o.identifier?delete c.touch0:c.touch1&&c.touch1[2]===o.identifier&&delete c.touch1;if(c.touch1&&!c.touch0&&(c.touch0=c.touch1,delete c.touch1),c.touch0)c.touch0[1]=this.__zoom.invert(c.touch0[0]);else if(c.end(),2===c.taps&&(o=(0,u.A)(o,this),Math.hypot(n[0]-o[0],n[1]-o[1])<F)){var l=(0,a.A)(this).on("dblclick.zoom");l&&l.apply(this,arguments)}}}return P.transform=function(t,n,e,r){var i=t.selection?t.selection():t;i.property("__zoom",g),t!==i?R(t,n,e,r):i.interrupt().each((function(){j(this,arguments).event(r).start().zoom(null,"function"==typeof n?n.apply(this,arguments):n).end()}))},P.scaleBy=function(t,n,e,r){P.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof n?n.apply(this,arguments):n)}),e,r)},P.scaleTo=function(t,n,e,r){P.transform(t,(function(){var t=b.apply(this,arguments),r=this.__zoom,i=null==e?U(t):"function"==typeof e?e.apply(this,arguments):e,o=r.invert(i),a="function"==typeof n?n.apply(this,arguments):n;return A(I(z(r,a),i,o),t,T)}),e,r)},P.translateBy=function(t,n,e,r){P.transform(t,(function(){return A(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof e?e.apply(this,arguments):e),b.apply(this,arguments),T)}),null,r)},P.translateTo=function(t,n,e,r,i){P.transform(t,(function(){var t=b.apply(this,arguments),i=this.__zoom,o=null==r?U(t):"function"==typeof r?r.apply(this,arguments):r;return A(l.D_.translate(o[0],o[1]).scale(i.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof e?-e.apply(this,arguments):-e),t,T)}),r,i)},L.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,n){return this.mouse&&"mouse"!==t&&(this.mouse[1]=n.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=n.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=n.invert(this.touch1[0])),this.that.__zoom=n,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var n=(0,a.A)(this.that).datum();k.call(t,this.that,new f.A(t,{sourceEvent:this.sourceEvent,target:P,type:t,transform:this.that.__zoom,dispatch:k}),n)}},P.wheelDelta=function(t){return arguments.length?(x="function"==typeof t?t:(0,s.A)(+t),P):x},P.filter=function(t){return arguments.length?(m="function"==typeof t?t:(0,s.A)(!!t),P):m},P.touchable=function(t){return arguments.length?(w="function"==typeof t?t:(0,s.A)(!!t),P):w},P.extent=function(t){return arguments.length?(b="function"==typeof t?t:(0,s.A)([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),P):b},P.scaleExtent=function(t){return arguments.length?(M[0]=+t[0],M[1]=+t[1],P):[M[0],M[1]]},P.translateExtent=function(t){return arguments.length?(T[0][0]=+t[0][0],T[1][0]=+t[1][0],T[0][1]=+t[0][1],T[1][1]=+t[1][1],P):[[T[0][0],T[0][1]],[T[1][0],T[1][1]]]},P.constrain=function(t){return arguments.length?(A=t,P):A},P.duration=function(t){return arguments.length?(N=+t,P):N},P.interpolate=function(t){return arguments.length?(S=t,P):S},P.on=function(){var t=k.on.apply(k,arguments);return t===k?P:t},P.clickDistance=function(t){return arguments.length?(D=(t=+t)*t,P):Math.sqrt(D)},P.tapDistance=function(t){return arguments.length?(F=+t,P):F},P}},97329:(t,n,e)=>{"use strict";e.d(n,{d:()=>i});var r=Array.prototype,i=r.slice;r.map},34274:(t,n,e)=>{"use strict";function r(t,n){return null==t||null==n?NaN:t<n?-1:t>n?1:t>=n?0:NaN}e.d(n,{A:()=>r})},36113:(t,n,e)=>{"use strict";e.d(n,{A:()=>l});var r=e(97329),i=e(49596),o=e(79014),a=e(81330),u=e(56944),c=e(26155),s=e(81342),f=e(7833);function l(){var t=u.A,n=a.A,e=f.A;function l(r){Array.isArray(r)||(r=Array.from(r));var o,u,f,l=r.length,h=new Array(l);for(o=0;o<l;++o)h[o]=t(r[o],o,r);var d=n(h),p=d[0],g=d[1],y=e(h,p,g);if(!Array.isArray(y)){const t=g,e=+y;if(n===a.A&&([p,g]=(0,c.A)(p,g,e)),(y=(0,s.Ay)(p,g,e))[0]<=p&&(f=(0,s.lq)(p,g,e)),y[y.length-1]>=g)if(t>=g&&n===a.A){const t=(0,s.lq)(p,g,e);isFinite(t)&&(t>0?g=(Math.floor(g/t)+1)*t:t<0&&(g=(Math.ceil(g*-t)+1)/-t))}else y.pop()}for(var v=y.length;y[0]<=p;)y.shift(),--v;for(;y[v-1]>g;)y.pop(),--v;var _,m=new Array(v+1);for(o=0;o<=v;++o)(_=m[o]=[]).x0=o>0?y[o-1]:p,_.x1=o<v?y[o]:g;if(isFinite(f)){if(f>0)for(o=0;o<l;++o)null!=(u=h[o])&&p<=u&&u<=g&&m[Math.floor((u-p)/f)].push(r[o]);else if(f<0)for(o=0;o<l;++o)if(null!=(u=h[o])&&p<=u&&u<=g){const t=Math.floor((p-u)*f);m[t+(y[t]<=u)].push(r[o])}}else for(o=0;o<l;++o)null!=(u=h[o])&&p<=u&&u<=g&&m[(0,i.Ay)(y,u,0,v)].push(r[o]);return m}return l.value=function(n){return arguments.length?(t="function"==typeof n?n:(0,o.A)(n),l):t},l.domain=function(t){return arguments.length?(n="function"==typeof t?t:(0,o.A)([t[0],t[1]]),l):n},l.thresholds=function(t){return arguments.length?(e="function"==typeof t?t:Array.isArray(t)?(0,o.A)(r.d.call(t)):(0,o.A)(t),l):e},l}},49596:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>f,Jj:()=>u,WD:()=>s,ah:()=>c});var r=e(34274),i=e(46937),o=e(22647);const a=(0,i.A)(r.A),u=a.right,c=a.left,s=(0,i.A)(o.A).center,f=u},46937:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(34274);function i(t){let n=t,e=t,i=t;function o(t,n,r=0,o=t.length){if(r<o){if(0!==e(n,n))return o;do{const e=r+o>>>1;i(t[e],n)<0?r=e+1:o=e}while(r<o)}return r}return 2!==t.length&&(n=(n,e)=>t(n)-e,e=r.A,i=(n,e)=>(0,r.A)(t(n),e)),{left:o,center:function(t,e,r=0,i=t.length){const a=o(t,e,r,i-1);return a>r&&n(t[a-1],e)>-n(t[a],e)?a-1:a},right:function(t,n,r=0,o=t.length){if(r<o){if(0!==e(n,n))return o;do{const e=r+o>>>1;i(t[e],n)<=0?r=e+1:o=e}while(r<o)}return r}}}},79014:(t,n,e)=>{"use strict";function r(t){return()=>t}e.d(n,{A:()=>r})},62555:(t,n,e)=>{"use strict";function r(t,n){let e=0;if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&++e;else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(i=+i)>=i&&++e}return e}e.d(n,{A:()=>r})},97800:(t,n,e)=>{"use strict";function r(t){return 0|t.length}function i(t){return!(t>0)}function o(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function a(...t){const n="function"==typeof t[t.length-1]&&function(t){return n=>t(...n)}(t.pop()),e=(t=t.map(o)).map(r),a=t.length-1,u=new Array(a+1).fill(0),c=[];if(a<0||e.some(i))return c;for(;;){c.push(u.map(((n,e)=>t[e][n])));let r=a;for(;++u[r]===e[r];){if(0===r)return n?c.map(n):c;u[r--]=0}}}e.d(n,{A:()=>a})},1152:(t,n,e)=>{"use strict";function r(t,n){var e=0,r=0;return Float64Array.from(t,void 0===n?t=>e+=+t||0:i=>e+=+n(i,r++,t)||0)}e.d(n,{A:()=>r})},41744:(t,n,e)=>{"use strict";function r(t,n){return null==t||null==n?NaN:n<t?-1:n>t?1:n>=t?0:NaN}e.d(n,{A:()=>r})},34059:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(67385);function i(t,n){const e=(0,r.A)(t,n);return e?Math.sqrt(e):e}},90133:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(34080);function i(t,...n){t=new r.v(t);for(const e of n)for(const n of e)t.delete(n);return t}},49066:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(34080);function i(t,n){const e=n[Symbol.iterator](),i=new r.v;for(const n of t){if(i.has(n))return!1;let t,r;for(;({value:t,done:r}=e.next())&&!r;){if(Object.is(n,t))return!1;i.add(t)}}return!0}},98675:(t,n,e)=>{"use strict";function r(t,n){if("function"!=typeof n)throw new TypeError("test is not a function");let e=-1;for(const r of t)if(!n(r,++e,t))return!1;return!0}e.d(n,{A:()=>r})},81330:(t,n,e)=>{"use strict";function r(t,n){let e,r;if(void 0===n)for(const n of t)null!=n&&(void 0===e?n>=n&&(e=r=n):(e>n&&(e=n),r<n&&(r=n)));else{let i=-1;for(let o of t)null!=(o=n(o,++i,t))&&(void 0===e?o>=o&&(e=r=o):(e>o&&(e=o),r<o&&(r=o)))}return[e,r]}e.d(n,{A:()=>r})},68556:(t,n,e)=>{"use strict";function r(t,n){if("function"!=typeof n)throw new TypeError("test is not a function");const e=[];let r=-1;for(const i of t)n(i,++r,t)&&e.push(i);return e}e.d(n,{A:()=>r})},5579:(t,n,e)=>{"use strict";e.d(n,{KS:()=>i,Nn:()=>o,ph:()=>r});class r{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const i=n[r],o=t+i,a=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);a&&(n[e++]=a),t=o}return n[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let n,e,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(n=o,e=t[--i],o=n+e,r=e-(o-n),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(e=2*r,n=o+e,e==n-o&&(o=n))}return o}}function i(t,n){const e=new r;if(void 0===n)for(let n of t)(n=+n)&&e.add(n);else{let r=-1;for(let i of t)(i=+n(i,++r,t))&&e.add(i)}return+e}function o(t,n){const e=new r;let i=-1;return Float64Array.from(t,void 0===n?t=>e.add(+t||0):r=>e.add(+n(r,++i,t)||0))}},96513:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(34274);function i(t,n=r.A){let e,i=!1;if(1===n.length){let o;for(const a of t){const t=n(a);(i?(0,r.A)(t,o)>0:0===(0,r.A)(t,t))&&(e=a,o=t,i=!0)}}else for(const r of t)(i?n(r,e)>0:0===n(r,r))&&(e=r,i=!0);return e}},54621:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(34274),i=e(16276);function o(t,n=r.A){if(1===n.length)return(0,i.A)(t,n);let e,o=-1,a=-1;for(const r of t)++a,(o<0?0===n(r,r):n(r,e)>0)&&(e=r,o=a);return o}},31147:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>o,DU:()=>d,GG:()=>s,Pe:()=>h,TN:()=>a,i8:()=>l,n3:()=>c,z:()=>f});var r=e(34080),i=e(56944);function o(t,...n){return g(t,i.A,i.A,n)}function a(t,...n){return g(t,Array.from,i.A,n)}function u(t,n){for(let e=1,r=n.length;e<r;++e)t=t.flatMap((t=>t.pop().map((([n,e])=>[...t,n,e]))));return t}function c(t,...n){return u(a(t,...n),n)}function s(t,n,...e){return u(l(t,n,...e),e)}function f(t,n,...e){return g(t,i.A,n,e)}function l(t,n,...e){return g(t,Array.from,n,e)}function h(t,...n){return g(t,i.A,p,n)}function d(t,...n){return g(t,Array.from,p,n)}function p(t){if(1!==t.length)throw new Error("duplicate key");return t[0]}function g(t,n,e,i){return function t(o,a){if(a>=i.length)return e(o);const u=new r.B,c=i[a++];let s=-1;for(const t of o){const n=c(t,++s,o),e=u.get(n);e?e.push(t):u.set(n,[t])}for(const[n,e]of u)u.set(n,t(e,a));return n(u)}(t,0)}},71999:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(34274),i=e(31147),o=e(62370);function a(t,n,e){return(2!==n.length?(0,o.Ay)((0,i.z)(t,n,e),(([t,n],[e,i])=>(0,r.A)(n,i)||(0,r.A)(t,e))):(0,o.Ay)((0,i.Ay)(t,e),(([t,e],[i,o])=>n(e,o)||(0,r.A)(t,i)))).map((([t])=>t))}},56944:(t,n,e)=>{"use strict";function r(t){return t}e.d(n,{A:()=>r})},19864:(t,n,e)=>{"use strict";e.d(n,{$A:()=>u.A,AS:()=>k.A,Am:()=>w.A,BE:()=>K.A,Bu:()=>it.B,Cm:()=>S.A,DU:()=>d.DU,E$:()=>tt.A,Ft:()=>v.A,GD:()=>R.A,GG:()=>d.GG,GV:()=>B.A,JW:()=>g.A,JZ:()=>x.A,Jj:()=>r.Jj,KC:()=>rt.A,KS:()=>f.A,Kf:()=>U.A,LE:()=>nt.A,Mq:()=>N.A,Nn:()=>h.Nn,Ny:()=>E.A,Os:()=>d.Ay,P2:()=>b.A,Pe:()=>d.Pe,SQ:()=>j.A,Si:()=>H.A,T9:()=>m.A,TN:()=>d.TN,TS:()=>$.A,Tj:()=>V.A,Tm:()=>P.A,U9:()=>a.A,V_:()=>i.A,WD:()=>r.WD,W_:()=>et.A,Xx:()=>l.A,YG:()=>z.A,YV:()=>C.A,Z4:()=>C.Z,Zc:()=>Y.Ay,_w:()=>p.A,ah:()=>r.ah,c3:()=>y.A,cz:()=>O.A,di:()=>Q.Ay,e5:()=>g.A,eu:()=>D.A,h1:()=>r.Ay,i2:()=>A.A,i8:()=>d.i8,iv:()=>X.A,jk:()=>M.A,k4:()=>L.A,ko:()=>I.A,kt:()=>L.k,lq:()=>Y.lq,mg:()=>q.A,n3:()=>d.n3,nf:()=>J.A,pb:()=>W.A,ph:()=>h.ph,rC:()=>c.A,rG:()=>s.A,rv:()=>h.KS,sG:()=>Y.sG,vo:()=>it.v,y1:()=>F.A,yU:()=>G.A,yl:()=>o.A,z:()=>d.z,z9:()=>T.A,zN:()=>Z.A,zr:()=>_.A});var r=e(49596),i=e(34274),o=e(46937),a=e(62555),u=e(97800),c=e(1152),s=e(41744),f=e(34059),l=e(81330),h=e(5579),d=e(31147),p=e(71999),g=e(36113),y=e(40674),v=e(37467),_=e(7833),m=e(11802),b=e(16276),A=e(4379),x=e(28124),w=e(93556),M=e(44884),T=e(93646),N=e(9805),S=e(26155),k=e(57425),E=e(90182),C=e(4139),D=e(75347),F=e(54749),P=e(55812),z=e(40889),I=e(11925),U=e(96513),R=e(54621),j=e(44999),L=e(51105),O=e(60807),Y=e(81342),q=e(80095),B=e(67385),G=e(82363),H=e(98675),Z=e(97130),W=e(68556),V=e(99138),$=e(94892),K=e(84054),Q=e(62370),X=e(90133),J=e(49066),tt=e(17175),nt=e(63464),et=e(57499),rt=e(12187),it=e(34080)},17175:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(34080);function i(t,...n){t=new r.v(t),n=n.map(o);t:for(const e of t)for(const r of n)if(!r.has(e)){t.delete(e);continue t}return t}function o(t){return t instanceof r.v?t:new r.v(t)}},40889:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(34274);function i(t,n=r.A){let e,i=!1;if(1===n.length){let o;for(const a of t){const t=n(a);(i?(0,r.A)(t,o)<0:0===(0,r.A)(t,t))&&(e=a,o=t,i=!0)}}else for(const r of t)(i?n(r,e)<0:0===n(r,r))&&(e=r,i=!0);return e}},11925:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(34274),i=e(93646);function o(t,n=r.A){if(1===n.length)return(0,i.A)(t,n);let e,o=-1,a=-1;for(const r of t)++a,(o<0?0===n(r,r):n(r,e)<0)&&(e=r,o=a);return o}},99138:(t,n,e)=>{"use strict";function r(t,n){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof n)throw new TypeError("mapper is not a function");return Array.from(t,((e,r)=>n(e,r,t)))}e.d(n,{A:()=>r})},11802:(t,n,e)=>{"use strict";function r(t,n){let e;if(void 0===n)for(const n of t)null!=n&&(e<n||void 0===e&&n>=n)&&(e=n);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(e<i||void 0===e&&i>=i)&&(e=i)}return e}e.d(n,{A:()=>r})},16276:(t,n,e)=>{"use strict";function r(t,n){let e,r=-1,i=-1;if(void 0===n)for(const n of t)++i,null!=n&&(e<n||void 0===e&&n>=n)&&(e=n,r=i);else for(let o of t)null!=(o=n(o,++i,t))&&(e<o||void 0===e&&o>=o)&&(e=o,r=i);return r}e.d(n,{A:()=>r})},4379:(t,n,e)=>{"use strict";function r(t,n){let e=0,r=0;if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&(++e,r+=n);else{let i=-1;for(let o of t)null!=(o=n(o,++i,t))&&(o=+o)>=o&&(++e,r+=o)}if(e)return r/e}e.d(n,{A:()=>r})},28124:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(4139);function i(t,n){return(0,r.A)(t,.5,n)}},93556:(t,n,e)=>{"use strict";function r(t){return Array.from(function*(t){for(const n of t)yield*n}(t))}e.d(n,{A:()=>r})},44884:(t,n,e)=>{"use strict";function r(t,n){let e;if(void 0===n)for(const n of t)null!=n&&(e>n||void 0===e&&n>=n)&&(e=n);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(e>i||void 0===e&&i>=i)&&(e=i)}return e}e.d(n,{A:()=>r})},93646:(t,n,e)=>{"use strict";function r(t,n){let e,r=-1,i=-1;if(void 0===n)for(const n of t)++i,null!=n&&(e>n||void 0===e&&n>=n)&&(e=n,r=i);else for(let o of t)null!=(o=n(o,++i,t))&&(e>o||void 0===e&&o>=o)&&(e=o,r=i);return r}e.d(n,{A:()=>r})},9805:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(34080);function i(t,n){const e=new r.B;if(void 0===n)for(let n of t)null!=n&&n>=n&&e.set(n,(e.get(n)||0)+1);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&i>=i&&e.set(i,(e.get(i)||0)+1)}let i,o=0;for(const[t,n]of e)n>o&&(o=n,i=t);return i}},26155:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(81342);function i(t,n,e){let i;for(;;){const o=(0,r.lq)(t,n,e);if(o===i||0===o||!isFinite(o))return[t,n];o>0?(t=Math.floor(t/o)*o,n=Math.ceil(n/o)*o):o<0&&(t=Math.ceil(t*o)/o,n=Math.floor(n*o)/o),i=o}}},22647:(t,n,e)=>{"use strict";function r(t){return null===t?NaN:+t}function*i(t,n){if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&(yield n);else{let e=-1;for(let r of t)null!=(r=n(r,++e,t))&&(r=+r)>=r&&(yield r)}}e.d(n,{A:()=>r,n:()=>i})},57425:(t,n,e)=>{"use strict";function r(t,n=i){const e=[];let r,o=!1;for(const i of t)o&&e.push(n(r,i)),r=i,o=!0;return e}function i(t,n){return[t,n]}e.d(n,{A:()=>r})},90182:(t,n,e)=>{"use strict";function r(t,n){return Array.from(n,(n=>t[n]))}e.d(n,{A:()=>r})},4139:(t,n,e)=>{"use strict";e.d(n,{A:()=>u,Z:()=>c});var r=e(11802),i=e(44884),o=e(75347),a=e(22647);function u(t,n,e){if(u=(t=Float64Array.from((0,a.n)(t,e))).length){if((n=+n)<=0||u<2)return(0,i.A)(t);if(n>=1)return(0,r.A)(t);var u,c=(u-1)*n,s=Math.floor(c),f=(0,r.A)((0,o.A)(t,s).subarray(0,s+1));return f+((0,i.A)(t.subarray(s+1))-f)*(c-s)}}function c(t,n,e=a.A){if(r=t.length){if((n=+n)<=0||r<2)return+e(t[0],0,t);if(n>=1)return+e(t[r-1],r-1,t);var r,i=(r-1)*n,o=Math.floor(i),u=+e(t[o],o,t);return u+(+e(t[o+1],o+1,t)-u)*(i-o)}}},75347:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(62370);function i(t,n,e=0,a=t.length-1,u){for(u=void 0===u?r.o2:(0,r.JC)(u);a>e;){if(a-e>600){const r=a-e+1,o=n-e+1,c=Math.log(r),s=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*s*(r-s)/r)*(o-r/2<0?-1:1);i(t,n,Math.max(e,Math.floor(n-o*s/r+f)),Math.min(a,Math.floor(n+(r-o)*s/r+f)),u)}const r=t[n];let c=e,s=a;for(o(t,e,n),u(t[a],r)>0&&o(t,e,a);c<s;){for(o(t,c,s),++c,--s;u(t[c],r)<0;)++c;for(;u(t[s],r)>0;)--s}0===u(t[e],r)?o(t,e,s):(++s,o(t,s,a)),s<=n&&(e=s+1),n<=s&&(a=s-1)}return t}function o(t,n,e){const r=t[n];t[n]=t[e],t[e]=r}},54749:(t,n,e)=>{"use strict";function r(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o}e.d(n,{A:()=>r})},55812:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(34274),i=e(62370);function o(t,n=r.A){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");let e=Array.from(t);const o=new Float64Array(e.length);2!==n.length&&(e=e.map(n),n=r.A);const a=(t,r)=>n(e[t],e[r]);let u,c;return Uint32Array.from(e,((t,n)=>n)).sort(n===r.A?(t,n)=>(0,i.o2)(e[t],e[n]):(0,i.JC)(a)).forEach(((t,n)=>{const e=a(t,void 0===u?t:u);e>=0?((void 0===u||e>0)&&(u=t,c=n),o[t]=c):o[t]=NaN})),o}},94892:(t,n,e)=>{"use strict";function r(t,n,e){if("function"!=typeof n)throw new TypeError("reducer is not a function");const r=t[Symbol.iterator]();let i,o,a=-1;if(arguments.length<3){if(({done:i,value:e}=r.next()),i)return;++a}for(;({done:i,value:o}=r.next()),!i;)e=n(e,o,++a,t);return e}e.d(n,{A:()=>r})},84054:(t,n,e)=>{"use strict";function r(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()}e.d(n,{A:()=>r})},44999:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(11925);function i(t,n){const e=(0,r.A)(t,n);return e<0?void 0:e}},51105:(t,n,e)=>{"use strict";e.d(n,{A:()=>r,k:()=>i});const r=i(Math.random);function i(t){return function(n,e=0,r=n.length){let i=r-(e=+e);for(;i;){const r=t()*i--|0,o=n[i+e];n[i+e]=n[r+e],n[r+e]=o}return n}}},97130:(t,n,e)=>{"use strict";function r(t,n){if("function"!=typeof n)throw new TypeError("test is not a function");let e=-1;for(const r of t)if(n(r,++e,t))return!0;return!1}e.d(n,{A:()=>r})},62370:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>o,JC:()=>a,o2:()=>u});var r=e(34274),i=e(90182);function o(t,...n){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);let[e]=n;if(e&&2!==e.length||n.length>1){const r=Uint32Array.from(t,((t,n)=>n));return n.length>1?(n=n.map((n=>t.map(n))),r.sort(((t,e)=>{for(const r of n){const n=u(r[t],r[e]);if(n)return n}}))):(e=t.map(e),r.sort(((t,n)=>u(e[t],e[n])))),(0,i.A)(t,r)}return t.sort(a(e))}function a(t=r.A){if(t===r.A)return u;if("function"!=typeof t)throw new TypeError("compare is not a function");return(n,e)=>{const r=t(n,e);return r||0===r?r:(0===t(e,e))-(0===t(n,n))}}function u(t,n){return(null==t||!(t>=t))-(null==n||!(n>=n))||(t<n?-1:t>n?1:0)}},63464:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(57499);function i(t,n){return(0,r.A)(n,t)}},60807:(t,n,e)=>{"use strict";function r(t,n){let e=0;if(void 0===n)for(let n of t)(n=+n)&&(e+=n);else{let r=-1;for(let i of t)(i=+n(i,++r,t))&&(e+=i)}return e}e.d(n,{A:()=>r})},57499:(t,n,e)=>{"use strict";function r(t,n){const e=t[Symbol.iterator](),r=new Set;for(const t of n){const n=i(t);if(r.has(n))continue;let o,a;for(;({value:o,done:a}=e.next());){if(a)return!1;const t=i(o);if(r.add(t),Object.is(n,t))break}}return!0}function i(t){return null!==t&&"object"==typeof t?t.valueOf():t}e.d(n,{A:()=>r})},40674:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(62555),i=e(4139);function o(t,n,e){return Math.ceil((e-n)/(2*((0,i.A)(t,.75)-(0,i.A)(t,.25))*Math.pow((0,r.A)(t),-1/3)))}},37467:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(62555),i=e(34059);function o(t,n,e){return Math.ceil((e-n)*Math.cbrt((0,r.A)(t))/(3.49*(0,i.A)(t)))}},7833:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(62555);function i(t){return Math.ceil(Math.log((0,r.A)(t))/Math.LN2)+1}},81342:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>a,lq:()=>u,sG:()=>c});var r=Math.sqrt(50),i=Math.sqrt(10),o=Math.sqrt(2);function a(t,n,e){var r,i,o,a,c=-1;if(e=+e,(t=+t)==(n=+n)&&e>0)return[t];if((r=n<t)&&(i=t,t=n,n=i),0===(a=u(t,n,e))||!isFinite(a))return[];if(a>0){let e=Math.round(t/a),r=Math.round(n/a);for(e*a<t&&++e,r*a>n&&--r,o=new Array(i=r-e+1);++c<i;)o[c]=(e+c)*a}else{a=-a;let e=Math.round(t*a),r=Math.round(n*a);for(e/a<t&&++e,r/a>n&&--r,o=new Array(i=r-e+1);++c<i;)o[c]=(e+c)/a}return r&&o.reverse(),o}function u(t,n,e){var a=(n-t)/Math.max(0,e),u=Math.floor(Math.log(a)/Math.LN10),c=a/Math.pow(10,u);return u>=0?(c>=r?10:c>=i?5:c>=o?2:1)*Math.pow(10,u):-Math.pow(10,-u)/(c>=r?10:c>=i?5:c>=o?2:1)}function c(t,n,e){var a=Math.abs(n-t)/Math.max(0,e),u=Math.pow(10,Math.floor(Math.log(a)/Math.LN10)),c=a/u;return c>=r?u*=10:c>=i?u*=5:c>=o&&(u*=2),n<t?-u:u}},80095:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(44884);function i(t){if(!(a=t.length))return[];for(var n=-1,e=(0,r.A)(t,o),i=new Array(e);++n<e;)for(var a,u=-1,c=i[n]=new Array(a);++u<a;)c[u]=t[u][n];return i}function o(t){return t.length}},12187:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(34080);function i(...t){const n=new r.v;for(const e of t)for(const t of e)n.add(t);return n}},67385:(t,n,e)=>{"use strict";function r(t,n){let e,r=0,i=0,o=0;if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&(e=n-i,i+=e/++r,o+=e*(n-i));else{let a=-1;for(let u of t)null!=(u=n(u,++a,t))&&(u=+u)>=u&&(e=u-i,i+=e/++r,o+=e*(u-i))}if(r>1)return o/(r-1)}e.d(n,{A:()=>r})},82363:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(80095);function i(){return(0,r.A)(arguments)}},35169:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>b,Gw:()=>T,KI:()=>P,Q1:()=>i,Qh:()=>M,Uw:()=>a,b:()=>w,ef:()=>o});var r=e(1555);function i(){}var o=.7,a=1/o,u="\\s*([+-]?\\d+)\\s*",c="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",f=/^#([0-9a-f]{3,8})$/,l=new RegExp(`^rgb\\(${u},${u},${u}\\)$`),h=new RegExp(`^rgb\\(${s},${s},${s}\\)$`),d=new RegExp(`^rgba\\(${u},${u},${u},${c}\\)$`),p=new RegExp(`^rgba\\(${s},${s},${s},${c}\\)$`),g=new RegExp(`^hsl\\(${c},${s},${s}\\)$`),y=new RegExp(`^hsla\\(${c},${s},${s},${c}\\)$`),v={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function _(){return this.rgb().formatHex()}function m(){return this.rgb().formatRgb()}function b(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=f.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?A(n):3===e?new T(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?x(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?x(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=l.exec(t))?new T(n[1],n[2],n[3],1):(n=h.exec(t))?new T(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=d.exec(t))?x(n[1],n[2],n[3],n[4]):(n=p.exec(t))?x(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=g.exec(t))?D(n[1],n[2]/100,n[3]/100,1):(n=y.exec(t))?D(n[1],n[2]/100,n[3]/100,n[4]):v.hasOwnProperty(t)?A(v[t]):"transparent"===t?new T(NaN,NaN,NaN,0):null}function A(t){return new T(t>>16&255,t>>8&255,255&t,1)}function x(t,n,e,r){return r<=0&&(t=n=e=NaN),new T(t,n,e,r)}function w(t){return t instanceof i||(t=b(t)),t?new T((t=t.rgb()).r,t.g,t.b,t.opacity):new T}function M(t,n,e,r){return 1===arguments.length?w(t):new T(t,n,e,null==r?1:r)}function T(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function N(){return`#${C(this.r)}${C(this.g)}${C(this.b)}`}function S(){const t=k(this.opacity);return`${1===t?"rgb(":"rgba("}${E(this.r)}, ${E(this.g)}, ${E(this.b)}${1===t?")":`, ${t})`}`}function k(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function E(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function C(t){return((t=E(t))<16?"0":"")+t.toString(16)}function D(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new z(t,n,e,r)}function F(t){if(t instanceof z)return new z(t.h,t.s,t.l,t.opacity);if(t instanceof i||(t=b(t)),!t)return new z;if(t instanceof z)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,o=Math.min(n,e,r),a=Math.max(n,e,r),u=NaN,c=a-o,s=(a+o)/2;return c?(u=n===a?(e-r)/c+6*(e<r):e===a?(r-n)/c+2:(n-e)/c+4,c/=s<.5?a+o:2-a-o,u*=60):c=s>0&&s<1?0:u,new z(u,c,s,t.opacity)}function P(t,n,e,r){return 1===arguments.length?F(t):new z(t,n,e,null==r?1:r)}function z(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function I(t){return(t=(t||0)%360)<0?t+360:t}function U(t){return Math.max(0,Math.min(1,t||0))}function R(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}(0,r.A)(i,b,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:_,formatHex:_,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return F(this).formatHsl()},formatRgb:m,toString:m}),(0,r.A)(T,M,(0,r.X)(i,{brighter(t){return t=null==t?a:Math.pow(a,t),new T(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?o:Math.pow(o,t),new T(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new T(E(this.r),E(this.g),E(this.b),k(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:N,formatHex:N,formatHex8:function(){return`#${C(this.r)}${C(this.g)}${C(this.b)}${C(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:S,toString:S})),(0,r.A)(z,P,(0,r.X)(i,{brighter(t){return t=null==t?a:Math.pow(a,t),new z(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?o:Math.pow(o,t),new z(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new T(R(t>=240?t-240:t+120,i,r),R(t,i,r),R(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new z(I(this.h),U(this.s),U(this.l),k(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=k(this.opacity);return`${1===t?"hsl(":"hsla("}${I(this.h)}, ${100*U(this.s)}%, ${100*U(this.l)}%${1===t?")":`, ${t})`}`}}))},65409:(t,n,e)=>{"use strict";e.d(n,{A:()=>p});var r=e(1555),i=e(35169),o=e(8242),a=-.14861,u=1.78277,c=-.29227,s=-.90649,f=1.97294,l=f*s,h=f*u,d=u*c-s*a;function p(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof g)return new g(t.h,t.s,t.l,t.opacity);t instanceof i.Gw||(t=(0,i.b)(t));var n=t.r/255,e=t.g/255,r=t.b/255,a=(d*r+l*n-h*e)/(d+l-h),u=r-a,p=(f*(e-a)-c*u)/s,y=Math.sqrt(p*p+u*u)/(f*a*(1-a)),v=y?Math.atan2(p,u)*o.u-120:NaN;return new g(v<0?v+360:v,y,a,t.opacity)}(t):new g(t,n,e,null==r?1:r)}function g(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}(0,r.A)(g,p,(0,r.X)(i.Q1,{brighter(t){return t=null==t?i.Uw:Math.pow(i.Uw,t),new g(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?i.ef:Math.pow(i.ef,t),new g(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*o.F,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),l=Math.sin(t);return new i.Gw(255*(n+e*(a*r+u*l)),255*(n+e*(c*r+s*l)),255*(n+e*(f*r)),this.opacity)}}))},1555:(t,n,e)=>{"use strict";function r(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function i(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}e.d(n,{A:()=>r,X:()=>i})},47662:(t,n,e)=>{"use strict";e.d(n,{KI:()=>r.KI,Mj:()=>i.Ay,Qh:()=>r.Qh,UB:()=>o.A,aq:()=>i.aq,s1:()=>i.s1,wm:()=>i.wm,yW:()=>r.Ay});var r=e(35169),i=e(27809),o=e(65409)},27809:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>g,aq:()=>w,s1:()=>x,wm:()=>p});var r=e(1555),i=e(35169),o=e(8242);const a=.96422,u=1,c=.82521,s=4/29,f=6/29,l=3*f*f,h=f*f*f;function d(t){if(t instanceof y)return new y(t.l,t.a,t.b,t.opacity);if(t instanceof M)return T(t);t instanceof i.Gw||(t=(0,i.b)(t));var n,e,r=b(t.r),o=b(t.g),s=b(t.b),f=v((.2225045*r+.7168786*o+.0606169*s)/u);return r===o&&o===s?n=e=f:(n=v((.4360747*r+.3850649*o+.1430804*s)/a),e=v((.0139322*r+.0971045*o+.7141733*s)/c)),new y(116*f-16,500*(n-f),200*(f-e),t.opacity)}function p(t,n){return new y(t,0,0,null==n?1:n)}function g(t,n,e,r){return 1===arguments.length?d(t):new y(t,n,e,null==r?1:r)}function y(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function v(t){return t>h?Math.pow(t,1/3):t/l+s}function _(t){return t>f?t*t*t:l*(t-s)}function m(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function b(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function A(t){if(t instanceof M)return new M(t.h,t.c,t.l,t.opacity);if(t instanceof y||(t=d(t)),0===t.a&&0===t.b)return new M(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*o.u;return new M(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function x(t,n,e,r){return 1===arguments.length?A(t):new M(e,n,t,null==r?1:r)}function w(t,n,e,r){return 1===arguments.length?A(t):new M(t,n,e,null==r?1:r)}function M(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function T(t){if(isNaN(t.h))return new y(t.l,0,0,t.opacity);var n=t.h*o.F;return new y(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}(0,r.A)(y,g,(0,r.X)(i.Q1,{brighter(t){return new y(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new y(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return n=a*_(n),t=u*_(t),e=c*_(e),new i.Gw(m(3.1338561*n-1.6168667*t-.4906146*e),m(-.9787684*n+1.9161415*t+.033454*e),m(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}})),(0,r.A)(M,w,(0,r.X)(i.Q1,{brighter(t){return new M(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker(t){return new M(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb(){return T(this).rgb()}}))},8242:(t,n,e)=>{"use strict";e.d(n,{F:()=>r,u:()=>i});const r=Math.PI/180,i=180/Math.PI},91109:(t,n,e)=>{"use strict";e.d(n,{A:()=>c});var r={value:()=>{}};function i(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new o(r)}function o(t){this._=t}function a(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function u(t,n,e){for(var i=0,o=t.length;i<o;++i)if(t[i].name===n){t[i]=r,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=e&&t.push({name:n,value:e}),t}o.prototype=i.prototype={constructor:o,on:function(t,n){var e,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");if(e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))),c=-1,s=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++c<s;)if(e=(t=o[c]).type)i[e]=u(i[e],t.name,n);else if(null==n)for(e in i)i[e]=u(i[e],t.name,null);return this}for(;++c<s;)if((e=(t=o[c]).type)&&(e=a(i[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new o(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};const c=i},18019:(t,n,e)=>{"use strict";e.d(n,{J:()=>r.A});var r=e(91109)},48761:(t,n,e)=>{"use strict";function r(t,n){var e,r=1;function i(){var i,o,a=e.length,u=0,c=0;for(i=0;i<a;++i)u+=(o=e[i]).x,c+=o.y;for(u=(u/a-t)*r,c=(c/a-n)*r,i=0;i<a;++i)(o=e[i]).x-=u,o.y-=c}return null==t&&(t=0),null==n&&(n=0),i.initialize=function(t){e=t},i.x=function(n){return arguments.length?(t=+n,i):t},i.y=function(t){return arguments.length?(n=+t,i):n},i.strength=function(t){return arguments.length?(r=+t,i):r},i}e.d(n,{A:()=>r})},1500:(t,n,e)=>{"use strict";e.d(n,{A:()=>c});var r=e(79283),i=e(6532),o=e(44276);function a(t){return t.x+t.vx}function u(t){return t.y+t.vy}function c(t){var n,e,c,s=1,f=1;function l(){for(var t,i,l,d,p,g,y,v=n.length,_=0;_<f;++_)for(i=(0,r.A)(n,a,u).visitAfter(h),t=0;t<v;++t)l=n[t],g=e[l.index],y=g*g,d=l.x+l.vx,p=l.y+l.vy,i.visit(m);function m(t,n,e,r,i){var a=t.data,u=t.r,f=g+u;if(!a)return n>d+f||r<d-f||e>p+f||i<p-f;if(a.index>l.index){var h=d-a.x-a.vx,v=p-a.y-a.vy,_=h*h+v*v;_<f*f&&(0===h&&(_+=(h=(0,o.A)(c))*h),0===v&&(_+=(v=(0,o.A)(c))*v),_=(f-(_=Math.sqrt(_)))/_*s,l.vx+=(h*=_)*(f=(u*=u)/(y+u)),l.vy+=(v*=_)*f,a.vx-=h*(f=1-f),a.vy-=v*f)}}}function h(t){if(t.data)return t.r=e[t.data.index];for(var n=t.r=0;n<4;++n)t[n]&&t[n].r>t.r&&(t.r=t[n].r)}function d(){if(n){var r,i,o=n.length;for(e=new Array(o),r=0;r<o;++r)i=n[r],e[i.index]=+t(i,r,n)}}return"function"!=typeof t&&(t=(0,i.A)(null==t?1:+t)),l.initialize=function(t,e){n=t,c=e,d()},l.iterations=function(t){return arguments.length?(f=+t,l):f},l.strength=function(t){return arguments.length?(s=+t,l):s},l.radius=function(n){return arguments.length?(t="function"==typeof n?n:(0,i.A)(+n),d(),l):t},l}},6532:(t,n,e)=>{"use strict";function r(t){return function(){return t}}e.d(n,{A:()=>r})},2330:(t,n,e)=>{"use strict";e.d(n,{KS:()=>s.A,TS:()=>f.A,eR:()=>i.A,jT:()=>r.A,kJ:()=>o.A,pP:()=>u.A,tX:()=>c.A,xJ:()=>a.A});var r=e(48761),i=e(1500),o=e(68783),a=e(76831),u=e(84991),c=e(79799),s=e(99546),f=e(54601)},44276:(t,n,e)=>{"use strict";function r(t){return 1e-6*(t()-.5)}e.d(n,{A:()=>r})},72900:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});const r=1664525,i=1013904223,o=4294967296;function a(){let t=1;return()=>(t=(r*t+i)%o)/o}},68783:(t,n,e)=>{"use strict";e.d(n,{A:()=>u});var r=e(6532),i=e(44276);function o(t){return t.index}function a(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}function u(t){var n,e,u,c,s,f,l=o,h=function(t){return 1/Math.min(c[t.source.index],c[t.target.index])},d=(0,r.A)(30),p=1;function g(r){for(var o=0,a=t.length;o<p;++o)for(var u,c,l,h,d,g,y,v=0;v<a;++v)c=(u=t[v]).source,h=(l=u.target).x+l.vx-c.x-c.vx||(0,i.A)(f),d=l.y+l.vy-c.y-c.vy||(0,i.A)(f),h*=g=((g=Math.sqrt(h*h+d*d))-e[v])/g*r*n[v],d*=g,l.vx-=h*(y=s[v]),l.vy-=d*y,c.vx+=h*(y=1-y),c.vy+=d*y}function y(){if(u){var r,i,o=u.length,f=t.length,h=new Map(u.map(((t,n)=>[l(t,n,u),t])));for(r=0,c=new Array(o);r<f;++r)(i=t[r]).index=r,"object"!=typeof i.source&&(i.source=a(h,i.source)),"object"!=typeof i.target&&(i.target=a(h,i.target)),c[i.source.index]=(c[i.source.index]||0)+1,c[i.target.index]=(c[i.target.index]||0)+1;for(r=0,s=new Array(f);r<f;++r)i=t[r],s[r]=c[i.source.index]/(c[i.source.index]+c[i.target.index]);n=new Array(f),v(),e=new Array(f),_()}}function v(){if(u)for(var e=0,r=t.length;e<r;++e)n[e]=+h(t[e],e,t)}function _(){if(u)for(var n=0,r=t.length;n<r;++n)e[n]=+d(t[n],n,t)}return null==t&&(t=[]),g.initialize=function(t,n){u=t,f=n,y()},g.links=function(n){return arguments.length?(t=n,y(),g):t},g.id=function(t){return arguments.length?(l=t,g):l},g.iterations=function(t){return arguments.length?(p=+t,g):p},g.strength=function(t){return arguments.length?(h="function"==typeof t?t:(0,r.A)(+t),v(),g):h},g.distance=function(t){return arguments.length?(d="function"==typeof t?t:(0,r.A)(+t),_(),g):d},g}},76831:(t,n,e)=>{"use strict";e.d(n,{A:()=>u});var r=e(79283),i=e(6532),o=e(44276),a=e(79799);function u(){var t,n,e,u,c,s=(0,i.A)(-30),f=1,l=1/0,h=.81;function d(e){var i,o=t.length,c=(0,r.A)(t,a.x,a.y).visitAfter(g);for(u=e,i=0;i<o;++i)n=t[i],c.visit(y)}function p(){if(t){var n,e,r=t.length;for(c=new Array(r),n=0;n<r;++n)e=t[n],c[e.index]=+s(e,n,t)}}function g(t){var n,e,r,i,o,a=0,u=0;if(t.length){for(r=i=o=0;o<4;++o)(n=t[o])&&(e=Math.abs(n.value))&&(a+=n.value,u+=e,r+=e*n.x,i+=e*n.y);t.x=r/u,t.y=i/u}else{(n=t).x=n.data.x,n.y=n.data.y;do{a+=c[n.data.index]}while(n=n.next)}t.value=a}function y(t,r,i,a){if(!t.value)return!0;var s=t.x-n.x,d=t.y-n.y,p=a-r,g=s*s+d*d;if(p*p/h<g)return g<l&&(0===s&&(g+=(s=(0,o.A)(e))*s),0===d&&(g+=(d=(0,o.A)(e))*d),g<f&&(g=Math.sqrt(f*g)),n.vx+=s*t.value*u/g,n.vy+=d*t.value*u/g),!0;if(!(t.length||g>=l)){(t.data!==n||t.next)&&(0===s&&(g+=(s=(0,o.A)(e))*s),0===d&&(g+=(d=(0,o.A)(e))*d),g<f&&(g=Math.sqrt(f*g)));do{t.data!==n&&(p=c[t.data.index]*u/g,n.vx+=s*p,n.vy+=d*p)}while(t=t.next)}}return d.initialize=function(n,r){t=n,e=r,p()},d.strength=function(t){return arguments.length?(s="function"==typeof t?t:(0,i.A)(+t),p(),d):s},d.distanceMin=function(t){return arguments.length?(f=t*t,d):Math.sqrt(f)},d.distanceMax=function(t){return arguments.length?(l=t*t,d):Math.sqrt(l)},d.theta=function(t){return arguments.length?(h=t*t,d):Math.sqrt(h)},d}},84991:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(6532);function i(t,n,e){var i,o,a,u=(0,r.A)(.1);function c(t){for(var r=0,u=i.length;r<u;++r){var c=i[r],s=c.x-n||1e-6,f=c.y-e||1e-6,l=Math.sqrt(s*s+f*f),h=(a[r]-l)*o[r]*t/l;c.vx+=s*h,c.vy+=f*h}}function s(){if(i){var n,e=i.length;for(o=new Array(e),a=new Array(e),n=0;n<e;++n)a[n]=+t(i[n],n,i),o[n]=isNaN(a[n])?0:+u(i[n],n,i)}}return"function"!=typeof t&&(t=(0,r.A)(+t)),null==n&&(n=0),null==e&&(e=0),c.initialize=function(t){i=t,s()},c.strength=function(t){return arguments.length?(u="function"==typeof t?t:(0,r.A)(+t),s(),c):u},c.radius=function(n){return arguments.length?(t="function"==typeof n?n:(0,r.A)(+n),s(),c):t},c.x=function(t){return arguments.length?(n=+t,c):n},c.y=function(t){return arguments.length?(e=+t,c):e},c}},79799:(t,n,e)=>{"use strict";e.d(n,{A:()=>f,x:()=>a,y:()=>u});var r=e(91109),i=e(34689),o=e(72900);function a(t){return t.x}function u(t){return t.y}var c=10,s=Math.PI*(3-Math.sqrt(5));function f(t){var n,e=1,a=.001,u=1-Math.pow(a,1/300),f=0,l=.6,h=new Map,d=(0,i.O1)(y),p=(0,r.A)("tick","end"),g=(0,o.A)();function y(){v(),p.call("tick",n),e<a&&(d.stop(),p.call("end",n))}function v(r){var i,o,a=t.length;void 0===r&&(r=1);for(var c=0;c<r;++c)for(e+=(f-e)*u,h.forEach((function(t){t(e)})),i=0;i<a;++i)null==(o=t[i]).fx?o.x+=o.vx*=l:(o.x=o.fx,o.vx=0),null==o.fy?o.y+=o.vy*=l:(o.y=o.fy,o.vy=0);return n}function _(){for(var n,e=0,r=t.length;e<r;++e){if((n=t[e]).index=e,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),isNaN(n.x)||isNaN(n.y)){var i=c*Math.sqrt(.5+e),o=e*s;n.x=i*Math.cos(o),n.y=i*Math.sin(o)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function m(n){return n.initialize&&n.initialize(t,g),n}return null==t&&(t=[]),_(),n={tick:v,restart:function(){return d.restart(y),n},stop:function(){return d.stop(),n},nodes:function(e){return arguments.length?(t=e,_(),h.forEach(m),n):t},alpha:function(t){return arguments.length?(e=+t,n):e},alphaMin:function(t){return arguments.length?(a=+t,n):a},alphaDecay:function(t){return arguments.length?(u=+t,n):+u},alphaTarget:function(t){return arguments.length?(f=+t,n):f},velocityDecay:function(t){return arguments.length?(l=1-t,n):1-l},randomSource:function(t){return arguments.length?(g=t,h.forEach(m),n):g},force:function(t,e){return arguments.length>1?(null==e?h.delete(t):h.set(t,m(e)),n):h.get(t)},find:function(n,e,r){var i,o,a,u,c,s=0,f=t.length;for(null==r?r=1/0:r*=r,s=0;s<f;++s)(a=(i=n-(u=t[s]).x)*i+(o=e-u.y)*o)<r&&(c=u,r=a);return c},on:function(t,e){return arguments.length>1?(p.on(t,e),n):p.on(t)}}}},99546:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(6532);function i(t){var n,e,i,o=(0,r.A)(.1);function a(t){for(var r,o=0,a=n.length;o<a;++o)(r=n[o]).vx+=(i[o]-r.x)*e[o]*t}function u(){if(n){var r,a=n.length;for(e=new Array(a),i=new Array(a),r=0;r<a;++r)e[r]=isNaN(i[r]=+t(n[r],r,n))?0:+o(n[r],r,n)}}return"function"!=typeof t&&(t=(0,r.A)(null==t?0:+t)),a.initialize=function(t){n=t,u()},a.strength=function(t){return arguments.length?(o="function"==typeof t?t:(0,r.A)(+t),u(),a):o},a.x=function(n){return arguments.length?(t="function"==typeof n?n:(0,r.A)(+n),u(),a):t},a}},54601:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(6532);function i(t){var n,e,i,o=(0,r.A)(.1);function a(t){for(var r,o=0,a=n.length;o<a;++o)(r=n[o]).vy+=(i[o]-r.y)*e[o]*t}function u(){if(n){var r,a=n.length;for(e=new Array(a),i=new Array(a),r=0;r<a;++r)e[r]=isNaN(i[r]=+t(n[r],r,n))?0:+o(n[r],r,n)}}return"function"!=typeof t&&(t=(0,r.A)(null==t?0:+t)),a.initialize=function(t){n=t,u()},a.strength=function(t){return arguments.length?(o="function"==typeof t?t:(0,r.A)(+t),u(),a):o},a.y=function(n){return arguments.length?(t="function"==typeof n?n:(0,r.A)(+n),u(),a):t},a}},71266:(t,n,e)=>{"use strict";function r(t){return null==t?null:i(t)}function i(t){if("function"!=typeof t)throw new Error;return t}e.d(n,{l:()=>r,m:()=>i})},40487:(t,n,e)=>{"use strict";function r(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function i(t,n){let e,r,i=t.length;for(;i;)r=n()*i--|0,e=t[i],t[i]=t[r],t[r]=e;return t}e.d(n,{A:()=>r,k:()=>i})},37840:(t,n,e)=>{"use strict";function r(t,n){return t.parent===n.parent?1:2}function i(t,n){return t+n.x}function o(t,n){return Math.max(t,n.y)}function a(){var t=r,n=1,e=1,a=!1;function u(r){var u,c=0;r.eachAfter((function(n){var e=n.children;e?(n.x=function(t){return t.reduce(i,0)/t.length}(e),n.y=function(t){return 1+t.reduce(o,0)}(e)):(n.x=u?c+=t(n,u):0,n.y=0,u=n)}));var s=function(t){for(var n;n=t.children;)t=n[0];return t}(r),f=function(t){for(var n;n=t.children;)t=n[n.length-1];return t}(r),l=s.x-t(s,f)/2,h=f.x+t(f,s)/2;return r.eachAfter(a?function(t){t.x=(t.x-r.x)*n,t.y=(r.y-t.y)*e}:function(t){t.x=(t.x-l)/(h-l)*n,t.y=(1-(r.y?t.y/r.y:1))*e})}return u.separation=function(n){return arguments.length?(t=n,u):t},u.size=function(t){return arguments.length?(a=!1,n=+t[0],e=+t[1],u):a?null:[n,e]},u.nodeSize=function(t){return arguments.length?(a=!0,n=+t[0],e=+t[1],u):a?[n,e]:null},u}e.d(n,{A:()=>a})},36628:(t,n,e)=>{"use strict";function r(){return 0}function i(t){return function(){return t}}e.d(n,{A:()=>i,P:()=>r})},25416:(t,n,e)=>{"use strict";function r(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n}e.d(n,{A:()=>r})},91245:(t,n,e)=>{"use strict";function r(t){var n=0,e=t.children,r=e&&e.length;if(r)for(;--r>=0;)n+=e[r].value;else n=1;t.value=n}function i(){return this.eachAfter(r)}e.d(n,{A:()=>i})},77262:(t,n,e)=>{"use strict";function r(){return Array.from(this)}e.d(n,{A:()=>r})},96157:(t,n,e)=>{"use strict";function r(t,n){let e=-1;for(const r of this)t.call(n,r,++e,this);return this}e.d(n,{A:()=>r})},33983:(t,n,e)=>{"use strict";function r(t,n){for(var e,r,i,o=this,a=[o],u=[],c=-1;o=a.pop();)if(u.push(o),e=o.children)for(r=0,i=e.length;r<i;++r)a.push(e[r]);for(;o=u.pop();)t.call(n,o,++c,this);return this}e.d(n,{A:()=>r})},49590:(t,n,e)=>{"use strict";function r(t,n){for(var e,r,i=this,o=[i],a=-1;i=o.pop();)if(t.call(n,i,++a,this),e=i.children)for(r=e.length-1;r>=0;--r)o.push(e[r]);return this}e.d(n,{A:()=>r})},86407:(t,n,e)=>{"use strict";function r(t,n){let e=-1;for(const r of this)if(t.call(n,r,++e,this))return r}e.d(n,{A:()=>r})},14946:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>y,bP:()=>A,lW:()=>b});var r=e(91245),i=e(96157),o=e(49590),a=e(33983),u=e(86407),c=e(84393),s=e(23920),f=e(64291),l=e(25416),h=e(77262),d=e(95308),p=e(19851),g=e(72930);function y(t,n){t instanceof Map?(t=[void 0,t],void 0===n&&(n=_)):void 0===n&&(n=v);for(var e,r,i,o,a,u=new A(t),c=[u];e=c.pop();)if((i=n(e.data))&&(a=(i=Array.from(i)).length))for(e.children=i,o=a-1;o>=0;--o)c.push(r=i[o]=new A(i[o])),r.parent=e,r.depth=e.depth+1;return u.eachBefore(b)}function v(t){return t.children}function _(t){return Array.isArray(t)?t[1]:null}function m(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function b(t){var n=0;do{t.height=n}while((t=t.parent)&&t.height<++n)}function A(t){this.data=t,this.depth=this.height=0,this.parent=null}A.prototype=y.prototype={constructor:A,count:r.A,each:i.A,eachAfter:a.A,eachBefore:o.A,find:u.A,sum:c.A,sort:s.A,path:f.A,ancestors:l.A,descendants:h.A,leaves:d.A,links:p.A,copy:function(){return y(this).eachBefore(m)},[Symbol.iterator]:g.A}},72930:(t,n,e)=>{"use strict";function*r(){var t,n,e,r,i=this,o=[i];do{for(t=o.reverse(),o=[];i=t.pop();)if(yield i,n=i.children)for(e=0,r=n.length;e<r;++e)o.push(n[e])}while(o.length)}e.d(n,{A:()=>r})},95308:(t,n,e)=>{"use strict";function r(){var t=[];return this.eachBefore((function(n){n.children||t.push(n)})),t}e.d(n,{A:()=>r})},19851:(t,n,e)=>{"use strict";function r(){var t=this,n=[];return t.each((function(e){e!==t&&n.push({source:e.parent,target:e})})),n}e.d(n,{A:()=>r})},64291:(t,n,e)=>{"use strict";function r(t){for(var n=this,e=function(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;for(t=e.pop(),n=r.pop();t===n;)i=t,t=e.pop(),n=r.pop();return i}(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var i=r.length;t!==e;)r.splice(i,0,t),t=t.parent;return r}e.d(n,{A:()=>r})},23920:(t,n,e)=>{"use strict";function r(t){return this.eachBefore((function(n){n.children&&n.children.sort(t)}))}e.d(n,{A:()=>r})},84393:(t,n,e)=>{"use strict";function r(t){return this.eachAfter((function(n){for(var e=+t(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)e+=r[i].value;n.value=e}))}e.d(n,{A:()=>r})},27050:(t,n,e)=>{"use strict";e.d(n,{B2:()=>f.A,G:()=>h.A,Sk:()=>i.Ay,Xv:()=>p.A,Yi:()=>g.A,Zz:()=>a.A,bC:()=>y.Ay,bP:()=>i.bP,bz:()=>r.A,gg:()=>v.A,hk:()=>l.A,iL:()=>d.A,jB:()=>c.A,nT:()=>u.A,qq:()=>o.A,zT:()=>s.A});var r=e(37840),i=e(14946),o=e(79338),a=e(56423),u=e(87471),c=e(56564),s=e(40764),f=e(58588),l=e(79651),h=e(40366),d=e(808),p=e(13549),g=e(6602),y=e(16413),v=e(79128)},73620:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});const r=1664525,i=1013904223,o=4294967296;function a(){let t=1;return()=>(t=(r*t+i)%o)/o}},87471:(t,n,e)=>{"use strict";e.d(n,{A:()=>o,m:()=>a});var r=e(40487),i=e(73620);function o(t){return a(t,(0,i.A)())}function a(t,n){for(var e,i,o=0,a=(t=(0,r.k)(Array.from(t),n)).length,c=[];o<a;)e=t[o],i&&s(i,e)?++o:(i=l(c=u(c,e)),o=0);return i}function u(t,n){var e,r;if(f(n,t))return[n];for(e=0;e<t.length;++e)if(c(n,t[e])&&f(h(t[e],n),t))return[t[e],n];for(e=0;e<t.length-1;++e)for(r=e+1;r<t.length;++r)if(c(h(t[e],t[r]),n)&&c(h(t[e],n),t[r])&&c(h(t[r],n),t[e])&&f(d(t[e],t[r],n),t))return[t[e],t[r],n];throw new Error}function c(t,n){var e=t.r-n.r,r=n.x-t.x,i=n.y-t.y;return e<0||e*e<r*r+i*i}function s(t,n){var e=t.r-n.r+1e-9*Math.max(t.r,n.r,1),r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function f(t,n){for(var e=0;e<n.length;++e)if(!s(t,n[e]))return!1;return!0}function l(t){switch(t.length){case 1:return{x:(n=t[0]).x,y:n.y,r:n.r};case 2:return h(t[0],t[1]);case 3:return d(t[0],t[1],t[2])}var n}function h(t,n){var e=t.x,r=t.y,i=t.r,o=n.x,a=n.y,u=n.r,c=o-e,s=a-r,f=u-i,l=Math.sqrt(c*c+s*s);return{x:(e+o+c/l*f)/2,y:(r+a+s/l*f)/2,r:(l+i+u)/2}}function d(t,n,e){var r=t.x,i=t.y,o=t.r,a=n.x,u=n.y,c=n.r,s=e.x,f=e.y,l=e.r,h=r-a,d=r-s,p=i-u,g=i-f,y=c-o,v=l-o,_=r*r+i*i-o*o,m=_-a*a-u*u+c*c,b=_-s*s-f*f+l*l,A=d*p-h*g,x=(p*b-g*m)/(2*A)-r,w=(g*y-p*v)/A,M=(d*m-h*b)/(2*A)-i,T=(h*v-d*y)/A,N=w*w+T*T-1,S=2*(o+x*w+M*T),k=x*x+M*M-o*o,E=-(Math.abs(N)>1e-6?(S+Math.sqrt(S*S-4*N*k))/(2*N):k/S);return{x:r+x+w*E,y:i+M+T*E,r:E}}},79338:(t,n,e)=>{"use strict";e.d(n,{A:()=>c});var r=e(71266),i=e(36628),o=e(73620),a=e(56423);function u(t){return Math.sqrt(t.value)}function c(){var t=null,n=1,e=1,a=i.P;function c(r){const c=(0,o.A)();return r.x=n/2,r.y=e/2,t?r.eachBefore(s(t)).eachAfter(f(a,.5,c)).eachBefore(l(1)):r.eachBefore(s(u)).eachAfter(f(i.P,1,c)).eachAfter(f(a,r.r/Math.min(n,e),c)).eachBefore(l(Math.min(n,e)/(2*r.r))),r}return c.radius=function(n){return arguments.length?(t=(0,r.l)(n),c):t},c.size=function(t){return arguments.length?(n=+t[0],e=+t[1],c):[n,e]},c.padding=function(t){return arguments.length?(a="function"==typeof t?t:(0,i.A)(+t),c):a},c}function s(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function f(t,n,e){return function(r){if(i=r.children){var i,o,u,c=i.length,s=t(r)*n||0;if(s)for(o=0;o<c;++o)i[o].r+=s;if(u=(0,a.K)(i,e),s)for(o=0;o<c;++o)i[o].r-=s;r.r=u+s}}}function l(t){return function(n){var e=n.parent;n.r*=t,e&&(n.x=e.x+t*n.x,n.y=e.y+t*n.y)}}},56423:(t,n,e)=>{"use strict";e.d(n,{A:()=>l,K:()=>f});var r=e(40487),i=e(73620),o=e(87471);function a(t,n,e){var r,i,o,a,u=t.x-n.x,c=t.y-n.y,s=u*u+c*c;s?(i=n.r+e.r,i*=i,a=t.r+e.r,i>(a*=a)?(r=(s+a-i)/(2*s),o=Math.sqrt(Math.max(0,a/s-r*r)),e.x=t.x-r*u-o*c,e.y=t.y-r*c+o*u):(r=(s+i-a)/(2*s),o=Math.sqrt(Math.max(0,i/s-r*r)),e.x=n.x+r*u-o*c,e.y=n.y+r*c+o*u)):(e.x=n.x+e.r,e.y=n.y)}function u(t,n){var e=t.r+n.r-1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function c(t){var n=t._,e=t.next._,r=n.r+e.r,i=(n.x*e.r+e.x*n.r)/r,o=(n.y*e.r+e.y*n.r)/r;return i*i+o*o}function s(t){this._=t,this.next=null,this.previous=null}function f(t,n){if(!(l=(t=(0,r.A)(t)).length))return 0;var e,i,f,l,h,d,p,g,y,v,_;if((e=t[0]).x=0,e.y=0,!(l>1))return e.r;if(i=t[1],e.x=-i.r,i.x=e.r,i.y=0,!(l>2))return e.r+i.r;a(i,e,f=t[2]),e=new s(e),i=new s(i),f=new s(f),e.next=f.previous=i,i.next=e.previous=f,f.next=i.previous=e;t:for(p=3;p<l;++p){a(e._,i._,f=t[p]),f=new s(f),g=i.next,y=e.previous,v=i._.r,_=e._.r;do{if(v<=_){if(u(g._,f._)){i=g,e.next=i,i.previous=e,--p;continue t}v+=g._.r,g=g.next}else{if(u(y._,f._)){(e=y).next=i,i.previous=e,--p;continue t}_+=y._.r,y=y.previous}}while(g!==y.next);for(f.previous=e,f.next=i,e.next=i.previous=i=f,h=c(e);(f=f.next)!==i;)(d=c(f))<h&&(e=f,h=d);i=e.next}for(e=[i._],f=i;(f=f.next)!==i;)e.push(f._);for(f=(0,o.m)(e,n),p=0;p<l;++p)(e=t[p]).x-=f.x,e.y-=f.y;return f.r}function l(t){return f(t,(0,i.A)()),t}},56564:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(79935),i=e(808);function o(){var t=1,n=1,e=0,o=!1;function a(a){var u=a.height+1;return a.x0=a.y0=e,a.x1=t,a.y1=n/u,a.eachBefore(function(t,n){return function(r){r.children&&(0,i.A)(r,r.x0,t*(r.depth+1)/n,r.x1,t*(r.depth+2)/n);var o=r.x0,a=r.y0,u=r.x1-e,c=r.y1-e;u<o&&(o=u=(o+u)/2),c<a&&(a=c=(a+c)/2),r.x0=o,r.y0=a,r.x1=u,r.y1=c}}(n,u)),o&&a.eachBefore(r.A),a}return a.round=function(t){return arguments.length?(o=!!t,a):o},a.size=function(e){return arguments.length?(t=+e[0],n=+e[1],a):[t,n]},a.padding=function(t){return arguments.length?(e=+t,a):e},a}},40764:(t,n,e)=>{"use strict";e.d(n,{A:()=>f});var r=e(71266),i=e(14946),o={depth:-1},a={},u={};function c(t){return t.id}function s(t){return t.parentId}function f(){var t,n=c,e=s;function f(r){var c,s,f,d,p,g,y,v,_=Array.from(r),m=n,b=e,A=new Map;if(null!=t){const n=_.map(((n,e)=>function(t){let n=(t=`${t}`).length;return h(t,n-1)&&!h(t,n-2)&&(t=t.slice(0,-1)),"/"===t[0]?t:`/${t}`}(t(n,e,r)))),e=n.map(l),i=new Set(n).add("");for(const t of e)i.has(t)||(i.add(t),n.push(t),e.push(l(t)),_.push(u));m=(t,e)=>n[e],b=(t,n)=>e[n]}for(f=0,c=_.length;f<c;++f)s=_[f],g=_[f]=new i.bP(s),null!=(y=m(s,f,r))&&(y+="")&&(v=g.id=y,A.set(v,A.has(v)?a:g)),null!=(y=b(s,f,r))&&(y+="")&&(g.parent=y);for(f=0;f<c;++f)if(y=(g=_[f]).parent){if(!(p=A.get(y)))throw new Error("missing: "+y);if(p===a)throw new Error("ambiguous: "+y);p.children?p.children.push(g):p.children=[g],g.parent=p}else{if(d)throw new Error("multiple roots");d=g}if(!d)throw new Error("no root");if(null!=t){for(;d.data===u&&1===d.children.length;)d=d.children[0],--c;for(let t=_.length-1;t>=0&&(g=_[t]).data===u;--t)g.data=null}if(d.parent=o,d.eachBefore((function(t){t.depth=t.parent.depth+1,--c})).eachBefore(i.lW),d.parent=null,c>0)throw new Error("cycle");return d}return f.id=function(t){return arguments.length?(n=(0,r.l)(t),f):n},f.parentId=function(t){return arguments.length?(e=(0,r.l)(t),f):e},f.path=function(n){return arguments.length?(t=(0,r.l)(n),f):t},f}function l(t){let n=t.length;if(n<2)return"";for(;--n>1&&!h(t,n););return t.slice(0,n)}function h(t,n){if("/"===t[n]){let e=0;for(;n>0&&"\\"===t[--n];)++e;if(!(1&e))return!0}return!1}},58588:(t,n,e)=>{"use strict";e.d(n,{A:()=>f});var r=e(14946);function i(t,n){return t.parent===n.parent?1:2}function o(t){var n=t.children;return n?n[0]:t.t}function a(t){var n=t.children;return n?n[n.length-1]:t.t}function u(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function c(t,n,e){return t.a.parent===n.parent?t.a:e}function s(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}function f(){var t=i,n=1,e=1,r=null;function f(i){var o=function(t){for(var n,e,r,i,o,a=new s(t,0),u=[a];n=u.pop();)if(r=n._.children)for(n.children=new Array(o=r.length),i=o-1;i>=0;--i)u.push(e=n.children[i]=new s(r[i],i)),e.parent=n;return(a.parent=new s(null,0)).children=[a],a}(i);if(o.eachAfter(l),o.parent.m=-o.z,o.eachBefore(h),r)i.eachBefore(d);else{var a=i,u=i,c=i;i.eachBefore((function(t){t.x<a.x&&(a=t),t.x>u.x&&(u=t),t.depth>c.depth&&(c=t)}));var f=a===u?1:t(a,u)/2,p=f-a.x,g=n/(u.x+f+p),y=e/(c.depth||1);i.eachBefore((function(t){t.x=(t.x+p)*g,t.y=t.depth*y}))}return i}function l(n){var e=n.children,r=n.parent.children,i=n.i?r[n.i-1]:null;if(e){!function(t){for(var n,e=0,r=0,i=t.children,o=i.length;--o>=0;)(n=i[o]).z+=e,n.m+=e,e+=n.s+(r+=n.c)}(n);var s=(e[0].z+e[e.length-1].z)/2;i?(n.z=i.z+t(n._,i._),n.m=n.z-s):n.z=s}else i&&(n.z=i.z+t(n._,i._));n.parent.A=function(n,e,r){if(e){for(var i,s=n,f=n,l=e,h=s.parent.children[0],d=s.m,p=f.m,g=l.m,y=h.m;l=a(l),s=o(s),l&&s;)h=o(h),(f=a(f)).a=n,(i=l.z+g-s.z-d+t(l._,s._))>0&&(u(c(l,n,r),n,i),d+=i,p+=i),g+=l.m,d+=s.m,y+=h.m,p+=f.m;l&&!a(f)&&(f.t=l,f.m+=g-p),s&&!o(h)&&(h.t=s,h.m+=d-y,r=n)}return r}(n,i,n.parent.A||r[0])}function h(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function d(t){t.x*=n,t.y=t.depth*e}return f.separation=function(n){return arguments.length?(t=n,f):t},f.size=function(t){return arguments.length?(r=!1,n=+t[0],e=+t[1],f):r?null:[n,e]},f.nodeSize=function(t){return arguments.length?(r=!0,n=+t[0],e=+t[1],f):r?[n,e]:null},f}s.prototype=Object.create(r.bP.prototype)},40366:(t,n,e)=>{"use strict";function r(t,n,e,r,i){var o,a,u=t.children,c=u.length,s=new Array(c+1);for(s[0]=a=o=0;o<c;++o)s[o+1]=a+=u[o].value;!function t(n,e,r,i,o,a,c){if(n>=e-1){var f=u[n];return f.x0=i,f.y0=o,f.x1=a,void(f.y1=c)}for(var l=s[n],h=r/2+l,d=n+1,p=e-1;d<p;){var g=d+p>>>1;s[g]<h?d=g+1:p=g}h-s[d-1]<s[d]-h&&n+1<d&&--d;var y=s[d]-l,v=r-y;if(a-i>c-o){var _=r?(i*v+a*y)/r:a;t(n,d,y,i,o,_,c),t(d,e,v,_,o,a,c)}else{var m=r?(o*v+c*y)/r:c;t(n,d,y,i,o,a,m),t(d,e,v,i,m,a,c)}}(0,c,t.value,n,e,r,i)}e.d(n,{A:()=>r})},808:(t,n,e)=>{"use strict";function r(t,n,e,r,i){for(var o,a=t.children,u=-1,c=a.length,s=t.value&&(r-n)/t.value;++u<c;)(o=a[u]).y0=e,o.y1=i,o.x0=n,o.x1=n+=o.value*s}e.d(n,{A:()=>r})},79651:(t,n,e)=>{"use strict";e.d(n,{A:()=>u});var r=e(79935),i=e(16413),o=e(71266),a=e(36628);function u(){var t=i.Ay,n=!1,e=1,u=1,c=[0],s=a.P,f=a.P,l=a.P,h=a.P,d=a.P;function p(t){return t.x0=t.y0=0,t.x1=e,t.y1=u,t.eachBefore(g),c=[0],n&&t.eachBefore(r.A),t}function g(n){var e=c[n.depth],r=n.x0+e,i=n.y0+e,o=n.x1-e,a=n.y1-e;o<r&&(r=o=(r+o)/2),a<i&&(i=a=(i+a)/2),n.x0=r,n.y0=i,n.x1=o,n.y1=a,n.children&&(e=c[n.depth+1]=s(n)/2,r+=d(n)-e,i+=f(n)-e,(o-=l(n)-e)<r&&(r=o=(r+o)/2),(a-=h(n)-e)<i&&(i=a=(i+a)/2),t(n,r,i,o,a))}return p.round=function(t){return arguments.length?(n=!!t,p):n},p.size=function(t){return arguments.length?(e=+t[0],u=+t[1],p):[e,u]},p.tile=function(n){return arguments.length?(t=(0,o.m)(n),p):t},p.padding=function(t){return arguments.length?p.paddingInner(t).paddingOuter(t):p.paddingInner()},p.paddingInner=function(t){return arguments.length?(s="function"==typeof t?t:(0,a.A)(+t),p):s},p.paddingOuter=function(t){return arguments.length?p.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):p.paddingTop()},p.paddingTop=function(t){return arguments.length?(f="function"==typeof t?t:(0,a.A)(+t),p):f},p.paddingRight=function(t){return arguments.length?(l="function"==typeof t?t:(0,a.A)(+t),p):l},p.paddingBottom=function(t){return arguments.length?(h="function"==typeof t?t:(0,a.A)(+t),p):h},p.paddingLeft=function(t){return arguments.length?(d="function"==typeof t?t:(0,a.A)(+t),p):d},p}},79128:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(808),i=e(13549),o=e(16413);const a=function t(n){function e(t,e,a,u,c){if((s=t._squarify)&&s.ratio===n)for(var s,f,l,h,d,p=-1,g=s.length,y=t.value;++p<g;){for(l=(f=s[p]).children,h=f.value=0,d=l.length;h<d;++h)f.value+=l[h].value;f.dice?(0,r.A)(f,e,a,u,y?a+=(c-a)*f.value/y:c):(0,i.A)(f,e,a,y?e+=(u-e)*f.value/y:u,c),y-=f.value}else t._squarify=s=(0,o.AI)(n,t,e,a,u,c),s.ratio=n}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}(o.U1)},79935:(t,n,e)=>{"use strict";function r(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}e.d(n,{A:()=>r})},13549:(t,n,e)=>{"use strict";function r(t,n,e,r,i){for(var o,a=t.children,u=-1,c=a.length,s=t.value&&(i-e)/t.value;++u<c;)(o=a[u]).x0=n,o.x1=r,o.y0=e,o.y1=e+=o.value*s}e.d(n,{A:()=>r})},6602:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(808),i=e(13549);function o(t,n,e,o,a){(1&t.depth?i.A:r.A)(t,n,e,o,a)}},16413:(t,n,e)=>{"use strict";e.d(n,{AI:()=>a,Ay:()=>u,U1:()=>o});var r=e(808),i=e(13549),o=(1+Math.sqrt(5))/2;function a(t,n,e,o,a,u){for(var c,s,f,l,h,d,p,g,y,v,_,m=[],b=n.children,A=0,x=0,w=b.length,M=n.value;A<w;){f=a-e,l=u-o;do{h=b[x++].value}while(!h&&x<w);for(d=p=h,_=h*h*(v=Math.max(l/f,f/l)/(M*t)),y=Math.max(p/_,_/d);x<w;++x){if(h+=s=b[x].value,s<d&&(d=s),s>p&&(p=s),_=h*h*v,(g=Math.max(p/_,_/d))>y){h-=s;break}y=g}m.push(c={value:h,dice:f<l,children:b.slice(A,x)}),c.dice?(0,r.A)(c,e,o,a,M?o+=l*h/M:u):(0,i.A)(c,e,o,M?e+=f*h/M:a,u),M-=h,A=x}return m}const u=function t(n){function e(t,e,r,i,o){a(n,t,e,r,i,o)}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}(o)},96395:(t,n,e)=>{"use strict";e.d(n,{$:()=>a,A:()=>o});var r=e(4627),i=e(53788);function o(t,n){return((0,i.p)(n)?i.A:a)(t,n)}function a(t,n){var e,i=n?n.length:0,o=t?Math.min(i,t.length):0,a=new Array(o),u=new Array(i);for(e=0;e<o;++e)a[e]=(0,r.A)(t[e],n[e]);for(;e<i;++e)u[e]=n[e];return function(t){for(e=0;e<o;++e)u[e]=a[e](t);return u}}},48508:(t,n,e)=>{"use strict";function r(t,n,e,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*n+(4-6*o+3*a)*e+(1+3*t+3*o-3*a)*r+a*i)/6}function i(t){var n=t.length-1;return function(e){var i=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),o=t[i],a=t[i+1],u=i>0?t[i-1]:2*o-a,c=i<n-1?t[i+2]:2*a-o;return r((e-i/n)*n,u,o,a,c)}}e.d(n,{A:()=>i,H:()=>r})},42184:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(48508);function i(t){var n=t.length;return function(e){var i=Math.floor(((e%=1)<0?++e:e)*n),o=t[(i+n-1)%n],a=t[i%n],u=t[(i+1)%n],c=t[(i+2)%n];return(0,r.H)((e-i/n)*n,o,a,u,c)}}},56905:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>u,lG:()=>o,uN:()=>a});var r=e(60824);function i(t,n){return function(e){return t+e*n}}function o(t,n){var e=n-t;return e?i(t,e>180||e<-180?e-360*Math.round(e/360):e):(0,r.A)(isNaN(t)?n:t)}function a(t){return 1==(t=+t)?u:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):(0,r.A)(isNaN(n)?e:n)}}function u(t,n){var e=n-t;return e?i(t,e):(0,r.A)(isNaN(t)?n:t)}},60824:(t,n,e)=>{"use strict";e.d(n,{A:()=>r});const r=t=>()=>t},87257:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,w:()=>u});var r=e(65409),i=e(56905);function o(t){return function n(e){function o(n,o){var a=t((n=(0,r.A)(n)).h,(o=(0,r.A)(o)).h),u=(0,i.Ay)(n.s,o.s),c=(0,i.Ay)(n.l,o.l),s=(0,i.Ay)(n.opacity,o.opacity);return function(t){return n.h=a(t),n.s=u(t),n.l=c(Math.pow(t,e)),n.opacity=s(t),n+""}}return e=+e,o.gamma=n,o}(1)}const a=o(i.lG);var u=o(i.Ay)},58072:(t,n,e)=>{"use strict";function r(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}e.d(n,{A:()=>r})},94663:(t,n,e)=>{"use strict";function r(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}}e.d(n,{A:()=>r})},36909:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,G:()=>u});var r=e(27809),i=e(56905);function o(t){return function(n,e){var o=t((n=(0,r.aq)(n)).h,(e=(0,r.aq)(e)).h),a=(0,i.Ay)(n.c,e.c),u=(0,i.Ay)(n.l,e.l),c=(0,i.Ay)(n.opacity,e.opacity);return function(t){return n.h=o(t),n.c=a(t),n.l=u(t),n.opacity=c(t),n+""}}}const a=o(i.lG);var u=o(i.Ay)},76157:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,y:()=>u});var r=e(35169),i=e(56905);function o(t){return function(n,e){var o=t((n=(0,r.KI)(n)).h,(e=(0,r.KI)(e)).h),a=(0,i.Ay)(n.s,e.s),u=(0,i.Ay)(n.l,e.l),c=(0,i.Ay)(n.opacity,e.opacity);return function(t){return n.h=o(t),n.s=a(t),n.l=u(t),n.opacity=c(t),n+""}}}const a=o(i.lG);var u=o(i.Ay)},56420:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(56905);function i(t,n){var e=(0,r.lG)(+t,+n);return function(t){var n=e(t);return n-360*Math.floor(n/360)}}},63638:(t,n,e)=>{"use strict";e.d(n,{$B:()=>x.A,Dj:()=>f.A,GW:()=>r.A,I_:()=>a.A,KV:()=>l.A,Li:()=>v.uL,Qm:()=>o.A,SH:()=>s.A,TE:()=>g.T,Xl:()=>A.w,Zr:()=>v.Ay,_8:()=>u.A,bE:()=>b.A,dJ:()=>m.A,hf:()=>h.A,p0:()=>i.A,p5:()=>A.A,p7:()=>y.A,pN:()=>g.I,r_:()=>_.A,sH:()=>d.A,v1:()=>b.G,x6:()=>_.y,xh:()=>c.A,yd:()=>w.A,z4:()=>v.Ik,zl:()=>p.A});var r=e(4627),i=e(96395),o=e(48508),a=e(42184),u=e(58072),c=e(94663),s=e(56420),f=e(84937),l=e(53788),h=e(38571),d=e(83158),p=e(64533),g=e(76985),y=e(86327),v=e(23617),_=e(76157),m=e(68073),b=e(36909),A=e(87257),x=e(56300),w=e(94919)},68073:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(27809),i=e(56905);function o(t,n){var e=(0,i.Ay)((t=(0,r.Ay)(t)).l,(n=(0,r.Ay)(n)).l),o=(0,i.Ay)(t.a,n.a),a=(0,i.Ay)(t.b,n.b),u=(0,i.Ay)(t.opacity,n.opacity);return function(n){return t.l=e(n),t.a=o(n),t.b=a(n),t.opacity=u(n),t+""}}},84937:(t,n,e)=>{"use strict";function r(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}e.d(n,{A:()=>r})},53788:(t,n,e)=>{"use strict";function r(t,n){n||(n=[]);var e,r=t?Math.min(n.length,t.length):0,i=n.slice();return function(o){for(e=0;e<r;++e)i[e]=t[e]*(1-o)+n[e]*o;return i}}function i(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}e.d(n,{A:()=>r,p:()=>i})},38571:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(4627);function i(t,n){var e,i={},o={};for(e in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)e in t?i[e]=(0,r.A)(t[e],n[e]):o[e]=n[e];return function(t){for(e in i)o[e]=i[e](t);return o}}},56300:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(4627);function i(t,n){void 0===n&&(n=t,t=r.A);for(var e=0,i=n.length-1,o=n[0],a=new Array(i<0?0:i);e<i;)a[e]=t(o,o=n[++e]);return function(t){var n=Math.max(0,Math.min(i-1,Math.floor(t*=i)));return a[n](t-n)}}},94919:(t,n,e)=>{"use strict";function r(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t(r/(n-1));return e}e.d(n,{A:()=>r})},23617:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>u,Ik:()=>s,uL:()=>f});var r=e(35169),i=e(48508),o=e(42184),a=e(56905);const u=function t(n){var e=(0,a.uN)(n);function i(t,n){var i=e((t=(0,r.Qh)(t)).r,(n=(0,r.Qh)(n)).r),o=e(t.g,n.g),u=e(t.b,n.b),c=(0,a.Ay)(t.opacity,n.opacity);return function(n){return t.r=i(n),t.g=o(n),t.b=u(n),t.opacity=c(n),t+""}}return i.gamma=t,i}(1);function c(t){return function(n){var e,i,o=n.length,a=new Array(o),u=new Array(o),c=new Array(o);for(e=0;e<o;++e)i=(0,r.Qh)(n[e]),a[e]=i.r||0,u[e]=i.g||0,c[e]=i.b||0;return a=t(a),u=t(u),c=t(c),i.opacity=1,function(t){return i.r=a(t),i.g=u(t),i.b=c(t),i+""}}}var s=c(i.A),f=c(o.A)},83158:(t,n,e)=>{"use strict";function r(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}e.d(n,{A:()=>r})},64533:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(84937),i=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,o=new RegExp(i.source,"g");function a(t,n){var e,a,u,c=i.lastIndex=o.lastIndex=0,s=-1,f=[],l=[];for(t+="",n+="";(e=i.exec(t))&&(a=o.exec(n));)(u=a.index)>c&&(u=n.slice(c,u),f[s]?f[s]+=u:f[++s]=u),(e=e[0])===(a=a[0])?f[s]?f[s]+=a:f[++s]=a:(f[++s]=null,l.push({i:s,x:(0,r.A)(e,a)})),c=o.lastIndex;return c<n.length&&(u=n.slice(c),f[s]?f[s]+=u:f[++s]=u),f.length<2?l[0]?function(t){return function(n){return t(n)+""}}(l[0].x):function(t){return function(){return t}}(n):(n=l.length,function(t){for(var e,r=0;r<n;++r)f[(e=l[r]).i]=e.x(t);return f.join("")})}},75128:(t,n,e)=>{"use strict";e.d(n,{A:()=>o,D:()=>i});var r=180/Math.PI,i={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function o(t,n,e,i,o,a){var u,c,s;return(u=Math.sqrt(t*t+n*n))&&(t/=u,n/=u),(s=t*e+n*i)&&(e-=t*s,i-=n*s),(c=Math.sqrt(e*e+i*i))&&(e/=c,i/=c,s/=c),t*i<n*e&&(t=-t,n=-n,s=-s,u=-u),{translateX:o,translateY:a,rotate:Math.atan2(n,t)*r,skewX:Math.atan(s)*r,scaleX:u,scaleY:c}}},76985:(t,n,e)=>{"use strict";e.d(n,{I:()=>u,T:()=>a});var r=e(84937),i=e(3934);function o(t,n,e,i){function o(t){return t.length?t.pop()+" ":""}return function(a,u){var c=[],s=[];return a=t(a),u=t(u),function(t,i,o,a,u,c){if(t!==o||i!==a){var s=u.push("translate(",null,n,null,e);c.push({i:s-4,x:(0,r.A)(t,o)},{i:s-2,x:(0,r.A)(i,a)})}else(o||a)&&u.push("translate("+o+n+a+e)}(a.translateX,a.translateY,u.translateX,u.translateY,c,s),function(t,n,e,a){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),a.push({i:e.push(o(e)+"rotate(",null,i)-2,x:(0,r.A)(t,n)})):n&&e.push(o(e)+"rotate("+n+i)}(a.rotate,u.rotate,c,s),function(t,n,e,a){t!==n?a.push({i:e.push(o(e)+"skewX(",null,i)-2,x:(0,r.A)(t,n)}):n&&e.push(o(e)+"skewX("+n+i)}(a.skewX,u.skewX,c,s),function(t,n,e,i,a,u){if(t!==e||n!==i){var c=a.push(o(a)+"scale(",null,",",null,")");u.push({i:c-4,x:(0,r.A)(t,e)},{i:c-2,x:(0,r.A)(n,i)})}else 1===e&&1===i||a.push(o(a)+"scale("+e+","+i+")")}(a.scaleX,a.scaleY,u.scaleX,u.scaleY,c,s),a=u=null,function(t){for(var n,e=-1,r=s.length;++e<r;)c[(n=s[e]).i]=n.x(t);return c.join("")}}}var a=o(i.P,"px, ","px)","deg)"),u=o(i.i,", ",")",")")},3934:(t,n,e)=>{"use strict";e.d(n,{P:()=>o,i:()=>a});var r,i=e(75128);function o(t){const n=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?i.D:(0,i.A)(n.a,n.b,n.c,n.d,n.e,n.f)}function a(t){return null==t?i.D:(r||(r=document.createElementNS("http://www.w3.org/2000/svg","g")),r.setAttribute("transform",t),(t=r.transform.baseVal.consolidate())?(t=t.matrix,(0,i.A)(t.a,t.b,t.c,t.d,t.e,t.f)):i.D)}},4627:(t,n,e)=>{"use strict";e.d(n,{A:()=>h});var r=e(35169),i=e(23617),o=e(96395),a=e(58072),u=e(84937),c=e(38571),s=e(64533),f=e(60824),l=e(53788);function h(t,n){var e,h=typeof n;return null==n||"boolean"===h?(0,f.A)(n):("number"===h?u.A:"string"===h?(e=(0,r.Ay)(n))?(n=e,i.Ay):s.A:n instanceof r.Ay?i.Ay:n instanceof Date?a.A:(0,l.p)(n)?l.A:Array.isArray(n)?o.$:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?c.A:u.A)(t,n)}},86327:(t,n,e)=>{"use strict";function r(t){return((t=Math.exp(t))+1/t)/2}e.d(n,{A:()=>i});const i=function t(n,e,i){function o(t,o){var a,u,c=t[0],s=t[1],f=t[2],l=o[0],h=o[1],d=o[2],p=l-c,g=h-s,y=p*p+g*g;if(y<1e-12)u=Math.log(d/f)/n,a=function(t){return[c+t*p,s+t*g,f*Math.exp(n*t*u)]};else{var v=Math.sqrt(y),_=(d*d-f*f+i*y)/(2*f*e*v),m=(d*d-f*f-i*y)/(2*d*e*v),b=Math.log(Math.sqrt(_*_+1)-_),A=Math.log(Math.sqrt(m*m+1)-m);u=(A-b)/n,a=function(t){var i,o=t*u,a=r(b),l=f/(e*v)*(a*(i=n*o+b,((i=Math.exp(2*i))-1)/(i+1))-function(t){return((t=Math.exp(t))-1/t)/2}(b));return[c+l*p,s+l*g,f*a/r(n*o+b)]}}return a.duration=1e3*u*n/Math.SQRT2,a}return o.rho=function(n){var e=Math.max(.001,+n),r=e*e;return t(e,r,r*r)},o}(Math.SQRT2,2,4)},56926:(t,n,e)=>{"use strict";e.d(n,{A:()=>r.A});var r=e(42967)},42967:(t,n,e)=>{"use strict";e.d(n,{A:()=>s});const r=Math.PI,i=2*r,o=1e-6,a=i-o;function u(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function c(){return new u}u.prototype=c.prototype={constructor:u,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,o){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,n,e,i,a){t=+t,n=+n,e=+e,i=+i,a=+a;var u=this._x1,c=this._y1,s=e-t,f=i-n,l=u-t,h=c-n,d=l*l+h*h;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(d>o)if(Math.abs(h*s-f*l)>o&&a){var p=e-u,g=i-c,y=s*s+f*f,v=p*p+g*g,_=Math.sqrt(y),m=Math.sqrt(d),b=a*Math.tan((r-Math.acos((y+d-v)/(2*_*m)))/2),A=b/m,x=b/_;Math.abs(A-1)>o&&(this._+="L"+(t+A*l)+","+(n+A*h)),this._+="A"+a+","+a+",0,0,"+ +(h*p>l*g)+","+(this._x1=t+x*s)+","+(this._y1=n+x*f)}else this._+="L"+(this._x1=t)+","+(this._y1=n)},arc:function(t,n,e,u,c,s){t=+t,n=+n,s=!!s;var f=(e=+e)*Math.cos(u),l=e*Math.sin(u),h=t+f,d=n+l,p=1^s,g=s?u-c:c-u;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+h+","+d:(Math.abs(this._x1-h)>o||Math.abs(this._y1-d)>o)&&(this._+="L"+h+","+d),e&&(g<0&&(g=g%i+i),g>a?this._+="A"+e+","+e+",0,1,"+p+","+(t-f)+","+(n-l)+"A"+e+","+e+",0,1,"+p+","+(this._x1=h)+","+(this._y1=d):g>o&&(this._+="A"+e+","+e+",0,"+ +(g>=r)+","+p+","+(this._x1=t+e*Math.cos(c))+","+(this._y1=n+e*Math.sin(c))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};const s=c},52537:(t,n,e)=>{"use strict";function r(t){const n=+this._x.call(null,t),e=+this._y.call(null,t);return i(this.cover(n,e),n,e,t)}function i(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,o,a,u,c,s,f,l,h,d=t._root,p={data:r},g=t._x0,y=t._y0,v=t._x1,_=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((s=n>=(o=(g+v)/2))?g=o:v=o,(f=e>=(a=(y+_)/2))?y=a:_=a,i=d,!(d=d[l=f<<1|s]))return i[l]=p,t;if(u=+t._x.call(null,d.data),c=+t._y.call(null,d.data),n===u&&e===c)return p.next=d,i?i[l]=p:t._root=p,t;do{i=i?i[l]=new Array(4):t._root=new Array(4),(s=n>=(o=(g+v)/2))?g=o:v=o,(f=e>=(a=(y+_)/2))?y=a:_=a}while((l=f<<1|s)==(h=(c>=a)<<1|u>=o));return i[h]=d,i[l]=p,t}function o(t){var n,e,r,o,a=t.length,u=new Array(a),c=new Array(a),s=1/0,f=1/0,l=-1/0,h=-1/0;for(e=0;e<a;++e)isNaN(r=+this._x.call(null,n=t[e]))||isNaN(o=+this._y.call(null,n))||(u[e]=r,c[e]=o,r<s&&(s=r),r>l&&(l=r),o<f&&(f=o),o>h&&(h=o));if(s>l||f>h)return this;for(this.cover(s,f).cover(l,h),e=0;e<a;++e)i(this,u[e],c[e],t[e]);return this}e.d(n,{A:()=>r,R:()=>o})},78189:(t,n,e)=>{"use strict";function r(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,o=(r=Math.floor(n))+1;else{for(var a,u,c=i-e||1,s=this._root;e>t||t>=i||r>n||n>=o;)switch(u=(n<r)<<1|t<e,(a=new Array(4))[u]=s,s=a,c*=2,u){case 0:i=e+c,o=r+c;break;case 1:e=i-c,o=r+c;break;case 2:i=e+c,r=o-c;break;case 3:e=i-c,r=o-c}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._y0=r,this._x1=i,this._y1=o,this}e.d(n,{A:()=>r})},7168:(t,n,e)=>{"use strict";function r(){var t=[];return this.visit((function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)})),t}e.d(n,{A:()=>r})},80024:(t,n,e)=>{"use strict";function r(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}e.d(n,{A:()=>r})},4551:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(99083);function i(t,n,e){var i,o,a,u,c,s,f,l=this._x0,h=this._y0,d=this._x1,p=this._y1,g=[],y=this._root;for(y&&g.push(new r.A(y,l,h,d,p)),null==e?e=1/0:(l=t-e,h=n-e,d=t+e,p=n+e,e*=e);s=g.pop();)if(!(!(y=s.node)||(o=s.x0)>d||(a=s.y0)>p||(u=s.x1)<l||(c=s.y1)<h))if(y.length){var v=(o+u)/2,_=(a+c)/2;g.push(new r.A(y[3],v,_,u,c),new r.A(y[2],o,_,v,c),new r.A(y[1],v,a,u,_),new r.A(y[0],o,a,v,_)),(f=(n>=_)<<1|t>=v)&&(s=g[g.length-1],g[g.length-1]=g[g.length-1-f],g[g.length-1-f]=s)}else{var m=t-+this._x.call(null,y.data),b=n-+this._y.call(null,y.data),A=m*m+b*b;if(A<e){var x=Math.sqrt(e=A);l=t-x,h=n-x,d=t+x,p=n+x,i=y.data}}return i}},46050:(t,n,e)=>{"use strict";e.d(n,{M:()=>r.A});var r=e(79283)},99083:(t,n,e)=>{"use strict";function r(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i}e.d(n,{A:()=>r})},79283:(t,n,e)=>{"use strict";e.d(n,{A:()=>g});var r=e(52537),i=e(78189),o=e(7168),a=e(80024),u=e(4551),c=e(4020),s=e(68116),f=e(14429),l=e(6801),h=e(94931),d=e(66242),p=e(34129);function g(t,n,e){var r=new y(null==n?d.U:n,null==e?p.$:e,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function y(t,n,e,r,i,o){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function v(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var _=g.prototype=y.prototype;_.copy=function(){var t,n,e=new y(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return e;if(!r.length)return e._root=v(r),e;for(t=[{source:r,target:e._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(n=r.source[i])&&(n.length?t.push({source:n,target:r.target[i]=new Array(4)}):r.target[i]=v(n));return e},_.add=r.A,_.addAll=r.R,_.cover=i.A,_.data=o.A,_.extent=a.A,_.find=u.A,_.remove=c.A,_.removeAll=c.C,_.root=s.A,_.size=f.A,_.visit=l.A,_.visitAfter=h.A,_.x=d.A,_.y=p.A},4020:(t,n,e)=>{"use strict";function r(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var n,e,r,i,o,a,u,c,s,f,l,h,d=this._root,p=this._x0,g=this._y0,y=this._x1,v=this._y1;if(!d)return this;if(d.length)for(;;){if((s=o>=(u=(p+y)/2))?p=u:y=u,(f=a>=(c=(g+v)/2))?g=c:v=c,n=d,!(d=d[l=f<<1|s]))return this;if(!d.length)break;(n[l+1&3]||n[l+2&3]||n[l+3&3])&&(e=n,h=l)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):n?(i?n[l]=i:delete n[l],(d=n[0]||n[1]||n[2]||n[3])&&d===(n[3]||n[2]||n[1]||n[0])&&!d.length&&(e?e[h]=d:this._root=d),this):(this._root=i,this)}function i(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this}e.d(n,{A:()=>r,C:()=>i})},68116:(t,n,e)=>{"use strict";function r(){return this._root}e.d(n,{A:()=>r})},14429:(t,n,e)=>{"use strict";function r(){var t=0;return this.visit((function(n){if(!n.length)do{++t}while(n=n.next)})),t}e.d(n,{A:()=>r})},6801:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(99083);function i(t){var n,e,i,o,a,u,c=[],s=this._root;for(s&&c.push(new r.A(s,this._x0,this._y0,this._x1,this._y1));n=c.pop();)if(!t(s=n.node,i=n.x0,o=n.y0,a=n.x1,u=n.y1)&&s.length){var f=(i+a)/2,l=(o+u)/2;(e=s[3])&&c.push(new r.A(e,f,l,a,u)),(e=s[2])&&c.push(new r.A(e,i,l,f,u)),(e=s[1])&&c.push(new r.A(e,f,o,a,l)),(e=s[0])&&c.push(new r.A(e,i,o,f,l))}return this}},94931:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(99083);function i(t){var n,e=[],i=[];for(this._root&&e.push(new r.A(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var o=n.node;if(o.length){var a,u=n.x0,c=n.y0,s=n.x1,f=n.y1,l=(u+s)/2,h=(c+f)/2;(a=o[0])&&e.push(new r.A(a,u,c,l,h)),(a=o[1])&&e.push(new r.A(a,l,c,s,h)),(a=o[2])&&e.push(new r.A(a,u,h,l,f)),(a=o[3])&&e.push(new r.A(a,l,h,s,f))}i.push(n)}for(;n=i.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this}},66242:(t,n,e)=>{"use strict";function r(t){return t[0]}function i(t){return arguments.length?(this._x=t,this):this._x}e.d(n,{A:()=>i,U:()=>r})},34129:(t,n,e)=>{"use strict";function r(t){return t[1]}function i(t){return arguments.length?(this._y=t,this):this._y}e.d(n,{$:()=>r,A:()=>i})},60280:(t,n,e)=>{"use strict";e.d(n,{A:()=>h});var r=e(42967),i=e(99998),o=e(80156);function a(t){return t.innerRadius}function u(t){return t.outerRadius}function c(t){return t.startAngle}function s(t){return t.endAngle}function f(t){return t&&t.padAngle}function l(t,n,e,r,i,a,u){var c=t-e,s=n-r,f=(u?a:-a)/(0,o.RZ)(c*c+s*s),l=f*s,h=-f*c,d=t+l,p=n+h,g=e+l,y=r+h,v=(d+g)/2,_=(p+y)/2,m=g-d,b=y-p,A=m*m+b*b,x=i-a,w=d*y-g*p,M=(b<0?-1:1)*(0,o.RZ)((0,o.T9)(0,x*x*A-w*w)),T=(w*b-m*M)/A,N=(-w*m-b*M)/A,S=(w*b+m*M)/A,k=(-w*m+b*M)/A,E=T-v,C=N-_,D=S-v,F=k-_;return E*E+C*C>D*D+F*F&&(T=S,N=k),{cx:T,cy:N,x01:-l,y01:-h,x11:T*(i/x-1),y11:N*(i/x-1)}}function h(){var t=a,n=u,e=(0,i.A)(0),h=null,d=c,p=s,g=f,y=null;function v(){var i,a,u=+t.apply(this,arguments),c=+n.apply(this,arguments),s=d.apply(this,arguments)-o.TW,f=p.apply(this,arguments)-o.TW,v=(0,o.tn)(f-s),_=f>s;if(y||(y=i=(0,r.A)()),c<u&&(a=c,c=u,u=a),c>o.Ni)if(v>o.FA-o.Ni)y.moveTo(c*(0,o.gn)(s),c*(0,o.F8)(s)),y.arc(0,0,c,s,f,!_),u>o.Ni&&(y.moveTo(u*(0,o.gn)(f),u*(0,o.F8)(f)),y.arc(0,0,u,f,s,_));else{var m,b,A=s,x=f,w=s,M=f,T=v,N=v,S=g.apply(this,arguments)/2,k=S>o.Ni&&(h?+h.apply(this,arguments):(0,o.RZ)(u*u+c*c)),E=(0,o.jk)((0,o.tn)(c-u)/2,+e.apply(this,arguments)),C=E,D=E;if(k>o.Ni){var F=(0,o.qR)(k/u*(0,o.F8)(S)),P=(0,o.qR)(k/c*(0,o.F8)(S));(T-=2*F)>o.Ni?(w+=F*=_?1:-1,M-=F):(T=0,w=M=(s+f)/2),(N-=2*P)>o.Ni?(A+=P*=_?1:-1,x-=P):(N=0,A=x=(s+f)/2)}var z=c*(0,o.gn)(A),I=c*(0,o.F8)(A),U=u*(0,o.gn)(M),R=u*(0,o.F8)(M);if(E>o.Ni){var j,L=c*(0,o.gn)(x),O=c*(0,o.F8)(x),Y=u*(0,o.gn)(w),q=u*(0,o.F8)(w);if(v<o.pi&&(j=function(t,n,e,r,i,a,u,c){var s=e-t,f=r-n,l=u-i,h=c-a,d=h*s-l*f;if(!(d*d<o.Ni))return[t+(d=(l*(n-a)-h*(t-i))/d)*s,n+d*f]}(z,I,Y,q,L,O,U,R))){var B=z-j[0],G=I-j[1],H=L-j[0],Z=O-j[1],W=1/(0,o.F8)((0,o.HQ)((B*H+G*Z)/((0,o.RZ)(B*B+G*G)*(0,o.RZ)(H*H+Z*Z)))/2),V=(0,o.RZ)(j[0]*j[0]+j[1]*j[1]);C=(0,o.jk)(E,(u-V)/(W-1)),D=(0,o.jk)(E,(c-V)/(W+1))}}N>o.Ni?D>o.Ni?(m=l(Y,q,z,I,c,D,_),b=l(L,O,U,R,c,D,_),y.moveTo(m.cx+m.x01,m.cy+m.y01),D<E?y.arc(m.cx,m.cy,D,(0,o.FP)(m.y01,m.x01),(0,o.FP)(b.y01,b.x01),!_):(y.arc(m.cx,m.cy,D,(0,o.FP)(m.y01,m.x01),(0,o.FP)(m.y11,m.x11),!_),y.arc(0,0,c,(0,o.FP)(m.cy+m.y11,m.cx+m.x11),(0,o.FP)(b.cy+b.y11,b.cx+b.x11),!_),y.arc(b.cx,b.cy,D,(0,o.FP)(b.y11,b.x11),(0,o.FP)(b.y01,b.x01),!_))):(y.moveTo(z,I),y.arc(0,0,c,A,x,!_)):y.moveTo(z,I),u>o.Ni&&T>o.Ni?C>o.Ni?(m=l(U,R,L,O,u,-C,_),b=l(z,I,Y,q,u,-C,_),y.lineTo(m.cx+m.x01,m.cy+m.y01),C<E?y.arc(m.cx,m.cy,C,(0,o.FP)(m.y01,m.x01),(0,o.FP)(b.y01,b.x01),!_):(y.arc(m.cx,m.cy,C,(0,o.FP)(m.y01,m.x01),(0,o.FP)(m.y11,m.x11),!_),y.arc(0,0,u,(0,o.FP)(m.cy+m.y11,m.cx+m.x11),(0,o.FP)(b.cy+b.y11,b.cx+b.x11),_),y.arc(b.cx,b.cy,C,(0,o.FP)(b.y11,b.x11),(0,o.FP)(b.y01,b.x01),!_))):y.arc(0,0,u,M,w,_):y.lineTo(U,R)}else y.moveTo(0,0);if(y.closePath(),i)return y=null,i+""||null}return v.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+d.apply(this,arguments)+ +p.apply(this,arguments))/2-o.pi/2;return[(0,o.gn)(r)*e,(0,o.F8)(r)*e]},v.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:(0,i.A)(+n),v):t},v.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:(0,i.A)(+t),v):n},v.cornerRadius=function(t){return arguments.length?(e="function"==typeof t?t:(0,i.A)(+t),v):e},v.padRadius=function(t){return arguments.length?(h=null==t?null:"function"==typeof t?t:(0,i.A)(+t),v):h},v.startAngle=function(t){return arguments.length?(d="function"==typeof t?t:(0,i.A)(+t),v):d},v.endAngle=function(t){return arguments.length?(p="function"==typeof t?t:(0,i.A)(+t),v):p},v.padAngle=function(t){return arguments.length?(g="function"==typeof t?t:(0,i.A)(+t),v):g},v.context=function(t){return arguments.length?(y=null==t?null:t,v):y},v}},83827:(t,n,e)=>{"use strict";e.d(n,{A:()=>s});var r=e(42967),i=e(2489),o=e(99998),a=e(14099),u=e(34172),c=e(91594);function s(t,n,e){var s=null,f=(0,o.A)(!0),l=null,h=a.A,d=null;function p(o){var a,u,c,p,g,y=(o=(0,i.A)(o)).length,v=!1,_=new Array(y),m=new Array(y);for(null==l&&(d=h(g=(0,r.A)())),a=0;a<=y;++a){if(!(a<y&&f(p=o[a],a,o))===v)if(v=!v)u=a,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),c=a-1;c>=u;--c)d.point(_[c],m[c]);d.lineEnd(),d.areaEnd()}v&&(_[a]=+t(p,a,o),m[a]=+n(p,a,o),d.point(s?+s(p,a,o):_[a],e?+e(p,a,o):m[a]))}if(g)return d=null,g+""||null}function g(){return(0,u.A)().defined(f).curve(h).context(l)}return t="function"==typeof t?t:void 0===t?c.x:(0,o.A)(+t),n="function"==typeof n?n:void 0===n?(0,o.A)(0):(0,o.A)(+n),e="function"==typeof e?e:void 0===e?c.y:(0,o.A)(+e),p.x=function(n){return arguments.length?(t="function"==typeof n?n:(0,o.A)(+n),s=null,p):t},p.x0=function(n){return arguments.length?(t="function"==typeof n?n:(0,o.A)(+n),p):t},p.x1=function(t){return arguments.length?(s=null==t?null:"function"==typeof t?t:(0,o.A)(+t),p):s},p.y=function(t){return arguments.length?(n="function"==typeof t?t:(0,o.A)(+t),e=null,p):n},p.y0=function(t){return arguments.length?(n="function"==typeof t?t:(0,o.A)(+t),p):n},p.y1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:(0,o.A)(+t),p):e},p.lineX0=p.lineY0=function(){return g().x(t).y(n)},p.lineY1=function(){return g().x(t).y(e)},p.lineX1=function(){return g().x(s).y(n)},p.defined=function(t){return arguments.length?(f="function"==typeof t?t:(0,o.A)(!!t),p):f},p.curve=function(t){return arguments.length?(h=t,null!=l&&(d=h(l)),p):h},p.context=function(t){return arguments.length?(null==t?l=d=null:d=h(l=t),p):l},p}},45804:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(57197),i=e(83827),o=e(31259);function a(){var t=(0,i.A)().curve(r.Q),n=t.curve,e=t.lineX0,a=t.lineX1,u=t.lineY0,c=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return(0,o.y)(e())},delete t.lineX0,t.lineEndAngle=function(){return(0,o.y)(a())},delete t.lineX1,t.lineInnerRadius=function(){return(0,o.y)(u())},delete t.lineY0,t.lineOuterRadius=function(){return(0,o.y)(c())},delete t.lineY1,t.curve=function(t){return arguments.length?n((0,r.A)(t)):n()._curve},t}},2489:(t,n,e)=>{"use strict";e.d(n,{A:()=>i,d:()=>r});var r=Array.prototype.slice;function i(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}},99998:(t,n,e)=>{"use strict";function r(t){return function(){return t}}e.d(n,{A:()=>r})},7970:(t,n,e)=>{"use strict";function r(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function i(t){this._context=t}function o(t){return new i(t)}e.d(n,{Ay:()=>o,xO:()=>i,zx:()=>r}),i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:r(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:r(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}}},38210:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(88726),i=e(7970);function o(t){this._context=t}function a(t){return new o(t)}o.prototype={areaStart:r.A,areaEnd:r.A,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:(0,i.zx)(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}}},73758:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(7970);function i(t){this._context=t}function o(t){return new i(t)}i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(e,i):this._context.moveTo(e,i);break;case 3:this._point=4;default:(0,r.zx)(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}}},24602:(t,n,e)=>{"use strict";e.d(n,{dJ:()=>a,kl:()=>u,oQ:()=>c});var r=e(13021);class i{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n)}this._x0=t,this._y0=n}}class o{constructor(t){this._context=t}lineStart(){this._point=0}lineEnd(){}point(t,n){if(t=+t,n=+n,0==this._point++)this._x0=t,this._y0=n;else{const e=(0,r.A)(this._x0,this._y0),i=(0,r.A)(this._x0,this._y0=(this._y0+n)/2),o=(0,r.A)(t,this._y0),a=(0,r.A)(t,n);this._context.moveTo(...e),this._context.bezierCurveTo(...i,...o,...a)}}}function a(t){return new i(t,!0)}function u(t){return new i(t,!1)}function c(t){return new o(t)}},11930:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(7970);function i(t,n){this._basis=new r.xO(t),this._beta=n}i.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0)for(var r,i=t[0],o=n[0],a=t[e]-i,u=n[e]-o,c=-1;++c<=e;)r=c/e,this._basis.point(this._beta*t[c]+(1-this._beta)*(i+r*a),this._beta*n[c]+(1-this._beta)*(o+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};const o=function t(n){function e(t){return 1===n?new r.xO(t):new i(t,n)}return e.beta=function(n){return t(+n)},e}(.85)},5158:(t,n,e)=>{"use strict";function r(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function i(t,n){this._context=t,this._k=(1-n)/6}e.d(n,{Ay:()=>o,vP:()=>i,zx:()=>r}),i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:r(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:r(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const o=function t(n){function e(t){return new i(t,n)}return e.tension=function(n){return t(+n)},e}(0)},84662:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,L:()=>o});var r=e(88726),i=e(5158);function o(t,n){this._context=t,this._k=(1-n)/6}o.prototype={areaStart:r.A,areaEnd:r.A,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:(0,i.zx)(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const a=function t(n){function e(t){return new o(t,n)}return e.tension=function(n){return t(+n)},e}(0)},64634:(t,n,e)=>{"use strict";e.d(n,{A:()=>o,H:()=>i});var r=e(5158);function i(t,n){this._context=t,this._k=(1-n)/6}i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:(0,r.zx)(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const o=function t(n){function e(t){return new i(t,n)}return e.tension=function(n){return t(+n)},e}(0)},90018:(t,n,e)=>{"use strict";e.d(n,{A:()=>u,z:()=>o});var r=e(80156),i=e(5158);function o(t,n,e){var i=t._x1,o=t._y1,a=t._x2,u=t._y2;if(t._l01_a>r.Ni){var c=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,s=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*c-t._x0*t._l12_2a+t._x2*t._l01_2a)/s,o=(o*c-t._y0*t._l12_2a+t._y2*t._l01_2a)/s}if(t._l23_a>r.Ni){var f=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*f+t._x1*t._l23_2a-n*t._l12_2a)/l,u=(u*f+t._y1*t._l23_2a-e*t._l12_2a)/l}t._context.bezierCurveTo(i,o,a,u,t._x2,t._y2)}function a(t,n){this._context=t,this._alpha=n}a.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:o(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const u=function t(n){function e(t){return n?new a(t,n):new i.vP(t,0)}return e.alpha=function(n){return t(+n)},e}(.5)},41890:(t,n,e)=>{"use strict";e.d(n,{A:()=>u});var r=e(84662),i=e(88726),o=e(90018);function a(t,n){this._context=t,this._alpha=n}a.prototype={areaStart:i.A,areaEnd:i.A,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:(0,o.z)(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const u=function t(n){function e(t){return n?new a(t,n):new r.L(t,0)}return e.alpha=function(n){return t(+n)},e}(.5)},24990:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(64634),i=e(90018);function o(t,n){this._context=t,this._alpha=n}o.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:(0,i.z)(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const a=function t(n){function e(t){return n?new o(t,n):new r.H(t,0)}return e.alpha=function(n){return t(+n)},e}(.5)},14099:(t,n,e)=>{"use strict";function r(t){this._context=t}function i(t){return new r(t)}e.d(n,{A:()=>i}),r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}}},67411:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(88726);function i(t){this._context=t}function o(t){return new i(t)}i.prototype={areaStart:r.A,areaEnd:r.A,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}}},36345:(t,n,e)=>{"use strict";function r(t){return t<0?-1:1}function i(t,n,e){var i=t._x1-t._x0,o=n-t._x1,a=(t._y1-t._y0)/(i||o<0&&-0),u=(e-t._y1)/(o||i<0&&-0),c=(a*o+u*i)/(i+o);return(r(a)+r(u))*Math.min(Math.abs(a),Math.abs(u),.5*Math.abs(c))||0}function o(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function a(t,n,e){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,u=(o-r)/3;t._context.bezierCurveTo(r+u,i+u*n,o-u,a-u*e,o,a)}function u(t){this._context=t}function c(t){this._context=new s(t)}function s(t){this._context=t}function f(t){return new u(t)}function l(t){return new c(t)}e.d(n,{G:()=>f,N:()=>l}),u.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:a(this,this._t0,o(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(n=+n,(t=+t)!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,a(this,o(this,e=i(this,t,n)),e);break;default:a(this,this._t0,e=i(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(c.prototype=Object.create(u.prototype)).point=function(t,n){u.prototype.point.call(this,n,t)},s.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,o){this._context.bezierCurveTo(n,t,r,e,o,i)}}},57861:(t,n,e)=>{"use strict";function r(t){this._context=t}function i(t){var n,e,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],n=1;n<r-1;++n)i[n]=1,o[n]=4,a[n]=4*t[n]+2*t[n+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],n=1;n<r;++n)e=i[n]/o[n-1],o[n]-=e,a[n]-=e*a[n-1];for(i[r-1]=a[r-1]/o[r-1],n=r-2;n>=0;--n)i[n]=(a[n]-i[n+1])/o[n];for(o[r-1]=(t[r]+i[r-1])/2,n=0;n<r-1;++n)o[n]=2*t[n+1]-i[n+1];return[i,o]}function o(t){return new r(t)}e.d(n,{A:()=>o}),r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,e=t.length;if(e)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),2===e)this._context.lineTo(t[1],n[1]);else for(var r=i(t),o=i(n),a=0,u=1;u<e;++a,++u)this._context.bezierCurveTo(r[0][a],o[0][a],r[1][a],o[1][a],t[u],n[u]);(this._line||0!==this._line&&1===e)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}}},57197:(t,n,e)=>{"use strict";e.d(n,{A:()=>o,Q:()=>r});var r=o(e(14099).A);function i(t){this._curve=t}function o(t){function n(n){return new i(t(n))}return n._curve=t,n}i.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}}},13408:(t,n,e)=>{"use strict";function r(t,n){this._context=t,this._t=n}function i(t){return new r(t,.5)}function o(t){return new r(t,0)}function a(t){return new r(t,1)}e.d(n,{Ay:()=>i,Ko:()=>o,Ps:()=>a}),r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,n)}}this._x=t,this._y=n}}},71432:(t,n,e)=>{"use strict";function r(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}e.d(n,{A:()=>r})},29496:(t,n,e)=>{"use strict";function r(t){return t}e.d(n,{A:()=>r})},25440:(t,n,e)=>{"use strict";e.d(n,{$Z:()=>h.A,$k:()=>K.A,AM:()=>l.AM,BI:()=>V.A,BV:()=>p.A,Bj:()=>M.A,DY:()=>W.A,GZ:()=>O.Ay,HR:()=>l.Ay,IA:()=>N.A,IJ:()=>w.A,Iq:()=>l.Lk,Ir:()=>D.A,JL:()=>r.A,L1:()=>x.A,Lk:()=>l.Lk,Lx:()=>U.A,N8:()=>b.A,OE:()=>E.A,PG:()=>k.kl,Ps:()=>u.A,Q7:()=>P.A,Re:()=>Z.A,UP:()=>O.Ps,Wc:()=>i.A,Wi:()=>k.dJ,Xf:()=>L.A,Y$:()=>c.A,YW:()=>G.A,Yu:()=>T.A,ZK:()=>A.A,b:()=>s.A,cV:()=>z.A,dy:()=>O.Ko,e7:()=>f.e7,e9:()=>H.A,hK:()=>d.A,hh:()=>u.A,j:()=>g.A,jh:()=>v.A,lB:()=>B.A,lU:()=>R.A,n8:()=>o.A,nV:()=>j.G,nf:()=>f.nf,oD:()=>I.A,ol:()=>C.A,pq:()=>f.pq,qI:()=>q.A,qr:()=>S.Ay,rL:()=>a.A,rM:()=>Q.A,sL:()=>m.A,t$:()=>Y.A,ux:()=>j.N,ve:()=>$.A,vu:()=>f.vu,xU:()=>X.A,y6:()=>c.A,y8:()=>F.Ay,yD:()=>_.A,zy:()=>y.A});var r=e(60280),i=e(83827),o=e(34172),a=e(1318),u=e(45804),c=e(31259),s=e(13021),f=e(89506),l=e(61410),h=e(96417),d=e(58445),p=e(97333),g=e(78597),y=e(17735),v=e(75425),_=e(79210),m=e(88682),b=e(60597),A=e(60421),x=e(91719),w=e(95550),M=e(28465),T=e(38210),N=e(73758),S=e(7970),k=e(24602),E=e(11930),C=e(84662),D=e(64634),F=e(5158),P=e(41890),z=e(24990),I=e(90018),U=e(67411),R=e(14099),j=e(36345),L=e(57861),O=e(13408),Y=e(95804),q=e(99436),B=e(83301),G=e(48514),H=e(41550),Z=e(89393),W=e(44213),V=e(37501),$=e(4733),K=e(48103),Q=e(82813),X=e(61425)},34172:(t,n,e)=>{"use strict";e.d(n,{A:()=>c});var r=e(42967),i=e(2489),o=e(99998),a=e(14099),u=e(91594);function c(t,n){var e=(0,o.A)(!0),c=null,s=a.A,f=null;function l(o){var a,u,l,h=(o=(0,i.A)(o)).length,d=!1;for(null==c&&(f=s(l=(0,r.A)())),a=0;a<=h;++a)!(a<h&&e(u=o[a],a,o))===d&&((d=!d)?f.lineStart():f.lineEnd()),d&&f.point(+t(u,a,o),+n(u,a,o));if(l)return f=null,l+""||null}return t="function"==typeof t?t:void 0===t?u.x:(0,o.A)(t),n="function"==typeof n?n:void 0===n?u.y:(0,o.A)(n),l.x=function(n){return arguments.length?(t="function"==typeof n?n:(0,o.A)(+n),l):t},l.y=function(t){return arguments.length?(n="function"==typeof t?t:(0,o.A)(+t),l):n},l.defined=function(t){return arguments.length?(e="function"==typeof t?t:(0,o.A)(!!t),l):e},l.curve=function(t){return arguments.length?(s=t,null!=c&&(f=s(c)),l):s},l.context=function(t){return arguments.length?(null==t?c=f=null:f=s(c=t),l):c},l}},31259:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,y:()=>o});var r=e(57197),i=e(34172);function o(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?n((0,r.A)(t)):n()._curve},t}function a(){return o((0,i.A)().curve(r.Q))}},89506:(t,n,e)=>{"use strict";e.d(n,{e7:()=>d,nf:()=>f,pq:()=>l,vu:()=>h});var r=e(42967),i=e(2489),o=e(99998),a=e(24602),u=e(91594);function c(t){return t.source}function s(t){return t.target}function f(t){let n=c,e=s,a=u.x,f=u.y,l=null,h=null;function d(){let o;const u=i.d.call(arguments),c=n.apply(this,u),s=e.apply(this,u);if(null==l&&(h=t(o=(0,r.A)())),h.lineStart(),u[0]=c,h.point(+a.apply(this,u),+f.apply(this,u)),u[0]=s,h.point(+a.apply(this,u),+f.apply(this,u)),h.lineEnd(),o)return h=null,o+""||null}return d.source=function(t){return arguments.length?(n=t,d):n},d.target=function(t){return arguments.length?(e=t,d):e},d.x=function(t){return arguments.length?(a="function"==typeof t?t:(0,o.A)(+t),d):a},d.y=function(t){return arguments.length?(f="function"==typeof t?t:(0,o.A)(+t),d):f},d.context=function(n){return arguments.length?(null==n?l=h=null:h=t(l=n),d):l},d}function l(){return f(a.dJ)}function h(){return f(a.kl)}function d(){const t=f(a.oQ);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}},80156:(t,n,e)=>{"use strict";e.d(n,{F8:()=>c,FA:()=>d,FP:()=>i,HQ:()=>p,Ni:()=>f,RZ:()=>s,T9:()=>a,TW:()=>h,gn:()=>o,jk:()=>u,pi:()=>l,qR:()=>g,tn:()=>r});const r=Math.abs,i=Math.atan2,o=Math.cos,a=Math.max,u=Math.min,c=Math.sin,s=Math.sqrt,f=1e-12,l=Math.PI,h=l/2,d=2*l;function p(t){return t>1?0:t<-1?l:Math.acos(t)}function g(t){return t>=1?h:t<=-1?-h:Math.asin(t)}},88726:(t,n,e)=>{"use strict";function r(){}e.d(n,{A:()=>r})},83301:(t,n,e)=>{"use strict";function r(t,n){if((u=t.length)>0)for(var e,r,i,o,a,u,c=0,s=t[n[0]].length;c<s;++c)for(o=a=0,e=0;e<u;++e)(i=(r=t[n[e]][c])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):(r[0]=0,r[1]=i)}e.d(n,{A:()=>r})},99436:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(48514);function i(t,n){if((i=t.length)>0){for(var e,i,o,a=0,u=t[0].length;a<u;++a){for(o=e=0;e<i;++e)o+=t[e][a][1]||0;if(o)for(e=0;e<i;++e)t[e][a][1]/=o}(0,r.A)(t,n)}}},48514:(t,n,e)=>{"use strict";function r(t,n){if((i=t.length)>1)for(var e,r,i,o=1,a=t[n[0]],u=a.length;o<i;++o)for(r=a,a=t[n[o]],e=0;e<u;++e)a[e][1]+=a[e][0]=isNaN(r[e][1])?r[e][0]:r[e][1]}e.d(n,{A:()=>r})},41550:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(48514);function i(t,n){if((e=t.length)>0){for(var e,i=0,o=t[n[0]],a=o.length;i<a;++i){for(var u=0,c=0;u<e;++u)c+=t[u][i][1]||0;o[i][1]+=o[i][0]=-c/2}(0,r.A)(t,n)}}},89393:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(48514);function i(t,n){if((o=t.length)>0&&(i=(e=t[n[0]]).length)>0){for(var e,i,o,a=0,u=1;u<i;++u){for(var c=0,s=0,f=0;c<o;++c){for(var l=t[n[c]],h=l[u][1]||0,d=(h-(l[u-1][1]||0))/2,p=0;p<c;++p){var g=t[n[p]];d+=(g[u][1]||0)-(g[u-1][1]||0)}s+=h,f+=d*h}e[u-1][1]+=e[u-1][0]=a,s&&(a-=f/s)}e[u-1][1]+=e[u-1][0]=a,(0,r.A)(t,n)}}},44213:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(82813);function i(t){var n=t.map(o);return(0,r.A)(t).sort((function(t,e){return n[t]-n[e]}))}function o(t){for(var n,e=-1,r=0,i=t.length,o=-1/0;++e<i;)(n=+t[e][1])>o&&(o=n,r=e);return r}},37501:(t,n,e)=>{"use strict";e.d(n,{A:()=>i,c:()=>o});var r=e(82813);function i(t){var n=t.map(o);return(0,r.A)(t).sort((function(t,e){return n[t]-n[e]}))}function o(t){for(var n,e=0,r=-1,i=t.length;++r<i;)(n=+t[r][1])&&(e+=n);return e}},4733:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(37501);function i(t){return(0,r.A)(t).reverse()}},48103:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(44213),i=e(37501);function o(t){var n,e,o=t.length,a=t.map(i.c),u=(0,r.A)(t),c=0,s=0,f=[],l=[];for(n=0;n<o;++n)e=u[n],c<s?(c+=a[e],f.push(e)):(s+=a[e],l.push(e));return l.reverse().concat(f)}},82813:(t,n,e)=>{"use strict";function r(t){for(var n=t.length,e=new Array(n);--n>=0;)e[n]=n;return e}e.d(n,{A:()=>r})},61425:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(82813);function i(t){return(0,r.A)(t).reverse()}},1318:(t,n,e)=>{"use strict";e.d(n,{A:()=>c});var r=e(2489),i=e(99998),o=e(71432),a=e(29496),u=e(80156);function c(){var t=a.A,n=o.A,e=null,c=(0,i.A)(0),s=(0,i.A)(u.FA),f=(0,i.A)(0);function l(i){var o,a,l,h,d,p=(i=(0,r.A)(i)).length,g=0,y=new Array(p),v=new Array(p),_=+c.apply(this,arguments),m=Math.min(u.FA,Math.max(-u.FA,s.apply(this,arguments)-_)),b=Math.min(Math.abs(m)/p,f.apply(this,arguments)),A=b*(m<0?-1:1);for(o=0;o<p;++o)(d=v[y[o]=o]=+t(i[o],o,i))>0&&(g+=d);for(null!=n?y.sort((function(t,e){return n(v[t],v[e])})):null!=e&&y.sort((function(t,n){return e(i[t],i[n])})),o=0,l=g?(m-p*A)/g:0;o<p;++o,_=h)a=y[o],h=_+((d=v[a])>0?d*l:0)+A,v[a]={data:i[a],index:o,value:d,startAngle:_,endAngle:h,padAngle:b};return v}return l.value=function(n){return arguments.length?(t="function"==typeof n?n:(0,i.A)(+n),l):t},l.sortValues=function(t){return arguments.length?(n=t,e=null,l):n},l.sort=function(t){return arguments.length?(e=t,n=null,l):e},l.startAngle=function(t){return arguments.length?(c="function"==typeof t?t:(0,i.A)(+t),l):c},l.endAngle=function(t){return arguments.length?(s="function"==typeof t?t:(0,i.A)(+t),l):s},l.padAngle=function(t){return arguments.length?(f="function"==typeof t?t:(0,i.A)(+t),l):f},l}},91594:(t,n,e)=>{"use strict";function r(t){return t[0]}function i(t){return t[1]}e.d(n,{x:()=>r,y:()=>i})},13021:(t,n,e)=>{"use strict";function r(t,n){return[(n=+n)*Math.cos(t-=Math.PI/2),n*Math.sin(t)]}e.d(n,{A:()=>r})},95804:(t,n,e)=>{"use strict";e.d(n,{A:()=>s});var r=e(2489),i=e(99998),o=e(48514),a=e(82813);function u(t,n){return t[n]}function c(t){const n=[];return n.key=t,n}function s(){var t=(0,i.A)([]),n=a.A,e=o.A,s=u;function f(i){var o,a,u=Array.from(t.apply(this,arguments),c),f=u.length,l=-1;for(const t of i)for(o=0,++l;o<f;++o)(u[o][l]=[0,+s(t,u[o].key,l,i)]).data=t;for(o=0,a=(0,r.A)(n(u));o<f;++o)u[a[o]].index=o;return e(u,a),u}return f.keys=function(n){return arguments.length?(t="function"==typeof n?n:(0,i.A)(Array.from(n)),f):t},f.value=function(t){return arguments.length?(s="function"==typeof t?t:(0,i.A)(+t),f):s},f.order=function(t){return arguments.length?(n=null==t?a.A:"function"==typeof t?t:(0,i.A)(Array.from(t)),f):n},f.offset=function(t){return arguments.length?(e=null==t?o.A:t,f):e},f}},61410:(t,n,e)=>{"use strict";e.d(n,{AM:()=>m,Ay:()=>b,Lk:()=>_});var r=e(42967),i=e(99998),o=e(96417),a=e(58445),u=e(97333),c=e(78597),s=e(17735),f=e(75425),l=e(79210),h=e(88682),d=e(60597),p=e(60421),g=e(91719),y=e(95550),v=e(28465);const _=[a.A,u.A,c.A,l.A,d.A,p.A,y.A],m=[a.A,f.A,v.A,g.A,o.A,h.A,s.A];function b(t,n){let e=null;function o(){let i;if(e||(e=i=(0,r.A)()),t.apply(this,arguments).draw(e,+n.apply(this,arguments)),i)return e=null,i+""||null}return t="function"==typeof t?t:(0,i.A)(t||a.A),n="function"==typeof n?n:(0,i.A)(void 0===n?64:+n),o.type=function(n){return arguments.length?(t="function"==typeof n?n:(0,i.A)(n),o):t},o.size=function(t){return arguments.length?(n="function"==typeof t?t:(0,i.A)(+t),o):n},o.context=function(t){return arguments.length?(e=null==t?null:t,o):e},o}},96417:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(80156);const i=(0,r.RZ)(3),o={draw(t,n){const e=.59436*(0,r.RZ)(n+(0,r.jk)(n/28,.75)),o=e/2,a=o*i;t.moveTo(0,e),t.lineTo(0,-e),t.moveTo(-a,-o),t.lineTo(a,o),t.moveTo(-a,o),t.lineTo(a,-o)}}},58445:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(80156);const i={draw(t,n){const e=(0,r.RZ)(n/r.pi);t.moveTo(e,0),t.arc(0,0,e,0,r.FA)}}},97333:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(80156);const i={draw(t,n){const e=(0,r.RZ)(n/5)/2;t.moveTo(-3*e,-e),t.lineTo(-e,-e),t.lineTo(-e,-3*e),t.lineTo(e,-3*e),t.lineTo(e,-e),t.lineTo(3*e,-e),t.lineTo(3*e,e),t.lineTo(e,e),t.lineTo(e,3*e),t.lineTo(-e,3*e),t.lineTo(-e,e),t.lineTo(-3*e,e),t.closePath()}}},78597:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(80156);const i=(0,r.RZ)(1/3),o=2*i,a={draw(t,n){const e=(0,r.RZ)(n/o),a=e*i;t.moveTo(0,-e),t.lineTo(a,0),t.lineTo(0,e),t.lineTo(-a,0),t.closePath()}}},17735:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(80156);const i={draw(t,n){const e=.62625*(0,r.RZ)(n);t.moveTo(0,-e),t.lineTo(e,0),t.lineTo(0,e),t.lineTo(-e,0),t.closePath()}}},75425:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(80156);const i={draw(t,n){const e=.87559*(0,r.RZ)(n-(0,r.jk)(n/7,2));t.moveTo(-e,0),t.lineTo(e,0),t.moveTo(0,e),t.lineTo(0,-e)}}},79210:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(80156);const i={draw(t,n){const e=(0,r.RZ)(n),i=-e/2;t.rect(i,i,e,e)}}},88682:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(80156);const i={draw(t,n){const e=.4431*(0,r.RZ)(n);t.moveTo(e,e),t.lineTo(e,-e),t.lineTo(-e,-e),t.lineTo(-e,e),t.closePath()}}},60597:(t,n,e)=>{"use strict";e.d(n,{A:()=>u});var r=e(80156);const i=(0,r.F8)(r.pi/10)/(0,r.F8)(7*r.pi/10),o=(0,r.F8)(r.FA/10)*i,a=-(0,r.gn)(r.FA/10)*i,u={draw(t,n){const e=(0,r.RZ)(.8908130915292852*n),i=o*e,u=a*e;t.moveTo(0,-e),t.lineTo(i,u);for(let n=1;n<5;++n){const o=r.FA*n/5,a=(0,r.gn)(o),c=(0,r.F8)(o);t.lineTo(c*e,-a*e),t.lineTo(a*i-c*u,c*i+a*u)}t.closePath()}}},60421:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(80156);const i=(0,r.RZ)(3),o={draw(t,n){const e=-(0,r.RZ)(n/(3*i));t.moveTo(0,2*e),t.lineTo(-i*e,-e),t.lineTo(i*e,-e),t.closePath()}}},91719:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(80156);const i=(0,r.RZ)(3),o={draw(t,n){const e=.6824*(0,r.RZ)(n),o=e/2,a=e*i/2;t.moveTo(0,-e),t.lineTo(a,o),t.lineTo(-a,o),t.closePath()}}},95550:(t,n,e)=>{"use strict";e.d(n,{A:()=>c});var r=e(80156);const i=-.5,o=(0,r.RZ)(3)/2,a=1/(0,r.RZ)(12),u=3*(a/2+1),c={draw(t,n){const e=(0,r.RZ)(n/u),c=e/2,s=e*a,f=c,l=e*a+e,h=-f,d=l;t.moveTo(c,s),t.lineTo(f,l),t.lineTo(h,d),t.lineTo(i*c-o*s,o*c+i*s),t.lineTo(i*f-o*l,o*f+i*l),t.lineTo(i*h-o*d,o*h+i*d),t.lineTo(i*c+o*s,i*s-o*c),t.lineTo(i*f+o*l,i*l-o*f),t.lineTo(i*h+o*d,i*d-o*h),t.closePath()}}},28465:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(80156);const i={draw(t,n){const e=.6189*(0,r.RZ)(n-(0,r.jk)(n/6,1.7));t.moveTo(-e,-e),t.lineTo(e,e),t.moveTo(-e,e),t.lineTo(e,-e)}}},74669:(t,n,e)=>{"use strict";e.d(n,{Ay:()=>s,DC:()=>i,GY:()=>u,T6:()=>o,aL:()=>a});var r,i,o,a,u,c=e(15306);function s(t){return r=(0,c.A)(t),i=r.format,o=r.parse,a=r.utcFormat,u=r.utcParse,r}s({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})},79894:(t,n,e)=>{"use strict";e.d(n,{DC:()=>r.DC,GY:()=>r.GY,R8:()=>a.A,T6:()=>r.T6,VC:()=>o.A,aL:()=>r.aL,cA:()=>r.Ay,de:()=>i.A});var r=e(74669),i=e(15306),o=e(19892),a=e(55976)},19892:(t,n,e)=>{"use strict";e.d(n,{A:()=>o,K:()=>i});var r=e(74669),i="%Y-%m-%dT%H:%M:%S.%LZ";const o=Date.prototype.toISOString?function(t){return t.toISOString()}:(0,r.aL)(i)},55976:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=e(19892),i=e(74669);const o=+new Date("2000-01-01T00:00:00.000Z")?function(t){var n=new Date(t);return isNaN(n)?null:n}:(0,i.GY)(r.K)},15306:(t,n,e)=>{"use strict";e.d(n,{A:()=>h});var r=e(86298),i=e(8730),o=e(8866),a=e(54674),u=e(26823),c=e(6015);function s(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function f(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function l(t,n,e){return{y:t,m:n,d:e,H:0,M:0,S:0,L:0}}function h(t){var n=t.dateTime,e=t.date,u=t.time,c=t.periods,h=t.days,p=t.shortDays,g=t.months,y=t.shortMonths,v=m(c),_=b(c),X=m(h),_t=b(h),Ct=m(p),Dt=b(p),Ft=m(g),Pt=b(g),zt=m(y),It=b(y),Ut={a:function(t){return p[t.getDay()]},A:function(t){return h[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return g[t.getMonth()]},c:null,d:Y,e:Y,f:Z,g:rt,G:ot,H:q,I:B,j:G,L:H,m:W,M:V,p:function(t){return c[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:kt,s:Et,S:$,u:K,U:Q,V:J,w:tt,W:nt,x:null,X:null,y:et,Y:it,Z:at,"%":St},Rt={a:function(t){return p[t.getUTCDay()]},A:function(t){return h[t.getUTCDay()]},b:function(t){return y[t.getUTCMonth()]},B:function(t){return g[t.getUTCMonth()]},c:null,d:ut,e:ut,f:ht,g:wt,G:Tt,H:ct,I:st,j:ft,L:lt,m:dt,M:pt,p:function(t){return c[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:kt,s:Et,S:gt,u:yt,U:vt,V:mt,w:bt,W:At,x:null,X:null,y:xt,Y:Mt,Z:Nt,"%":St},jt={a:function(t,n,e){var r=Ct.exec(n.slice(e));return r?(t.w=Dt.get(r[0].toLowerCase()),e+r[0].length):-1},A:function(t,n,e){var r=X.exec(n.slice(e));return r?(t.w=_t.get(r[0].toLowerCase()),e+r[0].length):-1},b:function(t,n,e){var r=zt.exec(n.slice(e));return r?(t.m=It.get(r[0].toLowerCase()),e+r[0].length):-1},B:function(t,n,e){var r=Ft.exec(n.slice(e));return r?(t.m=Pt.get(r[0].toLowerCase()),e+r[0].length):-1},c:function(t,e,r){return Yt(t,n,e,r)},d:D,e:D,f:R,g:S,G:N,H:P,I:P,j:F,L:U,m:C,M:z,p:function(t,n,e){var r=v.exec(n.slice(e));return r?(t.p=_.get(r[0].toLowerCase()),e+r[0].length):-1},q:E,Q:L,s:O,S:I,u:x,U:w,V:M,w:A,W:T,x:function(t,n,r){return Yt(t,e,n,r)},X:function(t,n,e){return Yt(t,u,n,e)},y:S,Y:N,Z:k,"%":j};function Lt(t,n){return function(e){var r,i,o,a=[],u=-1,c=0,s=t.length;for(e instanceof Date||(e=new Date(+e));++u<s;)37===t.charCodeAt(u)&&(a.push(t.slice(c,u)),null!=(i=d[r=t.charAt(++u)])?r=t.charAt(++u):i="e"===r?" ":"0",(o=n[r])&&(r=o(e,i)),a.push(r),c=u+1);return a.push(t.slice(c,u)),a.join("")}}function Ot(t,n){return function(e){var u,c,h=l(1900,void 0,1);if(Yt(h,t,e+="",0)!=e.length)return null;if("Q"in h)return new Date(h.Q);if("s"in h)return new Date(1e3*h.s+("L"in h?h.L:0));if(n&&!("Z"in h)&&(h.Z=0),"p"in h&&(h.H=h.H%12+12*h.p),void 0===h.m&&(h.m="q"in h?h.q:0),"V"in h){if(h.V<1||h.V>53)return null;"w"in h||(h.w=1),"Z"in h?(c=(u=f(l(h.y,0,1))).getUTCDay(),u=c>4||0===c?r.rt.ceil(u):(0,r.rt)(u),u=i.A.offset(u,7*(h.V-1)),h.y=u.getUTCFullYear(),h.m=u.getUTCMonth(),h.d=u.getUTCDate()+(h.w+6)%7):(c=(u=s(l(h.y,0,1))).getDay(),u=c>4||0===c?o.By.ceil(u):(0,o.By)(u),u=a.A.offset(u,7*(h.V-1)),h.y=u.getFullYear(),h.m=u.getMonth(),h.d=u.getDate()+(h.w+6)%7)}else("W"in h||"U"in h)&&("w"in h||(h.w="u"in h?h.u%7:"W"in h?1:0),c="Z"in h?f(l(h.y,0,1)).getUTCDay():s(l(h.y,0,1)).getDay(),h.m=0,h.d="W"in h?(h.w+6)%7+7*h.W-(c+5)%7:h.w+7*h.U-(c+6)%7);return"Z"in h?(h.H+=h.Z/100|0,h.M+=h.Z%100,f(h)):s(h)}}function Yt(t,n,e,r){for(var i,o,a=0,u=n.length,c=e.length;a<u;){if(r>=c)return-1;if(37===(i=n.charCodeAt(a++))){if(i=n.charAt(a++),!(o=jt[i in d?n.charAt(a++):i])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}return Ut.x=Lt(e,Ut),Ut.X=Lt(u,Ut),Ut.c=Lt(n,Ut),Rt.x=Lt(e,Rt),Rt.X=Lt(u,Rt),Rt.c=Lt(n,Rt),{format:function(t){var n=Lt(t+="",Ut);return n.toString=function(){return t},n},parse:function(t){var n=Ot(t+="",!1);return n.toString=function(){return t},n},utcFormat:function(t){var n=Lt(t+="",Rt);return n.toString=function(){return t},n},utcParse:function(t){var n=Ot(t+="",!0);return n.toString=function(){return t},n}}}var d={"-":"",_:" ",0:"0"},p=/^\s*\d+/,g=/^%/,y=/[\\^$*+?|[\]().{}]/g;function v(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function _(t){return t.replace(y,"\\$&")}function m(t){return new RegExp("^(?:"+t.map(_).join("|")+")","i")}function b(t){return new Map(t.map(((t,n)=>[t.toLowerCase(),n])))}function A(t,n,e){var r=p.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function x(t,n,e){var r=p.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function w(t,n,e){var r=p.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function M(t,n,e){var r=p.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function T(t,n,e){var r=p.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function N(t,n,e){var r=p.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function S(t,n,e){var r=p.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function k(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function E(t,n,e){var r=p.exec(n.slice(e,e+1));return r?(t.q=3*r[0]-3,e+r[0].length):-1}function C(t,n,e){var r=p.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function D(t,n,e){var r=p.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function F(t,n,e){var r=p.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function P(t,n,e){var r=p.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function z(t,n,e){var r=p.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function I(t,n,e){var r=p.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function U(t,n,e){var r=p.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function R(t,n,e){var r=p.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function j(t,n,e){var r=g.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function L(t,n,e){var r=p.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function O(t,n,e){var r=p.exec(n.slice(e));return r?(t.s=+r[0],e+r[0].length):-1}function Y(t,n){return v(t.getDate(),n,2)}function q(t,n){return v(t.getHours(),n,2)}function B(t,n){return v(t.getHours()%12||12,n,2)}function G(t,n){return v(1+a.A.count((0,u.A)(t),t),n,3)}function H(t,n){return v(t.getMilliseconds(),n,3)}function Z(t,n){return H(t,n)+"000"}function W(t,n){return v(t.getMonth()+1,n,2)}function V(t,n){return v(t.getMinutes(),n,2)}function $(t,n){return v(t.getSeconds(),n,2)}function K(t){var n=t.getDay();return 0===n?7:n}function Q(t,n){return v(o.fz.count((0,u.A)(t)-1,t),n,2)}function X(t){var n=t.getDay();return n>=4||0===n?(0,o.dt)(t):o.dt.ceil(t)}function J(t,n){return t=X(t),v(o.dt.count((0,u.A)(t),t)+(4===(0,u.A)(t).getDay()),n,2)}function tt(t){return t.getDay()}function nt(t,n){return v(o.By.count((0,u.A)(t)-1,t),n,2)}function et(t,n){return v(t.getFullYear()%100,n,2)}function rt(t,n){return v((t=X(t)).getFullYear()%100,n,2)}function it(t,n){return v(t.getFullYear()%1e4,n,4)}function ot(t,n){var e=t.getDay();return v((t=e>=4||0===e?(0,o.dt)(t):o.dt.ceil(t)).getFullYear()%1e4,n,4)}function at(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+v(n/60|0,"0",2)+v(n%60,"0",2)}function ut(t,n){return v(t.getUTCDate(),n,2)}function ct(t,n){return v(t.getUTCHours(),n,2)}function st(t,n){return v(t.getUTCHours()%12||12,n,2)}function ft(t,n){return v(1+i.A.count((0,c.A)(t),t),n,3)}function lt(t,n){return v(t.getUTCMilliseconds(),n,3)}function ht(t,n){return lt(t,n)+"000"}function dt(t,n){return v(t.getUTCMonth()+1,n,2)}function pt(t,n){return v(t.getUTCMinutes(),n,2)}function gt(t,n){return v(t.getUTCSeconds(),n,2)}function yt(t){var n=t.getUTCDay();return 0===n?7:n}function vt(t,n){return v(r.Hl.count((0,c.A)(t)-1,t),n,2)}function _t(t){var n=t.getUTCDay();return n>=4||0===n?(0,r.pT)(t):r.pT.ceil(t)}function mt(t,n){return t=_t(t),v(r.pT.count((0,c.A)(t),t)+(4===(0,c.A)(t).getUTCDay()),n,2)}function bt(t){return t.getUTCDay()}function At(t,n){return v(r.rt.count((0,c.A)(t)-1,t),n,2)}function xt(t,n){return v(t.getUTCFullYear()%100,n,2)}function wt(t,n){return v((t=_t(t)).getUTCFullYear()%100,n,2)}function Mt(t,n){return v(t.getUTCFullYear()%1e4,n,4)}function Tt(t,n){var e=t.getUTCDay();return v((t=e>=4||0===e?(0,r.pT)(t):r.pT.ceil(t)).getUTCFullYear()%1e4,n,4)}function Nt(){return"+0000"}function St(){return"%"}function kt(t){return+t}function Et(t){return Math.floor(+t/1e3)}},54674:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,_:()=>u});var r=e(10475),i=e(43954),o=(0,r.A)((t=>t.setHours(0,0,0,0)),((t,n)=>t.setDate(t.getDate()+n)),((t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*i.rR)/i.Nm),(t=>t.getDate()-1));const a=o;var u=o.range},43954:(t,n,e)=>{"use strict";e.d(n,{Fq:()=>u,JJ:()=>o,MP:()=>s,Nm:()=>a,Pv:()=>c,Tt:()=>r,rR:()=>i});const r=1e3,i=60*r,o=60*i,a=24*o,u=7*a,c=30*a,s=365*a},90976:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,c:()=>u});var r=e(10475),i=e(43954),o=(0,r.A)((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*i.Tt-t.getMinutes()*i.rR)}),(function(t,n){t.setTime(+t+n*i.JJ)}),(function(t,n){return(n-t)/i.JJ}),(function(t){return t.getHours()}));const a=o;var u=o.range},65300:(t,n,e)=>{"use strict";e.d(n,{$Z:()=>_.$Z,AB:()=>s.By,Ag:()=>u.A,Bz:()=>f.U,Cf:()=>_.Cf,DL:()=>o.Y,Dr:()=>s.gf,Ee:()=>i.A,G6:()=>g.G6,Gu:()=>s.l3,HU:()=>s.Q$,Hl:()=>g.Hl,Hn:()=>o.A,Kg:()=>s.fz,L6:()=>u.c,Lg:()=>i.R,Mb:()=>v.A,Mo:()=>s.dt,NT:()=>c._,O0:()=>h.A,OK:()=>s.yW,ON:()=>g.ON,PG:()=>s.eQ,R6:()=>y.A,SQ:()=>s.tz,Sp:()=>i.R,TU:()=>s.Sh,TX:()=>s.se,UA:()=>c.A,Ui:()=>f.A,Xo:()=>g.Xo,Y4:()=>h.Y,YP:()=>s.fz,Yo:()=>l.V,Zn:()=>g.Zn,_M:()=>s.t$,a1:()=>g.a1,aZ:()=>g.aZ,c8:()=>g.c8,dA:()=>p.A,f$:()=>r.A,h8:()=>s.KP,he:()=>l.A,iA:()=>d.i,jH:()=>v.j,jN:()=>g.jN,kk:()=>o.Y,lk:()=>_.lk,oi:()=>y.o,ou:()=>p.o,pT:()=>g.pT,pz:()=>d.A,rG:()=>s.kS,rn:()=>a.G,rt:()=>g.rt,sr:()=>g.sr,t6:()=>i.A,uc:()=>o.A,vD:()=>s.se,wX:()=>a.A,wr:()=>g.wr,y9:()=>g.aZ,yE:()=>_.yE,z2:()=>g.z2,zX:()=>g.Hl});var r=e(10475),i=e(28673),o=e(83186),a=e(96614),u=e(90976),c=e(54674),s=e(8866),f=e(87850),l=e(26823),h=e(82526),d=e(78248),p=e(8730),g=e(86298),y=e(35170),v=e(6015),_=e(96602)},10475:(t,n,e)=>{"use strict";e.d(n,{A:()=>o});var r=new Date,i=new Date;function o(t,n,e,a){function u(n){return t(n=0===arguments.length?new Date:new Date(+n)),n}return u.floor=function(n){return t(n=new Date(+n)),n},u.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},u.round=function(t){var n=u(t),e=u.ceil(t);return t-n<e-t?n:e},u.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},u.range=function(e,r,i){var o,a=[];if(e=u.ceil(e),i=null==i?1:Math.floor(i),!(e<r&&i>0))return a;do{a.push(o=new Date(+e)),n(e,i),t(e)}while(o<e&&e<r);return a},u.filter=function(e){return o((function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;n(t,-1),!e(t););else for(;--r>=0;)for(;n(t,1),!e(t););}))},e&&(u.count=function(n,o){return r.setTime(+n),i.setTime(+o),t(r),t(i),Math.floor(e(r,i))},u.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?u.filter(a?function(n){return a(n)%t==0}:function(n){return u.count(0,n)%t==0}):u:null}),u}},28673:(t,n,e)=>{"use strict";e.d(n,{A:()=>o,R:()=>a});var r=e(10475),i=(0,r.A)((function(){}),(function(t,n){t.setTime(+t+n)}),(function(t,n){return n-t}));i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?(0,r.A)((function(n){n.setTime(Math.floor(n/t)*t)}),(function(n,e){n.setTime(+n+e*t)}),(function(n,e){return(e-n)/t})):i:null};const o=i;var a=i.range},96614:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,G:()=>u});var r=e(10475),i=e(43954),o=(0,r.A)((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*i.Tt)}),(function(t,n){t.setTime(+t+n*i.rR)}),(function(t,n){return(n-t)/i.rR}),(function(t){return t.getMinutes()}));const a=o;var u=o.range},87850:(t,n,e)=>{"use strict";e.d(n,{A:()=>i,U:()=>o});var r=(0,e(10475).A)((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,n){t.setMonth(t.getMonth()+n)}),(function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}));const i=r;var o=r.range},83186:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,Y:()=>u});var r=e(10475),i=e(43954),o=(0,r.A)((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,n){t.setTime(+t+n*i.Tt)}),(function(t,n){return(n-t)/i.Tt}),(function(t){return t.getUTCSeconds()}));const a=o;var u=o.range},96602:(t,n,e)=>{"use strict";e.d(n,{$Z:()=>A,Cf:()=>w,lk:()=>x,yE:()=>M});var r=e(46937),i=e(81342),o=e(43954),a=e(28673),u=e(83186),c=e(96614),s=e(90976),f=e(54674),l=e(8866),h=e(87850),d=e(26823),p=e(82526),g=e(78248),y=e(8730),v=e(86298),_=e(35170),m=e(6015);function b(t,n,e,c,s,f){const l=[[u.A,1,o.Tt],[u.A,5,5*o.Tt],[u.A,15,15*o.Tt],[u.A,30,30*o.Tt],[f,1,o.rR],[f,5,5*o.rR],[f,15,15*o.rR],[f,30,30*o.rR],[s,1,o.JJ],[s,3,3*o.JJ],[s,6,6*o.JJ],[s,12,12*o.JJ],[c,1,o.Nm],[c,2,2*o.Nm],[e,1,o.Fq],[n,1,o.Pv],[n,3,3*o.Pv],[t,1,o.MP]];function h(n,e,u){const c=Math.abs(e-n)/u,s=(0,r.A)((([,,t])=>t)).right(l,c);if(s===l.length)return t.every((0,i.sG)(n/o.MP,e/o.MP,u));if(0===s)return a.A.every(Math.max((0,i.sG)(n,e,u),1));const[f,h]=l[c/l[s-1][2]<l[s][2]/c?s-1:s];return f.every(h)}return[function(t,n,e){const r=n<t;r&&([t,n]=[n,t]);const i=e&&"function"==typeof e.range?e:h(t,n,e),o=i?i.range(t,+n+1):[];return r?o.reverse():o},h]}const[A,x]=b(m.A,_.A,v.Hl,y.A,g.A,p.A),[w,M]=b(d.A,h.A,l.fz,f.A,s.A,c.A)},8730:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,o:()=>u});var r=e(10475),i=e(43954),o=(0,r.A)((function(t){t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+n)}),(function(t,n){return(n-t)/i.Nm}),(function(t){return t.getUTCDate()-1}));const a=o;var u=o.range},78248:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,i:()=>u});var r=e(10475),i=e(43954),o=(0,r.A)((function(t){t.setUTCMinutes(0,0,0)}),(function(t,n){t.setTime(+t+n*i.JJ)}),(function(t,n){return(n-t)/i.JJ}),(function(t){return t.getUTCHours()}));const a=o;var u=o.range},82526:(t,n,e)=>{"use strict";e.d(n,{A:()=>a,Y:()=>u});var r=e(10475),i=e(43954),o=(0,r.A)((function(t){t.setUTCSeconds(0,0)}),(function(t,n){t.setTime(+t+n*i.rR)}),(function(t,n){return(n-t)/i.rR}),(function(t){return t.getUTCMinutes()}));const a=o;var u=o.range},35170:(t,n,e)=>{"use strict";e.d(n,{A:()=>i,o:()=>o});var r=(0,e(10475).A)((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCMonth(t.getUTCMonth()+n)}),(function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}));const i=r;var o=r.range},86298:(t,n,e)=>{"use strict";e.d(n,{G6:()=>y,Hl:()=>a,ON:()=>p,Xo:()=>m,Zn:()=>_,a1:()=>l,aZ:()=>d,c8:()=>h,jN:()=>g,pT:()=>f,rt:()=>u,sr:()=>c,wr:()=>v,z2:()=>s});var r=e(10475),i=e(43954);function o(t){return(0,r.A)((function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+7*n)}),(function(t,n){return(n-t)/i.Fq}))}var a=o(0),u=o(1),c=o(2),s=o(3),f=o(4),l=o(5),h=o(6),d=a.range,p=u.range,g=c.range,y=s.range,v=f.range,_=l.range,m=h.range},6015:(t,n,e)=>{"use strict";e.d(n,{A:()=>o,j:()=>a});var r=e(10475),i=(0,r.A)((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)}),(function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));i.every=function(t){return isFinite(t=Math.floor(t))&&t>0?(0,r.A)((function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)}),(function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)})):null};const o=i;var a=i.range},8866:(t,n,e)=>{"use strict";e.d(n,{By:()=>u,KP:()=>p,Q$:()=>v,Sh:()=>l,dt:()=>f,eQ:()=>c,fz:()=>a,gf:()=>y,kS:()=>h,l3:()=>s,se:()=>d,t$:()=>m,tz:()=>_,yW:()=>g});var r=e(10475),i=e(43954);function o(t){return(0,r.A)((function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)}),(function(t,n){t.setDate(t.getDate()+7*n)}),(function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*i.rR)/i.Fq}))}var a=o(0),u=o(1),c=o(2),s=o(3),f=o(4),l=o(5),h=o(6),d=a.range,p=u.range,g=c.range,y=s.range,v=f.range,_=l.range,m=h.range},26823:(t,n,e)=>{"use strict";e.d(n,{A:()=>o,V:()=>a});var r=e(10475),i=(0,r.A)((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n)}),(function(t,n){return n.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));i.every=function(t){return isFinite(t=Math.floor(t))&&t>0?(0,r.A)((function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)}),(function(n,e){n.setFullYear(n.getFullYear()+e*t)})):null};const o=i;var a=i.range},81884:(t,n,e)=>{"use strict";e.d(n,{O1:()=>r.O1,O2:()=>r.O2,YP:()=>o.A,tB:()=>r.tB,wR:()=>i.A});var r=e(34689),i=e(91763),o=e(83971)},83971:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(34689);function i(t,n,e){var i=new r.M4,o=n;return null==n?(i.restart(t,n,e),i):(i._restart=i.restart,i.restart=function(t,n,e){n=+n,e=null==e?(0,r.tB)():+e,i._restart((function r(a){a+=o,i._restart(r,o+=n,e),t(a)}),n,e)},i.restart(t,n,e),i)}},91763:(t,n,e)=>{"use strict";e.d(n,{A:()=>i});var r=e(34689);function i(t,n,e){var i=new r.M4;return n=null==n?0:+n,i.restart((e=>{i.stop(),t(e+n)}),n,e),i}},34689:(t,n,e)=>{"use strict";e.d(n,{M4:()=>v,O1:()=>_,O2:()=>m,tB:()=>g});var r,i,o=e(30327),a=0,u=0,c=0,s=1e3,f=0,l=0,h=0,d="object"==typeof performance&&performance.now?performance:Date,p="object"==typeof o&&o.requestAnimationFrame?o.requestAnimationFrame.bind(o):function(t){setTimeout(t,17)};function g(){return l||(p(y),l=d.now()+h)}function y(){l=0}function v(){this._call=this._time=this._next=null}function _(t,n,e){var r=new v;return r.restart(t,n,e),r}function m(){g(),++a;for(var t,n=r;n;)(t=l-n._time)>=0&&n._call.call(void 0,t),n=n._next;--a}function b(){l=(f=d.now())+h,a=u=0;try{m()}finally{a=0,function(){for(var t,n,e=r,o=1/0;e;)e._call?(o>e._time&&(o=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:r=n);i=t,x(o)}(),l=0}}function A(){var t=d.now(),n=t-f;n>s&&(h-=n,f=t)}function x(t){a||(u&&(u=clearTimeout(u)),t-l>24?(t<1/0&&(u=setTimeout(b,t-d.now()-h)),c&&(c=clearInterval(c))):(c||(f=d.now(),c=setInterval(A,s)),a=1,p(b)))}v.prototype=_.prototype={constructor:v,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?g():+e)+(null==n?0:+n),this._next||i===this||(i?i._next=this:r=this,i=this),this._call=t,this._time=e,x()},stop:function(){this._call&&(this._call=null,this._time=1/0,x())}}},49313:(t,n,e)=>{"use strict";e.r(n),e.d(n,{Adder:()=>r.ph,Delaunay:()=>s.w,FormatSpecifier:()=>y.ST,InternMap:()=>r.Bu,InternSet:()=>r.vo,Node:()=>_.bP,Voronoi:()=>s.l,ZoomTransform:()=>F.uV,active:()=>D.vu,arc:()=>S.JL,area:()=>S.Wc,areaRadial:()=>S.Ps,ascending:()=>r.V_,autoType:()=>h.cG,axisBottom:()=>i.l7,axisLeft:()=>i.V4,axisRight:()=>i.eH,axisTop:()=>i.tl,bin:()=>r.e5,bisect:()=>r.h1,bisectCenter:()=>r.WD,bisectLeft:()=>r.ah,bisectRight:()=>r.Jj,bisector:()=>r.yl,blob:()=>p.av,brush:()=>o.V$,brushSelection:()=>o.ZR,brushX:()=>o.n5,brushY:()=>o.g2,buffer:()=>p.r,chord:()=>a.JQ,chordDirected:()=>a.BQ,chordTranspose:()=>a.kb,cluster:()=>_.bz,color:()=>u.yW,contourDensity:()=>c.f,contours:()=>c.m,count:()=>r.U9,create:()=>N.vt,creator:()=>N.xL,cross:()=>r.$A,csv:()=>p.fu,csvFormat:()=>h.e2,csvFormatBody:()=>h.Un,csvFormatRow:()=>h.oz,csvFormatRows:()=>h.hG,csvFormatValue:()=>h.zB,csvParse:()=>h.sw,csvParseRows:()=>h.fy,cubehelix:()=>u.UB,cumsum:()=>r.rC,curveBasis:()=>S.qr,curveBasisClosed:()=>S.Yu,curveBasisOpen:()=>S.IA,curveBumpX:()=>S.Wi,curveBumpY:()=>S.PG,curveBundle:()=>S.OE,curveCardinal:()=>S.y8,curveCardinalClosed:()=>S.ol,curveCardinalOpen:()=>S.Ir,curveCatmullRom:()=>S.oD,curveCatmullRomClosed:()=>S.Q7,curveCatmullRomOpen:()=>S.cV,curveLinear:()=>S.lU,curveLinearClosed:()=>S.Lx,curveMonotoneX:()=>S.nV,curveMonotoneY:()=>S.ux,curveNatural:()=>S.Xf,curveStep:()=>S.GZ,curveStepAfter:()=>S.UP,curveStepBefore:()=>S.dy,descending:()=>r.rG,deviation:()=>r.KS,difference:()=>r.iv,disjoint:()=>r.nf,dispatch:()=>f.J,drag:()=>l.$E,dragDisable:()=>l.XD,dragEnable:()=>l.EH,dsv:()=>p.S$,dsvFormat:()=>h.Fg,easeBack:()=>d.Ib,easeBackIn:()=>d.ro,easeBackInOut:()=>d.Z8,easeBackOut:()=>d.g9,easeBounce:()=>d.r_,easeBounceIn:()=>d.Su,easeBounceInOut:()=>d.g$,easeBounceOut:()=>d.JK,easeCircle:()=>d.LO,easeCircleIn:()=>d.W2,easeCircleInOut:()=>d.Cg,easeCircleOut:()=>d.jt,easeCubic:()=>d.z6,easeCubicIn:()=>d.M1,easeCubicInOut:()=>d.oR,easeCubicOut:()=>d.TD,easeElastic:()=>d._9,easeElasticIn:()=>d.rh,easeElasticInOut:()=>d.D6,easeElasticOut:()=>d.gu,easeExp:()=>d.IO,easeExpIn:()=>d.vH,easeExpInOut:()=>d.rS,easeExpOut:()=>d.GD,easeLinear:()=>d.yf,easePoly:()=>d.Xv,easePolyIn:()=>d.Ol,easePolyInOut:()=>d.mx,easePolyOut:()=>d.nW,easeQuad:()=>d.I1,easeQuadIn:()=>d.$S,easeQuadInOut:()=>d.xA,easeQuadOut:()=>d.gH,easeSin:()=>d.pd,easeSinIn:()=>d.YX,easeSinInOut:()=>d.Ce,easeSinOut:()=>d.tU,every:()=>r.Si,extent:()=>r.Xx,fcumsum:()=>r.Nn,filter:()=>r.pb,flatGroup:()=>r.n3,flatRollup:()=>r.GG,forceCenter:()=>g.jT,forceCollide:()=>g.eR,forceLink:()=>g.kJ,forceManyBody:()=>g.xJ,forceRadial:()=>g.pP,forceSimulation:()=>g.tX,forceX:()=>g.KS,forceY:()=>g.TS,format:()=>y.GP,formatDefaultLocale:()=>y.hQ,formatLocale:()=>y.OE,formatPrefix:()=>y.s,formatSpecifier:()=>y.Gp,fsum:()=>r.rv,geoAlbers:()=>v.pK,geoAlbersUsa:()=>v.Ut,geoArea:()=>v.Vj,geoAzimuthalEqualArea:()=>v.Oc,geoAzimuthalEqualAreaRaw:()=>v.qz,geoAzimuthalEquidistant:()=>v.AN,geoAzimuthalEquidistantRaw:()=>v.SV,geoBounds:()=>v.fo,geoCentroid:()=>v.Ew,geoCircle:()=>v.Ob,geoClipAntimeridian:()=>v.Nl,geoClipCircle:()=>v.cj,geoClipExtent:()=>v.w9,geoClipRectangle:()=>v.tq,geoConicConformal:()=>v.xK,geoConicConformalRaw:()=>v.dO,geoConicEqualArea:()=>v.Pq,geoConicEqualAreaRaw:()=>v.zy,geoConicEquidistant:()=>v.PS,geoConicEquidistantRaw:()=>v.p7,geoContains:()=>v.Vf,geoDistance:()=>v.Je,geoEqualEarth:()=>v.om,geoEqualEarthRaw:()=>v.S0,geoEquirectangular:()=>v.uV,geoEquirectangularRaw:()=>v.GA,geoGnomonic:()=>v.c6,geoGnomonicRaw:()=>v.IN,geoGraticule:()=>v.kG,geoGraticule10:()=>v.DS,geoIdentity:()=>v.qS,geoInterpolate:()=>v.vD,geoLength:()=>v.u9,geoMercator:()=>v.bA,geoMercatorRaw:()=>v.jw,geoNaturalEarth1:()=>v.wx,geoNaturalEarth1Raw:()=>v.MA,geoOrthographic:()=>v.WK,geoOrthographicRaw:()=>v.mn,geoPath:()=>v.zF,geoProjection:()=>v.Xo,geoProjectionMutator:()=>v.r2,geoRotation:()=>v.uY,geoStereographic:()=>v.c8,geoStereographicRaw:()=>v.cX,geoStream:()=>v.wC,geoTransform:()=>v.wu,geoTransverseMercator:()=>v.M5,geoTransverseMercatorRaw:()=>v.Kx,gray:()=>u.wm,greatest:()=>r.Kf,greatestIndex:()=>r.GD,group:()=>r.Os,groupSort:()=>r._w,groups:()=>r.TN,hcl:()=>u.aq,hierarchy:()=>_.Sk,histogram:()=>r.JW,hsl:()=>u.KI,html:()=>p.qy,image:()=>p.Sl,index:()=>r.Pe,indexes:()=>r.DU,interpolate:()=>m.GW,interpolateArray:()=>m.p0,interpolateBasis:()=>m.Qm,interpolateBasisClosed:()=>m.I_,interpolateBlues:()=>T.dM,interpolateBrBG:()=>T.ND,interpolateBuGn:()=>T.mu,interpolateBuPu:()=>T.QU,interpolateCividis:()=>T.Pi,interpolateCool:()=>T.tG,interpolateCubehelix:()=>m.p5,interpolateCubehelixDefault:()=>T.SU,interpolateCubehelixLong:()=>m.Xl,interpolateDate:()=>m._8,interpolateDiscrete:()=>m.xh,interpolateGnBu:()=>T._C,interpolateGreens:()=>T.Yv,interpolateGreys:()=>T.q8,interpolateHcl:()=>m.bE,interpolateHclLong:()=>m.v1,interpolateHsl:()=>m.r_,interpolateHslLong:()=>m.x6,interpolateHue:()=>m.SH,interpolateInferno:()=>T.Fb,interpolateLab:()=>m.dJ,interpolateMagma:()=>T.nJ,interpolateNumber:()=>m.Dj,interpolateNumberArray:()=>m.KV,interpolateObject:()=>m.hf,interpolateOrRd:()=>T.V7,interpolateOranges:()=>T.TE,interpolatePRGn:()=>T.tB,interpolatePiYG:()=>T.jq,interpolatePlasma:()=>T.UA,interpolatePuBu:()=>T.Eg,interpolatePuBuGn:()=>T.DK,interpolatePuOr:()=>T.QS,interpolatePuRd:()=>T.NM,interpolatePurples:()=>T.dn,interpolateRainbow:()=>T.SV,interpolateRdBu:()=>T.Tw,interpolateRdGy:()=>T.yR,interpolateRdPu:()=>T.bD,interpolateRdYlBu:()=>T.c_,interpolateRdYlGn:()=>T.qJ,interpolateReds:()=>T.Q3,interpolateRgb:()=>m.Zr,interpolateRgbBasis:()=>m.z4,interpolateRgbBasisClosed:()=>m.Li,interpolateRound:()=>m.sH,interpolateSinebow:()=>T.jy,interpolateSpectral:()=>T.QL,interpolateString:()=>m.zl,interpolateTransformCss:()=>m.TE,interpolateTransformSvg:()=>m.pN,interpolateTurbo:()=>T.Ww,interpolateViridis:()=>T.GA,interpolateWarm:()=>T.Lx,interpolateYlGn:()=>T.o$,interpolateYlGnBu:()=>T.L9,interpolateYlOrBr:()=>T._Q,interpolateYlOrRd:()=>T.oK,interpolateZoom:()=>m.p7,interrupt:()=>D.G,intersection:()=>r.E$,interval:()=>C.YP,isoFormat:()=>E.VC,isoParse:()=>E.R8,json:()=>p.Pq,lab:()=>u.Mj,lch:()=>u.s1,least:()=>r.YG,leastIndex:()=>r.ko,line:()=>S.n8,lineRadial:()=>S.y6,link:()=>S.nf,linkHorizontal:()=>S.pq,linkRadial:()=>S.e7,linkVertical:()=>S.vu,local:()=>N.sr,map:()=>r.Tj,matcher:()=>N.jN,max:()=>r.T9,maxIndex:()=>r.P2,mean:()=>r.i2,median:()=>r.JZ,merge:()=>r.Am,min:()=>r.jk,minIndex:()=>r.z9,mode:()=>r.Mq,namespace:()=>N.MF,namespaces:()=>N.r$,nice:()=>r.Cm,now:()=>C.tB,pack:()=>_.qq,packEnclose:()=>_.nT,packSiblings:()=>_.Zz,pairs:()=>r.AS,partition:()=>_.jB,path:()=>b.A,permute:()=>r.Ny,pie:()=>S.rL,piecewise:()=>m.$B,pointRadial:()=>S.b,pointer:()=>N.Wn,pointers:()=>N.D_,polygonArea:()=>A.Ab,polygonCentroid:()=>A.l8,polygonContains:()=>A.G2,polygonHull:()=>A.Cx,polygonLength:()=>A.J4,precisionFixed:()=>y.RT,precisionPrefix:()=>y.dT,precisionRound:()=>y.Pj,quadtree:()=>x.M,quantile:()=>r.YV,quantileSorted:()=>r.Z4,quantize:()=>m.yd,quickselect:()=>r.eu,radialArea:()=>S.hh,radialLine:()=>S.Y$,randomBates:()=>w.FQ,randomBernoulli:()=>w.UE,randomBeta:()=>w.qi,randomBinomial:()=>w.z6,randomCauchy:()=>w.FU,randomExponential:()=>w.BO,randomGamma:()=>w.pR,randomGeometric:()=>w.R7,randomInt:()=>w.HO,randomIrwinHall:()=>w.yT,randomLcg:()=>w.Ix,randomLogNormal:()=>w.Rb,randomLogistic:()=>w.En,randomNormal:()=>w.FE,randomPareto:()=>w.zZ,randomPoisson:()=>w.lA,randomUniform:()=>w.Ye,randomWeibull:()=>w.kL,range:()=>r.y1,rank:()=>r.Tm,reduce:()=>r.TS,reverse:()=>r.BE,rgb:()=>u.Qh,ribbon:()=>a.F6,ribbonArrow:()=>a.Y_,rollup:()=>r.z,rollups:()=>r.i8,scaleBand:()=>M.WH,scaleDiverging:()=>M.Mb,scaleDivergingLog:()=>M.Cr,scaleDivergingPow:()=>M.yj,scaleDivergingSqrt:()=>M.q9,scaleDivergingSymlog:()=>M.xh,scaleIdentity:()=>M.jo,scaleImplicit:()=>M.U4,scaleLinear:()=>M.m4,scaleLog:()=>M.ZE,scaleOrdinal:()=>M.UM,scalePoint:()=>M.hq,scalePow:()=>M.RW,scaleQuantile:()=>M.QL,scaleQuantize:()=>M.WT,scaleRadial:()=>M.af,scaleSequential:()=>M.ex,scaleSequentialLog:()=>M.M3,scaleSequentialPow:()=>M.ui,scaleSequentialQuantile:()=>M.T,scaleSequentialSqrt:()=>M.ye,scaleSequentialSymlog:()=>M.nV,scaleSqrt:()=>M.Bv,scaleSymlog:()=>M.aX,scaleThreshold:()=>M.c3,scaleTime:()=>M.w7,scaleUtc:()=>M.Pp,scan:()=>r.SQ,schemeAccent:()=>T._u,schemeBlues:()=>T.Hu,schemeBrBG:()=>T.HZ,schemeBuGn:()=>T.g4,schemeBuPu:()=>T.iW,schemeCategory10:()=>T.t5,schemeDark2:()=>T.Hf,schemeGnBu:()=>T.Wb,schemeGreens:()=>T.Cx,schemeGreys:()=>T.MS,schemeOrRd:()=>T.jl,schemeOranges:()=>T.dw,schemePRGn:()=>T.j9,schemePaired:()=>T.vU,schemePastel1:()=>T.kG,schemePastel2:()=>T.ri,schemePiYG:()=>T.ZO,schemePuBu:()=>T.Gw,schemePuBuGn:()=>T.Vm,schemePuOr:()=>T.OK,schemePuRd:()=>T.lt,schemePurples:()=>T.xA,schemeRdBu:()=>T.pC,schemeRdGy:()=>T.Wu,schemeRdPu:()=>T.HS,schemeRdYlBu:()=>T.OY,schemeRdYlGn:()=>T.mC,schemeReds:()=>T.Uo,schemeSet1:()=>T.Dv,schemeSet2:()=>T.Ks,schemeSet3:()=>T.DQ,schemeSpectral:()=>T.iZ,schemeTableau10:()=>T.zt,schemeYlGn:()=>T.QE,schemeYlGnBu:()=>T.r2,schemeYlOrBr:()=>T.yn,schemeYlOrRd:()=>T.Mh,select:()=>N.Lt,selectAll:()=>N.Ub,selection:()=>N.r1,selector:()=>N.gD,selectorAll:()=>N.XM,shuffle:()=>r.k4,shuffler:()=>r.kt,some:()=>r.zN,sort:()=>r.di,stack:()=>S.t$,stackOffsetDiverging:()=>S.lB,stackOffsetExpand:()=>S.qI,stackOffsetNone:()=>S.YW,stackOffsetSilhouette:()=>S.e9,stackOffsetWiggle:()=>S.Re,stackOrderAppearance:()=>S.DY,stackOrderAscending:()=>S.BI,stackOrderDescending:()=>S.ve,stackOrderInsideOut:()=>S.$k,stackOrderNone:()=>S.rM,stackOrderReverse:()=>S.xU,stratify:()=>_.zT,style:()=>N.iF,subset:()=>r.LE,sum:()=>r.cz,superset:()=>r.W_,svg:()=>p.JW,symbol:()=>S.HR,symbolAsterisk:()=>S.$Z,symbolCircle:()=>S.hK,symbolCross:()=>S.BV,symbolDiamond:()=>S.j,symbolDiamond2:()=>S.zy,symbolPlus:()=>S.jh,symbolSquare:()=>S.yD,symbolSquare2:()=>S.sL,symbolStar:()=>S.N8,symbolTriangle:()=>S.ZK,symbolTriangle2:()=>S.L1,symbolWye:()=>S.IJ,symbolX:()=>S.Bj,symbols:()=>S.Iq,symbolsFill:()=>S.Lk,symbolsStroke:()=>S.AM,text:()=>p.Qq,thresholdFreedmanDiaconis:()=>r.c3,thresholdScott:()=>r.Ft,thresholdSturges:()=>r.zr,tickFormat:()=>M.Vr,tickIncrement:()=>r.lq,tickStep:()=>r.sG,ticks:()=>r.Zc,timeDay:()=>k.UA,timeDays:()=>k.NT,timeFormat:()=>E.DC,timeFormatDefaultLocale:()=>E.cA,timeFormatLocale:()=>E.de,timeFriday:()=>k.TU,timeFridays:()=>k.SQ,timeHour:()=>k.Ag,timeHours:()=>k.L6,timeInterval:()=>k.f$,timeMillisecond:()=>k.t6,timeMilliseconds:()=>k.Sp,timeMinute:()=>k.wX,timeMinutes:()=>k.rn,timeMonday:()=>k.AB,timeMondays:()=>k.h8,timeMonth:()=>k.Ui,timeMonths:()=>k.Bz,timeParse:()=>E.T6,timeSaturday:()=>k.rG,timeSaturdays:()=>k._M,timeSecond:()=>k.uc,timeSeconds:()=>k.DL,timeSunday:()=>k.YP,timeSundays:()=>k.vD,timeThursday:()=>k.Mo,timeThursdays:()=>k.HU,timeTickInterval:()=>k.yE,timeTicks:()=>k.Cf,timeTuesday:()=>k.PG,timeTuesdays:()=>k.OK,timeWednesday:()=>k.Gu,timeWednesdays:()=>k.Dr,timeWeek:()=>k.Kg,timeWeeks:()=>k.TX,timeYear:()=>k.he,timeYears:()=>k.Yo,timeout:()=>C.wR,timer:()=>C.O1,timerFlush:()=>C.O2,transition:()=>D.kY,transpose:()=>r.mg,tree:()=>_.B2,treemap:()=>_.hk,treemapBinary:()=>_.G,treemapDice:()=>_.iL,treemapResquarify:()=>_.gg,treemapSlice:()=>_.Xv,treemapSliceDice:()=>_.Yi,treemapSquarify:()=>_.bC,tsv:()=>p.KZ,tsvFormat:()=>h.Nc,tsvFormatBody:()=>h.F2,tsvFormatRow:()=>h.pn,tsvFormatRows:()=>h.KS,tsvFormatValue:()=>h.CL,tsvParse:()=>h.Nu,tsvParseRows:()=>h.cP,union:()=>r.KC,utcDay:()=>k.dA,utcDays:()=>k.ou,utcFormat:()=>E.aL,utcFriday:()=>k.a1,utcFridays:()=>k.Zn,utcHour:()=>k.pz,utcHours:()=>k.iA,utcMillisecond:()=>k.Ee,utcMilliseconds:()=>k.Lg,utcMinute:()=>k.O0,utcMinutes:()=>k.Y4,utcMonday:()=>k.rt,utcMondays:()=>k.ON,utcMonth:()=>k.R6,utcMonths:()=>k.oi,utcParse:()=>E.GY,utcSaturday:()=>k.c8,utcSaturdays:()=>k.Xo,utcSecond:()=>k.Hn,utcSeconds:()=>k.kk,utcSunday:()=>k.Hl,utcSundays:()=>k.aZ,utcThursday:()=>k.pT,utcThursdays:()=>k.wr,utcTickInterval:()=>k.lk,utcTicks:()=>k.$Z,utcTuesday:()=>k.sr,utcTuesdays:()=>k.jN,utcWednesday:()=>k.z2,utcWednesdays:()=>k.G6,utcWeek:()=>k.zX,utcWeeks:()=>k.y9,utcYear:()=>k.Mb,utcYears:()=>k.jH,variance:()=>r.GV,window:()=>N.x,xml:()=>p._n,zip:()=>r.yU,zoom:()=>F.s_,zoomIdentity:()=>F.GS,zoomTransform:()=>F._V});var r=e(19864),i=e(54575),o=e(91164),a=e(69930),u=e(47662),c=e(87830),s=e(72751),f=e(18019),l=e(9180),h=e(35329),d=e(1580),p=e(4728),g=e(2330),y=e(28881),v=e(6833),_=e(27050),m=e(63638),b=e(56926),A=e(84490),x=e(46050),w=e(3961),M=e(32098),T=e(87645),N=e(58094),S=e(25440),k=e(65300),E=e(79894),C=e(81884),D=e(13969),F=e(51505)},68510:(t,n,e)=>{"use strict";e.d(n,{A:()=>a});var r=e(60497);const i=Math.pow(2,-52),o=new Uint32Array(512);class a{static from(t,n=h,e=d){const r=t.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=t[o];i[2*o]=n(r),i[2*o+1]=e(r)}return new a(i)}constructor(t){const n=t.length>>1;if(n>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const e=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*e),this._halfedges=new Int32Array(3*e),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:e,_hullTri:o,_hullHash:a}=this,c=t.length>>1;let l=1/0,h=1/0,d=-1/0,p=-1/0;for(let n=0;n<c;n++){const e=t[2*n],r=t[2*n+1];e<l&&(l=e),r<h&&(h=r),e>d&&(d=e),r>p&&(p=r),this._ids[n]=n}const g=(l+d)/2,y=(h+p)/2;let v,_,m,b=1/0;for(let n=0;n<c;n++){const e=u(g,y,t[2*n],t[2*n+1]);e<b&&(v=n,b=e)}const A=t[2*v],x=t[2*v+1];b=1/0;for(let n=0;n<c;n++){if(n===v)continue;const e=u(A,x,t[2*n],t[2*n+1]);e<b&&e>0&&(_=n,b=e)}let w=t[2*_],M=t[2*_+1],T=1/0;for(let n=0;n<c;n++){if(n===v||n===_)continue;const e=s(A,x,w,M,t[2*n],t[2*n+1]);e<T&&(m=n,T=e)}let N=t[2*m],S=t[2*m+1];if(T===1/0){for(let n=0;n<c;n++)this._dists[n]=t[2*n]-t[0]||t[2*n+1]-t[1];f(this._ids,this._dists,0,c-1);const n=new Uint32Array(c);let e=0;for(let t=0,r=-1/0;t<c;t++){const i=this._ids[t];this._dists[i]>r&&(n[e++]=i,r=this._dists[i])}return this.hull=n.subarray(0,e),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if((0,r.c_)(A,x,w,M,N,S)<0){const t=_,n=w,e=M;_=m,w=N,M=S,m=t,N=n,S=e}const k=function(t,n,e,r,i,o){const a=e-t,u=r-n,c=i-t,s=o-n,f=a*a+u*u,l=c*c+s*s,h=.5/(a*s-u*c);return{x:t+(s*f-u*l)*h,y:n+(a*l-c*f)*h}}(A,x,w,M,N,S);this._cx=k.x,this._cy=k.y;for(let n=0;n<c;n++)this._dists[n]=u(t[2*n],t[2*n+1],k.x,k.y);f(this._ids,this._dists,0,c-1),this._hullStart=v;let E=3;e[v]=n[m]=_,e[_]=n[v]=m,e[m]=n[_]=v,o[v]=0,o[_]=1,o[m]=2,a.fill(-1),a[this._hashKey(A,x)]=v,a[this._hashKey(w,M)]=_,a[this._hashKey(N,S)]=m,this.trianglesLen=0,this._addTriangle(v,_,m,-1,-1,-1);for(let u,c,s=0;s<this._ids.length;s++){const f=this._ids[s],l=t[2*f],h=t[2*f+1];if(s>0&&Math.abs(l-u)<=i&&Math.abs(h-c)<=i)continue;if(u=l,c=h,f===v||f===_||f===m)continue;let d=0;for(let t=0,n=this._hashKey(l,h);t<this._hashSize&&(d=a[(n+t)%this._hashSize],-1===d||d===e[d]);t++);d=n[d];let p,g=d;for(;p=e[g],(0,r.c_)(l,h,t[2*g],t[2*g+1],t[2*p],t[2*p+1])>=0;)if(g=p,g===d){g=-1;break}if(-1===g)continue;let y=this._addTriangle(g,f,e[g],-1,-1,o[g]);o[f]=this._legalize(y+2),o[g]=y,E++;let b=e[g];for(;p=e[b],(0,r.c_)(l,h,t[2*b],t[2*b+1],t[2*p],t[2*p+1])<0;)y=this._addTriangle(b,f,p,o[f],-1,o[b]),o[f]=this._legalize(y+2),e[b]=b,E--,b=p;if(g===d)for(;p=n[g],(0,r.c_)(l,h,t[2*p],t[2*p+1],t[2*g],t[2*g+1])<0;)y=this._addTriangle(p,f,g,-1,o[g],o[p]),this._legalize(y+2),o[p]=y,e[g]=g,E--,g=p;this._hullStart=n[f]=g,e[g]=n[b]=f,e[f]=b,a[this._hashKey(l,h)]=f,a[this._hashKey(t[2*g],t[2*g+1])]=g}this.hull=new Uint32Array(E);for(let t=0,n=this._hullStart;t<E;t++)this.hull[t]=n,n=e[n];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(function(t,n){const e=t/(Math.abs(t)+Math.abs(n));return(n>0?3-e:1+e)/4}(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:e,coords:r}=this;let i=0,a=0;for(;;){const u=e[t],s=t-t%3;if(a=s+(t+2)%3,-1===u){if(0===i)break;t=o[--i];continue}const f=u-u%3,l=s+(t+1)%3,h=f+(u+2)%3,d=n[a],p=n[t],g=n[l],y=n[h];if(c(r[2*d],r[2*d+1],r[2*p],r[2*p+1],r[2*g],r[2*g+1],r[2*y],r[2*y+1])){n[t]=y,n[u]=d;const r=e[h];if(-1===r){let n=this._hullStart;do{if(this._hullTri[n]===h){this._hullTri[n]=t;break}n=this._hullPrev[n]}while(n!==this._hullStart)}this._link(t,r),this._link(u,e[a]),this._link(a,h);const c=f+(u+1)%3;i<o.length&&(o[i++]=c)}else{if(0===i)break;t=o[--i]}}return a}_link(t,n){this._halfedges[t]=n,-1!==n&&(this._halfedges[n]=t)}_addTriangle(t,n,e,r,i,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=e,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function u(t,n,e,r){const i=t-e,o=n-r;return i*i+o*o}function c(t,n,e,r,i,o,a,u){const c=t-a,s=n-u,f=e-a,l=r-u,h=i-a,d=o-u,p=f*f+l*l,g=h*h+d*d;return c*(l*g-p*d)-s*(f*g-p*h)+(c*c+s*s)*(f*d-l*h)<0}function s(t,n,e,r,i,o){const a=e-t,u=r-n,c=i-t,s=o-n,f=a*a+u*u,l=c*c+s*s,h=.5/(a*s-u*c),d=(s*f-u*l)*h,p=(a*l-c*f)*h;return d*d+p*p}function f(t,n,e,r){if(r-e<=20)for(let i=e+1;i<=r;i++){const r=t[i],o=n[r];let a=i-1;for(;a>=e&&n[t[a]]>o;)t[a+1]=t[a--];t[a+1]=r}else{let i=e+1,o=r;l(t,e+r>>1,i),n[t[e]]>n[t[r]]&&l(t,e,r),n[t[i]]>n[t[r]]&&l(t,i,r),n[t[e]]>n[t[i]]&&l(t,e,i);const a=t[i],u=n[a];for(;;){do{i++}while(n[t[i]]<u);do{o--}while(n[t[o]]>u);if(o<i)break;l(t,i,o)}t[e+1]=t[o],t[o]=a,r-i+1>=o-e?(f(t,n,i,r),f(t,n,e,o-1)):(f(t,n,e,o-1),f(t,n,i,r))}}function l(t,n,e){const r=t[n];t[n]=t[e],t[e]=r}function h(t){return t[0]}function d(t){return t[1]}},34080:(t,n,e)=>{"use strict";e.d(n,{B:()=>r,v:()=>i});class r extends Map{constructor(t,n=c){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=t)for(const[n,e]of t)this.set(n,e)}get(t){return super.get(o(this,t))}has(t){return super.has(o(this,t))}set(t,n){return super.set(a(this,t),n)}delete(t){return super.delete(u(this,t))}}class i extends Set{constructor(t,n=c){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=t)for(const n of t)this.add(n)}has(t){return super.has(o(this,t))}add(t){return super.add(a(this,t))}delete(t){return super.delete(u(this,t))}}function o({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):e}function a({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):(t.set(r,e),e)}function u({_intern:t,_key:n},e){const r=n(e);return t.has(r)&&(e=t.get(r),t.delete(r)),e}function c(t){return null!==t&&"object"==typeof t?t.valueOf():t}},48606:(t,n,e)=>{"use strict";var r=e(45189);r.Ni,r.Ni,r.Ni,r.Ni,r.Ni,r.Ni,r.Ni,(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(8),(0,r.t6)(8),(0,r.t6)(8),(0,r.t6)(8),(0,r.t6)(8),(0,r.t6)(8),(0,r.t6)(8),(0,r.t6)(8),(0,r.t6)(8),(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(8),(0,r.t6)(16),(0,r.t6)(16),(0,r.t6)(16),(0,r.t6)(32),(0,r.t6)(32),(0,r.t6)(48),(0,r.t6)(64),(0,r.t6)(1152),(0,r.t6)(1152)},41955:(t,n,e)=>{"use strict";var r=e(45189);r.Ni,r.Ni,r.Ni,r.Ni,r.Ni,r.Ni,r.Ni,(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(24),(0,r.t6)(24),(0,r.t6)(24),(0,r.t6)(24),(0,r.t6)(24),(0,r.t6)(24),(0,r.t6)(24),(0,r.t6)(24),(0,r.t6)(24),(0,r.t6)(24),(0,r.t6)(1152),(0,r.t6)(1152),(0,r.t6)(1152),(0,r.t6)(1152),(0,r.t6)(1152),(0,r.t6)(2304),(0,r.t6)(2304),(0,r.t6)(3456),(0,r.t6)(5760),(0,r.t6)(8),(0,r.t6)(8),(0,r.t6)(8),(0,r.t6)(16),(0,r.t6)(24),(0,r.t6)(48),(0,r.t6)(48),(0,r.t6)(96),(0,r.t6)(192),(0,r.t6)(384),(0,r.t6)(384),(0,r.t6)(384),(0,r.t6)(768),(0,r.t6)(96),(0,r.t6)(96),(0,r.t6)(96),(0,r.t6)(1152)},13414:(t,n,e)=>{"use strict";e.d(n,{c:()=>h});var r=e(45189);const i=(3+16*r.Ni)*r.Ni,o=(2+12*r.Ni)*r.Ni,a=(9+64*r.Ni)*r.Ni*r.Ni,u=(0,r.t6)(4),c=(0,r.t6)(8),s=(0,r.t6)(12),f=(0,r.t6)(16),l=(0,r.t6)(4);function h(t,n,e,h,d,p){const g=(n-p)*(e-d),y=(t-d)*(h-p),v=g-y;if(0===g||0===y||g>0!=y>0)return v;const _=Math.abs(g+y);return Math.abs(v)>=i*_?v:-function(t,n,e,i,h,d,p){let g,y,v,_,m,b,A,x,w,M,T,N,S,k,E,C,D,F;const P=t-h,z=e-h,I=n-d,U=i-d;k=P*U,b=r.Uo*P,A=b-(b-P),x=P-A,b=r.Uo*U,w=b-(b-U),M=U-w,E=x*M-(k-A*w-x*w-A*M),C=I*z,b=r.Uo*I,A=b-(b-I),x=I-A,b=r.Uo*z,w=b-(b-z),M=z-w,D=x*M-(C-A*w-x*w-A*M),T=E-D,m=E-T,u[0]=E-(T+m)+(m-D),N=k+T,m=N-k,S=k-(N-m)+(T-m),T=S-C,m=S-T,u[1]=S-(T+m)+(m-C),F=N+T,m=F-N,u[2]=N-(F-m)+(T-m),u[3]=F;let R=(0,r.jA)(4,u),j=o*p;if(R>=j||-R>=j)return R;if(m=t-P,g=t-(P+m)+(m-h),m=e-z,v=e-(z+m)+(m-h),m=n-I,y=n-(I+m)+(m-d),m=i-U,_=i-(U+m)+(m-d),0===g&&0===y&&0===v&&0===_)return R;if(j=a*p+r.NE*Math.abs(R),R+=P*_+U*g-(I*v+z*y),R>=j||-R>=j)return R;k=g*U,b=r.Uo*g,A=b-(b-g),x=g-A,b=r.Uo*U,w=b-(b-U),M=U-w,E=x*M-(k-A*w-x*w-A*M),C=y*z,b=r.Uo*y,A=b-(b-y),x=y-A,b=r.Uo*z,w=b-(b-z),M=z-w,D=x*M-(C-A*w-x*w-A*M),T=E-D,m=E-T,l[0]=E-(T+m)+(m-D),N=k+T,m=N-k,S=k-(N-m)+(T-m),T=S-C,m=S-T,l[1]=S-(T+m)+(m-C),F=N+T,m=F-N,l[2]=N-(F-m)+(T-m),l[3]=F;const L=(0,r.cz)(4,u,4,l,c);k=P*_,b=r.Uo*P,A=b-(b-P),x=P-A,b=r.Uo*_,w=b-(b-_),M=_-w,E=x*M-(k-A*w-x*w-A*M),C=I*v,b=r.Uo*I,A=b-(b-I),x=I-A,b=r.Uo*v,w=b-(b-v),M=v-w,D=x*M-(C-A*w-x*w-A*M),T=E-D,m=E-T,l[0]=E-(T+m)+(m-D),N=k+T,m=N-k,S=k-(N-m)+(T-m),T=S-C,m=S-T,l[1]=S-(T+m)+(m-C),F=N+T,m=F-N,l[2]=N-(F-m)+(T-m),l[3]=F;const O=(0,r.cz)(L,c,4,l,s);k=g*_,b=r.Uo*g,A=b-(b-g),x=g-A,b=r.Uo*_,w=b-(b-_),M=_-w,E=x*M-(k-A*w-x*w-A*M),C=y*v,b=r.Uo*y,A=b-(b-y),x=y-A,b=r.Uo*v,w=b-(b-v),M=v-w,D=x*M-(C-A*w-x*w-A*M),T=E-D,m=E-T,l[0]=E-(T+m)+(m-D),N=k+T,m=N-k,S=k-(N-m)+(T-m),T=S-C,m=S-T,l[1]=S-(T+m)+(m-C),F=N+T,m=F-N,l[2]=N-(F-m)+(T-m),l[3]=F;const Y=(0,r.cz)(O,s,4,l,f);return f[Y-1]}(t,n,e,h,d,p,_)}},61811:(t,n,e)=>{"use strict";var r=e(45189);r.Ni,r.Ni,r.Ni,r.Ni,r.Ni,r.Ni,r.Ni,(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(4),(0,r.t6)(8),(0,r.t6)(8),(0,r.t6)(8),(0,r.t6)(4),(0,r.t6)(8),(0,r.t6)(8),(0,r.t6)(8),(0,r.t6)(12),(0,r.t6)(192),(0,r.t6)(192)},45189:(t,n,e)=>{"use strict";e.d(n,{NE:()=>o,Ni:()=>r,Uo:()=>i,cz:()=>a,jA:()=>u,t6:()=>c});const r=11102230246251565e-32,i=134217729,o=(3+8*r)*r;function a(t,n,e,r,i){let o,a,u,c,s=n[0],f=r[0],l=0,h=0;f>s==f>-s?(o=s,s=n[++l]):(o=f,f=r[++h]);let d=0;if(l<t&&h<e)for(f>s==f>-s?(a=s+o,u=o-(a-s),s=n[++l]):(a=f+o,u=o-(a-f),f=r[++h]),o=a,0!==u&&(i[d++]=u);l<t&&h<e;)f>s==f>-s?(a=o+s,c=a-o,u=o-(a-c)+(s-c),s=n[++l]):(a=o+f,c=a-o,u=o-(a-c)+(f-c),f=r[++h]),o=a,0!==u&&(i[d++]=u);for(;l<t;)a=o+s,c=a-o,u=o-(a-c)+(s-c),s=n[++l],o=a,0!==u&&(i[d++]=u);for(;h<e;)a=o+f,c=a-o,u=o-(a-c)+(f-c),f=r[++h],o=a,0!==u&&(i[d++]=u);return 0===o&&0!==d||(i[d++]=o),d}function u(t,n){let e=n[0];for(let r=1;r<t;r++)e+=n[r];return e}function c(t){return new Float64Array(t)}},60497:(t,n,e)=>{"use strict";e.d(n,{c_:()=>r.c});var r=e(13414);e(61811),e(48606),e(41955)}},n={};function e(r){var i=n[r];if(void 0!==i)return i.exports;var o=n[r]={exports:{}};return t[r].call(o.exports,o,o.exports,e),o.exports}e.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},e.d=(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};(()=>{"use strict";e.r(r),e.d(r,{default:()=>o});var t=e(6569),n=e(30327).powerbi,i={name:"DataMaLightCompareWaterfall",displayName:"Datama - Waterfall - What is driving my variation?",class:"Visual",apiVersion:"5.1.0",create:n=>{if(t.b)return new t.b(n);throw"Visual instance not found"},createModalDialog:(t,n,e)=>{const r=globalThis.dialogRegistry;t in r&&new r[t](n,e)},custom:!0};void 0!==n&&(n.visuals=n.visuals||{},n.visuals.plugins=n.visuals.plugins||{},n.visuals.plugins.DataMaLightCompareWaterfall=i);const o=i})(),DataMaLightCompareWaterfall=r})();